- en: SQL in Azure - Azure SQL
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 中的 SQL - Azure SQL
- en: Microsoft SQL Server is one of the most popular databases and is often the core
    of many popular applications. Thanks to Azure, we can skip the whole cluster setup,
    installation, and maintenance by using Azure SQL—a cloud version of SQL Server
    with the same features available. Thanks to flexible pricing, we can select whichever
    option we want when it comes to both performance and available features. We don't
    have to worry about geo-replication and storing backups either—all these functionalities
    can be easily configured and automated in the cloud.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft SQL Server 是最流行的数据库之一，通常是许多流行应用程序的核心。借助 Azure，我们可以跳过整个集群设置、安装和维护的过程，使用
    Azure SQL —— 这是 SQL Server 的云版本，具有相同的功能。得益于灵活的定价，我们可以根据性能和可用功能选择任何我们想要的选项。我们也不需要担心地理复制和存储备份
    —— 所有这些功能都可以在云中轻松配置和自动化。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Differences between Microsoft SQL Server and Azure SQL
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft SQL Server 和 Azure SQL 之间的差异
- en: Working with Azure SQL in the Azure portal
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Azure 门户中使用 Azure SQL
- en: Security features of Azure SQL
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure SQL 的安全特性
- en: Scaling and monitor Azure SQL
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展和监控 Azure SQL
- en: Technical requirements
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To perform the exercises in this chapter, you will need:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行本章中的练习，你将需要：
- en: An Azure subscription
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 Azure 订阅
- en: Differences between Microsoft SQL Server and Azure SQL
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Microsoft SQL Server 和 Azure SQL 之间的差异
- en: '**Microsoft SQL Server** is a well-known and widely used SQL database server
    that has gained much popularity and is considered a default choice for many projects
    ranging from very simple websites to enterprise-class services that handle high
    load and are considered critical for a business. As cloud technologies gain more
    and more popularity, the natural consequence of such a situation is the expectation
    that by moving an application to Azure, it is also possible to move its database.
    To meet such needs, Microsoft has developed Azure SQLService—a PaaS version of
    Microsoft SQL Server that is managed and upgraded by their teams; the only things
    you are responsible for are configuration and data management. There is also one
    more offering from Azure called SQL Server VMs, which is one more option for using
    this database in the cloud. In this section, we will focus on the differences
    between these two offerings and try to identify different use cases for them.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '**Microsoft SQL Server** 是一个广为人知且广泛使用的 SQL 数据库服务器，已经获得了很高的流行度，并且被认为是许多项目的默认选择，这些项目从非常简单的网站到处理高负载并对业务至关重要的企业级服务都有。随着云技术的日益流行，随着这种情况的自然发展，人们期望通过将应用程序迁移到
    Azure，数据库也能够随之迁移。为了满足这种需求，微软开发了 Azure SQL Service —— 一种微软 SQL Server 的 PaaS 版本，由他们的团队进行管理和升级；你需要负责的只有配置和数据管理。Azure
    还提供了另一种选项，即 SQL Server VMs，这是在云中使用该数据库的另一种方式。在本节中，我们将重点讨论这两种服务的区别，并尝试识别它们的不同使用场景。'
- en: Azure SQL fundamentals
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure SQL 基础知识
- en: 'By using PaaS services in the cloud, you are shifting responsibilities a little
    bit:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用云中的 PaaS 服务，你正在稍微转移一些责任：
- en: You are no longer the maintainer of the infrastructure
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你不再是基础设施的维护者
- en: You are no longer responsible for different updates when software is considered
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当软件被考虑时，你不再需要负责不同的更新
- en: By signing SLA with you, your provider is responsible for making sure that a
    service is up and running
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过与提供商签署 SLA，提供商负责确保服务正常运行
- en: 'Instead, you should focus on the following points:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，你应该专注于以下几点：
- en: Properly configuring a service, so it meets your performance targets and legal
    requirements
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正确配置服务，以满足你的性能目标和法律要求
- en: Integrating different services and applications, so they reflect the best practices
    when it comes to communicating with a service
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集成不同的服务和应用程序，以便它们在与服务通信时能够体现最佳实践
- en: Implementing HA/DR scenarios, so an outage or disaster in one region does not
    impact your systems
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现 HA/DR 场景，以确保某一地区的故障或灾难不会影响你的系统
- en: 'By using Microsoft SQL Server, you are fully on your/leased machines, which
    you have to maintain and monitor. While such a case is valid in many scenarios
    (as there can be some legal requirements that disallow you from storing data outside
    your own data center or simply, for some reason, Azure does not provide you with
    the expected performance you seek), yet in many situations, having a PaaS instance
    of your SQL database is a big improvement. In fact, you are given a few different
    options when using this service:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Microsoft SQL Server 时，你完全在你自己的机器或租赁机器上，这些机器需要你自己维护和监控。虽然在许多场景下这种情况是合理的（因为可能有一些法律要求禁止你将数据存储在自己的数据中心以外，或者由于某些原因
    Azure 无法提供你期望的性能），但在许多情况下，使用 PaaS 实例的 SQL 数据库是一个巨大的改进。事实上，使用此服务时，你有几个不同的选择：
- en: A single database with isolated resources
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有隔离资源的单一数据库
- en: A pooled database in an elastic pool
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 弹性池中的池数据库
- en: Managed instance, which is the closest model when it comes to comparing it with
    on-premise SQL Server
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 托管实例，这是与本地 SQL Server 最相似的模型
- en: 'The important thing to know is that all new features and updates are deployed
    to SQL databases hosted within Azure. This gives you an advantage in comparison
    with traditional Microsoft SQL Server, as you are always up to date: you do not
    have to schedule updates on your servers on your own.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 需要了解的重要一点是，所有新功能和更新都会部署到托管在 Azure 中的 SQL 数据库。这相比传统的 Microsoft SQL Server 给你带来了优势，因为你始终保持最新：你不需要自行安排服务器上的更新。
- en: The more servers and databases you have, the more complicated and difficult
    the process of updating them becomes. Take that into account when comparing these
    two offerings.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 你拥有的服务器和数据库越多，更新它们的过程就变得越复杂和困难。比较这两种产品时，请考虑这一点。
- en: 'Another crucial thing when talking about Azure SQLis its purchasing model.
    Currently, you have two options:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个谈论 Azure SQL 时至关重要的方面是其购买模型。目前，你有两个选项：
- en: '**DTU-based**: A DTU is a mix of computing, memory, and I/O resources that
    are given to your database'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于 DTU**：DTU 是计算、内存和 I/O 资源的混合，这些资源分配给你的数据库'
- en: '**vCore-based**: This one simply allows you to select all things on your own
    (including the number of vCores, the amount of memory, and storage performance)'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于 vCore**：这个选项允许你自己选择所有内容（包括 vCore 数量、内存大小和存储性能）。'
- en: You may wonder how a DTU reflects the actual hardware; there is a good article
    that tries to explain these metrics a little bit in the *Further reading*section
    for this chapter.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会想知道 DTU 如何反映实际的硬件；有一篇很好的文章试图在本章的*进一步阅读*部分解释这些度量标准。
- en: In most cases, using DTU as the metric is the better choice—very often it is
    hard to predict the exact hardware requirements for your application. Use the
    vCore-based model when you are an advanced SQL server user and know how many cores
    or memory you really need.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在大多数情况下，使用 DTU 作为度量标准是更好的选择——因为很难预测应用程序的确切硬件需求。当你是高级 SQL Server 用户并且知道自己究竟需要多少核心或内存时，可以使用基于
    vCore 的模型。
- en: 'You may wonder, What are the scaling capabilities of Azure SQLService? While
    of course you can assign more (or fewer) resources to your database, there are
    scenarios when this makes things much more complicated (or simply your application
    has different demands when it comes to database performance, and such a model
    simply will not work). To cover those situations, you are given the option to
    use elastic pools. The concept is pretty simple—normally you allocate resources
    to a single database:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会想，Azure SQL Service 的扩展能力是什么？当然，你可以为你的数据库分配更多（或更少）资源，但有些场景下这会使事情变得更加复杂（或者你的应用程序在数据库性能方面有不同的需求，这种模型根本行不通）。为了应对这些情况，你可以选择使用弹性池。这个概念相当简单——通常，你为单个数据库分配资源：
- en: '![](img/215e67c3-8b87-471c-a2fb-c381f4d57b89.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](img/215e67c3-8b87-471c-a2fb-c381f4d57b89.png)'
- en: 'With elastic pools, you change the model a little bit and instead your pool
    has resources allocated, as follows:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 使用弹性池时，你稍微改变了模型，池中的资源被分配，具体如下：
- en: '![](img/8a9f1c64-8fac-476d-bc59-39df5876e062.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8a9f1c64-8fac-476d-bc59-39df5876e062.png)'
- en: What does that change? Well, this gives you much more flexibility; instead of
    hosting a huge single database (when it comes to resources allocated), you can
    easily scale it out, so it can share the load with other instances. What is more,
    it gives you better control when it comes to costs; you can scale your databases
    at the same time without the need to control what their individual needs are.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 这有什么变化呢？这为你提供了更多的灵活性；你不再需要托管一个庞大的单一数据库（在资源分配方面），你可以轻松地进行扩展，使其与其他实例共享负载。而且，它在成本控制方面也更具优势；你可以同时扩展多个数据库，而不需要控制它们各自的需求。
- en: Scaling Azure SQLis an important topic that requires initially much attention—we
    will come back to it at the end of this chapter.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展 Azure SQL 是一个重要的课题，需要最初的很多关注——我们将在本章末尾回到这个话题。
- en: 'Besides performance and different scaling capabilities, Azure SQLgives you
    many additional features that are very important when considering it as storage
    for your data. Because an application without information stored in a database
    is, in most cases, useless, availability considerations are also very important
    here. Fortunately, Azure SQLhas implemented many great features that make it a
    full-fledged storage option:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 除了性能和不同的扩展能力外，Azure SQL 还提供了许多在考虑将其作为数据存储时非常重要的附加功能。因为没有存储在数据库中的信息，通常情况下一个应用程序是没有意义的，因此可用性也是非常重要的。幸运的是，Azure
    SQL 实现了许多出色的功能，使其成为一个成熟的存储选项：
- en: '**Automatic backups**: In the on-premise world, configuring and managing backups
    is much more complicated, as it requires you to know the server configuration
    and find a place to store them. In Azure, things are greatly simplified by integrating
    automatic backups for Azure Storage for performance and reliability.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动备份**：在本地环境中，配置和管理备份要复杂得多，因为你需要了解服务器配置并找到存储它们的地方。而在 Azure 中，事情变得非常简单，因为
    Azure Storage 集成了自动备份，确保性能和可靠性。'
- en: '**Geo-replication**: Even if a single region fails, you can still serve data
    for your customers. With Azure SQL,you can configure a secondary read region that
    will make sure you can stay online until an outage is resolved.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地理复制**：即使单个区域出现故障，你仍然可以为客户提供数据。通过 Azure SQL，你可以配置一个次级读取区域，确保在故障解决之前你能保持在线。'
- en: '**Failover groups**: Instead of implementing failover capabilities and logic
    on your own, you can rely on what Azure SQLcurrently provides. This makes creating
    globally distributed applications much easier as you care only about the configuration
    and not infrastructure.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**故障转移组**：你不需要自己实现故障转移能力和逻辑，可以依赖 Azure SQL 当前提供的功能。这使得创建全球分布的应用程序变得更加容易，因为你只需要关注配置，而不需要担心基础设施。'
- en: To know exactly what is different in Azure SQLin comparison with Microsoft SQL
    Server, you can refer to the following link : [https://docs.microsoft.com/en-us/azure/sql-database/sql-database-features](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-features).
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 要准确了解 Azure SQL 与 Microsoft SQL Server 的区别，可以参考以下链接：[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-features](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-features)。
- en: Advanced Azure SQL features
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级 Azure SQL 特性
- en: 'Besides some basic functionalities that ensure Azure SQLis a full version of
    a relational database on which you can rely and build your system, there are plenty
    of additional features that make using this service real fun:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 除了一些确保 Azure SQL 是一个完整的关系型数据库并且可以依赖构建系统的基本功能外，还有许多附加功能，使得使用这个服务变得非常有趣：
- en: '**Automatic monitoring and tuning**: How many times, after using a database
    for several months, have you ended up with a database full of outdated indexes,
    procedures, and functions? Azure SQLmakes things much easier by actively monitoring
    how you use and maintain your database and advising you whenever an improvement
    is possible. I find this feature extremely helpful—nowadays, when development
    is especially rapid and focused on delivering new values to the market, it is
    really easy to get lost and lose track of what should be removed from a database.
    With the service recommendations for dropping indexes, schema improvements, and
    queries parameterization, I find my storage in much better shape for most of the
    time.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动监控和调优**：你有没有遇到过这样的情况，在使用数据库几个月后，数据库里充满了过时的索引、存储过程和函数？Azure SQL 通过主动监控你如何使用和维护数据库，并在有改进的空间时给出建议，使这一过程变得更加简单。我发现这个功能非常有帮助——如今，开发速度特别快，且重点在于为市场提供新价值，很容易迷失方向，忽视应该从数据库中移除的内容。借助服务推荐来删除索引、改进模式和查询参数化，我发现大多数时候我的存储状态更好了。'
- en: '**Adaptive query processing**: While this feature is also available for SQL
    Server, having it in Azure SQLis a great addition to other performance recommendations.
    Basically, when it is enabled, the server engine tries to find the best execution
    plan for your queries.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自适应查询处理**：虽然 SQL Server 也有这个功能，但在 Azure SQL 中使用它是对其他性能推荐的一个重要补充。基本上，当启用此功能时，服务器引擎会尝试找到查询的最佳执行计划。'
- en: '**Security and compliance features**: It is really important to ensure that
    the data you store is secure and all vulnerabilities are detected as quickly as
    possible. In Azure SQL,you are given plenty of additional features that try to
    analyze your data in terms of sensitivity and compliance. There are in-built tools
    which search for any kind of anomalies and threats that could affect data integrity
    or lead to their leak. Additionally, Azure SQLis integrated with the Azure **Active
    Directory** (**AD**)and allows for **multi-factor authentication** (**MFA**)—this
    makes things such as auditing and authorization much easier without additional
    effort.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全性和合规性功能**：确保你存储的数据是安全的，并且所有漏洞能够尽早被发现是非常重要的。在 Azure SQL 中，提供了很多额外功能，旨在从敏感性和合规性的角度分析你的数据。有内建工具会搜索任何可能影响数据完整性或导致数据泄露的异常和威胁。此外，Azure
    SQL 与 Azure **Active Directory** (**AD**) 集成，并支持 **多因素认证** (**MFA**)——这使得审计和授权等操作变得更加简单，无需额外努力。'
- en: The security features for Azure SQLwill be described later in this chapter so
    you have the whole picture of this service's capabilities that matter.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Azure SQL 的安全功能将在本章后续部分进行描述，这样你可以全面了解该服务的功能。
- en: SQL Server on VMs
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SQL Server 在虚拟机上
- en: 'If you do not want to go full PaaS, you can create a virtual machine with a
    SQL Server image already in-built. In that option, the performance of the service
    will rely on the performance of the VM—if you find the database running low on
    CPU or memory, the only thing you have to do is to scale up the machine. To create
    a VM in the portal, you have to search for a SQL Server running on an OS of your
    choice, as follows:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不想完全使用 PaaS，你可以创建一个已经内置 SQL Server 镜像的虚拟机。在这种选项下，服务的性能将依赖于虚拟机的性能——如果你发现数据库的
    CPU 或内存资源不足，唯一需要做的就是扩展虚拟机。要在门户中创建虚拟机，你需要搜索运行在你选择操作系统上的 SQL Server，如下所示：
- en: '![](img/3594814b-b8c4-485f-a9fa-d050ee553bc1.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3594814b-b8c4-485f-a9fa-d050ee553bc1.png)'
- en: As you can see, there are free SQL Server licenses available and what is more,
    newer versions can run on Linux machines. Once you select the image you are interested
    in, you can click on the Createbutton to begin the machine's configuration.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，提供了免费的 SQL Server 许可证，而且更重要的是，更新的版本可以在 Linux 机器上运行。一旦你选择了感兴趣的镜像，你可以点击“创建”按钮开始配置虚拟机。
- en: 'As you can see in the following screenshot, there are many fields which have
    to be filled in to be able to actually use the service:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，有许多字段需要填写，才能实际使用该服务：
- en: '![](img/155147a0-85a0-43c8-aec8-fd4f17b8de8f.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](img/155147a0-85a0-43c8-aec8-fd4f17b8de8f.png)'
- en: This is, of course, related to the IaaS model of that way of hosting SQL Server
    inside Azure. The configuration wizard will advise you about the default size
    of the VM and other parameters required for the machine. Once the configuration
    is completed, you will be able to connect to it either via RDP or a secured SSH
    tunnel.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这与 SQL 服务器在 Azure 中的 IaaS 模型相关。配置向导将为你提供关于虚拟机默认大小和其他所需参数的建议。一旦配置完成，你将能够通过
    RDP 或安全的 SSH 隧道连接到它。
- en: Remember to open the `1433` port if you want to connect to SQL Server remotely.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想远程连接到 SQL 服务器，记得打开 `1433` 端口。
- en: Creating and configuring Azure SQL
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建和配置 Azure SQL
- en: After reading the beginning of this chapter, you should be able to sense how Azure
    SQLworks and what it offers for you. While some theory is always a good thing,
    it is practice which creates the full picture and allows you to fully understand
    the topic. In this section, we will focus on creating and configuring Azure SQLin
    the portal and trying to identify all the afore mentioned features. You will also
    see how managing this PaaS service is different from the on-premise version, especially
    when it comes to using its features.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在阅读本章开头后，你应该能够感知到 Azure SQL 如何工作以及它为你提供了什么。尽管一些理论始终是有益的，但实践才能勾画出完整的图景，并让你完全理解这个话题。在本节中，我们将专注于在门户中创建和配置
    Azure SQL，并尝试识别所有前述功能。你还将看到，管理这个 PaaS 服务与本地版本的区别，特别是在使用其功能时。
- en: Creating an Azure SQL instance
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 Azure SQL 实例
- en: 'In the Azure portal, when you search for `Azure SQL`, you will see plenty of
    different options such as SQL Database, SQL server (logical server), or SQL Elastic
    database pool. While they all allow you to create a database, the easiest way
    to get started with the service is to use** SQL Database**—this will require creating
    a server nonetheless. In the following screenshot, you can find a configuration
    for my server:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Azure 门户中，当你搜索 `Azure SQL` 时，你将看到许多不同的选项，如 SQL 数据库、SQL 服务器（逻辑服务器）或 SQL 弹性数据库池。虽然它们都允许你创建一个数据库，但开始使用该服务的最简单方法是使用
    **SQL 数据库** ——这仍然需要创建一个服务器。在下面的截图中，你可以看到我的服务器配置：
- en: '![](img/b8042750-0e51-4897-bd82-c59edca12788.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b8042750-0e51-4897-bd82-c59edca12788.png)'
- en: 'The following shows the configuration for my database:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我的数据库配置：
- en: '![](img/f01983c7-8f69-4bba-85cf-b8ab5e3eb9aa.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f01983c7-8f69-4bba-85cf-b8ab5e3eb9aa.png)'
- en: 'The important thing here is to select the source—you have three options here:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这里重要的是选择源——你有三个选项：
- en: 'Blank database: In most cases this will be the first option you are interested
    in'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 空白数据库：在大多数情况下，这是你最感兴趣的第一个选项
- en: Sample: I used it so I already have data inside my database
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 示例：我已经使用它，因此我的数据库中已经有数据
- en: 'Backup: A great option if you want to provision a database from an available
    backup'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 备份：如果你想从现有的备份中恢复一个数据库，这是一个很好的选项
- en: 'For the Blank databaseoption, you will also have the possibility to select
    a collation; in that dropdown, select the option that is correct for your data.
    We will also focus a little bit on the pricing configuration:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 对于空白数据库选项，你还可以选择排序规则；在下拉菜单中，选择适合你数据的选项。我们还将稍微关注一下定价配置：
- en: '![](img/1731cfc8-9ddf-4d6c-9aa5-fe1c39f731ba.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1731cfc8-9ddf-4d6c-9aa5-fe1c39f731ba.png)'
- en: 'As you can see, when using the DTU model, you have available three different
    tiers:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，使用 DTU 模型时，你可以选择三个不同的层级：
- en: 'Basic: For smaller workloads'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本：适用于较小的工作负载
- en: 'Standard: This offers the best balance between cost and performance'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准：在成本和性能之间提供最佳平衡
- en: 'Premium: For all workloads which require massive performance capabilities'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高级：适用于需要大规模性能能力的所有工作负载
- en: 'Depending on the tier, you will be offered either a fixed DTU amount (for Basic)
    or you will have to select the amount you are interested in:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 根据层级，你将获得固定的 DTU 数量（对于基本层），或者你需要选择你感兴趣的数量：
- en: '![](img/2456e246-2c66-4024-94e5-d622d4be616d.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2456e246-2c66-4024-94e5-d622d4be616d.png)'
- en: The important thing here is the fact that most of your database costs are resources-allocated—remember
    to select the biggest database size you can (for example, in the Standardtier
    and with 400 DTU selected, there is no difference in the pricing between 100 MB
    and 250 GB).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这里重要的是，大部分数据库成本都是基于资源分配的——记得选择你能选择的最大数据库大小（例如，在标准层并选择 400 DTU 时，100 MB 和 250
    GB 之间的定价没有差异）。
- en: 'Of course, you can also switch between a DTU-based model and vCores selection:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，你还可以在基于 DTU 的模型和 vCores 选择之间切换：
- en: '![](img/9bf3db10-3cd1-4c2c-85ea-86b1d6136673.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9bf3db10-3cd1-4c2c-85ea-86b1d6136673.png)'
- en: 'When using vCores, selecting the Max data sizedoes affect the pricing. What
    is more, here you have two different tiers available:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 vCore 时，选择“最大数据大小”会影响定价。此外，这里你可以选择两个不同的定价层：
- en: 'General Purpose: The best choice for most common scenarios without specific
    needs when it comes to resiliency and traffic'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一般用途：适用于大多数常见场景，无需特别的弹性和流量需求
- en: 'Business Critical: This tier offers better performance and lower latency (and
    is significantly more expensive)'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 业务关键：此级别提供更好的性能和更低的延迟（且价格显著更高）
- en: 'When you are satisfied with your configuration, you can click on the Createbutton,
    so the provisioning process will start. When it is finished, you can access your
    resource by going to the Overviewblade where basic info is available:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 当你对配置满意后，可以点击“创建”按钮，开始资源配置过程。配置完成后，你可以通过访问“概览”面板来查看基本信息：
- en: '![](img/7e58e2d2-82d0-4081-bb9f-bf894aa5e4f1.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7e58e2d2-82d0-4081-bb9f-bf894aa5e4f1.png)'
- en: Now we will try to go through most of the features, so you will have a better
    understanding of how to work with this service.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将尽量介绍大部分功能，以便你更好地理解如何使用此服务。
- en: Azure SQL features in the portal
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure SQL 功能在门户中
- en: We will start with the Configureblade—when you click on it, you will see that
    it allows you to set both the tier and the pricing model of your database. This
    option is especially helpful when you want to improve the performance of your
    database; you can easily change the amount of DTU or vCores allocated for it,
    so it can work with queries much quicker.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从“配置”面板开始——当你点击它时，你将看到它允许你设置数据库的等级和定价模型。当你想提高数据库的性能时，这个选项特别有用；你可以轻松更改为其分配的
    DTU 或 vCore 数量，使其可以更快速地处理查询。
- en: As I mentioned before, configuring a single database will work for simpler scenarios,
    where you can easily monitor it and the performance requirements do not rapidly
    change. In all other cases, the better option is to use elastic pools.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我之前提到的，配置单一数据库适用于较简单的场景，在这些场景中，你可以轻松监控数据库，且性能需求不会快速变化。在所有其他情况下，更好的选择是使用弹性池。
- en: 'When you go to the Geo-Replicationblade, you will see a similar map to the
    one you saw when testing Azure Cosmos DB:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 当你进入“地理复制”面板时，你将看到一个类似于测试时在 Azure Cosmos DB 中看到的地图：
- en: '![](img/db6fcc21-0bb2-4f2a-9c8b-51fd114222a0.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](img/db6fcc21-0bb2-4f2a-9c8b-51fd114222a0.png)'
- en: 'From this screen, you can quickly create a secondary region, which allows you
    to perform a failover when you need it. To do so, click on the region you are
    interested in and that will display the Create secondaryscreen:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在此页面上，你可以快速创建一个次级区域，以便在需要时执行故障转移。为此，点击你感兴趣的区域，接着将显示“创建次级”屏幕：
- en: '![](img/cfda0160-901b-4a58-bed4-455216f39554.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cfda0160-901b-4a58-bed4-455216f39554.png)'
- en: 'You will have to once more create a server (if there are none already available
    inside a region) and the pricing tier (which of course can be different for a
    secondary). Additionally, from this blade, you can enable a failover group for
    your database—to do so, click on the following panel:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 你将需要再次创建一个服务器（如果该区域内还没有现有的服务器）以及定价层（当然，次级数据库的定价层可以不同）。此外，在此面板中，你可以启用数据库的故障转移组——为此，请点击以下面板：
- en: '![](img/87381cd7-54c1-400e-89d2-a8ed885adcdb.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/87381cd7-54c1-400e-89d2-a8ed885adcdb.png)'
- en: 'By implementing a failover group, you can introduce an automatic failover for
    your database:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 通过实现故障转移组，你可以为你的数据库引入自动故障转移：
- en: '![](img/6abd4abb-de30-4c08-a25d-3e312ad18cde.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6abd4abb-de30-4c08-a25d-3e312ad18cde.png)'
- en: 'However, if you want to perform a forced failover, you can click on the secondary
    database, which will display a screen that allows that operation to be performed:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果你想执行强制故障转移，你可以点击次级数据库，这将显示一个允许执行该操作的屏幕：
- en: '![](img/901f610e-3677-4d25-a3c9-8b052bc75b95.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](img/901f610e-3677-4d25-a3c9-8b052bc75b95.png)'
- en: Remember that performing a failover can take some time to fully propagate—make
    sure you are ready for that.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，执行故障转移可能需要一些时间才能完全传播——确保你已做好准备。
- en: 'When you proceed to the Connection stringsblade, you will see a template for
    a connection string for different environments:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 当你进入连接字符串面板时，你将看到一个适用于不同环境的连接字符串模板：
- en: '![](img/bfa7bcec-a788-4508-ac4a-f6599c77c9da.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bfa7bcec-a788-4508-ac4a-f6599c77c9da.png)'
- en: You will also be able to download different drivers for ADO.NET, JDBC, ODBC, or
    PHP.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以下载不同的驱动程序，如 ADO.NET、JDBC、ODBC 或 PHP。
- en: Remember that the service presents only a template for your connection string—you
    will have to set your username and password to make it work.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，该服务仅提供连接字符串的模板——您必须设置用户名和密码才能使其工作。
- en: 'Currently, we are exploring SQL Database in Azure—let''s check exactly what
    SQL Server looks like currently. You can find it by clicking on the server nameon
    the Overviewblade. Initially, the screen will look the same, but you will quickly
    realize that it offers many different features:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们正在探索 Azure 中的 SQL 数据库——让我们看看当前 SQL 服务器的具体情况。您可以通过点击“概览”面板上的服务器名称找到它。最初，屏幕看起来一样，但您很快会意识到它提供了许多不同的功能：
- en: '![](img/d89b59fa-d40e-4392-b377-4ddad5fda1b8.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d89b59fa-d40e-4392-b377-4ddad5fda1b8.png)'
- en: 'Unfortunately, we will not able to go through all of the features, but I will
    try to describe most of them for you. When we look at the Settingssection, we
    can see the following blades:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，我们无法覆盖所有功能，但我会尽量为您描述其中的大部分。当我们查看“设置”部分时，我们可以看到以下面板：
- en: 'Failover groups: As discussed previously, to introduce automatic failover you
    have to create a failover group. A group consists of a primary and secondary server,
    which have a defined failover policy and grace period—a setting which defines
    the time between outage detection and the actual failover.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 故障转移组：如前所述，要引入自动故障转移，您必须创建一个故障转移组。一个组由主服务器和备用服务器组成，具有定义好的故障转移策略和宽限期——这个设置定义了从故障检测到实际故障转移之间的时间。
- en: 'Manage Backups: To configure backups for your server (for example – enable
    LTR) you can access this blade. It also displays all available backups.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理备份：要为您的服务器配置备份（例如，启用长期保留（LTR）），您可以访问此面板。它还显示所有可用的备份。
- en: 'Active Directory admin: It is possible to set an admin for your server using
    a user which is defined within your Active Directory users. Of course, you can
    set more than a single user for that—the trick is to use a group instead of an
    individual account.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 活动目录管理员：可以使用定义在活动目录用户中的用户设置服务器管理员。当然，您可以为此设置多个用户——窍门是使用组而不是单个帐户。
- en: 'SQL databases: To quickly access a database that is served by this particular
    server, use this blade.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL 数据库：要快速访问由此特定服务器提供的数据库，请使用此面板。
- en: 'SQL elastic pools: Similarly to SQL Databases, this blade displays available
    elastic pools. To create a new pool, go to the Overviewblade and click on the +
    New poolbutton.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL 弹性池：与 SQL 数据库类似，此面板显示可用的弹性池。要创建新的池，请转到“概览”面板并点击“+ 新建池”按钮。
- en: 'Deleted databases: Even if a database is removed from a service, you will still
    have a chance to restore it. In such a scenario, consult that blade for all databases
    available to be restored.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除的数据库：即使数据库从服务中删除，您仍然有机会恢复它。在这种情况下，请查看该面板以查看所有可恢复的数据库。
- en: 'Import/Export history: All import and export operations on your databases will
    be displayed here. This is a great auditing tool, so you will not miss a situation
    when somebody exported your data without notice.'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导入/导出历史：所有对数据库进行的导入和导出操作将在此处显示。这是一个很好的审计工具，因此您不会错过任何未经通知的数据库导出情况。
- en: 'DTU quota: If you are interested in seeing the quota for DTU/vCores for your
    server, you can access this blade.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DTU 配额：如果您有兴趣查看服务器的 DTU/vCore 配额，可以访问此面板。
- en: Security
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全
- en: When it comes to Azure SQLfeatures, there are multiple different options you
    can use to make your solution secure. Things such as firewalls, full operation
    auditing, and data encryption are the common capabilities of this service and
    are available even for the Basic tier. In this section, we will focus on learning
    the afore mentioned capabilities, so your instance is secured and immune to most
    threats.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 关于 Azure SQL 功能，有多种不同的选项可以用来确保您的解决方案安全。诸如防火墙、完整的操作审计和数据加密等功能是此服务的常见功能，甚至在基础层也可以使用。在本节中，我们将重点学习上述功能，以确保您的实例得到保护并免受大多数威胁。
- en: Firewall
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 防火墙
- en: 'When browsing your SQL Database, you probably noticed the Set server firewallbutton
    that is available on the Overviewblade:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览 SQL 数据库时，您可能注意到在“概览”面板上有一个“设置服务器防火墙”按钮：
- en: '![](img/b4d54771-0e24-49d0-875b-4331568d1214.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b4d54771-0e24-49d0-875b-4331568d1214.png)'
- en: This is the easiest way to set a firewall rule that allows traffic to Azure
    SQL.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 这是设置允许流量进入 Azure SQL 防火墙规则的最简单方法。
- en: In Azure SQL, initially all traffic is rejected—you have to whitelist all IPs
    of computers that should be allowed to communicate with the server.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Azure SQL 中，所有流量默认被拒绝——您必须将所有应允许与服务器通信的计算机的 IP 列入白名单。
- en: 'Before we start configuring the firewall, you have to understand why we really
    need it. Here is what happens if I try to connect to my server using Microsoft
    SQL Server Management Studio:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始配置防火墙之前，您必须了解我们为什么真的需要它。如果我尝试使用Microsoft SQL Server Management Studio连接到我的服务器，这里会发生什么：
- en: '![](img/a6542c90-eff9-48bc-a508-def5927147b5.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a6542c90-eff9-48bc-a508-def5927147b5.png)'
- en: As you can see, it automatically detects that my IP is not whitelisted, hence
    the server refuses to communicate with me. What we need here is to add a particular
    IP address, so the communication will be allowed.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，它自动检测到我的IP地址没有被列入白名单，因此服务器拒绝与我通信。我们需要在此添加一个特定的IP地址，这样通信就会被允许。
- en: In fact, the only machines allowed to communicate by default with Azure SQLare
    those that are hosted within Azure. If you want to connect to the server from
    a local computer, you have to set up a firewall rule.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，默认情况下，只有托管在Azure内的机器被允许与Azure SQL通信。如果您希望从本地计算机连接到服务器，您必须设置防火墙规则。
- en: 'In the portal, you can add the rule by clicking on the Set server firewallbutton—it
    will display a screen, where you can explicitly set an IP address that should
    be able to communicate with the server:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在门户中，您可以通过点击设置服务器防火墙按钮来添加规则——这将显示一个屏幕，您可以在其中明确设置一个应能够与服务器通信的IP地址：
- en: '![](img/91bec3cc-ea73-4682-bcd2-f5c903db9a93.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/91bec3cc-ea73-4682-bcd2-f5c903db9a93.png)'
- en: From this screen, you can also prevent the Azure service from communicating
    with your instance of Azure SQL. Additionally, you can add a virtual network here—thanks
    to that feature, you can create the whole ecosystem with your applications and
    databases, so they are protected from accessing it with a very strict set of rules.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在此屏幕上，您还可以防止Azure服务与您的Azure SQL实例通信。此外，您可以在此处添加虚拟网络——借助此功能，您可以创建包含应用程序和数据库的整个生态系统，从而通过一套非常严格的规则保护它免受访问。
- en: Advanced Threat Protection
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级威胁保护
- en: '**Advanced Threat Protection** (**ATP**) is an advanced feature of Azure SQL
    that by default is not enabled in the service. Currently, it allows for a free
    trial of 60 days, during which you can test whether this capability is for you.
    You can enable it usingthe **Advanced Threat Protection **blade:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '**高级威胁保护**（**ATP**）是Azure SQL的一个高级功能，默认情况下在服务中未启用。目前，它提供60天的免费试用期，您可以在此期间测试此功能是否适合您。您可以通过**高级威胁保护**面板启用它：'
- en: '![](img/6b1a105b-68cd-4c6f-9df0-a00f35620093.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b1a105b-68cd-4c6f-9df0-a00f35620093.png)'
- en: 'As you can see, it consists of three separate features:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，它由三个独立的功能组成：
- en: 'Data Discovery & Classification: For analyzing data in terms of sensitivity
    and legal classification (for example—GDPR requirements)'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据发现与分类：用于从敏感性和法律分类（例如—GDPR要求）角度分析数据
- en: 'Vulnerability Assessment: This checks your database for possible vulnerabilities
    using the best practices for SQL Server'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞评估：这使用SQL Server的最佳实践检查您的数据库是否存在可能的漏洞
- en: 'Threat Detection: A feature which actively monitors your database for suspicious
    activities and logs them for you'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 威胁检测：一个主动监控数据库中可疑活动并为您记录的功能
- en: 'In the following, you can see how Azure SQLclassifies example data:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在下文中，您可以看到Azure SQL如何对示例数据进行分类：
- en: '![](img/5d542c0a-ad79-4cf2-951d-eede011ccd4a.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5d542c0a-ad79-4cf2-951d-eede011ccd4a.png)'
- en: It turns out that it automatically detected the information type and declares
    its sensitivity label. Then it displays a summary, which gives you the overall
    picture of the shape of the data stored in a database.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是，它自动检测了信息类型并声明了其敏感性标签。然后，它显示了一个摘要，向您提供存储在数据库中的数据形态的整体概览。
- en: This feature is a great tool for analyzing big databases for compliance with
    the new regulations—use it when in doubt as to whether you are storing some sensitive
    data.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能是分析大型数据库是否符合新规定的一个极好的工具——如果您不确定自己是否存储了敏感数据，可以使用它。
- en: 'When it comes to Vulnerability Assesment, the following are the results of
    the example scans from my database:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在漏洞评估方面，以下是我数据库示例扫描的结果：
- en: '![](img/d5da7dc0-7280-4abf-8285-607a4d562881.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d5da7dc0-7280-4abf-8285-607a4d562881.png)'
- en: Once a scan is finished, you are given the result of a security check – it checks
    things such as data classification, whether auditing is enabled, or who can access
    data. If, for example, you have many users with a wide range of permissions assigned,
    there will be an alert raised for that. There are almost 50 rules checked during
    a scan, which is a great addition on top of all other security features.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描完成后，系统会给出安全检查结果——它检查诸如数据分类、是否启用审计或谁可以访问数据等事项。例如，如果你有许多用户并分配了广泛的权限，则会对此发出警报。在扫描过程中将检查近50条规则，这是对其他所有安全功能的一个重要补充。
- en: Even more security guides can be found in the relevant link in the *Further
    reading*section.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 更多的安全指南可以在*进一步阅读*部分的相关链接中找到。
- en: Auditing
  id: totrans-143
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 审计
- en: 'If you want to know exactly what happens inside your server, you have to enable
    auditing:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想确切知道服务器内部发生了什么，你必须启用审计：
- en: '![](img/cb671657-f490-4cf9-9e54-e085215afff0.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb671657-f490-4cf9-9e54-e085215afff0.png)'
- en: 'This will log all operations within the selected storage (if, of course, you
    selected the Storage option). Currently, there are three different options for
    storing auditing logs:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 这将记录所选存储中的所有操作（当然，如果你选择了存储选项的话）。目前，有三种不同的存储审计日志选项：
- en: Storage
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储
- en: Log Analytics (Preview)
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志分析（预览版）
- en: Event Hub (Preview)
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 事件中心（预览版）
- en: 'While Storage is a little bit of a static option, you can use the remaining
    two for more dynamic integrations (especially when using Azure Event Hub). Once
    auditing is enabled, you can see all logged operations as well when you click
    on the View audit logsbutton:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然存储选项有点静态，但你可以使用剩下的两个选项进行更动态的集成（尤其是在使用Azure事件中心时）。一旦启用审计，你就可以在点击查看审计日志按钮时看到所有已记录的操作：
- en: '![](img/91ba7367-9473-4104-9187-5f9621e5abf4.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](img/91ba7367-9473-4104-9187-5f9621e5abf4.png)'
- en: Dynamic Data Masking
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 动态数据掩码
- en: 'Sometimes you want to allow somebody to read data inside a database, yet at
    the same time you do not want him or her to read more sensitive data (such as
    birth date, addresses, or surnames). In Azure SQL,there is a feature for that
    named Dynamic Data Masking:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你可能希望允许某人读取数据库中的数据，但同时又不希望他或她读取更敏感的数据（例如出生日期、地址或姓氏）。在Azure SQL中，有一个名为动态数据掩码（Dynamic
    Data Masking）的功能可以实现这一点：
- en: '![](img/0de07043-4768-410f-8cd6-035a7c9251ab.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0de07043-4768-410f-8cd6-035a7c9251ab.png)'
- en: 'There are two ways to add a mask—either use the recommendation or click on
    the + Add Maskbutton to add it manually:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 有两种方法可以添加掩码——要么使用推荐方法，要么点击+ 添加掩码按钮手动添加：
- en: '![](img/3b1de14c-c57a-402b-b18b-90f69b47b8c9.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3b1de14c-c57a-402b-b18b-90f69b47b8c9.png)'
- en: 'What you will have to do select Schema, Table, Column, and the Mask field format—once
    you configure these and save the rule, users who are not administrators will see
    the masked values instead. The following shows the values for an admin:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要做的是选择模式、表格、列以及掩码字段格式——一旦配置这些并保存规则，非管理员用户将看到掩码后的值。以下显示的是管理员的值：
- en: '![](img/67982b94-b052-4ffc-bf57-d7fea3723322.png)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![](img/67982b94-b052-4ffc-bf57-d7fea3723322.png)'
- en: 'The following shows the values for a user without admin rights:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 以下显示的是没有管理员权限的用户的值：
- en: '![](img/780566ac-f8f2-4f0d-b48b-9b254869c20b.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/780566ac-f8f2-4f0d-b48b-9b254869c20b.png)'
- en: As you can see, `LastName`and `Email`are masked for a non-admin user, as planned.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，`LastName`和`Email`对于非管理员用户是被掩码的，正如计划所示。
- en: Scaling Azure SQL
  id: totrans-162
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扩展Azure SQL
- en: 'The required performance of your database may differ depending on the time
    and current state of your application. This is when scaling is all-important—you
    can adjust cost and available resources depending on the needs of your service.
    In Azure SQL,there are multiple different scenarios that you will consider: whether
    you use a single database or an elastic pool, whether you need to scale out reads,
    or whether you need all features available everywhere. In this short section,
    I will show you how to quickly proceed with your decision and where you can find
    scaling tools.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 数据库的性能需求可能会根据应用程序的时间和当前状态而有所不同。这时，扩展功能就显得至关重要——你可以根据服务的需求调整成本和可用资源。在Azure SQL中，有多个不同的场景需要考虑：你是使用单一数据库还是弹性池，是否需要扩展读取，或者是否需要在任何地方都能使用所有功能。在这一小节中，我将向你展示如何快速做出决策以及在哪里可以找到扩展工具。
- en: Single database
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 单一数据库
- en: 'As we mentioned previously, with a single database scaling is really simple—you
    just need to go to the Configureblade and select the new tier you are interested
    in. You can easily decide whether you need to scale a database up by watching
    its performance:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前提到的，单一数据库的扩展非常简单——只需进入 Configure blade 并选择您感兴趣的新层级。您可以通过观察数据库性能轻松决定是否需要扩展数据库：
- en: '![](img/61c51afb-81d1-4eba-a451-f6d6a4876e89.png)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![](img/61c51afb-81d1-4eba-a451-f6d6a4876e89.png)'
- en: If you see constant spikes or simply utilization of the database is becoming
    dangerously close to the maximum values, it is always a good decision to give
    it a few more DTUs or other resources.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您看到数据库的使用率不断激增，或者数据库的利用率已经接近最大值，增加一些 DTU 或其他资源总是一个好主意。
- en: Remember, you can set alerts when utilization hits upper limits, so there are
    some ways to automate the process.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，您可以在使用率达到上限时设置警报，因此有一些方法可以自动化这一过程。
- en: Elastic pool
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 弹性池
- en: 'With elastic pool enabled, things change a little bit—instead of operating
    on, for example, a DTU for a single database, you can select an elastic pool,
    which introduces a slightly different model of an elastic DTU:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 启用弹性池后，情况会有所不同——例如，您不再是单个数据库操作一个 DTU，而是可以选择一个弹性池，这引入了一个稍微不同的弹性 DTU 模型：
- en: '![](img/b56616ee-2f0b-4018-aceb-33580235aa24.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b56616ee-2f0b-4018-aceb-33580235aa24.png)'
- en: In that model, you scale your database using elastic pool configuration instead.
    For a single database, you will be able to only change the maximum data size available
    (which is also limited to the value set by the pool).
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种模型中，您将使用弹性池配置来扩展数据库。对于单一数据库，您只能更改可用的最大数据大小（该大小也受到池所设置值的限制）。
- en: Read scale-out
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读取扩展
- en: Sometimes you only need to scale reads for your database. Such a situation occurs
    when you would rather serve content than modify it (for example, you have a very
    popular portal that is managed from a single place but is served globally). In Azure
    SQL,there is a possibility to scale out only a part of the service—the one responsible
    for managing reads for you.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 有时您只需要扩展数据库的读取能力。这种情况发生在您更倾向于提供内容而不是修改它时（例如，您有一个非常受欢迎的门户，虽然管理单一位置，但内容却是全球提供的）。在 Azure
    SQL 中，您可以只扩展服务的某一部分——即负责为您管理读取操作的部分。
- en: Note that you need the Premium/Business Critical tier to get this feature working.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，您需要选择 Premium/Business Critical 层级才能使此功能生效。
- en: 'To enable read scale-out on your database, you can use the REST API:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用数据库的读取扩展，您可以使用 REST API：
- en: '[PRE0]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Alternatively, you can use PowerShell:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，您可以使用 PowerShell：
- en: '[PRE1]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Sharding
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分片
- en: The last way to scale your database is to use sharding. As opposed to elastic
    pools, by using sharding you allocate individual resources to each of your databases.
    It is also one of the models for horizontal scaling (so you rather provision another
    database than scale up your existing one).
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展数据库的另一种方式是使用分片。与弹性池不同，通过使用分片，您为每个数据库分配独立的资源。它也是一种横向扩展模型（即，您会更倾向于提供另一个数据库，而不是扩展现有的数据库）。
- en: Note that you can use sharding also for elastic pools by using the Elastic Database
    split-merge tool: [https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge).
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，您还可以通过使用弹性数据库拆分合并工具来为弹性池使用分片：[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-overview-split-and-merge)。
- en: 'In general, you will use sharding if you:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，如果您：
- en: Have too much data to be able to handle it with an individual instance
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据量过大，无法通过单个实例处理
- en: Want to load-balance requests
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 想要进行负载均衡请求
- en: Want to geo-distribute your data
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 想要实现数据的地理分布
- en: The important thing here is the requirement that the data structure for each
    shard has to be the same. You can find the full documentation on sharding in Azure
    SQLin the *Further reading*section for this chapter.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的关键是每个分片的数据结构必须相同。您可以在本章的 *进一步阅读*部分找到有关分片的完整文档。
- en: Monitoring and tuning
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控与调优
- en: The last item we cover in this chapter will be the monitoring and tuning of Azure
    SQL. Because databases are often the heart of many applications, it is crucial
    to have a quick way to diagnose any issues regarding performance or usage, and
    easily tweak things if needed. Azure SQLuses multiple different features that
    you can leverage to get insights from your instance.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们讨论的最后一项内容是Azure SQL的监控与调优。由于数据库通常是许多应用程序的核心，因此快速诊断性能或使用方面的问题并在需要时轻松调整至关重要。Azure
    SQL提供了多种不同的功能，您可以利用它们从您的实例中获取洞察。
- en: Monitoring
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控
- en: 'To monitor your SQL Database, you can use alerts, which should be familiar
    to you (assuming you have read the previous chapter, [Chapter 15](43da05ef-8416-4ff0-a983-b8a1665b2976.xhtml),
    *Using Application Insights to Monitor Your Applications*). You can access this
    functionality by clicking on the Alertsblade:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 要监控您的SQL数据库，您可以使用警报（假设您已经阅读了上一章，[第15章](43da05ef-8416-4ff0-a983-b8a1665b2976.xhtml)，*使用应用程序洞察监控您的应用程序*）。您可以通过点击警报面板访问此功能：
- en: '![](img/1d381f7c-4f73-458f-b7f9-c933d62d1fc3.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1d381f7c-4f73-458f-b7f9-c933d62d1fc3.png)'
- en: 'Here you have two types of alert available:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有两种可用的警报类型：
- en: Add metric alert (classic)
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加指标警报（经典）
- en: Add activity log alert
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加活动日志警报
- en: 'The way they work is a little bit different—a metric alertis based on values
    such as CPU percentage, deadlocks, or total database size while an activity log alertis
    triggeredwhenever an event occurs. You can use them both simultaneously to cover
    the following things:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 它们的工作方式稍有不同——指标警报是基于CPU百分比、死锁或数据库总大小等值触发的，而活动日志警报则是在发生事件时触发。您可以同时使用它们来覆盖以下内容：
- en: Insufficient performance (metric)
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能不足（指标）
- en: Invalid queries (metric)
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无效查询（指标）
- en: Configuration issues (metric)
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置问题（指标）
- en: Overall service health (metric)
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 整体服务健康状况（指标）
- en: Incoming maintenance activities (activity log)
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 即将进行的维护活动（活动日志）
- en: Actual service issues (activity log)
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实际服务问题（活动日志）
- en: Service health recommendations (activity log)
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务健康建议（活动日志）
- en: Tuning
  id: totrans-204
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调优
- en: 'There is a whole group of features, called Intelligent Performance, which allow
    you to monitor and tune your SQL Database performance:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个叫做智能性能的功能组，它允许您监控和调优SQL数据库的性能：
- en: '![](img/9b7e568c-040f-4f6d-b5c9-bd0b7970d603.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9b7e568c-040f-4f6d-b5c9-bd0b7970d603.png)'
- en: 'Let''s check Performance recommendationsfor now:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们查看性能建议：
- en: '![](img/613aa4fb-558b-46b0-9c2f-227cc8ec1cec.png)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![](img/613aa4fb-558b-46b0-9c2f-227cc8ec1cec.png)'
- en: 'While initially this feature is empty, it displays different recommendations
    while working with Azure SQL**.**The important thing here is that we can automate
    things—just click on the Automatebutton to display another screen where you can
    select what you are interested in:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然最初此功能为空，但在使用Azure SQL时，它会显示不同的建议。这里的重点是我们可以自动化操作——只需点击自动化按钮，显示另一个屏幕，您可以在其中选择感兴趣的内容：
- en: '![](img/2f271aeb-9e5a-479d-819a-e0c6252ae278.png)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2f271aeb-9e5a-479d-819a-e0c6252ae278.png)'
- en: This screen is, in fact, the Automatic tuningblade presented earlier. You can
    use it to automate things such as managing indexes or forcing a query plan.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 这个屏幕实际上是之前展示的自动调优面板。您可以使用它来自动执行诸如管理索引或强制查询计划之类的操作。
- en: Summary
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Azure SQLis a very complex and extended service that works in a similar way
    to its on-premise version, Microsoft SQL Server. While being a full PaaS Azure
    component, it still allows for many advanced operations such as sharding, multi-tenancy,
    AD integration or failover, and geo-replication. Besides being hosted within a
    cloud, you can still use it in the same way you would a standalone version of
    SQL Server. In the next chapter, we will cover the last PaaS service mentioned
    in this book, which is Azure Data Lake Storage.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: Azure SQL是一个非常复杂且扩展的服务，工作方式与其本地版本Microsoft SQL Server类似。虽然它是一个完整的PaaS Azure组件，但仍然支持许多高级操作，如分片、多租户、AD集成、故障转移和地理复制。除了托管在云中，您仍然可以像使用独立版本的SQL
    Server一样使用它。在下一章，我们将讨论本书中提到的最后一个PaaS服务，即Azure Data Lake Storage。
- en: Questions
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: What is different in terms of update policy between Azure SQLand Microsoft SQL
    Server?
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在更新策略方面，Azure SQL与Microsoft SQL Server有何不同？
- en: What is sharding?
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是分片？
- en: You created a new SQL Database in Azure SQL, but the server refuses to connect
    to it. What could be the issue here?
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您在Azure SQL中创建了一个新的SQL数据库，但服务器拒绝连接到它。可能是什么问题呢？
- en: What are the two available purchasing models for Azure SQL?
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure SQL的两种购买模式是什么？
- en: What is an elastic pool?
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是弹性池？
- en: What is the difference between DTU and eDTU?
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: DTU和eDTU之间有什么区别？
- en: How can you mask a particular field in Azure SQL?
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如何在Azure SQL中屏蔽特定字段？
- en: What audit log destinations are available?
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可用的审计日志目标有哪些？
- en: Further reading
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: How to understand DTU: [https://sqlperformance.com/2017/03/azure/what-the-heck-is-a-dtu](https://sqlperformance.com/2017/03/azure/what-the-heck-is-a-dtu)
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何理解DTU：[https://sqlperformance.com/2017/03/azure/what-the-heck-is-a-dtu](https://sqlperformance.com/2017/03/azure/what-the-heck-is-a-dtu)
- en: Performance recommendations: [https://docs.microsoft.com/en-us/azure/sql-database/sql-database-advisor](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-advisor)
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能建议：[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-advisor](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-advisor)
- en: Adaptive query processing:[https://docs.microsoft.com/pl-pl/sql/relational-databases/performance/adaptive-query-processing?view=sql-server-2017](https://docs.microsoft.com/pl-pl/sql/relational-databases/performance/adaptive-query-processing?view=sql-server-2017)
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自适应查询处理：[https://docs.microsoft.com/pl-pl/sql/relational-databases/performance/adaptive-query-processing?view=sql-server-2017](https://docs.microsoft.com/pl-pl/sql/relational-databases/performance/adaptive-query-processing?view=sql-server-2017)
- en: Securing SQL Database: [https://docs.microsoft.com/en-us/azure/sql-database/sql-database-security-overview](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-security-overview)
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL数据库安全性：[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-security-overview](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-security-overview)
- en: Read scale-out:[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-read-scale-out](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-read-scale-out)
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 读取扩展：[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-read-scale-out](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-read-scale-out)
- en: Sharding:[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-introduction](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-introduction)
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分片：[https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-introduction](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-elastic-scale-introduction)
