- en: Creating and Configuring Storage Accounts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建和配置存储帐户
- en: In the previous chapter, we covered how to configure **role-based access control**
    (**RBAC**) in Azure, how to create custom roles, and how to implement and assign
    Azure policies.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们介绍了如何在Azure中配置**基于角色的访问控制**（**RBAC**），如何创建自定义角色，以及如何实施和分配Azure策略。
- en: This chapter will introduce a new objective in terms of implementing and managingstorage*.*
    In this chapter, we are going to cover the different types of storage account,
    and you will learn which types are available for storing your data in Azure. We
    will also cover how to install Azure Storage Explorer, which can be used to manage
    data inside Azure storage accounts. We are going to look at how to secure data
    using **shared access signatures** (**SAS**) and how to implement storage replication
    to keep data safe.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍一个新的目标，即实施和管理存储*。在本章中，我们将覆盖不同类型的存储帐户，你将学习哪些类型适用于在Azure中存储你的数据。我们还将介绍如何安装Azure
    Storage Explorer，它可以用来管理Azure存储帐户中的数据。我们将探讨如何使用**共享访问签名**（**SAS**）来保护数据，以及如何实施存储复制来确保数据安全。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将覆盖以下主题：
- en: Azure storage accounts
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure存储帐户
- en: Creating and configuring a storage account
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建和配置存储帐户
- en: Installing and using Azure Storage Explorer
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装和使用Azure Storage Explorer
- en: Configuring network access to the storage account
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置存储帐户的网络访问
- en: Generating and managing SAS
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成和管理SAS
- en: Implementing Azure storage replication
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施Azure存储复制
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: This chapter will uses Azure PowerShell ([https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0](https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0)) for
    examples.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将使用Azure PowerShell([https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0](https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0))作为示例。
- en: The source code for our sample application can be downloaded from [https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter04](https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter04).
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的示例应用程序的源代码可以从[https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter04](https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter04)下载。
- en: Azure storage accounts
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure存储帐户
- en: Azure offers a variety of types of storage accounts that can be used to store
    all sorts of files in Azure. You can store files, documents, and datasets, but
    also blobs and **virtual hard disks** (**VHDs**). There is even a type of storage
    account for archiving, specifically. In the next section, we are going to look
    at the different types of storage accounts, and storage account replication types, that
    Azure has to offer.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Azure提供了多种类型的存储帐户，可以用于在Azure中存储各种文件。你可以存储文件、文档和数据集，也可以存储Blob和**虚拟硬盘**（**VHDs**）。甚至还有专门用于归档的存储帐户类型。在下一节中，我们将讨论Azure提供的不同类型的存储帐户以及存储帐户复制类型。
- en: Storage account types
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存储帐户类型
- en: Azure storage offers three different account types, which can be used for blob,
    table, file, and queue storage.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Azure存储提供三种不同的帐户类型，可用于Blob、表格、文件和队列存储。
- en: General-purpose v1
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 一般用途v1
- en: The **general-purpose v1** (**GPv1**) storage account is the oldest type of
    storage account. It offers storage for page blobs, block blobs, files, queues,
    and tables, but it is not the most cost-effective storage account type. It is
    the only storage account type that can be used for the classic deployment model.
    It doesn't support the latest features, such as access tiers.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般用途v1**（**GPv1**）存储帐户是最古老的存储帐户类型。它提供页面Blob、块Blob、文件、队列和表格的存储，但它不是最具成本效益的存储帐户类型。它是唯一可以用于经典部署模型的存储帐户类型。它不支持最新的功能，例如访问层。'
- en: Blob storage
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Blob存储
- en: The blob storage account offers all the features of `StorageV2` accounts, except
    that it only supports block blobs (and append blobs). Page blobs are not supported.
    It offers access tiers, which consist of hot, cool, and archive storage, and which
    will be covered later in this chapter.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: Blob存储帐户提供`StorageV2`帐户的所有功能，除了它仅支持块Blob（和附加Blob）。不支持页面Blob。它提供访问层，包括热存储、冷存储和归档存储，后面会在本章中进一步讨论。
- en: General-purpose v2 (GPv2)
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 一般用途v2（GPv2）
- en: '`StorageV2` is the newest type of storage account, and it combines the V1 storage
    with blob storage. It offers all the latest features, such as access tiers for
    blob storage, with a reduction in costs. Microsoft recommends using this account
    type over the V1 and blob storage account types.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '`StorageV2` 是最新的存储账户类型，它将 V1 存储与 Blob 存储结合在一起。它提供了所有最新功能，如 Blob 存储的访问层，并且降低了成本。微软推荐使用这种账户类型，而非
    V1 和 Blob 存储账户类型。'
- en: V1 storage accounts can easily be upgraded to V2.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: V1 存储账户可以轻松升级为 V2。
- en: For more information on pricing and billing for these different account types,
    you can refer to the following pricing page: [https://azure.microsoft.com/en-us/pricing/details/storage/](https://azure.microsoft.com/en-us/pricing/details/storage/).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 如需了解不同账户类型的定价和计费信息，请参考以下定价页面：[https://azure.microsoft.com/en-us/pricing/details/storage/](https://azure.microsoft.com/en-us/pricing/details/storage/)。
- en: Storage replication types
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存储复制类型
- en: Data that is stored in Azure is always replicated to ensure durability and high
    availability. This way, it is protected from unplanned and planned events, such
    as network or power outages, natural disasters, and terrorism. It also ensures
    that, during these types of events, your storage account still meets the SLA.
    Data can be replicated within the same data center, across zonal data centers
    within the same region, and across different regions. These replication types
    are named **locally redundant storage** (**LRS**), **zone redundant storage**
    (**ZRS**), **geo-redundant storage** (**GRS**), and** read-access geo-redundant
    storage** (**RA-GRS**), and they will be covered in more detail in the upcoming
    sections.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 存储在 Azure 中的数据始终会进行复制，以确保数据的持久性和高可用性。这样可以保护数据免受计划外和计划内事件的影响，例如网络或电力故障、自然灾害以及恐怖袭击。它还确保在这些事件发生时，您的存储账户仍然能满足
    SLA。数据可以在同一数据中心内进行复制，跨同一区域的不同可用区的数据中心之间进行复制，或者跨不同的区域进行复制。这些复制类型分别被称为 **本地冗余存储**
    (**LRS**)、**可用区冗余存储** (**ZRS**)、**地理冗余存储** (**GRS**) 和 **读取访问地理冗余存储** (**RA-GRS**)，这些将在接下来的章节中详细讲解。
- en: You choose a replication type when you create a new storage account. Storage
    accounts can be created inside the Azure portal, as well as from PowerShell or
    the CLI.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建新的存储账户时，你需要选择一个复制类型。存储账户可以在 Azure 门户中创建，也可以通过 PowerShell 或 CLI 创建。
- en: LRS
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: LRS
- en: LRS is the cheapest option, and replicates the data three times within the same
    data center. When you make a write request to your storage account, it will be
    synchronously written during this request to all three replicas. The request is
    committed when the data is completely replicated. With LRS, the data will be replicated
    across multiple update domains and fault domains within one storage scale unit.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: LRS 是最便宜的选项，会在同一数据中心内将数据复制三次。当你向存储账户发出写入请求时，数据会在请求期间同步写入所有三个副本。当数据完全复制时，请求将被提交。使用
    LRS，数据将在一个存储规模单元内跨多个更新域和故障域进行复制。
- en: ZRS
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ZRS
- en: ZRS is currently in preview, and is only available in US East 2 and US Central.
    It replicates three copies across two or three data centers. The data is written
    synchronously to all three replicas, in one or two regions. It also replicates
    the data three times inside the same data center where the data resided, just
    like LRS.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: ZRS 当前处于预览阶段，仅在 US East 2 和 US Central 可用。它在两个或三个数据中心之间复制三个副本。数据会同步写入所有三个副本，分布在一个或两个区域。它还会像
    LRS 一样，在数据所在的同一数据中心内将数据复制三次。
- en: GRS
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: GRS
- en: GRS replicates the data three times within the same region, like ZRS, and also
    replicates three copies to other regions asynchronously.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: GRS 在同一区域内将数据复制三次，像 ZRS 一样，并且还将数据异步复制到其他区域的三个副本。
- en: RA-GRS
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: RA-GRS
- en: RA-GRS provides georeplication across two regions, with read-only access to
    the data in the secondary location. This will maximize the availability for your
    storage account. When you enable RA-GRS, your data will be available on a primary
    and a secondary endpoint for your storage account as well. The secondary endpoint
    will be similar to the primary endpoint, but it appends the **secondary **suffixto
    it. The access keys that are generated for your storage account can be used for
    both endpoints.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: RA-GRS 提供跨两个区域的地理复制，并且在辅助位置提供对数据的只读访问。这将最大化存储账户的可用性。当启用 RA-GRS 时，您的数据将在主端点和辅助端点之间同时可用。辅助端点与主端点类似，但会在其后添加
    **secondary** 后缀。为存储账户生成的访问密钥可以用于两个端点。
- en: Now that we have covered the different storage replication types that are set
    when you create a storage account, we can look at the different storage accounts
    that Azure has to offer.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经介绍了在创建存储帐户时设置的不同存储复制类型，我们可以看看 Azure 提供的不同存储帐户。
- en: Azure blob storage
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure Blob 存储
- en: Azure blob storage offers unstructured data storage in the cloud. It can store
    all kinds of data, such as documents, VHDs, images, and audio files. There are
    two types of blobs that you can create. One type is page blobs, which are used
    for the storage of disks. So, when you have a VHD that needs to be stored and
    attached to your VM, you will have to create a page blob. The maximum size of
    a page blob is 1 TB.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Blob 存储提供了云中的非结构化数据存储。它可以存储各种数据，如文档、VHD、图像和音频文件。你可以创建两种类型的 Blob。第一种类型是页面
    Blob，用于存储磁盘。因此，当你有一个需要存储并附加到虚拟机（VM）的 VHD 时，你需要创建一个页面 Blob。页面 Blob 的最大大小为 1 TB。
- en: The other type is block blobs, which basically cover all the other types of
    data that you can store in Azure, such as files and documents. The maximum size
    of a block blob is 200 GB. However, there is also a third blob type named append
    blob, but this one is used internally by Azure and can't be used in order to store
    actual files. There are a couple of ways that you can copy blobs to your blob
    storage account. You can use the Azure portal (only one at a time) or Azure Storage
    Explorer, or you can copy your files programmatically by using .NET, PowerShell,
    the CLI, or by calling the REST API.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种类型是块 Blob，它基本涵盖了你可以在 Azure 中存储的所有其他数据类型，如文件和文档。块 Blob 的最大大小为 200 GB。然而，还有第三种
    Blob 类型，称为追加 Blob，但这个 Blob 是 Azure 内部使用的，不能用来存储实际文件。有几种方法可以将 Blob 复制到 Blob 存储帐户。你可以使用
    Azure 门户（一次只能复制一个）或 Azure Storage Explorer，或者你可以通过 .NET、PowerShell、CLI 或调用 REST
    API 以编程方式复制文件。
- en: Access tiers
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问层
- en: 'Blob storage accounts use access tiers to determine how frequently the data
    is accessed. Based on this access tier, you will get billed. Azure offers three
    storage access tiers: hot, cool, and archive.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: Blob 存储帐户使用访问层来确定数据的访问频率。根据该访问层，你将会收到账单。Azure 提供了三种存储访问层：热、Cool 和存档。
- en: Hot
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 热
- en: The hot access tier is most suitable for storing data that's accessed frequently
    and data that is in active use. For instance, you would store images and style
    sheets for a website inside the hot access tier. The storage costs for this tier
    are higher than for the other access tiers, but you pay less for accessing the
    files.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 热访问层最适合存储经常访问的数据和正在积极使用的数据。例如，你可以将网站的图像和样式表存储在热访问层中。该访问层的存储成本高于其他访问层，但访问文件的费用较低。
- en: Cool
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Cool
- en: The cool access tier is the most suitable for storing data that is not accessed
    frequently (less than once in 30 days). Compared with the hot access tier, the
    cool tier has lower storage costs, but you pay more for accessing the files. This
    tier is suitable for storing backups and older content that is not viewed often.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: Cool 访问层最适合存储不常访问的数据（30 天内访问少于一次）。与热访问层相比，Cool 访问层的存储成本较低，但访问文件的费用更高。这个访问层适合存储备份和较旧的内容，这些内容不常被查看。
- en: Archive
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存档
- en: The archive storage tier is set on the blob level and not on the storage level.
    It has the lowest costs for storing data and the highest cost for accessing data
    compared to the hot and cool access tiers. This tier is for data that will remain
    in the archive for at least 180 days, and it will take a couple of hours of latency
    before it can be accessed. This tier is most suitable for long-term backups or
    compliance and archive data. A blob in the archive tier is offline and cannot
    be read (except for the metadata), copied, overwritten, or modified.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 存档存储层是在 Blob 层面设置的，而不是在存储层面设置的。与热访问层和 Cool 访问层相比，它具有最低的数据存储成本和最高的访问数据成本。这个存储层适用于至少会在存档中保存
    180 天的数据，并且在访问之前会有几个小时的延迟。这个存储层最适合长期备份或合规性和存档数据。存档层中的 Blob 是离线的，不能读取（除元数据外）、复制、覆盖或修改。
- en: Azure file storage
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 文件存储
- en: With Azure files, you can create file shares in the cloud. You can access your
    files using the **Server Message Block** (**SMB**) protocol, which is an industry
    standard and can be used on Linux, Windows, and macOS devices. Azure files can
    also be mounted as if it is a local drive on these same devices as well, and they
    can be cached for fast access on Windows Server using Azure File Sync.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Azure 文件，你可以在云端创建文件共享。你可以使用**服务器消息块**（**SMB**）协议访问文件，这是一个行业标准，支持在 Linux、Windows
    和 macOS 设备上使用。Azure 文件也可以像本地驱动器一样挂载在这些设备上，并且可以使用 Azure 文件同步在 Windows Server 上进行缓存，以加速访问。
- en: File shares can be used across multiple machines, which makes them suitable
    for storing files or data that are accessed from multiple machines, such as tools
    for development machines, or configuration files or log data. Azure File Share
    is part of the Azure storage client libraries and offers an Azure storage REST
    API, which can be leveraged by developers in their solutions.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 文件共享可以跨多个机器使用，这使得它们非常适合存储多个机器访问的文件或数据，如开发机器的工具、配置文件或日志数据。Azure 文件共享是 Azure 存储客户端库的一部分，并提供
    Azure 存储 REST API，开发者可以在他们的解决方案中利用该 API。
- en: Details on how to configure Azure file storage will be covered in more detail
    in [Chapter 6](6bb56fd5-3785-42d2-b32c-4ba14333dca4.xhtml), *Configuring Azure
    Files and Implementing Azure Backup.*
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 有关如何配置 Azure 文件存储的详细信息，将在[第 6 章](6bb56fd5-3785-42d2-b32c-4ba14333dca4.xhtml)，*配置
    Azure 文件并实现 Azure 备份*中详细讲解。
- en: Azure disk storage
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure 磁盘存储
- en: 'The disks that are used for virtual machines are stored in Azure blob storage
    as page blobs. Azure stores two disks for each virtual machine: the actual operating
    system (VHD) of the VM, and a temporary disk that is used for short-term storage.
    This data is erased when the VM is turned off or rebooted.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 用于虚拟机的磁盘存储在 Azure Blob 存储中，作为页面 Blob。Azure 为每个虚拟机存储两个磁盘：虚拟机的实际操作系统（VHD）和一个临时磁盘，用于短期存储。这些数据会在虚拟机关闭或重启时被擦除。
- en: 'There are two different performance tiers that Azure offers: standard disk
    storage and premium disk storage.'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 提供两种不同的性能层级：标准磁盘存储和高级磁盘存储。
- en: Standard disk storage
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 标准磁盘存储
- en: Standard disk storage offers HDD drives to store the data on, and it is the
    most cost-effective storage tier that you can choose. It can only use LRS or GRS
    in order to support high availability for your data and applications.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 标准磁盘存储使用 HDD 驱动器来存储数据，是你可以选择的最具成本效益的存储层级。它只能使用 LRS 或 GRS 来支持数据和应用程序的高可用性。
- en: Premium disk storage
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级磁盘存储
- en: With premium disk storage, your data is stored on SSDs. Not all Azure virtual
    machines series can use this type of storage. It can only be used with DS, DSv2,
    GS, LS, or FS series Azure virtual machines. It offers high-performance and low-latency
    disk support.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 使用高级磁盘存储时，数据存储在 SSD 上。并非所有 Azure 虚拟机系列都可以使用此类型存储。它只能与 DS、DSv2、GS、LS 或 FS 系列的
    Azure 虚拟机一起使用，提供高性能和低延迟的磁盘支持。
- en: Unmanaged versus managed disks
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 非托管磁盘与托管磁盘
- en: Managed disks automatically handle the storage account creation for you. With
    unmanaged disks, which are the traditional disks used for VMs, you need to create
    a storage account manually, and then select that storage account when you create
    the VM. With managed disks, this burden is handled for you by Azure. You select
    the disk type and the performance tier (standard or premium), and the managed
    disk is created. It also handles scaling automatically for you.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 托管磁盘会自动为你处理存储账户的创建。而对于非托管磁盘（即传统的虚拟机磁盘），你需要手动创建一个存储账户，并在创建虚拟机时选择该存储账户。而使用托管磁盘时，这一负担由
    Azure 为你处理。你只需选择磁盘类型和性能层级（标准或高级），然后托管磁盘将被创建。它还会自动为你处理扩展。
- en: Managed disks are recommended by Microsoft over unmanaged disks.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft 推荐使用托管磁盘而非非托管磁盘。
- en: Now that we have covered all the background information that you need to know
    about the different storage accounts, we are going to create a new storage account.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经涵盖了关于不同存储账户的所有背景信息，接下来我们将创建一个新的存储账户。
- en: Creating and configuring storage accounts
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建和配置存储账户
- en: Before you can upload any data or files to Azure storage, a storage account
    needs to be created. This can be done using the Azure portal, PowerShell, the
    CLI, ARM templates, or Visual Studio.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在将任何数据或文件上传到 Azure 存储之前，必须创建一个存储账户。这可以通过 Azure 门户、PowerShell、CLI、ARM 模板或 Visual
    Studio 完成。
- en: 'In this demonstration, we are going to create a storage account with PowerShell:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在本演示中，我们将使用 PowerShell 创建一个存储账户：
- en: 'First, we need to log in to the Azure account:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们需要登录 Azure 账户：
- en: '[PRE0]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If necessary, select the right subscription:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，选择正确的订阅：
- en: '[PRE1]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Create a resource group:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建资源组：
- en: '[PRE2]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Create the storage account:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建存储账户：
- en: '[PRE3]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In this demonstration, we created a new storage account using PowerShell. If
    you are new to storage accounts, I highly recommend creating a storage account
    from the Azure portal as well. That way, you will see all the available storage
    account types, storage replication types, access tiers that you can choose from,
    the different performance tiers (standard or premium), and how this is all connected
    to each other.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个演示中，我们使用 PowerShell 创建了一个新的存储账户。如果您是存储账户的新手，我强烈建议您也从 Azure 门户创建存储账户。这样，您将看到所有可用的存储账户类型、存储复制类型、可以选择的访问层级、不同的性能层级（标准或高级），以及它们之间的关联。
- en: Now that we have created a new storage account, we can install the Azure Storage
    Explorer tool.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经创建了一个新的存储账户，我们可以安装 Azure 存储资源管理器工具。
- en: Installing and using Azure Storage Explorer
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装和使用 Azure 存储资源管理器
- en: Azure Storage Explorer is a standalone application that can be used to easily
    work with the different types of data that are stored in an Azure storage account.
    You can upload, download, and manage files, queues, tables, blobs, data lake storage,
    and Cosmos DB entities using Azure Storage Explorer. Aside from that, you can
    also use the application to configure and manage **c****ross-origin resource sharing**
    (**CORS**) rules for your storage accounts. This application can be used on Windows,
    Linux, and macOS devices.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 存储资源管理器是一个独立的应用程序，可用于轻松处理存储在 Azure 存储账户中的不同类型的数据。您可以使用 Azure 存储资源管理器上传、下载和管理文件、队列、表、块、数据湖存储和
    Cosmos DB 实体。除此之外，您还可以使用该应用程序配置和管理存储账户的跨域资源共享（CORS）规则。此应用程序可在 Windows、Linux 和
    macOS 设备上使用。
- en: 'To install the application, you have to perform the following steps:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装该应用程序，您需要执行以下步骤：
- en: Navigate to [https://azure.microsoft.com/en-us/features/storage-explorer/](https://azure.microsoft.com/en-us/features/storage-explorer/) to
    download the application.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到 [https://azure.microsoft.com/en-us/features/storage-explorer/](https://azure.microsoft.com/en-us/features/storage-explorer/)
    下载应用程序。
- en: Once it has been downloaded, install the application.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载完成后，安装应用程序。
- en: 'When the application is installed, open the application. You will be prompted
    to connect to your Azure environment. There are a couple of options to choose
    from. You can add an Azure account by connecting to your Azure environment using
    your administrator credentials, use a shared access signature (which will be covered
    later in this chapter), use a storage account name and key, and you can select
    the  Attach to a local emulator option if you so desire. For this demonstration,
    keep the default option selected and click on **Sign in**:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装应用程序后，打开应用程序。您将提示连接到 Azure 环境。有几个选择可供选择。您可以通过使用管理员凭据连接到 Azure 环境添加 Azure 账户，使用共享访问签名（稍后在本章中介绍），使用存储账户名称和密钥，还可以选择“连接到本地仿真器”选项。对于此演示，请保持默认选项并点击“**登录**”：
- en: '![](img/7cac97f1-6b7f-4293-a818-f0b6b370d15c.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7cac97f1-6b7f-4293-a818-f0b6b370d15c.png)'
- en: Connecting to Azure storage
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 连接到 Azure 存储
- en: Provide your credentials and log in.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您的凭据并登录。
- en: 'All of your subscriptions will be added to the left-hand pane. Once this is
    done, click on Apply:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有订阅都将添加到左侧窗格。完成后，点击“应用”：
- en: '![](img/5db7adf4-c675-43f7-ada8-3502cb5286fd.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5db7adf4-c675-43f7-ada8-3502cb5286fd.png)'
- en: Applying the subscriptions
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 应用订阅
- en: 'You can now drill down to the subscription and the storage account that we
    created in the first demonstration from the left-hand pane. Select the storage
    account. From there, you can access the blob containers, file shares, queues,
    and tables:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在可以从左侧窗格深入查看我们在第一个演示中创建的订阅和存储账户。选择存储账户。从那里，您可以访问块容器、文件共享、队列和表：
- en: '![](img/ed9a9783-5750-4cb0-b342-b5cf8c88ce93.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ed9a9783-5750-4cb0-b342-b5cf8c88ce93.png)'
- en: Storage account settings
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 存储账户设置
- en: 'To add some files to a blob container, we need to create a blob container in
    the storage account. Therefore, right-click on **Blob Containers** in the left-hand
    menu and select **Create Blob Container. **Call the container `packtblobcontainer`;
    now, you can upload files to that container. Click on the **Upload** button in
    the top menu, click on **Upload** **files**, and select some files from your local
    computer:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将一些文件添加到 Blob 容器，我们需要在存储帐户中创建一个 Blob 容器。因此，在左侧菜单中右键单击**Blob 容器**，然后选择**创建 Blob
    容器**。命名容器为`packtblobcontainer`；现在，您可以将文件上传到该容器。在顶部菜单中点击**上传**按钮，点击**上传文件**，并从本地计算机中选择一些文件：
- en: '![](img/9fd89af7-b6c6-42f6-91af-0328c7fa9452.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9fd89af7-b6c6-42f6-91af-0328c7fa9452.png)'
- en: Uploading files to the blob container
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 上传文件到 Blob 容器
- en: You will see that the files will be uploaded to the blob container.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到文件被上传到 Blob 容器中。
- en: If you navigate to the overview blade of the storage account in the Azure portal,
    you will see a button on the top menu that says **Open in explorer**. This will
    open the Azure Storage Explorer, which can then be used to easily manage all the
    data that resides in the storage account.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在 Azure 门户中导航到存储帐户的概述窗格，您会看到顶部菜单中有一个按钮，标记为**在资源管理器中打开**。这将打开 Azure 存储资源管理器，您可以使用它轻松管理存储帐户中的所有数据。
- en: Now that we have installed the Azure Storage Explorer tool and uploaded some
    files to a blob container, we can configure the network access to the storage
    account.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经安装了 Azure 存储资源管理器工具，并将一些文件上传到了 Blob 容器，我们可以配置存储帐户的网络访问权限。
- en: Configuring network access to the storage account
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置对存储帐户的网络访问
- en: You can secure your storage account to a specific set of supported networks.
    For this, you have to configure network rules so that only applications that request
    data over the specific set of networks can access the storage account. When these
    network rules are effective, the application needs to use proper authorization
    on the request. This authorization can be provided by Azure Active Directory credentials
    for blobs and queues, with an SAS token or a valid account access key.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将存储帐户的访问权限限制为一组特定的受支持网络。为此，您必须配置网络规则，以便只有通过特定网络集群请求数据的应用程序才能访问存储帐户。当这些网络规则生效时，应用程序需要在请求中使用适当的授权。这种授权可以通过
    Azure Active Directory 凭证提供，适用于 Blob 和队列，使用 SAS 令牌或有效的帐户访问密钥。
- en: 'In the following demonstration, we are going to configure network access to
    the storage account that we created in the previous step. You can manage storage
    accounts through the Azure portal, PowerShell, or CLIv2. We are going to set this
    configuration from the Azure portal. Therefore, we have to perform the following
    steps:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的演示中，我们将配置对前一步中创建的存储帐户的网络访问权限。您可以通过 Azure 门户、PowerShell 或 CLIv2 管理存储帐户。我们将通过
    Azure 门户设置此配置。因此，我们需要执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)访问 Azure 门户。
- en: Go to the storage account that we created in the previous step.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到我们在前一步中创建的存储帐户。
- en: 'From the overview blade, in the left-hand menu, select Firewalls and virtual
    networks:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在概述窗格中，在左侧菜单中选择**防火墙和虚拟网络**：
- en: '![](img/169ec110-5636-461f-a9cb-482e8defb766.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](img/169ec110-5636-461f-a9cb-482e8defb766.png)'
- en: Storage account overview blade
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 存储帐户概述窗格
- en: 'To grant access to a virtual network with a new network rule, under Virtual
    Networks, there are two options to choose from: All networks, which allows traffic
    from all networks (both virtual and on-premises) and the internet to access the
    data, and Selected networks. If you select this option, you can configure which
    networks are allowed to access the data from the storage account. Select Selected
    networks. Then, you can select whether you want to add an existing virtual network
    or create a new one. For this demonstration, click on + Add new virtual network:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要通过新的网络规则授予对虚拟网络的访问权限，在虚拟网络下，有两个可供选择的选项：**所有网络**，允许来自所有网络（包括虚拟网络和本地网络）以及互联网的流量访问数据；和**选定网络**。如果选择此选项，您可以配置哪些网络可以从存储帐户访问数据。选择**选定网络**。然后，您可以选择是否要添加现有的虚拟网络或创建一个新的。对于本演示，请点击**+
    添加新虚拟网络**：
- en: '![](img/c795d728-49d3-4a47-9c90-d035f825adde.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c795d728-49d3-4a47-9c90-d035f825adde.png)'
- en: Creating a new network
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个新网络
- en: 'A new blade will open, where you will have to specify the network configuration.
    Specify the configuration that''s shown in the following screenshot:'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将打开一个新的窗格，您需要在其中指定网络配置。指定如下截图所示的配置：
- en: '![](img/df5f1424-0949-471b-b6b7-0f8d149273a4.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](img/df5f1424-0949-471b-b6b7-0f8d149273a4.png)'
- en: Network configuration settings
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 网络配置设置
- en: Click on **Create**.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**。
- en: 'The virtual network will be added to the overview blade. This storage account
    is now secure and can be accessed only from applications and other resources that
    use this virtual network. In this same blade, you can also configure the firewall
    and only allow certain IP ranges from the internet or your on-premises environment:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虚拟网络将被添加到概览面板中。此存储帐户现在已加固，只能从使用此虚拟网络的应用程序和其他资源访问。在同一面板中，你还可以配置防火墙，并仅允许来自互联网或本地环境的特定IP范围：
- en: '![](img/96f70967-da2a-41d8-af09-2949b10946ed.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/96f70967-da2a-41d8-af09-2949b10946ed.png)'
- en: IP ranges
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: IP范围
- en: This concludes this demonstration. In the next demonstration, we are going to
    generate and manage SAS.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 演示到此为止。在下一次演示中，我们将生成和管理SAS。
- en: SAS and access keys
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SAS和访问密钥
- en: By using an SAS, you can provide a way to grant limited access to objects and
    data that are stored inside your storage account to the clients that connect to
    it. Using an SAS, you don't have to expose your access keys to the clients.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 使用SAS，你可以为连接到存储帐户的客户端提供一种方式，授予对存储帐户中对象和数据的有限访问权限。使用SAS，你无需将**访问密钥**暴露给客户端。
- en: When you create a storage account, primary and secondary access keys are created.
    Both of these keys can grant administrative access to your account and all the
    resources within it. Exposing those keys can also open your storage account to
    negligent or malicious use. SAS provides a safe alternative to this that will
    allow clients to read, write, and delete data in your storage account according
    to the permissions you've explicitly granted, and without the need for an account
    key.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 创建存储帐户时，将创建主密钥和次密钥。这两个密钥都可以授予对帐户及其所有资源的管理权限。暴露这些密钥也可能会让你的存储帐户受到疏忽或恶意使用的威胁。SAS提供了一个安全的替代方案，可以让客户端根据你明确授予的权限，读取、写入和删除存储帐户中的数据，而无需使用帐户密钥。
- en: In the next section, we're going to look at how to manage our access keys and
    how to generate an SAS for our storage account.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将学习如何管理访问密钥，以及如何为存储帐户生成SAS。
- en: Managing access keys
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理访问密钥
- en: 'To manage access keys, perform the following steps:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要管理访问密钥，请执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)访问Azure门户。
- en: Again, go to the storage account that we created in the previous step.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次进入我们在上一步创建的存储帐户。
- en: Once the overview blade is open, under **Settings**, select **Access keys**.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开概览面板后，在**设置**下，选择**访问密钥**。
- en: 'Here, you can see both of the access keys that were generated for you when
    the storage account was created. The reason that Azure created two access keys
    for you is because if you regenerate a new key, all of the SAS that you created
    for this key will no longer work. You can then let applications access that data
    using the secondary key, and once the key is regenerated, you can share the new
    key with your clients. You can generate new keys by clicking on the buttons next
    to both keys:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，你可以看到在创建存储帐户时为你生成的两个访问密钥。Azure之所以为你生成两个访问密钥，是因为如果你重新生成一个新密钥，所有与该密钥相关的SAS将不再有效。然后，你可以让应用程序使用第二个密钥访问数据，一旦密钥重新生成，你可以将新密钥与客户端共享。你可以通过点击两个密钥旁边的按钮生成新密钥：
- en: '![](img/c71c7edc-1345-4c10-881c-285e2dad41be.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c71c7edc-1345-4c10-881c-285e2dad41be.png)'
- en: Access keys
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 访问密钥
- en: There is also a connection string provided for each key which can be used by
    client applications to access the storage account.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每个密钥还会提供一个连接字符串，客户端应用可以使用该字符串访问存储帐户。
- en: In the next section, we're going to generate an SAS for the access keys.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将为访问密钥生成SAS。
- en: Generating an SAS
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生成SAS
- en: 'In this demonstration, we are going to generate an SAS for our blob store. To
    generate an SAS, perform the following steps:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 在本演示中，我们将为我们的Blob存储生成SAS。要生成SAS，请执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)访问Azure门户。
- en: Again, go to the storage account that we created in the previous step.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次进入我们在上一步创建的存储帐户。
- en: 'Once the overview blade is open, under **Settings**, select **Shared access
    signature**:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开概览面板后，在**设置**下，选择**共享访问签名**：
- en: '![](img/9c46c1d8-06bf-4c1a-82d5-22f89e8c699b.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9c46c1d8-06bf-4c1a-82d5-22f89e8c699b.png)'
- en: Selecting Shared access signature
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 选择共享访问签名
- en: 'To only allow the blob storage to be accessed, disable the file, queue, and
    table. Keep the default permissions, and then select an expiration date and time.
    You can also set the allowed protocols in here. At the bottom of the screen, you
    can apply these permissions to the different keys. Keep **key1** selected and
    click on **Generate SAS and connection string**:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 若只允许访问 Blob 存储，请禁用文件、队列和表。保留默认权限，然后选择过期日期和时间。你还可以在这里设置允许的协议。屏幕底部，你可以将这些权限应用于不同的密钥。保留**key1**被选中，然后点击**生成
    SAS 和连接字符串**：
- en: '![](img/c5a90381-5b67-4a60-8629-c0148c185678.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5a90381-5b67-4a60-8629-c0148c185678.png)'
- en: Generating SAS and connection string
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 生成 SAS 和连接字符串
- en: You can now use this token to request the data from the blob storage.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你可以使用这个令牌从 Blob 存储请求数据。
- en: This concludes this demonstration. In the next section, we are going to look
    at how to implement Azure storage replication.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 本演示到此结束。在下一部分，我们将介绍如何实现 Azure 存储复制。
- en: Implementing Azure storage replication
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实现 Azure 存储复制
- en: The data in Azure is always replicated to ensure durability and high availability. Azure
    storage copies your data so that it is protected from planned and unplanned events,
    including transient hardware failures, network or power outages, and massive natural
    disasters. We have already covered the different replication types that Azure
    offers for your storage accounts.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 中的数据始终会进行复制，以确保数据的持久性和高可用性。Azure 存储会复制你的数据，以防止计划内和计划外事件的影响，包括临时硬件故障、网络或电力中断以及重大自然灾害。我们已经介绍了
    Azure 为你的存储账户提供的不同复制类型。
- en: 'Storage replication can be set during the creation of the storage account.
    You can change the type of replication later as well by using Azure portal, PowerShell,
    or the CLI. To change this in the Azure portal, you have to perform the following
    steps:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 存储复制可以在创建存储账户时进行设置。你也可以通过 Azure 门户、PowerShell 或 CLI 后续更改复制类型。要在 Azure 门户中更改此设置，你需要执行以下步骤：
- en: Navigate to Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 [https://portal.azure.com](https://portal.azure.com)，导航到 Azure 门户。
- en: Go to the storage account that we created in the previous step.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到我们在上一步骤中创建的存储账户。
- en: 'Under **Settings**, select **Configuration**. In this blade, under **Replication**, you
    can change the type of replication:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**设置**下，选择**配置**。在此面板中，点击**复制**，你可以更改复制类型：
- en: '![](img/d828e0f4-4e3a-4ffc-8773-3717fdc7735b.png)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d828e0f4-4e3a-4ffc-8773-3717fdc7735b.png)'
- en: Changing the type of replication
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 更改复制类型
- en: Summary
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered the first part of the *Implementing and Managing
    Storage* objective. We covered the different types of storage that are available
    to us in Azure, and when we should use them. We also covered how we can manage
    our data using Azure Storage Explorer, and how we can secure our data using SAS.
    Finally, we covered how to replicate data from storage accounts.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了*实现和管理存储*目标的第一部分。我们介绍了在 Azure 中可用的不同存储类型，以及何时使用它们。我们还介绍了如何使用 Azure
    存储资源管理器管理数据，以及如何使用 SAS 保护我们的数据。最后，我们介绍了如何从存储账户进行数据复制。
- en: In the next chapter, we'll cover the second part of this exam objective. In
    that chapter, we will cover how to import and export data to Azure.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍本考试目标的第二部分。在该章中，我们将介绍如何将数据导入和导出到 Azure。
- en: Questions
  id: totrans-153
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: 'Answer the following questions to test your knowledge of the information in
    this chapter. You can find the answers in the *Assessments* section at the end
    of this book:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 回答以下问题以测试你对本章内容的掌握情况。你可以在本书结尾的*评估*部分找到答案：
- en: Can the Azure Storage Explorer application only be used on Windows devices?
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure 存储资源管理器应用程序只能在 Windows 设备上使用吗？
- en: 'Yes'
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不是
- en: Can you configure storage accounts to be accessed from specific virtual networks,
    and not from on-premises networks?
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以配置存储账户使其仅能从特定的虚拟网络访问，而不能从本地网络访问吗？
- en: 'Yes'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不是
- en: Can you only set the type of replication for your storage accounts during the
    creation of the storage account?
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你只能在创建存储账户时设置存储账户的复制类型吗？
- en: 'Yes'
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不是
- en: Further reading
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'You can check out the following links for more information about the topics
    that were covered in this chapter:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以查阅以下链接，了解更多关于本章内容的详细信息：
- en: '*Azure Storage Documentation*: [https://docs.microsoft.com/en-us/azure/storage/](https://docs.microsoft.com/en-us/azure/storage/)'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Azure 存储文档*：[https://docs.microsoft.com/en-us/azure/storage/](https://docs.microsoft.com/en-us/azure/storage/)'
- en: '*Get started with Storage Explorer*: [https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows)'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*开始使用存储资源管理器*: [https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows)'
- en: '*Configure Azure Storage firewalls and virtual networks*: [https://docs.microsoft.com/en-us/azure/storage/common/storage-network-security](https://docs.microsoft.com/en-us/azure/storage/common/storage-network-security)'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*配置 Azure 存储防火墙和虚拟网络*: [https://docs.microsoft.com/en-us/azure/storage/common/storage-network-security](https://docs.microsoft.com/en-us/azure/storage/common/storage-network-security)'
- en: '*Azure Storage redundancy*: [https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy](https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy)'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Azure 存储冗余*: [https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy](https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy)'
