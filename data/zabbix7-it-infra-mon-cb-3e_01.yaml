- en: '1'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '1'
- en: Installing Zabbix and Getting Started Using the Frontend
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Zabbix 并开始使用前端界面
- en: For Zabbix 7, the developers have really outdone themselves. In this **Long
    Term Support** (**LTS**) release, we will find far more **quality-of-life** (**QoL**)
    changes along with some impressive new cutting-edge features. Coming from Zabbix
    6.0, you will still find a lot of improvements made in Zabbix 6.2 and 6.4 as those
    have, of course, been included in Zabbix 7.0 LTS. We will detail all important
    changes throughout the book.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Zabbix 7，开发人员确实做得非常出色。在这个**长期支持**（**LTS**）版本中，我们将会发现更多的**生活质量**（**QoL**）改进，并且还加入了一些令人印象深刻的前沿特性。从
    Zabbix 6.0 过渡过来，你仍然会看到 Zabbix 6.2 和 6.4 中的许多改进，因为这些版本的内容已经被包含在 Zabbix 7.0 LTS
    中。我们将在本书中详细介绍所有重要的更改。
- en: 'In this chapter, we will install the Zabbix server and explore the Zabbix UI
    to get you familiar with it. We will go over finding your hosts, triggers, dashboards,
    and more to make sure you feel confident diving into the deeper material later
    on in this book. The Zabbix UI has a lot of options to explore, so if you are
    just getting started, don’t get overwhelmed. It’s quite structurally built, and
    once you get the hang of it, I am confident you will find your way without issues.
    You will learn all about these subjects in the following recipes:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将安装 Zabbix 服务器并浏览 Zabbix 用户界面，以帮助你熟悉它。我们将会介绍如何找到主机、触发器、仪表盘等，确保你能够自信地深入了解本书后续的内容。Zabbix
    的用户界面有很多选项可以探索，如果你是刚开始使用，不要感到不知所措。它的结构设计得很清晰，一旦你掌握了它，我相信你能轻松找到自己的路径。你将在后续的教程中了解所有相关内容：
- en: Installing the Zabbix server
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Zabbix 服务器
- en: Setting up the Zabbix frontend
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 Zabbix 前端界面
- en: Enabling Zabbix server **high** **availability** (**HA**)
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用 Zabbix 服务器**高可用性**（**HA**）
- en: Using the Zabbix frontend
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Zabbix 前端界面
- en: Navigating the Zabbix frontend
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 浏览 Zabbix 前端界面
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: We’ll be starting this chapter with an empty Linux (virtual) machine. Feel free
    to choose a RHEL- or Debian-based Linux distribution (we’ll be using Ubuntu in
    the examples). It’s recommended to use a server distribution and not a desktop
    distribution of the Linux distribution you choose. We will then set up a Zabbix
    server from scratch on this host.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从一台空的 Linux（虚拟）机器开始本章内容。你可以选择使用 RHEL 或 Debian 系列的 Linux 发行版（在示例中我们将使用 Ubuntu）。建议使用服务器版而非桌面版的
    Linux 发行版。我们接下来将从零开始在这台主机上搭建 Zabbix 服务器。
- en: So before jumping in, make sure you have your Linux host at the ready. I’ll
    be using Rocky Linux 9 and Ubuntu 22.04 in my examples.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 所以在开始之前，确保你的 Linux 主机已准备好。我将在示例中使用 Rocky Linux 9 和 Ubuntu 22.04。
- en: Installing the Zabbix server
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Zabbix 服务器
- en: Before doing anything within Zabbix, we need to install it and get ready to
    start working with it. In this recipe, we are going to discover how to install
    Zabbix server 7.0.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始使用 Zabbix 之前，我们需要先安装它并做好准备。在本章中，我们将学习如何安装 Zabbix 服务器 7.0。
- en: Getting ready
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Before we actually install the Zabbix server, we are going to need to fulfill
    some prerequisites. We will be using **MariaDB** mostly throughout this book.
    MariaDB is popular, and a lot of information is available on using it with Zabbix.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们实际安装 Zabbix 服务器之前，我们需要完成一些前提条件。在本书中，我们将主要使用 **MariaDB**。MariaDB 很流行，并且有大量关于如何与
    Zabbix 配合使用的信息。
- en: At this point, you should have a prepared Linux server in front of you running
    either a RHEL- or Debian-based distribution. I’ll be installing Rocky Linux 9
    and Ubuntu 22.04 on my server; let’s call them `lar-book-rocky` and `lar-book-ubuntu`.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 到这一步，你应该已经准备好了一个运行着 RHEL 或 Debian 系列发行版的 Linux 服务器。我将会在我的服务器上安装 Rocky Linux
    9 和 Ubuntu 22.04；我们将它们分别命名为`lar-book-rocky`和`lar-book-ubuntu`。
- en: When you have your server ready, we can start the installation process.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的服务器准备好后，我们可以开始安装过程。
- en: How to do it…
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Let’s start by adding the Zabbix 7.0 repository to our system.
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们从将 Zabbix 7.0 仓库添加到系统开始。
- en: 'For RHEL-based systems, run the following:'
  id: totrans-20
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE0]'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'For Ubuntu systems, run the following:'
  id: totrans-22
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，运行以下命令：
- en: '[PRE1]'
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'For RHEL-based systems, we’ll also remove the Zabbix **Extra Packages for Enterprise
    Linux** (**EPEL**) repository packages (if installed):'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，我们还需要删除 Zabbix **企业 Linux 扩展包**（**EPEL**）仓库包（如果已安装）：
- en: '[PRE2]'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Then, add the following line:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，添加以下行：
- en: '[PRE3]'
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Now that the repository is added, let’s add the MariaDB repository on our server:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在仓库已经添加，让我们在服务器上添加 MariaDB 仓库：
- en: '[PRE4]'
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Then, install and enable it.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，安装并启用它。
- en: 'For RHEL-based systems, run the following:'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE5]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'For Ubuntu systems, run the following:'
  id: totrans-33
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，请运行以下命令：
- en: '[PRE6]'
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'After installing MariaDB, make sure to secure your installation by running
    the following command:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装 MariaDB 后，请确保通过运行以下命令来保护您的安装：
- en: '[PRE7]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Make sure to answer the questions with yes (**Y**) and configure a root password
    that’s secure.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请确保回答问题时选择“是”（**Y**），并配置一个安全的 root 密码。
- en: Run through the secure installation setup, and make sure to save your password
    somewhere. It’s highly recommended to use a password vault.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行安全安装设置，并确保将密码保存在某个地方。强烈建议使用密码保险库。
- en: Now, let’s install our Zabbix server with MySQL support.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们安装支持 MySQL 的 Zabbix 服务器。
- en: 'For RHEL-based systems, run the following command:'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，请运行以下命令：
- en: '[PRE8]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'For Ubuntu systems, run the following command:'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，请运行以下命令：
- en: '[PRE9]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'With the Zabbix server installed, we are ready to create our Zabbix database.
    Log in to MariaDB with the following:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装了 Zabbix 服务器后，我们准备创建 Zabbix 数据库。使用以下命令登录 MariaDB：
- en: '[PRE10]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Enter the password you set up during the secure installation. Next, we’ll create
    the Zabbix database with the following commands. Do not forget to change **password**
    in the second and third commands, as this will be the password used for connecting
    to your Zabbix database:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您在安全安装过程中设置的密码。接下来，我们将使用以下命令创建 Zabbix 数据库。不要忘记在第二个和第三个命令中更改**密码**，因为这将是用于连接到
    Zabbix 数据库的密码：
- en: '[PRE11]'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Tip
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: 'Since Zabbix 6, Zabbix uses **utf8mb4** by default in all its installation
    documentation. We’ve changed **utf8** to **utf8mb4** in the preceding command
    so that everything will work. For reference, check the Zabbix support ticket here:
    [https://support.zabbix.com/browse/ZBXNEXT-3706](https://support.zabbix.com/browse/ZBXNEXT-3706).'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 从 Zabbix 6 开始，Zabbix 默认使用 **utf8mb4**，这在所有安装文档中都有说明。我们在之前的命令中将 **utf8** 更改为
    **utf8mb4**，以确保一切正常工作。参考资料，请查看 Zabbix 支持票据：[https://support.zabbix.com/browse/ZBXNEXT-3706](https://support.zabbix.com/browse/ZBXNEXT-3706)。
- en: 'We now need to import our Zabbix database schema to our newly created Zabbix
    database:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们现在需要将 Zabbix 数据库架构导入到新创建的 Zabbix 数据库中：
- en: '[PRE12]'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'As mentioned, we can now disable **log_bin_trust_function_creators** again:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如前所述，我们现在可以再次禁用 **log_bin_trust_function_creators**：
- en: '[PRE13]'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Important note
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: At this point, it might look like you are stuck and the system is not responding.
    Do not worry, though, as it will just take a while to import the SQL schema.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，您可能会觉得系统卡住了并且没有响应。不过不用担心，这只是导入 SQL 架构需要一些时间。
- en: We are now done with the preparations for our MariaDB side and are ready to
    move on to the next step, which will be configuring the Zabbix server.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经完成了 MariaDB 方面的准备工作，准备进入下一步，即配置 Zabbix 服务器。
- en: 'The Zabbix server is configured using the Zabbix server config file. This file
    is located in **/etc/zabbix/**. Let’s open this file with our favorite editor;
    I’ll be using Vim throughout the book (but feel free to substitute Vim with **vi**
    or **nano**):'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Zabbix 服务器是通过 Zabbix 服务器配置文件进行配置的。此文件位于 **/etc/zabbix/**。让我们用自己喜欢的编辑器打开这个文件；我将在本书中使用
    Vim（但您可以根据需要用 **vi** 或 **nano** 替代 Vim）：
- en: '[PRE14]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Now, make sure the following lines in the file match your database name, database
    user username, and database user password:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，请确保文件中的以下行与您的数据库名称、数据库用户名和数据库用户密码相匹配：
- en: '[PRE15]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Tip
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Before starting the Zabbix server, you should configure SELinux or AppArmor
    to allow the use of the Zabbix server. If this is a test machine, you can use
    a permissive stance for SELinux or disable AppArmor, but it is not recommended
    to do this in production.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在启动 Zabbix 服务器之前，您应该配置 SELinux 或 AppArmor 以允许使用 Zabbix 服务器。如果这是测试机器，您可以为 SELinux
    使用宽松模式或禁用 AppArmor，但不建议在生产环境中这样做。
- en: 'All done; we are now ready to start our Zabbix server:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成了；我们现在准备启动 Zabbix 服务器：
- en: '[PRE16]'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Check whether everything is starting up as expected with the following:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令检查是否一切按预期启动：
- en: '[PRE17]'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Also, make sure to monitor the log file, which provides a detailed description
    of the Zabbix startup process:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同时，请确保监控日志文件，该文件提供了 Zabbix 启动过程的详细描述：
- en: '[PRE18]'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Most of the messages in this file are fine and can be ignored safely, but make
    sure to read them well and see if there are any issues with your Zabbix server
    starting.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这个文件中的大部分消息都是正常的，可以安全地忽略，但请确保仔细阅读，看看 Zabbix 服务器启动时是否有任何问题。
- en: How it works…
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'The Zabbix server is the main process for our Zabbix setup. It is responsible
    for our monitoring, problem alerting, and a lot of the other tasks described in
    this book. A complete Zabbix stack consists of at least the following:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 服务器是我们 Zabbix 设置的主要进程。它负责我们的监控、问题警报以及本书中描述的许多其他任务。一个完整的 Zabbix 堆栈至少包括以下组件：
- en: A database (MySQL/MySQL fork, PostgreSQL, or Oracle)
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个数据库（MySQL/MySQL 分支，PostgreSQL，或 Oracle）
- en: A Zabbix server
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 Zabbix 服务器
- en: Apache or NGINX running the Zabbix frontend with PHP 8.0 or higher
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Apache 或 NGINX 运行 Zabbix 前端并支持 PHP 8.0 或更高版本
- en: 'We can see the components and how they communicate with each other in the following
    diagram:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过下图看到各个组件以及它们如何相互通信：
- en: '![Figure 1.1 – Zabbix setup communications diagram](img/B19803_01_01.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.1 – Zabbix 设置通信图](img/B19803_01_01.jpg)'
- en: Figure 1.1 – Zabbix setup communications diagram
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.1 – Zabbix 设置通信图
- en: We’ve just set up the Zabbix server and database; by running these two, we are
    basically ready to start monitoring. The Zabbix server communicates with the Zabbix
    database to write collected values to it.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚刚设置了 Zabbix 服务器和数据库，通过运行这两个组件，我们基本上已经准备好开始监控。Zabbix 服务器与 Zabbix 数据库通信，将收集到的值写入数据库。
- en: 'There is still one problem, though: we cannot configure our Zabbix server to
    do anything. For this, we are going to need our Zabbix frontend, which we’ll set
    up in the next recipe.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 但是还有一个问题：我们无法配置 Zabbix 服务器做任何事情。为此，我们需要 Zabbix 前端，我们将在下一个章节中进行设置。
- en: Setting up the Zabbix frontend
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置 Zabbix 前端
- en: The Zabbix frontend is the face of our server. It’s where we will configure
    all of our hosts, templates, dashboards, maps, and everything else. Without it,
    we would be blind to what’s going on on the server side. So, let’s set up our
    Zabbix frontend in this recipe.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 前端是我们服务器的“面孔”。它是我们配置所有主机、模板、仪表板、地图和其他所有内容的地方。没有它，我们将无法看到服务器端的情况。因此，在本章节中，我们将设置
    Zabbix 前端。
- en: Getting ready
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We are going to set up the Zabbix frontend using NGINX. It’s also possible to
    use Apache, but NGINX is known to be faster and, as such, it has a slight edge
    over Apache. Since installation of both NGINX and Apache is quite simple, NGINX
    is the preferred way to go if you have a lot of frontend users. Before starting
    with this recipe, make sure you are running the Zabbix server on a Linux distribution
    of your choice. I’ll be using the `lar-book-rocky` and `lar-book-ubuntu` hosts
    in these recipes to show the setup process on Rocky Linux 9 and Ubuntu 22.04.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 NGINX 来设置 Zabbix 前端。虽然也可以使用 Apache，但 NGINX 的速度更快，因此它在性能上略优于 Apache。由于安装
    NGINX 和 Apache 都非常简单，如果前端用户较多，建议使用 NGINX。在开始本章之前，请确保您正在 Linux 发行版上运行 Zabbix 服务器。我将在这些章节中使用
    `lar-book-rocky` 和 `lar-book-ubuntu` 主机，展示在 Rocky Linux 9 和 Ubuntu 22.04 上的设置过程。
- en: How to do it…
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Let’s jump right in and install the frontend.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们直接进入，安装前端。
- en: 'For RHEL-based systems, run the following:'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，请运行以下命令：
- en: '[PRE19]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'For Ubuntu systems, run the following:'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，请运行以下命令：
- en: '[PRE20]'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Tip
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Don’t forget to allow ports **80** and **443** in your firewall if you are using
    one. Without this, you won’t be able to connect to the frontend.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在使用防火墙，请不要忘记允许**80**和**443**端口。没有这一步，您将无法连接到前端。
- en: We will then have to configure our NGINX configuration.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要配置 NGINX 配置文件。
- en: 'For RHEL-based systems, edit the following file:'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，请编辑以下文件：
- en: '[PRE21]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'For Ubuntu systems, edit the following file:'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，请编辑以下文件：
- en: '[PRE22]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Then, edit the following two lines:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，编辑以下两行：
- en: '[PRE23]'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Make it look like this:'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将其修改为如下：
- en: '[PRE24]'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Important note
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: At **server_name**, it is important to add the IP address of where this NGINX
    (Zabbix) web page will be running. Add the IP address or DNS name of where you
    want your frontend to be available here.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在**server_name**，重要的是添加运行此 NGINX（Zabbix）网页的 IP 地址。请在此处添加您希望前端可用的 IP 地址或 DNS
    名称。
- en: Restart the Zabbix components and make sure they start up when the server is
    booted.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新启动 Zabbix 组件，并确保它们在服务器启动时自动启动。
- en: 'For RHEL-based systems, run the following:'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，请运行以下命令：
- en: '[PRE25]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'For Ubuntu systems, run the following:'
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，请运行以下命令：
- en: '[PRE26]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: We should now be able to navigate to our Zabbix frontend without any issues
    and start the final steps to set up the Zabbix frontend.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们现在应该能够顺利访问我们的 Zabbix 前端，并开始进行设置 Zabbix 前端的最后步骤。
- en: 'Let’s go to our browser and navigate to our server’s IP. It should look like
    this:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们打开浏览器并导航到服务器的 IP 地址。它应该看起来像这样：
- en: '[PRE27]'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Important note
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: 'On Ubuntu (in some cases), you might have to add port **8080**, which you will
    probably want to change to port **80** (or **443** after adding SSL) later. In
    those cases, the URL should look like this:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Ubuntu（某些情况下），你可能需要添加端口 **8080**，以后你可能会想把它改为 **80** 端口（或者在添加 SSL 后为 **443**）。在这种情况下，URL
    应该是这样的：
- en: http://<your_server_ip>:8080/
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: http://<your_server_ip>:8080/
- en: 'We should now see the following web page:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们应该能看到以下网页：
- en: '![Figure 1.2 – The Zabbix welcome screen](img/B19803_01_02.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.2 – Zabbix 欢迎页面](img/B19803_01_02.jpg)'
- en: Figure 1.2 – The Zabbix welcome screen
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.2 – Zabbix 欢迎页面
- en: If you don’t see this web page, you may have missed some steps in the setup
    process. Retrace your steps and double-check your configuration files; even the
    smallest typo could prevent the web page from serving.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有看到这个网页，可能是你错过了安装过程中的某些步骤。回溯你的步骤，仔细检查配置文件；即使是一个小的拼写错误，也可能导致网页无法显示。
- en: 'Let’s continue by clicking **Next step** on this page, which will serve you
    with the next page:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个页面上点击**下一步**继续，这将带你进入下一页：
- en: '![Figure 1.3 – The Zabbix installation prerequisites page](img/B19803_01_03.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.3 – Zabbix 安装前提页面](img/B19803_01_03.jpg)'
- en: Figure 1.3 – The Zabbix installation prerequisites page
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.3 – Zabbix 安装前提页面
- en: 'Every single option here should be showing **OK** now; if not, fix the mistake
    it’s showing you. If everything is OK, you may proceed by clicking **Next step**
    again, which will take you to the next page:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在这里的每一个选项应该都显示**OK**；如果没有，修正它所显示的错误。如果一切正常，你可以通过再次点击**下一步**来继续，这将带你进入下一页：
- en: "![Figure 1.4 – The Zabbix installation DB connection pag\uFEFFe](img/B19803_01_04.jpg)"
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.4 – Zabbix 安装数据库连接页面](img/B19803_01_04.jpg)'
- en: Figure 1.4 – The Zabbix installation DB connection page
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4 – Zabbix 安装数据库连接页面
- en: Here, we need to tell our Zabbix frontend where our MySQL database is located.
    Since we installed it on **localhost**, we just need to make sure we issue the
    right database name, database user username, and database user password.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，我们需要告诉 Zabbix 前端 MySQL 数据库的位置。因为我们将其安装在 **localhost** 上，所以只需要确保提供正确的数据库名称、数据库用户名和数据库密码。
- en: 'This should make the Zabbix frontend able to communicate with the database.
    Let’s proceed by clicking **Next** **step** again:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这应该使 Zabbix 前端能够与数据库通信。让我们通过再次点击**下一步**来继续：
- en: "![Figure 1.5 – The Zabbix installation server details page\uFEFF](img/B19803_01_05.jpg)"
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.5 – Zabbix 安装服务器详细页面](img/B19803_01_05.jpg)'
- en: Figure 1.5 – The Zabbix installation server details page
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.5 – Zabbix 安装服务器详细页面
- en: Next up is the Zabbix server configuration. Make sure to name your server something
    useful or something cool. For example, I set up a production server called `Meeseeks`
    because every time we got an alert, we could make Zabbix say “*I’m Mr. Meeseeks.
    Look at me.*” But something such as `zabbix.example.com` also works.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是 Zabbix 服务器配置。确保给你的服务器起个有用的名字或酷一点的名字。例如，我设置了一个名为 `Meeseeks` 的生产服务器，因为每次收到警报时，我们都可以让
    Zabbix 说“*我是 Mr. Meeseeks。看我！*”。但像 `zabbix.example.com` 这样的名字也可以。
- en: 'Let’s name our server, set up the time zone to match our own time zone, and
    proceed to the next step:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们给服务器命名，设置时区以匹配我们的本地时区，然后继续下一步：
- en: "![Figure 1.6 – The Zabbix installation summary \uFEFFpage](img/B19803_01_06.jpg)"
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.6 – Zabbix 安装总结页面](img/B19803_01_06.jpg)'
- en: Figure 1.6 – The Zabbix installation summary page
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.6 – Zabbix 安装总结页面
- en: 'Verify your settings and proceed to click **Next step** one more time:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证你的设置后，再次点击**下一步**继续：
- en: "![Figure 1.7 – The Zabbix installation finish pa\uFEFFge](img/B19803_01_07.JPG)"
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.7 – Zabbix 安装完成页面](img/B19803_01_07.JPG)'
- en: Figure 1.7 – The Zabbix installation finish page
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.7 – Zabbix 安装完成页面
- en: 'You have successfully installed the Zabbix frontend. You may now click the
    **Finish** button, and we can start using the frontend. You’ll be served with
    a login page where you can use the following default credentials:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你已经成功安装了 Zabbix 前端。现在你可以点击**完成**按钮，我们可以开始使用前端界面。你将看到一个登录页面，你可以使用以下默认凭据：
- en: '**Username**: **Admin**'
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户名**：**Admin**'
- en: '**Password**: **zabbix**'
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：**zabbix**'
- en: Keep in mind that the username and password fields are both case-sensitive.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，用户名和密码字段是区分大小写的。
- en: How it works…
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: 'Now that we’ve installed our Zabbix frontend, our Zabbix setup is complete
    and we are ready to start working with it. Our Zabbix frontend will connect to
    our database to edit the configuration values of our setup, as we can see in the
    following diagram:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经安装了 Zabbix 前端，我们的 Zabbix 设置已完成，我们可以开始使用它了。我们的 Zabbix 前端将连接到我们的数据库，以编辑我们设置的配置值，正如我们在下面的图表中可以看到的那样：
- en: '![Figure 1.8 – Zabbix setup communications diagram](img/B19803_01_08.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.8 – Zabbix 设置通信图](img/B19803_01_08.jpg)'
- en: Figure 1.8 – Zabbix setup communications diagram
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.8 – Zabbix 设置通信图
- en: The Zabbix frontend will also talk to our Zabbix server, but this is just to
    make sure the Zabbix server is up and running and to provide some additional functionality
    such as a test button on items. Now that we know how to set up the Zabbix frontend,
    we can start using it. Let’s check this out after the next recipe.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 前端还将与我们的 Zabbix 服务器进行通信，但这仅是为了确保 Zabbix 服务器正常运行并提供一些额外功能，例如项目上的测试按钮。现在我们知道如何设置
    Zabbix 前端后，我们可以开始使用它。在下一个示例后，我们来看看这个。
- en: There’s more...
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'Zabbix provides a very convenient setup guide that contains a lot of detail
    regarding the installation of Zabbix. I would always recommend keeping this page
    open during a Zabbix installation as it contains information such as a link to
    the latest repository. Check it out here:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 提供了一个非常方便的设置指南，其中包含有关安装 Zabbix 的详细信息。我始终建议在安装 Zabbix 时保持此页面打开，因为它包含诸如最新存储库链接的信息。在这里查看：
- en: '[https://www.zabbix.com/download](https://www.zabbix.com/download)'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.zabbix.com/download](https://www.zabbix.com/download)'
- en: Enabling Zabbix server HA
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启用 Zabbix 服务器 HA
- en: Zabbix 6 shipped with one of the most anticipated features of all time, HA.
    This feature will bring your Zabbix setup to the next level by making sure that
    if one of your Zabbix servers is having issues, another one will take over. Of
    course, this feature is still available in Zabbix 7, and we will be making good
    use of it.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 6 附带了有史以来最受期待的功能之一，即高可用性（HA）。这一功能将通过确保如果您的一个 Zabbix 服务器出现问题，则另一个服务器将接管来将您的
    Zabbix 设置提升到新的水平。当然，这一功能在 Zabbix 7 中仍然可用，我们将充分利用它。
- en: 'A great thing about this implementation is that it supports an easy proprietary
    way to put one to many Zabbix servers in a cluster: a great way of making sure
    your monitoring stays in the air at all times (or at least as much as possible).'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 这种实现的一个很大的优点是支持一个易于使用的专有方式将多个 Zabbix 服务器放入集群中：这是确保您的监控始终保持在线（或至少尽可能长时间在线）的绝佳方式。
- en: The setup for the Zabbix server will be active/passive, as we cannot do anything
    such as load balancing on the Zabbix server side. Load balancing is, however,
    supported using Zabbix proxies, which we will discuss in [*Chapter 8*](B19803_08.xhtml#_idTextAnchor1490),
    *Setting up* *Zabbix Proxies*.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 服务器的设置将是主/备份方式，因为我们不能在 Zabbix 服务器端执行诸如负载均衡之类的操作。然而，可以使用 Zabbix 代理支持负载均衡，我们将在[*第
    8 章*](B19803_08.xhtml#_idTextAnchor1490)中讨论*设置 Zabbix 代理*。
- en: Getting ready
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Before getting started, please note that creating an HA setup is considered
    an advanced topic. It might be more difficult than other recipes in this chapter.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，请注意创建高可用设置被认为是一个高级主题。这可能比本章其他示例更加困难。
- en: 'For this setup, we will need three new virtual machines, as we are going to
    create a split Zabbix setup, unlike the setup that we created in the first recipe
    of this chapter. Let’s take a look at how I have named our three new virtual machines
    and what their IP addresses will be:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此设置，我们将需要三台新的虚拟机，因为我们将创建一个分割的 Zabbix 设置，与本章第一个示例创建的设置不同。让我们看看我已经命名的三台新虚拟机及其
    IP 地址：
- en: '**lar-book-ha1** (**192.168.0.1**)'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**lar-book-ha1** (**192.168.0.1**)'
- en: '**lar-book-ha2** (**192.168.0.2**)'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**lar-book-ha2** (**192.168.0.2**)'
- en: '**lar-book-ha-db** (**192.168.0.10**)'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**lar-book-ha-db** (**192.168.0.10**)'
- en: Two of these servers will run our Zabbix server cluster and a Zabbix frontend.
    The other server is just for our MySQL database. Please take note that the IP
    addresses used in the example may be different for you. Use the correct ones for
    your environment.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这些服务器中的两台将运行我们的 Zabbix 服务器集群和一个 Zabbix 前端。另一台服务器仅用于我们的 MySQL 数据库。请注意，示例中使用的
    IP 地址可能与您的环境中的实际情况不同。请使用适合您环境的正确 IP 地址。
- en: We will also need a `192.168.0.5` in the example.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例中，我们还需要一个 `192.168.0.5`。
- en: Tip
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: In our setup, we are using only one MySQL Zabbix database. To make sure all
    parts of Zabbix are set up as highly available, it might be worth looking into
    setting up MySQL in a primary/primary setup. This can be a great combination with
    the Zabbix server’s HA.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的设置中，我们只使用一个 MySQL Zabbix 数据库。为了确保 Zabbix 的所有部分都被设置为高可用，可能值得考虑将 MySQL 设置为主/主模式。这与
    Zabbix 服务器的高可用性结合使用会是一个不错的选择。
- en: This cookbook will *not* use SELinux or AppArmor, so make sure to add the correct
    policies before or during the use of this guide. It’s also possible to disable
    SELinux, but this is not recommended in production. Additionally, this guide does
    not detail how to set up your firewall, so make sure to do this beforehand as
    well.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 本指南 *不会* 使用 SELinux 或 AppArmor，因此在使用本指南之前或过程中，请确保添加正确的策略。也可以禁用 SELinux，但在生产环境中不推荐这样做。此外，本指南没有详细说明如何设置防火墙，因此请确保提前进行设置。
- en: How to do it…
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: For your convenience, we’ve split this *How to do it…* section into three parts.
    The first is setting up the database, the next is setting up the Zabbix server
    cluster, and the last is how to set up the Zabbix frontend redundantly. The *How
    it works…* section will then provide an explanation of the entire setup.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 为了方便起见，我们将 *如何操作…* 部分分成了三部分。第一部分是设置数据库，接下来是设置 Zabbix 服务器集群，最后是如何冗余地设置 Zabbix
    前端。然后，*它是如何工作的…* 部分将解释整个设置过程。
- en: Setting up the database
  id: totrans-164
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置数据库
- en: Let’s start with setting up our Zabbix database, ready to be used in a highly
    available Zabbix server setup.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从设置 Zabbix 数据库开始，准备在高可用 Zabbix 服务器设置中使用。
- en: 'Log in to **lar-book-ha-db** and install the MariaDB repository with the following
    command on Red Hat-based systems:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到 **lar-book-ha-db** 并在基于 Red Hat 的系统上使用以下命令安装 MariaDB 仓库：
- en: '[PRE28]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Then, let’s install the MariaDB server application.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，让我们安装 MariaDB 服务器应用程序。
- en: 'For RHEL-based systems, run the following:'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE29]'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'For Ubuntu systems, run the following:'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，运行以下命令：
- en: '[PRE30]'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'After installing MariaDB, make sure to secure your installation with the following
    command:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装 MariaDB 后，确保使用以下命令来保护您的安装：
- en: '[PRE31]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Make sure to answer the questions with yes (**Y**) and configure a root password
    that’s secure. It’s highly recommended to use a password vault for storing it.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保回答问题时选择是（**Y**），并配置一个安全的 root 密码。强烈建议使用密码保险库来存储它。
- en: 'Now, let’s create our Zabbix database for our Zabbix servers to connect to.
    Log in to MariaDB with the following command:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们为 Zabbix 服务器创建 Zabbix 数据库，以便连接。使用以下命令登录 MariaDB：
- en: '[PRE32]'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Enter the password you set up during the secure installation. Next, we’ll create
    a Zabbix database with the following commands. Do not forget to change **password**
    in the second, third, and fourth commands:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入在安全安装过程中设置的密码。接下来，我们将使用以下命令创建一个 Zabbix 数据库。不要忘记在第二、第三和第四个命令中更改 **password**：
- en: '[PRE33]'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Lastly, we need to import the initial Zabbix database configuration, but for
    that, we need to install the Zabbix repository.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们需要导入初始的 Zabbix 数据库配置，但为此，我们需要先安装 Zabbix 仓库。
- en: 'For RHEL-based systems, run the following command:'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE34]'
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'For Ubuntu systems, run the following command:'
  id: totrans-183
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，运行以下命令：
- en: '[PRE35]'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Then, we need to install the SQL scripts Zabbix module.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们需要安装 Zabbix 模块的 SQL 脚本。
- en: 'For RHEL-based systems, run the following command:'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE36]'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'For Ubuntu systems, run the following command:'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，运行以下命令：
- en: '[PRE37]'
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Then, we issue the following command, which might take a while, so be patient
    until it is done:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们执行以下命令，这可能需要一段时间，请耐心等待直到完成：
- en: '[PRE38]'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'We will need to disable **log_bin_trust_function_creators** after this step:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此步骤之后，我们需要禁用 **log_bin_trust_function_creators**：
- en: '[PRE39]'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: Setting up the Zabbix server cluster nodes
  id: totrans-194
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置 Zabbix 服务器集群节点
- en: Setting up the cluster nodes works in the same way as setting up any new Zabbix
    server. The only difference is that we will need to specify some new configuration
    parameters.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 设置集群节点的方式与设置任何新 Zabbix 服务器的方式相同。唯一的区别是我们需要指定一些新的配置参数。
- en: 'Let’s start by adding the Zabbix 7.0 repository to our **lar-book-ha1** and
    **lar-book-ha2** systems:'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们从将 Zabbix 7.0 仓库添加到 **lar-book-ha1** 和 **lar-book-ha2** 系统开始：
- en: '[PRE40]'
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'For Ubuntu systems, use the following command:'
  id: totrans-198
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，使用以下命令：
- en: '[PRE41]'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Now, let’s install the Zabbix server application.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们安装 Zabbix 服务器应用程序。
- en: 'For RHEL-based systems, run the following command:'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE42]'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'For Ubuntu systems, run the following command:'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，运行以下命令：
- en: '[PRE43]'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'We will now edit the Zabbix server configuration files, starting with **lar-book-ha1**.
    Issue the following command:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将编辑 Zabbix 服务器配置文件，从**lar-book-ha1**开始。执行以下命令：
- en: '[PRE44]'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Then, add the following lines to allow a database connection:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，添加以下行以允许数据库连接：
- en: '[PRE45]'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '`DBName` and `DBUser` are both set to `zabbix` by default. If you used a different
    database and/or username, you will have to change those as well.'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下，`DBName` 和 `DBUser` 都设置为`zabbix`。如果你使用了不同的数据库和/或用户名，你也需要更改这些设置。
- en: 'To enable HA on this host, add the following lines in the same file:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在此主机上启用 HA，请在相同的文件中添加以下行：
- en: '[PRE46]'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'To make sure our Zabbix frontend knows where to connect to if there is a node
    failover, fill in the following:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了确保我们的 Zabbix 前端知道在节点故障转移时连接到哪里，填写以下内容：
- en: '[PRE47]'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Save the file, and let’s do the same for our **lar-book-ha2** host by editing
    its file:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存文件，然后我们将通过编辑**lar-book-ha2**主机的文件，做相同的操作：
- en: '[PRE48]'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Then, add the following lines to allow a database connection:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，添加以下行以允许数据库连接：
- en: '[PRE49]'
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '`DBName` and `DBUser` are both set to `zabbix` by default. If you used a different
    database and/or username, you will have to change those as well.'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 默认情况下，`DBName` 和 `DBUser` 都设置为`zabbix`。如果你使用了不同的数据库和/或用户名，你也需要更改这些设置。
- en: 'To enable HA on this host, add the following lines in the same file:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在此主机上启用 HA，请在相同的文件中添加以下行：
- en: '[PRE50]'
  id: totrans-220
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'To make sure our Zabbix frontend knows where to connect to if there is a node
    failover, fill in the following:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了确保我们的 Zabbix 前端知道在节点故障转移时连接到哪里，填写以下内容：
- en: '[PRE51]'
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Save the file, and let’s start our Zabbix server:'
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存文件，然后让我们启动 Zabbix 服务器：
- en: '[PRE52]'
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: Setting up NGINX with HA
  id: totrans-225
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置带有 HA 的 NGINX
- en: To make sure our frontend is also set up in such a way that if one Zabbix server
    has issues, it fails over, we will set them up with `keepalived`. Let’s see how
    we can do this.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 为确保我们的前端也已设置，当一个 Zabbix 服务器出现问题时，它能够故障转移，我们将使用`keepalived`进行设置。让我们看看如何做到这一点。
- en: Let’s start by logging in to both **lar-book-ha1** and **lar-book-ha2** and
    installing **keepalived**.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们从登录到**lar-book-ha1**和**lar-book-ha2**开始，并安装**keepalived**。
- en: 'For RHEL-based systems, run the following:'
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE53]'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'For Ubuntu systems, run the following:'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，运行以下命令：
- en: '[PRE54]'
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Then, on **lar-book-ha1**, edit the **keepalived** configuration with the following
    command:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，在**lar-book-ha1**上，使用以下命令编辑**keepalived**配置：
- en: '[PRE55]'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Delete everything from this file (if it’s not empty already) and add the following
    text to the file:'
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除此文件中的所有内容（如果文件尚未为空），然后将以下文本添加到文件中：
- en: '[PRE56]'
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: Do not forget to update **password** to something secure and edit the **ens192**
    interface to your own interface name/number.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 别忘了将**password**更新为安全密码，并将**ens192**接口修改为你自己的接口名称/编号。
- en: Important note
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: In the previous file, we specified **virtual_router_id 51**; make sure the virtual
    router ID **51** isn’t used anywhere in the network yet. If it is, simply change
    the virtual router ID throughout this recipe.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的文件中，我们指定了**virtual_router_id 51**；请确保虚拟路由器 ID **51** 在网络中尚未使用。如果已使用，请简单地在整个操作中更改虚拟路由器
    ID。
- en: 'On **lar-book-ha2**, edit the same file with the following command:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**lar-book-ha2**上，使用以下命令编辑相同的文件：
- en: '[PRE57]'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Delete everything from the file with **dG** (if you are using vim), and this
    time, we will add the following information:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用**dG**删除文件中的所有内容（如果你使用的是 vim），这次我们将添加以下信息：
- en: '[PRE58]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE58]'
- en: Once again, do not forget to update **password** to something secure and edit
    the **ens192** interface to your own interface name/number.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次提醒，不要忘记将**password**更新为安全密码，并将**ens192**接口修改为你自己的接口名称/编号。
- en: Now, let’s install the Zabbix frontend.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们安装 Zabbix 前端。
- en: 'For RHEL-based systems, run the following:'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，运行以下命令：
- en: '[PRE59]'
  id: totrans-246
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: We will then have to configure our NGINX configuration.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们将配置我们的 NGINX 配置。
- en: 'For RHEL-based systems, edit the following file:'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，请编辑以下文件：
- en: '[PRE60]'
  id: totrans-249
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'For Ubuntu systems, edit the following file:'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，编辑以下文件：
- en: '[PRE61]'
  id: totrans-251
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'Then, edit the following two lines:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，编辑以下两行：
- en: '[PRE62]'
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Make it look like this:'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 使其看起来像这样：
- en: '[PRE63]'
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE63]'
- en: Important note
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: At **server_name**, it is important to add the IP address of where this NGINX
    (Zabbix) web page will be running. Add the IP address or DNS name of where you
    want your frontend to be available here. In this case, we have added the VIP address
    that **keepalived** will be managing.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 在**server_name**处，重要的是要添加此 NGINX（Zabbix）网页将运行的 IP 地址。请在此处添加前端可用的 IP 地址或 DNS
    名称。在此案例中，我们添加了**keepalived**将管理的 VIP 地址。
- en: 'Start the web server and **keepalived** to make your Zabbix frontend available
    with the following command:'
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动 Web 服务器和**keepalived**，使你的 Zabbix 前端可用，使用以下命令：
- en: '[PRE64]'
  id: totrans-259
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Then, we are ready to configure our Zabbix frontend. Navigate to your VIP address
    (in the example IP case, **http://192.168.0.5/**), and you will see the following
    page:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们可以开始配置我们的 Zabbix 前端。导航至您的 VIP 地址（在示例 IP 案例中为 **http://192.168.0.5/**），您将看到以下页面：
- en: '![Figure 1.9 – The Zabbix initial configuration window](img/B19803_01_09.jpg)'
  id: totrans-261
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.9 – lar-book-ha1 的 Zabbix 初始配置窗口](img/B19803_01_09.jpg)'
- en: Figure 1.9 – The Zabbix initial configuration window
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.9 – lar-book-ha1 的 Zabbix 初始配置窗口
- en: 'Click on **Next step** twice until you see the following page:'
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连续点击两次 **下一步** 直到看到以下页面：
- en: "![Figure 1.10 – The Zabbix database configuration wind\uFEFFow for lar-book-ha1](img/B19803_01_10.jpg)"
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.10 – lar-book-ha1 的 Zabbix 数据库配置窗口](img/B19803_01_10.jpg)'
- en: Figure 1.10 – The Zabbix database configuration window for lar-book-ha1
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.10 – lar-book-ha1 的 Zabbix 数据库配置窗口
- en: Make sure to fill in **Database host** with the IP address of our Zabbix MariaDB
    database (**192.168.0.10**). Then, fill in the database password for our **zabbix**
    database user.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保用我们 Zabbix MariaDB 数据库的 IP 地址（**192.168.0.10**）填写 **数据库主机**。然后，为我们的 **zabbix**
    数据库用户填写数据库密码。
- en: 'Then, for the last step, for our first node, set up **Zabbix server name**
    as **lar-book-ha1** and select your time zone, as seen in the following screenshot:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，作为最后一步，对于我们的第一个节点，将 **Zabbix 服务器名称** 设置为 **lar-book-ha1**，并选择您的时区，如下截屏所示：
- en: "![Figure 1.11 – The Zabbix server settings win\uFEFFdow for lar-book-ha1](img/B19803_01_11.JPG)"
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.11 – lar-book-ha1 的 Zabbix 服务器设置窗口](img/B19803_01_11.JPG)'
- en: Figure 1.11 – The Zabbix server settings window for lar-book-ha1
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.11 – lar-book-ha1 的 Zabbix 服务器设置窗口
- en: Then, click **Next step** and **Finish**.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，点击 **下一步** 和 **完成**。
- en: Now, we need to do the same thing to our second frontend. Log in to **lar-book-ha1**.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要对第二个前端执行相同的操作。登录到 **lar-book-ha1**。
- en: 'On RHEL-based systems, issue the following:'
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于基于 RHEL 的系统，请执行以下操作：
- en: '[PRE65]'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'For Ubuntu systems, issue the following:'
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于 Ubuntu 系统，请执行以下操作：
- en: '[PRE66]'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: When navigating to your VIP (in the example IP case, **http://192.168.0.5/zabbix**),
    you will see the same configuration wizard again.
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当导航到您的 VIP（在示例 IP 案例中为 **http://192.168.0.5/zabbix**）时，您将再次看到相同的配置向导。
- en: 'Fill out the database details again:'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新填写数据库详细信息：
- en: "![Figure 1.12 – The Zabbix database configuration win\uFEFFdow for lar-book-ha\uFEFF\
    2](img/B19803_01_12.jpg)"
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: "![图 1.12 – lar-book-ha\uFEFF2 的 Zabbix 数据库配置窗口](img/B19803_01_12.jpg)"
- en: Figure 1.12 – The Zabbix database configuration window for lar-book-ha2
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.12 – lar-book-ha2 的 Zabbix 数据库配置窗口
- en: 'Then, make sure to set up **Zabbix server name** as **lar-book-ha2**, as seen
    in the following screenshot:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保将 **Zabbix 服务器名称** 设置为 **lar-book-ha2**，如下截屏所示：
- en: "![Figure 1.13 – The Zabbix server settings window f\uFEFFor lar-book-ha2](img/B19803_01_13.JPG)"
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.13 – lar-book-ha2 的 Zabbix 服务器设置窗口](img/B19803_01_13.JPG)'
- en: Figure 1.13 – The Zabbix server settings window for lar-book-ha2
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.13 – lar-book-ha2 的 Zabbix 服务器设置窗口
- en: 'Now, we need to enable the **lar-book-ha1** frontend again by issuing the following:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要再次启用 **lar-book-ha1** 前端，方法如下：
- en: '[PRE67]'
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: That should be our last step. Everything should now be working as expected.
    Make sure to check your Zabbix server log file to see if the HA nodes are running
    as expected.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 这应该是我们的最后一步。现在一切应该按预期工作。确保检查您的 Zabbix 服务器日志文件，以查看 HA 节点是否按预期运行。
- en: How it works...
  id: totrans-286
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何运作的...
- en: 'Now that we have done it, how does the Zabbix server actually work in an HA
    mode? Let’s start by checking out the **Reports** | **System information** page
    on our Zabbix frontend:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经完成了，Zabbix 服务器在 HA 模式下实际上是如何工作的呢？让我们从检查我们 Zabbix 前端的 **报告** | **系统信息**
    页面开始：
- en: '![Figure 1.14 – The Zabbix server system information with HA information](img/B19803_01_14.jpg)'
  id: totrans-288
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.14 – lar-book-ha1 的 Zabbix 服务器系统信息及 HA 信息](img/B19803_01_14.jpg)'
- en: Figure 1.14 – The Zabbix server system information with HA information
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.14 – lar-book-ha1 的 Zabbix 服务器系统信息及 HA 信息
- en: We can now see that we have some new information available; for example, the
    **High availability cluster** parameter. This parameter now tells us if HA is
    enabled or not and what the failover delay is. In our case, this is 1 minute,
    meaning that it could take up to 1 minute before failover is initiated.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以看到一些新的可用信息；例如，**高可用性集群** 参数。此参数现在告诉我们 HA 是否已启用以及故障转移延迟是多少。在我们的情况下，这是 1
    分钟，这意味着在启动故障转移之前可能需要最多 1 分钟的时间。
- en: 'Furthermore, we can see every single node in our cluster. As Zabbix now supports
    one to many nodes in a cluster, we can see every single one taking part in our
    cluster right here. Let’s take a look at the setup we have built:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们可以看到集群中的每个节点。由于 Zabbix 现在支持集群中的一对多节点，我们可以在这里看到每个节点参与的情况。让我们看看我们建立的设置：
- en: '![Figure 1.15 – The Zabbix server HA setup](img/B19803_01_15.jpg)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.15 – Zabbix 服务器 HA 设置](img/B19803_01_15.jpg)'
- en: Figure 1.15 – The Zabbix server HA setup
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.15 – Zabbix 服务器 HA 设置
- en: As you can see in the setup, we have connected our two Zabbix server nodes,
    `lar-book-ha1` and `lar-book-ha2`, to our single Zabbix database, `lar-book-ha-db`.
    Because our Zabbix database is our `HANodeName` value in the Zabbix server configuration
    file.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你在设置中看到的，我们已经将两个 Zabbix 服务器节点 `lar-book-ha1` 和 `lar-book-ha2` 连接到我们的单一 Zabbix
    数据库 `lar-book-ha-db`。因为我们的 Zabbix 数据库就是 Zabbix 服务器配置文件中的 `HANodeName` 值。
- en: We also included the `NodeAddress` parameter in the configuration file. This
    parameter is used by the Zabbix frontend to make sure that our system information
    (widget) and Zabbix server are not running frontend notification work. The `NodeAddress`
    parameter will tell the frontend which IP address to connect to for each respective
    server once it becomes the active Zabbix server.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还在配置文件中加入了 `NodeAddress` 参数。该参数由 Zabbix 前端使用，确保我们的系统信息（小部件）和 Zabbix 服务器不运行前端通知工作。`NodeAddress`
    参数会告诉前端在每个对应的服务器成为活动 Zabbix 服务器时，应该连接哪个 IP 地址。
- en: 'To take things a bit further, I have added a simple `keepalived` setup to this
    installation as well. A `keepalived` configuration is a way to build simple VRRP
    failover setups between Linux servers. In our case, we have entered the VIP as
    `192.168.0.5` and added the `chk_nginx` process monitoring to determine when to
    fail over. Our failover works as follows:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步提高系统的可用性，我还为此安装添加了简单的 `keepalived` 设置。`keepalived` 配置是一种在 Linux 服务器之间构建简单
    VRRP 故障转移设置的方法。在我们的案例中，我们已将 VIP 设置为 `192.168.0.5` 并添加了 `chk_nginx` 进程监控，用于确定何时进行故障转移。我们的故障转移机制如下：
- en: '[PRE68]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: If NGINX is running on our node, that adds a weight of 10 to our priority, leading
    to the total priority of `254` and `253`, respectively. Now, let’s imagine that
    `lar-book-ha1` no longer has the web server process running. That means its priority
    drops to `244`, which is lower than `253` on `lar-book-ha2`, which does have the
    web server process running.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 NGINX 在我们的节点上运行，它会为我们的优先级增加 10 分，导致总优先级分别为 `254` 和 `253`。现在，假设 `lar-book-ha1`
    不再运行 Web 服务器进程。这意味着它的优先级会降到 `244`，低于 `lar-book-ha2` 上的 `253`，后者正在运行 Web 服务器进程。
- en: Whichever host has the highest priority is the host that will have the `192.168.0.5`
    VIP, meaning that host is running the Zabbix frontend, which will be served.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有最高优先级的主机会获得 `192.168.0.5` VIP，这意味着该主机正在运行 Zabbix 前端，并将提供服务。
- en: Combining these two ways of setting up HA, we have just created redundancy for
    two of the parts that make up our Zabbix setup, making sure we can keep outages
    to a minimum.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 通过结合这两种 HA 设置方式，我们已经为 Zabbix 设置中的两个部分创建了冗余，确保可以将故障时间降到最低。
- en: There’s more...
  id: totrans-301
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: Now, you may wonder, what if I wanted to go further in terms of setting up HA?
    First, the Zabbix HA feature is built to be simple and understandable to the entire
    Zabbix user base, meaning that as of now, you might not see the same amount of
    features you would get with a third-party implementation.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可能会想，假如我想在设置 HA 时更进一步，该怎么办？首先，Zabbix HA 功能的设计是为了简化并让整个 Zabbix 用户群体都能理解，这意味着目前，你可能看不到与第三方实现相同数量的功能。
- en: 'Nevertheless, the new Zabbix server HA feature has proved itself to be a long-awaited
    feature that really adds something to the table. If you want to run an HA setup
    such as this, the best way to add one more level of complexity to HA is a MySQL
    master/master setup. Setting up the Zabbix database with HA, which is the main
    **source of truth** (**SOT**), will make sure that your Zabbix setup really is
    reliable in as many ways as possible. For more information regarding MariaDB replication,
    check out the documentation here: [https://mariadb.com/kb/en/standard-replication/](https://mariadb.com/kb/en/standard-replication/).'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，新的 Zabbix 服务器 HA 功能已被证明是一个期待已久的功能，确实为系统带来了更多价值。如果你想运行像这样的 HA 设置，增加 HA 复杂度的最佳方法是采用
    MySQL 主/主设置。通过将 Zabbix 数据库与 HA 配置，作为主要的 **真理源** (**SOT**)，可以确保你的 Zabbix 设置在尽可能多的方面都是可靠的。有关
    MariaDB 复制的更多信息，请查看此文档：[https://mariadb.com/kb/en/standard-replication/](https://mariadb.com/kb/en/standard-replication/)。
- en: Using the Zabbix frontend
  id: totrans-304
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Zabbix 前端
- en: If this is your first time using Zabbix, congratulations on getting to the UI.
    If you are a returning Zabbix user, there have been some changes to the Zabbix
    7 UI that you might notice. We’ll be going over some of the different elements
    that we can find in the Zabbix frontend so that during this book, you’ll feel
    confident in finding everything you need.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这是你第一次使用 Zabbix，恭喜你进入了用户界面。如果你是返回的 Zabbix 用户，可能会注意到 Zabbix 7 用户界面有些变化。我们将介绍在
    Zabbix 前端中可以找到的一些不同元素，让你在本书过程中，能自信地找到所需的所有内容。
- en: Getting ready
  id: totrans-306
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'To get started with the Zabbix UI, all we need to do is log in to the frontend.
    You will be served with the following page at the IP on which your server is running
    the Zabbix frontend:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 Zabbix 用户界面，我们只需要登录到前端。你将看到以下页面，这个页面位于运行 Zabbix 前端的服务器的 IP 上：
- en: "![Figure 1.16 – The Z\uFEFFabbix login screen](img/B19803_01_16.jpg)"
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.16 – Zabbix 登录界面](img/B19803_01_16.jpg)'
- en: Figure 1.16 – The Zabbix login screen
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.16 – Zabbix 登录界面
- en: 'Make sure you log in to the Zabbix frontend with the default credentials:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 确保使用默认凭据登录 Zabbix 前端：
- en: '**Username**: **Admin**'
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户名**：**Admin**'
- en: '**Password**: **zabbix**'
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：**zabbix**'
- en: Tip
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Just like in Linux, Zabbix is case-sensitive in most places. When entering your
    username, make sure to include the right cases; otherwise, you won’t be able to
    log in!
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 就像在 Linux 中一样，Zabbix 在大多数地方是区分大小写的。输入用户名时，请确保大小写正确；否则，你将无法登录！
- en: How to do it…
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'After you log in, you’ll be served with the default page, which is the default
    dashboard. This is what Zabbix has called **Global view**, and it provides us
    with a nice overview of what’s going on. We can completely customize this and
    all the other dashboards that Zabbix supplies, but it’s a good idea to familiarize
    yourself with the default setup before building something new:'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 登录后，你将看到默认页面，即默认仪表板。这就是 Zabbix 所称的**全局视图**，它为我们提供了一个清晰的概览，让我们了解当前的情况。我们可以完全自定义这个以及
    Zabbix 提供的所有其他仪表板，但在构建新的仪表板之前，最好先熟悉默认设置：
- en: "![Figure 1.17 – The Global \uFEFFview dashboard](img/1.17.jpg)"
  id: totrans-317
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.17 – 全局视图仪表板](img/1.17.jpg)'
- en: Figure 1.17 – The Global view dashboard
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.17 – 全局视图仪表板
- en: So, let’s get started on getting to know this Zabbix 7 frontend by looking at
    the default dashboard. Please follow along in the frontend by clicking and checking
    out the content mentioned.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，让我们通过查看默认仪表板来开始熟悉 Zabbix 7 前端。请按照前端的指引，点击并查看所提到的内容。
- en: Zabbix uses dashboards, and they are filled with widgets to show you information.
    Let’s go over the different widgets in the default dashboard and detail their
    information.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 使用仪表板，并且这些仪表板充满了小部件来显示信息。让我们逐一了解默认仪表板中的不同小部件，并详细介绍它们所提供的信息。
- en: 'Let’s start with the **System** **information** widget:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 我们先从**系统** **信息**小部件开始：
- en: '![Figure 1.18 – The System information widget](img/B19803_01_18.jpg)'
  id: totrans-322
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.18 – 系统信息小部件](img/B19803_01_18.jpg)'
- en: Figure 1.18 – The System information widget
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.18 – 系统信息小部件
- en: The **System information** widget, as you might have guessed, details all system
    information for you. This way, we can keep an eye on what’s going on with our
    Zabbix server and see whether our Zabbix server is even running.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '**系统信息**小部件，顾名思义，提供了所有系统信息。这样，我们可以随时关注 Zabbix 服务器的状态，看看它是否正常运行。'
- en: 'Let’s go over the parameters:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来了解一下这些参数：
- en: '**Zabbix server is running**: Informs us whether the Zabbix server backend
    is actually running and where it is running. In this case, it’s running, and it’s
    running on **localhost:10051**.'
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Zabbix 服务器是否运行**：通知我们 Zabbix 服务器后端是否正在运行，以及它的运行位置。在这种情况下，它正在运行，并且运行在**localhost:10051**。'
- en: '**Zabbix server version**/**Zabbix frontend version**: We now have separate
    indicators that will detail what the versions of our Zabbix server and frontend
    are.'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Zabbix 服务器版本**/**Zabbix 前端版本**：现在我们有了单独的指示器，详细显示我们的 Zabbix 服务器和前端的版本。'
- en: '**Software update last checked**: This is another new addition. Zabbix will
    now check for new releases for you, indicating in the column below what the latest
    release is.'
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最后检查的软件更新**：这是另一项新增功能。Zabbix 现在会为你检查新的版本，并在下方的列中指示最新版本。'
- en: '**Latest release**: This will detail the latest available version of Zabbix.'
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最新版本**：此项将显示 Zabbix 的最新可用版本。'
- en: '**Number of hosts (enabled/disabled)**: This will detail the number of hosts
    enabled (**15**) and the number of hosts disabled (**5**).'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主机数量（启用/禁用）**：此项将显示启用的主机数量（**15**）和禁用的主机数量（**5**）。'
- en: '**Number of templates**: This details the total number of templates we have
    (**284**).'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模板数量**：这显示了我们拥有的模板总数（**284**）。'
- en: '**Number of items (enabled/disabled/not supported)**: Here, we can see details
    of our Zabbix server’s items—in this case, enabled (**564**), disabled (**240**),
    and not supported (**216**).'
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**项数量（启用/禁用/不支持）**：在这里，我们可以看到Zabbix服务器的项的详细信息——在此案例中，启用（**564**）、禁用（**240**）和不支持（**216**）。'
- en: '**Number of triggers (enabled/disabled [problem/ok]**: This details the number
    of triggers. We can see how many are enabled (**371**) and disabled (**38**),
    but also how many are in a **problem** state (**13**) and how many are in an **ok**
    state (**358**).'
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**触发器数量（启用/禁用 [问题/正常]）**：这显示了触发器的数量。我们可以看到有多少被启用（**371**）和禁用（**38**），还可以看到多少处于**问题**状态（**13**），多少处于**正常**状态（**358**）。'
- en: '**Number of users (online)**: The first value details the total number of users.
    The second value details the number of users currently logged in to the Zabbix
    frontend.'
  id: totrans-334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户数量（在线）**：第一个值详细说明了总用户数。第二个值详细说明了当前登录到Zabbix前端的用户数。'
- en: '**Required server performance, new values per second**: Perhaps I’m introducing
    you to a completely new concept here, which is **New Values Per Second**, or **NVPS**.
    A server receives or requests values through items and writes these to our MariaDB
    database (or another database). The NVPS information detailed here shows the estimated
    number of NVPS received by the Zabbix server. Keep a close eye on this as your
    Zabbix server grows, as it’s a good indicator to see how quickly you should scale
    up.'
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**所需服务器性能，新的每秒值**：也许我在这里向你介绍一个全新的概念，那就是**每秒新值**，或**NVPS**。服务器通过项接收或请求值，并将其写入我们的MariaDB数据库（或其他数据库）。这里详细的NVPS信息显示了Zabbix服务器接收的估计每秒新值数。在Zabbix服务器增长的过程中，密切关注这个指标，它是衡量你需要多快扩展的良好指示器。'
- en: '**High availability cluster**: If you are running a Zabbix server HA cluster,
    you will see if it is enabled here and what the failover delay is. Additionally,
    the **System information** page will display extra HA information.'
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高可用性集群**：如果你正在运行Zabbix服务器HA集群，你会看到它是否已启用以及故障转移延迟是多少。此外，**系统信息**页面将显示额外的HA信息。'
- en: 'You might also see two additional values here depending on your setup:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你的配置，你可能还会看到两个附加值：
- en: '**Database history tables upgraded**: If you see this, it indicates that one
    of your database history tables hasn’t been upgraded yet. Numeric (float) tables
    have been expanded to allow for more characters to be saved per data point. This
    table isn’t upgraded automatically coming from Zabbix 4 to 5 or higher, as not
    everyone needs it, and it might take a long time to upgrade.'
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库历史表已升级**：如果你看到这个，说明你的一个数据库历史表尚未升级。数值（浮动）表已扩展，允许每个数据点保存更多字符。这个表在从Zabbix
    4升级到5或更高版本时不会自动升级，因为并非每个人都需要它，而且升级可能需要很长时间。'
- en: '**Database name**: If you see the name of your database with the value of your
    version, it might indicate you are running a non-supported database version. You
    could see a message such as **Warning! Unsupported <DATABASE NAME> database server
    version. Should be at least <****DATABASE VERSION>**.'
  id: totrans-339
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库名称**：如果你看到数据库名称以及版本号的值，这可能表示你正在使用不受支持的数据库版本。你可能会看到类似以下的消息：**警告！不受支持的 <DATABASE
    NAME> 数据库服务器版本。应该至少为 <****DATABASE VERSION>**。'
- en: Now, that’s one of the most important widgets when it comes to your Zabbix server,
    and it’s a great one to keep on your main dashboard if you ask me.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 这是涉及Zabbix服务器时最重要的小部件之一，如果你问我，它是值得保留在主仪表板上的一个小部件。
- en: 'Let’s move on to the next widget, **Host availability**:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续下一个小部件，**主机可用性**：
- en: "![Figure 1.19 – The Host availability widg\uFEFFet](img/B19803_01_19.jpg)"
  id: totrans-342
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.19 – 主机可用性小部件](img/B19803_01_19.jpg)'
- en: Figure 1.19 – The Host availability widget
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.19 – 主机可用性小部件
- en: The **Host availability** widget is a quick overview widget showing you everything
    you want to know about your monitored host’s availability status. In this widget,
    it shows whether the host is available, not available, or unknown. This way, you
    get a good overview of the availability of all hosts you could be monitoring with
    your Zabbix server in a single widget.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: '**主机可用性**小部件是一个快速概览小部件，可以显示你想要了解的所有监控主机的可用性状态。在此小部件中，它会显示主机是否可用、不可用或状态未知。这样，你可以在一个小部件中全面了解通过Zabbix服务器监控的所有主机的可用性。'
- en: 'Next to it is the **Problems by** **severity** widget:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 旁边是**按** **严重性**划分的问题小部件：
- en: '![Figure 1.20 – The Problems by severity widget](img/B19803_01_20.jpg)'
  id: totrans-346
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.20 – 按严重性划分的问题小部件](img/B19803_01_20.jpg)'
- en: Figure 1.20 – The Problems by severity widget
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.20 – 按严重程度分类的问题小部件
- en: 'It shows you how many hosts currently have a trigger in a certain state. There
    are several default severities in Zabbix:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 它会显示当前有多少主机在某种状态下触发了警报。Zabbix中有几个默认的严重程度：
- en: '**Disaster**'
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**灾难**'
- en: '**High**'
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高**'
- en: '**Average**'
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**中等**'
- en: '**Warning**'
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**警告**'
- en: '**Information**'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息**'
- en: '**Not classified**'
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**未分类**'
- en: We can fully customize the severity levels and colors; for example, what severity
    levels we want to put on which triggers. So, if you are worried about the severities
    right now, don’t be. We’ll get to that later.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以完全自定义严重性级别和颜色；例如，决定哪个触发器对应哪个严重性级别。所以，如果你现在对严重性有疑虑，别担心，我们稍后会讨论这个问题。
- en: Tip
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Customizing the severity levels and colors can be very useful to your organization.
    We can customize the severity levels to match levels used throughout our company
    or even to match some of our other monitoring systems.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义严重性级别和颜色对您的组织非常有用。我们可以自定义严重性级别，使其与我们公司内部使用的级别相匹配，甚至与我们的其他监控系统相匹配。
- en: 'The next widget is **Clock**:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个小部件是**时钟**：
- en: '![Figure 1.21 – The Clock widget, indicating a time](img/B19803_01_21.jpg)'
  id: totrans-359
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.21 – 时钟小部件，指示时间](img/B19803_01_21.jpg)'
- en: Figure 1.21 – The Clock widget, indicating a time
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.21 – 时钟小部件，指示时间
- en: 'It’s a clock with the local Linux system time, finally in a digital time format.
    Need I say more? Let’s move on to the **Problems** widget:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个显示本地 Linux 系统时间的时钟，最终是数字时间格式。还需要多说什么吗？让我们继续看**问题**小部件：
- en: '![Figure 1.22 – One of the Problems widgets available](img/1.22.jpg)'
  id: totrans-362
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.22 – 可用的其中一个问题小部件](img/1.22.jpg)'
- en: Figure 1.22 – One of the Problems widgets available
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.22 – 可用的其中一个问题小部件
- en: 'Now, this is an interesting widget that I use a lot. We see our current problems
    on this screen, so if we have our triggers set up correctly, we get valuable information
    here. A quick overview of how many hosts are having problems is one thing, but
    the **Problems** page also gives us more details about the problem:'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个有趣的小部件，我经常使用。我们可以在这个界面上看到当前的问题，因此如果我们正确设置了触发器，就会在这里获得有价值的信息。了解有多少主机出现问题是一个方面，但**问题**页面还会给我们提供关于问题的更多细节：
- en: '**Time**: At what time this problem was first noticed by the Zabbix server'
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**时间**：Zabbix 服务器第一次注意到这个问题的时间。'
- en: '**Info**: Information about the event, with **Manual close** and **Suppressed**
    statuses being represented here.'
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息**：关于事件的信息，其中包括**手动关闭**和**已抑制**状态。'
- en: '**Host**: What host this problem occurred on.'
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主机**：此问题发生在哪个主机上。'
- en: '**Problem**/**Severity**: What the problem is and how severe it is. The severity
    is shown in a color; in this case, orange, meaning **Average**.'
  id: totrans-368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**问题**/**严重性**：问题是什么，严重性如何。严重性通过颜色显示；在这种情况下是橙色，表示**中等**。'
- en: '**Duration**: How long this has been a problem.'
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**持续时间**：这个问题已经存在多长时间了。'
- en: '**Update**: A button to allow us to make changes to this existing problem,
    such as acknowledging it or adding messages.'
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更新**：一个按钮，让我们能够对现有问题进行更改，例如确认问题或添加消息。'
- en: '**Actions**: What actions have been taken after this problem occurred; for
    example, the problem being acknowledged or a custom script that executes on problem
    creation? If you hover over any action, it will show you detailed information
    about all actions that have been taken for this problem.'
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作**：问题发生后采取了哪些行动；例如，问题是否已确认，或在问题创建时执行的自定义脚本？如果你将鼠标悬停在任何操作上，它将显示已对该问题采取的所有操作的详细信息。'
- en: '**Tags**: What tags are assigned to this problem?'
  id: totrans-372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标签**：此问题分配了哪些标签？'
- en: 'The **Problems** widget is very useful. We have different types of this widget
    available, and as mentioned before, it is completely customizable, based on how
    this widget shows our problems to us. Take a quick look at some of the options,
    which we’ll detail further in a later chapter:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**小部件非常有用。我们有不同类型的小部件可供选择，正如之前提到的，它是完全可定制的，具体取决于这个小部件如何向我们展示问题。快速看一下其中一些选项，我们将在后面的章节中详细介绍：'
- en: '![Figure 1.23 – The Add widget screen](img/B19803_01_23.jpg)'
  id: totrans-374
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.23 – 添加小部件界面](img/B19803_01_23.jpg)'
- en: Figure 1.23 – The Add widget screen
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.23 – 添加小部件界面
- en: Tip
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: We can hide severity levels from these widgets to make sure we only see important
    ones. Sometimes, we don’t want to see informational severity problems on our dashboards;
    it can distract us from a more important problem. Keep your dashboards clean by
    customizing widgets to their full extent.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从这些小部件中隐藏严重性级别，确保我们只看到重要的级别。有时，我们不想在仪表板上看到信息性严重性问题；这可能会分散我们对更重要问题的注意力。通过自定义小部件来保持仪表板的简洁。
- en: 'There’s also a very basic **Graph** widget included on the default dashboard.
    As you can see, it details the number of processed values per second. As we said,
    **System information** gives us an estimate on this value. The **Graph** widget
    gives us a more accurate and detailed look:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 默认仪表盘上还包括一个非常基础的 **Graph** 小部件。如你所见，它显示了每秒处理的值的数量。正如我们所说，**System information**
    给出了这个值的估计。**Graph** 小部件则提供了更准确和详细的视图：
- en: "![F\uFEFFigure 1.24 – The Graph widget](img/B19803_01_24.jpg)"
  id: totrans-379
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.24 – 图形小部件](img/B19803_01_24.jpg)'
- en: Figure 1.24 – The Graph widget
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.24 – 图形小部件
- en: These graph widgets are also fully customizable, and we will talk about them
    more later in the book.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 这些图形小部件同样完全可定制，我们将在本书后面详细讲解它们。
- en: 'Some newer widgets you will find on this page are the **Top hosts**, **Item
    value**, and **Geomap** widgets. Starting with the **Top hosts** widget, let’s
    have a closer look at these:'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 你将在此页面上找到一些较新的小部件，包括**Top hosts**、**Item value**和**Geomap**小部件。让我们从**Top hosts**小部件开始，仔细了解一下这些小部件：
- en: '![Figure 1.25 – The Top hosts widget](img/B19803_01_25.jpg)'
  id: totrans-383
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.25 – Top hosts 小部件](img/B19803_01_25.jpg)'
- en: Figure 1.25 – The Top hosts widget
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.25 – Top hosts 小部件
- en: The **Top hosts** widget is fully customizable to show us a list of any item
    we want. We can then sort that list to show us the item with the highest (**Top
    N**) or Lowest (**Bottom N**) values, giving us a great overview of—in this case—hosts
    with the highest CPU load.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: '**Top hosts**小部件可以完全自定义，展示我们想要的任何项目列表。然后我们可以对该列表进行排序，显示值最高（**Top N**）或值最低（**Bottom
    N**）的项目，从而为我们提供一个关于——在本例中——具有最高 CPU 负载的主机的概览。'
- en: 'The **Item value** widget is also super useful, showing us a single item value:'
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: '**Item value**小部件同样非常有用，它展示了一个单一的项目值：'
- en: '![Figure 1.26 – The Item value widget](img/B19803_01_26.jpg)'
  id: totrans-387
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.26 – 项目值小部件](img/B19803_01_26.jpg)'
- en: Figure 1.26 – The Item value widget
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.26 – 项目值小部件
- en: 'Then, last, we have the **Geomap** widget: a geographical map with a representation
    of all the hosts we would like to add. As you can see, by default, our Zabbix
    server is already included. In our case, I’ve made sure to update the location
    of our Zabbix server to our main office in the Netherlands:'
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，最后是 **Geomap** 小部件：一个地理地图，展示我们希望添加的所有主机。如你所见，默认情况下，我们的 Zabbix 服务器已经被包含在内。在我们的例子中，我已确保将
    Zabbix 服务器的位置更新为我们位于荷兰的总部：
- en: '![Figure 1.27 – The Geomap widget](img/B19803_01_27.jpg)'
  id: totrans-390
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.27 – Geomap 小部件](img/B19803_01_27.jpg)'
- en: Figure 1.27 – The Geomap widget
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.27 – Geomap 小部件
- en: It also shows us that the Zabbix server currently has no issues, as the icon
    is green. If there is a problem the icon will show in the colour of the severity
    of the problem.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 它还向我们展示了 Zabbix 服务器当前没有问题，因为图标是绿色的。如果有问题，图标会显示为问题严重程度的颜色。
- en: We now know how to work with the Zabbix frontend and can continue further on
    with how to navigate our instance.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在知道如何使用 Zabbix 前端，可以继续学习如何浏览我们的实例。
- en: Navigating the Zabbix frontend
  id: totrans-394
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 浏览 Zabbix 前端
- en: Navigating the Zabbix frontend is easier than it looks at first glance, especially
    with some of the amazing changes made to the UI starting from Zabbix 5.0 and continuing
    into Zabbix 7.0\. Let’s explore the Zabbix navigational UI some more in this recipe
    by looking at the navigation bar and what it has to offer.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 导航 Zabbix 前端比看起来更简单，尤其是自 Zabbix 5.0 版本起，UI 进行了许多令人惊叹的变化，并持续到 Zabbix 7.0。在本节中，我们将通过查看导航栏及其提供的功能，进一步探索
    Zabbix 的导航 UI。
- en: Getting ready
  id: totrans-396
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Now that we’ve seen the first page after logging in with the default dashboard,
    it is time to start navigating through the Zabbix UI and see some of the other
    pages available. We’ll move through the sidebar and explore the pages available
    in our Zabbix installation so that when we start monitoring our networks and applications,
    we know where we can find everything.
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经看过了登录后默认仪表盘上的第一页，是时候开始浏览 Zabbix UI，看看其他可用页面了。我们将通过侧边栏浏览并探索我们 Zabbix 安装中的页面，以便在开始监控我们的网络和应用时，知道在哪里找到所有内容。
- en: So, before continuing, make sure you have the Zabbix server ready as set up
    in the previous recipes.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，在继续之前，确保你已根据前面的小节完成 Zabbix 服务器的设置。
- en: How to do it…
  id: totrans-399
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: The Zabbix navigation bar is the gateway to all of our powerful tools and configuration
    settings. Zabbix uses a left-side navigation bar to keep our UI as clean as possible.
    On top of that, they have made the sidebar disappear so that we can keep a close
    look at all of our content without the sidebar blocking our vision.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix导航栏是我们所有强大工具和配置设置的门户。Zabbix使用左侧导航栏来保持UI尽可能简洁。此外，他们还让侧边栏消失，以便我们能更清晰地查看所有内容，而不被侧边栏遮挡视线。
- en: Tip
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: We cannot change the Zabbix navigation menu location, but it is possible to
    hide it to a smaller form or completely hide it. If you want the navigation bar
    to be hidden (or not), click the first icon on the right side of the Zabbix logo.
    If you want to fully hide the navigation bar, click the second icon on the right
    side of the Zabbix logo.
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 我们无法改变Zabbix导航菜单的位置，但可以将其缩小或者完全隐藏。如果你希望隐藏导航栏（或不隐藏），可以点击Zabbix标志右侧的第一个图标。如果你想完全隐藏导航栏，可以点击Zabbix标志右侧的第二个图标。
- en: 'Let’s take a look at the Zabbix sidebar as we see it from our default page
    and get to know it. Please follow along in the frontend by clicking and checking
    out the content mentioned:'
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从默认页面开始，看看Zabbix侧边栏，并了解它。请按照前端操作，点击并查看提到的内容：
- en: '![Figure 1.28 – The default Zabbix page as seen in your own web browser](img/1.17.jpg)'
  id: totrans-404
  prefs: []
  type: TYPE_IMG
  zh: '![图1.28 – 在你自己的网页浏览器中看到的默认Zabbix页面](img/1.17.jpg)'
- en: Figure 1.28 – The default Zabbix page as seen in your own web browser
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.28 – 在你自己的网页浏览器中看到的默认Zabbix页面
- en: 'We’ve got some categories here to choose from, and one level below the categories,
    we’ve got our different pages. First, let’s start by detailing the categories:'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些类别供我们选择，类别下面有不同的页面。首先，让我们详细介绍这些类别：
- en: '**Monitoring**: The **Monitoring** category is where we can find all information
    about our collected data. It’s basically the category you want to use when you’re
    working with Zabbix to read any collected information you’ve worked hard to acquire.'
  id: totrans-407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控**：**监控**类别是我们可以找到所有收集数据的地方。基本上，当你在使用Zabbix时，需要读取你辛苦收集的任何信息时，就会用到这个类别。'
- en: '**Services**: The **Services** category is new to Zabbix 7 and comes as part
    of the improved **Business Service Monitoring** (**BSM**) features. We can find
    all the information regarding service and **service-level agreement** (**SLA**)
    monitoring here.'
  id: totrans-408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**服务**：**服务**类别是Zabbix 7的新功能，作为改进的**业务服务监控**（**BSM**）功能的一部分。我们可以在这里找到所有与服务和**服务水平协议**（**SLA**）监控相关的信息。'
- en: '**Inventory**: The **Inventory** category is a cool extra feature in Zabbix
    that we can use to look at our host-related inventory information. You can add
    stuff such as software versions or serial numbers to hosts and look at them here.'
  id: totrans-409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**库存**：**库存**类别是Zabbix中的一个额外酷炫功能，我们可以用它来查看与主机相关的库存信息。你可以将软件版本或序列号等信息添加到主机中，并在这里查看。'
- en: '**Reports**: The **Reports** category contains a variety of predefined and
    user-customizable reports focused on displaying an overview of parameters such
    as system information, triggers, and gathered data.'
  id: totrans-410
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**报告**：**报告**类别包含了各种预定义和用户自定义的报告，专注于显示如系统信息、触发器和收集的数据等参数的概览。'
- en: '**Data collection**: The **Data collection** category is where we build everything
    that has to do with monitoring our devices. We will later use this data in **Monitoring**,
    **Inventory**, and **Reports**. We can edit our settings to suit our every need
    so that Zabbix can show us that data in a useful way.'
  id: totrans-411
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据收集**：**数据收集**类别是我们构建与监控设备相关的一切内容的地方。稍后我们将在**监控**、**库存**和**报告**中使用这些数据。我们可以编辑设置以满足我们的各种需求，从而使Zabbix能够以有用的方式显示数据。'
- en: '**Alerts**: The **Alerts** section of the UI is all about showing the right
    data.'
  id: totrans-412
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**警报**：UI中的**警报**部分专注于显示正确的数据。'
- en: '**Users**: The **Users** section is all about displaying user- and user-group-related
    data. It has everything you need to manage accounts and permissions.'
  id: totrans-413
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户**：**用户**部分专门显示与用户和用户组相关的数据。它包含了你管理账户和权限所需的一切内容。'
- en: '**Administration**: The **Administration** category is where we administer
    the Zabbix server. You’ll find all your settings from the server here to enable
    you and your colleagues to have a good working Zabbix experience.'
  id: totrans-414
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理**：**管理**类别是我们管理Zabbix服务器的地方。你可以在这里找到所有的服务器设置，从而使你和你的同事们能够有一个良好的Zabbix使用体验。'
- en: 'You’ll go over all of these quite a lot while using this book, so remember
    them well. Let’s dive a little deeper into the categories by looking at them one
    by one. Let’s start with the **Monitoring** category:'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用本书时，你将频繁接触到这些内容，所以一定要记住它们。让我们通过逐一查看它们，进一步深入了解各个类别。首先从**监控**类别开始：
- en: '![Figure 1.29 – The Monitoring section of the sidebar](img/B19803_01_29.jpg)'
  id: totrans-416
  prefs: []
  type: TYPE_IMG
  zh: '![图1.29 – 侧边栏的监控部分](img/B19803_01_29.jpg)'
- en: Figure 1.29 – The Monitoring section of the sidebar
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.29 – 侧边栏的监控部分
- en: 'The **Monitoring** tab contains the following pages:'
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: '**监控**标签包含以下页面：'
- en: '**Problems**: We can look at our current problems in detail here. We are provided
    with a bunch of filter options to narrow down our problem search if needed.'
  id: totrans-419
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**问题**：我们可以在这里详细查看当前的问题。提供了多个筛选选项，以便在需要时缩小问题搜索的范围。'
- en: '**Hosts**: This page will provide a quick overview of what’s going on with
    hosts. It also provides links to navigate to pages showing data for our hosts.'
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主机**：这个页面将提供主机状态的快速概览，并提供链接导航到显示主机数据的页面。'
- en: '**Latest data**: Here is a page we’re going to use quite a lot throughout our
    professional Zabbix lifetime. The **Latest data** page is where we can find collected
    values for every single host, which we can, of course, filter on.'
  id: totrans-421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最新数据**：这是我们在整个Zabbix使用过程中将会频繁使用的一个页面。**最新数据**页面显示了每个主机收集到的值，我们当然可以对这些值进行筛选。'
- en: '**Maps**: Maps are a very helpful tool in Zabbix to get an overview of your
    infrastructure. We can use them for network overviews and such.'
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地图**：地图是Zabbix中一个非常有用的工具，可以帮助我们概览基础设施。我们可以将它们用于网络概览等。'
- en: '**Discovery**: This page provides us with an overview of discovered devices.
    We’ll work more on this later.'
  id: totrans-423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**发现**：这个页面为我们提供了已发现设备的概览。稍后我们会更深入地处理这个内容。'
- en: 'Next, we have the **Services** category:'
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们来看一下**服务**类别：
- en: "![Figure 1.30 – The Services secti\uFEFFon of the sidebar](img/B19803_01_30.jpg)"
  id: totrans-425
  prefs: []
  type: TYPE_IMG
  zh: '![图1.30 – 侧边栏的服务部分](img/B19803_01_30.jpg)'
- en: Figure 1.30 – The Services section of the sidebar
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.30 – 侧边栏的服务部分
- en: 'This part of the sidebar contains the following pages:'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 该部分侧边栏包含以下页面：
- en: '**Services**: This is where we configure all of the services we want to monitor'
  id: totrans-428
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**服务**：这里是我们配置所有希望监控的服务的地方'
- en: '**SLA**: We can configure any SLAs here that we can then use in our services'
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SLA**：我们可以在这里配置任何SLA，然后将其应用到我们的服务中。'
- en: '**SLA report**: A detailed overview of configured services with their SLAs
    and whether they are being met or not'
  id: totrans-430
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SLA报告**：一个关于已配置服务及其SLA（服务级别协议）是否满足的详细概览'
- en: 'Then, we have the **Inventory** category:'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们来看一下**库存**类别：
- en: '![Figure 1.31 – The Inventory section of the sidebar](img/B19803_01_31.jpg)'
  id: totrans-432
  prefs: []
  type: TYPE_IMG
  zh: '![图1.31 – 侧边栏的库存部分](img/B19803_01_31.jpg)'
- en: Figure 1.31 – The Inventory section of the sidebar
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.31 – 侧边栏的库存部分
- en: 'The **Inventory** tab contains the following pages:'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: '**库存**标签包含以下页面：'
- en: '**Overview**: A quick overview page for your inventory information'
  id: totrans-435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**概览**：一个快速概览页面，显示您的库存信息'
- en: '**Hosts**: A more detailed look into inventory values on a per-host basis'
  id: totrans-436
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主机**：提供更详细的每个主机的库存值视图'
- en: 'Next, we have the **Reports** category:'
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们来看一下**报告**类别：
- en: "![Figure 1.32 – The Repor\uFEFFts section of the sidebar](img/B19803_01_32.jpg)"
  id: totrans-438
  prefs: []
  type: TYPE_IMG
  zh: '![图1.32 – 侧边栏的报告部分](img/B19803_01_32.jpg)'
- en: Figure 1.32 – The Reports section of the sidebar
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.32 – 侧边栏的报告部分
- en: 'The **Reports** tab contains the following pages:'
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
  zh: '**报告**标签包含以下页面：'
- en: '**System information**: You can look at system information here; it contains
    the same information as the **System information** widget we discussed earlier.'
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**系统信息**：您可以在这里查看系统信息；它包含了我们之前讨论过的**系统信息**小部件的相同信息。'
- en: '**Scheduled reports**: This is where we configure any automatic PDF reporting
    that we might want to send out.'
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定时报告**：这是我们配置任何自动PDF报告并可能发送的地方。'
- en: '**Availability report**: On this page, we can see the percentage of time a
    trigger has been in a **problem** state compared to an **ok** state. This is a
    helpful way of seeing how long certain items are actually healthy.'
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可用性报告**：在这个页面上，我们可以看到触发器在**问题**状态和**正常**状态下的时间百分比。这是查看某些项目实际健康状态的一个有用方法。'
- en: '**Top 100 triggers**: The top 100 triggers that have changed their state most
    often within a period of time.'
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**前100个触发器**：在一段时间内状态变化最频繁的前100个触发器。'
- en: '**Audit log**: We can see who changed what on our Zabbix server here. This
    is a great way to see which colleague locked you out by accident or whether it
    was on purpose.'
  id: totrans-445
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**审计日志**：在这里我们可以查看谁修改了Zabbix服务器上的内容。这是一个很好的方式来查看是哪个同事不小心将你锁定了，或者是否是故意的。'
- en: '**Action log**: We can see a list of actions that have been taken; for example,
    due to triggers going to a **problem** state or an **ok** state.'
  id: totrans-446
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作日志**：在这里我们可以查看已采取的操作列表；例如，由于触发器进入**问题**状态或**正常**状态。'
- en: '**Notifications**: On this page, we can see the number of notifications sent
    to our users.'
  id: totrans-447
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通知**：在此页面上，我们可以查看已发送给用户的通知数量。'
- en: 'Next, we have the **Data collection** category, which is a new entry:'
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们有**数据收集**类别，这是一个新的条目：
- en: '![Figure 1.33 – The Data collection section of the sidebar](img/B19803_01_33.jpg)'
  id: totrans-449
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.33 – 侧边栏的数据收集部分](img/B19803_01_33.jpg)'
- en: Figure 1.33 – The Data collection section of the sidebar
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.33 – 侧边栏的数据收集部分
- en: 'The **Data collection** tab is almost the same as what the **Configuration**
    tab used to be in older versions. It contains the following pages:'
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据收集**标签页几乎与旧版本中的**配置**标签页相同。它包含以下页面：'
- en: '**Template groups**: We configure our template groups here; for instance, a
    group for all templates that will be used within our company (*Templates/Open
    source ICT Solutions*) or all network devices (*Templates/Networking*).'
  id: totrans-452
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模板组**：在这里配置我们的模板组；例如，为我们公司内部将使用的所有模板配置一个组（*Templates/Open source ICT Solutions*），或者为所有网络设备配置一个组（*Templates/Networking*）。'
- en: '**Host groups**: We configure our host groups here; for instance, a group for
    all Linux servers.'
  id: totrans-453
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主机组**：我们在这里配置主机组；例如，为所有Linux服务器配置一个组。'
- en: '**Templates**: This is where we configure templates that we can use to monitor
    hosts from the Zabbix server.'
  id: totrans-454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模板**：在这里我们配置可以用来从Zabbix服务器监控主机的模板。'
- en: '**Hosts**: Another **Hosts** tab, but this time it is not for checking data.
    This is where we add and configure host settings.'
  id: totrans-455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主机**：另一个**主机**标签页，但这一次它不是用来检查数据的。这里是我们添加和配置主机设置的地方。'
- en: '**Maintenance**: In Zabbix, we have the availability to set maintenance periods;
    this way, triggers or notifications won’t disturb you while you take something
    offline for maintenance, for example.'
  id: totrans-456
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**维护**：在Zabbix中，我们可以设置维护期；这样，触发器或通知在你进行维护时（例如，将某些设备下线）就不会打扰到你。'
- en: '**Event correlation**: We can correlate problems here to reduce noise or prevent
    event storms. This is achieved by closing new or old problems when they correlate
    to other problems.'
  id: totrans-457
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**事件关联**：我们可以在这里将问题关联，以减少噪音或防止事件风暴。通过在问题与其他问题关联时关闭新的或旧的问题来实现。'
- en: '**Discovery**: This is where we configure Zabbix discovery for automatic host
    creation.'
  id: totrans-458
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**发现**：在这里配置Zabbix发现功能，用于自动创建主机。'
- en: 'New in Zabbix is the **Alerts** category:'
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix中新加入的**警报**类别：
- en: '![Figure 1.34 – The Alerts section of the sidebar](img/B19803_01_34.jpg)'
  id: totrans-460
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.34 – 侧边栏的警报部分](img/B19803_01_34.jpg)'
- en: Figure 1.34 – The Alerts section of the sidebar
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.34 – 侧边栏的警报部分
- en: 'It consists of the following three pages:'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: 它由以下三个页面组成：
- en: '**Actions**: All different kinds of actions can be configured in this part
    of the frontend. We can set up actions for sending out alerts, creating hosts,
    and more.'
  id: totrans-463
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作**：在前端的这一部分，我们可以配置各种操作。我们可以设置用于发送警报、创建主机等的操作。'
- en: '**Media types**: There are several media types preconfigured in Zabbix, which
    you’ll find here already. We can also add custom media types.'
  id: totrans-464
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**媒体类型**：Zabbix中预先配置了几种媒体类型，您可以在这里找到它们。我们还可以添加自定义的媒体类型。'
- en: '**Scripts**: This is where we can add custom scripts for extending Zabbix functionality
    in the frontend.'
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**脚本**：在这里我们可以添加自定义脚本，以扩展Zabbix前端的功能。'
- en: 'Second to last, and also new, we have **Users**:'
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
  zh: 倒数第二个，也是新的，我们有**用户**：
- en: '![Figure 1.35 – The Users section of the sidebar](img/B19803_01_35.jpg)'
  id: totrans-467
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.35 – 侧边栏的用户部分](img/B19803_01_35.jpg)'
- en: Figure 1.35 – The Users section of the sidebar
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.35 – 侧边栏的用户部分
- en: 'We can find five different pages here:'
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在这里找到五个不同的页面：
- en: '**User groups**: This is where we configure user groups and the permissions
    for these user groups.'
  id: totrans-470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户组**：在这里我们配置用户组及其权限。'
- en: '**User roles**: It’s possible to configure different users’ roles here to limit
    or extend certain frontend functionality to certain users.'
  id: totrans-471
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户角色**：在这里可以配置不同用户的角色，以限制或扩展某些前端功能到特定用户。'
- en: '**Users**: Add users to this page.'
  id: totrans-472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户**：将用户添加到此页面。'
- en: '**API tokens**: This page was kind of hidden before, but it’s now easier to
    find. We can manage all API tokens we have permission to edit here: super useful
    for super admins to create and manage tokens of different users.'
  id: totrans-473
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**API令牌**：这个页面以前有些隐藏，但现在更容易找到。我们可以在这里管理所有有权限编辑的API令牌：对超级管理员来说，这非常有用，可以创建和管理不同用户的令牌。'
- en: '**Authentication**: We can find our authentication settings here, such as **Lightweight
    Directory Access Protocol** (**LDAP**), **Security Assertion Markup Language**
    (**SAML**), and HTTP. It also contains settings for the new **just-in-time** (**JIT**)
    user provisioning.'
  id: totrans-474
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**身份验证**：我们可以在这里找到我们的身份验证设置，例如**轻量级目录访问协议**（**LDAP**）、**安全断言标记语言**（**SAML**）和HTTP。它还包含新的**即时**（**JIT**）用户配置设置。'
- en: 'Finally, we have the **Administration** category:'
  id: totrans-475
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 最后，我们有了**管理**类别：
- en: '![Figure 1.36 – The Administration section of the sidebar](img/B19803_01_36.jpg)'
  id: totrans-476
  prefs: []
  type: TYPE_IMG
  zh: '![图1.36 – 侧边栏中的管理部分](img/B19803_01_36.jpg)'
- en: Figure 1.36 – The Administration section of the sidebar
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.36 – 侧边栏中的管理部分
- en: 'The **Administration** tab contains the following pages:'
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: '**管理**选项卡包含以下页面：'
- en: '**General**: The general page contains our Zabbix server configuration. Settings
    ranging from **Housekeeping** to **Frontend theme** are found here.'
  id: totrans-479
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**常规**：常规页面包含我们的Zabbix服务器配置。从**家务管理**到**前端主题**的设置都可以在这里找到。'
- en: '**Audit log**: The audit log settings are located here. We can enable or disable
    audit logging as well as change how long logs should be stored.'
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**审计日志**：审计日志设置位于这里。我们可以启用或禁用审计日志，并且可以更改日志存储的时长。'
- en: '**Housekeeping**: General housekeeping settings are found here. We can edit
    what we want to enable or disable for housekeeping, as well as change how long
    we store things such as history, trends, triggers, and more.'
  id: totrans-481
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**家务管理**：一般的家务管理设置可以在这里找到。我们可以编辑希望启用或禁用的家务管理内容，并且可以更改我们存储历史记录、趋势、触发器等内容的时长。'
- en: '**Proxy groups**: At this new entry, we will define proxy groups that we can
    use for failover and load balancing in combination with proxies.'
  id: totrans-482
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**代理组**：在这个新条目中，我们将定义可以与代理一起用于故障转移和负载均衡的代理组。'
- en: '**Proxies**: This is where we configure proxies that should be connected to
    this Zabbix server.'
  id: totrans-483
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**代理**：在这里，我们配置应连接到该Zabbix服务器的代理。'
- en: '**Macros**: A bit more accessible now is global macros, since they have been
    relocated here. Define new and manage existing global macros here.'
  id: totrans-484
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**宏**：现在全局宏更加容易访问，因为它们已经被重新定位到这里。在这里定义新的并管理现有的全局宏。'
- en: '**Queue**: View your Zabbix server queue here. Items might be stuck in a queue
    due to data collection or performance issues.'
  id: totrans-485
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**队列**：在这里查看Zabbix服务器队列。由于数据收集或性能问题，项目可能会被卡在队列中。'
- en: Tip
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: When using Zabbix authentication such as HTTP, LDAP, or SAML, we still need
    to create our users internally with the right permissions. Configure your users
    to match your authentication method’s username in Zabbix and use the authentication
    method for password management. With Zabbix 7.0, however, it is possible to use
    JIT user provisioning to automatically create users with the correct permissions,
    which we will also talk about in this book.
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Zabbix身份验证（如HTTP、LDAP或SAML）时，我们仍然需要在内部创建用户，并赋予正确的权限。配置用户时，需要使其用户名与身份验证方法中的用户名匹配，并使用身份验证方法进行密码管理。然而，在Zabbix
    7.0中，可以使用即时用户配置（JIT）自动创建具有正确权限的用户，这在本书中也会提到。
