- en: '11'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '11'
- en: Automating CI/CD for Cross-Mobile Applications by Using Flutter
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Flutter 自动化跨平台应用程序的 CI/CD
- en: In the previous chapter, we learned how to create a pipeline to deploy a containerized
    web application on AWS. This chapter will take a deep dive into creating a pipeline
    to automate CI/CD for the Flutter mobile application. Flutter is the most famous
    software development kit for mobile applications. Developers can write mobile
    applications using only Flutter code instead of Kotlin code for Google and Swift
    code for Apple, and the Azure pipeline can build and deploy Flutter code to the
    Google and Apple stores. They are the most widely used stores in the context of
    mobile applications. By the end of this chapter, you will have learned how to
    create a pipeline using YAML to deploy a Flutter application on Google Firebase,
    with the Google Play Console, and in an Apple environment.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们学习了如何创建一个管道来在 AWS 上部署一个容器化的 Web 应用程序。本章将深入探讨如何创建一个管道来自动化 Flutter 移动应用程序的
    CI/CD。Flutter 是最著名的移动应用程序开发工具包。开发人员可以仅使用 Flutter 代码编写移动应用，而无需使用 Google 的 Kotlin
    代码或 Apple 的 Swift 代码，Azure 管道可以构建并将 Flutter 代码部署到 Google 和 Apple 商店。这些商店是移动应用程序领域中使用最广泛的商店。在本章结束时，您将学会如何使用
    YAML 创建一个管道，将 Flutter 应用程序部署到 Google Firebase、Google Play 控制台以及 Apple 环境中。
- en: 'We will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将涵盖以下主题：
- en: Explaining the solution architecture
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解释解决方案架构
- en: Implementing Google Firebase for Flutter
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 Flutter 实现 Google Firebase
- en: Implementing an Apple environment for Flutter
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 Flutter 实现 Apple 环境
- en: Implementing a Google Play Console environment for Flutter
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 Flutter 实现 Google Play 控制台环境
- en: Navigating common challenges
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应对常见挑战
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: You will find the code for this chapter at [https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines/tree/main/ch11](https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines/tree/main/ch11).
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在 [https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines/tree/main/ch11](https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines/tree/main/ch11)
    找到本章的代码。
- en: 'To complete the tasks described in this chapter, you will need to do the following:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 为完成本章中描述的任务，您需要执行以下操作：
- en: 'Create a Firebase account and create a Firebase project by following the instructions
    in the official Firebase guides: [https://firebase.google.com/docs/guides](https://firebase.google.com/docs/guides)'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照 Firebase 官方指南中的说明创建 Firebase 账户并创建 Firebase 项目：[https://firebase.google.com/docs/guides](https://firebase.google.com/docs/guides)
- en: 'Set up Flutter by following the instructions provided in the official Flutter
    guides: [https://docs.flutter.dev/get-started/install](https://docs.flutter.dev/get-started/install)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照官方 Flutter 指南中的说明设置 Flutter：[https://docs.flutter.dev/get-started/install](https://docs.flutter.dev/get-started/install)
- en: 'Download the Flutter code example from the GitHub repository for this book:
    [https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines](https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从本书的 GitHub 仓库中下载 Flutter 代码示例：[https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines](https://github.com/PacktPublishing/Implementing-CI-CD-Using-Azure-Pipelines)
- en: 'Create and set up your app with the Google Play Console by following the instructions
    in the official Google guides: [https://support.google.com/googleplay/android-developer/answer/9859152?hl=en](https://support.google.com/googleplay/android-developer/answer/9859152?hl=en)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照 Google 官方指南中的说明，通过 Google Play 控制台创建并设置您的应用：[https://support.google.com/googleplay/android-developer/answer/9859152?hl=en](https://support.google.com/googleplay/android-developer/answer/9859152?hl=en)
- en: 'Create and set up your app in Apple Developer by following the instructions
    in the official Apple guides: [https://developer.apple.com/help/app-store-connect/create-an-app-record/add-a-new-app/](https://developer.apple.com/help/app-store-connect/create-an-app-record/add-a-new-app/)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照 Apple 官方指南中的说明，在 Apple Developer 中创建并设置您的应用：[https://developer.apple.com/help/app-store-connect/create-an-app-record/add-a-new-app/](https://developer.apple.com/help/app-store-connect/create-an-app-record/add-a-new-app/)
- en: Explaining the solution architecture
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 解释解决方案架构
- en: 'The following is a solution diagram that depicts how, in an Azure Pipelines
    workflow, to build your Flutter code and deploy it to Google Firebase, the Google
    Play Console, and Apple Store Connect:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是解决方案图，展示了在 Azure Pipelines 工作流中，如何构建 Flutter 代码并将其部署到 Google Firebase、Google
    Play 控制台和 Apple Store Connect：
- en: '![Figure 11.1 – Solution diagram](img/B18875_11_1.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.1 – 解决方案图](img/B18875_11_1.jpg)'
- en: Figure 11.1 – Solution diagram
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.1 – 解决方案图
- en: 'We will create three pipelines for Flutter in development and production environments,
    as shown in the preceding diagram, because mobile applications need to be tested
    on internal user or customer environments, such as Google Firebase, before deploying
    to production in the Google and Apple stores. The solution diagram depicts the
    following steps:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将为开发和生产环境中的 Flutter 创建三个流水线，如前图所示，因为移动应用程序需要在内部用户或客户环境（如 Google Firebase）中进行测试，然后再部署到
    Google 和 Apple 商店的生产环境。解决方案图解如下步骤：
- en: Developers develop and test mobile applications using Flutter on their machines
    and push Flutter code to Azure Repos.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 开发人员在他们的机器上使用 Flutter 开发和测试移动应用程序，并将 Flutter 代码推送到 Azure Repos。
- en: After the Flutter code is uploaded to Azure Repos, Azure Repos will trigger
    a pipeline to build the Flutter code and deploy the Flutter applications to Google
    Firebase.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在将 Flutter 代码上传到 Azure Repos 后，Azure Repos 将触发一个流水线来构建 Flutter 代码，并将 Flutter
    应用程序部署到 Google Firebase。
- en: After testing the Flutter applications on Google Firebase, the developers will
    trigger another pipeline to build the Flutter code and deploy the Flutter applications
    to the Google Play Store.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在使用 Google Firebase 测试 Flutter 应用程序后，开发人员将触发另一个流水线来构建 Flutter 代码，并将 Flutter
    应用程序部署到 Google Play 商店。
- en: After testing the Flutter applications on the Google Play Store, developers
    will trigger another pipeline to build Flutter code and deploy Flutter applications
    to Apple Store Connect.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Google Play 商店上测试 Flutter 应用程序后，开发人员将触发另一个流水线来构建 Flutter 代码并将 Flutter 应用程序部署到
    Apple Store Connect。
- en: Before we build our Flutter mobile application and deploy it to the Google and
    Apple stores, we need to generate and upload certain secure files. Let’s look
    at these next.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建我们的 Flutter 移动应用程序并将其部署到 Google 和 Apple 商店之前，我们需要生成并上传特定的安全文件。让我们接下来看看这些文件。
- en: Managing secure files
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理安全文件
- en: 'Before we build our Flutter mobile application and deploy it to the Google
    and Apple stores, we need to upload all the required files that tell the Google
    and Apple stores who you are, to check your developer profiles before they accept
    mobile applications. To do this, navigate to the **Pipelines** | **Library** |
    **Secure files** section and upload the following secure files to build and deploy
    the Flutter application:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建我们的 Flutter 移动应用程序并将其部署到 Google 和 Apple 商店之前，我们需要上传所有必需的文件，告诉 Google 和 Apple
    商店你的身份，以便在接受移动应用程序之前检查你的开发者配置文件。要做到这一点，请转到**流水线** | **库** | **安全文件**部分，并上传以下安全文件以构建和部署
    Flutter 应用程序：
- en: You can generate an Apple certificate file based on the instructions provided
    at [https://developer.apple.com/help/account/create-certificates/create-developer-id-certificates](https://developer.apple.com/help/account/create-certificates/create-developer-id-certificates)
    (`distribution.cer`)
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据提供的说明在[https://developer.apple.com/help/account/create-certificates/create-developer-id-certificates](https://developer.apple.com/help/account/create-certificates/create-developer-id-certificates)创建一个
    Apple 证书文件 (`distribution.cer`)
- en: Create a provision profile based on the instructions at [https://developer.apple.com/help/account/manage-provisioning-profiles/create-an-app-store-provisioning-profile](https://developer.apple.com/help/account/manage-provisioning-profiles/create-an-app-store-provisioning-profile)
    (`Hello_Flutter_AppStore.mobileprovision`)
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据[https://developer.apple.com/help/account/manage-provisioning-profiles/create-an-app-store-provisioning-profile](https://developer.apple.com/help/account/manage-provisioning-profiles/create-an-app-store-provisioning-profile)中的说明创建一个供应配置文件
    (`Hello_Flutter_AppStore.mobileprovision`)
- en: 'You can download the API key file (`AuthKey_XXXXXXX.p8`) from Apple Store Connect
    at [https://appstoreconnect.apple.com/access/api](https://appstoreconnect.apple.com/access/api),
    as shown in the following screenshot:'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以从 Apple Store Connect 的[https://appstoreconnect.apple.com/access/api](https://appstoreconnect.apple.com/access/api)下载
    API 密钥文件 (`AuthKey_XXXXXXX.p8`），如下截图所示：
- en: '![Figure 11.2 – Generate API key](img/B18875_11_2.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.2 – 生成 API 密钥](img/B18875_11_2.jpg)'
- en: Figure 11.2 – Generate API key
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.2 – 生成 API 密钥
- en: 'Once these files are uploaded, you will see a screen similar to the following:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 上传这些文件后，你将看到类似以下的屏幕：
- en: '![Figure 11.3 – Secure files](img/B18875_11_3.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.3 – 安全文件](img/B18875_11_3.jpg)'
- en: Figure 11.3 – Secure files
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.3 – 安全文件
- en: 'The following steps will show you how to prepare all the secure files shown
    in the preceding screenshot for Flutter application deployment:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将向您展示如何为 Flutter 应用程序部署准备前述截图中显示的所有安全文件：
- en: '`Certificates_Distribution.p12`): For Mac, navigate to `distribution.cer`)
    to export it into a file with a different format, called `Certificates_Distribution.p12`.'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Certificates_Distribution.p12`）：对于 Mac，导航至 `distribution.cer`）以将其导出为另一种格式的文件，称为
    `Certificates_Distribution.p12`。'
- en: '`upload-keystore.jks`): Run the following command to generate a key store file:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`upload-keystore.jks`）：运行以下命令以生成一个密钥库文件：'
- en: '[PRE0]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Create a secret group using the **Library** option of the Azure DevOps portal:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Azure DevOps 门户的 **Library** 选项创建一个秘密组：
- en: '![Figure 11.4 – Add a new variable group](img/B18875_11_4.jpg)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.4 – 添加一个新的变量组](img/B18875_11_4.jpg)'
- en: Figure 11.4 – Add a new variable group
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.4 – 添加一个新的变量组
- en: 'Create variables for deploying Android and iOS on Google Firebase, the Google
    Play Console, and the App Store:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为 Google Firebase、Google Play 控制台和 App Store 上的 Android 和 iOS 部署创建变量：
- en: '![Figure 11.5 – Add all variables](img/B18875_11_5.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.5 – 添加所有变量](img/B18875_11_5.jpg)'
- en: Figure 11.5 – Add all variables
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.5 – 添加所有变量
- en: 'Let’s discuss the variables in some detail:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们详细讨论一下这些变量：
- en: '**ANDROID_APP_ID**: Navigate to the Google Firebase project page, and you will
    find the app ID for the Android project:'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ANDROID_APP_ID**：导航到 Google Firebase 项目页面，您将找到 Android 项目的应用 ID：'
- en: '![Figure 11.6 – App ID of Android project](img/B18875_11_6.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.6 – Android 项目的应用 ID](img/B18875_11_6.jpg)'
- en: Figure 11.6 – App ID of Android project
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.6 – Android 项目的应用 ID
- en: '`data.b64` file:'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`data.b64` 文件：'
- en: '[PRE1]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '`upload-keystore.jks`. This is a **Java KeyStore** (**JKS**) file used for
    signing Android applications.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`upload-keystore.jks`。这是一个**Java KeyStore**（**JKS**）文件，用于签署 Android 应用。'
- en: '**ANDROID_KEYSTORE_PASSWORD**: The password that you enter when you use the
    key store file generated in *step 2*.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ANDROID_KEYSTORE_PASSWORD**：在使用 *步骤 2* 中生成的密钥库文件时输入的密码。'
- en: '**ANDROID_KEYSTORE_PRIVATE_PASSWORD**: The password that you enter when you
    use the key store file.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ANDROID_KEYSTORE_PRIVATE_PASSWORD**：使用密钥库文件时输入的密码。'
- en: '**APPLE_CERTIFICATE_SIGNING_PASSWORD**: The password when you export the P12
    file.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**APPLE_CERTIFICATE_SIGNING_PASSWORD**：导出 P12 文件时的密码。'
- en: '**FIREBASE_TOKEN**: Run the following command to generate it, after which you
    can copy the Firebase token on the command line result:'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**FIREBASE_TOKEN**：运行以下命令以生成它，然后可以复制命令行结果中的 Firebase 令牌：'
- en: '[PRE2]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![Figure 11.7 – Generate API Key](img/B18875_11_7.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.7 – 生成 API 密钥](img/B18875_11_7.jpg)'
- en: Figure 11.7 – Generate API Key
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.7 – 生成 API 密钥
- en: 'Next, identify the **Issuer ID**, **KEY ID**, and **API Key** file for Apple
    application deployment:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，确定 Apple 应用部署所需的 **Issuer ID**、**KEY ID** 和 **API Key** 文件：
- en: '![Figure 11.8 – Find Issuer ID, KEY ID, and API KEY file](img/B18875_11_08.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.8 – 查找发行者 ID、密钥 ID 和 API KEY 文件](img/B18875_11_08.jpg)'
- en: Figure 11.8 – Find Issuer ID, KEY ID, and API KEY file
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.8 – 查找发行者 ID、密钥 ID 和 API KEY 文件
- en: 'Run the following command to convert the `.p8` file into the encode string
    and copy the value of the encode string into the variable called **AUTH_KEY_P8**:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令将 `.p8` 文件转换为编码字符串，并将编码字符串的值复制到名为 **AUTH_KEY_P8** 的变量中：
- en: '[PRE3]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'For **IOS_APP_ID**, navigate to the Google Firebase project page, and you can
    find **App ID** under this section of your Apple project:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 **IOS_APP_ID**，导航到 Google Firebase 项目页面，在您的 Apple 项目部分下可以找到 **App ID**：
- en: '![Figure 11.9 – App ID of Apple project](img/B18875_11_09.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.9 – Apple 项目的应用 ID](img/B18875_11_09.jpg)'
- en: Figure 11.9 – App ID of Apple project
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.9 – Apple 项目的应用 ID
- en: After preparing all the required variables and files, you can start to create
    a pipeline for building and deploying the Flutter application to Google Firebase,
    the Google Play Console, and the App Store. However, before we learn how to do
    this, let’s discuss some key tasks that are used for deploying Flutter applications
    to Google Firebase, Apple environments, and Google Play.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在准备好所有必需的变量和文件之后，您可以开始创建管道，以将 Flutter 应用构建并部署到 Google Firebase、Google Play 控制台和
    App Store。然而，在学习如何实现之前，让我们先讨论一些用于将 Flutter 应用部署到 Google Firebase、Apple 环境和 Google
    Play 的关键任务。
- en: Tasks required for Flutter applications on Google Firebase, Apple, and the Google
    Play Console
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Google Firebase、Apple 和 Google Play 控制台上部署 Flutter 应用所需的任务
- en: 'Here are some of the key tasks required:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一些所需的关键任务：
- en: '**JavaToolInstaller@0** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/java-tool-installer-v0?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/java-tool-installer-v0?view=azure-pipelines)):
    This package task is for setting up the Java compiler. It is a required package
    task when you need to build a Flutter mobile application.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**JavaToolInstaller@0** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/java-tool-installer-v0?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/java-tool-installer-v0?view=azure-pipelines)):
    该包任务用于设置 Java 编译器。当你需要构建 Flutter 移动应用时，这是一个必需的包任务。'
- en: '**Hey24sheep** ([https://marketplace.visualstudio.com/items?itemName=Hey24sheep.flutter](https://marketplace.visualstudio.com/items?itemName=Hey24sheep.flutter)):
    This package task is for setting up the Flutter compiler. It is a required package
    task when you need to build a Flutter mobile application.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Hey24sheep** ([https://marketplace.visualstudio.com/items?itemName=Hey24sheep.flutter](https://marketplace.visualstudio.com/items?itemName=Hey24sheep.flutter)):
    该包任务用于设置 Flutter 编译器。当你需要构建 Flutter 移动应用时，这是一个必需的包任务。'
- en: '**CopyFiles@2** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/copy-files-v2?view=azure-pipelines&tabs=yaml](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/copy-files-v2?view=azure-pipelines&tabs=yaml)):
    This package task is for running the command to copy files.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CopyFiles@2** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/copy-files-v2?view=azure-pipelines&tabs=yaml](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/copy-files-v2?view=azure-pipelines&tabs=yaml)):
    该包任务用于运行命令以复制文件。'
- en: '`Artifacts`.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`工件`。'
- en: '**Bash@3** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/bash-v3?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/bash-v3?view=azure-pipelines)):
    This package task is for running commands in a Bash shell script.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Bash@3** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/bash-v3?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/bash-v3?view=azure-pipelines)):
    该包任务用于在 Bash shell 脚本中运行命令。'
- en: '**InstallAppleCertificate@2** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-certificate-v2?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-certificate-v2?view=azure-pipelines)):
    This package task is for installing Apple certificate files, which are used to
    verify Flutter applications for deploying to Apple Store Connect.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**InstallAppleCertificate@2** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-certificate-v2?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-certificate-v2?view=azure-pipelines)):
    该包任务用于安装 Apple 证书文件，这些文件用于验证 Flutter 应用程序，以便部署到 Apple Store Connect。'
- en: '**InstallAppleProvisioningProfile@1** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-provisioning-profile-v1?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-provisioning-profile-v1?view=azure-pipelines)):
    This package task is for installing an Apple provisioning profile file, which
    is used to verify a developer who is developing a Flutter application and deploying
    it to Apple Store Connect.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**InstallAppleProvisioningProfile@1** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-provisioning-profile-v1?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-provisioning-profile-v1?view=azure-pipelines)):
    该包任务用于安装 Apple 配置文件文件，这个文件用于验证开发者，确保其开发的 Flutter 应用程序能够成功部署到 Apple Store Connect。'
- en: '**AppStoreRelease@1** (https://marketplace.visualstudio.com/items?itemName=ms-vsclient.app-store#app-store-release):
    This package task is for deploying Flutter applications to Apple Store Connect.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AppStoreRelease@1** (https://marketplace.visualstudio.com/items?itemName=ms-vsclient.app-store#app-store-release):
    该包任务用于将 Flutter 应用程序部署到 Apple Store Connect。'
- en: '**AndroidSigning@3** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/android-signing-v3?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/android-signing-v3?view=azure-pipelines)):
    This package task is for signing an Android package or APK file before deploying
    it to the Google Play Console.'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AndroidSigning@3** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/android-signing-v3?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/android-signing-v3?view=azure-pipelines)):
    该包任务用于在将 Android 包或 APK 文件部署到 Google Play 控制台之前进行签名。'
- en: '**GooglePlayRelease@4** ([https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play)):
    This package task is for deploying Flutter applications to the Google Play Console.'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**GooglePlayRelease@4** ([https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play))：此软件包任务用于将
    Flutter 应用部署到 Google Play 控制台。'
- en: '**DownloadSecureFile@1** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/download-secure-file-v1?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/download-secure-file-v1?view=azure-pipelines)):
    This package task is for downloading the secure files from the **Secure files**
    section of the **Variable groups** menu. In our case, it is a signing file to
    sign a Flutter application before deploying it on the Google Play Console.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DownloadSecureFile@1** ([https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/download-secure-file-v1?view=azure-pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/download-secure-file-v1?view=azure-pipelines))：此软件包任务用于从
    **Variable groups** 菜单的 **Secure files** 部分下载安全文件。在我们的例子中，它是一个签名文件，用于在将 Flutter
    应用部署到 Google Play 控制台之前对其进行签名。'
- en: In the next section, you will learn how to implement Google Firebase for Flutter.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节，你将学习如何为 Flutter 实现 Google Firebase。
- en: Implementing Google Firebase for Flutter
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为 Flutter 实现 Google Firebase
- en: To build and deploy Flutter applications on Google Firebase in both **Android**
    and **iOS**, you need to use the tasks discussed in the previous section. First,
    let’s learn how we can create a pipeline for building and deploying the Flutter
    application to Google Firebase on Android.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 **Android** 和 **iOS** 上将 Flutter 应用构建并部署到 Google Firebase，你需要使用上一节中讨论的任务。首先，我们将学习如何为
    Android 创建一个构建和部署 Flutter 应用到 Google Firebase 的管道。
- en: Creating a pipeline for Google Firebase on Android
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为 Android 创建 Google Firebase 管道
- en: 'To create an Android pipeline, we first need to prepare an Ubuntu environment
    and install the Flutter compiler. After that, it will build your code into a binary
    file and upload it to Google Firebase App Distribution. You can follow these steps:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建 Android 管道，我们首先需要准备一个 Ubuntu 环境并安装 Flutter 编译器。之后，它会将你的代码构建成一个二进制文件并上传到
    Google Firebase App Distribution。你可以按照以下步骤操作：
- en: 'Create a pipeline file for Android called `azure-pipeline-for-firebase-android.yml`
    and paste the following code snippets:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为 `azure-pipeline-for-firebase-android.yml` 的 Android 管道文件，并粘贴以下代码片段：
- en: 'The first part of the YAML file is for preparing all variables that will use
    the entirety of this Azure pipeline. It also declares the operating system for
    building this file, which is Ubuntu in this scenario:'
  id: totrans-89
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: YAML 文件的第一部分是为整个 Azure 管道准备所有变量。它还声明了构建该文件的操作系统，在此场景中为 Ubuntu：
- en: '[PRE4]'
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This task is for the pre-installation of the Java library for building your
    code:'
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是用于预先安装 Java 库，以构建你的代码：
- en: '[PRE5]'
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This task is for the pre-installation of the Flutter compiler for building
    your code:'
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是用于预先安装 Flutter 编译器，以构建你的代码：
- en: '[PRE6]'
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'This task is for building your code and creating an APK file:'
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是用于构建你的代码并创建 APK 文件：
- en: '[PRE7]'
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'This task is for signing an APK file to allow Android phones to launch your
    application:'
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是用于签名 APK 文件，以允许 Android 手机启动你的应用：
- en: '[PRE8]'
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'This task is for copying a signed APK file to the artifact directory before
    uploading it to Azure Pipelines storage:'
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是将已签名的 APK 文件复制到制品目录，在上传到 Azure Pipelines 存储之前：
- en: '[PRE9]'
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'This task is for publishing a signed APK file to Azure Pipelines storage:'
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是用于将已签名的 APK 文件发布到 Azure Pipelines 存储：
- en: '[PRE10]'
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This task is for uploading a signed APK file from Azure Pipelines storage to
    Google Firebase App Distribution and letting all users download it for testing:'
  id: totrans-103
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是将已签名的 APK 文件从 Azure Pipelines 存储上传到 Google Firebase App Distribution，并让所有用户下载进行测试：
- en: '[PRE11]'
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'For Android, when a pipeline build is successful, you can see the result in
    the **App Distribution** section of Google Firebase:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 Android，当管道构建成功时，你可以在 Google Firebase 的 **App Distribution** 部分看到结果：
- en: '![Figure 11.10 – App Distribution for the Android project](img/B18875_11_10.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.10 – Android 项目的应用分发](img/B18875_11_10.jpg)'
- en: Figure 11.10 – App Distribution for the Android project
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.10 – Android 项目的应用分发
- en: In the next section, let’s learn how to do this on iOS.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节，我们将学习如何在 iOS 上完成此操作。
- en: Creating a pipeline for Google Firebase on iOS
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为 iOS 创建 Google Firebase 管道
- en: 'To create an iOS pipeline, we first prepare a macOS environment and install
    the Flutter compiler. After that, it will build your code into a binary file and
    upload it to Google Firebase Distribution:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个 iOS 管道，我们首先准备一个 macOS 环境并安装 Flutter 编译器。之后，它将把你的代码构建成二进制文件并上传到 Google
    Firebase 分发：
- en: 'Create a pipeline file for Android called `azure-pipeline-for-firebase-ios.yml`
    and paste the following code snippets:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为 `azure-pipeline-for-firebase-ios.yml` 的管道文件，并粘贴以下代码片段：
- en: 'The first part of the YAML file is for preparing all variables that will use
    the entirety of this Azure pipeline. It also declares the operating system for
    building this file, which is the latest version of macOS:'
  id: totrans-112
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: YAML 文件的第一部分用于准备将在整个 Azure 管道中使用的所有变量。它还声明了用于构建此文件的操作系统，即最新版本的 macOS：
- en: '[PRE12]'
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'This task is for pre-installing the Java library for building your code:'
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于预安装用于构建代码的 Java 库：
- en: '[PRE13]'
  id: totrans-115
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'This task is for installing Apple certificate that is required for building
    an iOS application:'
  id: totrans-116
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于安装构建 iOS 应用程序所需的 Apple 证书：
- en: '[PRE14]'
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'This task is for installing an Apple provisioning profile, which is required
    for building an iOS application:'
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于安装 Apple 配置文件，这对于构建 iOS 应用程序是必需的：
- en: '[PRE15]'
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'This task is for installing the Flutter compiler to build your code:'
  id: totrans-120
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于安装 Flutter 编译器以构建你的代码：
- en: '[PRE16]'
  id: totrans-121
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'This task is for building your code and creating an **iOS App Store Package**
    (**IPA**) file:'
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于构建你的代码并创建 **iOS 应用商店包** (**IPA**) 文件：
- en: '[PRE17]'
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This task is for uploading an IPA file to Google Firebase App Distribution:'
  id: totrans-124
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于将 IPA 文件上传到 Google Firebase 应用分发：
- en: '[PRE18]'
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Similar to Android, when a pipeline build is successful, you can see the result
    in the **App Distribution** section of Google Firebase:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 类似于 Android，当管道构建成功时，你可以在 Google Firebase 的 **App Distribution** 部分看到结果：
- en: '![Figure 11.11 – App Distribution for the Apple project](img/B18875_11_11.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.11 – Apple 项目的应用分发](img/B18875_11_11.jpg)'
- en: Figure 11.11 – App Distribution for the Apple project
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.11 – Apple 项目的应用分发
- en: This section discussed how to build and deploy the Flutter application on Google
    Firebase for testing before deploying it to the Google Play Console or App Store.
    Next, let’s discuss how we can create and deploy Flutter applications on Apple
    Store Connect.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 本节讨论了如何在 Google Firebase 上构建和部署 Flutter 应用程序，以便在将其部署到 Google Play 控制台或应用商店之前进行测试。接下来，我们将讨论如何在
    Apple Store Connect 上创建和部署 Flutter 应用程序。
- en: Implementing an Apple environment for Flutter
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为 Flutter 实现 Apple 环境
- en: 'To build and deploy Flutter applications on Apple Store Connect, you need to
    use the various tasks in an Azure pipeline, as discussed earlier in this chapter.
    To reduce the time needed for mobile application deployment process, it is necessary
    to construct the Apple Store deployment pipeline. To do this, you can follow these
    steps:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Apple Store Connect 上构建和部署 Flutter 应用程序，你需要使用 Azure 管道中的各种任务，正如本章前面讨论的那样。为了减少移动应用程序部署过程所需的时间，有必要构建
    Apple Store 部署管道。为此，你可以按照以下步骤操作：
- en: 'Create a pipeline file called `azure-pipeline-for-apple-store.yml` and paste
    the following code snippets:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为 `azure-pipeline-for-apple-store.yml` 的管道文件，并粘贴以下代码片段：
- en: 'The first part of the YAML file is for preparing all variables that will use
    the entirety of this Azure pipeline. It also declares the operating system for
    building this file, which is the latest version of macOS:'
  id: totrans-133
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: YAML 文件的第一部分用于准备将在整个 Azure 管道中使用的所有变量。它还声明了用于构建此文件的操作系统，即最新版本的 macOS：
- en: '[PRE19]'
  id: totrans-134
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'This task is for the pre-installation of the Java library for building your
    code:'
  id: totrans-135
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于预安装用于构建代码的 Java 库：
- en: '[PRE20]'
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'This task is for installing the Apple certificate that is required for building
    an iOS application:'
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于安装构建 iOS 应用程序所需的 Apple 证书：
- en: '[PRE21]'
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'This task is for installing an Apple provisioning profile, which is required
    for building an iOS application:'
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于安装 Apple 配置文件，这对于构建 iOS 应用程序是必需的：
- en: '[PRE22]'
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'This task is for installing the Flutter compiler to build your code:'
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于安装 Flutter 编译器以构建你的代码：
- en: '[PRE23]'
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'This task is for building your code and creating an IPA file:'
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于构建你的代码并创建一个 IPA 文件：
- en: '[PRE24]'
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'This task is for uploading a signed IPA file to Apple Store Connect:'
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该任务用于将签名的 IPA 文件上传到 Apple Store Connect：
- en: '[PRE25]'
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'When a pipeline build is successful, you can see the result in the **App Store
    Connect** | **TestFlight** tab:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当管道构建成功时，你可以在 **App Store Connect** | **TestFlight** 标签页中看到结果：
- en: '![Figure 11.12 – TestFlight on App Store Connect](img/B18875_11_12.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图 11.12 – App Store Connect 上的 TestFlight](img/B18875_11_12.jpg)'
- en: Figure 11.12 – TestFlight on App Store Connect
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图 11.12 – App Store Connect 上的 TestFlight
- en: In this section, you learned how to create a pipeline to build and deploy Flutter
    applications on Apple Store Connect. In the next section, you will learn how to
    build and deploy Flutter applications on the Google Play Console.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你学习了如何创建一个管道，以便在Apple Store Connect上构建和部署Flutter应用程序。在下一节中，你将学习如何在Google
    Play控制台上构建和部署Flutter应用程序。
- en: Implementing a Google Play Console for Flutter
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为Flutter实现Google Play控制台
- en: 'You can create an Azure pipeline when you need to upload your application to
    the Google Play Store, which is a marketplace for Android applications that allows
    all Android users to download applications. To do this, follow these steps:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 当你需要将应用程序上传到Google Play商店时，你可以创建一个Azure管道。Google Play商店是一个Android应用程序市场，允许所有Android用户下载应用。按照以下步骤操作：
- en: 'Create a pipeline file called `azure-pipeline-for-google-play-store.yml` and
    paste the following code snippets:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`azure-pipeline-for-google-play-store.yml`的管道文件，并粘贴以下代码片段：
- en: 'The first part of the YAML file is for preparing all variables that will use
    the entirety of this Azure pipeline. It also declares the operating system for
    building this file, which is Ubuntu:'
  id: totrans-154
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: YAML文件的第一部分用于准备将在整个Azure管道中使用的所有变量。它还声明了用于构建该文件的操作系统，即Ubuntu：
- en: '[PRE26]'
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'This task is for downloading the keystore file, which is needed to sign an
    **Android App Bundle** (**AAB**) file before uploading it to the Google Play Console:'
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是下载keystore文件，这是签署**Android应用包**（**AAB**）文件所必需的，签署完成后可以将其上传到Google Play控制台：
- en: '[PRE27]'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'This task is for pre-installing the Java library for building your code:'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是预先安装用于构建代码的Java库：
- en: '[PRE28]'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'This task is for installing the Flutter compiler to build your code:'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是安装Flutter编译器以构建你的代码：
- en: '[PRE29]'
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'This task is for building Flutter code in an AAB file:'
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是用于在AAB文件中构建Flutter代码：
- en: '[PRE30]'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'This task is for copying an AAB file from the source folder to an artifact
    folder:'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是将AAB文件从源文件夹复制到构建产物文件夹：
- en: '[PRE31]'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'This task is for moving a signed AAB file to Azure Pipelines storage:'
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是将已签名的AAB文件移到Azure Pipelines存储：
- en: '[PRE32]'
  id: totrans-167
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'This task is for uploading an AAB file to the Google Play Store:'
  id: totrans-168
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个任务是将AAB文件上传到Google Play商店：
- en: '[PRE33]'
  id: totrans-169
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'When a pipeline build is successful, you can see the result in the Google Play
    Console:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当管道构建成功时，你可以在Google Play控制台查看结果：
- en: '![Figure 11.13 – Internal testing on the Google Play Console](img/B18875_11_13.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![图11.13 – 在Google Play控制台上的内部测试](img/B18875_11_13.jpg)'
- en: Figure 11.13 – Internal testing on the Google Play Console
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图11.13 – 在Google Play控制台上的内部测试
- en: In this section, you learned how to create a pipeline to build and deploy Flutter
    applications using the internal testing of the Google Play Console. It will help
    you to focus on application development after you finish setting up the pipelines.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你学习了如何创建一个管道，使用Google Play控制台的内部测试来构建和部署Flutter应用程序。这将帮助你在完成管道设置后专注于应用程序开发。
- en: Navigating common challenges
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 解决常见挑战
- en: 'During Flutter development, you may face certain common issues that can be
    prevented if certain best practices are followed. Let’s discuss a couple of them:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在Flutter开发过程中，你可能会遇到一些常见问题，如果遵循一些最佳实践，这些问题是可以避免的。让我们讨论其中的一些：
- en: '`pubspec.yaml`: This contains the name of the dependencies that you use for
    Flutter development, such as database dependencies.'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pubspec.yaml`：此文件包含你在Flutter开发中使用的依赖项的名称，例如数据库依赖项。'
- en: '`pubspec.lock`: This contains the name and version of dependencies that you
    use for Flutter development.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pubspec.lock`：此文件包含你在Flutter开发中使用的依赖项的名称和版本。'
- en: Ensure that you commit `pubspec.lock` to Azure Repos because if you miss this
    step, you will get an error. This is because you will get a new `pubspec.lock`
    file, which will contain a different version of the dependencies that you used
    when you developed the Flutter application on your computer.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你将`pubspec.lock`提交到Azure Repos，因为如果你错过这一步，你会遇到错误。原因是你将获得一个新的`pubspec.lock`文件，其中包含与你在本地开发Flutter应用时所使用的依赖项版本不同的版本。
- en: '**Handling platform-specific code**: Flutter allows you to write platform-specific
    code but managing this in a CI/CD pipeline can be tricky, especially when your
    application has custom platform-specific modules or dependencies.'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**处理平台特定代码**：Flutter允许你编写平台特定的代码，但在CI/CD管道中管理这些代码可能会很棘手，特别是当你的应用程序具有自定义的特定平台模块或依赖项时。'
- en: Use separate tasks in Azure Pipelines to handle platform-specific builds. For
    example, you might have different stages or jobs for iOS and Android builds. Ensure
    that the necessary SDKs and tools for each platform are installed and configured
    in your Azure Pipelines environment.
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在 Azure Pipelines 中使用独立任务来处理特定平台的构建。例如，你可能会为 iOS 和 Android 构建设置不同的阶段或任务。确保每个平台所需的
    SDK 和工具已经在你的 Azure Pipelines 环境中安装和配置好。
- en: Now that you’re well-equipped for Flutter development, let’s wrap this chapter
    up.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经为 Flutter 开发做好了充分准备，让我们总结一下这一章的内容。
- en: Summary
  id: totrans-182
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter taught you how to create build pipelines for Flutter applications.
    It covered pipelines for Google Firebase – both Android and Apple. It also covered
    pipelines for Apple Store Connect and Google Play Console deployment. This will
    help to reduce the time required by developers to create manual commands when
    they need to build and deploy Flutter applications. This will also help developers
    focus on developing mobile applications, because you create a pipeline only once
    and let an Azure pipeline build your code and deploy your application to Google
    Firebase, Apple Store Connect, and the Google Play Store automatically. This will
    increase developer productivity.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 本章教你如何为 Flutter 应用程序创建构建管道。内容包括 Google Firebase 的管道——无论是 Android 还是 Apple。还涉及了
    Apple Store Connect 和 Google Play Console 部署的管道。这将有助于减少开发人员在构建和部署 Flutter 应用程序时所需的手动命令时间。同时，这也帮助开发人员更专注于开发移动应用程序，因为你只需创建一次管道，让
    Azure 管道自动构建你的代码并将应用程序部署到 Google Firebase、Apple Store Connect 和 Google Play Store。这将提升开发人员的生产力。
- en: In the last chapter, we will learn about some common pitfalls to avoid when
    using Azure Pipelines and discuss the potential future applications and trends
    of this technology.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们将学习在使用 Azure Pipelines 时需要避免的一些常见陷阱，并讨论该技术的潜在未来应用和趋势。
