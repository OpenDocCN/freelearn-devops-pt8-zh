- en: Chapter 2. Getting the Cloud Fabric Ready
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章：准备云架构
- en: Fabric is one of the most important and crucial part of any traditional data
    center or cloud solution. Cloud fabric essentially includes, but is not limited
    to compute, network, storage, and hypervisors. Well designed and deployed fabric
    infrastructure is the way towards smooth operations of any cloud or traditional
    data center. In this chapter, we will cover all aspects of planning and deploying
    cloud fabric for our Windows Azure Pack-based cloud solution. It will help you
    understand fabric requirements and deployment practices for a WAP-based cloud
    solution. We will also include installation and configuration of major components
    such as SQL DB, SCVMM, SPF, and so on. We will be covering planning guidelines
    for both organizations' private cloud as well as for service providers' cloud.
    This fabric infrastructure will be used to deliver IaaS services in our WAP cloud.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 云架构是任何传统数据中心或云解决方案中最重要、最关键的部分之一。云架构本质上包括但不限于计算、网络、存储和虚拟化管理程序。设计良好并部署的云架构基础设施是确保云或传统数据中心平稳运行的关键。本章将涵盖为基于
    Windows Azure Pack 的云解决方案规划和部署云架构的各个方面。这将帮助你理解 WAP 云解决方案的架构需求和部署实践。我们还将包括主要组件的安装和配置，如
    SQL 数据库、SCVMM、SPF 等等。我们将讨论为组织的私有云以及服务提供商的云规划的指导原则。此架构基础设施将用于在我们的 WAP 云中提供 IaaS
    服务。
- en: 'We will cover the following topics in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Cloud fabric infrastructure planning
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云架构基础设施规划
- en: Hyper-V deployment best practices
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hyper-V 部署最佳实践
- en: Setting up virtual machines for cloud management fabric
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置虚拟机以用于云管理架构
- en: Planning and deploying SQL Server for cloud management DB
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 规划和部署 SQL Server 以用于云管理数据库
- en: Installing and configuring **System Center Virtual Machine Manager** (**SCVMM**)
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装和配置 **System Center 虚拟机管理器** (**SCVMM**)
- en: Planning and configuring cloud compute hypervisor layer with SCVMM
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 SCVMM 规划和配置云计算虚拟化管理程序层
- en: Planning and configuring cloud network with SCVMM
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 SCVMM 规划和配置云网络
- en: Planning and configuring cloud storage with SCVMM
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 SCVMM 规划和配置云存储
- en: Planning and deploying System Center Service Provider Foundation
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 规划和部署 System Center 服务提供商基础
- en: Cloud fabric infrastructure planning
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 云架构基础设施规划
- en: Planning a cloud fabric infrastructure involves practice and involvement of
    business and technical decision makers. Cloud fabric has to be planned in such
    a manner that ensures that services are available for the business in a reliable
    and efficient manner. Current infrastructure assessment, forecasting and future
    resource planning, cloud service catalogues, along with strategic vision and financials
    are the key facts to consider while planning for cloud infrastructure. Let's have
    a look at the foundation and basic principles for planning a WAP-based cloud fabric
    infrastructure for delivering IaaS services.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 规划云架构基础设施需要实践和业务与技术决策者的参与。云架构必须以确保以可靠和高效的方式为业务提供服务的方式进行规划。当前基础设施评估、预测和未来资源规划、云服务目录，以及战略愿景和财务因素是规划云基础设施时需要考虑的关键要素。让我们看看为提供
    IaaS 服务规划基于 WAP 的云架构基础设施的基础和基本原则。
- en: Choosing the hardware
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择硬件
- en: 'While choosing hardware for your cloud infrastructure, there is a long list
    of precautions to be taken care of. The following are some of these precautions:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在为你的云基础设施选择硬件时，有一长串需要注意的事项。以下是其中一些需要注意的事项：
- en: Follow the Microsoft certified hardware and software supportability and compatibility
    list. It is not a mandatory requirement as a WAP-based solution can be installed
    on almost any x86 based virtualization supported hardware, however, it is recommended
    to go with Microsoft certified hardware to avoid any glitches at a later stage
    in production. Getting support could be challenging sometimes while using non-supported
    hardware.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 遵循微软认证的硬件和软件支持性与兼容性清单。这不是强制性要求，因为基于 WAP 的解决方案几乎可以安装在任何支持虚拟化的 x86 架构硬件上，然而，建议选择微软认证的硬件，以避免在生产阶段出现任何问题。使用不受支持的硬件时，获得技术支持有时可能会遇到挑战。
- en: While going for commodity hardware, check for compatibility and features of
    individual pieces of server such as NIC cards and so on.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在选择通用硬件时，检查单个服务器组件（如网卡等）的兼容性和功能。
- en: Use latest hardware supporting new features such as RDMA and other hardware
    offloading capabilities to take advantage of all capabilities of your hypervisor
    and cloud layer.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用支持新功能（如RDMA和其他硬件卸载能力）的最新硬件，以充分发挥超管程序和云层的所有能力。
- en: Check for the scalability flexibilities, sufficient number of processors, memory,
    PCI slots can be helpful in increasing resources as and when required.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查扩展性灵活性，足够数量的处理器、内存和PCI插槽有助于在需要时增加资源。
- en: Hardware failure happens, it's a good idea to check for hardware vendor support
    and SLAs in case of hardware failure part replacement and more.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 硬件故障是常见的，检查硬件供应商的支持和服务级别协议（SLA）是个好主意，特别是在硬件故障时需要更换部件等。
- en: While comparing multiple hardware options for your cloud, include data center
    physical requirements (space, power, cooling, and so on) as one of the parameters,
    physical requirements usually become constraints in the real world.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在比较多种硬件选项时，考虑数据中心的物理要求（空间、电力、冷却等）作为其中一个参数，物理要求通常会在现实世界中成为限制因素。
- en: While all preceding points are valid, today's data center technologies trends
    include software defined strategy. Using commodity hardware with best of breed
    software runs the data centers. It is fairly possible and good to use commodity
    hardware in your WAP cloud solution, though building the commodity hardware has
    to be planned very carefully.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管前述所有观点都有效，但当今数据中心技术的趋势包括软件定义战略。通过使用最佳的软件与通用硬件来运行数据中心是可行的，尽管构建通用硬件需要精心规划，但在WAP云解决方案中使用通用硬件既是可行的也是合理的。
- en: For example, using non-supported disk drives leads to IOPS related performance
    issues, and the same goes for NIC speed and features. Follow the industry best
    practice guideline along with Microsoft Hyper-V compatibility and features support
    while designing commodity hardware.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，使用不支持的磁盘驱动器会导致与IOPS相关的性能问题，网络接口卡（NIC）的速度和功能也存在类似情况。在设计通用硬件时，需遵循行业最佳实践指南，并确保兼容性与微软Hyper-V的功能支持。
- en: Choosing a combination of both proprietary and commodity hardware is also not
    uncommon; organizations can choose to run critical workload on proprietary hardware
    to ensure performance and support, whereas use commodity hardware for less critical
    or test and development workloads.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 选择专有硬件与通用硬件的组合也并不罕见；组织可以选择在专有硬件上运行关键工作负载，以确保性能和支持，而在较不关键或测试与开发工作负载上使用通用硬件。
- en: Enabling commodity hardware options is helping small and midsized businesses
    (SMBs) to utilize enterprise class virtualization and cloud technologies for their
    IT needs in a limited budget. The same goes for the cloud service providers, small
    vendors with budget constraints can also get into the cloud services market using
    commodity hardware.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 启用通用硬件选项帮助中小型企业（SMBs）在有限预算内利用企业级虚拟化和云技术来满足IT需求。云服务提供商也是如此，预算有限的小型供应商也能利用通用硬件进入云服务市场。
- en: Tip
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: The Microsoft supportability and compatibility list can be accessed at [https://www.windowsservercatalog.com/](https://www.windowsservercatalog.com/).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 微软的支持性和兼容性列表可以通过[https://www.windowsservercatalog.com/](https://www.windowsservercatalog.com/)访问。
- en: Sizing the hardware
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 硬件规格
- en: After choosing the hardware, the next thing which comes is sizing. Sizing for
    a cloud fabric for a private cloud and service provider cloud is an altogether
    different science with a common foundation of data center infrastructures sizing
    practice. Projecting future needs is the most important aspect while sizing any
    cloud hardware that is cloud should be able to handle hardware needs for the next
    *X* years, depending upon businesses strategy. Microsoft provides MAP toolkit
    (Microsoft Assessment and Planning) which can be utilized by organizations and
    service providers for accessing current infra and planning for target infrastructure.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 选择硬件后，接下来的工作是进行规格规划。私有云和服务提供商云的云架构规格规划是一门不同的学问，但其基础是数据中心基础设施的规格规划实践。预测未来的需求是规格规划中最重要的方面，云平台应能够应对未来*X*年的硬件需求，具体取决于业务策略。微软提供的MAP工具包（微软评估与规划）可以帮助组织和服务提供商评估当前基础设施并规划目标基础设施。
- en: Let's have a look at few major sizing best practices and procedures for both
    private clouds and service providers' cloud.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看一些针对私有云和服务提供商云的主要硬件规格最佳实践和程序。
- en: 'Sizing the cloud hardware for private cloud:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 私有云硬件规格：
- en: Assess current workload requirements and plan hardware as per Hyper-V Server
    Virtualization sizing guidelines pertaining to virtual CPUs, memory, and more.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估当前的工作负载需求，并根据 Hyper-V 服务器虚拟化尺寸规划指南进行硬件规划，涉及虚拟 CPU、内存等。
- en: Utilize MAP toolkit to assess current running workload in traditional computing.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用 MAP 工具包评估传统计算中当前运行的工作负载。
- en: Perform server consolidation planning if P2V or hardware refresh is also planned.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果计划进行 P2V 或硬件刷新，请执行服务器整合规划。
- en: List down the expected new workload requirements (like new application planned
    in the near future and so on.)
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列出预计的新增工作负载要求（如计划中的新应用等）
- en: List down the expected resources increment in the coming *X* years in terms
    of compute, network, and storage.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列出预计在接下来的*X*年内，计算、网络和存储方面的资源增长需求。
- en: Analyze isolated infrastructure requirements if any (a few apps may need to
    be isolated from each other in terms of network/server due to compliance and more.)
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果有需要，分析隔离的基础设施要求（一些应用可能因合规等原因需要在网络/服务器层面上进行隔离）
- en: Factor for **Business Continuity and Disaster Recovery** (**BCDR**) planning.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑**业务连续性和灾难恢复**（**BCDR**）规划因素。
- en: Bring all collected details together and size the hardware as per Hyper-V virtualization
    and IT infrastructure sizing guidelines.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 汇总所有收集的细节，并根据 Hyper-V 虚拟化和 IT 基础设施规划指南对硬件进行尺寸规划。
- en: Add hardware requirements for cloud management infrastructure depending upon
    workload to be managed.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据要管理的工作负载，添加云管理基础设施的硬件要求。
- en: 'Sizing the cloud hardware for service provider cloud:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 为服务提供商云环境规划云硬件：
- en: Access customer needs and technological requirements in service providers' technology
    space
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估客户需求和服务提供商技术领域中的技术要求
- en: Define technology offering and flexibilities in terms of infra and apps with
    their fabric requirements
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义技术产品和灵活性，包括基础设施和应用程序及其架构要求
- en: Set business goals like having *X* number of resources/customers in the coming
    *X* years as per service provider's strategy
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据服务提供商的战略设定业务目标，例如在接下来的*X*年内拥有*X*数量的资源/客户
- en: Bring all collected details and strategy decisions together and size the hardware
    as per Hyper-V virtualization and IT infrastructure sizing guidelines
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 汇总所有收集的细节和战略决策，并根据 Hyper-V 虚拟化和 IT 基础设施尺寸规划指南对硬件进行尺寸规划
- en: Add hardware requirements for cloud management infrastructure depending upon
    the workload to be managed as planned here.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据计划管理的工作负载，添加云管理基础设施的硬件要求。
- en: Note
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Sizing the hardware for cloud or any traditional data center is an altogether
    different detailed study and practice. The above mentioned guidelines are to help
    readers in understanding the base foundation for cloud fabric hardware planning.
    Refer to product and practice specific technical and economical guidelines for
    a production sizing.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 为云或任何传统数据中心进行硬件尺寸规划是完全不同的详细研究和实践。上述指南旨在帮助读者理解云架构硬件规划的基础基础。有关生产环境尺寸规划的产品和实践特定技术及经济指南，请参阅相关资料。
- en: Choosing hypervisor's deployment options and editions
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择 Hypervisor 的部署选项和版本
- en: Microsoft added a variety of all enterprise class virtualization features to
    Windows Server 2012\. With Windows Server 2012 / R2 Hyper-V becomes the enterprise
    class proven virtualization platform supporting greater flexibility and scalability.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft 向 Windows Server 2012 添加了各种企业级虚拟化功能。通过 Windows Server 2012 / R2，Hyper-V
    成为支持更大灵活性和可扩展性的企业级验证虚拟化平台。
- en: 'Microsoft Windows Server 2012 R2 Hyper-V provides an enterprise class virtualization
    platform for WAP-based cloud solution. Hyper-V can be deployed in three ways:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Windows Server 2012 R2 Hyper-V 提供了一个企业级虚拟化平台，适用于基于 WAP 的云解决方案。Hyper-V
    可以通过三种方式部署：
- en: Windows Server 2012 R2 Server with GUI with Hyper-V role
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带 GUI 的 Windows Server 2012 R2 服务器并启用 Hyper-V 角色
- en: Windows Server 2012 R2 Server Core with Hyper-V role
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带 Hyper-V 角色的 Windows Server 2012 R2 服务器核心
- en: Hyper-V Server 2012 R2 (free)
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hyper-V Server 2012 R2（免费）
- en: The **Server with GUI** option installs and configures all user interface options,
    such as server manager, desktop experience, and so on. It installs Windows Server
    also in the same traditional manner with all features and functionality available.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**带 GUI 的服务器**选项安装并配置所有用户界面选项，如服务器管理器、桌面体验等。它以传统方式安装 Windows Server，并提供所有功能和特性。'
- en: The **Server Core** version is a stripped down version of full installation,
    in this no GUI components gets installed. It has to be managed via a command line,
    PowerShell or remote server management options. Benefits of deploying the Server
    Core version includes but is not limited to less resource consumption, less disk
    footprint, better security by reducing attack surface of eliminated components
    in comparison to the Server with GUI option, and so on.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**Server Core**版本是完整安装版本的精简版，不会安装GUI组件。必须通过命令行、PowerShell或远程服务器管理选项进行管理。部署Server
    Core版本的好处包括但不限于更少的资源消耗、更小的磁盘占用、更好的安全性（通过减少被移除组件的攻击面，相比GUI版本更为安全）等。'
- en: It is recommended to deploy Server Core in a cloud infrastructure for hypervisor's
    as these servers shall be used for running VMs only. This can take advantage of
    server core deployment benefits in large infrastructures.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐在云基础设施中部署Server Core作为虚拟化平台的操作系统，因为这些服务器将仅用于运行虚拟机。这样可以在大型基础设施中充分利用Server Core部署的优势。
- en: With Windows Server 2012 and R2, it is possible to switch between full editions
    and core edition after deployment. Administrators can choose to install the Server
    with GUI initially and switch to the core version post configuration for easy
    deployment.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows Server 2012及其R2版本中，部署后可以在完整版本和核心版之间切换。管理员可以选择初始安装带GUI的服务器，配置完成后再切换到核心版本，以便于部署。
- en: Windows Server editions
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Windows Server版本
- en: 'There are multiple editions of Windows Server such as Essentials, Foundation,
    and so on, but majorly for any virtualization needs below two editions are used:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Server有多个版本，如Essentials、Foundation等，但主要用于虚拟化需求的有以下两种版本：
- en: Windows Server Standard edition
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows Server Standard版
- en: Windows Server Data center edition
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows Server Data Center版
- en: Both Standard and Data center editions of Windows Server is licensed on processor
    basis, one license per two processors. Both Standard and Data center editions
    provide the same set of features, the difference lies in the virtualization rights.
    Standard edition allows you to run two virtual machines with Windows Server OS,
    in the case of Data center edition the number goes unlimited. Taking a scenario
    Windows Server 2012 R2 Standard edition licensed hypervisor hosts allows you to
    create two virtual machines with Windows Server 2012/R2 Standard Guest OS without
    purchasing any additional licensing. Licensing downgrade rights apply for running
    VM with Windows Server 2008 R2 OS.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Server的Standard和Data Center版本是基于处理器授权的，每两个处理器需要一份许可证。两者提供相同的功能集，主要的区别在于虚拟化权限。Standard版本允许运行两个Windows
    Server操作系统虚拟机，而Data Center版本则没有数量限制。以Windows Server 2012 R2 Standard版本为例，授权的虚拟化平台可以创建两个虚拟机，运行Windows
    Server 2012/R2 Standard来宾操作系统，无需购买额外的许可。对于运行Windows Server 2008 R2操作系统的虚拟机，许可降级权限适用。
- en: Choosing the right edition for your cloud
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为您的云选择合适的版本
- en: Choosing the right edition depends upon the type and number of operating systems
    in the cloud infrastructure. It's recommended to go with the Data center edition
    if virtualized workload includes Windows as Guest OS majorly. Standard edition
    can be helpful and budgetary while the number of virtual machines with Windows
    OS isn't high.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 选择合适的版本取决于云基础设施中操作系统的类型和数量。如果虚拟化工作负载主要包括Windows作为来宾操作系统，建议选择Data Center版本。如果虚拟机中的Windows操作系统数量不高，Standard版本既实用又更具预算友好性。
- en: As a best possible solution, in a large infrastructure combination of both Standard
    and Data center editions can be utilized depending on the OS of virtualized workload.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 作为最佳解决方案，在大型基础设施中，可以根据虚拟化工作负载的操作系统，灵活使用Standard和Data Center版本的组合。
- en: While for organizations it will depend on workload nature if it is Windows or
    non-Windows to choose the right edition, server providers can use a combination
    of both Data center/Standard edition to service customers' requests for both Windows
    and non-Windows infra requirements.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 对于组织而言，选择合适的版本取决于工作负载的性质，是Windows还是非Windows系统。服务器提供商可以使用Data Center和Standard版本的组合来满足客户对Windows和非Windows基础设施需求的请求。
- en: Tip
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Refer to the Windows Server 2012 product and edition comparison guide on [http://www.microsoft.com/](http://www.microsoft.com/)
    for detailed comparison between various Windows editions.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考[http://www.microsoft.com/](http://www.microsoft.com/)上的Windows Server 2012产品和版本对比指南，以获得各个Windows版本之间的详细比较。
- en: Free Microsoft Hyper-V Server 2012 R2
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 免费的Microsoft Hyper-V Server 2012 R2
- en: Microsoft Hyper-V Server 2012 R2 (also known as Standalone Hyper-V) is a free
    (yes, completely free) edition of Microsoft's proprietary hypervisor. It is a
    stripped down version of Windows Server operating system comprising only hypervisor
    and virtualization capabilities, Windows Server drivers, and supporting components
    such as cluster capabilities. Free Hyper-V version doesn't include any additional
    Windows feature apart from hypervisor, making it available with less footprint,
    management burden, and attack surface.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Hyper-V Server 2012 R2（也称为独立Hyper-V）是Microsoft专有虚拟化技术的免费版本（是的，完全免费）。它是Windows
    Server操作系统的精简版，仅包含虚拟化技术、Windows Server驱动程序及支持组件，如集群功能。免费Hyper-V版本不包括任何除了虚拟化技术以外的Windows功能，从而使得它的占用空间更小、管理负担更轻、攻击面更小。
- en: Free Hyper-V Server 2012 R2 provides free access to Hyper-V virtualization capabilities
    only, virtual machine guest OS licensing has to be separately considered. If you
    are running Windows Server OS inside a virtual machine, it's a good idea to use
    Standard or Data center edition depending upon the count of Windows VMs. This
    edition can be helpful in scenarios where Guest OS inside VMs wouldn't be Windows.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 免费的Hyper-V Server 2012 R2仅提供Hyper-V虚拟化功能，虚拟机的客户操作系统许可需要另行考虑。如果你在虚拟机中运行Windows
    Server操作系统，建议根据Windows虚拟机的数量使用标准版或数据中心版。此版本对于虚拟机内客户操作系统非Windows的情况非常有用。
- en: A major use case of free Hyper-V Server is to be utilized by organizations or
    service providers for hosting non-Windows workloads.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 免费Hyper-V服务器的一个主要应用场景是供组织或服务提供商用于托管非Windows工作负载。
- en: Note
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Ensure to check for the supportability of the free Hyper-V version while extending
    WAP cloud solution with custom offerings or partner provided solutions.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在通过定制产品或合作伙伴提供的解决方案扩展WAP云解决方案时，务必检查免费Hyper-V版本的支持性。
- en: Microsoft Hyper-V is the best choice for a WAP-based cloud solution, though
    there are integration possibilities with other hypervisor's vendors such as VMware
    and Citrix. See product specific guidelines to choose the edition and deployment
    model along with the supportability matrix of features while choosing VMware or
    Citrix.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft Hyper-V是基于WAP的云解决方案的最佳选择，尽管也可以与其他虚拟化技术供应商（如VMware和Citrix）进行集成。查看特定产品指南，以选择版本和部署模型，并在选择VMware或Citrix时查看功能的支持矩阵。
- en: Choosing the system center deployment options and edition
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择系统中心的部署选项和版本
- en: 'Microsoft System Center 2012 R2 is the core management component for delivering
    cloud services in a WAP-based cloud solution. System Center products can be deployed
    in multiple ways such as:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft System Center 2012 R2是提供基于WAP的云服务的核心管理组件。系统中心产品可以通过多种方式进行部署，例如：
- en: Physical or virtual machines
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 物理机或虚拟机
- en: Standalone or high availability mode (product dependent)
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 独立模式或高可用模式（取决于产品）
- en: System Center components requires Windows Server as an operating system to run.
    It can be in a virtual machine or a physical server. Since we virtualize every
    piece of our cloud management and tenant workload, it doesn't make sense to keep
    system center components on physical servers unless there is some specific requirement
    or exception.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 系统中心组件需要Windows Server作为操作系统来运行。它可以部署在虚拟机中，也可以部署在物理服务器上。由于我们将所有云管理和租户工作负载虚拟化，因此除非有特定需求或例外情况，否则没有必要将系统中心组件部署在物理服务器上。
- en: For both organizations and service providers, it is recommended to deploy system
    center components inside virtual machines to take the advantage of hypervisor
    level HA and other capabilities.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 对于组织和服务提供商，建议将系统中心组件部署在虚拟机中，以便利用虚拟化技术的高可用性和其他功能。
- en: Along with hypervisor HA, deploying servers in Guest OS or app level HA adds
    additional benefits such as application level failure detection and load balancing.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 除了Hyper-V的高可用性，部署虚拟机内的客户操作系统或应用级高可用性还可以带来额外的好处，如应用级故障检测和负载均衡。
- en: System Center products can be deployed in OS/app level cluster or redundant
    mode.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 系统中心产品可以部署在操作系统/应用级集群或冗余模式下。
- en: Organizations or service providers can choose a combination of standalone or
    HA mode products depending upon their availability business and technical requirements.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 组织或服务提供商可以根据其可用性业务和技术要求选择独立模式或高可用模式的产品组合。
- en: System Center editions
  id: totrans-86
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 系统中心版本
- en: System Center is available as a suite in two editions. When you buy a System
    Center suite you are entitled to use all components (except SCCM) depending upon
    licensing.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 系统中心以套件形式提供，包含两个版本。购买系统中心套件后，您可以根据许可使用所有组件（SCCM除外）。
- en: 'The two editions of the System Center suites are as follows:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 系统中心套件的两个版本如下：
- en: System Center Standard edition
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统中心标准版
- en: System Center Data center edition
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统中心数据中心版
- en: Licensing is required only for a number of endpoints being managed by system
    center components. There is no licensing required for running the system center
    components. Licensing is available in a similar fashion with Windows Server that
    is a processor-based licensing (two products per license). There is no difference
    in terms of features with Standard and Data center editions; the difference lies
    in the number of virtual instances you can manage with Standard and Data center
    editions. With Standard edition, two **OSEs** (**Operating System Environments**)
    can be managed by the System Center and is unlimited in the case of Data center
    edition. Microsoft licensing policy may change from time to time and depending
    upon agreements such as EA/SA and so on. It is recommended to touch base with
    Microsoft for planning licenses and editions.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 许可仅在通过系统中心组件管理一定数量的端点时才需要。运行系统中心组件不需要许可。许可方式与Windows Server类似，是基于处理器的许可（每个许可包含两个产品）。标准版和数据中心版在功能上没有差别，差别在于你可以管理的虚拟实例数量。使用标准版时，系统中心可以管理两个**OSEs**（**操作系统环境**），而数据中心版则没有此限制。微软的许可政策可能会有所变化，具体取决于EA/SA等协议。因此，建议与微软联系，以规划许可和版本。
- en: Tip
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Refer the *How to buy System Center 2012 R2* page on Microsoft's official website
    to know more on licensing and comparisons.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考微软官方网站上的*如何购买System Center 2012 R2*页面，了解更多关于许可和版本对比的信息。
- en: Choosing the right edition for System Center for organizations and service providers
    directly corresponds to the edition chosen for Windows Server. It's good to go
    with System Center Data center edition to manage Windows Server Data center edition
    and vice versa to enable a consistent feature set and flexibilities.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 为组织和服务提供商选择合适的System Center版本与选择Windows Server版本直接相关。选择System Center数据中心版来管理Windows
    Server数据中心版，反之亦然，这样可以实现一致的功能集和灵活性。
- en: Note
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The licensing details given are up to the date of writing this chapter; licensing
    policies may change in future, and it is advised to consult while planning for
    licensing and editions.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 所给出的许可详情是根据撰写本章时的最新信息；许可政策可能会发生变化，建议在规划许可和版本时咨询相关信息。
- en: Cloud management infra and tenant workload infrastructure
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 云管理基础设施和租户工作负载基础设施
- en: 'A cloud infrastructure is usually segregated in two categories, cloud management
    and tenant workload. Let''s have a look at these two:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 云基础设施通常分为两个类别：云管理和租户工作负载。我们来看看这两者：
- en: '**Cloud Management Infrastructure**: Management infrastructure or management
    cluster is used to host virtual machines for cloud management components such
    as Windows Azure Pack server and system center components. It is recommended to
    have a separate hypervisor cluster dedicatedly for hosting cloud management workload.
    The sizing of the management cluster would depend upon the number of services
    offered and the size of tenant workload to be managed.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**云管理基础设施**：管理基础设施或管理集群用于托管云管理组件的虚拟机，如Windows Azure Pack服务器和系统中心组件。建议为云管理工作负载专门设置独立的虚拟化集群。管理集群的规模取决于提供的服务数量以及需要管理的租户工作负载的大小。'
- en: '**Tenant Workload Infrastructure**: Tenant workload infrastructure is used
    for hosting customers'' cloud resources such as virtual machines and databases.
    Tenant workload infrastructure has to be designed keeping available cloud services,
    QoS and SLAs in mind.'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**租户工作负载基础设施**：租户工作负载基础设施用于托管客户的云资源，如虚拟机和数据库。租户工作负载基础设施的设计必须考虑到可用的云服务、服务质量（QoS）和服务等级协议（SLA）。'
- en: Core MS infrastructure services planning
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 核心微软基础设施服务规划
- en: 'Microsoft''s WAP-based cloud solution uses core Microsoft core infrastructure
    services such as Active Directory, DNS, DHCP, and so on for foundation operations
    such as authentication and more. These core infrastructure services have to be
    deployed with product specific guidelines and industry best practices to ensure
    availability and efficiency . Let''s have a look at the core services and the
    deployment best practices:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 微软基于 WAP 的云解决方案使用微软核心基础设施服务，如 Active Directory、DNS、DHCP 等，进行认证等基础操作。这些核心基础设施服务必须遵循产品特定的指南和行业最佳实践，以确保可用性和效率。接下来，我们来看看核心服务及其部署最佳实践：
- en: '**Active Directory**: Microsoft AD is the most critical component of most of
    MS infrastructure solutions including WAP cloud solution. AD is used for authentication,
    authorization along with other capabilities in WAP cloud. AD deployment can be
    planned with redundancy (deploying additional domain controllers) and security
    best practices. Regular backup and disaster recovery should be planned for Active
    Directory infrastructure.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Active Directory**：微软的 AD 是大多数 MS 基础设施解决方案中最关键的组成部分，包括 WAP 云解决方案。AD 用于认证、授权及
    WAP 云中的其他功能。AD 部署可以通过冗余（部署额外的域控制器）和安全最佳实践进行规划。应规划定期备份和灾难恢复，以确保 Active Directory
    基础设施的安全。'
- en: '**DNS**: Usually co-located with AD, DNS provides name resolution for the entire
    cloud. DNS failure may cause entire cloud failure, hence it needs to be planned
    to ensure every time availability and security from attacks. Regular backup and
    DR should be planned.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DNS**：通常与 AD 一同部署，DNS 为整个云提供名称解析。DNS 故障可能导致整个云系统故障，因此需要进行规划，确保每次都能保证可用性，并防止受到攻击。应规划定期备份和灾难恢复。'
- en: '**NTP**: Another crucial component of any cloud or any IT solution, NTP ensures
    time synchronization among all cloud resources. Time lag may cause the entire
    cloud solution to fail as well as incorrect billing. The NTP device must be highly
    available as well as accurate. All components should be configured to use the
    same NTP device. Domain joined Windows operating systems utilize the domain controller
    (PDC role) for time synchronization.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**NTP**：任何云计算或 IT 解决方案的另一个关键组成部分，NTP 确保所有云资源的时间同步。时间延迟可能导致整个云解决方案失败以及账单错误。NTP
    设备必须具备高可用性和准确性。所有组件应配置为使用相同的 NTP 设备。加入域的 Windows 操作系统使用域控制器（PDC 角色）进行时间同步。'
- en: Tip
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Follow Microsoft's guidelines while virtualizing domain controllers holding
    NTP role. See [https://technet.microsoft.com/en-us/library/virtual_active_directory_domain_controller_virtualization_hyperv%28v=ws.10%29.aspx](https://technet.microsoft.com/en-us/library/virtual_active_directory_domain_controller_virtualization_hyperv%28v=ws.10%29.aspx)
    to know more.
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在虚拟化持有 NTP 角色的域控制器时，遵循微软的指南。详细信息请参见 [https://technet.microsoft.com/en-us/library/virtual_active_directory_domain_controller_virtualization_hyperv%28v=ws.10%29.aspx](https://technet.microsoft.com/en-us/library/virtual_active_directory_domain_controller_virtualization_hyperv%28v=ws.10%29.aspx)。
- en: '**DHCP**: Dynamic Host Configuration Protocol can be utilized for Dynamic IP
    address allocation and management. The deployment of DHCP should be highly available
    and efficient for serving cloud IP address requirements.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DHCP**：动态主机配置协议（DHCP）可以用于动态分配和管理 IP 地址。DHCP 的部署应具备高可用性并高效地满足云的 IP 地址需求。'
- en: '**Other infrastructure supporting services (PXE Boot server, IPAM and so on)**:
    Depending upon deployment and use cases other MS services such as PXE boot and
    deployment server for bare metal provisioning or network boot, WSUS or SCCM for
    patch management, IPAM for IP address management, jump servers for centralized
    access, security products should be deployed in an efficient and highly available
    manner as applicable.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**其他基础设施支持服务（PXE 引导服务器、IPAM 等）**：根据部署和使用案例，其他微软服务如 PXE 引导和裸机供应或网络引导的部署服务器，WSUS
    或 SCCM 用于补丁管理，IPAM 用于 IP 地址管理，跳板机用于集中访问，安全产品应根据需要以高效且高可用的方式进行部署。'
- en: Tip
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Planning and deployment options for cloud network and storage shall be discussed
    in the coming topics in this chapter.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 云网络和存储的规划与部署选项将在本章的后续主题中讨论。
- en: Hyper-V deployment best practices
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Hyper-V 部署最佳实践
- en: Hypervisor is the core foundation of WAP-based cloud infrastructure as every
    virtual machine including management workload VMs such as WAP admin/tenant portal
    VM, SCVMM, SPF will be running inside a VM on Hyper-V host only. Let's have a
    look at a few of the deployment best practices of Hyper-V Server.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟化管理程序是基于 WAP 的云基础设施的核心基础，因为每个虚拟机，包括管理工作负载虚拟机，如 WAP 管理/租户门户虚拟机、SCVMM、SPF 都将在
    Hyper-V 主机上的虚拟机内运行。让我们看看 Hyper-V 服务器的一些部署最佳实践。
- en: It is recommended to maintain symmetry in terms of configuration, best practices
    applied across all Hyper-V hosts. SCVMM and AD group policies can be used to configure
    and manage Hyper-V configurations and policies across all the hosts.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 建议在所有 Hyper-V 主机中保持配置上的一致性，应用相同的最佳实践。可以使用 SCVMM 和 AD 组策略来配置和管理所有主机的 Hyper-V
    配置和策略。
- en: Centralized management is the key element in every cloud solution.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 集中管理是每个云解决方案的关键元素。
- en: Hyper-V installation best practices
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Hyper-V 安装最佳实践
- en: Though Windows Server 2012 R2 Hyper-V installation is quite straightforward.
    It's recommended to follow best practices of Hyper-V installation for a smooth
    and stable virtualized infrastructure.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管 Windows Server 2012 R2 Hyper-V 的安装过程相当简单，但还是建议遵循 Hyper-V 安装的最佳实践，以确保虚拟化基础架构的顺利和稳定运行。
- en: 'Best practices for hypervisor installation are as follows:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟化管理程序安装的最佳实践如下：
- en: '**Supported hardware and latest hardware firmware**: It is recommended to use
    supported hardware for proven performance and stability. Always ensure to update
    the firmware of the server''s hardware or chassis or blades as applicable.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**支持的硬件和最新硬件固件**：建议使用经过验证性能和稳定性的支持硬件。始终确保更新服务器硬件、机箱或刀片的固件（视情况而定）。'
- en: '**Install OS using hardware vendor provided tools**: Major server hardware
    vendors provide their proprietary tools for installing operating system such as
    HP intelligent provisioning. This ensures that the hypervisor is deployed with
    proper hardware-specific drivers and integration tools.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用硬件供应商提供的工具安装操作系统**：主要服务器硬件供应商提供其专有工具来安装操作系统，如 HP 智能配置工具。这样可以确保虚拟化管理程序以正确的硬件特定驱动程序和集成工具部署。'
- en: '**Choose correct deployment option**: In a cloud infrastructure, it is recommended
    to use the Server Core version to utilize the benefits of the Server Core deployment,
    such as less disk footprint and attack surface, which reduces management and updates
    burden. If you deploy the Server with GUI, it is advised to remove all unnecessary
    components.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选择正确的部署选项**：在云基础架构中，建议使用 Server Core 版本，以利用 Server Core 部署的优势，例如更小的磁盘占用和攻击面，从而减少管理和更新负担。如果部署带
    GUI 的服务器，建议移除所有不必要的组件。'
- en: '**Latest device drivers**: Use the latest device drivers for hardware devices
    regardless of the proprietary and commodity hardware.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最新设备驱动程序**：使用最新的设备驱动程序，无论是专有硬件还是商品硬件。'
- en: '**Windows updates**: Ensure to update the hypervisor with the latest patches
    and service packs that are available. It is recommended to have patch management
    solutions deployed for ensuring the continuous deployment of the latest hot fixes.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 更新**：确保使用最新的补丁和服务包来更新虚拟化管理程序。建议部署补丁管理解决方案，以确保持续部署最新的修补程序。'
- en: '**Page file**: Hyper-V server automatically manages page file size as per the
    physical memory that is installed in the system. It should be set to **System
    Managed**.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**页面文件**：Hyper-V 服务器会根据系统中安装的物理内存自动管理页面文件大小。应将其设置为**系统管理**。'
- en: '**Windows firewall**: Configure Windows firewall rules as per environmental
    requirements. An organization may choose to disable the firewall if the port level
    access is being managed by network firewalls.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 防火墙**：根据环境需求配置 Windows 防火墙规则。如果端口级访问由网络防火墙管理，组织可以选择禁用防火墙。'
- en: '**Hypervisor hardening and VA**: Apply standard security policies as per the
    organization''s defined standard. Perform necessary vulnerability assessments
    and remediation as per the organization''s policies.'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟化管理程序硬化和 VA**：根据组织定义的标准应用标准安全策略。根据组织的政策进行必要的漏洞评估和修复。'
- en: '**Naming convention and domain**: Ensure to follow the proper hostname convention
    and join the domain wherever applicable. For cluster nodes, it is required to
    join hosts to the domain.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**命名约定和域**：确保遵循正确的主机名约定，并在适用时加入域。对于集群节点，必须将主机加入域。'
- en: Hyper-V networking best practices
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Hyper-V 网络最佳实践
- en: 'Best practices for Hyper-V networking are as follows:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: Hyper-V 网络的最佳实践如下：
- en: '**Separate network for Hyper-V and VM network traffic**: A separate physical
    and logical network should be considered for management traffic such as host management
    and live migration, and another for virtual machine traffic as per the VM network
    zone such as internal, DMZ, and so on.'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**为 Hyper-V 和虚拟机网络流量分配独立网络**：应考虑为管理流量（如主机管理和实时迁移）分配一个独立的物理和逻辑网络，并为虚拟机流量根据虚拟机网络区（如内部、DMZ
    等）分配另一个独立的网络。'
- en: '**Configure redundancy at physical network path**: Configure at least two NIC
    adaptors connecting to two different network switch in each network team. Ensure
    not to have any single point of failure.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在物理网络路径中配置冗余**：为每个网络团队配置至少两个网卡适配器，分别连接到两个不同的网络交换机。确保避免单点故障。'
- en: '**Configure teaming and load balancing policies**: Windows Server 2012 /R2
    provides multiple load balancing policies(Hyper-V port, address hash, dynamic
    balancing, and so on) which provides maximum performance and reliability for Hyper-V
    network. Ensure to configure proper NIC teaming load balancing policies.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**配置网卡聚合和负载均衡策略**：Windows Server 2012 / R2 提供了多种负载均衡策略（Hyper-V 端口、地址哈希、动态负载均衡等），能够为
    Hyper-V 网络提供最大性能和可靠性。确保配置合适的网卡聚合负载均衡策略。'
- en: '**Separate network for IP storage traffic**: It is recommended to use a separate
    physical and logical network for IP based storage traffic such as iSCSI, SMB,
    and so on.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**为 IP 存储流量分配独立网络**：建议为基于 IP 的存储流量（如 iSCSI、SMB 等）使用独立的物理和逻辑网络。'
- en: '**Implement network QoS**: Use the Hyper-V network **Quality of Service** (**QoS**)
    feature to ensure that no single VM becomes the network bandwidth constraints
    for other VMs. It becomes important to implement QOD in a WAP-based cloud solution
    to ensure providing request network bandwidth to tenants'' virtual machines as
    per their plan and subscription.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实施网络 QoS**：使用 Hyper-V 网络 **服务质量（Quality of Service，QoS）** 功能，确保单个虚拟机不会成为其他虚拟机网络带宽的瓶颈。在基于
    WAP 的云解决方案中，实施 QoS 变得至关重要，确保根据租户的计划和订阅为其虚拟机提供请求的网络带宽。'
- en: '**Monitor network usage**: Monitor Hyper-V network virtualization continuously
    to plan to get insight of network usage and plan for future scalability.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控网络使用情况**：持续监控 Hyper-V 网络虚拟化，以便获取网络使用情况的洞察并规划未来的可扩展性。'
- en: '**Use SDN (Software Defined Networking)**: This is not a Hyper-V networking
    best practice, but looking at cloud solution using SDN, aka network virtualization,
    can enable automated provisioning, management and flexibilities for cloud networking.'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用 SDN（软件定义网络）**：这不是 Hyper-V 网络的最佳实践，但通过使用 SDN（即网络虚拟化）来查看云解决方案，可以实现云网络的自动化配置、管理和灵活性。'
- en: Hyper-V storage deployment best practices
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Hyper-V 存储部署最佳实践
- en: 'Best practices for Hyper-V storage deployment are as follows:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: Hyper-V 存储部署的最佳实践如下：
- en: '**Ensure redundancy for storage path**: Use multipath IO for storage paths.
    Eliminate any single point of failure at server port, storage port, or SAN switch
    and so on. Configure multipathing policies as per SAN provider guidelines for
    reliability and efficiency.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**确保存储路径冗余**：为存储路径使用多路径 I/O。消除服务器端口、存储端口或 SAN 交换机等处的任何单点故障。根据 SAN 提供商的指导方针配置多路径策略，以提高可靠性和效率。'
- en: '**Using vhdx**: New virtual disk file format that is vhdx was introduced with
    Windows Server 2012\. VHD provides multiple benefits over older format VHD in
    terms of performance and reliability. Use vhdx instead of vhd unless exceptionally
    required.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用 vhdx**：Windows Server 2012 引入了新的虚拟磁盘文件格式 vhdx。与旧版 vhd 格式相比，vhdx 在性能和可靠性方面具有多项优势。除非特殊需要，否则应使用
    vhdx 而非 vhd。'
- en: '**Size volumes and CSV properly**: Sizing workload VMs is important in terms
    of capacity and IOPS. Oversized volumes may cause performance and outage issues.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**正确设置磁盘和CSV大小**：在容量和 IOPS（每秒输入输出操作次数）方面，虚拟机的磁盘大小设置非常重要。过大的磁盘可能会导致性能问题和停机故障。'
- en: '**Implement storage QoS**: Use Hyper-V storage quality of service feature to
    ensure that no single VM becomes the storage performance constraints for other
    VMs with respect to IOPS. It is a must for a WAP-based cloud solution to ensure
    providing requested storage IOPS to tenants'' virtual machines as per their plan
    and subscription.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实施存储 QoS**：使用 Hyper-V 存储服务质量功能，确保单个虚拟机不会成为其他虚拟机在 IOPS 方面的存储性能瓶颈。对于基于 WAP
    的云解决方案，必须确保根据租户的计划和订阅为其虚拟机提供请求的存储 IOPS。'
- en: '**Monitor storage usage**: Monitor Hyper-V storage continuously for capacity
    and performance to plan to get insight of network usage and plan for future scalability.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控存储使用情况**：持续监控 Hyper-V 存储的容量和性能，以便获得网络使用情况的洞察并为未来的可扩展性做好规划。'
- en: '**Use SDS/SMI-S/SMP integrations**: This is not a Hyper-V storage best practice,
    but from a cloud prospective it is recommended to use SDS (Software Defined Storage),
    SMI-S provider array integration for better provisioning, management and automation
    for cloud storage.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用SDS/SMI-S/SMP集成**：这不是Hyper-V存储最佳实践，但从云的角度来看，建议使用SDS（软件定义存储）、SMI-S提供商阵列集成，以便更好地进行云存储的配置、管理和自动化。'
- en: Hyper-V virtual machine deployment best practices
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Hyper-V虚拟机部署最佳实践
- en: 'Best practices for Hyper-V virtual machine deployment are as follows:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: Hyper-V虚拟机部署的最佳实践如下：
- en: '**Properly sizing of VM Compute**: A greater number of virtual CPUs doesn''t
    guarantee more performance, assign CPUs to VMs as per actual application requirements.
    The same goes for memory. Ensure not to oversize or undersize virtual machines.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**正确规划虚拟机计算资源**：更多的虚拟CPU并不保证更高的性能，应该根据实际的应用需求为虚拟机分配CPU。内存也是如此，确保虚拟机不会超配或配备不足。'
- en: '**Use Generation-2 VM**: Generation 2 VMs provide multiple features over Generation-1
    VMs such as UEFI boot, synthetic hardware, faster installation and booting time
    and more. It is recommended to use Generation-2 VMs unless specifically required.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用第二代虚拟机**：第二代虚拟机提供了比第一代虚拟机更多的功能，如UEFI启动、合成硬件、更快的安装和启动时间等。除非特别要求，建议使用第二代虚拟机。'
- en: '**Use dynamic memory**: It is recommended to use dynamic memory to make the
    most out of physical RAM available in your server. Using dynamic memory in a large
    cloud environment can help in increasing host density. It is recommended to plan
    carefully while using dynamic memory to avoid any performance hit on any of the
    virtual machines or hosts.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用动态内存**：建议使用动态内存，以充分利用服务器中可用的物理内存。在大规模云环境中使用动态内存有助于提高主机密度。建议在使用动态内存时进行仔细规划，以避免对虚拟机或主机的性能产生负面影响。'
- en: '**Use non-uniform memory access (NUMA) if supported**: NUMA helps virtual machines
    having multiple virtual CPUs assigned to scale and perform better by facilitating
    it to use local cache and memory bus of the CPU executing its instruction. NUMA
    is dependent upon hardware architecture.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**如果支持，使用非统一内存访问（NUMA）**：NUMA帮助分配多个虚拟CPU的虚拟机通过使用执行指令的CPU的本地缓存和内存总线，来扩展性能并提高性能。NUMA取决于硬件架构。'
- en: '**Remove unused virtual hardware**: It''s recommended to use unused virtual
    hardware such as a floppy drive and so on.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移除未使用的虚拟硬件**：建议移除未使用的虚拟硬件，例如软盘驱动器等。'
- en: '**Use proper integration services**: Integration service are installed inside
    guest operating systems to make those virtualization aware and avail features
    such as graceful shutdown from Hyper-V manager, time sync, data exchange and so
    on. All the latest Windows operating systems by default include integration service,
    for non-Windows OS it may be required to manually install integration services.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用适当的集成服务**：集成服务安装在客户操作系统中，使其具备虚拟化意识，并可启用例如从Hyper-V管理器进行平滑关机、时间同步、数据交换等功能。所有最新的Windows操作系统默认包括集成服务，对于非Windows操作系统，可能需要手动安装集成服务。'
- en: '**Monitor virtual machine usage**: Monitor VM usage continuously for compute
    and take necessary corrective action for oversized and undersized virtual machines.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控虚拟机使用情况**：持续监控虚拟机的计算资源使用情况，并对过度配置或配置不足的虚拟机采取必要的纠正措施。'
- en: Hyper-V cluster and mobility deployment best practices
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Hyper-V集群与迁移部署最佳实践
- en: 'Best practices for Hyper-V cluster and mobility deployment are as follows:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: Hyper-V集群和迁移部署的最佳实践如下：
- en: '**Cluster Validation Report**: Microsoft Windows'' failover cluster provides
    features to examine the nodes with respect to Hyper-V configuration, inventory,
    network, storage and system configuration before deploying a cluster. Any error
    or warning produced by validation check should be remediated with the necessary
    corrective actions. Successfully validated cluster is the key to smooth Hyper-V
    HA functionalities.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**集群验证报告**：Microsoft Windows的故障转移集群提供功能，用于在部署集群之前检查节点的Hyper-V配置、清单、网络、存储和系统配置。验证检查产生的任何错误或警告应通过必要的纠正措施进行修复。成功验证的集群是实现顺利Hyper-V高可用功能的关键。'
- en: '**Use SCVMM to deploy and manage highly available virtual machines**: This
    isn''t particularly related to Hyper-V cluster best practice, but for a cloud
    solution it is recommended to deploy and manage Hyper-V cluster and mobility via
    SCVMM.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用SCVMM部署和管理高可用虚拟机**：这与Hyper-V集群最佳实践没有直接关系，但对于云解决方案，建议通过SCVMM部署和管理Hyper-V集群及迁移。'
- en: '**Use separate network for live migration**: It is recommended to use separate
    physical and logical network live migration traffic for reliability and performance.'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用独立网络进行实时迁移**：建议为实时迁移流量使用独立的物理和逻辑网络，以确保可靠性和性能。'
- en: '**Cluster Aware Updating**: It is recommended to use CAU for patching and upgrading
    cluster nodes. With this organizations and service providers can ensure no outages
    to end customers during the patching of hypervisors. WSUS can be integrated with
    VMM to automate updates to Hyper-V hosts.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**集群感知更新**：建议使用 CAU 进行集群节点的修补和升级。这样，组织和服务提供商可以确保在修补 Hyper-V 管理程序时不会影响终端客户的服务。WSUS
    可以与 VMM 集成，自动更新 Hyper-V 主机。'
- en: Setting up virtual machines for cloud management fabric
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置用于云管理架构的虚拟机
- en: Enough of planning and best practices, it is time to get things in action. Let
    us setup virtual machines to host our cloud infrastructure. These VMs shall host
    cloud management infrastructure and be hosted on the cloud management cluster.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 经过充分规划和最佳实践后，是时候开始动手了。让我们设置虚拟机来托管我们的云基础架构。这些虚拟机将托管云管理架构，并部署在云管理集群中。
- en: Create a user in Active Directory for joining these servers into the Active
    Directory domain.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Active Directory 中创建用户，以将这些服务器加入 Active Directory 域。
- en: Note
  id: totrans-163
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Add one redundant VM for each type of VM below, except WAP server (see [Chapter
    1](part0015_split_000.html#E9OE1-b479cf466c26404ca54119871a9b2715 "Chapter 1. Know
    Windows Azure Pack and Its Architecture"), *Know Windows Azure Pack and Its Architecture*,
    for WAP HA), to provide highly available fabric. See product specific guidelines
    for configuring HA for respective components.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 为下述每种类型的虚拟机添加一个冗余虚拟机，WAP 服务器除外（参见[第1章](part0015_split_000.html#E9OE1-b479cf466c26404ca54119871a9b2715
    "第1章. 了解 Windows Azure Pack 及其架构")，*了解 Windows Azure Pack 及其架构*，了解 WAP 高可用性），以提供高可用性架构。请参阅产品特定指南，配置各组件的高可用性。
- en: '| Sr. Num | VM Name | Compute Configuration | Purpose of VM |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| 序号 | 虚拟机名称 | 计算配置 | 虚拟机用途 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| 1 | WAPMGT-SQLDB-01 | 4 CPU, 12 GB RAM | Host SQL databases for entire WAP
    solution database needs |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| 1 | WAPMGT-SQLDB-01 | 4 CPU，12 GB RAM | 托管整个 WAP 解决方案数据库的 SQL 数据库 |'
- en: '| 2 | WAPMGTSCVMM-01* | 4 CPU, 12 GB RAM | System Center Virtual Machine Manager
    |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| 2 | WAPMGTSCVMM-01* | 4 CPU，12 GB RAM | System Center 虚拟机管理器 |'
- en: '| 3 | WAPMGT-SCSPF-01 | 2 CPU, 8GB RAM | Service Provider Foundation |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| 3 | WAPMGT-SCSPF-01 | 2 CPU，8GB RAM | 服务提供商基础架构 |'
- en: '| 4 | WAPMGT-SCSMA-01 | 2 CPU, 8 GB RAM | Service Management Automation |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '| 4 | WAPMGT-SCSMA-01 | 2 CPU，8 GB RAM | 服务管理自动化 |'
- en: '| 5 | WAPMGT-ACRDG-01 | 2 CPU, 8 GB RAM | Remote Desktop Gateway Server for
    providing Azure Console Connect |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '| 5 | WAPMGT-ACRDG-01 | 2 CPU，8 GB RAM | 提供 Azure 控制台连接的远程桌面网关服务器 |'
- en: '| 6 | WAPMGT-WAPSR-01 | 2 CPU, 8 GB RAM | Windows Azure Pack (Express Installation
    Model) |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| 6 | WAPMGT-WAPSR-01 | 2 CPU，8 GB RAM | Windows Azure Pack（Express 安装模型） |'
- en: Note
  id: totrans-173
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: These VM configuration used in this book is only for evaluation purpose, follow
    guidelines discussed in [Chapter 1](part0015_split_000.html#E9OE1-b479cf466c26404ca54119871a9b2715
    "Chapter 1. Know Windows Azure Pack and Its Architecture"), *Know Windows Azure
    Pack and Its Architecture* and this chapter along with product specific documentation
    for production deployment.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用的虚拟机配置仅供评估使用，请遵循[第1章](part0015_split_000.html#E9OE1-b479cf466c26404ca54119871a9b2715
    "第1章. 了解 Windows Azure Pack 及其架构")，*了解 Windows Azure Pack 及其架构*以及本章内容，并结合产品特定文档进行生产部署。
- en: 'All VMs mentioned above shall be configured with the following common settings:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 上述所有虚拟机应配置以下通用设置：
- en: 127 GB disk (dynamic expanding disk)
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 127 GB 磁盘（动态扩展磁盘）
- en: Windows Server 2012 R2 DC/STD edition operating system
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows Server 2012 R2 DC/STD 版操作系统
- en: Single NIC card connected to Hyper-V virtual switch (external)
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接到 Hyper-V 虚拟交换机（外部）的单 NIC 卡
- en: Dynamic memory not being used
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不使用动态内存
- en: All integration services available
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用所有集成功能
- en: Highly available in a Hyper-V cluster (recommended, not mandatory)
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Hyper-V 集群中高度可用（推荐，非强制）
- en: 'The post VM deployment steps are as follows:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机部署后的步骤如下：
- en: Active Windows operating system
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 活动 Windows 操作系统
- en: Assign static IPv4 address
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分配静态 IPv4 地址
- en: Assign hostname as per naming convention
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按命名规范分配主机名
- en: Join the server to domain
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将服务器加入域
- en: Turn off Windows firewall or create firewall rules as applicable
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关闭 Windows 防火墙或根据需要创建防火墙规则
- en: Planning and deploying SQL Server for cloud management DB
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为云管理数据库规划和部署 SQL Server
- en: All components of Windows Azure Pack and system center uses SQL Server database
    to store its configuration, run time data, historical usage data etc. Failure
    of the database is directly proportional to the failure of respective components.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Azure Pack 和系统中心的所有组件都使用 SQL Server 数据库来存储其配置、运行时数据、历史使用数据等。数据库的故障与相应组件的故障直接相关。
- en: Choosing the database server version and deployment model
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择数据库服务器版本和部署模型
- en: 'In a bare minimum deployment, this SQL Server for management databases shall
    be used by the following components:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在最小部署的情况下，以下组件将使用该 SQL Server 来管理数据库：
- en: Windows Azure Pack components
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows Azure Pack 组件
- en: SCVMM
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SCVMM
- en: SPF
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SPF
- en: SMA
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SMA
- en: While choosing the database version a deployment model, supportability and compatibility
    has to be aligned with respect to each of the components mentioned previously.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在选择数据库版本和部署模型时，必须根据先前提到的各个组件的支持性和兼容性进行对齐。
- en: 'Windows Azure Pack supports the following MS SQL Server versions for managing
    databases:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Azure Pack 支持以下 MS SQL Server 版本来管理数据库：
- en: MS SQL Server 2008 Service Pack 3
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MS SQL Server 2008 Service Pack 3
- en: MS SQL Server 2008 R2 Service Pack 2
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MS SQL Server 2008 R2 Service Pack 2
- en: MS SQL Server 2012 Service Pack 1
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MS SQL Server 2012 Service Pack 1
- en: MS SQL Server 2012 Service Pack 2
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MS SQL Server 2012 Service Pack 2
- en: MS SQL Server 2014
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MS SQL Server 2014
- en: System Center 2012 R2 has different SQL Server version support differentiating
    upon components. Taking the common and latest, MS SQL 2012 SP1 is the supported
    SQL version for Windows Azure Pack and all System Center products, MS SQL 2012
    SP2 and MS SQL 2014 is supported for WAP components and all System Center 2012
    R2 components except app controller. Organizations or cloud providers can choose
    between SQL 2012 SP1, SQL 2012 SP2 and SQL 2014 depending upon the components
    installed.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: System Center 2012 R2 对不同组件支持不同的 SQL Server 版本。以常见和最新版本为例，Windows Azure Pack
    和所有 System Center 产品支持 MS SQL 2012 SP1，WAP 组件和所有 System Center 2012 R2 组件（除了应用控制器）支持
    MS SQL 2012 SP2 和 MS SQL 2014。组织或云服务提供商可以根据已安装的组件选择 SQL 2012 SP1、SQL 2012 SP2
    或 SQL 2014。
- en: Tip
  id: totrans-204
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: SQL Support matrix for System Center 2012 R2 can be accessed at [https://technet.microsoft.com/en-us/library/dn281933.aspx](https://technet.microsoft.com/en-us/library/dn281933.aspx)
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 可以在 [https://technet.microsoft.com/en-us/library/dn281933.aspx](https://technet.microsoft.com/en-us/library/dn281933.aspx)
    查看 System Center 2012 R2 的 SQL 支持矩阵。
- en: 'The deployment model in SQL Server can be deployed in multiple ways with respect
    to placement, failover, and so on. WAP management database deployment is supported
    in following ways:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: SQL Server 中的部署模型可以根据位置、故障转移等多种方式进行部署。WAP 管理数据库部署支持以下方式：
- en: Standalone SQL Server deployment
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 独立 SQL Server 部署
- en: SQL Server failover cluster
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL Server 故障转移集群
- en: SQL Server AlwaysOn availability groups
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL Server AlwaysOn 可用性组
- en: Choosing the right deployment model for your cloud management databases depends
    upon deployment strategy. Standalone deployment works fine but becomes a single
    point of failure. Failure in the management database will cause failure of all
    cloud management components functionalities.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 为云管理数据库选择正确的部署模型取决于部署策略。独立部署工作正常，但会成为单点故障。管理数据库的故障会导致所有云管理组件功能的故障。
- en: SQL Cluster (active/passive) and SQL AlwaysOn availability group can be used
    to add redundancy for management databases eliminating any single point of failure.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: SQL 集群（主动/被动）和 SQL AlwaysOn 可用性组可用于为管理数据库增加冗余，消除单点故障。
- en: While both options provide redundancy for SQL Server, AlwaysOn adds greater
    flexibility and reliability by enabling clusters without any shared storage and
    protection at database level, which is at instance level in case of SQL Cluster.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这两种选项都为 SQL Server 提供冗余，但 AlwaysOn 通过支持没有共享存储的集群并在数据库级别提供保护，比 SQL 集群在实例级别提供更大的灵活性和可靠性。
- en: More on SQL Cluster versus SQL can be found at [https://msdn.microsoft.com/en-us/library/ff929171.aspx](https://msdn.microsoft.com/en-us/library/ff929171.aspx).
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 更多关于 SQL 集群与 SQL 的对比可以参见 [https://msdn.microsoft.com/en-us/library/ff929171.aspx](https://msdn.microsoft.com/en-us/library/ff929171.aspx)。
- en: Tip
  id: totrans-214
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: SQL cluster functionalities is available in MS SQL Standard edition where AlwaysOn
    requires Enterprise edition license.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: SQL 集群功能在 MS SQL 标准版中可用，而 AlwaysOn 需要企业版许可证。
- en: 'While installing SQL for management databases, the following features are required
    to be installed. Default collation will work when deploying for English language.
    See product specific guidelines for other languages:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 在为管理数据库安装 SQL 时，必须安装以下功能。默认排序规则在部署英文版时有效。对于其他语言，请参见产品特定指南：
- en: 'Common features:'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常见功能：
- en: Database engine
  id: totrans-218
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库引擎
- en: Management tools
  id: totrans-219
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理工具
- en: 'Product specific features:'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 产品特定功能：
- en: Full text search (for SC operations Manager and Service Manager)
  id: totrans-221
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完整文本搜索（用于 SC 操作管理器和服务管理器）
- en: Reporting services (for SC operations Manager and Service Manager)
  id: totrans-222
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告服务（用于 SC 操作管理器和服务管理器）
- en: Analysis services (For SC Service Manager)
  id: totrans-223
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析服务（用于 SC 服务管理器）
- en: 'Additional consideration while deploying SQL Server for WAP and System Center
    2012 R2 include:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 部署 SQL Server 时需要考虑的额外事项包括：
- en: Deploy additional SQL Server/instances in a large production setup to avoid
    any performance issues.
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在大型生产环境中部署额外的 SQL Server/实例，以避免性能问题。
- en: Reporting services instances cannot be shared between components.
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告服务实例不能在各组件之间共享。
- en: Configure pre-size and automatically grow along with monitoring for efficient
    and undisrupted management databases.
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置预先设置的大小并自动增长，同时监控以实现高效和不中断的管理数据库。
- en: SQL authentication needs to be enabled on the SQL Server before installing Windows
    Azure Pack components. If Windows authentication is planned for configuration,
    the current user has to be added as an administrator on the SQL Server.
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在安装 Windows Azure Pack 组件之前，必须在 SQL Server 上启用 SQL 身份验证。如果计划配置 Windows 身份验证，则当前用户必须被添加为
    SQL Server 的管理员。
- en: SQL AlwaysOn availability groups functionality is not supported for a named
    instance for System Center Service Manager Database, it is supported for default
    server instance only.
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于 System Center 服务管理器数据库，SQL AlwaysOn 可用性组功能不支持命名实例，仅支持默认服务器实例。
- en: Note
  id: totrans-230
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: SQL Express Edition can be used WAP in Express deployment. For WAP distributed
    deployment and system center components Standard edition is the minimum edition
    supported. Choose SQL edition depending upon the features and HA model discussed
    above.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: SQL Express 版本可以在 Express 部署中用于 WAP。对于 WAP 分布式部署和系统中心组件，标准版是最低支持版本。根据上述功能和高可用性模型选择
    SQL 版本。
- en: Installing and configuring SQL Server 2012 SP2
  id: totrans-232
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装并配置 SQL Server 2012 SP2
- en: For the purpose of evaluation in this book, we shall be using SQL Server 2012
    SP2 standalone installation as the DB server. This database server shall be used
    by all WAP and system center components.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中为了评估的目的，我们将使用 SQL Server 2012 SP2 独立安装作为数据库服务器。此数据库服务器将供所有 WAP 和系统中心组件使用。
- en: 'Installation prerequisite:'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装前提条件：
- en: A set of hardware and software prerequisite has to be met before deploying SQL
    Server
  id: totrans-235
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在部署 SQL Server 之前，必须满足一套硬件和软件的先决条件。
- en: 'Software requirements:'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 软件要求：
- en: 'Install the following components on SQL Server VM before installing SQL Server:'
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在安装 SQL Server 之前，请在 SQL Server 虚拟机上安装以下组件：
- en: .NET 3.5 SP1 Framework
  id: totrans-238
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: .NET 3.5 SP1 框架
- en: Windows PowerShell (installed by default)
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows PowerShell（默认安装）
- en: Network protocol and libraries (like shared memory, named pipe, TCP IP—available
    by default)
  id: totrans-240
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络协议和库（如共享内存、命名管道、TCP IP——默认可用）
- en: 'Active Directory accounts requirements:'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Active Directory 账户要求：
- en: Create a user account in AD for SQL Server administration and services login
    account
  id: totrans-242
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 AD 中创建 SQL Server 管理和服务登录账户
- en: '| Account Name | Purpose | Permissions |'
  id: totrans-243
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_TB
  zh: '| 账户名称 | 目的 | 权限 |'
- en: '| --- | --- | --- |'
  id: totrans-244
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Sqldbadmin | SQL DB administrator user | Member of local administrator group
    on SVMM + DB admin |'
  id: totrans-245
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_TB
  zh: '| Sqldbadmin | SQL 数据库管理员用户 | SVMM 上的本地管理员组成员 + 数据库管理员 |'
- en: '| Sqldb-svc | Service account for SQL Server Service | Member of local administrator
    group on SVMM + DB admin |'
  id: totrans-246
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_TB
  zh: '| Sqldb-svc | SQL Server 服务账户 | SVMM 上的本地管理员组成员 + 数据库管理员 |'
- en: Add created user accounts in the local administrator's group on SQL Server Windows
    OS.
  id: totrans-247
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将创建的用户账户添加到 SQL Server Windows 操作系统上的本地管理员组。
- en: Installation procedure
  id: totrans-248
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装步骤
- en: 'The following is the installation procedure to be followed:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是需要遵循的安装程序：
- en: Download MS SQL Server 2012 SP1 installation media and mount on SQL VM.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载 MS SQL Server 2012 SP1 安装介质并在 SQL 虚拟机上挂载。
- en: Execute the setup file from installation media and select **Standalone installation**.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从安装介质执行设置文件并选择**独立安装**。
- en: SQL setup will start a valid validation check for installing the SQL Server
    setup support file. All tests must report green to green to proceed further.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SQL 设置将开始对安装 SQL Server 设置支持文件进行有效性验证检查。所有测试必须报告绿色，才能继续进行下一步。
- en: Enter the product key (embedded in licensed media) or select evaluation mode
    installation option as applicable.
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入产品密钥（嵌入在许可媒体中）或根据需要选择评估模式安装选项。
- en: Accept the license terms and proceed further to install setup files.
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受许可条款，并继续安装设置文件。
- en: Verify the setup support rules result. All results must pass successfully to
    proceed further.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证设置支持规则的结果。所有结果必须成功通过才能继续进行下一步。
- en: Select **SQL Server Feature Installation** on the **Setup Role** page.![Installation
    procedure](img/00008.jpeg)
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **安装角色** 页面上选择 **SQL Server 功能安装**。![安装过程](img/00008.jpeg)
- en: Select **Database Engine Services**, **Client Tools Connectivity** and **Management
    Tools - Basic** on the **Features** page (select features as per product specific
    requirements discussed in the last topic).![Installation procedure](img/00009.jpeg)
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **功能** 页面上选择 **数据库引擎服务**、**客户端工具连接性** 和 **管理工具 - 基础**（根据上一个主题中讨论的产品特定要求选择功能）。![安装过程](img/00009.jpeg)
- en: Verify the installation rules status, all rules must pass successfully in order
    to proceed further.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证安装规则的状态，所有规则必须成功通过才能继续进行下一步。
- en: Change the instance name to a name of your choice. For the purpose of evaluation
    we are using the **Default instance**.![Installation procedure](img/00010.jpeg)
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将实例名称更改为您选择的名称。为了评估目的，我们使用的是**默认实例**。![安装过程](img/00010.jpeg)
- en: Verify the disk space requirement and available space to proceed further.
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证磁盘空间要求和可用空间，确保可以继续进行下一步。
- en: Change the default service account for the SQL Server agent and database engine
    to the Active Directory account created earlier.![Installation procedure](img/00011.jpeg)
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 SQL Server 代理和数据库引擎的默认服务帐户更改为之前创建的 Active Directory 帐户。![安装过程](img/00011.jpeg)
- en: Select **Mixed Mode** authentication on the **Database Engine Configuration**
    page. Provide "`sa`" as the password and add the current logged in user (SQLDBADMIN)
    into SQL administrators. Change the data directories location to different drives
    if applicable.![Installation procedure](img/00012.jpeg)
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **数据库引擎配置** 页面上选择 **混合模式** 身份验证。提供 "`sa`" 作为密码，并将当前登录用户（SQLDBADMIN）添加到 SQL
    管理员中。如果适用，修改数据目录位置到不同的驱动器。![安装过程](img/00012.jpeg)
- en: Choose the error reporting option if you wish to participate in error reporting
    to Microsoft.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果希望参与错误报告以向 Microsoft 提交错误，可以选择错误报告选项。
- en: Verify the installation configuration rule status. Each rule must pass successfully
    to proceed further.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证安装配置规则状态。每个规则必须成功通过才能继续进行下一步。
- en: Verify the installation option selected summary.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证所选安装选项的摘要。
- en: SQL Setup will start installing SQL DB Server as per the inputs provided.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SQL 设置将根据提供的输入开始安装 SQL DB Server。
- en: Close the wizard once installation finishes successfully, review setup logs
    in case of any errors.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装成功完成后，关闭向导，并查看安装日志以检查是否有任何错误。
- en: Post installation tasks
  id: totrans-268
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装后的任务
- en: 'Configure the following tasks after successfully installing SQL Server 2012
    SP1:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 成功安装 SQL Server 2012 SP1 后配置以下任务：
- en: Login into SQL Server using SQL Management Studio and verify successful installation.
    Also verify whether the system databases such as `master`, `tempdb` are created.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 SQL Management Studio 登录 SQL Server 并验证安装是否成功。还要验证系统数据库（如 `master`、`tempdb`）是否已创建。
- en: Create a login for SCVMM, SPF, and WAP admin Active Directory user. Permissions
    can be defined later. Browse through the **Security** | **Logins** menu and right
    click on **Logins** to create the SQL user.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为 SCVMM、SPF 和 WAP 管理员 Active Directory 用户创建登录名。权限可以稍后定义。通过 **安全性** | **登录名**
    菜单浏览，并右键单击 **登录名** 来创建 SQL 用户。
- en: Configure the SQL Server network port for remote access using SQL Server Configuration
    Manager. By default it's **1433**.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 SQL Server 配置管理器配置 SQL Server 网络端口以供远程访问。默认情况下，端口为 **1433**。
- en: Planning and deploying SCVMM 2012 R2
  id: totrans-273
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 规划和部署 SCVMM 2012 R2
- en: System Center virtual machine manager is the heart of the solution and is responsible
    for delivering IaaS services for the Windows Azure Pack based cloud solution.
    SCVMM is responsible for provisioning and managing the life cycle of IaaS resources
    such as virtual machines, virtual networks and so on.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 系统中心虚拟机管理器是该解决方案的核心，负责为基于 Windows Azure Pack 的云解决方案提供 IaaS 服务。SCVMM 负责为虚拟机、虚拟网络等
    IaaS 资源的生命周期管理提供配置和管理。
- en: SCVMM manages not only the hypervisor and virtual machines resources but also
    is responsible for provisioning and managing network and storage resources for
    cloud virtual machines. SCVMM provides flexibility to integrate with third party
    network and storage providers for automated provisioning and management. In a
    nutshell, SCVMM is core resource provider for IaaS offerings for WAP cloud solution.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: SCVMM不仅管理虚拟化主机和虚拟机资源，还负责为云虚拟机提供和管理网络和存储资源。SCVMM提供了与第三方网络和存储提供商集成的灵活性，用于自动化资源的提供和管理。简而言之，SCVMM是WAP云解决方案中IaaS服务的核心资源提供者。
- en: SCVMM comes as a part of system center suite. WAP communicates with SCVMM for
    IaaS services via **SPF** (**Service Provider Foundation**). In this section we
    will cover VMM architecture and deployment models along with installation walkthrough.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: SCVMM是系统中心套件的一部分。WAP通过**SPF**（**服务提供商基础架构**）与SCVMM进行IaaS服务通信。在本节中，我们将介绍VMM架构和部署模型，并提供安装指南。
- en: The VMM architecture and deployment model
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VMM架构和部署模型
- en: 'VMM server is made up of multiple components which can be deployed together
    on a single server or on a different server in a distributed fashion to achieve
    scalability and availability. VMM requires a SQL Server database to store all
    configurations and run time data. Components of overall VMM working solutions
    are as follows:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: VMM服务器由多个组件构成，这些组件可以一起部署在单个服务器上，或在不同服务器上以分布式方式部署，以实现扩展性和可用性。VMM需要一个SQL Server数据库来存储所有配置和运行时数据。整体VMM工作解决方案的组件如下：
- en: '**VMM Management Server**: This server is responsible for the execution of
    all tasks SCVMM is participating in. It installs System Center Virtual Machine
    management services which communicates with all other system center VMM and non-system
    center components for provisioning and controlling the fabric. This can be protected
    from SPOF by deploying in HA mode on the top of Microsoft Failover Cluster.'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMM管理服务器**：此服务器负责执行SCVMM参与的所有任务。它安装System Center虚拟机管理服务，与所有其他系统中心VMM及非系统中心组件进行通信，完成虚拟化基础设施的提供与控制。通过在Microsoft故障转移集群上以HA模式部署，可以防止单点故障。'
- en: '**VMM Management Console**: Management console is used by administrators for
    connecting to VMM management services and performing administrative tasks. It
    gets installed on VMM management server by default, you can also install it in
    your management endpoints for SCVMM administration. .'
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMM管理控制台**：管理控制台供管理员连接到VMM管理服务并执行管理任务。默认情况下，它安装在VMM管理服务器上，您也可以将其安装在您的管理终端上，用于SCVMM管理。'
- en: '**VMM Database**: VMM database is a Microsoft SQL Server provided database
    which stores VMM configuration such as hosts, networks, virtual machine, and so
    on, along with run time data. VMM is highly dependent on this database to function,
    it is highly recommended to protect this database using SQL HA techniques in production
    deployment.'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMM数据库**：VMM数据库是由Microsoft SQL Server提供的数据库，用于存储VMM配置（如主机、网络、虚拟机等）及运行时数据。VMM高度依赖此数据库进行操作，因此强烈建议在生产环境部署中使用SQL
    HA技术保护该数据库。'
- en: '**VMM library and library server**: VMM library stores all resources that are
    used to deploy VMs or services. VMM library typically includes VHDs, templates,
    ISO files, network and storage profiles and so on. VMM library is stored in a
    file share hosted on a library server.'
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMM库和库服务器**：VMM库存储所有用于部署虚拟机或服务的资源。VMM库通常包括VHD、模板、ISO文件、网络和存储配置文件等。VMM库存储在由库服务器托管的文件共享中。'
- en: '**VMM Agent**: VMM agent is not a server component, it facilitates communication
    between hypervisor and VMM. VMM agent gets installed on hypervisor while adding
    hosts in VMM. It can also be manually installed in case of any isolated environmental
    restrictions.'
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMM代理**：VMM代理不是一个服务器组件，它用于促进虚拟化主机和VMM之间的通信。VMM代理在将主机添加到VMM时安装在虚拟化主机上。若存在孤立环境限制，也可以手动安装该代理。'
- en: All components here except VMM database (provided by SQL) are available in SCVMM
    2012 R2 installation media.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 除了VMM数据库（由SQL提供）外，SCVMM 2012 R2安装介质中提供了所有其他组件。
- en: VMM deployment models
  id: totrans-285
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: VMM部署模型
- en: 'SCVMM works on a distributed architecture which enables it to provide multiple
    flexible deployment options. Organizations can choose to increase components such
    as management server or library server for scalability needs. Majorly, SCVMM can
    be deployed in three ways:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: SCVMM采用分布式架构，使其能够提供多种灵活的部署选项。组织可以选择增加如管理服务器或库服务器等组件，以满足扩展需求。主要来说，SCVMM可以通过三种方式进行部署：
- en: '**Standalone deployment**: In standalone deployment all server components of
    VMM (VMM management server, VMM console, VMM library server and VMM SQL database)
    are installed on a single server. This deployment model facilitates a minimum
    deployment footprint and is suitable for test and non-production architectures.
    It doesn''t provide any redundancy for any of the components.'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**独立部署**：在独立部署中，VMM的所有服务器组件（VMM管理服务器、VMM控制台、VMM库服务器和VMM SQL数据库）都安装在一台服务器上。此部署模型便于最小化部署占用，适用于测试和非生产架构。它不提供任何组件的冗余。'
- en: '**Distributed deployment**: In a distributed deployment, organizations can
    choose to install a management server, library server and database server of three
    or more different servers to achieve availability and scalability. VMM database
    can be protected using SQL high availability techniques'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分布式部署**：在分布式部署中，组织可以选择在三台或更多不同的服务器上安装管理服务器、库服务器和数据库服务器，以实现可用性和可扩展性。VMM数据库可以通过SQL高可用性技术进行保护。'
- en: '**SCVMM in high availability mode**: SCVMM supports deployment in cluster mode
    using Windows Failover Cluster. Virtual machine management server can be protected
    using HA deployment mode, along with protected DB using SQL HA techniques. This
    is recommended for production deployment eliminating any single point of failure.'
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SCVMM高可用模式**：SCVMM支持使用Windows故障转移集群以集群模式进行部署。虚拟机管理服务器可以通过HA部署模式进行保护，并使用SQL
    HA技术保护数据库。这种模式建议用于生产环境部署，以消除任何单点故障。'
- en: Installing System Center Virtual Machine Manager 2012 R2
  id: totrans-290
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装System Center虚拟机管理器2012 R2
- en: For the purpose of evaluation in this book, we shall be deploying VMM Management
    Server, VMM Console and VMM Library Server and share on a single machine. Cloud
    Management SQL database server shall be utilized for hosting VMM database.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的评估目的，我们将在单一机器上部署VMM管理服务器、VMM控制台和VMM库服务器，并进行共享。云管理SQL数据库服务器将用于托管VMM数据库。
- en: Installation prerequisites
  id: totrans-292
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装前提条件
- en: Multiple Active Directory accounts with specific permission are required for
    SCVMM to work. Let's have a look at the recommended accounts and permissions for
    SCVMM usage.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: SCVMM的工作需要多个具有特定权限的Active Directory账户。让我们看看SCVMM使用时推荐的账户和权限。
- en: 'AD user account and group for SCVMM:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: SCVMM的AD用户账户和组：
- en: '| Account Name | Purpose | Permissions |'
  id: totrans-295
  prefs: []
  type: TYPE_TB
  zh: '| 账户名称 | 目的 | 权限 |'
- en: '| --- | --- | --- |'
  id: totrans-296
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Scvmmadmin | SCVMM admin user for administrative tasks | Member of local
    administrator group on SVMM + DB Admin |'
  id: totrans-297
  prefs: []
  type: TYPE_TB
  zh: '| Scvmmadmin | SCVMM管理用户，用于管理任务 | 是SVMM本地管理员组成员 + DB管理员 |'
- en: '| Scvmmsvc | Service account for SCVMM service | Member of local administrator
    group on SVMM + DB Admin |'
  id: totrans-298
  prefs: []
  type: TYPE_TB
  zh: '| Scvmmsvc | SCVMM服务的服务账户 | 是SVMM本地管理员组成员 + DB管理员 |'
- en: '| Scvmm-runasadmin | Run as account for SCVMM operation | Admin permissions
    on SCVMM and other resources being managed such as Hyper-V hosts. |'
  id: totrans-299
  prefs: []
  type: TYPE_TB
  zh: '| Scvmm-runasadmin | SCVMM操作的运行账户 | 具有SCVMM及其他管理资源（如Hyper-V主机）的管理员权限。 |'
- en: '| Scvmm-admins | Security group for administrators | Admin permissions on SCVMM
    |'
  id: totrans-300
  prefs: []
  type: TYPE_TB
  zh: '| Scvmm-admins | 管理员的安全组 | SCVMM上的管理员权限 |'
- en: Add SCVMM admin and service account as a part of "scvmm-admin" security group
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 将SCVMM管理员和服务账户添加为“scvmm-admin”安全组的一部分
- en: Software prerequisite
  id: totrans-302
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 软件前提条件
- en: 'VMM takes care of installing most of the software prerequisites except Windows
    Access and development kit (Windows ADK) and SQL database related tools. Install
    the following components as a part of the software prerequisite for deploying
    System Center Virtual Machine Manager 2012 R2:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: VMM负责安装大部分软件前提条件，除了Windows访问和开发工具包（Windows ADK）以及SQL数据库相关工具。安装以下组件作为部署System
    Center虚拟机管理器2012 R2的前提条件：
- en: 'Features from Windows assessment and development toolkit:'
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自Windows评估和开发工具包的功能：
- en: Deployment tools
  id: totrans-305
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署工具
- en: Windows pre-installation environment (Windows PE)
  id: totrans-306
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows预安装环境（Windows PE）
- en: 'SQL Server connectivity tools:'
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL Server连接工具：
- en: SQL Server 2012 command line utilities
  id: totrans-308
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL Server 2012命令行工具
- en: Microsoft SQL Server native client
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft SQL Server本地客户端
- en: 'Apart from installing, VMM has the following software components requirements
    which the setup takes care of during installation:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 除了安装，VMM还有以下软件组件要求，安装程序会在安装过程中自动处理：
- en: Windows Remote Management (WinRM 2.0) Service
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows远程管理（WinRM 2.0）服务
- en: Microsoft .NET framework 4 or 4.5
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft .NET框架 4或4.5
- en: Windows PowerShell 2.0
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows PowerShell 2.0
- en: Note
  id: totrans-314
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Windows ADK can be download from [https://www.microsoft.com/en-in/download/details.aspx?id=39982](https://www.microsoft.com/en-in/download/details.aspx?id=39982),
    SQL connectivity tools can be downloaded from [http://www.microsoft.com/en-in/download/details.aspx?id=29065](http://www.microsoft.com/en-in/download/details.aspx?id=29065).
    These are also available in SQL Server 2012 installation media.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: Windows ADK 可从[https://www.microsoft.com/en-in/download/details.aspx?id=39982](https://www.microsoft.com/en-in/download/details.aspx?id=39982)下载，SQL
    连接工具可从[http://www.microsoft.com/en-in/download/details.aspx?id=29065](http://www.microsoft.com/en-in/download/details.aspx?id=29065)下载。这些工具也可以在
    SQL Server 2012 安装介质中找到。
- en: Installation procedure
  id: totrans-316
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装过程
- en: For evaluation purposes, we shall be deploying VMM Management Server, VMM console
    and library server on a single machine.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 出于评估目的，我们将在单台机器上部署 VMM 管理服务器、VMM 控制台和库服务器。
- en: Download MS System Center 2012 R2 Virtual Machine Management installation media
    and mount on SCVMM VM.
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载 MS System Center 2012 R2 Virtual Machine Management 安装介质并挂载到 SCVMM 虚拟机上。
- en: Execute the setup file from installation media and click **Install**.![Installation
    procedure](img/00013.jpeg)
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从安装介质中执行安装文件，并点击**安装**。![安装过程](img/00013.jpeg)
- en: Select the **VMM Management Server** feature to install, it will automatically
    select **VMM console** as well.![Installation procedure](img/00014.jpeg)
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**VMM 管理服务器**功能进行安装，它将自动选择**VMM 控制台**。![安装过程](img/00014.jpeg)
- en: Enter the name and organization details along with the product key provided
    by Microsoft for your system center licenses. VMM will be installed in evaluation
    mode if no product key is specified. You can choose to provide the product key
    at a later stage as well, post installation.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入名称和组织详细信息以及 Microsoft 提供的产品密钥，以便为您的系统中心许可证注册。如果未指定产品密钥，则 VMM 将以评估模式安装。您还可以选择在后续阶段提供产品密钥，安装完成后也可以提供。
- en: Accept the evaluation/product license terms and proceed further.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受评估/产品许可条款并继续下一步。
- en: Choose **Yes** or **No** to participate in the **Customer Experience Improvement
    Program**.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**是**或**否**参与**客户体验改进计划**。
- en: Turn on or off for Microsoft Update, with turning it on you can update VMM using
    automatic updates.
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用或禁用 Microsoft 更新，启用时可以使用自动更新更新 VMM。
- en: Specify the SCVMM installation location, by default it is in `C:\Program Files\Microsoft
    System Center 2012 R2\Virtual Machine Manager`.
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定 SCVMM 的安装位置，默认路径为 `C:\Program Files\Microsoft System Center 2012 R2\Virtual
    Machine Manager`。
- en: Clicking **Next** will start the prerequisite check and will return with an
    error or warning if any of the prerequisites defined in the previous section aren't
    completed. Complete any pending prerequisites if any and proceed further.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**将开始前置条件检查，如果前一部分中定义的任何前置条件没有完成，将返回错误或警告。完成任何待完成的前置条件并继续下一步。
- en: Provide the database configuration on this page. You can choose to use existing
    DB created in SQL instance for VMM or may choose to create a new database. Change
    the SQL port if changed in SQL post-installation tasks.
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此页面上提供数据库配置。您可以选择使用在 SQL 实例中为 VMM 创建的现有数据库，或选择创建一个新数据库。如果在 SQL 后安装任务中更改了 SQL
    端口，请进行更改。
- en: Verify Database configuration and proceed further.![Installation procedure](img/00015.jpeg)
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证数据库配置并继续下一步。![安装过程](img/00015.jpeg)
- en: Configure the service account for SCVMM services login. For SCVMM in HA mode,
    this has to be a domain account. Provide the location to store the Distributed
    Encryption key location in AD if deploying in HA mode. More on deployment in HA
    mode is covered in the next section.![Installation procedure](img/00016.jpeg)
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置 SCVMM 服务登录的服务帐户。对于高可用性（HA）模式下的 SCVMM，这必须是一个域帐户。如果在 HA 模式下部署，还需提供在 AD 中存储分布式加密密钥的位置。有关
    HA 模式部署的更多信息，请参阅下一部分。![安装过程](img/00016.jpeg)
- en: Customize network ports for SCVMM communication if required.
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，定制 SCVMM 通信的网络端口。
- en: Create a library share on the library disk and provide name and location. This
    will act as a SCVMM library which can be used to store resources such as VHDs,
    templates and so on. By default VMM setup takes `C:\Program Data\Virtual Machine
    Manager Library Files` as the library share location.![Installation procedure](img/00017.jpeg)
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在库磁盘上创建一个库共享，并提供名称和位置。这将作为 SCVMM 库，用于存储 VHD、模板等资源。默认情况下，VMM 安装程序将 `C:\Program
    Data\Virtual Machine Manager Library Files` 作为库共享位置。![安装过程](img/00017.jpeg)
- en: Review the installation configuration summary and start installation.
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 审查安装配置摘要并开始安装。
- en: Close the Wizard on successful installation.
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装成功后关闭向导。
- en: Tip
  id: totrans-334
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: VMM Installation logs are located at `%SystemDrive%\ProgramData\ VMMLogs\`
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: VMM 安装日志位于 `%SystemDrive%\ProgramData\ VMMLogs\`
- en: There is a known issue of installation failing while having—SCVMM in computer
    name of SCVMM server. You can try renaming the server by removing "`-`" from hostname
    or changing it to `scvmm` or any other characters.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 安装失败的已知问题是——SCVMM 服务器的计算机名称中包含 SCVMM。您可以尝试通过从主机名中删除 "`-`" 或将其更改为 `scvmm` 或其他字符来重命名服务器。
- en: Post-installation tasks
  id: totrans-337
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装后的任务
- en: 'Following are the post installation tasks:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是安装后的任务：
- en: Verify successful VMM installation by logging into VMM server using VMM console.
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过使用 VMM 控制台登录到 VMM 服务器来验证 VMM 是否成功安装。
- en: Add SCVMM-admins group to SCVMM administrator in VMM console settings.
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 SCVMM-admins 组添加到 VMM 控制台设置中的 SCVMM 管理员。
- en: Create RunAs accounts for hypervisor and more related operations.
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为虚拟化管理程序和更多相关操作创建 RunAs 帐户。
- en: Update SCVMM with the latest updates and patches.
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新 SCVMM 至最新的更新和补丁。
- en: Highly available SCVMM architecture and deployment
  id: totrans-343
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 高可用 SCVMM 架构和部署
- en: As covered in *VMM* *architecture and deployment models* section, SCVMM can
    be deployed in high availability mode using Windows Server Failover Clustering.
    By deploying SCVMM in high availability mode on the top of Microsoft Windows Failover
    Cluster Services, it can be protected against both hardware and software level
    failures.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 如 *VMM* *架构和部署模型* 部分所述，SCVMM 可以使用 Windows Server 故障转移集群以高可用模式部署。通过将 SCVMM 部署在
    Microsoft Windows 故障转移集群服务之上，它可以防范硬件和软件层级的故障。
- en: 'Deploying SCVMM management server in a cluster has some prerequisite which
    needs to be fulfilled:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 在集群中部署 SCVMM 管理服务器有一些前提条件，需要满足：
- en: '**VMM Service Account**: The Virtual Machine Management service on the SCVMM
    server must be configured to run with a domain account. You cannot use a local
    system account to run a VMM service in HA mode. This service account has to be
    a member of the local administrator''s group on SCVMM server Windows.'
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMM 服务帐户**：SCVMM 服务器上的虚拟机管理服务必须配置为使用域帐户运行。不能使用本地系统帐户在 HA 模式下运行 VMM 服务。此服务帐户必须是
    SCVMM 服务器 Windows 上本地管理员组的成员。'
- en: '**Container in Active Directory for Distributed Key Management**: VMM stores
    all configurations and user account details such as RunAs account credentials
    in a SQL database. Credentials security is of utmost importance in every scenario,
    and SCVMM takes care of security by storing these credentials in encrypted form.'
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Active Directory 中的分布式密钥管理容器**：VMM 将所有配置和用户帐户详细信息（如 RunAs 帐户凭证）存储在 SQL 数据库中。凭证安全在每种情况下都至关重要，SCVMM
    通过将这些凭证以加密形式存储来确保安全性。'
- en: 'There are two ways to encrypt these credentials:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 有两种方法可以加密这些凭证：
- en: '**DPAPI**: DPAPI uses computer hardware ID (on which SCVMM is installed) to
    encrypt the credentials.'
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DPAPI**：DPAPI 使用计算机硬件 ID（SCVMM 安装所在的计算机）来加密凭证。'
- en: '**DKM**: In the case of DKM SCVMM, it stores the encrypted keys in a container
    in Active Directory. These encryption keys aren''t tied to any physical parameter
    of any of SCVMM server.'
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DKM**：在 DKM SCVMM 的情况下，它将加密密钥存储在 Active Directory 中的一个容器中。这些加密密钥与任何 SCVMM
    服务器的物理参数无关。'
- en: In a clustered deployment, SCVMM Virtual Machine Management service shall be
    running on multiple nodes which make DPAPI encryption technique unusable. For
    cluster deployment DKM is mandatory to be used.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 在集群部署中，SCVMM 虚拟机管理服务将在多个节点上运行，这使得 DPAPI 加密技术无法使用。在集群部署中，必须使用 DKM。
- en: As a prerequisite of deploying SCVMM in a cluster, a container needs to be created
    in Active Directory prior to installing SCVMM. This container will be used to
    store the encrypted keys for various SCVMM credentials.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 作为在集群中部署 SCVMM 的前提条件，必须在安装 SCVMM 之前在 Active Directory 中创建一个容器。该容器将用于存储各种 SCVMM
    凭证的加密密钥。
- en: 'Steps to deploy a highly available VMM Management Server are as follows:'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 部署高可用 VMM 管理服务器的步骤如下：
- en: Complete the prerequisite for VMM service account and AD container.
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成 VMM 服务帐户和 AD 容器的前提条件。
- en: Join VMM servers to Windows Server Failover Cluster.
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 VMM 服务器加入 Windows Server 故障转移集群。
- en: Execute the SCVMM installation setup; the setup automatically detects that setup
    is running on cluster node and gives the option to deploy VMM in highly available
    mode.
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行 SCVMM 安装设置；设置将自动检测到安装正在集群节点上运行，并提供将 VMM 部署为高可用模式的选项。
- en: Follow the SCVMM installation guidelines given in the last topic.
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照上一节中给出的 SCVMM 安装指南进行操作。
- en: Provide a cluster name and DKM container location when asked.
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在提示时提供集群名称和 DKM 容器位置。
- en: Add other SCVMM node by executing the setup, the setup will automatically detect
    the cluster and SCVMM configuration deployed.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过执行设置来添加其他 SCVMM 节点，设置将自动检测已部署的集群和 SCVMM 配置。
- en: Once deployed successfully, Failover Cluster Manager can be used to view cluster
    status and switch services as and when required.
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 部署成功后，可以使用故障转移集群管理器查看集群状态并根据需要切换服务。
- en: Planning and configuring hypervisor compute layer with SCVMM
  id: totrans-361
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 SCVMM 规划和配置虚拟化计算层
- en: In this section we will learn to plan and configure hypervisor resources such
    as Hyper-V hosts and clusters, VMware and Citrix hypervisors. In a WAP-based cloud
    solution the hypervisor layer has to be in control of SCVMM for IaaS services
    provisioning and lifecycle management.
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习如何规划和配置虚拟化资源，例如 Hyper-V 主机和集群、VMware 和 Citrix 虚拟化管理程序。在基于 WAP 的云解决方案中，虚拟化管理程序层必须由
    SCVMM 控制，以提供 IaaS 服务和生命周期管理。
- en: In this section we will cover various ways of adding and managing a hypervisor
    layer in SCVMM.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将介绍在 SCVMM 中添加和管理虚拟化管理层的不同方法。
- en: Planning and creating SCVMM host groups
  id: totrans-364
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 规划和创建 SCVMM 主机组
- en: In a large scale cloud deployment comprising hundreds of Hyper-V hosts and thousands
    of virtual machines or more, managing the hosts effectively in terms of resource
    provisioning and controlling becomes challenging. SCVMM host groups can be used
    to avoid such challenges, it provides flexibilities to group multiple hypervisor
    hosts and uses as a single entity for resource provisioning and management.
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 在包含数百台 Hyper-V 主机和成千上万台虚拟机（或更多）的规模化云部署中，有效管理主机资源的分配和控制变得具有挑战性。可以使用 SCVMM 主机组来避免这些挑战，它提供了将多个虚拟化主机分组并作为单个实体进行资源分配和管理的灵活性。
- en: 'Host group planning would have a different foundation and strategy for organizations
    and service providers. A few common options are as follows:'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 主机组规划对于组织和服务提供商有不同的基础和策略。以下是一些常见选项：
- en: Site or geo location
  id: totrans-367
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 站点或地理位置
- en: Performance and capabilities such as fault tolerance and so on
  id: totrans-368
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能和能力，如容错等
- en: Isolated environment of the web zone environment such as DMZ
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web 区域环境的隔离，如 DMZ
- en: Dedicated host groups for large tenants in a service provider's cloud
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务提供商云中的大型租户专用主机组
- en: Host groups with or without BC and DR
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带或不带 BC 和 DR 的主机组
- en: Cloud management infra and tenant workload infra
  id: totrans-372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云管理基础设施和租户工作负载基础设施
- en: Many more
  id: totrans-373
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更多选项
- en: 'We can add Hyper-V hosts or clusters and VMware/Citrix hosts in a host group
    and define various settings at host group level such as:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在主机组中添加 Hyper-V 主机或集群以及 VMware/Citrix 主机，并在主机组层级定义各种设置，如：
- en: General settings.
  id: totrans-375
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一般设置。
- en: Placement rules.
  id: totrans-376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署规则。
- en: Host reserve settings (CPU, memory, network and storage bandwidth, and so on.)
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主机预留设置（CPU、内存、网络和存储带宽等）
- en: Dynamic optimization.
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动态优化。
- en: Power optimization.
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电源优化。
- en: Network and storage resources and quota.
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络和存储资源以及配额。
- en: PRO configuration.
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PRO 配置。
- en: Custom properties.
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自定义属性。
- en: Host groups can be nested to providers' greater level of hierarchy and management.
    By default child host groups inherit parent host group settings and policies,
    which can be overridden at child host group level. Hypervisor hosts can be moved
    from one host group to another.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 主机组可以嵌套到服务提供商的更高层级管理结构中。默认情况下，子主机组继承父主机组的设置和策略，但可以在子主机组层级覆盖这些设置。虚拟化管理程序主机可以从一个主机组移动到另一个主机组。
- en: You can create SCVMM cloud consisting of multiple host groups. SCVMM cloud will
    be discussed in detail in [Chapter 4](part0040_split_000.html#164MG1-b479cf466c26404ca54119871a9b2715
    "Chapter 4. Building VM Clouds and IaaS Offerings"), *Building VM Clouds and IaaS
    Offerings*.
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以创建由多个主机组组成的 SCVMM 云。SCVMM 云将在[第 4 章](part0040_split_000.html#164MG1-b479cf466c26404ca54119871a9b2715
    "第 4 章 构建虚拟机云和 IaaS 服务")，*构建虚拟机云和 IaaS 服务*中详细讨论。
- en: Creating host groups
  id: totrans-385
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建主机组
- en: 'Following are the steps to create host groups:'
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是创建主机组的步骤：
- en: Login to SCVMM server using VMM console and open fabric workspace.
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 VMM 控制台登录到 SCVMM 服务器，并打开 Fabric 工作区。
- en: Expand **Servers** in the **Fabric** menu, right click on **All Hosts**.![Creating
    host groups](img/00018.jpeg)
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **Fabric** 菜单中展开 **Servers**，右键点击 **All Hosts**。![创建主机组](img/00018.jpeg)
- en: Click **Create Host Group** and provide the host group friendly name.
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建主机组**并提供主机组友好名称。
- en: Configure host group properties.![Creating host groups](img/00019.jpeg)
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置主机组属性。![创建主机组](img/00019.jpeg)
- en: Adding virtual machine hosts in host groups
  id: totrans-391
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在主机组中添加虚拟机主机
- en: After creating host groups, we can add virtual machine hosts in their respective
    group to apply host group level policies. We can choose to add already configured
    hypervisor or cluster or perform bare metal provisioning using SCVMM. We can also
    create a Hyper-V cluster of already configured standalone Hyper-V hosts using
    SCVMM.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 创建主机组后，我们可以将虚拟机主机添加到各自的组中，以应用主机组级别的策略。我们可以选择添加已配置的虚拟化程序或集群，或者使用SCVMM执行裸机配置。我们还可以使用SCVMM创建一个由已配置的独立Hyper-V主机构成的Hyper-V集群。
- en: Adding Hyper-V host in a host group
  id: totrans-393
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 将Hyper-V主机添加到主机组
- en: 'Following are the steps to add a Hyper-V host in a host group:'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是将Hyper-V主机添加到主机组的步骤：
- en: Login to SCVMM server using VMM console and open fabric workspace.
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用VMM控制台登录到SCVMM服务器并打开Fabric工作区
- en: Right click on host group created and select **Add Hyper-V Hosts and Clusters**.![Adding
    Hyper-V host in a host group](img/00020.jpeg)
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击已创建的主机组并选择**添加Hyper-V主机和集群**。![将Hyper-V主机添加到主机组](img/00020.jpeg)
- en: Provide the Windows Server location in the given option.
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在给定选项中提供Windows Server的位置信息
- en: Provide credentials for accessing the host by using RunAs account or manual
    credentials.
  id: totrans-398
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用RunAs账户或手动凭据提供访问主机的凭证
- en: Fill in discovery scope details depending upon the server location provided
    earlier.
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据之前提供的服务器位置填写发现范围的详细信息
- en: Select target host groups and host setting.
  id: totrans-400
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择目标主机组和主机设置
- en: Review the configuration summary and finish the wizard to add the host.![Adding
    Hyper-V host in a host group](img/00021.jpeg)
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 审核配置摘要并完成向导以添加主机。![将Hyper-V主机添加到主机组](img/00021.jpeg)
- en: Planning and configuring cloud network fabric with SCVMM
  id: totrans-402
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SCVMM规划和配置云网络Fabric
- en: Cloud network is the most crucial and complex piece of any private or service
    provider's cloud. Cloud network has to be efficient and flexible enough to handle
    daily changing networking needs of tenants and businesses. Software defined networking
    is a key pillar of providing automated and flexible networking for tenants with
    complete isolation and extensibilities. In this section we will learn various
    cloud network solution components for both private cloud and service providers'
    cloud in a WAP cloud.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 云网络是任何私有云或服务提供商云中最关键且最复杂的部分。云网络必须足够高效和灵活，以处理租户和企业每日变化的网络需求。软件定义网络是为租户提供自动化和灵活网络的关键支柱，同时确保完全隔离和可扩展性。在本节中，我们将学习在WAP云中针对私有云和服务提供商云的各种云网络解决方案组件。
- en: Before getting into tenant workload networking needs, it is crucial to note
    that networking for cloud management infra and tenant workload infrastructure
    should be kept separate. Also known as Control Plane and Data Plane in networking
    languages, management infra networking should be kept separate in terms of provisioning
    and management. Demystifying the recommendation, assume a scenario where cloud
    network is down due to some issue with the physical network, and you are not able
    to make any changes to the cloud network solution to get it up and running because
    network controller VM was also running on the same problematic network. Follow
    the same cloud management and tenant workload infrastructure recommendation while
    designing cloud networking Control and Data plane.
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 在讨论租户工作负载网络需求之前，必须注意，云管理基础设施与租户工作负载基础设施的网络应当分开。用网络术语来说，这分别被称为控制平面和数据平面。云管理基础设施的网络在配置和管理上应当保持独立。为了澄清这一建议，假设在某种情况下，云网络因物理网络问题而中断，而由于网络控制器虚拟机也运行在同一有问题的网络上，您无法对云网络解决方案进行任何更改以使其恢复运行。在设计云网络控制平面和数据平面时，请遵循相同的云管理和租户工作负载基础设施建议。
- en: 'Private cloud and service providers'' cloud would have different networking
    requirement, let''s have a look at major cloud networking requirement for both
    and their solution in our WAP cloud:'
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 私有云和服务提供商云的网络需求不同，下面我们将看看这两者在WAP云中的主要云网络需求及其解决方案：
- en: 'Cloud networking needs for a private cloud:'
  id: totrans-406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 私有云的云网络需求：
- en: Secure and reliable virtual networking with easy management
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全可靠的虚拟网络，易于管理
- en: Isolated network capabilities for **T&D environments**
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**T&D环境**的隔离网络能力'
- en: Separate zone separated by firewall depending upon network traffic
  id: totrans-409
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据网络流量，使用防火墙将不同区域隔开
- en: Faster and automated network provisioning
  id: totrans-410
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更快速且自动化的网络配置
- en: IP address automated allocation and managed
  id: totrans-411
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: IP地址的自动分配与管理
- en: Extensibility to support custom needs
  id: totrans-412
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持自定义需求的可扩展性
- en: Quality of service control
  id: totrans-413
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务质量控制
- en: Load balancing and physical network integration capabilities
  id: totrans-414
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 负载均衡和物理网络集成能力
- en: Hardware independent configurations
  id: totrans-415
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 硬件独立配置
- en: 'Cloud networking needs for a service provider''s cloud:'
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务提供商云的云网络需求：
- en: Complete isolation between different tenants' networks while using the same
    physical network
  id: totrans-417
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在使用相同物理网络的情况下，实现不同租户网络之间的完全隔离
- en: Extensibility to support hybrid networking model with a tenant's on-premises
    deployment
  id: totrans-418
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持与租户本地部署的混合网络模型的可扩展性
- en: Automated provisioning and tenant controlled management
  id: totrans-419
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化供应和租户控制的管理
- en: Advanced address translation capabilities with limited resources such as gateways
    and more for public facing services
  id: totrans-420
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在公共服务中，提供具有有限资源（如网关等）的高级地址转换能力
- en: No IP range usage constraints
  id: totrans-421
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无 IP 范围使用限制
- en: Easily manageable and open to dynamic changes
  id: totrans-422
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 易于管理并且能够动态变化
- en: Quality of service as per the tenant's plans and subscriptions
  id: totrans-423
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据租户的计划和订阅提供服务质量
- en: All enterprise class networking features such as load balancing and physical
    network integrated or hardware independent configurations
  id: totrans-424
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有企业级网络功能，如负载均衡和与物理网络集成或硬件独立的配置
- en: WAP along with system center and Hyper-V provides true cloud networking capabilities
    for requirements of private clouds and service providers' cloud. Networking capabilities
    of SCVMM such as logical networks and switches, network load balancing integration,
    network virtualization (the BIG thing), network virtualization gateways, port
    profiles along with automation and self-service experience of Windows Azure Pack
    provide solutions to all these requirements of organizations and service providers.
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: WAP 与系统中心和 Hyper-V 一起，为私有云和服务提供商云的需求提供真正的云网络功能。SCVMM 的网络功能，如逻辑网络和交换机、网络负载均衡集成、网络虚拟化（这是一个重要的技术）、网络虚拟化网关、端口配置文件，以及
    Windows Azure Pack 提供的自动化和自助服务体验，为组织和服务提供商的所有这些需求提供了解决方案。
- en: Network Virtualization
  id: totrans-426
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络虚拟化
- en: Network Virtualization allows us to create multiple independent networks on
    the same physical hardware, traveling and routing on the same physical NIC cards
    and network switches/routes with complete isolation to each other. Network Virtualization
    is the foundation of one of the most modern networking technologies today, that
    is Software Defined Networking. Network Virtualization enables transforming of
    traditional physical network devices such as routers, firewalls, and load balancers
    into software. Software Defined Networking enables all networking features from
    layer 2 to 7 with isolation and multi-tenancy. Network Virtualization is a must
    have technology for cloud service providers in order to facilitate flexible isolated
    networking for tenants without any dependency on each other.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 网络虚拟化允许我们在相同的物理硬件上创建多个独立的网络，这些网络在相同的物理 NIC 卡和网络交换机/路由器上进行传输和路由，彼此之间完全隔离。网络虚拟化是当今最现代化的网络技术之一——软件定义网络（SDN）的基础。网络虚拟化使得传统的物理网络设备，如路由器、防火墙和负载均衡器，能够转变为软件。软件定义网络使得从第
    2 层到第 7 层的所有网络功能能够实现隔离和多租户支持。网络虚拟化是云服务提供商必须拥有的技术，能够为租户提供灵活的隔离网络，而不依赖彼此。
- en: Hyper-V **Network Virtualization using General Routing Encapsulation** (**NVGRE**)
    mechanism is used to facilitate virtualized networks for virtual machines. Windows
    Azure Pack with SCVMM and Hyper-V provides true self service automated virtual
    networks for private and service providers' cloud solutions. Hyper-V and VMM provides
    Network Virtualization gateways to enable virtualized network traffic communication
    with physical networks and the outside world.
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 **通用路由封装**（**NVGRE**）机制的 Hyper-V 网络虚拟化，用于促进虚拟机的虚拟网络。Windows Azure Pack 与
    SCVMM 和 Hyper-V 一起，为私有和服务提供商云解决方案提供真正的自助服务自动化虚拟网络。Hyper-V 和 VMM 提供网络虚拟化网关，使虚拟化的网络流量能够与物理网络和外部世界进行通信。
- en: Each VM connected to a virtualized network has two IP associated with it, one
    from the virtual network known as **customer address** (**CA**) and the other
    from a cloud **provider's address** (**PA**). Hyper-V Network Virtualization encapsulates
    the CA address network packet using PA, source and destination IP and virtual
    network ID while transmitting the packet so that it can travel on a physical network.
    On the receiver end it decapsulates the packet and transmits the packet with the
    CA address only in the other virtual machine.
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 每个连接到虚拟化网络的 VM 都有两个关联的 IP 地址，一个来自虚拟网络，称为**客户地址**（**CA**），另一个来自云**提供商地址**（**PA**）。Hyper-V
    网络虚拟化在传输数据包时使用 PA 来封装 CA 地址的数据包，包括源 IP、目标 IP 和虚拟网络 ID，以便数据包能够在物理网络上传输。在接收端，它解封装数据包并只使用
    CA 地址将数据包发送到另一个虚拟机。
- en: Network Virtualization works at Hyper-V virtual switch level on Hyper-V hosts.
    Hyper-V virtual switch on Server 2012 onwards can be extended to provide additional
    functionalities apart from default layer 2 responsibilities. Additional extension
    can be programmed and implemented on a virtual switch for additional features
    for network and security such as network filtering, virtual firewalls, and so
    on. This enables a true Software Defined Network infrastructure.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 网络虚拟化在 Hyper-V 主机的 Hyper-V 虚拟交换机层面上工作。从 Server 2012 开始，Hyper-V 虚拟交换机可以扩展，以提供除默认二层功能外的其他功能。可以在虚拟交换机上编程并实现额外的扩展，提供更多的网络和安全功能，如网络过滤、虚拟防火墙等。这使得真正的软件定义网络基础设施成为可能。
- en: There is no separate dedicated NIC requirements for implementing network virtualization,
    we can use same NIC or virtual switch for both types of traffic including traditional
    networks as well as virtualized networks.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 实现网络虚拟化没有单独的专用 NIC 要求，我们可以使用相同的 NIC 或虚拟交换机来处理传统网络和虚拟化网络两种类型的流量。
- en: Tip
  id: totrans-432
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: The provider address doesn't need to be the IP of physical NIC or team, in VMM
    it comes from the IP pool configured in the logical network.
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: 提供程序地址不需要是物理 NIC 或团队的 IP 地址，在 VMM 中，它来自逻辑网络中配置的 IP 池。
- en: Configuring networking fabric in SCVMM
  id: totrans-434
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 SCVMM 中的网络布线
- en: 'In this section we will configure networking fabric in SCVMM for traditional
    and virtualized networks. There are multiple network resources when it comes to
    configuring networking fabric in VMM:'
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将配置 SCVMM 中的网络布线，用于传统网络和虚拟化网络。配置 VMM 中网络布线时有多个网络资源：
- en: Logical network
  id: totrans-436
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 逻辑网络
- en: MAC address pools
  id: totrans-437
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MAC 地址池
- en: Load balancers
  id: totrans-438
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 负载均衡器
- en: VIP templates
  id: totrans-439
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VIP 模板
- en: Logical switches
  id: totrans-440
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 逻辑交换机
- en: Port profiles
  id: totrans-441
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口配置文件
- en: Port classifications
  id: totrans-442
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口分类
- en: Network service
  id: totrans-443
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络服务
- en: VM networks (available in VM and services workspace)
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VM 网络（适用于 VM 和服务工作区）
- en: Logical networks
  id: totrans-445
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 逻辑网络
- en: A logical network in SCVMM is the top level hierarchy of SCVMM network fabric.
    It can be used to represent a network site, or a different network domain. Logical
    networks can consist of multiple virtual machine networks. Multiple logical networks
    can be created such as production network, T&D logical network. Logical networks
    can be assigned to hosts and host groups.
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: SCVMM 中的逻辑网络是 SCVMM 网络布线的最高层次结构。它可用于表示一个网络站点或一个不同的网络域。逻辑网络可以由多个虚拟机网络组成。可以创建多个逻辑网络，如生产网络、T&D
    逻辑网络等。逻辑网络可以分配给主机和主机组。
- en: In a traditional network, create logical network corresponding to a physical
    network in your environment such as DMZ, backup, internal and so on. One virtual
    machine network per logical network shall be created in this scenario.
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统网络中，创建与您环境中物理网络相对应的逻辑网络，如 DMZ、备份、内部网络等。在这种情况下，每个逻辑网络将创建一个虚拟机网络。
- en: Network Virtualization is enabled at logical network level.
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: 在逻辑网络级别启用网络虚拟化。
- en: Creating a logical network
  id: totrans-449
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 创建逻辑网络
- en: 'The following steps have to be followed to create a logical network:'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 创建逻辑网络需要遵循以下步骤：
- en: Login to VMM server using VMM console and select fabric workspace.
  id: totrans-451
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 VMM 控制台登录 VMM 服务器并选择布线工作区。
- en: Expand **Networking** and click on **Logical Networks**.
  id: totrans-452
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开**网络**，然后点击**逻辑网络**。
- en: Right click on **Logical Networks** and click on **Create Logical Network**.![Creating
    a logical network](img/00022.jpeg)
  id: totrans-453
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击**逻辑网络**，然后点击**创建逻辑网络**。![创建逻辑网络](img/00022.jpeg)
- en: Type the name of the logical network such as **WAP-CLOUD-PROD**, along with
    the optional description for easy identification in case of large deployments.
    Select **One connected network** or VLAN based network or PVLAN network as per
    your network topology.![Creating a logical network](img/00023.jpeg)
  id: totrans-454
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入逻辑网络的名称，如**WAP-CLOUD-PROD**，并可以添加可选的描述，以便在大型部署时容易识别。根据您的网络拓扑选择**一个连接的网络**、VLAN
    基于网络或 PVLAN 网络。![创建逻辑网络](img/00023.jpeg)
- en: Click **Next** and add the network site in the logical network. Select a host
    group that can use this logical network along with the **VLAN** ID and **IP subnet**.![Creating
    a logical network](img/00024.jpeg)
  id: totrans-455
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**并在逻辑网络中添加网络站点。选择一个可以使用此逻辑网络的主机组，以及**VLAN** ID 和 **IP 子网**。![创建逻辑网络](img/00024.jpeg)
- en: Review the configurations on the **Summary** page and click **Finish** to create
    the network.
  id: totrans-456
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**摘要**页面上查看配置，并点击**完成**以创建网络。
- en: Creating an IP pool for the newly created logical network
  id: totrans-457
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 为新创建的逻辑网络创建 IP 池
- en: IP pools are created to provide a usable IP address range to VMM for IP allocation.
    IP pools assigned to a logical network are also used to provide PA (provider address)
    in Network Virtualization.
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: IP 池用于提供可用的 IP 地址范围给 VMM 进行 IP 分配。分配给逻辑网络的 IP 池也用于在网络虚拟化中提供 PA（提供者地址）。
- en: Open **Fabric** | **Networking** in VMM console.
  id: totrans-459
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 VMM 控制台中的**Fabric** | **Networking**。
- en: Expand the logical network and right click on the logical network to select
    **Create IP Pool**.![Creating an IP pool for the newly created logical network](img/00025.jpeg)
  id: totrans-460
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开逻辑网络，右键点击逻辑网络并选择**创建 IP 池**。![为新创建的逻辑网络创建 IP 池](img/00025.jpeg)
- en: Provide the IP pool name and description and select the logical network we created.
  id: totrans-461
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供 IP 池名称和描述，并选择我们创建的逻辑网络。
- en: On **Network Sites**, click **Use an existing network site**.
  id: totrans-462
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**网络站点**上，点击**使用现有网络站点**。
- en: Next enter a usable IP range.![Creating an IP pool for the newly created logical
    network](img/00026.jpeg)
  id: totrans-463
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入一个可用的 IP 范围。![为新创建的逻辑网络创建 IP 池](img/00026.jpeg)
- en: Provide a gateway for the given IP range.
  id: totrans-464
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为给定的 IP 范围提供网关。
- en: Configure DNS, DNS Suffix and WINS settings if any.
  id: totrans-465
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果有，配置 DNS、DNS 后缀和 WINS 设置。
- en: Review the settings on the **Summary** page and create the IP pool.
  id: totrans-466
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**摘要**页面上查看设置并创建 IP 池。
- en: Creating a Virtualized VM Network and IP Pool on the Logical Network
  id: totrans-467
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 在逻辑网络上创建虚拟化的 VM 网络和 IP 池
- en: VM networks are used by virtual machine network adaptors to connect with a virtualized
    VM network use a logical network for PA. In a traditional network scenario one
    VM network is created per logical network and used by virtual machines. It is
    also possible to automatically create virtual network corresponding to the logical
    network.
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: VM 网络由虚拟机网络适配器使用，以便连接到虚拟化的 VM 网络，并使用逻辑网络作为 PA。在传统的网络场景中，每个逻辑网络创建一个 VM 网络并供虚拟机使用。也可以自动创建与逻辑网络对应的虚拟网络。
- en: Create a VM network
  id: totrans-469
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 创建一个 VM 网络
- en: 'The following are the steps to create a VM network:'
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是创建 VM 网络的步骤：
- en: Login to the VMM console and select **Logical Network**.
  id: totrans-471
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到 VMM 控制台并选择**逻辑网络**。
- en: Right click on **Logical Network** and select **Create VM network**.
  id: totrans-472
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击**逻辑网络**并选择**创建 VM 网络**。
- en: Provide name and description for VM network for identification. Select corresponding
    logical network.
  id: totrans-473
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为 VM 网络提供名称和描述以便识别。选择相应的逻辑网络。
- en: Configure the Isolation setting, click **Isolation using Hyper-V network virtualization**
    for isolated networks.![Create a VM network](img/00027.jpeg)
  id: totrans-474
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置隔离设置，点击**使用 Hyper-V 网络虚拟化进行隔离**来创建隔离网络。![创建 VM 网络](img/00027.jpeg)
- en: Provide the Virtual Network **Name** and **Subnet**.![Create a VM network](img/00028.jpeg)
  id: totrans-475
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供虚拟网络**名称**和**子网**。![创建 VM 网络](img/00028.jpeg)
- en: Select a Hyper-V Network Virtualization gateway if any.
  id: totrans-476
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果有，选择一个 Hyper-V 网络虚拟化网关。
- en: Review the configuration and finish the wizard for creating the VM network.
  id: totrans-477
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看配置并完成创建 VM 网络的向导。
- en: Create an IP pool for each VM network created by using the Create IP Pool wizard
    for VM network.
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: 为每个通过 VM 网络创建向导创建的 VM 网络创建 IP 池。
- en: The next steps in a private or service provider's cloud networking deployment
    is to create and attach all logical network and VM networks as per cloud network
    design and attach to host groups accordingly.
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: 私有或服务提供商云网络部署的下一步是根据云网络设计创建并附加所有逻辑网络和 VM 网络，并将其相应附加到主机组。
- en: Tip
  id: totrans-480
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: VM Network management wizard is available in the "VM and Services" workspace
    in VMM Console, not in fabric workspace.
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: VM 网络管理向导在 VMM 控制台的“VM 和服务”工作区中可用，而非在 fabric 工作区中。
- en: Apart from logical networks, VM networks and IP pools, VMM provides multiple
    other network resources mentioned above to add greater management control and
    flexibility on your cloud's network fabric.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 除了逻辑网络、VM网络和IP池之外，VMM还提供了多种其他网络资源，如上所述，以增强对云网络架构的管理控制和灵活性。
- en: MAC address pool
  id: totrans-483
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: MAC地址池
- en: MAC address pool allows you to provide a custom static MAC address for your
    virtual machine. While the VMM given MAC address pool is created by default, you
    can always create a new one as per requirement.
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: MAC地址池允许您为虚拟机提供自定义的静态MAC地址。虽然VMM默认创建了一个MAC地址池，但您始终可以根据需求创建一个新的池。
- en: Load balancers
  id: totrans-485
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 负载均衡器
- en: By using load balancing, you can easily distribute traffic between multiple
    servers for a scaled application. SCVMM has inbuilt support of using Microsoft
    NLB as a native load balancing provider, you can also add custom configurations
    for supported third party load balancer integration such as F5, Citrix and more.
    Custom configuration providers need to be installed for third party integration.
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用负载均衡，您可以轻松地在多个服务器之间分配流量，从而实现应用程序的扩展。SCVMM内置支持使用Microsoft NLB作为本地负载均衡提供程序，您还可以为支持的第三方负载均衡器集成（如F5、Citrix等）添加自定义配置。第三方集成的自定义配置提供程序需要安装。
- en: VIP template
  id: totrans-487
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: VIP模板
- en: VIP templates are configurations which are utilized by load balancers for virtual
    IP needs. They can be used for configuring VIP configuration for load balancing
    traffic rules such for HTTPS and so on.
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: VIP模板是负载均衡器用于虚拟IP需求的配置。它们可以用于配置VIP配置，负载均衡流量规则，如HTTPS等。
- en: Logical switches
  id: totrans-489
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 逻辑交换机
- en: These enable centralized networking deployment on your Hyper-V hosts. Logical
    switches can be configured to use specific port mapping, classifications and extensions.
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: 这些功能使得您可以在Hyper-V主机上集中部署网络。逻辑交换机可以配置为使用特定的端口映射、分类和扩展。
- en: Port profiles
  id: totrans-491
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 端口配置文件
- en: Port profiles enable deploying consistent network settings such as QoS, and
    advanced security features across all Hyper-V hosts.
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: 端口配置文件使得在所有Hyper-V主机上部署一致的网络设置成为可能，例如QoS和高级安全功能。
- en: Port classifications
  id: totrans-493
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 端口分类
- en: Port classifications can be used to classify ports such as 10GB networks, low
    bandwidth networks.
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: 端口分类可用于对端口进行分类，例如10GB网络、低带宽网络等。
- en: Network service
  id: totrans-495
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 网络服务
- en: In network services, third party network devices can be integrated with SCVMM
    such as TOR switches and so on.
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 在网络服务中，第三方网络设备可以与SCVMM集成，例如TOR交换机等。
- en: Planning and configuring cloud storage fabric with SCVMM
  id: totrans-497
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SCVMM规划和配置云存储架构
- en: Microsoft Windows Azure Pack based cloud solution support both block based storage
    and file based storage configured with VMM for storing virtual machines and other
    cloud IaaS resources.
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: 基于Microsoft Windows Azure Pack的云解决方案支持块存储和基于文件的存储，并可通过VMM配置，用于存储虚拟机和其他云IaaS资源。
- en: Storage requirements and solutions are likely to be different for private clouds
    and service provider clouds. While it is common to see traditional enterprise
    class SAN storage solutions in private clouds, software defined storage solutions
    on commodity hardware are also in use for both private and service provider cloud
    solution. VMM supports a wide range of storage solution integration for automated
    provisioning and management solving storage challenges for both private clouds
    and service provider clouds.
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: 私有云和服务提供商云的存储需求和解决方案可能会有所不同。虽然在私有云中通常可以看到传统的企业级SAN存储解决方案，但在私有云和服务提供商云解决方案中，基于通用硬件的软件定义存储解决方案也在使用。VMM支持多种存储解决方案集成，用于自动化配置和管理，解决私有云和服务提供商云的存储挑战。
- en: In the case of block based storage, VMM can take advantage of **Storage Area
    Network** (**SAN**) using Fibre Channel, iSCSI and SAS storage connectivity solutions
    for storing virtual machines and resources.
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: 在基于块的存储情况下，VMM可以利用**存储区域网络**（**SAN**）通过光纤通道、iSCSI和SAS存储连接解决方案来存储虚拟机和资源。
- en: For file based storages, VMM can be integrated with storage solutions supporting
    SMB 3.0 protocol for file based storage access. Windows server file server provides
    SMB capabilities, enabling shared storage capabilities without purchasing expensive
    storage array solutions.
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: 对于基于文件的存储，VMM可以与支持SMB 3.0协议的存储解决方案集成，以便访问基于文件的存储。Windows Server文件服务器提供SMB功能，使共享存储能力得以实现，而无需购买昂贵的存储阵列解决方案。
- en: Cloud storage deployment options in VMM
  id: totrans-502
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VMM中的云存储部署选项
- en: There are various options available in VMM to store virtual machines and other
    cloud resources. Every storage appears to Hyper-V hosts as local or remote storage,
    local storage stands for storage devices locally attached or assigned to hosts
    where remote storage defines remotely connected LUNs. Let's have a look at major
    options for providing storage fabric in a VMM environment.
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: VMM提供了多种选项来存储虚拟机和其他云资源。每个存储设备在Hyper-V主机上呈现为本地或远程存储，本地存储指的是本地附加或分配给主机的存储设备，而远程存储则指远程连接的LUN。让我们来看一下在VMM环境中提供存储架构的主要选项。
- en: '**Directly attached storage (DAS)**: This is storage disks connected directly
    to hypervisor hosts, commonly in a form of disk drive inside a server chassis
    connected via inbuilt RAID controller or SAS based JBOD connectivity. This is
    dedicated to each host and isn''t shared. This doesn''t provide any high availability
    or host failure tolerance, hence is not recommended for production usage.'
  id: totrans-504
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**直接附加存储（DAS）**：这是直接连接到虚拟化主机的存储磁盘，通常以服务器机箱内部的硬盘驱动器形式，通过内置RAID控制器或基于SAS的JBOD连接方式连接。这是专门为每个主机提供的，不可共享。它不提供高可用性或主机故障容错，因此不推荐用于生产环境。'
- en: '**Traditional SAN arrays**: Enterprise class storage solutions from leading
    vendors such as EMC, NetApp, Hitachi and so on, comes under this category. These
    solutions can be used to store virtual machines on LUNs using FC/iSCSI and other
    connectivity mechanisms. VMM can be integrated with iSCSI target arrays by supporting
    both static and dynamic discovery.'
  id: totrans-505
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**传统SAN阵列**：来自EMC、NetApp、日立等领先厂商的企业级存储解决方案属于这一类。这些解决方案可用于通过FC/iSCSI及其他连接机制在LUN上存储虚拟机。VMM可以通过支持静态和动态发现与iSCSI目标阵列集成。'
- en: '**Storage solutions with SMI-S or SMP providers**: Storage solutions which
    support integration with SCVMM using SMI-S or SMP protocol comes under this category.
    SMI-S enables automated storage provisioning and management using VMM console
    enabling a true automated cloud solution. It is recommended to integrate any supported
    existing traditional storage with VMM in a private cloud for automation at storage
    layer. See vendor specific guidelines for configuring SMI-S for VMM integration.'
  id: totrans-506
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**支持SMI-S或SMP提供者的存储解决方案**：支持通过SMI-S或SMP协议与SCVMM集成的存储解决方案属于这一类。SMI-S通过VMM控制台实现自动化存储配置和管理，提供真正的自动化云解决方案。建议在私有云中将任何支持的传统存储与VMM集成，实现存储层的自动化。有关配置SMI-S以进行VMM集成的详细信息，请参阅供应商的特定指南。'
- en: '**File storage (SMB 3.0)**: With Windows Server 2012 R2 Hyper-V supports storing
    virtual machines on file shares accessible via SMB protocol. Windows Server based
    file server clusters can be deployed and integrated with VMM for storing cloud
    virtual machines and resources.'
  id: totrans-507
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件存储（SMB 3.0）**：Windows Server 2012 R2 Hyper-V支持通过SMB协议访问的文件共享存储虚拟机。基于Windows
    Server的文件服务器集群可以部署并与VMM集成，用于存储云虚拟机和资源。'
- en: '**Scale out file server**: Scale out file server is a Windows Server feature
    which ensures continuous availability of file share storage across multiple hosts
    simultaneously. SOFS can take advantages of JBOD connected for file server nodes
    to provide always available file shares to Hyper-V hosts. SOFS uses SMB protocol
    for providing storage access. SOFS can be easily provisioned and managed using
    System Center Virtual Machine Manager.'
  id: totrans-508
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**横向扩展文件服务器**：横向扩展文件服务器是Windows Server的一个功能，确保在多个主机之间同时持续提供文件共享存储。SOFS可以利用连接的JBOD文件服务器节点，为Hyper-V主机提供始终可用的文件共享。SOFS使用SMB协议提供存储访问。可以通过System
    Center虚拟机管理器轻松配置和管理SOFS。'
- en: '**Software Defined Storage (Microsoft Storage Spaces)**: In today''s era of
    Software Defined infrastructure, Microsoft provides Windows storage spaces which
    can be utilized for delivering storage solutions on commodity hardware without
    purchasing expensive storage arrays. This can be utilized by cloud service providers
    for providing shared storage features and capabilities without investing in traditional
    storage solutions. Microsoft storage space groups physical disks together in a
    storage pool which can be used to create space for data storage requirements.
    It can be configured to protect failure at each level by maintain multiple copies
    of data. Storages spaces can be used to provide shared storage capabilities by
    using multiple nodes connected to JBOD trays.'
  id: totrans-509
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**软件定义存储（Microsoft存储空间）**：在今天的软件定义基础设施时代，微软提供了Windows存储空间，可用于在普通硬件上提供存储解决方案，而无需购买昂贵的存储阵列。这可以被云服务提供商用来提供共享存储功能和能力，而无需投资传统的存储解决方案。微软存储空间将物理磁盘组合在一个存储池中，可用于创建数据存储需求的空间。它可以配置为在每个级别保护故障，通过保持多个数据副本。存储空间可以通过使用连接到JBOD托盘的多个节点来提供共享存储功能。'
- en: Tip
  id: totrans-510
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: A list of supported storage solutions for VMM integration can be found at [http://social.technet.microsoft.com/wiki/contents/articles/16100.system-center-2012-vmm-supported-storage-arrays.aspx](http://social.technet.microsoft.com/wiki/contents/articles/16100.system-center-2012-vmm-supported-storage-arrays.aspx)
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 可在[http://social.technet.microsoft.com/wiki/contents/articles/16100.system-center-2012-vmm-supported-storage-arrays.aspx](http://social.technet.microsoft.com/wiki/contents/articles/16100.system-center-2012-vmm-supported-storage-arrays.aspx)找到支持VMM集成的存储解决方案列表。
- en: Configuring storage fabric in VMM
  id: totrans-512
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在VMM中配置存储架构
- en: Let's have a look at the various configurable parameters available in VMM for
    storage fabric.
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看在VMM中可用于存储架构的各种可配置参数。
- en: '**Storage classifications**: Storage classification can be used to provide
    a friendly name or container to storage resources available such as gold storage,
    silver storage differentiating upon factors such as capacity, performance, resiliency
    and more. This can ease daily administrative tasks while assigning storage by
    representing complex architecture in a simplified way. You can associate storage
    pools with classification for mapping resources with a friendly name. To create
    a storage classification you need to perform the following steps:'
  id: totrans-514
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**存储分类**：存储分类可用于为可用的存储资源提供友好的名称或容器，例如金牌存储、银牌存储，这些分类基于容量、性能、可靠性等因素进行区分。这可以简化日常管理任务，在分配存储时以简化的方式表示复杂的架构。你可以将存储池与分类关联，以便通过友好的名称映射资源。要创建存储分类，需要执行以下步骤：'
- en: Login to VMM console and open **Fabric** workspace.
  id: totrans-515
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到VMM控制台并打开**架构**工作区。
- en: Right click on **Storage** | **Classification and Pools** to create classification.
  id: totrans-516
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击**存储** | **分类和池**以创建分类。
- en: Provide a friendly name and description and click **Add**.
  id: totrans-517
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供一个友好的名称和描述，然后点击**添加**。
- en: '![Configuring storage fabric in VMM](img/00029.jpeg)'
  id: totrans-518
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![在VMM中配置存储架构](img/00029.jpeg)'
- en: '**Storage provider**: Storage provider provides options to add storage devices
    in VMM for automated LUN provisioning and management. VMM 2012 R2 provides flexibility
    to add the following storage solutions:'
  id: totrans-519
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**存储提供商**：存储提供商提供在VMM中添加存储设备以实现自动化LUN提供和管理的选项。VMM 2012 R2提供了以下存储解决方案的灵活性：'
- en: Windows based file server
  id: totrans-520
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于Windows的文件服务器
- en: SAN or NAS device discovered and managed by a SMI-S provider
  id: totrans-521
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过SMI-S提供商发现并管理的SAN或NAS设备
- en: SAN device managed by native SMP providers
  id: totrans-522
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由本地SMP提供商管理的SAN设备
- en: Fibre channel fabric discovered and managed by SMI-S providers
  id: totrans-523
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过SMI-S提供商发现并管理的光纤通道架构
- en: By integrating storage devices in VMM, we can provision and assign LUNs to Hyper-V
    hosts using VMM console, provisioning and management of storage devices can be
    performed using VMM, which allows the flexibility of having completed automated
    storage deployment and management.
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在VMM中集成存储设备，我们可以使用VMM控制台为Hyper-V主机提供和分配LUN，存储设备的提供和管理可以通过VMM进行，这允许完成自动化存储部署和管理的灵活性。
- en: 'Adding a storage device in VMM:'
  id: totrans-525
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在VMM中添加存储设备：
- en: Launch VMM console and connect to VMM server with admin permissions.
  id: totrans-526
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动VMM控制台，并以管理员权限连接到VMM服务器。
- en: Open fabric workspace, right click on **Providers** under the **Storage** section.
  id: totrans-527
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开架构工作区，在**存储**部分下右键点击**提供商**。
- en: Select **Add Storage Devices**, and select the type of device from the given
    option.![Configuring storage fabric in VMM](img/00030.jpeg)
  id: totrans-528
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**添加存储设备**，然后从给定选项中选择设备类型。![在VMM中配置存储面料](img/00030.jpeg)
- en: Provide discovery scope, credentials and more details depending upon the storage
    provider type.
  id: totrans-529
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供发现范围、凭据和更多详细信息，具体取决于存储提供商类型。
- en: Select an available storage device and finish the wizard to add.
  id: totrans-530
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个可用的存储设备并完成向导以进行添加。
- en: Verify the array listed in the VMM storage fabric workspace.
  id: totrans-531
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证在VMM存储面料工作区中列出的阵列。
- en: 'Post storage device integration tasks:'
  id: totrans-532
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储设备集成后的任务：
- en: Create storage pools and LUNs
  id: totrans-533
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建存储池和LUN
- en: Map the storage pool with classification created earlier
  id: totrans-534
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将存储池与之前创建的分类进行映射
- en: Assign LUNs and storage pools to the hosts
  id: totrans-535
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将LUN和存储池分配给主机
- en: Manage and monitor storage resources
  id: totrans-536
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理和监控存储资源
- en: Planning and Deploying Service Provider Foundation
  id: totrans-537
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 规划和部署服务提供商基础
- en: System Center Service Provider Foundation 2012 R2 is part of the System Center
    suite, available in System Center 2012 R2 Orchestrator installation media. SPF
    add multi-tenancy capabilities to System Center products such as SCVMM, SMA and
    more. SPF exposes an extensible OData Web Service that interacts with Virtual
    Machine Manager.
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: System Center Service Provider Foundation 2012 R2是System Center套件的一部分，可在System
    Center 2012 R2 Orchestrator安装介质中获得。SPF为System Center产品如SCVMM、SMA等增加了多租户能力。SPF暴露了一个可扩展的OData
    Web服务，与虚拟机管理器进行交互。
- en: Service providers and organization can design and develop their own cloud portals,
    and take advantage of SPF for utilizing IaaS capabilities of SCVMM. Windows Azure
    Pack uses SPF to integrate with SCVMM for provisioning and managing cloud IaaS
    resources such as virtual machines, virtual networks and so on.
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: 服务提供商和组织可以设计和开发自己的云门户，并利用SPF来使用SCVMM的IaaS能力。Windows Azure Pack通过SPF与SCVMM集成，以便提供和管理云IaaS资源，如虚拟机、虚拟网络等。
- en: SPF architecture and deployment options
  id: totrans-540
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SPF架构和部署选项
- en: 'SPF is a collection of four web services as follows:'
  id: totrans-541
  prefs: []
  type: TYPE_NORMAL
  zh: SPF是由四个Web服务组成，具体如下：
- en: '**SPF Admin Web Service**: Admin Web Service is responsible for creating and
    managing tenants, roles, stamps (SCVMM) and more. It can be accessed on `https://SPFSERVER:8090/SC2012R2/Admin/Microsoft.Management.Odata.svc`.
    User running SPF Admin Web Service application pool must be a member of local
    administrator and `SPF_Admin` local group on SPF server.'
  id: totrans-542
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SPF Admin Web服务**：Admin Web服务负责创建和管理租户、角色、印章（SCVMM）等。可以通过`https://SPFSERVER:8090/SC2012R2/Admin/Microsoft.Management.Odata.svc`访问此服务。运行SPF
    Admin Web服务应用程序池的用户必须是本地管理员和`SPF_Admin`本地组的成员。'
- en: '**SPF VMM Web Service**: VMM Web Service is responsible for getting operations
    performed by Virtual Machine Manager such as creating virtual machines, networks,
    user roles and more. This service is also responsible to maintain and replicating
    change performed at components such as WAP and SCVMM. It can be accessed on'
  id: totrans-543
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SPF VMM Web服务**：VMM Web服务负责执行虚拟机管理器的操作，如创建虚拟机、网络、用户角色等。此服务还负责维护和复制在WAP和SCVMM等组件上进行的更改。它可以通过以下地址访问：'
- en: '`https://SPFSERVER:8090/SC2012R2/VMM/Microsoft.Management.Odata.svc`. The user
    running SPF Admin Web Service application pool must be a member of the local administrator,
    `SPF_VMM` local group and VMM administrators on SPF and VMM server respectively.'
  id: totrans-544
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`https://SPFSERVER:8090/SC2012R2/VMM/Microsoft.Management.Odata.svc`。运行SPF
    Admin Web服务应用程序池的用户必须是本地管理员、`SPF_VMM`本地组的成员，并且分别是SPF和VMM服务器上的VMM管理员。'
- en: '**SPF Usage Service**: Usage Web Service integrates with System Center Operations
    Manager Data warehouse and is used by WAP or third party billing providers for
    gathering resources usage data. A user account running Usage Service must be a
    part of the local administrator and `SPF_Usage` group on the SPF server along
    with access on the SC Operations Manager data warehouse database.'
  id: totrans-545
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SPF Usage服务**：Usage Web服务与System Center Operations Manager数据仓库集成，并由WAP或第三方计费提供商用于收集资源使用数据。运行Usage服务的用户帐户必须是本地管理员和`SPF_Usage`组的成员，并具有对SC
    Operations Manager数据仓库数据库的访问权限。'
- en: '**SPF Provider Service**: Provider Web Service is used by resource providers
    for delivering IaaS services. Provider services provide Microsoft ASP.NET Web
    API and not OData as in the case of other web services. Provider Service also
    uses the VMM and admin service. Users running the SPF Provider Web Service application
    pool must be a member of local administrator and SPF_Provider, SPF_VMM, and SPF_Admin
    local groups on the SPF Server.'
  id: totrans-546
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SPF 提供程序服务**：提供程序 Web 服务供资源提供者交付 IaaS 服务。提供程序服务使用 Microsoft ASP.NET Web API，而非其他
    Web 服务使用的 OData。提供程序服务还使用 VMM 和管理员服务。运行 SPF 提供程序 Web 服务应用程序池的用户必须是 SPF 服务器上的本地管理员及
    SPF_Provider、SPF_VMM 和 SPF_Admin 本地组的成员。'
- en: 'System Center Service Provider Foundation can be deployed in two ways:'
  id: totrans-547
  prefs: []
  type: TYPE_NORMAL
  zh: 系统中心服务提供者基础结构可以通过两种方式进行部署：
- en: '**Standalone Single Server deployment**: In case of standalone deployment,
    only one server will be deployed in a solution with no redundancy. This is not
    recommended for production and is used for test and evaluation purposes only.
    All web services are always installed on the same server.'
  id: totrans-548
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**独立单服务器部署**：在独立部署的情况下，解决方案中仅部署一个服务器，且没有冗余。这种方式不推荐用于生产环境，仅用于测试和评估目的。所有 Web
    服务始终安装在同一台服务器上。'
- en: '**Highly available scaled deployment**: SPF support highly available deployment
    with the use of load balancers. Hardware LBs or Microsoft NLB can be used for
    providing load balancing between multiple SPF servers. Multiple SPF servers can
    be deployed behind a load balancer pointing to a highly available database for
    providing HA capabilities to SPF deployment at each layer. This is the recommended
    deployment model for a production scenario.'
  id: totrans-549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高度可用的可扩展部署**：SPF 支持使用负载均衡器进行高度可用的部署。可以使用硬件负载均衡器（LB）或 Microsoft NLB 提供多个 SPF
    服务器之间的负载均衡。可以将多个 SPF 服务器部署在负载均衡器后面，指向一个高度可用的数据库，以为 SPF 部署在每个层提供高可用性（HA）能力。这是生产环境场景中推荐的部署模型。'
- en: Installing Service Provider Foundation 2012 R2
  id: totrans-550
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装服务提供者基础结构 2012 R2
- en: Like every other system center or Microsoft product, SPF also has a set of prerequisites
    which need to be met before starting installation. SPF installation binaries are
    included in System Center 2012 R2 Orchestrator media.
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: 和其他系统中心或 Microsoft 产品一样，SPF 也有一套前提条件，需要在开始安装之前满足。SPF 安装二进制文件包含在 System Center
    2012 R2 Orchestrator 媒体中。
- en: Installation prerequisites
  id: totrans-552
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装前提条件
- en: The following are the installation prerequisites.
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是安装前提条件。
- en: 'Create SPF service accounts as follows (Active Directory Accounts):'
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: 按如下方式创建 SPF 服务账户（Active Directory 账户）：
- en: '| Account name | Purpose | Permissions |'
  id: totrans-555
  prefs: []
  type: TYPE_TB
  zh: '| 账户名 | 目的 | 权限 |'
- en: '| --- | --- | --- |'
  id: totrans-556
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Spfsvc | SPF service account for running IIS application pool | Member of
    local administrator + SPF local groups + SCVMM admin + SQLDB sysadmin |'
  id: totrans-557
  prefs: []
  type: TYPE_TB
  zh: '| Spfsvc | 用于运行 IIS 应用程序池的 SPF 服务账户 | 本地管理员 + SPF 本地组 + SCVMM 管理员 + SQLDB 系统管理员
    |'
- en: '| Spflocal | Local account for SPF integration | Member of local administrator
    + SPF local groups + SCVMM admin |'
  id: totrans-558
  prefs: []
  type: TYPE_TB
  zh: '| Spflocal | SPF 集成的本地账户 | 本地管理员 + SPF 本地组 + SCVMM 管理员 |'
- en: Separate service accounts can also be created for admin, provider, usage and
    VMM application pool if required.
  id: totrans-559
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，还可以为管理员、提供程序、使用情况和 VMM 应用程序池创建独立的服务账户。
- en: Software prerequisites
  id: totrans-560
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 软件前提条件
- en: 'The following software needs to be installed before starting Service Provider
    Foundation installation:'
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始安装服务提供者基础结构之前，需要安装以下软件：
- en: 'Windows features:'
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 功能：
- en: Management OData Internet Information Services (IIS) extension
  id: totrans-563
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理 OData 互联网信息服务（IIS）扩展
- en: NET Framework 4.5 features, WCF Services, and HTTP activation
  id: totrans-564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: .NET Framework 4.5 功能，WCF 服务和 HTTP 激活
- en: 'For Web Server (IIS) server install the following components of IIS:'
  id: totrans-565
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于 Web 服务器（IIS），请安装以下 IIS 组件：
- en: Basic authentication
  id: totrans-566
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本身份验证
- en: Windows authentication
  id: totrans-567
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 身份验证
- en: Application deployment ASP.NET 4.5
  id: totrans-568
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序部署 ASP.NET 4.5
- en: Application development ISAPI extensions
  id: totrans-569
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序开发 ISAPI 扩展
- en: Application deployment ISAPI filters
  id: totrans-570
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序部署 ISAPI 过滤器
- en: IIS Management scripts and Tools Role Service
  id: totrans-571
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: IIS 管理脚本和工具角色服务
- en: 'Web Services:'
  id: totrans-572
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web 服务：
- en: WCF data services 5.0 for OData V3
  id: totrans-573
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: WCF 数据服务 5.0 用于 OData V3
- en: ASP.NET MVC 4
  id: totrans-574
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ASP.NET MVC 4
- en: Virtual Machine Manager 2012 R2 Console
  id: totrans-575
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟机管理器 2012 R2 控制台
- en: Certificates SPF creates self-signed certificate, CA provided SSL certificates
    should be created for production deployments
  id: totrans-576
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 证书 SPF 创建自签名证书，生产环境部署应由 CA 提供 SSL 证书
- en: Note
  id: totrans-577
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注：
- en: The local account is used by Windows Azure Pack for registering SPF.
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: 本地账户由 Windows Azure Pack 用于注册 SPF。
- en: Installation procedure
  id: totrans-579
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装过程
- en: 'The following is the installation procedure:'
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是安装过程：
- en: Login to SPF server and mount System Center Orchestrator media.
  id: totrans-581
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到SPF服务器并挂载System Center Orchestrator媒体。
- en: Run `SetupOrchestrator.exe` from the mounted media.
  id: totrans-582
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从已挂载的媒体中运行`SetupOrchestrator.exe`。
- en: Click **Service Provider Foundation** under the **Standalone installation**
    section.
  id: totrans-583
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**独立安装**部分点击**服务提供商基础设施**。
- en: This will launch the **SPF Installation wizard**, click **Install** to proceed
    further.
  id: totrans-584
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将启动**SPF安装向导**，点击**安装**以继续。
- en: Accept the agreement and proceed.
  id: totrans-585
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受协议并继续。
- en: Setup will check for prerequisite check, proceed if all checks are completed
    successfully. Review errors in case of any failure.
  id: totrans-586
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置程序将检查前提条件，如果所有检查成功完成，继续进行。如果出现失败，检查错误。
- en: Provide database **Server** IP and **Port number** along with **Database name**.![Installation
    procedure](img/00031.jpeg)
  id: totrans-587
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供数据库**服务器**IP和**端口号**以及**数据库名称**。![安装过程](img/00031.jpeg)
- en: Provide the installation folder for SPF files and a port number. (By default
    `C:\intepub` and `8090`). Select **Generate self signed certificate** or provide
    pre-created SSL for SPF.
  id: totrans-588
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供SPF文件的安装文件夹和端口号。（默认`C:\intepub`和`8090`）。选择**生成自签名证书**或提供预先创建的SSL证书用于SPF。
- en: SPF automatically creates local groups on the SPF server for administrative
    permissions, provide SPF Admin service account and admin account, SCVMM-Admins
    group and SPF local account.
  id: totrans-589
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SPF会自动在SPF服务器上创建本地组以进行管理权限，提供SPF管理员服务账户和管理员账户，SCVMM-Admins组和SPF本地账户。
- en: Provide service account details for each service that is, admin web, VMM, usage
    and provider.![Installation procedure](img/00032.jpeg)
  id: totrans-590
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供每个服务的服务账户详情，即管理员Web、VMM、使用情况和提供者。![安装过程](img/00032.jpeg)
- en: Review the installation configuration and summary and proceed further for installation.
  id: totrans-591
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 审查安装配置和摘要，然后继续进行安装。
- en: Close the wizard on successful installation.
  id: totrans-592
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装成功后关闭向导。
- en: Post-installation tasks
  id: totrans-593
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装后任务
- en: 'The following are the post installation tasks:'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是安装后的任务：
- en: Verify successful installation and application pools status in IIS.![Post-installation
    tasks](img/00033.jpeg)
  id: totrans-595
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证IIS中的安装成功和应用程序池状态。![安装后任务](img/00033.jpeg)
- en: Verify local groups created in the SPF server, add `spflocal user` in all groups.![Post-installation
    tasks](img/00034.jpeg)
  id: totrans-596
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证在SPF服务器中创建的本地组，并将`spflocal user`添加到所有组中。![安装后任务](img/00034.jpeg)
- en: Enable **Basic Authentication** for the SPF website, this is a requirement for
    WAP integration.
  id: totrans-597
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为SPF网站启用**基本身份验证**，这是WAP集成的要求。
- en: Summary
  id: totrans-598
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter we learned about planning for cloud fabric for private cloud
    needs and service providers. We covered infrastructure planning at each layer
    starting from hardware to hypervisors, network and storage. Hyper-V deployment
    best practices were also covered which will help in deploying a reliable and stable
    hypervisor layer.
  id: totrans-599
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了为私有云需求和服务提供商规划云架构。我们涵盖了从硬件到虚拟化程序、网络和存储的每一层的基础设施规划。还介绍了Hyper-V的部署最佳实践，这将有助于部署可靠和稳定的虚拟化程序层。
- en: We learned about SCVMM and SPF architecture and has installation walkthrough
    for both products. We learned about planning and configuration of compute, network
    and storage for cloud fabric in SCVMM.
  id: totrans-600
  prefs: []
  type: TYPE_NORMAL
  zh: 我们了解了SCVMM和SPF架构，并且为这两个产品提供了安装指南。我们学习了SCVMM中云架构的计算、网络和存储的规划和配置。
- en: In the next chapter we will be covering installation and configuration of Windows
    Azure Pack portals, API's and authentication sites.
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍Windows Azure Pack门户、API和身份验证站点的安装与配置。
