- en: Chapter 3. Keystone – OpenStack Identity Service
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章. Keystone – OpenStack身份服务
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们将讨论以下主题：
- en: Introduction – OpenStack Identity
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍 – OpenStack身份
- en: Creating OpenStack domains in Keystone
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Keystone中创建OpenStack域
- en: Enabling domains in the OpenStack dashboard
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在OpenStack仪表盘中启用域
- en: Creating OpenStack projects in Keystone
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Keystone中创建OpenStack项目
- en: Configuring roles in Keystone
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置Keystone中的角色
- en: Adding users in Keystone
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Keystone中添加用户
- en: Configuring groups in Keystone
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置Keystone中的组
- en: Deleting projects
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除项目
- en: Deleting users
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除用户
- en: Deleting roles
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除角色
- en: Deleting groups
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除组
- en: Deleting domains
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除域
- en: OpenStack endpoint information
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenStack端点信息
- en: Introduction – OpenStack Identity
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍 – OpenStack身份
- en: The OpenStack Identity service, known as **Keystone** , provides services for
    authenticating and managing user accounts and role information for our OpenStack
    cloud environment.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: OpenStack身份服务，称为**Keystone**，提供身份验证和管理用户帐户及角色信息的服务，适用于我们的OpenStack云环境。
- en: It is a crucial service that underpins the authentication and verification between
    all of our OpenStack cloud services and is the first service that needs to be
    installed within an OpenStack environment. The OpenStack Identity service authenticates
    users and projects by sending a validated authorization token between all OpenStack
    services. This token is passed to the other services, such as Storage and Compute,
    to grant user access to specific functionalities. Therefore, configuration of
    the OpenStack Identity service must be completed first before using any of the
    other services. Setting up of the Identity service involves the creation of appropriate
    roles for users and services, projects, the user accounts, and the service API
    endpoints that make up our cloud infrastructure. Since we are using Ansible for
    deploying our environment (refer to [Chapter 1](part0014_split_000.html#DB7S2-189e69df43a248268db97cde1b1a8e47
    "Chapter 1. Installing OpenStack with Ansible"), *Installing OpenStack with Ansible*
    for more details), all the basic configuration is done for us in the Ansible playbooks.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个至关重要的服务，支撑着我们所有OpenStack云服务之间的认证与验证，是在OpenStack环境中需要首先安装的服务。OpenStack身份服务通过在所有OpenStack服务之间传递一个经过验证的授权令牌来验证用户和项目。这个令牌会传递给其他服务，如存储和计算服务，以授予用户对特定功能的访问权限。因此，必须首先完成OpenStack身份服务的配置，才能使用其他任何服务。设置身份服务涉及为用户和服务、项目、用户帐户以及构成云基础设施的服务API端点创建适当的角色。由于我们使用Ansible来部署环境（更多细节请参见[第1章](part0014_split_000.html#DB7S2-189e69df43a248268db97cde1b1a8e47
    "第1章. 使用Ansible安装OpenStack")，*使用Ansible安装OpenStack*），所有基本配置都已经在Ansible剧本中为我们完成。
- en: In Keystone, we have the concepts of domains, projects, roles, users, and user
    groups. A Keystone domain (not to be confused with a DNS domain) is a high level
    OpenStack Identity resource that contains projects, users, and groups. A project
    has resources such as users, images, and instances, as well as networks in it
    that can be restricted only to that particular project, unless explicitly shared
    with others. A user can belong to one or more projects and is able to switch between
    them to gain access to those resources. Users within a project can have various
    roles assigned. Users can be organized into user groups and the groups can have
    roles assigned to them. In the most basic scenario, a user can be assigned either
    the role of admin or just be a member. When a user has admin privileges within
    a project, the admin is able to utilize features that can affect the project (such
    as modifying external networks), whereas a normal user is assigned the member
    role. This member role is generally assigned to perform user-related roles, such
    as spinning up instances, creating volumes, and creating isolated, project-specific
    networks.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在Keystone中，我们有域、项目、角色、用户和用户组的概念。Keystone域（不要与DNS域混淆）是一个高层次的OpenStack身份资源，其中包含项目、用户和组。一个项目有用户、镜像、实例等资源，并且其中的网络可以仅限于该项目，除非显式与其他项目共享。一个用户可以属于一个或多个项目，并能够在这些项目之间切换，以访问相应的资源。项目中的用户可以分配不同的角色。用户可以组织成用户组，并且组可以被分配角色。在最基本的场景下，用户可以被分配管理员角色或仅是成员。当一个用户在项目中拥有管理员权限时，管理员能够利用可以影响项目的功能（例如修改外部网络），而普通用户则被分配成员角色。这个成员角色通常用于执行与用户相关的任务，如启动实例、创建卷和创建隔离的项目专用网络。
- en: Note
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Projects used to be called **tenants** in early versions of OpenStack.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 项目在早期版本的OpenStack中被称为**租户**。
- en: Creating OpenStack domains in Keystone
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Keystone 中创建 OpenStack 域
- en: If you wish to use more than one domain for your OpenStack deployment, consider
    using separate domains. Think of domains as separate accounts or departments in
    large organizations. For this section, we will create a domain for our project,
    called `bookstore`.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望在 OpenStack 部署中使用多个域名，请考虑使用单独的域。在大型组织中，域可以视为单独的账户或部门。在本节中，我们将为我们的项目创建一个名为
    `bookstore` 的域。
- en: Getting ready
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您已以具有管理员权限的用户身份登录到正确配置的 OpenStack 客户端，并能够访问 OpenStack 环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 参考 [第 2 章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第 2 章。 OpenStack
    客户端")，*OpenStack 客户端*，以了解设置您的环境以使用 OpenStack 命令行客户端的详细信息。
- en: How to do it…
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'To create a domain in our OpenStack environment, perform the following step:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 要在我们的 OpenStack 环境中创建一个域，请执行以下步骤：
- en: 'We start by creating a domain called `bookstore` as follows:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们首先创建一个名为 `bookstore` 的域，如下所示：
- en: '[PRE0]'
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The output will look similar to this:'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出将类似于以下内容：
- en: '![How to do it…](img/00017.jpeg)'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何做…](img/00017.jpeg)'
- en: How it works…
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: 'In OpenStack, high level identity resources can be grouped under different
    domains. If you have to manage distinct organizations within your OpenStack environment,
    having separate domains for managing them might be very beneficial. By default,
    your OpenStack environment most likely has a default domain called "Default."
    By running the preceding command, we just created an additional domain that can
    used to manage resources related to this book. The syntax is as follows:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在 OpenStack 中，高级别的身份资源可以分组到不同的域下。如果您需要在 OpenStack 环境中管理不同的组织，为它们管理的资源使用单独的域可能非常有益。默认情况下，您的
    OpenStack 环境很可能有一个名为 "Default" 的默认域。通过运行上述命令，我们刚刚创建了一个额外的域，用于管理与本书相关的资源。语法如下：
- en: '[PRE1]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `description` parameter is also optional, but highly recommended. The domain
    name must be unique to other domains in the environment.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`description` 参数也是可选的，但强烈推荐。域名必须与环境中的其他域名唯一。'
- en: Note
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: In our recipes, we will use the `--domain` parameter and specify a domain name.
    If the domain is not specified, the OpenStack command-line client will use the
    domain set for the current user that was specified in the `openrc` file. Most
    likely, that will be the `default` domain.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的操作中，我们将使用 `--domain` 参数并指定域名。如果未指定域，则 OpenStack 命令行客户端将使用在 `openrc` 文件中指定的当前用户的域，最可能是
    `default` 域。
- en: Enabling domains in the OpenStack dashboard
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 OpenStack 仪表板中启用域
- en: If you are using multiple domains in your OpenStack environment, you will need
    to enable them in the OpenStack dashboard (Horizon) as well. To do so, the `OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT`
    variable in Horizon settings needs to be set to `True`. In this example, we will
    show you how to do so using OpenStack Ansible playbook.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在 OpenStack 环境中使用多个域，还需要在 OpenStack 仪表板（Horizon）中启用它们。为此，需要将 Horizon 设置中的
    `OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT` 变量设置为 `True`。在此示例中，我们将展示如何使用 OpenStack
    Ansible playbook 完成此操作。
- en: Getting ready
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We are going to use Ansible to update Horizon settings. Make sure that you have
    access to your `openstack-ansible` deployment host.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 Ansible 更新 Horizon 设置。确保您可以访问您的 `openstack-ansible` 部署主机。
- en: How to do it…
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做…
- en: 'To enable multidomain support in the OpenStack dashboard, we will update one
    horizon variable, `OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT` in `local_settings.py`
    using the `openstack-ansible` deployment tool. First, you will need to connect
    to your `openstack-ansible` deployment host. Once connected, execute the following
    steps:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 OpenStack 仪表板中启用多域支持，我们将使用 `openstack-ansible` 部署工具更新 `local_settings.py`
    中的一个 Horizon 变量 `OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT`。首先，您需要连接到您的 `openstack-ansible`
    部署主机。连接后，执行以下步骤：
- en: 'Edit the `/etc/openstack_deploy/user_variables.yml` file to add the following
    line:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑 `/etc/openstack_deploy/user_variables.yml` 文件，添加以下行：
- en: '[PRE2]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Deploy Horizon with the `openstack-ansible` command:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `openstack-ansible` 命令部署 Horizon：
- en: '[PRE3]'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `openstack-ansible` command produces a lot of output. For brevity, its output
    has been omitted.
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`openstack-ansible` 命令会生成大量输出。为简洁起见，已省略其输出。'
- en: Launch the OpenStack dashboard to verify that the login screen now shows domain
    field:![How to do it…](img/00018.jpeg)
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动OpenStack仪表盘，验证登录屏幕现在是否显示域字段：![如何操作…](img/00018.jpeg)
- en: How it works…
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: In OpenStack, if you are taking advantage of the multiple domain functionality,
    you have full control via command-line tools. However, if you want to be able
    to use the OpenStack dashboard with multiple domains, you will need to enable
    Horizon's multidomain support. To do so, you need to update the Horizon settings
    file. Since we are using the `openstack-ansible` tool, we updated the `user_variables.yml`
    file and ran the `openstack-ansible` command. This command updated the required
    variable and restarted the `apache2` (HTTP server) services on the Horizon container.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在OpenStack中，如果你正在利用多域功能，可以通过命令行工具完全控制。然而，如果你希望能够在OpenStack仪表盘上使用多个域，则需要启用Horizon的多域支持。为此，你需要更新Horizon设置文件。由于我们使用的是`openstack-ansible`工具，我们更新了`user_variables.yml`文件并运行了`openstack-ansible`命令。此命令更新了所需的变量，并重新启动了Horizon容器上的`apache2`（HTTP服务器）服务。
- en: Creating OpenStack projects in Keystone
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Keystone中创建OpenStack项目
- en: Users can't be created without having a project assigned to them, so these must
    be created first. For this section, we will create a project for our users, called
    `cookbook`.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 用户在没有分配项目的情况下无法创建，因此必须先创建项目。对于本节内容，我们将为我们的用户创建一个名为`cookbook`的项目。
- en: Getting ready
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你已登录到配置正确的OpenStack客户端，并且可以作为具有管理员权限的用户访问OpenStack环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 请参阅[第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第2章。OpenStack客户端")，*OpenStack客户端*，了解如何设置环境以使用OpenStack命令行客户端。
- en: How to do it…
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'To create a project in our OpenStack environment, perform the following steps:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 要在我们的OpenStack环境中创建项目，请执行以下步骤：
- en: 'We start by creating a project called `cookbook` as follows:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们首先创建一个名为`cookbook`的项目，如下所示：
- en: '[PRE4]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The command should produce the output similar to this:'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 该命令应产生类似如下的输出：
- en: '![How to do it…](img/00019.jpeg)'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00019.jpeg)'
- en: How it works…
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'By running the preceding command, we just created a project in our `bookstore`
    domain. The syntax is as follows:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 通过运行前面的命令，我们刚刚在`bookstore`域中创建了一个项目。语法如下：
- en: '[PRE5]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The `domain` parameter is optional, used to determine which domain the project
    will belong to. If omitted, the project will be created in the `default` domain.
    The `description` parameter is also optional, but highly recommended. The `name`
    parameter has to be unique to the installation.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '`domain`参数是可选的，用于确定项目将属于哪个域。如果省略，项目将在`default`域中创建。`description`参数也是可选的，但强烈建议填写。`name`参数必须在该安装中唯一。'
- en: Configuring roles in Keystone
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Keystone中配置角色
- en: Roles are the permissions given to users within a project. Roles can also be
    scoped to a particular domain, making it possible to restrict permissions for
    particular users to a domain and project. If you used Ansible to install your
    OpenStack environment, it should already contain some default roles, such as `admin`
    and `_member_`. Here we will configure one role, a `cloud_admin` role that allows
    for administration of our example `bookstore` domain environment and a `user`
    role for the `default` domain that is given to ordinary users who will be using
    the cloud environment.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 角色是分配给项目中用户的权限。角色还可以限定在特定的域中，这样可以限制特定用户在某个域和项目中的权限。如果你使用了Ansible安装OpenStack环境，它应该已经包含一些默认角色，例如`admin`和`_member_`。在这里，我们将配置一个角色，即`cloud_admin`角色，允许管理我们的示例`bookstore`域环境，以及一个`user`角色，授予`default`域中的普通用户，该用户将使用云环境。
- en: Getting ready
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你已登录到配置正确的OpenStack客户端，并且可以作为具有管理员权限的用户访问OpenStack环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 请参阅[第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第2章。OpenStack客户端")，*OpenStack客户端*，了解如何设置环境以使用OpenStack命令行客户端。
- en: How to do it…
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'To create the required roles in our OpenStack environment, perform the following
    steps:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 要在我们的OpenStack环境中创建所需的角色，请执行以下步骤：
- en: 'Creation of the `cloud_admin` role is done as follows:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`cloud_admin`角色的创建如下所示：'
- en: '[PRE6]'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![How to do it…](img/00020.jpeg)'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00020.jpeg)'
- en: 'To configure the `user` role for the `default` domain, execute the following
    command:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要为`default`域配置`user`角色，请执行以下命令：
- en: '[PRE7]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![How to do it…](img/00021.jpeg)'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00021.jpeg)'
- en: This command created a new role called `user`. Since we didn't specify a domain,
    it was created under the `default` domain.
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 该命令创建了一个名为`user`的新角色。由于我们未指定域，它是在`default`域下创建的。
- en: 'View roles associated with the `bookstore` domain:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看与`bookstore`域关联的角色：
- en: '[PRE8]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![How to do it…](img/00022.jpeg)'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00022.jpeg)'
- en: 'List roles associated with the current admin user:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 列出与当前管理员用户关联的角色：
- en: '[PRE9]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![How to do it…](img/00023.jpeg)'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00023.jpeg)'
- en: How it works…
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Creation of roles is simply achieved using the OpenStack client, specifying
    the `role create` option with the following syntax:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 角色的创建简单地通过OpenStack客户端完成，使用`role create`选项，语法如下：
- en: '[PRE10]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The `domain_name` attribute is optional, if you omit it, a role for the `default`
    domain will be created.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '`domain_name`属性是可选的，如果省略该属性，将为`default`域创建一个角色。'
- en: 'For the `role_name` attribute, the `admin` and `_member_` roles names cannot
    be used again. The `admin` role is set by default in OpenStack code starting with
    the Pike release, and in releases before Pike in the `/etc/keystone/policy.json`
    file, as having administrative rights:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`role_name`属性，`admin`和`_member_`角色名称不能重复使用。`admin`角色是OpenStack代码中从Pike版本开始默认设置的，在Pike版本之前的版本中，它在`/etc/keystone/policy.json`文件中被设置为具有管理员权限：
- en: '[PRE11]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The `_member_` role is also configured by default in the dashboard when a nonadmin
    user is created through the web interface.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '`_member_`角色在通过Web界面创建非管理员用户时，也会在仪表盘中默认配置。'
- en: 'On creation of the role, the ID associated with the role is returned, and we
    can use it when assigning roles to users. To see a list of roles and the associated
    IDs in our environment, we can issue the following command:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 创建角色时，会返回与角色关联的ID，我们可以在分配角色给用户时使用它。要查看我们环境中角色及其关联ID的列表，可以执行以下命令：
- en: '[PRE12]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Note
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If the `domain` parameter is not specified, you will see roles associated only
    with your current user's domain.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 如果未指定`domain`参数，则只会看到与当前用户域关联的角色。
- en: Adding users in Keystone
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Keystone中添加用户
- en: Adding users to OpenStack Identity service requires the user to belong to a
    domain or a project in the domain and to be assigned a role defined in the domain
    or the project. For this section, we will create two users. The first user will
    be named `cloud_admin` and will have the `cloud_admin` role assigned to them in
    the `cookbook` project. The second user will be named `reader` and will have the
    default `_member_` role assigned to them in the same `cookbook` project.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 向OpenStack身份服务中添加用户需要用户属于某个域或该域中的项目，并且需要分配一个在该域或项目中定义的角色。在本节中，我们将创建两个用户。第一个用户命名为`cloud_admin`，并将在`cookbook`项目中为其分配`cloud_admin`角色。第二个用户命名为`reader`，并将在同一`cookbook`项目中为其分配默认的`_member_`角色。
- en: Getting ready
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你已登录到正确配置的OpenStack客户端，并且可以作为具有管理员权限的用户访问OpenStack环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 参见[第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第2章.
    OpenStack客户端")，*OpenStack客户端*，了解如何设置你的环境以使用OpenStack命令行客户端。
- en: How to do it…
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: In order to create a user in OpenStack and assign roles to it, we will need
    to execute the commands listed below.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在OpenStack中创建用户并为其分配角色，我们需要执行以下列出的命令。
- en: First, get the `bookstore` domain ID or domain name:![How to do it…](img/00024.jpeg)
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，获取`bookstore`域ID或域名：![如何操作…](img/00024.jpeg)
- en: 'Using the `bookstore` domain name, create a new `cloud_admin` user:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`bookstore`域名，创建一个新的`cloud_admin`用户：
- en: '[PRE13]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '![How to do it…](img/00025.jpeg)'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00025.jpeg)'
- en: 'Next, get a cookbook project ID or project name:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，获取一个cookbook项目的ID或项目名：
- en: '[PRE14]'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![How to do it…](img/00026.jpeg)'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00026.jpeg)'
- en: 'Create the `reader` user in the `bookstore` domain `cookbook` project:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`bookstore`域的`cookbook`项目中创建`reader`用户：
- en: '[PRE15]'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![How to do it…](img/00027.jpeg)'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00027.jpeg)'
- en: 'Assign `cloud_admin` user to the `admin` role:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`cloud_admin`用户分配给`admin`角色：
- en: '[PRE16]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: There is no output from this command.
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令没有输出。
- en: 'Assign the `reader` user to the `_member_` role:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`reader`用户分配给`_member_`角色：
- en: '[PRE17]'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: There is no output from this command.
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令没有输出。
- en: 'List user and role assignment:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 列出用户和角色分配：
- en: '[PRE18]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The output will be a matrix of role, user, group, project, and domain IDs. We
    omit the example output due to sheer size of the table that contains a matrix
    of IDs for each role, user, group, project, domain, and whether the role was inherited.
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出将是角色、用户、组、项目和域ID的矩阵。由于包含每个角色、用户、组、项目、域的ID矩阵及其是否继承角色的庞大表格，我们省略了示例输出。
- en: How it works…
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理……
- en: Adding users in the OpenStack Identity service involves a number of steps and
    dependencies. First, a domain and a project are required for the user to be part
    of. A user must always belong to a domain. If there are no custom domains created,
    a `default` domain will be used. Once the project exists, the user can be added.
    At this point, the user has no role associated, so the final step is to assign
    the role to this user, such as `_member_,` `admin`, or a custom role.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在OpenStack身份服务中添加用户涉及多个步骤和依赖关系。首先，需要一个域和项目，用户必须属于其中一个。用户必须始终属于一个域。如果没有创建自定义域，则将使用`default`域。一旦项目存在，用户可以被添加。在此时，用户没有关联的角色，因此最后一步是将角色分配给该用户，例如`_member_`、`admin`或自定义角色。
- en: 'To create a user with the `user create` option, the syntax is as follows:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`user create`选项创建用户时，语法如下：
- en: '[PRE19]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: The `user_name` attribute is an arbitrary name, but cannot contain any spaces.
    A `password` attribute must be present. In the previous examples, these were set
    to `verysecret`. If the `domain` attribute is not specified, the `default` domain
    will be set.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '`user_name`属性是一个任意名称，但不能包含空格。必须存在`password`属性。在之前的示例中，这些设置为`verysecret`。如果未指定`domain`属性，则将设置为`default`域。'
- en: 'To assign a role to a user with the `role add` option, the syntax is as follows
    for the `default` domain:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用`role add`选项将角色分配给用户，`default`域的语法如下：
- en: '[PRE20]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'For a user in a custom domain, use the following syntax to assign a role:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 对于自定义域中的用户，使用以下语法分配角色：
- en: '[PRE21]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The `role_domain` parameter is the name (or ID) of the domain to which the role
    belongs.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '`role_domain`参数是角色所属的域的名称（或ID）。'
- en: 'We will also need to have the names or IDs of the user, role, and project in
    order to assign roles to users. These names or IDs can be found using the following
    commands:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要用户、角色和项目的名称或ID，以便将角色分配给用户。这些名称或ID可以通过以下命令找到：
- en: '[PRE22]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The `--domain <domain>` option is only required if custom domains are used.
    To obtain a list of domains, issue the following command:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '`--domain <domain>`选项仅在使用自定义域时需要。如果要获取域列表，请发出以下命令：'
- en: '[PRE23]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'To get a matrix of domain, project, user, and role assignments, use the following
    command:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取域、项目、用户和角色分配的矩阵，请使用以下命令：
- en: '[PRE24]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Configuring groups in Keystone
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置Keystone中的组
- en: If you wish to organize users by their roles, you can create a user group using
    Keystone groups. Groups are owned by a domain. In this example, we will create
    one group, `reader_group`, and set a `cloud_admin` role to it. We will also add
    two users to it, `reader` and `reader1`. We will also verify that the users belong
    to the group, as well as remove one of the users afterwards.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望按角色组织用户，可以使用Keystone组创建一个用户组。组属于一个域。在此示例中，我们将创建一个组`reader_group`，并为其设置`cloud_admin`角色。我们还将向其中添加两个用户`reader`和`reader1`。我们还将验证这些用户是否属于该组，并在之后移除其中一个用户。
- en: Getting ready
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 正在准备中
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您已登录到正确配置的OpenStack客户端，并且能够以具有管理员权限的用户身份访问OpenStack环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 请参阅[第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第2章
    OpenStack客户端")，*OpenStack客户端*，以获取设置环境以使用OpenStack命令行客户端的详细信息。
- en: How to do it…
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何执行…
- en: 'In order to create groups and assign users to them, we will need to execute
    the following steps:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 为了创建组并将用户分配给它们，我们将需要执行以下步骤：
- en: 'Start by creating a group:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先创建一个组：
- en: '[PRE25]'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '![How to do it…](img/00028.jpeg)'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何执行...](img/00028.jpeg)'
- en: 'List existing groups:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 列出现有组：
- en: '[PRE26]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '![How to do it…](img/00029.jpeg)'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何执行...](img/00029.jpeg)'
- en: 'Add group to the role:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将组添加到角色：
- en: '[PRE27]'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Both the `--domain` and `--role-domain` parameters are needed. There is no output
    to this command.
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`--domain` 和 `--role-domain` 参数是必需的。此命令没有输出。'
- en: 'Add the `reader` user to the group:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `reader` 用户添加到组中：
- en: '[PRE28]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'This produces a message like the following:'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将产生类似以下的信息：
- en: '[PRE29]'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Add the `reader1` user to the group:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `reader1` 用户添加到组中：
- en: '[PRE30]'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'This should output the following message:'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将输出以下信息：
- en: '[PRE31]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Check that `reader` is in the `reader_group` group:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查 `reader` 是否在 `reader_group` 组中：
- en: '[PRE32]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'This should output the following message:'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将输出以下信息：
- en: '[PRE33]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Check that `reader1` is in the `reader_group` group:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查 `reader1` 是否在 `reader_group` 组中：
- en: '[PRE34]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'This produces a message like the following:'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将产生类似以下的信息：
- en: '[PRE35]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Remove the `reader1` user from the `reader_group` group:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `reader1` 用户从 `reader_group` 组中移除：
- en: '[PRE36]'
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'This produces a message like the following:'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将产生类似以下的信息：
- en: '[PRE37]'
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Check again whether `reader1` is in the `reader_group` group:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次检查 `reader1` 是否在 `reader_group` 组中：
- en: '[PRE38]'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'This produces a message like the following:'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将产生类似以下的信息：
- en: '[PRE39]'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: How it works…
  id: totrans-180
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Adding users to identity groups is a good way to grant them specific set of
    roles without individually assigning each role to a user. If you have to manage
    users that always get the same set of roles, you can create a user group and add
    or remove users as needed, rather than setting individual roles to each user.
    Roles are assigned to the group in a similar fashion that they are assigned to
    the user. In our example, we first created a custom group, `reader_group`. The
    command for creating groups is as follows:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 将用户添加到身份组是一种为他们授予特定角色集合的好方法，而无需单独为每个用户分配每个角色。如果您需要管理总是获得相同角色集合的用户，可以创建一个用户组，并根据需要添加或删除用户，而不是为每个用户设置单独的角色。角色的分配方式与将角色分配给用户类似。在我们的示例中，我们首先创建了一个自定义组
    `reader_group`。创建组的命令如下：
- en: '[PRE40]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: Since we are using a custom domain in our example, `<domain-name>` is needed.
    However, if `<domain-name>` is omitted, domain for the current user will be used.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们在示例中使用了自定义域，因此需要 `<domain-name>`。但是，如果省略 `<domain-name>`，将使用当前用户的域。
- en: 'Add group to a role:'
  id: totrans-184
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 将组添加到角色：
- en: '[PRE41]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: The `role_domain` parameter is the name (or ID) of the domain to which the role
    belongs.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '`role_domain` 参数是角色所属域的名称（或 ID）。'
- en: 'We will also need to have the name of the group, the name of the role, and
    the name of the project in order to assign roles to users. These names can be
    found using the following commands:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要知道组名、角色名和项目名，以便将角色分配给用户。这些名称可以使用以下命令查找：
- en: '[PRE42]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Pass `--domain <domain>` as an option to the preceding commands if you have
    custom domains. To obtain a list of domains:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用自定义域，请将 `--domain <domain>` 作为选项传递给前面的命令。要获取域的列表：
- en: '[PRE43]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'To add a user to the group, use the following:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 要将用户添加到组中，请使用以下命令：
- en: '[PRE44]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'To remove a user from the group, execute the following command:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 要将用户从组中移除，请执行以下命令：
- en: '[PRE45]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'To verify if the user belongs to the group, use this command:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 要验证用户是否属于该组，请使用此命令：
- en: '[PRE46]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'To get a matrix of domain, project, user, group, and role assignments, use
    the following command:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取域、项目、用户、组和角色分配的矩阵，请使用以下命令：
- en: '[PRE47]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: You can also use IDs instead of names for projects for all of the preceding
    commands instead of names.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在所有前面的命令中使用项目的 ID，而不是名称。
- en: Note
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Groups were introduced in Keystone v3.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 组是在 Keystone v3 中引入的。
- en: Deleting projects
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除项目
- en: Projects can be deleted even if they have users associated with them, so be
    sure to delete users and other project assets before deleting a project, otherwise
    you risk having orphaned resources. In this example, we will show how to delete
    a project named `oldbook`.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 即使项目中有用户与之关联，也可以删除项目，因此在删除项目之前，务必先删除用户和其他项目资源，否则可能会留下孤立的资源。在本示例中，我们将展示如何删除名为
    `oldbook` 的项目。
- en: Getting ready
  id: totrans-204
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你已登录到正确配置的 OpenStack 客户端，并且能够以具有管理员权限的用户身份访问 OpenStack 环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 参阅[第二章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第二章.
    OpenStack 客户端")，*OpenStack 客户端*，了解如何设置环境以使用 OpenStack 命令行客户端。
- en: How to do it…
  id: totrans-207
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'In order to delete a project, execute the following commands:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除项目，请执行以下命令：
- en: 'Get the project''s name from a current project list:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从当前项目列表中获取项目名称：
- en: '[PRE48]'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '![How to do it…](img/00030.jpeg)'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00030.jpeg)'
- en: 'Delete the project:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除项目：
- en: '[PRE49]'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: This command will have no output.
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令将没有输出。
- en: How it works…
  id: totrans-215
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Deleting unnecessary projects is simple when using OpenStack command-line tool.
    Be sure to delete only empty projects. Start with a command to get existing projects:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 OpenStack 命令行工具删除不必要的项目非常简单。确保只删除空项目。首先使用命令获取现有的项目：
- en: '[PRE50]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Delete a project by executing the following:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令删除项目：
- en: '[PRE51]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: Here, the `<project>` parameter can be either project ID or project name.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的 `<project>` 参数可以是项目 ID 或项目名称。
- en: If project has users assigned, they will not be deleted, but the project will
    be.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 如果项目已分配用户，则这些用户不会被删除，但该项目将被删除。
- en: Deleting users
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除用户
- en: Removing users from OpenStack Identity is a simple one step process. In this
    example, we will show how to delete a user named `oldreader`.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 从 OpenStack 身份服务中删除用户是一个简单的单步过程。在本例中，我们将展示如何删除一个名为 `oldreader` 的用户。
- en: Getting ready
  id: totrans-224
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您已经登录到正确配置的 OpenStack 客户端，并且可以作为具有管理员权限的用户访问 OpenStack 环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 详细信息请参见[第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "第2章. OpenStack 客户端")，*OpenStack 客户端*，了解如何设置环境以使用 OpenStack 命令行客户端。
- en: How to do it…
  id: totrans-227
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'In order to delete a user, execute the following commands:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除用户，请执行以下命令：
- en: 'Get the user''s name from the users in a current domain:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从当前域中的用户中获取用户的名字：
- en: '[PRE52]'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '![How to do it…](img/00031.jpeg)'
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00031.jpeg)'
- en: 'Delete the `oldreader` user:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除 `oldreader` 用户：
- en: '[PRE53]'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: This command will have no output.
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令将没有输出。
- en: How it works…
  id: totrans-235
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Deleting unnecessary users is simple when using OpenStack command-line tool.
    Start with a command to get existing users:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 OpenStack 命令行工具删除不必要的用户非常简单。首先使用命令获取现有的用户：
- en: '[PRE54]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Delete a user by executing the following:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令删除用户：
- en: '[PRE55]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: Here the `<user>` parameter can be either user ID or username.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的 `<user>` 参数可以是用户 ID 或用户名。
- en: Deleting roles
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除角色
- en: Removing roles from the OpenStack Identity is a simple one step. In this example,
    we will show how to delete a role named `oldrole`.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 从 OpenStack 身份服务中删除角色是一个简单的单步过程。在本例中，我们将展示如何删除一个名为 `oldrole` 的角色。
- en: Getting ready
  id: totrans-243
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您已经登录到正确配置的 OpenStack 客户端，并且可以作为具有管理员权限的用户访问 OpenStack 环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 详细信息请参见[第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "第2章. OpenStack 客户端")，*OpenStack 客户端*，了解如何设置环境以使用 OpenStack 命令行客户端。
- en: How to do it…
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'In order to delete a role, execute the following commands:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除角色，请执行以下命令：
- en: 'Get the role''s name from a current role list:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从当前角色列表中获取角色的名字：
- en: '[PRE56]'
  id: totrans-249
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '![How to do it…](img/00032.jpeg)'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00032.jpeg)'
- en: 'Delete the `oldrole` role:'
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除 `oldrole` 角色：
- en: '[PRE57]'
  id: totrans-252
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: This command will have no output.
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令将没有输出。
- en: How it works…
  id: totrans-254
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Deleting unnecessary roles is simple when using OpenStack command-line tool.
    Start with a command to get an existing role:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 OpenStack 命令行工具删除不必要的角色非常简单。首先使用命令获取现有角色：
- en: '[PRE58]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Delete a role by executing the following:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令删除角色：
- en: '[PRE59]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: Here the `<role>` parameter can be either role ID or role name.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的 `<role>` 参数可以是角色 ID 或角色名称。
- en: Deleting groups
  id: totrans-260
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除组
- en: Removing user groups from the OpenStack Identity service is a simple one step.
    In this example, we will show how to delete a group named `oldgroup`. Note that
    when you delete a group, it doesn't delete the users assigned to the group. The
    role and group permission mappings will be gone, and as a result, users may lose
    permissions.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 从 OpenStack 身份服务中删除用户组是一个简单的单步过程。在本例中，我们将展示如何删除一个名为 `oldgroup` 的组。请注意，当您删除一个组时，并不会删除分配给该组的用户。角色和组权限映射将消失，结果是，用户可能会丧失权限。
- en: Getting ready
  id: totrans-262
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您已经登录到正确配置的 OpenStack 客户端，并且可以作为具有管理员权限的用户访问 OpenStack 环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 参见 [第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第 2
    章 OpenStack 客户端")，*OpenStack 客户端*，了解如何配置环境以使用 OpenStack 命令行客户端。
- en: How to do it…
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'In order to delete a user group, execute the following commands:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除一个用户组，请执行以下命令：
- en: 'Get the group''s name from a current group list:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从当前的组列表中获取组名称：
- en: '[PRE60]'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '![How to do it…](img/00033.jpeg)'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作…](img/00033.jpeg)'
- en: 'Delete the `oldgroup` group:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除`oldgroup`组：
- en: '[PRE61]'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: This command will have no output.
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令将没有输出。
- en: How it works…
  id: totrans-273
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Deleting unnecessary groups is simple when using OpenStack command-line tool.
    Start with a command to get existing group:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 OpenStack 命令行工具删除不必要的组非常简单。首先使用命令获取现有组：
- en: '[PRE62]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Delete a group by executing the following:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令删除组：
- en: '[PRE63]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: Here the `<group>` parameter can be either group ID or group name.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在此，`<group>` 参数可以是组 ID 或组名称。
- en: Deleting domains
  id: totrans-279
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除域
- en: Keystone domains can be deleted if there are no users associated with them.
    If there are any users associated with the domain when trying to delete it, an
    error will be shown. In this example, we will show how to delete a domain that
    is no longer being used, called `olddomain`.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 如果域没有任何关联的用户，Keystone 域可以被删除。如果尝试删除时域中有用户，系统将显示错误。在此示例中，我们将展示如何删除一个不再使用的域，名为
    `olddomain`。
- en: Getting ready
  id: totrans-281
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你已登录到正确配置的 OpenStack 客户端，并且可以作为具有管理员权限的用户访问 OpenStack 环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 参见 [第2章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第 2
    章 OpenStack 客户端")，*OpenStack 客户端*，了解如何配置环境以使用 OpenStack 命令行客户端。
- en: How to do it…
  id: totrans-284
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'In order to delete a domain, execute the following commands:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 要删除一个域，请执行以下命令：
- en: Get the domain's name from a current domain list:![How to do it…](img/00034.jpeg)
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从当前域列表中获取域的名称：![如何操作…](img/00034.jpeg)
- en: 'Verify that there are no users associated with the `olddomain` domain that
    we will be deleting:'
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证我们将要删除的 `olddomain` 域没有任何关联的用户：
- en: '[PRE64]'
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: This list should be empty before proceeding. If it is not, delete all the users
    before proceeding to the next step.
  id: totrans-289
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在继续之前，该列表应为空。如果不为空，请删除所有用户后再进行下一步。
- en: 'Disable the domain:'
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 禁用该域：
- en: '[PRE65]'
  id: totrans-291
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: This command will have no output.
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令将没有输出。
- en: 'Delete domain:'
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除域：
- en: '[PRE66]'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: If successful, this command will have no output.
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果成功，该命令将没有输出。
- en: How it works…
  id: totrans-296
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: Deleting unnecessary domains requires that domains have no users associated
    with them.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 删除不必要的域需要确保域没有任何关联的用户。
- en: 'Verify that there are no users attached to this domain:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 验证该域没有任何关联的用户：
- en: '[PRE67]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Deleting a domain requires that it first be disabled. A domain can be disabled
    even if there are users attached to it:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 删除域之前需要先禁用该域。即使域中有用户，也可以禁用该域：
- en: '[PRE68]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Only after a domain is disabled and no longer has any users associated with
    it, will you be able to delete a domain:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在禁用域并且该域没有任何关联的用户之后，才可以删除该域：
- en: '[PRE69]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: If you need to delete users, refer to the *Deleting users* recipe, earlier in
    this chapter.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要删除用户，请参考本章前面提到的 *删除用户* 章节。
- en: OpenStack endpoint information
  id: totrans-305
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OpenStack 端点信息
- en: If you need to find out the endpoint information for different OpenStack services,
    or the services running on the OpenStack installation, use the OpenStack service
    catalog. If you need to automate any OpenStack tasks or are integrating any other
    tools with OpenStack, catalog will also come in handy. The catalog lists services
    and endpoint information for each of them. The catalog may be different for each
    deployment.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要查看不同 OpenStack 服务的端点信息，或者查看 OpenStack 安装上运行的服务，可以使用 OpenStack 服务目录。如果你需要自动化任何
    OpenStack 任务，或者将其他工具与 OpenStack 集成，服务目录也会很有用。该目录列出了每个服务的服务和端点信息。每个部署的目录可能不同。
- en: Getting ready
  id: totrans-307
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ensure that you are logged on to a correctly configured OpenStack client and
    can access the OpenStack environment as a user with admin privileges.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你已登录到正确配置的 OpenStack 客户端，并且可以作为具有管理员权限的用户访问 OpenStack 环境。
- en: Refer to [Chapter 2](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47
    "Chapter 2. The OpenStack Client"), *The OpenStack Client*, for details of setting
    up your environment to use OpenStack command-line client.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考[第 2 章](part0024_split_000.html#MSDG1-189e69df43a248268db97cde1b1a8e47 "第
    2 章. OpenStack 客户端")，*OpenStack 客户端*，了解如何设置环境以使用 OpenStack 命令行客户端。
- en: How to do it…
  id: totrans-310
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'To list OpenStack catalog information, execute the following command:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 要列出 OpenStack 目录信息，请执行以下命令：
- en: '[PRE70]'
  id: totrans-312
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: How it works…
  id: totrans-313
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何工作…
- en: 'In OpenStack, different service API endpoints can be found out using the OpenStack
    catalog. The catalog will list all the OpenStack services that it knows about
    and their respective internal, admin, and public URLs. The catalog is also handy
    if you are trying to automate any of the OpenStack tasks. On the **Command-Line
    Interface** (**CLI**), list the available endpoints by running the following command:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 在 OpenStack 中，可以使用 OpenStack 目录查找不同的服务 API 端点。该目录将列出它所知道的所有 OpenStack 服务及其各自的内部、管理员和公共
    URL。如果你尝试自动化任何 OpenStack 任务，目录也非常方便。在**命令行界面**（**CLI**）中，通过运行以下命令列出可用的端点：
- en: '[PRE71]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '![How it works…](img/00035.jpeg)'
  id: totrans-316
  prefs: []
  type: TYPE_IMG
  zh: '![如何工作…](img/00035.jpeg)'
- en: The output from our `catalog` command has been trunkated for this example. The
    full catalog command will list all the installed services.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的 `catalog` 命令的输出已为本示例进行了截断。完整的目录命令将列出所有已安装的服务。
- en: Note
  id: totrans-318
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The service catalog will be different for each OpenStack installation.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 每个 OpenStack 安装的服务目录将有所不同。
