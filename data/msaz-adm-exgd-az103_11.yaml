- en: Managing Azure VMs and VM Backups
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理 Azure 虚拟机和虚拟机备份
- en: In the previous chapter, we covered **Virtual Machines** (**VMs**) in Azure
    and how to create and configure them from the Azure portal and PowerShell. We
    also looked at how to automate these steps using ARM templates.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章节中，我们介绍了 Azure 中的**虚拟机**（**VMs**）以及如何通过 Azure 门户和 PowerShell 创建和配置虚拟机。我们还展示了如何使用
    ARM 模板自动化这些步骤。
- en: This chapter continues with the second part of *Deploying and Managing Virtual
    Machines* objective***.*** In this chapter, we are going to focus on the different
    ways you can manage your VMs after creation. You will learn how to resize and
    deploy your VMs using the Azure portal, PowerShell, and CLI. You will also learn
    how to add additional data disks and network interfaces to your VMs. We are going
    to cover how you can automate the configuration management of your virtual machines,
    and you will learn how to configure backup and restore operations for your VMs.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章继续进行*部署和管理虚拟机*目标的第二部分***。*** 在本章中，我们将重点介绍在创建虚拟机后如何管理它们。您将学习如何使用 Azure 门户、PowerShell
    和 CLI 调整虚拟机大小和部署虚拟机。您还将学习如何为虚拟机添加额外的数据磁盘和网络接口。我们将介绍如何自动化虚拟机的配置管理，您将学习如何配置虚拟机的备份和恢复操作。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Managing VM sizes
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理虚拟机大小
- en: Redeploying VMs
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重新部署虚拟机
- en: Moving VMs
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动虚拟机
- en: Adding data disks and network interfaces
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加数据磁盘和网络接口
- en: Automating configuration management
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化配置管理
- en: Configuring VM backup and restore operations
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置虚拟机备份和恢复操作
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: This chapter uses Azure PowerShell ([https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0](https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0))
    for examples.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章示例使用 Azure PowerShell ([https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0](https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0))。
- en: Managing VM sizes
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理虚拟机大小
- en: In the first part of this chapter, we are going to look at some management capabilities
    for virtual machines. After creation, you can manage and change (vertical scale)
    the sizes of Windows and Linux VMs from the Azure portal, PowerShell, and CLI.
    **Vertical scaling**, also known as **scale up** and **scale down**, means increasing
    or decreasing VM sizes in response to different workloads.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的第一部分，我们将讨论虚拟机的一些管理功能。创建之后，您可以通过 Azure 门户、PowerShell 和 CLI 管理并更改（垂直扩展）Windows
    和 Linux 虚拟机的大小。**垂直扩展**，也叫做**扩展**和**缩减**，意味着根据不同的工作负载增大或缩小虚拟机的大小。
- en: In the upcoming demonstrations, we are going to resize VMs using the Azure portal
    and CLI.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的演示中，我们将通过 Azure 门户和 CLI 调整虚拟机的大小。
- en: Resizing a VM in the Azure portal
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Azure 门户中调整虚拟机大小
- en: 'To manage and change the sizes of the VMs to scale up and down from the Azure
    portal, you have to take the following steps:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 要通过 Azure 门户管理和更改虚拟机的大小以进行横向扩展和缩减，您需要执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)导航到 Azure 门户。
- en: Go to the overview blade of one of the VMs that we created earlier or create
    a new one.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到我们之前创建的某个虚拟机的概览面板，或者创建一个新的虚拟机。
- en: Under **Settings**, select **Size**.
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**设置**下，选择**大小**。
- en: 'In the **Size** overview blade, you can easily select another VM size. In the
    top menu, there are different filters. You can filter on the different sizes,
    the VM generation type, the different VM types, the disk type, and you can add
    your own filter to it as well. Once you have selected the VM size, click the **Resize**
    button to actually resize it:'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**大小**概览面板中，您可以轻松选择另一个虚拟机大小。在顶部菜单中，有不同的筛选器。您可以按不同的大小、虚拟机代际类型、不同的虚拟机类型、磁盘类型进行筛选，还可以自定义筛选器。选择虚拟机大小后，点击**调整大小**按钮实际调整虚拟机大小：
- en: '![](img/d404e9f1-932f-45c3-b3e8-d37d8580e80d.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d404e9f1-932f-45c3-b3e8-d37d8580e80d.png)'
- en: Resizing the VM
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 调整虚拟机大小
- en: If the VM is currently running, then the changing its size will be implemented
    when the VM is restarted.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果虚拟机当前正在运行，则更改其大小将在虚拟机重启时生效。
- en: In the next section, we are going to resize the same VM using the CLI.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分，我们将通过 CLI 调整相同虚拟机的大小。
- en: Resizing a VM using the CLI
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 CLI 调整虚拟机大小
- en: You can also resize your VM using the CLI. You can run CLI scripts from the
    Azure Cloud Shell or from your local file system. You can use the Azure Cloud
    Shell for PowerShell scripts and commands as well. We are going to resize the VM
    from Azure Cloud Shell using the CLI in this demonstration.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用CLI调整虚拟机的大小。您可以从Azure Cloud Shell或本地文件系统运行CLI脚本。您也可以使用Azure Cloud Shell来运行PowerShell脚本和命令。在本演示中，我们将通过Azure
    Cloud Shell使用CLI调整虚拟机大小。
- en: 'To resize a VM using the CLI, you have to perform the following steps:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 使用CLI调整虚拟机大小时，您需要执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)导航到Azure门户。
- en: 'Open Azure Cloud Shell by clicking the following menu item in the top-right
    menu in the Azure portal:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击Azure门户右上角菜单中的以下菜单项来打开Azure Cloud Shell：
- en: '![](img/c95930b1-816d-4f97-b093-708e9eda879c.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c95930b1-816d-4f97-b093-708e9eda879c.png)'
- en: Opening Azure Cloud Shell
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 打开Azure Cloud Shell
- en: Make sure that the Bash shell is selected.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择了Bash Shell。
- en: 'Add the following line of code to list the different available machine sizes
    for your region:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加以下代码行，以列出您所在区域的不同可用虚拟机大小：
- en: '[PRE0]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To resize your VM to a different size, add the following line of code. If the
    size is not available, you can replace the required VM size with one that is available
    for your subscription or region:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将虚拟机（VM）调整为不同的大小，请添加以下代码行。如果该大小不可用，您可以将所需的虚拟机大小替换为您订阅或区域中可用的大小：
- en: '[PRE1]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: We have now resized our VM using the Azure portal and CLI. In the next section,
    we are going to move VMs across different regions and redeploy them.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经使用Azure门户和CLI调整了虚拟机的大小。在下一节中，我们将跨不同区域移动虚拟机并重新部署它们。
- en: Redeploying VMs
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重新部署虚拟机
- en: You can also redeploy the VMs after their creation. This can be helpful when
    you are facing difficulties troubleshooting **Remote Desktop Protocol** (**RDP**)
    connections or application access to Windows and Linux VMs. When you redeploy
    a VM, Azure will shut down the VM, move the VM to a new node within the Azure
    infrastructure, and then power it back on. All your configuration options and
    associated resources will remain during redeployment. After you redeploy a VM,
    the temporary disk is lost and any dynamic IP addresses associated with the virtual
    network interface are updated.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在虚拟机创建后重新部署它们。当您遇到**远程桌面协议**（**RDP**）连接或应用程序访问Windows和Linux虚拟机的故障排除问题时，这可能会非常有用。当您重新部署虚拟机时，Azure将关闭虚拟机，将其移动到Azure基础设施中的新节点，然后重新启动它。所有配置选项和关联的资源在重新部署过程中会保留下来。重新部署虚拟机后，临时磁盘会丢失，任何与虚拟网络接口关联的动态IP地址也会更新。
- en: Redeploying Windows VMs can easily be done from the Azure portal, using PowerShell
    and the CLI as well. In the next demonstration, we are going to redeploy a VM
    from the Azure portal and PowerShell.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 从Azure门户重新部署Windows虚拟机可以很容易地完成，也可以通过PowerShell和CLI进行。在接下来的演示中，我们将从Azure门户和PowerShell重新部署虚拟机。
- en: Redeploying a VM from the Azure portal
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从Azure门户重新部署虚拟机
- en: 'To redeploy a VM from the Azure portal, you have to take the following steps:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 要从Azure门户重新部署虚拟机，您需要执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)导航到Azure门户。
- en: Again, go to the overview blade of one of the VMs that we created earlier or
    create a new one.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次进入我们之前创建的某个虚拟机的概览面板，或创建一个新的虚拟机。
- en: 'Under **Support + troubleshooting**, select **Redeploy**. This will open the
    **Redeploy** blade, where you can select the **Redeploy **button to redeploy the
    VM:'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**支持 + 故障排除**下，选择**重新部署**。这将打开**重新部署**面板，您可以在其中选择**重新部署**按钮来重新部署虚拟机：
- en: '![](img/243d2082-2811-4865-bb2d-7c2d46e34bd4.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/243d2082-2811-4865-bb2d-7c2d46e34bd4.png)'
- en: Redeploying the VM
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 重新部署虚拟机
- en: The VM will be unavailable during redeployment.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在重新部署过程中，虚拟机将不可用。
- en: In the next demonstration, we are going to redeploy the same VM using PowerShell.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的演示中，我们将使用PowerShell重新部署同一虚拟机。
- en: Redeploying a VM from PowerShell
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从PowerShell重新部署虚拟机
- en: 'To redeploy a VM from PowerShell, you have to take the following steps:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 从PowerShell重新部署虚拟机时，您需要执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)导航到Azure门户。
- en: Open the Azure Cloud Shell again by clicking the following menu item in the
    top-right menu in the Azure portal.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击Azure门户右上角菜单中的以下菜单项再次打开Azure Cloud Shell。
- en: Make sure that this time **PowerShell** is selected.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保这次选择了**PowerShell**。
- en: 'Add the following line of code to redeploy the VM:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加以下代码行以重新部署虚拟机：
- en: '[PRE2]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: We have now covered most of the different ways to redeploy your VMs. In the
    next section, we are going to add extra data disks and network interfaces to a
    VM.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经覆盖了大多数重新部署虚拟机的不同方式。在接下来的部分中，我们将向虚拟机添加额外的数据磁盘和网络接口。
- en: Moving VMs
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 移动虚拟机
- en: You can also move VMs and other resources across different subscriptions and
    resource groups. You can move resources using the Azure portal, Azure PowerShell,
    Azure CLI, or the REST API to move resources.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以将虚拟机和其他资源移动到不同的订阅和资源组之间。您可以使用Azure门户、Azure PowerShell、Azure CLI或REST API来移动资源。
- en: When you move a VM to another resource group, both the source and the target
    are locked during the operation. Also, write and delete operations are blocked
    on the resource group until it has completely finished moving the VM. By locking
    these two operations, you can't add, update, or delete any resource in the resource
    group. However, applications that use these resources, for instance when you move
    an Azure SQL database to another resource group, will not experience any downtime.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 当您将虚拟机移到另一个资源组时，在操作期间源和目标都会被锁定。此外，在虚拟机完全移动完成之前，资源组中的写入和删除操作将被阻止。通过锁定这两个操作，您无法在资源组中添加、更新或删除任何资源。然而，使用这些资源的应用程序，例如将Azure
    SQL数据库移动到另一个资源组时，将不会经历任何停机时间。
- en: Moving a resource only moves it to a new resource group. The actual location
    will remain the same, and this cannot be changed. Even when the new resource group
    is deployed in another location, the moved resource will still remain in the original
    location.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 移动资源仅将其移到新的资源组。实际位置将保持不变，且无法更改。即使新的资源组部署在另一个位置，已移动的资源仍会保持在原始位置。
- en: There are limitations for moving resources across different subscriptions and
    resource groups. This can be part of the exam questions. For more information,
    you can refer to the documentation at: [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources).
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在不同订阅和资源组之间移动资源有一定的限制。这可能是考试中的问题之一。更多信息，请参考文档：[https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-move-resources)。
- en: Adding data disks and network interfaces
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加数据磁盘和网络接口
- en: You can add a new managed data disk and extra network interfaces to a Windows
    VM by using the Azure portal, PowerShell, and CLI. The size of the VM determines
    how many data disks you can attach to one single VM.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过Azure门户、PowerShell和CLI向Windows虚拟机添加新的托管数据磁盘和额外的网络接口。虚拟机的大小决定了您可以附加多少数据磁盘到一个虚拟机上。
- en: Adding a data disk
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加数据磁盘
- en: 'To add a data disk from the Azure portal, you have to perform the following
    steps:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 要从Azure门户添加数据磁盘，您需要执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开[https://portal.azure.com](https://portal.azure.com)进入Azure门户。
- en: Go to the overview blade of one of the VMs that we created earlier.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到我们之前创建的某个虚拟机的概述面板。
- en: 'Under **Settings**, select **Disks**. Click the **Add data disk **button:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**设置**下，选择**磁盘**。单击**添加数据磁盘**按钮：
- en: '![](img/1ce4d6d3-ded4-46cf-ab61-c583e3d75d2a.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1ce4d6d3-ded4-46cf-ab61-c583e3d75d2a.png)'
- en: Adding a data disk
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 添加数据磁盘
- en: 'You can now add an existing disk or create a new disk. We don''t have an extra
    disk in place, so select **Create disk**:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在可以添加现有磁盘或创建新磁盘。我们没有额外的磁盘，所以请选择**创建磁盘**：
- en: '![](img/7d669316-aa4f-4faa-988b-a5a87d91764c.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7d669316-aa4f-4faa-988b-a5a87d91764c.png)'
- en: Creating a new disk
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新磁盘
- en: 'In the Create managed disk blade, add the following values:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在创建托管磁盘面板中，添加以下值：
- en: '**Disk name**: `PacktDisk2`.'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**磁盘名称**：`PacktDisk2`。'
- en: '**Resource group**: Keep the default selected group here.'
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**：保持默认选择的组。'
- en: '**Account type**: Here, you can select three different options: Standard HHD, Standard
    SSD, and Premium SSD. Select any one.'
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**帐户类型**：在此处，您可以选择三种不同的选项：标准HHD、标准SSD和高级SSD。请选择其中任意一个。'
- en: '**Size**: Keep the default size here.'
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大小**：保持默认大小。'
- en: '**Source type**: Here, you can select three different options as well: None,
    Snapshot, Storage Blob. Select **None**:'
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**源类型**：在此处，您也可以选择三种不同的选项：无、快照、存储Blob。请选择**无**：'
- en: '![](img/6c3c8259-cc3d-4e45-9530-c420d9b47caf.png)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6c3c8259-cc3d-4e45-9530-c420d9b47caf.png)'
- en: Disk settings
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 磁盘设置
- en: Click **Create** to create the disk.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**创建**以创建磁盘。
- en: The disk is now added to the VM. To initialize the new data disk, you can log
    into your server and create a new volume inside **Disk management**. After this,
    you can format the disk to complete the initialization of it.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，磁盘已添加到虚拟机中。要初始化新的数据磁盘，你可以登录到服务器并在**磁盘管理**中创建一个新卷。完成后，你可以格式化磁盘以完成初始化。
- en: Adding a network interface
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加网络接口
- en: 'To add an extra network interface to the VM from the Azure portal, you have
    to perform the following steps:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 要从Azure门户为虚拟机添加额外的网络接口，你需要执行以下步骤：
- en: 'From the Overview blade of the virtual machine, under **Settings**, select **Networking**. In
    there, click **Attach network interface**:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从虚拟机的概览面板，在**设置**下选择**网络**。然后，点击**附加网络接口**：
- en: '![](img/ad0df9e8-2623-4663-a0b9-eeeb34069a87.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ad0df9e8-2623-4663-a0b9-eeeb34069a87.png)'
- en: Adding a network interface
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 添加网络接口
- en: 'A popup will be displayed where you have to click the **Create network interface**
    to create a new network interface. You can also add existing network interfaces
    here:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 弹出窗口将显示，你需要点击**创建网络接口**来创建一个新的网络接口。你也可以在这里添加现有的网络接口：
- en: '![](img/a286fa64-b419-4957-bc41-b388c9323e2e.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a286fa64-b419-4957-bc41-b388c9323e2e.png)'
- en: Creating a new network interface
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的网络接口
- en: 'In the Create network interface blade, add the following values:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“创建网络接口”面板中，添加以下值：
- en: '**Name**: `PacktNIC`.'
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：`PacktNIC`。'
- en: '**Subnet**: Select the default subnet here.'
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**子网**：在这里选择默认子网。'
- en: '**Private IP address assignment**: Choose either **Dynamic **or **Static**.'
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**私有 IP 地址分配**：选择**动态**或**静态**。'
- en: '**Resource group**: Keep the default selected here:'
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**：在这里保留默认选项：'
- en: '![](img/280ca362-f669-415c-86a1-19941d51616a.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/280ca362-f669-415c-86a1-19941d51616a.png)'
- en: Network interface settings
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 网络接口设置
- en: Click **Create**.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**。
- en: The network interface is now added to the VM and can be configured by logging
    into the VM and by configuring the network adapter.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 网络接口现在已添加到虚拟机，并可以通过登录虚拟机并配置网络适配器来进行配置。
- en: In the preceding sections, we managed our VMs using manual actions or single
    scripts. In the next part of this chapter, we are going to look at automating
    configuration management for our VMs.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的章节中，我们通过手动操作或单个脚本来管理虚拟机。在本章的下一部分，我们将探讨如何实现虚拟机配置管理的自动化。
- en: Automating configuration management
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动化配置管理
- en: There are various ways in Azure to automate the creation and the configuration
    of your infrastructure. You can use ARM templates to deploy your infrastructure
    as a code, or use Azure Automation, PowerShell scripts and more.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在Azure中，有多种方法可以自动化基础设施的创建和配置。你可以使用ARM模板将基础设施作为代码进行部署，或者使用Azure自动化、PowerShell脚本等。
- en: 'When the different Azure resources are deployed, there are some tools that
    you can use to manage the configuration of the resources. For example, when you
    want to automate the configuration of your VMs, Azure provides the following tools:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当不同的Azure资源被部署时，有一些工具可以用来管理资源的配置。例如，当你想要自动化虚拟机的配置时，Azure提供了以下工具：
- en: '**Chef**: Chef is a third-party solution that offers a DevOps automation platform
    for Linux, Windows, and macOS devices. It can be used for virtual and physical
    server configurations. It requires an agent to be installed on the virtual machines
    or servers, which connects to the Chef server to check whether there are available
    updates and other configurations for the machines. You can use the **Chef Automate**
    platform to package and deploy applications as well.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Chef**：Chef是一个第三方解决方案，为Linux、Windows和macOS设备提供DevOps自动化平台。它可以用于虚拟机和物理服务器配置。它需要在虚拟机或服务器上安装一个代理，该代理连接到Chef服务器，检查是否有可用的更新和其他配置。你还可以使用**Chef
    Automate**平台来打包和部署应用程序。'
- en: '**Puppet**: Puppet is a third-party solution as well, and it has similar capabilities
    to Chef. You can enable support for Puppet when you create a virtual machine from
    the Azure portal automatically. You can add it as an extension when you create
    a new virtual machine. It will install the Puppet agent, which connects to the
    Puppet master server.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Puppet**：Puppet也是一个第三方解决方案，它具有类似于Chef的功能。你可以在从Azure门户自动创建虚拟机时启用对Puppet的支持。你可以在创建新虚拟机时将其作为扩展添加。它将安装Puppet代理，并连接到Puppet主服务器。'
- en: '**Desired State Configuration** (**DSC**):DSC is the process of forcing a configuration
    on a system. It uses configuration files that consist of PowerShell scripts. These
    scripts are responsible for making the required configurations to the system and
    for ensuring that these systems stay in sync. So, for example, when you have created
    a DSC file to configure IIS on a Windows Server and this is removed by an administrator,
    the DSC file will reinstall and configure IIS again.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**期望状态配置** (**DSC**)：DSC是强制对系统进行配置的过程。它使用包含PowerShell脚本的配置文件。这些脚本负责对系统进行所需的配置，并确保这些系统保持同步。因此，例如，当你创建了一个DSC文件来配置Windows
    Server上的IIS，而该配置被管理员删除时，DSC文件将重新安装并再次配置IIS。'
- en: '**Custom Script Extensions**: You can configure software installation tasks
    and various post deployment, configuration, and management tasks using Custom
    Script Extensions. Scripts can be downloaded from Azure storage or GitHub, or
    provided to the Azure portal at extension runtime, and are executed on the VMs.
    You can integrate Custom Script Extensions with ARM templates, and you can run
    them using PowerShell, CLI, the VM REST API, and the Azure portal.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自定义脚本扩展**：你可以使用自定义脚本扩展配置软件安装任务及各种后部署、配置和管理任务。脚本可以从Azure存储或GitHub下载，或者在扩展运行时提供给Azure门户，并在虚拟机上执行。你可以将自定义脚本扩展与ARM模板集成，并通过PowerShell、CLI、VM
    REST API和Azure门户运行它们。'
- en: Configuring VM backup and restore operations
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置虚拟机备份和恢复操作
- en: In this demonstration, we will be performing a backup and restore operation
    for a VM. We are going to backup the VM that we used throughout this chapter and
    restore it from a Recovery Services vault.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在本演示中，我们将执行虚拟机的备份和恢复操作。我们将备份本章中使用的虚拟机，并从恢复服务库中恢复它。
- en: Creating a Recovery Services vault
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建恢复服务库
- en: The first step is to create a Recovery Services vault, which can be used to
    store backups.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是创建一个恢复服务库，该库可用于存储备份。
- en: 'We are going to create the Recovery Services vault in Azure. You can create
    this using the Azure portal, PowerShell, and CLI. We are going to create the vault
    from the Azure portal. To create this, perform the following steps:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在Azure中创建恢复服务库。你可以使用Azure门户、PowerShell和CLI来创建它。我们将通过Azure门户来创建该库。为此，请执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开[https://portal.azure.com](https://portal.azure.com)进入Azure门户。
- en: Create a new resource. Then, select **Management tools** and then **Backup and
    Site Recovery**.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的资源。然后，选择**管理工具**，接着选择**备份和站点恢复**。
- en: 'Add the following values to create a new vault:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加以下值以创建新的库：
- en: '**Name**: `PacktVMVault`.'
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：`PacktVMVault`。'
- en: '**Subscription**:Select a subscription here.'
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**订阅**：在此选择一个订阅。'
- en: '**Resource group**: Create a new one and call it `PacktVMVault`.'
  id: totrans-120
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**：创建一个新的资源组，并命名为`PacktVMVault`。'
- en: '**Location**: Pick a location:'
  id: totrans-121
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置**：选择一个位置：'
- en: '![](img/6e0315fd-8d40-47b2-83ed-6b5db9be19e0.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6e0315fd-8d40-47b2-83ed-6b5db9be19e0.png)'
- en: Creating a new Recovery Services vault
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的恢复服务库
- en: Click the **Create** button.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**按钮。
- en: We have now created a Recovery Services vault, which we can use to restore backups.
    We will create and configure a backup policy in the next section.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经创建了恢复服务库，可以用来恢复备份。接下来我们将在下一部分中创建并配置备份策略。
- en: Creating and configuring a backup policy
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建和配置备份策略
- en: 'From the Recovery Services vault overview blade, you can configure a backup
    policy. In this demonstration, we are going to configure one. Therefore, perform
    the following steps:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在恢复服务库概览页中，你可以配置备份策略。在本演示中，我们将配置一个备份策略。因此，请执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开[https://portal.azure.com](https://portal.azure.com)进入Azure门户。
- en: Open the Recovery Services vault that we created in the previous step.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开我们在上一步创建的恢复服务库。
- en: 'In the top menu, click **+ Backup**:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在顶部菜单中，点击**+ 备份**：
- en: '![](img/b5c4794d-7000-4e2a-8d55-fade1a0d4263.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b5c4794d-7000-4e2a-8d55-fade1a0d4263.png)'
- en: Creating a new backup
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的备份
- en: 'In the next screen, select the following and click **Backup**:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕中，选择以下选项并点击**备份**：
- en: '![](img/5c4e8034-a26b-46d3-9afa-4e969c745633.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5c4e8034-a26b-46d3-9afa-4e969c745633.png)'
- en: Setting a backup goal
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 设置备份目标
- en: 'Now we need to select a backup policy. We can use the default policy that is
    created for us by Azure, and which makes a daily backup, or we can create a custom
    policy in here. Under Choose backup policy, select Create New:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要选择一个备份策略。我们可以使用 Azure 为我们创建的默认策略，该策略每天进行一次备份，或者我们也可以在此处创建自定义策略。在“选择备份策略”下，选择“创建新策略”：
- en: '![](img/0d674f3e-9533-42f6-a06d-dfff83863f9a.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0d674f3e-9533-42f6-a06d-dfff83863f9a.png)'
- en: Creating a new backup policy
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的备份策略
- en: 'For the new policy, fill in the following values:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于新的策略，填写以下值：
- en: '![](img/18f5629d-2896-4fac-bb46-013229fad0c6.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/18f5629d-2896-4fac-bb46-013229fad0c6.png)'
- en: Creating a backup policy
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 创建备份策略
- en: Once you have filled in all the values, click **OK**.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写完所有值后，点击**确定**。
- en: 'Then we have to select the VMs that we want to backup. Select them and click **OK**:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们需要选择要备份的虚拟机。选择它们并点击**确定**：
- en: '**![](img/c733f9ea-c64f-4557-83f3-4af46493bdfe.png)** [Selecting the VM to
    backup]'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/c733f9ea-c64f-4557-83f3-4af46493bdfe.png)** [选择要备份的虚拟机]'
- en: Click **Enable backup**.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**启用备份**。
- en: The VM will now be backed up every day at the same time.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，虚拟机将每天在同一时间进行备份。
- en: 'If you open the VM overview blade, under **Operations**, select **Backup**.
    You will see that there is a backup policy applied and that the Recovery Services
    vault is displayed as well. Click **Backup now** in the top menu to perform a
    manual backup:'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你打开虚拟机概览面板，在**操作**下选择**备份**，你将看到已经应用了备份策略，并且恢复服务库也会显示。点击顶部菜单中的**立即备份**以执行手动备份：
- en: '![](img/79c46260-4eb8-4924-90ef-ba8c8750bc8f.png)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![](img/79c46260-4eb8-4924-90ef-ba8c8750bc8f.png)'
- en: Backing up the VM
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 备份虚拟机
- en: Keep the default retaining date and click **OK**.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保持默认的保留日期，并点击**确定**。
- en: 'Select **View all Jobs** to see the progress of the backup:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**查看所有任务**以查看备份的进度：
- en: '![](img/b00f5b5a-b560-4b01-8b2e-c6571841a6ca.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b00f5b5a-b560-4b01-8b2e-c6571841a6ca.png)'
- en: Backup jobs
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 备份任务
- en: 'All the jobs are displayed in the list:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有任务都会显示在列表中：
- en: '![](img/efe8afa1-1c2d-4905-b5e6-c48ff73278e7.png)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![](img/efe8afa1-1c2d-4905-b5e6-c48ff73278e7.png)'
- en: List of backups
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 备份列表
- en: When the backup is created, we can restore it. In the next and last section
    of this demonstration, we are going to restore the backup of the VM.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 当备份创建完成后，我们可以恢复它。在本演示的下一个部分，我们将恢复虚拟机的备份。
- en: Restoring a backup
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 恢复备份
- en: 'In this last demonstration, we are going to restore the backup of the VM that
    we created. Therefore, take the following steps:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后的演示中，我们将恢复我们创建的虚拟机（VM）的备份。因此，请按以下步骤操作：
- en: 'In the Overview blade of the Backup section of the VM, select **Restore VM** in
    the top menu:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在虚拟机备份部分的概览面板中，选择顶部菜单中的**恢复虚拟机**：
- en: '![](img/d55e1aa1-d38c-44d9-8a83-80012e955e97.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d55e1aa1-d38c-44d9-8a83-80012e955e97.png)'
- en: Restoring the backup
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复备份
- en: 'Select the restore point from the list and click **OK**:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从列表中选择恢复点并点击**确定**：
- en: '![](img/20a58e6e-881c-4fa1-b03f-0c01f433bb56.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/20a58e6e-881c-4fa1-b03f-0c01f433bb56.png)'
- en: Selecting a restore point
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 选择恢复点
- en: 'In the next blade, you can set the restore configuration. You can choose between
    creating a new VM or replacing a VM. Select **Replace existing** and select the
    following values:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个面板中，你可以设置恢复配置。你可以选择创建一个新的虚拟机或替换现有虚拟机。选择**替换现有虚拟机**并选择以下值：
- en: '![](img/e6c0133c-cd05-4e87-8b68-f5d0fb516104.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e6c0133c-cd05-4e87-8b68-f5d0fb516104.png)'
- en: Setting the restore configuration
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 设置恢复配置
- en: Make sure that the VM is turned off.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保虚拟机已关闭。
- en: Click **OK **and **Restore**.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**和**恢复**。
- en: The backup will now be restored and the existing VM will be replaced by the
    backup.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 备份现在将被恢复，现有的虚拟机将被备份替换。
- en: Azure Site Recovery is already covered in [Chapter 6](6bb56fd5-3785-42d2-b32c-4ba14333dca4.xhtml),
    *Configuring Azure Files and Implementing Azure Backup*. For more information
    about what features and capabilities it has to offer, you can refer to that chapter.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 站点恢复在[第六章](6bb56fd5-3785-42d2-b32c-4ba14333dca4.xhtml)中已有介绍，*配置 Azure
    文件和实现 Azure 备份*。有关它所提供的功能和能力的更多信息，可以参考该章节。
- en: Summary
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered how to manage your VMs and how to implement VM backups.
    We also covered how to manage your VMs from the Azure portal, and how to move
    and redeploy them using PowerShell and CLI. We looked into the automation of configuration
    management and we took a deep dive into Azure backup and restore operations for
    your VMs.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讲解了如何管理虚拟机，以及如何实施虚拟机备份。我们还讨论了如何从 Azure 门户管理虚拟机，以及如何使用 PowerShell 和 CLI
    移动和重新部署虚拟机。我们深入探讨了配置管理的自动化，并对 Azure 备份和恢复操作进行了详细分析。
- en: In the next chapter, we will begin with the first part of the *Deploying and
    Managing Virtual Networks* objective by covering how to implement and manage virtual
    networking.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将从*部署和管理虚拟网络*目标的第一部分开始，讲解如何实施和管理虚拟网络。
- en: Questions
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: 'Answer the following questions to test your knowledge of the information in
    this chapter. You can find the answers in the *Assessments* section at the end
    of this book:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 回答以下问题，以测试您对本章内容的理解。您可以在本书末尾的*评估*部分找到答案：
- en: Can you use both PowerShell and the CLI to move, redeploy, and resize your Windows
    and Linux VMs?
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以使用PowerShell和CLI来移动、重新部署和调整Windows和Linux虚拟机的大小吗？
- en: 'Yes'
  id: totrans-179
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-180
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 否
- en: Can you only add extra data disks and network interfaces from the Azure portal?
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您只能通过Azure门户添加额外的数据磁盘和网络接口吗？
- en: 'Yes'
  id: totrans-182
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-183
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 否
- en: Can you use Custom Script Extensions to configure macOS machines after deployment?
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 部署后，您能使用自定义脚本扩展来配置macOS机器吗？
- en: 'Yes'
  id: totrans-185
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-186
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 否
- en: Further reading
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'You can check out the following links for more information about the topics
    that were covered in this chapter:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以查看以下链接，了解更多关于本章内容的详细信息：
- en: '*Resize a Windows VM*: [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/resize-vm](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/resize-vm).'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*调整Windows虚拟机大小*: [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/resize-vm](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/resize-vm)。'
- en: '*Resize a Linux virtual machine using Azure CLI*: [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/change-vm-size](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/change-vm-size).[ ](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/change-vm-size)'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Azure CLI调整Linux虚拟机大小*: [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/change-vm-size](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/change-vm-size)。'
- en: '*Redeploy Windows virtual machine to new Azure node*: [https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-windows](https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-windows).'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*将Windows虚拟机重新部署到新的Azure节点*: [https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-windows](https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-windows)。'
- en: '*Redeploy Linux virtual machine to new Azure node*: [https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-linux](https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-linux).'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*将Linux虚拟机重新部署到新的Azure节点*: [https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-linux](https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/redeploy-to-new-node-linux)。'
- en: '*Attach a data disk to a Windows VM with PowerShell*:[ ](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/attach-disk-ps)[https://docs.microsoft.com/en-us/azure/virtual-machines/windows/attach-disk-ps](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/attach-disk-ps).'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用PowerShell附加数据磁盘到Windows虚拟机*：[https://docs.microsoft.com/en-us/azure/virtual-machines/windows/attach-disk-ps](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/attach-disk-ps)。'
- en: '*Move Azure VMs to another region*: [https://docs.microsoft.com/en-us/azure/site-recovery/azure-to-azure-tutorial-migrate?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json](https://docs.microsoft.com/en-us/azure/site-recovery/azure-to-azure-tutorial-migrate?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*将Azure虚拟机迁移到另一个区域*: [https://docs.microsoft.com/en-us/azure/site-recovery/azure-to-azure-tutorial-migrate?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json](https://docs.microsoft.com/en-us/azure/site-recovery/azure-to-azure-tutorial-migrate?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)。'
- en: '*Custom Script Extension for Windows*: [https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-windows](https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-windows).'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Windows的自定义脚本扩展*: [https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-windows](https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/custom-script-windows)。'
- en: '*Windows PowerShell Desired State Configuration Overview*: [https://docs.microsoft.com/en-us/powershell/dsc/overview/overview](https://docs.microsoft.com/en-us/powershell/dsc/overview/overview).'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Windows PowerShell所需状态配置概述*: [https://docs.microsoft.com/en-us/powershell/dsc/overview/overview](https://docs.microsoft.com/en-us/powershell/dsc/overview/overview)。'
- en: '*What is Azure Backup?*: [https://docs.microsoft.com/en-us/azure/backup/backup-overview](https://docs.microsoft.com/en-us/azure/backup/backup-overview).'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*什么是Azure备份？*: [https://docs.microsoft.com/en-us/azure/backup/backup-overview](https://docs.microsoft.com/en-us/azure/backup/backup-overview)。'
- en: '*About Site Recovery*: [https://docs.microsoft.com/en-us/azure/site-recovery/site-recovery-overview](https://docs.microsoft.com/en-us/azure/site-recovery/site-recovery-overview).'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*关于站点恢复*：[https://docs.microsoft.com/en-us/azure/site-recovery/site-recovery-overview](https://docs.microsoft.com/en-us/azure/site-recovery/site-recovery-overview).'
