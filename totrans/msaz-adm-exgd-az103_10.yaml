- en: Creating and Configuring VMs for Windows and Linux
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建和配置 Windows 和 Linux 虚拟机
- en: In the previous chapter, we covered Azure file shares and how to sync your on-premises file
    shares with Azure using the Azure File Sync service. You also learned how to back
    up and restore file shares in Azure.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们介绍了 Azure 文件共享以及如何使用 Azure 文件同步服务将本地文件共享与 Azure 同步。你还学会了如何在 Azure 中备份和恢复文件共享。
- en: This chapter introduces the *Deploying and Managing Virtual Machines* objective. In
    this chapter, we are going to cover **V****irtual Machines** (**VMs**) in Azure,
    and the different VM sizes that are available for both Azure and Linux. You will
    learn how you can create and configure VMs for Windows and Linux. We will also
    cover high availability and what actions you can take to configure your VMs for
    high availability. You will also learn how to deploy your VMs using templates
    by using **Azure Resource Manager** (**ARM**) templates, and how to automate your
    deployment using scale sets.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了*部署和管理虚拟机*的目标。在本章中，我们将讨论 Azure 中的**虚拟机**（**VM**）以及可用于 Azure 和 Linux 的不同虚拟机规格。你将学习如何为
    Windows 和 Linux 创建和配置虚拟机。我们还将讨论高可用性，以及如何配置虚拟机以实现高可用性。你还将学习如何使用 **Azure 资源管理器**（**ARM**）模板，通过模板部署虚拟机，并如何使用规模集自动化部署。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: VMs
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟机（VM）
- en: Deploying Windows and Linux VMs
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署 Windows 和 Linux 虚拟机
- en: Configuring high availability
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置高可用性
- en: Deploying and configuring scale sets
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署和配置规模集
- en: Modifying and deploying ARM templates
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改和部署 ARM 模板
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'This chapter uses the following tools for our examples:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章使用以下工具来做示例：
- en: Azure PowerShell: [https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0](https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0)
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure PowerShell: [https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0](https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0)
- en: Visual Studio Code: [https://code.visualstudio.com/download](https://code.visualstudio.com/download)
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Visual Studio Code: [https://code.visualstudio.com/download](https://code.visualstudio.com/download)
- en: The source code for this chapter can be downloaded from [https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter07](https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter07).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的源代码可以从 [https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter07](https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter07)
    下载。
- en: VMs
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟机（VM）
- en: You can run both Windows VMs as well as Linux VMs in Azure. VMs come in all sorts
    of sizes and a variety of prices, ranging from VMs with a small amount of memory
    and processing power for general purposes to large VMs that can be used for **Graphics
    Processing Unit** (**GPU**)-intensive and high-performance computing workloads.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在 Azure 中运行 Windows 虚拟机（VM）以及 Linux 虚拟机（VM）。虚拟机有各种规格和价格，涵盖从具有少量内存和处理能力、适用于一般用途的虚拟机，到可用于**图形处理单元**（**GPU**）密集型和高性能计算工作负载的大型虚拟机。
- en: To create a VM, you can choose from a number of predefined images. There are images available
    for operating systems such as Windows Server or Linux, as well as predefined applications,
    such as SQL Server images and complete farms, which consist of multiple VMs that
    can be deployed at once. An example of a farm is a three-tier SharePoint farm.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 创建虚拟机时，可以从多个预定义镜像中选择。操作系统的镜像（如 Windows Server 或 Linux）以及预定义的应用程序（如 SQL Server
    镜像和完整的虚拟机集群）均可用，这些集群由多个虚拟机组成，可以一次性部署。例如，三层 SharePoint 集群就是一种虚拟机集群。
- en: VMs can be created and managed either from the Azure portal, PowerShell, or
    CLI, and they come in the following series and sizes.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机（VM）可以通过 Azure 门户、PowerShell 或命令行界面（CLI）创建和管理，并且它们有以下系列和规格。
- en: VM series and sizes
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟机系列和规格
- en: 'At the time of writing this book, the following VM series and sizes are available:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在编写本书时，以下虚拟机系列和规格可供选择：
- en: '| **Series** | **Type ** | **Description** |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| **系列** | **类型** | **描述** |'
- en: '| B, Dsv3, Dv3, DSv2, Dv2, Av2, DC | General purpose | These VMs have a balanced
    CPU-to-memory ratio and are ideal for testing and development scenarios. They
    are also suitable for small and medium databases, and web servers with low-to-medium traffic.
    |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| B, Dsv3, Dv3, DSv2, Dv2, Av2, DC | 一般用途 | 这些虚拟机具有平衡的 CPU 和内存比例，适用于测试和开发场景。它们也适合用于小型和中型数据库，以及低到中等流量的
    Web 服务器。 |'
- en: '| Fsv2, Fs, F | Compute optimized | These VMs have a high CPU-to-memory ratio and
    are suitable for web servers with medium traffic, application servers, and network
    appliances for nodes in batch processing. |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| Fsv2, Fs, F | 计算优化型 | 这些虚拟机具有较高的CPU与内存比例，适用于中等流量的Web服务器、应用服务器和批处理节点的网络设备。
    |'
- en: '| Esv3, Ev3, M, GS, G, DSv2, Dv2 | Memory optimized | These VMs have a high
    memory-to-CPU ratio and are suitable for relational database servers, medium-to-large caches,
    and in-memory analytics. |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| Esv3, Ev3, M, GS, G, DSv2, Dv2 | 内存优化型 | 这些虚拟机具有较高的内存与CPU比例，适用于关系数据库服务器、中型至大型缓存以及内存分析。
    |'
- en: '| Lsv2, Ls | Storage optimized | These VMs have high disk throughput and IO
    and are suitable for big data, SQL, and NoSQL databases. |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| Lsv2, Ls | 存储优化型 | 这些虚拟机具有高磁盘吞吐量和IO，适用于大数据、SQL和NoSQL数据库。 |'
- en: '| NV, NVv2, NC, NCv2, NCv3, ND, NDv2 (Preview) | GPU | These VMs are targeted
    for heavy graphic rendering and video editing, deep learning applications, and machine
    learning model training. These VMs are available with single or multiple GPUs.
    |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| NV, NVv2, NC, NCv2, NCv3, ND, NDv2（预览） | GPU | 这些虚拟机适用于重型图形渲染和视频编辑、深度学习应用以及机器学习模型训练。这些虚拟机可以配置为单GPU或多GPU。
    |'
- en: '| H | High-performance compute | These are the fastest VMs available. They
    offer the most powerful CPU with optional high-throughput network interfaces (**R****emote
    Direct Memory Access** (**RDMA**)). |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| H | 高性能计算 | 这些是最快的虚拟机，提供最强大的CPU，并且支持可选的高吞吐量网络接口（**远程直接内存访问**（**RDMA**））。
    |'
- en: 'VM series are updated constantly. New series, types, and sizes are added and
    removed frequently. To stay up to date with these changes, you can refer to the
    following site for Windows VM sizes: [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes).
    For Linux VM sizes, you can refer to [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtualmachines%2flinux%2ftoc.json](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机系列会不断更新。新的系列、类型和大小经常被添加和删除。为了跟上这些变化，您可以参考以下网站了解Windows虚拟机的大小：[https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes)。对于Linux虚拟机的大小，您可以参考[https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtualmachines%2flinux%2ftoc.json](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)。
- en: Managed disks
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 托管磁盘
- en: Azure managed disks are the default disks selected when you create a VM in the
    Azure portal. They handle storage for your VMs completely. Previously, you would
    have had to manually create storage accounts to store VM hard disks, and when
    your VM needed to scale up, you had to add additional storage accounts to make
    sure you didn't exceed the limit of 20,000 **Input/Output Operations Per Second**
    (**IOPS**) per account.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: Azure托管磁盘是您在Azure门户中创建虚拟机时默认选择的磁盘类型。它们完全处理虚拟机的存储。以前，您需要手动创建存储帐户来存储虚拟机硬盘，并且当虚拟机需要扩展时，您还需要添加额外的存储帐户，以确保不会超过每个帐户的20,000
    **每秒输入/输出操作**（**IOPS**）的限制。
- en: With managed disks, this burden is now handled for you by Azure. You can now
    create 10,000 VM disks inside a subscription, which can result in thousands of
    VMs inside a subscription, without the need to copy disks between storage accounts.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 使用托管磁盘后，这个负担已由Azure为您处理。您现在可以在一个订阅内创建10,000个虚拟机磁盘，这意味着一个订阅内可以拥有成千上万的虚拟机，无需在存储帐户之间复制磁盘。
- en: Availability sets
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可用性集
- en: 'To create a reliable infrastructure, adding your VMs to an availability set
    is key. There are several scenarios that can have an impact on the availability
    of your Azure VMs. These are as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 为了创建可靠的基础设施，将虚拟机添加到可用性集是关键。以下是可能影响Azure虚拟机可用性的几种场景：
- en: '**Unplanned hardware maintenance event**: When hardware is about to fail, Azure fires
    an unplanned hardware maintenance event. Live migration technology is used, which
    predicts the failure and then moves the VM, the network connections, memory, and
    storage to different physical machines, without disconnecting the client. When
    your VM is moved, the performance is reduced for a short time because the VM is
    paused for 30 seconds. Network connections, memory, and open files are still preserved.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**计划外硬件维护事件**：当硬件即将发生故障时，Azure会触发计划外硬件维护事件。此时会使用实时迁移技术来预测故障，并将虚拟机、网络连接、内存和存储迁移到不同的物理机器，而不会断开客户端。当虚拟机被迁移时，性能会短暂下降，因为虚拟机会暂停30秒。网络连接、内存和打开的文件仍然会被保留。'
- en: '**Unexpected downtime**: The VM is down when this event occurs because Azure
    needs to heal your VM inside the same data center. A hardware or physical infrastructure
    failure often causes this event to happen.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**意外停机**：当此事件发生时，虚拟机会停机，因为 Azure 需要在同一数据中心内修复虚拟机。硬件或物理基础设施故障通常会导致此事件发生。'
- en: '**Planned hardware maintenance event**: This type of event is a periodic update from
    Microsoft in Azure to improve the platform. Most of these updates don''t have
    a significant impact on the uptime of VMs, but some of them may require a reboot or
    restart.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**计划硬件维护事件**：此类事件是微软在 Azure 中进行的定期更新，以提升平台性能。这些更新大多数对虚拟机的正常运行时间没有显著影响，但其中一些可能需要重启或重启虚拟机。'
- en: To provide redundancy during these types of events, you can group two or more
    VMs in an availability set. By leveraging availability sets, VMs are distributed
    across multiple isolated hardware nodes in a cluster. This way, Azure can ensure
    that during an event or failure, only a subset of your VMs is impacted and your
    overall solution will remain operational and available. This way, the 99.95% Azure
    **Service Level Agreement** (**SLA**) can still be met during outages and other
    failures.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在此类事件发生时提供冗余，你可以将两个或更多虚拟机分组到一个可用性集中。通过利用可用性集，虚拟机会分布在集群中的多个独立硬件节点上。这样，Azure
    可以确保在事件或故障发生时，只有部分虚拟机会受到影响，整体解决方案仍将保持运行并保持可用。这样，即使发生停机或其他故障，也能满足 99.95% 的 Azure
    **服务等级协议** (**SLA**)要求。
- en: VMs can only be assigned to an availability set during initial deployment.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机只能在初次部署时分配到可用性集。
- en: Fault domains and update domains
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 故障域和更新域
- en: When you place your VMs in an availability set, Azure guarantees to spread them
    across fault and update domains. By default, Azure will assign three fault domains
    and five update domains (which can be increased to a maximum of 20) to the availability
    set.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 当你将虚拟机放入可用性集时，Azure 会保证将它们分布到故障域和更新域中。默认情况下，Azure 会为可用性集分配三个故障域和五个更新域（可以增加到最多
    20 个）。
- en: 'When spreading your VMs over fault domains, your VMs sit over three different
    racks in the Azure Datacenter. So, in the case of an event or failure of the underlying
    platform, only one rack gets affected and the other VMs remain accessible as depicted
    in the following diagram:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 当将虚拟机分布在故障域时，虚拟机会被放置在 Azure 数据中心的三个不同机架上。因此，在发生事件或平台故障时，只有一个机架会受到影响，其他虚拟机仍然可以访问，如下图所示：
- en: '![](img/c9b3494f-cf22-4657-986f-cba1aeec22ef.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c9b3494f-cf22-4657-986f-cba1aeec22ef.png)'
- en: VMs spread over three fault domains
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机分布在三个故障域中
- en: 'Update domains are useful in the case of an OS or host update. When you spread
    your VMs across multiple update domains, one domain will be updated and rebooted
    while the others remain accessible as depicted in the following diagram:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 更新域在操作系统或主机更新时非常有用。当你将虚拟机分布到多个更新域时，其中一个更新域会进行更新并重启，而其他更新域则保持可访问，如下图所示：
- en: '![](img/e91df8b7-c4c4-4f85-b78d-a005e98279df.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e91df8b7-c4c4-4f85-b78d-a005e98279df.png)'
- en: VMs spread over five update domains and three fault domains
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机分布在五个更新域和三个故障域中
- en: In the next demonstration, we are going to create a new Windows VM in the Azure
    portal.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个演示中，我们将在 Azure 门户中创建一个新的 Windows 虚拟机。
- en: Deploying Windows and Linux VMs
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署 Windows 和 Linux 虚拟机
- en: In the upcoming demonstrations, we are going to deploy a Windows Server VM from
    both the Azure portal and PowerShell.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的演示中，我们将通过 Azure 门户和 PowerShell 部署一个 Windows Server 虚拟机（VM）。
- en: Deploying Linux machines is quite similar to deploying Windows machines. We
    are not going to cover how to deploy Linux machines. For more information about
    how to deploy Linux machines in Azure, you can refer to the *Further reading* section
    at the end of this chapter.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 部署 Linux 虚拟机与部署 Windows 虚拟机非常相似。我们不会讲解如何部署 Linux 虚拟机。有关如何在 Azure 中部署 Linux 虚拟机的更多信息，请参考本章末尾的*进一步阅读*部分。
- en: Deploying a Windows VM from the Azure portal
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从 Azure 门户部署 Windows 虚拟机
- en: 'In this demonstration, we are going to deploy a Windows VM from the Azure portal.
    We are going to set up networking and storage, and select a VM size for this VM.
    We are also going to configure high availability for this VM, by placing it in
    an *availability set*. To do so, perform the following steps:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在本次演示中，我们将从 Azure 门户部署一个 Windows 虚拟机。我们将设置网络和存储，并为此虚拟机选择合适的大小。我们还将通过将其放入*可用性集*中来配置此虚拟机的高可用性。为此，请按照以下步骤操作：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开 [https://portal.azure.com](https://portal.azure.com) 导航到 Azure 门户。
- en: 'In the left menu, click Virtual machines, and then, in the top menu, click +
    Add as follows:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧菜单中，点击虚拟机，然后在顶部菜单中点击+ 添加，如下所示：
- en: '![](img/4902b806-2c0a-4e80-bfd9-77b2c9bbc0d4.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4902b806-2c0a-4e80-bfd9-77b2c9bbc0d4.png)'
- en: Creating a new VM
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的虚拟机
- en: 'We are going to create a Windows VM, so in the Basics blade, add the following
    values:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将创建一台 Windows 虚拟机，因此在基础面板中，添加以下值：
- en: '**Subscription**: Choose a subscription.'
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**订阅**：选择一个订阅。'
- en: '**Resource group**: `PacktVMGroup`.'
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**：`PacktVMGroup`。'
- en: '**Virtual machine name**: `PacktWindowsVM`.'
  id: totrans-59
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟机名称**：`PacktWindowsVM`。'
- en: '**Region**: Choose a region.'
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**区域**：选择一个区域。'
- en: '**Availability options**: Here, select **Availability set**.'
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可用性选项**：在此选择**可用性集**。'
- en: '**Availability set**: Create new, and call it `PacktWindowsAS`. Keep the default
    fault domains and update the domains for this VM.'
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可用性集**：创建新的，并命名为`PacktWindowsAS`。保持默认的容错域，并为此虚拟机更新域。'
- en: '**Image**: Windows Server Datacenter 2016.'
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**镜像**：Windows Server Datacenter 2016。'
- en: '**Size**: Here, you can choose between the different sizes. Click Change size,
    and select Standard DS1 v2.'
  id: totrans-64
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大小**：在这里，您可以选择不同的大小。点击更改大小，然后选择 Standard DS1 v2。'
- en: '**Administrator account**: Provide a username and a password.'
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理员账户**：提供用户名和密码。'
- en: '**Inbound port rules**: Select **Allow selected ports** and enable **Remote
    Desktop**** Protocol** (**RDP**)**.** You will need this to log in to the server
    after creation.'
  id: totrans-66
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**入站端口规则**：选择**允许选择的端口**并启用**远程桌面协议**(**RDP**)**。** 您将需要此功能以在创建后登录服务器。'
- en: '**Save money**: If you already have a valid Windows Server Datacenter license,
    you get a discount on this VM.'
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**节省成本**：如果您已经拥有有效的 Windows Server Datacenter 许可证，您将获得此虚拟机的折扣。'
- en: 'Click **Next: Disks**.'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步：磁盘**。
- en: 'Here, you can select the disk type. Keep the default as follows, which is Premium
    SSD:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，您可以选择磁盘类型。保持默认设置如下，即 Premium SSD：
- en: '![](img/029e2366-cd9e-49eb-b197-5df6ddcfda7d.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/029e2366-cd9e-49eb-b197-5df6ddcfda7d.png)'
- en: Select disk type
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 选择磁盘类型
- en: 'Click **Next: Networking**.'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步：网络**。
- en: 'In the Networking blade, you can configure the virtual network. You can keep
    the default values for this machine as follows:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在网络面板中，您可以配置虚拟网络。您可以保持此机器的默认值，如下所示：
- en: '![](img/e610ae0d-6521-44c2-989d-490e95404f31.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e610ae0d-6521-44c2-989d-490e95404f31.png)'
- en: Set networking for VM
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 设置虚拟机的网络
- en: 'Click **Next: Management**.'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步：管理**。
- en: 'In the Management blade, you can configure monitoring, and create and select
    a storage account for monitoring. You can also assign a system-assigned managed
    identity, which can be used to authenticate to various Azure resources, such as
    Azure Key Vault, without storing any credentials in code. You can also enable
    auto shutdown in here as follows:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在管理面板中，您可以配置监控，并为监控创建和选择存储账户。您还可以分配系统分配的托管身份，用于向各种 Azure 资源（例如 Azure Key Vault）进行身份验证，而无需在代码中存储任何凭证。您还可以在此启用自动关机，具体操作如下：
- en: '![](img/93e1efd4-147b-42c0-a193-1bd21d7f24f7.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/93e1efd4-147b-42c0-a193-1bd21d7f24f7.png)'
- en: Set management features
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 设置管理功能
- en: We can now create the VM. Click **Review + create** and the settings will be
    validated. After that, click **Create** to actually deploy the VM.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们可以创建虚拟机了。点击**查看 + 创建**，系统将验证设置。然后，点击**创建**，实际部署虚拟机。
- en: The steps for deploying Linux VMs are similar to creating Windows VMs, so we
    are going to skip this in this demonstration. For more information on how to deploy
    Linux VMs from the Azure portal, you can refer to, [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal).
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 部署 Linux 虚拟机的步骤与创建 Windows 虚拟机类似，因此我们在本示范中将跳过这部分内容。有关如何通过 Azure 门户部署 Linux 虚拟机的更多信息，请参阅[https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal)。
- en: We have now deployed a Windows VM, placed it in an Availability Set, and looked
    at the networking, storage, and monitoring features, and capabilities for this
    VM. In the next section, we are going to deploy a Windows Server VM from PowerShell.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经部署了一台 Windows 虚拟机，将其放入了可用性集，并查看了此虚拟机的网络、存储和监控功能。在下一部分，我们将通过 PowerShell
    部署一台 Windows Server 虚拟机。
- en: Deploying a Windows VM from PowerShell
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过 PowerShell 部署 Windows 虚拟机
- en: 'In the next demonstration, we are going to create two Windows Server VMs from
    PowerShell and place them in an Availability Set. To do so you have to perform
    the following steps:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的演示中，我们将通过 PowerShell 创建两个 Windows Server 虚拟机，并将它们放入一个可用性集。为此，您需要执行以下步骤：
- en: 'First, we need to log in to the Azure account as follows:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们需要按如下方式登录 Azure 账户：
- en: '[PRE0]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If necessary, select the right subscription as follows:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如有必要，请按如下方式选择正确的订阅：
- en: '[PRE1]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Create a resource group for the Availability Set as follows:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为可用性集创建一个资源组，如下所示：
- en: '[PRE2]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Then, we can create an availability set for the VMs as follows:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们可以为虚拟机创建一个可用性集，方法如下：
- en: '[PRE3]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We have to set the administrator credentials for the VMs as follows:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要为虚拟机设置管理员凭据，如下所示：
- en: '[PRE4]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'We can now create the two VMs inside the Availability Set as follows:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以在可用性集中创建两个虚拟机，如下所示：
- en: '[PRE5]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: In the last two demonstrations, we created VMs inside an Availability Set from
    the Azure portal and PowerShell. In the next section, we are going to cover scale
    sets.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后两次演示中，我们在 Azure 门户和 PowerShell 中创建了可用性集中的虚拟机。在接下来的部分，我们将介绍扩展集。
- en: VM scale sets
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟机扩展集
- en: VM scale sets are used for deploying multiple VMs at once without the need for
    manual actions or using scripts. You can then manage them all at once from a single
    place. VM scale sets are typically used to build large-scale infrastructures,
    where keeping all of your VMs in sync is key. The maintenance of VMs, including
    keeping them in sync, is handled by Azure. VM scale sets use Availability Sets
    under the hood. VMs inside a scale set are automatically spread over the fault
    and update domains by the underlying platform. VM scale sets use Azure Autoscale
    by default. You can, however, add or remove instances yourself instead of using
    Autoscale.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机扩展集用于一次性部署多个虚拟机，无需手动操作或使用脚本。然后，您可以从一个地方集中管理它们。虚拟机扩展集通常用于构建大规模的基础设施，其中保持所有虚拟机同步至关重要。虚拟机的维护，包括保持同步，由
    Azure 处理。虚拟机扩展集在后台使用可用性集。扩展集中的虚拟机会自动根据故障和更新域分布在底层平台上。虚拟机扩展集默认使用 Azure 自动扩展（Autoscale）。不过，您也可以选择自己添加或删除实例，而不使用自动扩展功能。
- en: 'When creating a scale set, a couple of artefacts are created for you automatically.
    As well as the number of VMs you have specified are added to the set, an Azure
    Load Balancer and Azure Autoscale are added, along with a virtual network and
    a public IP address, as shown in the following screenshot:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 创建扩展集时，会自动为您创建一些构件。除了您指定数量的虚拟机会被添加到集群中外，还会添加一个 Azure 负载均衡器和 Azure 自动扩展，以及一个虚拟网络和一个公共
    IP 地址，如下图所示：
- en: '![](img/41dc19f5-9f21-45dd-b62c-d053b44c3112.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![](img/41dc19f5-9f21-45dd-b62c-d053b44c3112.png)'
- en: Azure VM scale set
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 虚拟机扩展集
- en: In the next section, we are going to deploy and configure scale sets.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将部署和配置扩展集。
- en: Deploying and configuring scale sets
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署和配置扩展集
- en: 'To create a VM scale set from the Azure portal, take the following steps:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 从 Azure 门户创建虚拟机扩展集，请按照以下步骤操作：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)访问 Azure 门户。
- en: Click on Create a resource and type in `Scale Set` in the search bar. Select
    **Virtual machine scale se**t.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击创建资源，并在搜索栏中输入`Scale Set`。选择**虚拟机扩展集**。
- en: 'In the next screen, click on Create and add the following settings for creating
    the scale set:'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕中，点击创建并为扩展集添加以下设置：
- en: '**Virtual machine scale set name**: `PacktScaleSet`'
  id: totrans-109
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟机扩展集名称**：`PacktScaleSet`'
- en: '**Operating system disk image**: Windows Server 2016 Datacenter'
  id: totrans-110
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作系统磁盘镜像**：Windows Server 2016 数据中心版'
- en: '**Subscription**: Select a subscription'
  id: totrans-111
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**订阅**：选择一个订阅'
- en: '**Resource group**: `PacktVMGroup`'
  id: totrans-112
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**：`PacktVMGroup`'
- en: '**Location**: East US'
  id: totrans-113
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置**：美国东部'
- en: '**Availability zone**: None'
  id: totrans-114
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可用性区域**：无'
- en: '**Username**: `SCPacktUser`'
  id: totrans-115
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户名**：`SCPacktUser`'
- en: '**Password**: Fill in a password'
  id: totrans-116
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：填写密码'
- en: '**Instance count**: `2`'
  id: totrans-117
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实例数量**：`2`'
- en: '**Instance size**: Standard DS1 v2'
  id: totrans-118
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实例大小**：标准 DS1 v2'
- en: '**Use managed disks**: Yes'
  id: totrans-119
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用托管磁盘**：是'
- en: '**Enable scaling beyond 100 instances**: No:'
  id: totrans-120
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**启用扩展超过 100 个实例**：否'
- en: '![](img/90ad840b-6871-4002-a0f7-5a986c20eeaf.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/90ad840b-6871-4002-a0f7-5a986c20eeaf.png)'
- en: Scale set
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展集
- en: 'If you scroll down, you can configure the autoscale settings, you can choose
    between the different load balancing settings, and you can configure networking
    and monitoring capabilities as follows:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果向下滚动，您可以配置自动扩展设置，选择不同的负载均衡设置，并按如下方式配置网络和监控功能：
- en: '![](img/8d0a868e-c416-4856-99b1-a97628064058.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8d0a868e-c416-4856-99b1-a97628064058.png)'
- en: Scale set configuration settings
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展集配置设置
- en: Click **Create**. The scale set with the number of provided VMs in it is now
    deployed.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**。现在，包含所提供数量虚拟机的扩展集已经部署完毕。
- en: In the next and last sections of this chapter, we are going to cover how to
    automate the deployment of VMs using ARM templates.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的最后几个部分，我们将介绍如何使用 ARM 模板自动化虚拟机的部署。
- en: Modifying and deploying ARM templates
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修改和部署 ARM 模板
- en: ARM templates define the infrastructure and configuration of your Azure solution.
    Azure is managed by an API, which is called the Resource Manager or ARM API. You
    can use this API to deploy infrastructure as code and configure your Azure environment.
    This API can be called from various tooling and resources; you can do it using
    the Azure portal, PowerShell, CLI, by calling the API directly, and by creating
    ARM templates.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: ARM 模板定义了 Azure 解决方案的基础设施和配置。Azure 通过一个 API 进行管理，这个 API 被称为资源管理器（Resource Manager）或
    ARM API。你可以使用这个 API 部署基础设施作为代码，并配置你的 Azure 环境。这个 API 可以通过多种工具和资源进行调用；你可以使用 Azure
    门户、PowerShell、CLI、直接调用 API，或创建 ARM 模板来实现。
- en: You can create an ARM template in JSON format and use this to repeatedly deploy
    your solution across your Azure environment in a consistent state. The template
    is processed by Resource Manager like any other request, and it will parse the
    template and convert the syntax into REST API operations for the appropriate resource
    providers. The REST API uses the resources section inside the template to call
    the resource-specific APIs. An example of a resource provider is `Microsoft.Storage/storageAccounts`.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以创建一个 JSON 格式的 ARM 模板，并使用它在 Azure 环境中以一致的状态反复部署你的解决方案。模板会像其他请求一样被资源管理器处理，资源管理器会解析模板，并将语法转换为针对相应资源提供者的
    REST API 操作。REST API 使用模板中的资源部分来调用特定资源的 API。例如，`Microsoft.Storage/storageAccounts`
    是一个资源提供者。
- en: Microsoft offers various predefined ARM templates that can be downloaded and
    deployed. You can download the quick start templates from GitHub, and deploy them
    directly from GitHub, or download them and make the necessary adjustments: [https://github.com/Azure/azure-quickstart-templates](https://github.com/Azure/azure-quickstart-templates).
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 微软提供了多种预定义的 ARM 模板，可以下载并进行部署。你可以从 GitHub 下载快速启动模板，并直接从 GitHub 部署，或者下载并进行必要的调整：[https://github.com/Azure/azure-quickstart-templates](https://github.com/Azure/azure-quickstart-templates)。
- en: In the next section, we are going to modify an ARM template in the Azure portal.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分中，我们将在 Azure 门户中修改一个 ARM 模板。
- en: Modifying an ARM template
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修改 ARM 模板
- en: 'In the demonstration, we are going to create an ARM template of a storage account
    it in the Azure portal. We are going to modify this template, so that it will
    generate a storage account name automatically. We will then deploy this template
    again and use it to create a new storage account from the Azure portal. Therefore,
    you have to take the following steps:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 在演示中，我们将创建一个存储账户的 ARM 模板并将其保存在 Azure 门户中。我们将修改这个模板，使其能够自动生成存储账户名称。然后，我们会再次部署这个模板，并使用它从
    Azure 门户创建一个新的存储账户。因此，您需要执行以下步骤：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开 [https://portal.azure.com](https://portal.azure.com) 来导航到 Azure 门户。
- en: In the left menu, select + **Create a resource**, then **Storage** and then
    **Storage account**.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧菜单中，选择 + **创建资源**，然后选择 **存储**，再选择 **存储账户**。
- en: 'Add the following values:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加以下值：
- en: '**Subscription**: Pick a subscription'
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**订阅**: 选择一个订阅'
- en: '**Resource group**: Create a new one and call it `PacktARMResourceGroup`'
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**: 创建一个新的资源组，命名为 `PacktARMResourceGroup`'
- en: '**Storage account name**: `packtarm`'
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**存储账户名称**: `packtarm`'
- en: '**Location**: (US) East US'
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置**: （美国）东部美国'
- en: '**Performance**: Standard'
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**性能**: 标准'
- en: '**Account kind**: StorageV2 (general purpose v2)'
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**账户类型**: StorageV2（通用目的 v2）'
- en: '**Replication**: Read-access geo-redundant storage (RA-GRS)'
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**复制**: 读取访问地理冗余存储（RA-GRS）'
- en: '**Access tier****:** Hot:'
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问层**：热存储：'
- en: '![](img/1d206643-8489-4d9c-b0b4-f2984d192f76.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1d206643-8489-4d9c-b0b4-f2984d192f76.png)'
- en: Create a new storage account
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个新的存储账户
- en: Click **Review + create**. Do not select **Create**.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **查看 + 创建**。不要选择 **创建**。
- en: 'In the next step, but select Download a template for automation:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一步中，选择“下载自动化模板”：
- en: '![](img/719a4de5-c47c-4a13-89c9-934689f6d2cf.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](img/719a4de5-c47c-4a13-89c9-934689f6d2cf.png)'
- en: Download template for automation
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 下载自动化模板
- en: 'The editor will be opened and the generated template will be displayed. The
    main pane shows the template. It has six top-level elements: `schema`, `contentVersion`, `parameters`, `variables`, `resources`,
    and `output`. There are also six parameters. The `storageAccountName` is highlighted
    in the following screenshot. In the template, one Azure resource is defined. The
    type is `Microsoft.Storage/storageAccounts`. Select **Download** from the top
    menu:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑器将被打开，生成的模板将显示出来。主面板显示的是模板，它包含六个顶级元素：`schema`、`contentVersion`、`parameters`、`variables`、`resources`
    和 `output`。还有六个参数。`storageAccountName` 在以下截图中已被突出显示。在模板中，定义了一个 Azure 资源，类型是 `Microsoft.Storage/storageAccounts`。从顶部菜单中选择
    **下载**：
- en: '![](img/bd350a22-e162-4765-a1d7-543e6e1314cb.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bd350a22-e162-4765-a1d7-543e6e1314cb.png)'
- en: Main ARM template
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 主要 ARM 模板
- en: Open the downloaded ZIP file, and then save `template.json` to your computer.
    In the next section, you use a template deployment tool to edit the template.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开下载的 ZIP 文件，然后将 `template.json` 保存到你的计算机。在下一节中，你将使用模板部署工具来编辑该模板。
- en: 'Select **Parameters** in the top menu, and look at the values. We will need
    this later during the deployment:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择顶部菜单中的 **参数**，并查看这些值。我们稍后在部署过程中需要这些值：
- en: '![](img/37ea20fd-a538-417b-9f1b-529f0a3862e9.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](img/37ea20fd-a538-417b-9f1b-529f0a3862e9.png)'
- en: ARM template parameters
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: ARM 模板参数
- en: The Azure portal can be used for basic editing of ARM templates. More complex
    ARM templates can be edited using Visual Studio Code, for instance. We are going
    to use the Azure portal for this demonstration. Therefore, select **+ Create a
    resource**, then in the search box type `Template Deployment`. Then select **Create**.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure 门户可用于基本的 ARM 模板编辑。对于更复杂的 ARM 模板，可以使用 Visual Studio Code 等工具进行编辑。我们将在此演示中使用
    Azure 门户。因此，选择 **+ 创建资源**，然后在搜索框中输入 `Template Deployment`。接着选择 **创建**。
- en: 'In the next blade, you have different options for loading templates. For this
    demonstration, select **Build your own template in the editor**:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个页面中，你可以选择不同的模板加载选项。在这个演示中，选择 **在编辑器中构建自己的模板**：
- en: '![](img/7f5665cd-6324-4f59-a328-8a85657983b9.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7f5665cd-6324-4f59-a328-8a85657983b9.png)'
- en: Template options
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 模板选项
- en: 'Select **Load file**, and then follow the instructions to load the `template.json`
    that we have downloaded in the last section. Make the following changes:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **加载文件**，然后按照说明加载我们在上一节下载的 `template.json`。进行以下更改：
- en: Remove the `storageAccountName` parameter.
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移除 `storageAccountName` 参数。
- en: 'Add a new variable:'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个新变量：
- en: '[PRE6]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Replace `"name": "[parameters(''storageAccountName'')]"`, with `"name": "[variables(''storageAccountName'')]"`:'
  id: totrans-167
  prefs:
  - PREF_OL
  - PREF_OL
  type: TYPE_NORMAL
  zh: '将 `"name": "[parameters(''storageAccountName'')]"` 替换为 `"name": "[variables(''storageAccountName'')]"`：'
- en: '![](img/27437052-e8c4-4e32-a3cd-4112961c803f.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](img/27437052-e8c4-4e32-a3cd-4112961c803f.png)'
- en: Make changes to the highlighted sections
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 修改突出显示的部分
- en: 'The code of the template will look as follows:'
  id: totrans-170
  prefs:
  - PREF_OL
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模板的代码将如下所示：
- en: 'The `schema` and `parameters` sections:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '`schema` 和 `parameters` 部分：'
- en: '[PRE7]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'And the `variable` and `resources` section:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 以及 `variable` 和 `resources` 部分：
- en: '[PRE8]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Then select **Save.**
  id: totrans-175
  prefs:
  - PREF_OL
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后选择 **保存**。
- en: 'In the next screen, fill in the values for creating the storage account. You
    will see that the parameter for filling in the storage account name is removed.
    This will be generated automatically. Fill in the following values:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕中，填写用于创建存储帐户的值。你会看到填入存储帐户名称的参数被移除，这个值将会自动生成。填写以下值：
- en: '**Resource group**: Select the resource group name you created in the previous
    section.'
  id: totrans-177
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资源组**: 选择你在上一节创建的资源组名称。'
- en: '**Location**: Central US'
  id: totrans-178
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置**: 中部美国'
- en: '**Account type**: Standard_LRS'
  id: totrans-179
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**帐户类型**: Standard_LRS'
- en: '**Kind**: StorageV2'
  id: totrans-180
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**类型**: StorageV2'
- en: '**Access Tier:** Hot'
  id: totrans-181
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问层**: 热'
- en: '**Https Traffic Only Enabled**: true'
  id: totrans-182
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仅启用 HTTPS 流量**: true'
- en: '**I agree to the terms and conditions stated above**: Select this option:'
  id: totrans-183
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**我同意上述条款和条件**: 选择此选项：'
- en: '![](img/e53cbef3-a6cd-4f40-bb76-3a50b35a95f8.png)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e53cbef3-a6cd-4f40-bb76-3a50b35a95f8.png)'
- en: Fill in values
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 填写值
- en: Select **Purchase**.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **购买**。
- en: 'The ARM template will now be deployed. After deployment, go to the Overview
    blade of the resource group. You will see that the storage account name is automatically
    generated for you:'
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ARM 模板现在将被部署。部署完成后，进入资源组的概览页面。你将看到存储帐户名称已经自动生成：
- en: '![](img/6913afbc-83f7-4e9e-9ec8-09ee52ca0da3.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6913afbc-83f7-4e9e-9ec8-09ee52ca0da3.png)'
- en: Storage account name
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 存储帐户名称
- en: For more information about the syntax and structure of ARM templates, you can
    refer to the following website: [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates).
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 有关ARM模板语法和结构的更多信息，可以参考以下网站：[https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates)。
- en: We have now modified an ARM template in the Azure portal and created a new storage
    account using the modified ARM templates. In the next demonstration, we are going
    to save a deployment as an ARM template.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经在Azure门户中修改了一个ARM模板，并使用修改后的ARM模板创建了一个新的存储帐户。在接下来的演示中，我们将保存一个部署作为ARM模板。
- en: Save a deployment as an ARM template
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将部署保存为ARM模板
- en: For this demonstration, we are going to save a deployment as an ARM template from
    the Azure portal. We are going to export the template of the two VMs that we created
    in an Availability Set using PowerShell.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在本次演示中，我们将从Azure门户将部署保存为ARM模板。我们将导出我们在可用性集内创建的两个虚拟机的模板，使用PowerShell进行操作。
- en: 'Once downloaded, you can then make changes to it, and redeploy it in Azure
    using PowerShell or code. The generated ARM template consists of a large amount
    of code, which makes it very difficult to make changes to it. For saving a deployment
    as an ARM template, take the following steps:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 下载后，你可以对其进行修改，并使用PowerShell或代码在Azure中重新部署。生成的ARM模板包含大量代码，这使得对其进行更改非常困难。保存部署为ARM模板时，请按照以下步骤操作：
- en: Navigate to the Azure portal by opening [https://portal.azure.com](https://portal.azure.com).
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开[https://portal.azure.com](https://portal.azure.com)访问Azure门户。
- en: 'Open the resource group that we created in the previous demonstration and under Settings,
    select the Export template as follows:'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开我们在上一演示中创建的资源组，在设置中选择导出模板，如下所示：
- en: '![](img/ca711df4-48f3-4651-bd3a-431d18f90f2e.png)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ca711df4-48f3-4651-bd3a-431d18f90f2e.png)'
- en: Export template
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 导出模板
- en: 'The template is generated for you based on the settings that we made during
    the creation of the different resources. You can download the template and redeploy
    it from here. You can also download the scripts for CLI, PowerShell, .NET, and
    Ruby, and create the different resources using these programming languages. Select **Download**
    from the top menu as follows:'
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模板是根据我们在创建不同资源时所做的设置生成的。你可以从这里下载模板并重新部署。你还可以下载CLI、PowerShell、.NET和Ruby的脚本，并使用这些编程语言创建不同的资源。从顶部菜单选择**下载**，如下所示：
- en: '![](img/3505ba7f-8dd3-4191-82a3-a60d06f1091e.png)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3505ba7f-8dd3-4191-82a3-a60d06f1091e.png)'
- en: Download template
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 下载模板
- en: The template is downloaded as a ZIP file to your local filesystem.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 模板作为ZIP文件下载到你的本地文件系统。
- en: You can now extract the template files from the ZIP file and open them in Visual
    Studio Code. If you don't have this installed, you can use the download link provided
    at the beginning of this chapter or use Notepad, or some other text editing tool.
    The ZIP file contains three different deployment files, created in different languages.
    There is one each for PowerShell, CLI, and Ruby. It also consists of a `DeploymentHelper.cs`
    file, a `parameters.json` file, and a `template.json` file.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你可以从ZIP文件中提取模板文件并在Visual Studio Code中打开它们。如果你没有安装此工具，可以使用本章开始时提供的下载链接，或使用记事本或其他文本编辑工具。ZIP文件包含三种不同语言创建的部署文件，每种语言都有一个：PowerShell、CLI和Ruby。它还包含一个`DeploymentHelper.cs`文件，一个`parameters.json`文件和一个`template.json`文件。
- en: In Visual Studio Code, you can make all the modifications to the parameters
    and template file that are needed. If you then want to deploy the template again
    to Azure, use one of the deployment files inside the container. In the case of
    PowerShell, right-click on `deploy.ps1` and select **Run with PowerShell**. Fill
    in the subscription ID, provide the resource group name and deployment name, and
    log in using your Azure credentials. This will start the deployment.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Visual Studio Code中，你可以对所需的参数和模板文件进行所有修改。如果你希望再次将模板部署到Azure，请使用容器内的其中一个部署文件。以PowerShell为例，右键点击`deploy.ps1`并选择**使用PowerShell运行**。填写订阅ID，提供资源组名称和部署名称，并使用你的Azure凭据登录。这将启动部署。
- en: Creating ARM templates can be part of the exam questions, so I strongly advise
    you to take the time to familiarize yourself with the syntax and the code blocks
    that are part of the templates.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 创建ARM模板可能是考试中的一部分问题，因此我强烈建议你花时间熟悉模板的语法和代码块。
- en: Summary
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered the first part of the *Deploying and Managing Virtual
    Machines* objective by covering how to create and configure VMs for Windows and
    Linux. You learned about the various aspects and parts that are created when you
    deploy a VM in Azure. We also covered how to automate the deployment of VMs using
    scale sets and ARM templates.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了 *部署和管理虚拟机* 目标的第一部分，内容涵盖了如何为 Windows 和 Linux 创建和配置虚拟机。你学习了在 Azure
    部署虚拟机时会创建的各种组件和部分。我们还介绍了如何使用扩展集和 ARM 模板自动化虚拟机的部署。
- en: In the next chapter, we will continue with the second part of the *Deploying
    and Managing Virtual Machines* objective by covering how to manage Azure VMs and
    VM backups.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将继续进行 *部署和管理虚拟机* 目标的第二部分，内容将涵盖如何管理 Azure 虚拟机和虚拟机备份。
- en: Questions
  id: totrans-209
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: 'Answer the following questions to test your knowledge of the information in
    this chapter. You can find the answers in the *Assessments* section at the end
    of this book:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 回答以下问题，测试你对本章内容的掌握。你可以在本书末尾的 *评估* 部分找到答案：
- en: Can you use VM scale sets to automate the deployment of multiple VMs?
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以使用 VM 扩展集自动化部署多个虚拟机吗？
- en: 'Yes'
  id: totrans-212
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-213
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不是
- en: Can you use availability sets for spreading VMs across update and fault domains?
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以使用可用性集将虚拟机分布到更新和故障域中吗？
- en: 'Yes'
  id: totrans-215
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-216
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不是
- en: Do you have to define resource providers in your ARM templates to deploy the
    various resources in Azure?
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你是否需要在 ARM 模板中定义资源提供程序以部署 Azure 中的各种资源？
- en: 'Yes'
  id: totrans-218
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是的
- en: 'No'
  id: totrans-219
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不是
- en: Further reading
  id: totrans-220
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 深入阅读
- en: 'You can check out the following links for more information about the topics
    that were covered in this chapter:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以查看以下链接，获取更多关于本章所涉及主题的信息：
- en: '*Linux Virtual Machines*: [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/)'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Linux 虚拟机*： [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/)'
- en: '*Quickstart: Create a Linux virtual machine in the Azure portal*: [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal)'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*快速入门：在 Azure 门户中创建 Linux 虚拟机*： [https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal)'
- en: '*Virtual Machine Scale Sets Documentation*: [https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/](https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/)'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*虚拟机扩展集文档*： [https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/](https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/)'
- en: '*Manage the availability of Windows virtual machines in Azure*: [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/manage-availability](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/manage-availability)'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*管理 Azure 中 Windows 虚拟机的可用性*： [https://docs.microsoft.com/en-us/azure/virtual-machines/windows/manage-availability](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/manage-availability)'
- en: '*Azure Resource Manager overview*: [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview)'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Azure 资源管理器概述*： [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview)'
- en: '*Understand the structure and syntax of Azure Resource Manager templates*: [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates)'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*理解 Azure 资源管理器模板的结构和语法*： [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates)'
- en: '*Quickstart: Create and deploy Azure Resource Manager templates by using the
    Azure portal*: [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-quickstart-create-templates-use-the-portal?toc=%2Fazure%2Ftemplates%2Ftoc.json&bc=%2Fazure%2Ftemplates%2Fbreadcrumb%2Ftoc.json](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-quickstart-create-templates-use-the-portal?toc=%2Fazure%2Ftemplates%2Ftoc.json&bc=%2Fazure%2Ftemplates%2Fbreadcrumb%2Ftoc.json)'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*快速入门：通过 Azure 门户创建和部署 Azure 资源管理器模板*： [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-quickstart-create-templates-use-the-portal?toc=%2Fazure%2Ftemplates%2Ftoc.json&bc=%2Fazure%2Ftemplates%2Fbreadcrumb%2Ftoc.json](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-quickstart-create-templates-use-the-portal?toc=%2Fazure%2Ftemplates%2Ftoc.json&bc=%2Fazure%2Ftemplates%2Fbreadcrumb%2Ftoc.json)'
- en: '*Deploy resources with Resource Manager templates and Azure PowerShell*: [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-template-deploy](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-template-deploy)'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用资源管理器模板和 Azure PowerShell 部署资源*: [https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-template-deploy](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-template-deploy)'
- en: '*Azure Quickstart Templates*: [https://azure.microsoft.com/en-us/resources/templates/](https://azure.microsoft.com/en-us/resources/templates/)'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Azure 快速入门模板*: [https://azure.microsoft.com/en-us/resources/templates/](https://azure.microsoft.com/en-us/resources/templates/)'
- en: '*Define resources in Azure Resource Manager templates*: [https://docs.microsoft.com/en-us/azure/templates/](https://docs.microsoft.com/en-us/azure/templates/)'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在 Azure 资源管理器模板中定义资源*: [https://docs.microsoft.com/en-us/azure/templates/](https://docs.microsoft.com/en-us/azure/templates/)'
