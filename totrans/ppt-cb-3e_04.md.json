["```\nt@mylaptop ~ $ puppet module install puppetlabs-stdlib\nNotice: Preparing to install into /home/thomas/.puppet/modules ...\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\nNotice: Installing -- do not interrupt ...\n/home/thomas/.puppet/modules\n└── puppetlabs-stdlib (v4.5.1)\n\n```", "```\n      file {'/tmp/cookbook':\n        ensure => 'file',\n      }\n      file_line {'cookbook-hello':\n        path    => '/tmp/cookbook',\n        line    => 'Hello World!',\n        require => File['/tmp/cookbook'],\n      }\n    ```", "```\n    t@mylaptop ~/.puppet/manifests $ puppet apply oneline.pp \n    Notice: Compiled catalog for mylaptop in environment production in 0.39 seconds\n    Notice: /Stage[main]/Main/File[/tmp/cookbook]/ensure: created\n    Notice: /Stage[main]/Main/File_line[cookbook-hello]/ensure: created\n    Notice: Finished catalog run in 0.02 seconds\n\n    ```", "```\n    t@mylaptop ~/.puppet/manifests $ cat /tmp/cookbook\n    Hello World!\n\n    ```", "```\n  file {'/tmp/cookbook':\n    ensure => 'file',\n  }\n  file_line {'cookbook-hello':\n    path    => '/tmp/cookbook',\n    line    => 'Hello World!',\n    require => File['/tmp/cookbook'],\n  }\n  file_line {'cookbook-goodbye':\n    path    => '/tmp/cookbook',\n    line    => 'So long, and thanks for all the fish.',\n    require => File['/tmp/cookbook'],\n  }\n```", "```\nt@mylaptop ~/.puppet/manifests $ puppet apply oneline.pp \nNotice: Compiled catalog for mylaptop in environment production in 0.36 seconds\nNotice: /Stage[main]/Main/File_line[cookbook-goodbye]/ensure: created\nNotice: Finished catalog run in 0.02 seconds\nt@mylaptop ~/.puppet/manifests $ cat /tmp/cookbook \nHello World!\nSo long, and thanks for all the fish.\n\n```", "```\n  file {'/tmp/cookbook':\n    ensure => 'file',\n  }\n  file_line {'cookbook-remove':\n    ensure  => 'absent',\n    path    => '/tmp/cookbook',\n    line    => 'Hello World!',\n    require => File['/tmp/cookbook'],\n  }\n  file_line {'cookbook-match':\n    path    => '/tmp/cookbook',\n    line    => 'Oh freddled gruntbuggly, thanks for all the fish.',\n    match   => 'fish.$',\n    require => File['/tmp/cookbook'],\n  }\n```", "```\nt@mylaptop ~/.puppet/manifests $ cat /tmp/cookbook \nHello World!\nSo long, and thanks for all the fish.\n\n```", "```\nt@mylaptop ~/.puppet/manifests $ puppet apply oneline.pp \nNotice: Compiled catalog for mylaptop in environment production in 0.30 seconds\nNotice: /Stage[main]/Main/File_line[cookbook-match]/ensure: created\nNotice: /Stage[main]/Main/File_line[cookbook-remove]/ensure: removed\nNotice: Finished catalog run in 0.02 seconds\n\n```", "```\nt@mylaptop ~/.puppet/manifests $ cat /tmp/cookbook \nOh freddled gruntbuggly, thanks for all the fish.\n\n```", "```\nt@mylaptop ~ $ puppet module install puppetlabs-inifile\nNotice: Preparing to install into /home/tuphill/.puppet/modules ...\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\nNotice: Installing -- do not interrupt ...\n/home/tuphill/.puppet/modules\n└── puppetlabs-inifile (v1.1.3)\n\n```", "```\n      ini_setting {'server_true':\n        path    => '/tmp/server.conf',\n        section => 'main',\n        setting => 'server',\n        value   => 'true',\n      }\n    ```", "```\n    t@mylaptop ~/.puppet/manifests $ puppet apply initest.pp \n    Notice: Compiled catalog for burnaby in environment production in 0.14 seconds\n    Notice: /Stage[main]/Main/Ini_setting[server_true]/ensure: created\n    Notice: Finished catalog run in 0.02 seconds\n\n    ```", "```\n    t@mylaptop ~/.puppet/manifests $ cat /tmp/server.conf \n\n    [main]\n    server = true\n\n    ```", "```\n  ini_subsetting {'server_name':\n    path    => '/tmp/server.conf',\n    section => 'main',\n    setting => 'server_host',\n    subsetting => \"$hostname\",\n  }\n```", "```\nt@mylaptop ~/.puppet/manifests $ puppet apply initest.pp \nNotice: Compiled catalog for mylaptop in environment production in 0.34 seconds\nNotice: /Stage[main]/Main/Ini_subsetting[server_name]/ensure: created\nNotice: Finished catalog run in 0.02 seconds\nt@mylaptop ~/.puppet/manifests $ cat /tmp/server.conf \n[main]\nserver = true\nserver_host = mylaptop\n\n```", "```\nt@mylaptop ~/.puppet/manifests $ sudo hostname inihost\nt@mylaptop ~/.puppet/manifests $ puppet apply initest.pp \nNotice: Compiled catalog for inihost in environment production in 0.43 seconds\nNotice: /Stage[main]/Main/Ini_subsetting[server_name]/ensure: created\nNotice: Finished catalog run in 0.02 seconds\nt@mylaptop ~/.puppet/manifests $ cat /tmp/server.conf \n[main]\nserver = true\nserver_host = mylaptop inihost\n\n```", "```\n      class base {\n        augeas { 'enable-ip-forwarding':\n          incl    => '/etc/sysctl.conf',\n          lens    => 'Sysctl.lns',\n          changes => ['set net.ipv4.ip_forward 1'],\n        }\n      }\n    ```", "```\n    [root@cookbook ~]# puppet agent -t\n    Info: Applying configuration version '1412130479'\n    Notice: Augeas[enable-ip-forwarding](provider=augeas): \n    --- /etc/sysctl.conf\t2014-09-04 03:41:09.000000000 -0400\n    +++ /etc/sysctl.conf.augnew\t2014-09-30 22:28:03.503000039 -0400\n    @@ -4,7 +4,7 @@\n     # sysctl.conf(5) for more details.\n\n     # Controls IP packet forwarding\n    -net.ipv4.ip_forward = 0\n    +net.ipv4.ip_forward = 1\n\n     # Controls source route verification\n     net.ipv4.conf.default.rp_filter = 1\n    Notice: /Stage[main]/Base/Augeas[enable-ip-forwarding]/returns: executed successfully\n    Notice: Finished catalog run in 2.27 seconds\n\n    ```", "```\n    [root@cookbook ~]# sysctl -p |grep ip_forward\n    net.ipv4.ip_forward = 1\n\n    ```", "```\naugeas { 'enable-ip-forwarding':\n```", "```\nincl => '/etc/sysctl.conf',\n```", "```\nlens => 'Sysctl.lns',\n```", "```\nchanges => ['set net.ipv4.ip_forward 1'],\n```", "```\nset <parameter> <value>\n```", "```\nnet.ipv4.ip_forward=1\n```", "```\nmodulepath = public:modules\nmanifest = manifests/site.pp\n```", "```\nt@mylaptop ~/puppet $ mkdir public && cd public\nt@mylaptop ~/puppet/public $ puppet module install puppetlabs-concat --modulepath=.\nNotice: Preparing to install into /home/thomas/puppet/public ...\nNotice: Downloading from https://forgeapi.puppetlabs.com ...\nNotice: Installing -- do not interrupt ...\n/home/thomas/puppet/public\n└─┬ puppetlabs-concat (v1.1.1)\n └── puppetlabs-stdlib (v4.3.2)\n\n```", "```\nt@mylaptop ~/puppet/public $ git add .\nt@mylaptop ~/puppet/public $ git commit -m \"adding concat\"\n[production 50c6fca] adding concat\n 407 files changed, 20089 insertions(+)\n\n```", "```\nt@mylaptop ~/puppet/public $ git push origin production\n\n```", "```\n  concat {'hosts.allow':\n    path => '/etc/hosts.allow',\n    mode => 0644\n  }\n```", "```\n  concat::fragment {'hosts.allow header':\n    target  => 'hosts.allow',\n    content => \"# File managed by puppet\\n\",\n    order   => '01'\n  }\n```", "```\n  concat::fragment {'hosts.allow local':\n    target => 'hosts.allow',\n    source => '/etc/hosts.allow.local',\n    order  => '10',\n  }\n```", "```\n  concat::fragment {'hosts.allow tftp':\n    target  => 'hosts.allow',\n    content => \"in.ftpd: .example.com\\n\",\n    order   => '50',\n  }\n```", "```\n  in.tftpd: .example.com\n```", "```\n[root@cookbook ~]# puppet agent -t\nInfo: Caching catalog for cookbook.example.com\nInfo: Applying configuration version '1412138600'\nNotice: /Stage[main]/Base/Concat[hosts.allow]/File[hosts.allow]/ensure: defined content as '{md5}b151c8bbc32c505f1c4a98b487f7d249'\nNotice: Finished catalog run in 0.29 seconds\n\n```", "```\n[root@cookbook ~]# cat /etc/hosts.allow\n# File managed by puppet\nin.tftpd: .example.com\nin.ftpd: .example.com\n\n```", "```\n  <%= @name %>, this is a very large drink.\n```", "```\n  Zaphod Beeblebrox, this is a very large drink.\n```", "```\n    #!/bin/sh\n    /usr/bin/mysqldump -uroot \\ -p<%= @mysql_password %> \\ --all-databases | \\ /bin/gzip > /backup/mysql/all-databases.sql.gz\n    ```", "```\n    node 'cookbook' {\n      $mysql_password = 'secret'\n      file { '/usr/local/bin/backup-mysql':\n        content => template('admin/backup-mysql.sh.erb'),\n        mode    => '0755',\n      }\n    }\n    ```", "```\n    [root@cookbook ~]# puppet agent -t\n    Info: Caching catalog for cookbook.example.com\n    Info: Applying configuration version '1412140971'\n    Notice: /Stage[main]/Main/Node[cookbook]/File[/usr/local/bin/backup-mysql]/ensure: defined content as '{md5}c12af56559ef36529975d568ff52dca5'\n    Notice: Finished catalog run in 0.31 seconds\n\n    ```", "```\n    [root@cookbook ~]# cat /usr/local/bin/backup-mysql \n    #!/bin/sh\n    /usr/bin/mysqldump -uroot \\\n     -psecret \\\n     --all-databases | \\\n     /bin/gzip > /backup/mysql/all-databases.sql.gz\n\n    ```", "```\nServerName <%= @fqdn %>\n```", "```\nMAILTO=<%= @emails.join(',') %>\n```", "```\nServerAdmin <%= @sitedomain == 'coldcomfort.com' ? 'seth@coldcomfort.com' : 'flora@poste.com' %>\n```", "```\n      node 'cookbook' {\n        $ipaddresses = ['192.168.0.1', '158.43.128.1', '10.0.75.207' ]\n        file { '/tmp/addresslist.txt':\n          content => template('base/addresslist.erb')\n        }\n      }\n    ```", "```\n    <% @ipaddresses.each do |ip| -%>\n    IP address <%= ip %> is present\n    <% end -%>\n    ```", "```\n    [root@cookbook ~]# puppet agent -t\n    Info: Caching catalog for cookbook.example.com\n    Info: Applying configuration version '1412141917'\n    Notice: /Stage[main]/Main/Node[cookbook]/File[/tmp/addresslist.txt]/ensure: defined content as '{md5}073851229d7b2843830024afb2b3902d'\n    Notice: Finished catalog run in 0.30 seconds\n\n    ```", "```\n    [root@cookbook ~]# cat /tmp/addresslist.txt \n     IP address 192.168.0.1 is present.\n     IP address 158.43.128.1 is present.\n     IP address 10.0.75.207 is present.\n\n    ```", "```\n<% @ipaddresses.each do |ip| -%>\n```", "```\nIP address <%= ip %> is present.\n```", "```\nIP address 192.168.0.1 is present.\nIP address 158.43.128.1 is present.\nIP address 10.0.75.207 is present.\n```", "```\n<% end -%>\n```", "```\n$interfaces = [ {name => 'eth0', ip => '192.168.0.1'},\n  {name => 'eth1', ip => '158.43.128.1'},\n  {name => 'eth2', ip => '10.0.75.207'} ]\n\n<% @interfaces.each do |interface| -%>\nInterface <%= interface['name'] %> has the address <%= interface['ip'] %>.\n<% end -%>\n\nInterface eth0 has the address 192.168.0.1.\nInterface eth1 has the address 158.43.128.1.\nInterface eth2 has the address 10.0.75.207.\n```", "```\n    This is <%= $message %>.\n    ```", "```\n    $message = \"the message\"\n    file {'/tmp/epp-test':\n      content => epp('/home/thomas/puppet/epp-test.epp')\n    }\n    notify {inline_epp('Also prints <%= $message %>'):}\n    ```", "```\n    t@mylaptop ~/puppet $ puppet apply epp.pp --parser=future\n    Notice: Compiled catalog for mylaptop in environment production in 1.03 seconds\n    Notice: /Stage[main]/Main/File[/tmp/epp-test]/ensure: defined content as '{md5}999ccc2507d79d50fae0775d69b63b8c'\n    Notice: Also prints the message\n\n    ```", "```\n    t@mylaptop ~/puppet $ cat /tmp/epp-test \n    This is the message.\n\n    ```", "```\nfile {'/tmp/epp-test':\n  content => epp('/home/tuphill/puppet/epp-test.epp',\n    { 'message' => \"override $message\"} )\n}\nnotify {inline_epp('Also prints <%= $message %>',\n  { 'message' => \"inline override $message\"}):}\n```", "```\nt@mylaptop ~/puppet $ puppet apply epp.pp --parser=future\nNotice: Compiled catalog for mylaptop.pan.costco.com in environment production in 0.85 seconds\nNotice: Also prints inline override the message\nNotice: Finished catalog run in 0.05 seconds\nt@mylaptop ~/puppet $ cat /tmp/epp-test \nThis is override the message.\n\n```", "```\n    # puppet resource package gnupg ensure=installed\n\n    ```", "```\n    t@mylaptop ~/puppet $ gpg --gen-key\n    gpg (GnuPG) 1.4.18; Copyright (C) 2014 Free Software Foundation, Inc.\n    This is free software: you are free to change and redistribute it.\n    There is NO WARRANTY, to the extent permitted by law.\n    Please select what kind of key you want:\n     (1) RSA and RSA (default)\n     (2) DSA and Elgamal\n     (3) DSA (sign only)\n     (4) RSA (sign only)\n    Your selection? 1\n    RSA keys may be between 1024 and 4096 bits long.\n    What keysize do you want? (2048) 2048\n    Requested keysize is 2048 bits\n    Please specify how long the key should be valid.\n     0 = key does not expire\n     <n>  = key expires in n days\n     <n>w = key expires in n weeks\n     <n>m = key expires in n months\n     <n>y = key expires in n years\n    Key is valid for? (0) 0\n    Key does not expire at all\n    Is this correct? (y/N) y\n    You need a user ID to identify your key; the software constructs the user ID\n    from the Real Name, Comment and Email Address in this form:\n     \"Heinrich Heine (Der Dichter) <heinrichh@duesseldorf.de>\"\n\n    Real name: Thomas Uphill\n    Email address: thomas@narrabilis.com\n    Comment: <enter>\n    You selected this USER-ID:\n     \"Thomas Uphill <thomas@narrabilis.com>\"\n\n    Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o\n    You need a Passphrase to protect your secret key.\n\n    ```", "```\n    You don't want a passphrase - this is probably a *bad* idea!\n    I will do it anyway.  You can change your passphrase at any time,\n    using this program with the option \"--edit-key\".\n\n    gpg: key F1C1EE49 marked as ultimately trusted\n    public and secret key created and signed.\n\n    gpg: checking the trustdb\n    gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model\n    gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u\n    pub   2048R/F1C1EE49 2014-10-01\n     Key fingerprint = 461A CB4C 397F 06A7 FB82  3BAD 63CF 50D8 F1C1 EE49\n    uid                  Thomas Uphill <thomas@narrabilis.com>\n    sub   2048R/E2440023 2014-10-01\n\n    ```", "```\n    We need to generate a lot of random bytes. It is a good idea to perform\n    some other action (type on the keyboard, move the mouse, utilize the\n    disks) during the prime generation; this gives the random number\n    generator a better chance to gain enough entropy.\n\n    ```", "```\n    t@mylaptop ~ $ scp -r .gnupg puppet@puppet.example.com:\n    gpg.conf                                      100% 7680     7.5KB/s   00:00 \n    random_seed                                   100%  600     0.6KB/s   00:00 \n    pubring.gpg                                   100% 1196     1.2KB/s   00:00 \n    secring.gpg                                   100% 2498     2.4KB/s   00:00 \n    trustdb.gpg                                   100% 1280     1.3KB/s   00:00\n\n    ```", "```\n    t@cookbook:~/puppet$ mkdir -p modules/admin/lib/puppet/parser/functions\n\n    ```", "```\n    module Puppet::Parser::Functions\n      newfunction(:secret, :type => :rvalue) do |args|\n        'gpg --no-tty -d #{args[0]}'\n      end\n    end\n    ```", "```\n    For a moment, nothing happened.\n    Then, after a second or so, nothing continued to happen.\n    ```", "```\n    t@mylaptop ~/puppet $ gpg -e -r thomas@narrabilis.com secret_message\n\n    ```", "```\n    t@mylaptop:~/puppet$ mv secret_message.gpg modules/admin/files/\n\n    ```", "```\n    t@mylaptop:~/puppet$ rm secret_message\n\n    ```", "```\n    node 'cookbook' {\n      $message = secret('/etc/puppet/environments/production/ modules/admin/files/secret_message.gpg')\n      notify { \"The secret message is: ${message}\": }\n    }\n    ```", "```\n    [root@cookbook ~]# puppet agent -t\n    Info: Caching catalog for cookbook.example.com\n    Info: Applying configuration version '1412145910'\n    Notice: The secret message is: For a moment, nothing happened. \n    Then, after a second or so, nothing continued to happen.\n    Notice: Finished catalog run in 0.27 seconds\n\n    ```", "```\nmodule Puppet::Parser::Functions\n  newfunction(:secret, :type => :rvalue) do |args|\n    'gpg --no-tty -d #{args[0]}'\n  end\nend\n```", "```\npuppet@puppet:~ $ gpg --list-secret-keys\n/var/lib/puppet/.gnupg/secring.gpg\n----------------------------------\nsec   2048R/F1C1EE49 2014-10-01\nuid                  Thomas Uphill <thomas@narrabilis.com>\nssb   2048R/E2440023 2014-10-01\n\n```", "```\ntuphill@mylaptop ~/puppet $ gpg -e -r thomas@narrabilis.com secret_message\n\n```", "```\n$message = secret(' /etc/puppet/environments/production/modules/admin/files/secret_message.gpg')\n```", "```\npackage { 'exim4': ensure => installed }\n```", "```\n    # Install Percona APT repo\n    class admin::percona_repo {\n      exec { 'add-percona-apt-key':\n        unless  => '/usr/bin/apt-key list |grep percona',\n        command => '/usr/bin/gpg --keyserver hkp://keys.gnupg.net --recv-keys 1C4CBDCDCD2EFD2A && /usr/bin/gpg -a --export CD2EFD2A | apt-key add -',\n        notify  => Exec['percona-apt-update'],\n      }\n\n      exec { 'percona-apt-update':\n        command     => '/usr/bin/apt-get update',\n        require     => [File['/etc/apt/sources.list.d/percona.list'],\n    File['/etc/apt/preferences.d/00percona.pref']],\n        refreshonly => true,\n      }\n\n      file { '/etc/apt/sources.list.d/percona.list':\n        content => 'deb http://repo.percona.com/apt wheezy main',\n        notify  => Exec['percona-apt-update'],\n      }\n\n      file { '/etc/apt/preferences.d/00percona.pref':\n        content => \"Package: *\\nPin: release o=Percona\n        Development Team\\nPin-Priority: 1001\",\n        notify  => Exec['percona-apt-update'],\n      }\n    }\n    ```", "```\n    node 'cookbook' {\n      include admin::percona_repo\n\n      package { 'percona-server-server-5.5':\n        ensure  => installed,\n        require => Class['admin::percona_repo'],\n      }\n    }\n    ```", "```\n    root@cookbook-deb:~# puppet agent -t\n    Info: Caching catalog for cookbook-deb\n    Notice: /Stage[main]/Admin::Percona_repo/Exec[add-percona-apt-key]/returns: executed successfully\n    Info: /Stage[main]/Admin::Percona_repo/Exec[add-percona-apt-key]: Scheduling refresh of Exec[percona-apt-update]\n    Notice: /Stage[main]/Admin::Percona_repo/File[/etc/apt/sources.list.d/percona.list]/ensure: defined content as '{md5}b8d479374497255804ffbf0a7bcdf6c2'\n    Info: /Stage[main]/Admin::Percona_repo/File[/etc/apt/sources.list.d/percona.list]: Scheduling refresh of Exec[percona-apt-update]\n    Notice: /Stage[main]/Admin::Percona_repo/File[/etc/apt/preferences.d/00percona.pref]/ensure: defined content as '{md5}1d8ca6c1e752308a9bd3018713e2d1ad'\n    Info: /Stage[main]/Admin::Percona_repo/File[/etc/apt/preferences.d/00percona.pref]: Scheduling refresh of Exec[percona-apt-update]\n    Notice: /Stage[main]/Admin::Percona_repo/Exec[percona-apt-update]: Triggered 'refresh' from 3 events\n\n    ```", "```\npackage { 'percona-server-server-5.5':\n  ensure  => installed,\n  require => Class['admin::percona_repo'],\n}\n```", "```\nexec { 'add-percona-apt-key':\n  unless  => '/usr/bin/apt-key list |grep percona',\n  command => '/usr/bin/gpg --keyserver  hkp://keys.gnupg.net --recv-keys 1C4CBDCDCD2EFD2A && /usr/bin/gpg -a --export CD2EFD2A | apt-key add -',\n  notify  => Exec['percona-apt-update'],\n}\n```", "```\n/usr/bin/gpg --keyserver  hkp://keys.gnupg.net --recv-keys 1C4CBDCDCD2EFD2A && /usr/bin/gpg -a --export CD2EFD2A | apt-key add -\n```", "```\nfile { '/etc/apt/sources.list.d/percona.list':\n  content => 'deb http://repo.percona.com/apt wheezy main',\n  notify  => Exec['percona-apt-update'],\n}\n```", "```\nexec { 'percona-apt-update':\n  command     => '/usr/bin/apt-get update',\n  require     => [File['/etc/apt/sources.list.d/percona.list'], File['/etc/apt/preferences.d/00percona.pref']],\n  refreshonly => true,\n}\n```", "```\nfile { '/etc/apt/preferences.d/00percona.pref':\n  content => \"Package: *\\nPin: release o=Percona Development Team\\nPin-Priority: 1001\",\n  notify  => Exec['percona-apt-update'],\n}\n```", "```\nversioncmp( A, B )\n```", "```\n    node 'cookbook' {\n      $app_version = '1.2.2'\n      $min_version = '1.2.10'\n\n      if versioncmp($app_version, $min_version) >= 0 {\n        notify { 'Version OK': }\n      } else {\n        notify { 'Upgrade needed': }\n      }\n    }\n    ```", "```\n    [root@cookbook ~]# puppet agent -t\n    Info: Caching catalog for cookbook.example.com\n    Notice: Upgrade needed\n\n    ```", "```\n    $app_version = '1.2.14'\n    ```", "```\n    [root@cookbook ~]# puppet agent -t\n    Info: Caching catalog for cookbook.example.com\n    Notice: Version OK\n\n    ```"]