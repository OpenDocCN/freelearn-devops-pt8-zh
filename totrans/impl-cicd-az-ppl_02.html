<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer070">
<h1 class="chapter-number" id="_idParaDest-34"><a id="_idTextAnchor034"/>2</h1>
<h1 id="_idParaDest-35"><a id="_idTextAnchor035"/>Creating Build Pipelines</h1>
<p>In the previous chapter, we laid the groundwork for your Azure DevOps journey by preparing the build and deployment agents, pools, and deployment groups and explaining how to use them. This chapter will take the next step in helping you understand how to create your first pipeline. We will explore the fundamentals of using jobs, tasks, triggers, and stages and how to create build pipelines based on these concepts. This will enable you to streamline your workflow, minimize errors, and enhance productivity. It will also help make collaboration more efficient, and you’ll be better prepared to implement practices such <span class="No-Break">as CI/CD.</span></p>
<p>In this chapter, we will cover the <span class="No-Break">following topics:</span></p>
<ul>
<li>Creating a build pipeline with a <span class="No-Break">single job</span></li>
<li><span class="No-Break">Creating tasks</span></li>
<li>Creating <span class="No-Break">multiple jobs</span></li>
<li><span class="No-Break">Creating triggers</span></li>
<li><span class="No-Break">Creating stages</span></li>
</ul>
<h1 id="_idParaDest-36"><a id="_idTextAnchor036"/>Creating a build pipeline with a single job</h1>
<p>After <a id="_idIndexMarker080"/>preparing the build and deployment agent in the <a id="_idIndexMarker081"/>previous chapter, this section will explain how to create a first <strong class="bold">build pipeline</strong> on the <strong class="bold">Azure DevOps</strong> portal. Before <a id="_idIndexMarker082"/>creating a first build pipeline, you must create an Azure repo for the source code repository. There are two options to create a build pipeline – the <strong class="bold">classic editor</strong>, which<a id="_idIndexMarker083"/> is the GUI editor for dragging and dropping and dropping the components to build a pipeline, and <strong class="bold">Yet Another Markup Language</strong> (<strong class="bold">YAML</strong>), which customizes the advanced Azure<a id="_idIndexMarker084"/> pipeline by the markup language. In this chapter, we will focus on using the <span class="No-Break">classic editor.</span></p>
<p>Let’s create an empty job to see how <span class="No-Break">it works:</span></p>
<ol>
<li>Click<a id="_idIndexMarker085"/> on your project name from the web <a id="_idIndexMarker086"/>portal, and then click <strong class="bold">Pipelines</strong> | <span class="No-Break"><strong class="bold">Create Pipeline</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer039">
<img alt="Figure 2.1 – Creating a new pipeline" height="553" src="image/B18875_02_1.jpg" width="999"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.1 – Creating a new pipeline</p>
<ol>
<li value="2">Click on <strong class="bold">Use the </strong><span class="No-Break"><strong class="bold">classic editor</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer040">
<img alt="Figure 2.2 – Using the classic editor" height="894" src="image/B18875_02_2.jpg" width="1326"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.2 – Using the classic editor</p>
<ol>
<li value="3">Select <strong class="bold">Azure Repos Git</strong>, a source code repository that is an existing service under <a id="_idIndexMarker087"/>Azure DevOps. This is quite compatible <a id="_idIndexMarker088"/>with other Azure DevOps services, such as Azure Pipelines, that are used in this demo. Select the options shown in the following screenshot for <strong class="bold">Team project</strong>, <strong class="bold">Repository</strong>, and <strong class="bold">Default branch for manual and scheduled builds</strong> to initiate an Azure pipeline, and then click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Continue</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer041">
<img alt="Figure 2.3 – Choosing the default branch" height="875" src="image/B18875_02_3.jpg" width="746"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.3 – Choosing the default branch</p>
<ol>
<li value="4">Click on <strong class="bold">Empty Job</strong>. The<a id="_idIndexMarker089"/> template provides a single job<a id="_idIndexMarker090"/> that contains tasks for your pipeline. We will start with an empty job so that you can learn the basic settings from the menu before we select all the templates that will be suitable for <span class="No-Break">each project.</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer042">
<img alt="Figure 2.4 – Selecting the build template" height="816" src="image/B18875_02_4.jpg" width="872"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.4 – Selecting the build template</p>
<p class="list-inset">The other options <a id="_idIndexMarker091"/>shown in the screenshot include <span class="No-Break">the </span><span class="No-Break"><a id="_idIndexMarker092"/></span><span class="No-Break">following:</span></p>
<ul>
<li><strong class="bold">.NET Desktop</strong>: The template for building pipelines to build and test .NET <span class="No-Break">desktop solutions</span></li>
<li><strong class="bold">Android</strong>: The template for building pipelines to build and test Android APK files for <span class="No-Break">Android applications</span></li>
<li><strong class="bold">ASP.NET</strong>: The template for building pipelines to build and test ASP.NET <span class="No-Break">web applications</span></li>
<li><strong class="bold">Azure Web App for ASP.Net</strong>: The template for building pipelines to build, test, and deploy ASP.NET to Azure Web <span class="No-Break">App services</span></li>
</ul>
<ol>
<li value="5">Click on <a id="_idIndexMarker093"/>the drop-down<a id="_idIndexMarker094"/> menu for <strong class="bold">Save &amp; </strong><span class="No-Break"><strong class="bold">queue</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer043">
<img alt="Figure 2.5 – Saving a build pipeline" height="571" src="image/B18875_02_5.jpg" width="1087"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.5 – Saving a build pipeline</p>
<ol>
<li value="6">On the following screen, you can select a folder to save to and add a comment. Click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Save</strong></span><span class="No-Break">:</span></li>
</ol>
<p class="IMG---Figure"> </p>
<div>
<div class="IMG---Figure" id="_idContainer044">
<img alt="Figure 2.6 – Confirming a build pipeline" height="411" src="image/B18875_02_6.jpg" width="715"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.6 – Confirming a build pipeline</p>
<ol>
<li value="7">After <a id="_idIndexMarker095"/>clicking <strong class="bold">Save</strong>, a list of all the build pipelines will <a id="_idIndexMarker096"/>appear, <span class="No-Break">as follows:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer045">
<img alt="Figure 2.7 – The Pipelines dashboard" height="463" src="image/B18875_02_7.jpg" width="944"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.7 – The Pipelines dashboard</p>
<ol>
<li value="8">After you create a simple build pipeline, you can test it by clicking on the pipeline you want and clicking <span class="No-Break"><strong class="bold">Run pipeline</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer046">
<img alt="Figure 2.8 – Running the pipeline" height="434" src="image/B18875_02_8.jpg" width="971"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.8 – Running the pipeline</p>
<ol>
<li value="9">You can set <a id="_idIndexMarker097"/>specific options before you run a <a id="_idIndexMarker098"/><span class="No-Break">build pipeline:</span><ul><li><strong class="bold">Agent pool</strong>, where you can choose a Microsoft-hosted agent or a <span class="No-Break">self-hosted agent</span></li><li><strong class="bold">Agent Specification</strong>, where you can choose an agent OS to run a <span class="No-Break">build pipeline</span></li><li><strong class="bold">Branch/tag</strong>, where you can choose a build pipeline <span class="No-Break">to run</span></li></ul></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer047">
<img alt="Figure 2.9 – The Run pipeline options" height="887" src="image/B18875_02_9.jpg" width="702"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.9 – The Run pipeline options</p>
<ol>
<li value="10">Finally, you can <a id="_idIndexMarker099"/>see the build result in detail and<a id="_idIndexMarker100"/> some <span class="No-Break">summary information.</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer048">
<img alt="Figure 2.10 – A detailed build result" height="817" src="image/B18875_02_10.jpg" width="1359"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.10 – A detailed build result</p>
<p class="list-inset">You can <a id="_idIndexMarker101"/>also see the latest status on the build<a id="_idIndexMarker102"/> <span class="No-Break">pipeline row:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer049">
<img alt="Figure 2.11 – A pipeline with the build result" height="362" src="image/B18875_02_11.jpg" width="1224"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.11 – A pipeline with the build result</p>
<p>In this section, you learned how to use the classic editor to make it easy to create a new build pipeline. In the next section, we will describe how to create tasks in this <span class="No-Break">build pipeline.</span></p>
<h1 id="_idParaDest-37"><a id="_idTextAnchor037"/>Creating tasks</h1>
<p>This section will teach you <a id="_idIndexMarker103"/>how to create <strong class="bold">tasks</strong> under a job. A build pipeline will contain one or more jobs, and each job will contain one or more tasks. In the previous section, you created a build pipeline that contains only one job. Follow these steps to create <span class="No-Break">a task:</span></p>
<ol>
<li>Edit a <a id="_idIndexMarker104"/>build pipeline by clicking on three dots symbols, and then <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Edit</strong></span><span class="No-Break">.</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer050">
<img alt="Figure 2.12 – Editing a build pipeline" height="644" src="image/B18875_02_12.jpg" width="1449"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.12 – Editing a build pipeline</p>
<ol>
<li value="2">After you edit a build pipeline, click on <strong class="bold">Tasks</strong> and then the <strong class="bold">+</strong> symbol, type <strong class="source-inline">Command line</strong> in the search box, and then click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Add</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer051">
<img alt="Figure 2.13 – Adding a command-line task" height="608" src="image/B18875_02_13.jpg" width="1487"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.13 – Adding a command-line task</p>
<ol>
<li value="3">Click on the <strong class="bold">Command line</strong> task to enter the <span class="No-Break">following details:</span><ul><li><strong class="bold">Display name</strong>: <strong class="source-inline">First Command </strong><span class="No-Break"><strong class="source-inline">Line Task</strong></span></li><li><strong class="bold">Script</strong>: For this demo, we will write a simple script to display the phrase <em class="italic">Hello First Task</em> – <strong class="source-inline">echo "Hello </strong><span class="No-Break"><strong class="source-inline">First Task"</strong></span><span class="No-Break">:</span></li></ul></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer052">
<img alt="Figure 2.14 – Entering detail on the Command line task" height="450" src="image/B18875_02_14.jpg" width="1092"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.14 – Entering detail on the Command line task</p>
<p class="list-inset">Then, click <strong class="bold">Save &amp; </strong><span class="No-Break"><strong class="bold">queue</strong></span><span class="No-Break">.</span></p>
<ol>
<li value="4">After you <a id="_idIndexMarker105"/>click on <strong class="bold">Save &amp; queue</strong>, you will see the confirmation page. Then, click <strong class="bold">Save </strong><span class="No-Break"><strong class="bold">and run</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer053">
<img alt="Figure 2.15 – Saving and running a build pipeline" height="899" src="image/B18875_02_15.jpg" width="695"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.15 – Saving and running a build pipeline</p>
<ol>
<li value="5">Before<a id="_idIndexMarker106"/> saving, however, you can also select <strong class="bold">Advanced options</strong>. Here, you can enter variables while you are building a pipeline instead of preparing them in advance. You can see the available options in the <span class="No-Break">following screenshot:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer054">
<img alt="Figure 2.16 – Advanced configuration" height="702" src="image/B18875_02_16.jpg" width="1052"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.16 – Advanced configuration</p>
<p class="list-inset">Let’s look at these<a id="_idIndexMarker107"/> options <span class="No-Break">more closely:</span></p>
<ul>
<li><span class="No-Break"><strong class="bold">Advanced</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Working Directory</strong>: You can enter any path to run the command line task. If you don’t enter any path, it will run on the <span class="No-Break">root path.</span></li><li><strong class="bold">Fail on Standard Error</strong>: Turn on this feature when you need to stop a task if any error happens inside it. For example, if you run a command to read an email from the internet and the internet disconnects, this task will <span class="No-Break">display errors.</span></li></ul></li>
<li><span class="No-Break"><strong class="bold">Control Options</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Enabled</strong>: Turn this on when you need to enable <span class="No-Break">control options:</span></li><li><strong class="bold">Continue on error</strong>: Turn on when you need to continue running the next task if it finds <span class="No-Break">an error.</span></li><li><strong class="bold">Number of retries if task failed</strong>: Enter the number of times you need to rerun a task after <span class="No-Break">it fails.</span></li><li><strong class="bold">Timeout</strong>: Enter the number of minutes this task will run for before it <span class="No-Break">is canceled.</span></li></ul></li>
<li><strong class="bold">Run </strong><span class="No-Break"><strong class="bold">this task</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Only when all previous tasks </strong><span class="No-Break"><strong class="bold">have succeeded</strong></span></li><li><strong class="bold">Even if a previous task has failed, unless the build </strong><span class="No-Break"><strong class="bold">was canceled</strong></span></li><li><strong class="bold">Even if a previous task has failed, even if the build </strong><span class="No-Break"><strong class="bold">was canceled</strong></span></li><li><strong class="bold">Only when a previous task </strong><span class="No-Break"><strong class="bold">has failed</strong></span></li><li><strong class="bold">Custom conditions</strong>: This is where you can create a rule if the aforementioned options don’t match <span class="No-Break">your needs.</span></li></ul></li>
<li><strong class="bold">Environment Variables</strong>: You can add additional variables when you run the command. For example, you can add a URL when you run this command to download <span class="No-Break">the file.</span></li>
<li><strong class="bold">Output Variables</strong>: You can assign the output from this task and carry it to the next task. For example, you can pass the token login in the output variable after this task to log in successfully to the <span class="No-Break">next task.</span></li>
</ul>
<ol>
<li value="6">Once you <a id="_idIndexMarker108"/>save these options, you can see the new history of a <span class="No-Break">build pipeline:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer055">
<img alt="Figure 2.17 – Displaying the history of a build pipeline" height="418" src="image/B18875_02_17.jpg" width="1227"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.17 – Displaying the history of a build pipeline</p>
<ol>
<li value="7">Click on the row where you want to see the task details. Here, you will see the output of the running command for <span class="No-Break">each task:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer056">
<img alt="Figure 2.18 – The job status" height="819" src="image/B18875_02_18.jpg" width="1458"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.18 – The job status</p>
<ol>
<li value="8">Click<a id="_idIndexMarker109"/> on <strong class="bold">Agent job 1</strong> to see the <span class="No-Break">job details:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer057">
<img alt="Figure 2.19 – Job details with tasks" height="636" src="image/B18875_02_19.jpg" width="1506"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.19 – Job details with tasks</p>
<p>In this section, you learned how to create a task under a build pipeline and view the job status and task details. This can help you ensure that all the tasks are as expected. The next section will teach you how to create multiple jobs in a <span class="No-Break">build pipeline.</span></p>
<h1 id="_idParaDest-38"><a id="_idTextAnchor038"/>Creating multiple jobs</h1>
<p>Sometimes, when you create a build pipeline for an application that requires building its code for different operating systems simultaneously, you need to create another job for that purpose. There are two job<a id="_idIndexMarker110"/> types – <strong class="bold">agent job</strong> and <strong class="bold">agentless job</strong>. An agent job is a job that needs to run on an agent or target computer, and an agentless job will run on the Azure <a id="_idIndexMarker111"/>DevOps application server directly. The following steps <a id="_idIndexMarker112"/>describe how to create other agent jobs under a <span class="No-Break">build pipeline:</span></p>
<ol>
<li>Edit a build pipeline by clicking on the <strong class="bold">…</strong> symbol and then <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Edit</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer058">
<img alt="Figure 2.20 – Editing a build pipeline" height="735" src="image/B18875_02_20..jpg" width="1351"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.20 – Editing a build pipeline</p>
<ol>
<li value="2">Click on the <strong class="bold">...</strong> button and select <strong class="bold">Add an </strong><span class="No-Break"><strong class="bold">agent job</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer059">
<img alt="Figure 2.21 – Adding an agent job" height="423" src="image/B18875_02_21..jpg" width="1042"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.21 – Adding an agent job</p>
<ol>
<li value="3">Click<a id="_idIndexMarker113"/> on <strong class="bold">Agent job</strong> and update the job information <span class="No-Break">as follows:</span><ul><li><strong class="bold">Display name</strong>: <strong class="source-inline">Agent </strong><span class="No-Break"><strong class="source-inline">job 2</strong></span></li><li><strong class="bold">Agent pool</strong>: <span class="No-Break"><strong class="bold">Azure Pipelines</strong></span></li><li><strong class="bold">Agent </strong><span class="No-Break"><strong class="bold">Specification</strong></span><span class="No-Break">: </span><span class="No-Break"><strong class="bold">ubuntu-latest</strong></span></li></ul></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer060">
<img alt="Figure 2.22 – Adding another job" height="504" src="image/B18875_02_22..jpg" width="1091"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.22 – Adding another job</p>
<ol>
<li value="4">Click on the <strong class="bold">+</strong> button for the job, type <strong class="source-inline">Command line</strong> in the search box, and then click the <span class="No-Break"><strong class="bold">Add</strong></span><span class="No-Break"> button:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer061">
<img alt="Figure 2.23 – Adding a new task" height="473" src="image/B18875_02_23..jpg" width="1095"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.23 – Adding a new task</p>
<ol>
<li value="5">Click on the<a id="_idIndexMarker114"/> row with the <strong class="bold">Command Line Task</strong> and update the <span class="No-Break">following fields:</span><ul><li><strong class="bold">Task version</strong>: This is a package version of the Command Line Task. We usually use the latest version. In our case, this is <span class="No-Break">version </span><span class="No-Break"><strong class="source-inline">2</strong></span><span class="No-Break">.</span></li><li><strong class="bold">Display name</strong>: Add a suitable name for your task. In our case, this is <strong class="source-inline">Second Command </strong><span class="No-Break"><strong class="source-inline">Line Task.</strong></span></li><li><strong class="bold">Script</strong>: Add the following basic script – <strong class="source-inline">echo "Hello Second Task on Linux"</strong>. This will print out this text on the resultant page after you have finished running <span class="No-Break">a pipeline:</span></li></ul></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer062">
<img alt="Figure 2.24 – Updating the second command line task" height="516" src="image/B18875_02_24..jpg" width="1092"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.24 – Updating the second command line task</p>
<ol>
<li value="6">After<a id="_idIndexMarker115"/> you click <strong class="bold">Save &amp; queue</strong>, you will see the <span class="No-Break">following result:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer063">
<img alt="Figure 2.25 – The result of two agent jobs" height="875" src="image/B18875_02_25..jpg" width="1462"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.25 – The result of two agent jobs</p>
<p class="callout-heading">Pro tip</p>
<p class="callout">For error handling, when you have more than one agent Job, you can set up parameters in advanced configuration to ensure that <strong class="bold">Agent job 2</strong> will run if <strong class="bold">Agent job 1</strong> is <span class="No-Break">completed successfully.</span></p>
<p>Let’s look at <a id="_idIndexMarker116"/>some of the advanced options available in the <strong class="bold">Agent job</strong> properties, as shown in the <span class="No-Break">following screenshot:</span></p>
<div>
<div class="IMG---Figure" id="_idContainer064">
<img alt="Figure 2.26 – Advanced options for an agent job" height="887" src="image/B18875_02_26..jpg" width="1091"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.26 – Advanced options for an agent job</p>
<p>Let’s look at these options in <span class="No-Break">some detail:</span></p>
<ul>
<li><span class="No-Break"><strong class="bold">Agent selection</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Agent pool</strong>: Select a custom or default agent to <span class="No-Break">build jobs.</span></li><li><strong class="bold">Demands</strong>: Add condition parameters to allow only agents that meet conditions to run this agent job. For example, only a Linux agent can run <span class="No-Break">this job.</span></li></ul></li>
<li><span class="No-Break"><strong class="bold">Execution plan</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Parallelism</strong>: The options available here are <span class="No-Break">the following:</span><ul><li><strong class="bold">None</strong>: No jobs will <span class="No-Break">run parallelly.</span></li><li><strong class="bold">Multi-configuration</strong>: Turn this on when you have different configurations to run for each agent job. For example, you may need to run a job test on three browsers, so you will need Chrome, Edge, and <span class="No-Break">Firefox browsers.</span></li><li><strong class="bold">Multi-agent</strong>: Turn this on when you have many agents and need to use them to run an <span class="No-Break">agent job.</span></li></ul></li><li><strong class="bold">Timeout</strong>: Enter a minute number; an agent job is allowed to execute on the agent before <span class="No-Break">being canceled.</span></li><li><strong class="bold">Job cancel timeout</strong>: Enter a number of minutes before the agent job is canceled after getting a cancel request from <span class="No-Break">the agent.</span></li></ul></li>
<li><strong class="bold">Dependencies</strong>: You can <a id="_idIndexMarker117"/>select a previous agent job when you need it completed successfully before running another <span class="No-Break">agent job.</span></li>
<li><span class="No-Break"><strong class="bold">Additional options</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Allow scripts to access the OAuth token</strong>: turn on when you need to use the OAuth token to pass to another agent job by using <span class="No-Break">REST API.</span></li></ul></li>
<li><strong class="bold">Run </strong><span class="No-Break"><strong class="bold">this job</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Only when all previous jobs </strong><span class="No-Break"><strong class="bold">have succeeded</strong></span></li><li><strong class="bold">Even if a previous job </strong><span class="No-Break"><strong class="bold">has failed</strong></span></li><li><strong class="bold">Only when a previous job </strong><span class="No-Break"><strong class="bold">has failed</strong></span></li><li><strong class="bold">Custom condition using variable expressions</strong>: For example, <strong class="bold">succeeded()</strong> means the <a id="_idIndexMarker118"/>agent job will run if the previous one <span class="No-Break">completely successfully</span></li></ul></li>
</ul>
<p>In this section, you learned how to create a second job to separate the Linux operation system. Two jobs can run simultaneously, and this use case is suitable for running a task in different operating systems without depending on each other, such as when you create a build pipeline that needs to deploy your application to Google Play and Apple Store simultaneously without running <span class="No-Break">in sequence.</span></p>
<p>The following section will teach you how to create a trigger to make a build pipeline <span class="No-Break">run automatically.</span></p>
<h1 id="_idParaDest-39"><a id="_idTextAnchor039"/>Creating triggers</h1>
<p>This section will teach <a id="_idIndexMarker119"/>you how to create a <strong class="bold">trigger</strong> – that is, make a build pipeline run automatically when you push your code to a <span class="No-Break">specific branch:</span></p>
<ol>
<li>Edit a build pipeline by clicking on the three dots to view the details of the build pipeline, and then click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Edit</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer065">
<img alt="Figure 2.27 – Editing a build pipeline" height="726" src="image/B18875_02_27..jpg" width="1328"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.27 – Editing a build pipeline</p>
<ol>
<li value="2">Click on <strong class="bold">Triggers</strong> and update the <span class="No-Break">following information:</span><ul><li><strong class="bold">Enable continuous integration</strong>: Turn <span class="No-Break">this on</span></li><li><strong class="bold">Branch filters</strong> | <strong class="bold">Type</strong>: <strong class="bold">Include</strong> | <strong class="bold">Branch </strong><span class="No-Break"><strong class="bold">specification</strong></span><span class="No-Break">: </span><span class="No-Break"><strong class="bold">main</strong></span></li></ul><p class="list-inset">If you push<a id="_idIndexMarker120"/> your code on the main branch, a build pipeline will run automatically; this is called enabling <span class="No-Break">continuous integration:</span></p></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer066">
<img alt="Figure 2.28 – Turning on continuous integration" height="507" src="image/B18875_02_28..jpg" width="1090"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.28 – Turning on continuous integration</p>
<p>In this section, you learned how to enable automatically running a build pipeline after we push the code. This will reduce the daily workload to manually build your code whenever you push it to the source <span class="No-Break">code repository.</span></p>
<p>The following section will teach you how to create a stage to make a task group for <span class="No-Break">deployment environments.</span></p>
<h1 id="_idParaDest-40"><a id="_idTextAnchor040"/>Creating stages</h1>
<p>This section will teach you how to<a id="_idIndexMarker121"/> create a <strong class="bold">stage</strong> using the classic editor – that is, create a task group for environmental purposes such as development, non-functional testing, and production. Each group has jobs and tasks to run for each environment. Using many stages is advantageous when we have many environments to deploy our applications. This is because if we use only one stage by default for the development and production environment, if the development pipeline fails, it will continue to run the production pipeline and also fail. Let’s look at how we can create <span class="No-Break">a stage:</span></p>
<ol>
<li>Click <a id="_idIndexMarker122"/>on <strong class="bold">Releases</strong> | <span class="No-Break"><strong class="bold">New pipeline</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer067">
<img alt="Figure 2.29 – Creating a new pipeline" height="783" src="image/B18875_02_29..jpg" width="1085"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.29 – Creating a new pipeline</p>
<ol>
<li value="2">Enter a stage name and click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Save</strong></span><span class="No-Break">:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer068">
<img alt="Figure 2.30 – Edit stage properties" height="775" src="image/B18875_02_30..jpg" width="1253"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.30 – Edit stage properties</p>
<ol>
<li value="3">Select the <a id="_idIndexMarker123"/>relevant repository folder. In our case, it is an Azure Repos folder, the root folder for your code and the Azure <span class="No-Break">pipeline file:</span></li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer069">
<img alt="Figure 2.31 – Confirming a pipeline" height="432" src="image/B18875_02_31..jpg" width="705"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.31 – Confirming a pipeline</p>
<p>Now that you’ve learned how to create a stage with an empty job, let’s wrap up <span class="No-Break">this chapter.</span></p>
<h1 id="_idParaDest-41"><a id="_idTextAnchor041"/>Summary</h1>
<p>In this chapter, you learned the core features needed to create a pipeline. You learned how to create a build pipeline that includes jobs and tasks. You also learned how to make a trigger to filter any branch to run a build agent. These triggers, combined with jobs and tasks, form the cornerstone of any effective CI/CD pipeline, enabling automated, efficient, and reliable <span class="No-Break">software delivery.</span></p>
<p>In the next chapter, you will learn how to enhance a build pipeline using YAML and run it on <span class="No-Break">an agent.</span></p>
</div>
</div></body></html>