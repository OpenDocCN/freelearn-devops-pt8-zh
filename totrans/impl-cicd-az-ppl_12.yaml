- en: '12'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Navigating Common Pitfalls and Future Trends in Azure Pipelines
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous chapter, we learned how to create a pipeline for mobile applications.
    This chapter will teach you about the common mistakes you should avoid and, more
    importantly, how to effectively address and circumvent them at a high level.
  prefs: []
  type: TYPE_NORMAL
- en: We will also discuss best practices, offering insights into optimizing your
    workflow for maximum efficiency and reliability. This will help ensure that your
    pipeline operates at its full potential.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, we will explore what lies ahead in the future of Azure Pipelines. By
    the end of this chapter, you will know how to avoid the common pitfalls of using
    Azure Pipelines, optimize your workflow with best practices, and adapt to the
    ever-evolving future of this essential tool.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Common pitfalls
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Best practices
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Future trends
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Common pitfalls
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Understanding and proactively addressing certain common mistakes and issues
    in Azure Pipelines is essential. You can save valuable time and resources by learning
    how to recognize and resolve them promptly.
  prefs: []
  type: TYPE_NORMAL
- en: In the context of real-world projects, timely resolution is essential to prevent
    delays and costly setbacks, allowing you to maintain project momentum and focus
    your efforts on other critical aspects.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s discuss the details of these common errors:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Sometimes, you may start the run of a pipeline and see it is queued. This could
    be because there is no available agent on Microsoft-hosted or self-hosted agents,
    insufficient concurrency, or unmet demand for agents. You can see the error immediately
    after you see the status of the job in your pipeline, as shown in the following
    screenshot:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Figure 12.1 – A job queued due to unavailability of agents](img/B18875_12_1.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.1 – A job queued due to unavailability of agents
  prefs: []
  type: TYPE_NORMAL
- en: This might be an indication that additional parallel jobs must be purchased,
    ensuring these jobs are not queued if you want these pipelines to run as quickly
    as possible.
  prefs: []
  type: TYPE_NORMAL
- en: A pipeline may not run because you entered the incorrect branch for filtering
    in YAML files or disabled triggers. You need to go back to the YAML files and
    review the values under the **branch** section to ensure they are correct.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The pipelines can’t run due to the access permission for variable groups or
    secret files. To address this, navigate to **Library** | **secrets** | **Variable
    group** | **Pipeline permissions**:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Figure 12.2 – Go to Pipeline permissions](img/B18875_12_2.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.2 – Go to Pipeline permissions
  prefs: []
  type: TYPE_NORMAL
- en: 'Then, you can do either of the following:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open all access for all pipelines. This option will allow all pipelines access
    to secrets in the variable group. If all pipelines need to use the same secrets,
    then you should select this option:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Figure 12.3 – Granting open access to variable group](img/B18875_12_3.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.3 – Granting open access to variable group
  prefs: []
  type: TYPE_NORMAL
- en: 'Limit access to the selected pipeline (recommended):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Figure 12.4 – Restricting permission to variable group to selected pipelines](img/B18875_12_4.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.4 – Restricting permission to variable group to selected pipelines
  prefs: []
  type: TYPE_NORMAL
- en: This option will limit access to only the required pipelines that can access
    secrets because, otherwise, anyone could access your pipeline and use your secrets.
  prefs: []
  type: TYPE_NORMAL
- en: In this section, you learned how to avoid common mistakes, as well as how these
    errors can be mitigated. In the next section, you will learn more about following
    best practices.
  prefs: []
  type: TYPE_NORMAL
- en: Best practices
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The importance of following best practices becomes evident when you encounter
    issues during a pipeline’s life cycle. They will enable your team to not only
    maintain pipelines with ease but also swiftly identify and address any problems
    that may arise.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here are some practices that will help your team find any issues easily:'
  prefs: []
  type: TYPE_NORMAL
- en: Use YAML syntax rather than the classic version. YAML can be version-controlled
    in repositories such as Azure Repos, GitHub, and Bitbucket, which can help you
    track changes in the YAML file and introduce changes gradually when combined with
    a branching strategy. Even better, if you want to enforce this, you can disable
    the creation of classic build pipelines at the organization or project settings
    level.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Separate common tasks into separate YAML files that can be referenced from your
    main template when you have many tasks repeated throughout stages. This makes
    it easier to maintain or change the behavior of a pipeline in large multi-stage
    configurations.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Consider creating more stages if you have long-running jobs.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Keep your pipelines small and focused, using templates, stages, jobs, and steps.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Build stages for large and complex applications might require more resources
    to compile and package faster. Microsoft-hosted agents run on general-purpose
    virtual machines, with only dual-core CPUs, 7 GB of RAM, and a 14 GB SSD for Linux
    and Windows, or three-core CPUs, 14 GB of RAM, and a 14 GB SSD for macOS. If you
    need to improve the performance of builds, you should consider self-hosted agents
    running on virtual machines with more resources.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Consider using programming languages that support incremental compilation. Application
    projects that can take advantage of partial incremental builds can only be hosted
    in self-hosted agents, ensuring that filesystem resources are not discarded after
    every build.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use variable groups to reduce duplication when multiple pipelines use the same
    value. This makes your pipelines more maintainable.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Use secret values for private values or keys. Navigate to **Library** | **secrets**
    | **Variable group**, and click on the lock icon to limit access to the variables,
    as shown in the following screenshot:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Figure 12.5 – Creating secret variables](img/B18875_12_5.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.5 – Creating secret variables
  prefs: []
  type: TYPE_NORMAL
- en: 'If you have variables from Azure **Key Vault** (**KV**), Azure’s **Key Management
    Service** (**KMS**) will encrypt and store the secret key safely. It will make
    sure all variables are safe. Once this is done, no one can read your secret keys
    without your permission. It is recommended that you link all variables from KV
    to the variable group, as shown here:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Figure 12.6 – Linking secrets from Azure KV](img/B18875_12_6.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.6 – Linking secrets from Azure KV
  prefs: []
  type: TYPE_NORMAL
- en: Consider using the **principle of least privilege**, a security concept that
    dictates that a user should be granted the minimum levels of access – or permissions
    – needed to perform their job functions. This principle is applied to restrict
    users’ access rights to what is only strictly required to do their work, minimizing
    the risk of malicious activity or accidental damage and reducing the risk of the
    wrong pipelines being used.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To investigate the problem of failed pipelines, you can download the log directly
    from the pipelines. This can be done by following these steps:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Select the pipeline for which you need to download the log.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click on the three dots icon and then **Download logs**:'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 12.7 – Download logs for pipelines](img/B18875_12_7.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.7 – Download logs for pipelines
  prefs: []
  type: TYPE_NORMAL
- en: 'If you use `PublishBuildArtifacts@1`, you can download artifacts directly from
    a pipeline if you need to inspect them, by following these steps:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Select a pipeline, and click on the value in the **Related** column, **#**
    **published**:'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 12.8 – Pipeline artifacts](img/B18875_12_8.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.8 – Pipeline artifacts
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the file to download it:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 12.9 – Downloading a file from Artifacts](img/B18875_12_9.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.9 – Downloading a file from Artifacts
  prefs: []
  type: TYPE_NORMAL
- en: 'For cost optimization, you can adjust the retention policy of **Artifacts**
    to reduce the storage size:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Go to **Project Settings** | **Settings**.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Adjust the parameters of the retention policy, depending on your business objectives.
    For example, if your business plan requires you to retain Azure pipeline results
    for only five days due to the need for cost optimization in storage, then it’s
    essential to adhere to this timeframe. Keeping data for longer periods would result
    in additional storage costs:'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 12.10 – Retention policy](img/B18875_12_10.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.10 – Retention policy
  prefs: []
  type: TYPE_NORMAL
- en: 'Consider validating the number of parallel jobs you have. It will help you
    to understand better how many processes you can run on the pipelines in parallel
    mode:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Navigate to **Project Settings** | **Parallel jobs**.
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You can see an overview of all the agents you have:'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 12.11 – Parallel jobs](img/B18875_12_11.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.11 – Parallel jobs
  prefs: []
  type: TYPE_NORMAL
- en: In this section, you learned how to make a better Azure pipeline based on best
    practices. In the last section of this chapter, you will learn more about the
    future of Azure Pipelines.
  prefs: []
  type: TYPE_NORMAL
- en: Future trends
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Azure DevOps is an ever-evolving product, and as such, new features and capabilities
    are introduced often, typically because of the Microsoft product team looking
    to improve the product, or because of requests from users.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s look at some of the most recent features related to Azure Pipelines:'
  prefs: []
  type: TYPE_NORMAL
- en: Improvements in the authoring experience for Azure Pipelines tasks to support
    newer versions of Node.js and ease the transition to newer versions of it, allowing
    you and any other contributors in the community to create your own extensions.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: GitHub Advanced Security for Azure DevOps is a new security suite of tools aimed
    at increasing **DevSecOps** practices. Among its features, it includes the ability
    to scan your code to prevent common vulnerability scenarios, using specialized
    tasks that detect scenarios such as cross-site scripting, SQL or XML injection
    attacks, and many more common issues that developers can often overlook. This
    is available for many programming languages and keeps evolving to offer more support
    in the future.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What is DevSecOps?
  prefs: []
  type: TYPE_NORMAL
- en: DevSecOps is a comprehensive integration of DevOps and security practices in
    the software development life cycle, which promotes that teams collaborate closely
    to include security in all aspects of the development process. This reduces and
    eliminates the risks associated with vulnerabilities in their code and third-party
    dependencies as early as possible.
  prefs: []
  type: TYPE_NORMAL
- en: Reduce the gaps in features between YAML pipelines and classic release management
    deployment pipelines for CD scenarios. Several capabilities to improve the checks
    will be released in the coming year.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Looking into the future, there are other features that will also become important
    as you expand your usage of Azure Pipelines:'
  prefs: []
  type: TYPE_NORMAL
- en: In-product recommendations to highlight the best practices when configuring
    your pipelines around security
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Deprecation and removal of unsupported versions of Node.js for the agent software
    included with both the Microsoft-hosted and self-hosted versions
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The Azure DevOps features roadmap is available at [https://learn.microsoft.com/en-us/azure/devops/release-notes/features-timeline](https://learn.microsoft.com/en-us/azure/devops/release-notes/features-timeline),
    where you can see all the product capabilities that are in progress or planned
    to be released by Microsoft in the near and long term. If a feature is in progress
    and slated to be released, you will see the approximate year and quarter when
    the feature will be available, as well as its availability in the cloud service
    or the server edition of the product. You can influence the future of the product
    by making suggestions through the portal, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 12.12 – Make a suggestion to improve Azure DevOps](img/B18875_12_12.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 12.12 – Make a suggestion to improve Azure DevOps
  prefs: []
  type: TYPE_NORMAL
- en: Now that we’ve looked at some future trends of Azure Pipelines, let’s wrap things
    up.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This chapter has been a crucial stepping stone in your journey, empowering you
    to use Azure Pipelines with confidence and expertise. You’re now better equipped
    to recognize and address the common pitfalls and challenges, thereby saving valuable
    resources and maintaining a seamless workflow.
  prefs: []
  type: TYPE_NORMAL
- en: Following the best practices will help optimize the functionality of your pipelines
    and enhance collaboration within your team, ensuring the efficiency and reliability
    of your pipeline operations. We also offered a glimpse into the future of Azure
    Pipelines, which will enable you to adapt and stay ahead in this dynamic field.
  prefs: []
  type: TYPE_NORMAL
- en: Armed with the knowledge you have acquired throughout this book, you can now
    navigate the Azure Pipelines landscape, deploying your applications across diverse
    scenarios and requirements with efficiency and precision.
  prefs: []
  type: TYPE_NORMAL
- en: Good luck on your journey!
  prefs: []
  type: TYPE_NORMAL
