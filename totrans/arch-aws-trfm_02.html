<html><head></head><body>
<div id="_idContainer019">
<h1 class="chapter-number" id="_idParaDest-31"><a id="_idTextAnchor030"/><span class="koboSpan" id="kobo.1.1">2</span></h1>
<h1 id="_idParaDest-32"><a id="_idTextAnchor031"/><span class="koboSpan" id="kobo.2.1">How Not to Use IaC and Terraform</span></h1>
<p><strong class="bold"><span class="koboSpan" id="kobo.3.1">Infrastructure as Code</span></strong><span class="koboSpan" id="kobo.4.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.5.1">IaC</span></strong><span class="koboSpan" id="kobo.6.1">) tools such as Terraform have revolutionized the way we manage cloud infrastructure, offering powerful capabilities for automating the deployment and configuration of complex environments. </span><span class="koboSpan" id="kobo.6.2">However, despite the benefits, there are still many situations where IaC and Terraform can be misused or overused, leading to inefficiencies, errors, and </span><span class="No-Break"><span class="koboSpan" id="kobo.7.1">security vulnerabilities.</span></span></p>
<p><span class="koboSpan" id="kobo.8.1">In this chapter, we’ll explore some basic Terraform commands, then compare Terraform </span><span class="No-Break"><span class="koboSpan" id="kobo.9.1">and CloudFormation.</span></span></p>
<p><span class="koboSpan" id="kobo.10.1">We’ll cover these main topics in </span><span class="No-Break"><span class="koboSpan" id="kobo.11.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.12.1">Terraform architecture </span><span class="No-Break"><span class="koboSpan" id="kobo.13.1">and workflow</span></span></li>
<li><span class="koboSpan" id="kobo.14.1">To compare with </span><span class="No-Break"><span class="koboSpan" id="kobo.15.1">the others</span></span></li>
</ul>
<h1 id="_idParaDest-33"><a id="_idTextAnchor032"/><span class="koboSpan" id="kobo.16.1">Terraform architecture and workflow</span></h1>
<p><span class="koboSpan" id="kobo.17.1">To make the most of Terraform and use it effectively to manage your cloud infrastructure, it’s important to have a good understanding of its architecture and workflow. </span><span class="koboSpan" id="kobo.17.2">Terraform follows a declarative approach to infrastructure management, where you describe the desired state of your infrastructure using configuration files, and it takes care of provisioning and configuring the necessary resources to achieve </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">that state.</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">In this chapter, we’ll explore the key components of Terraform’s architecture and workflow, and provide a high-level overview of how Terraform works to manage infrastructure on cloud platforms such as AWS, Azure, and Google Cloud. </span><span class="koboSpan" id="kobo.19.2">Understanding these concepts will help you write more effective Terraform code and troubleshoot issues </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">more easily.</span></span></p>
<h2 id="_idParaDest-34"><a id="_idTextAnchor033"/><span class="koboSpan" id="kobo.21.1">Architecture</span></h2>
<p><span class="koboSpan" id="kobo.22.1">Terraform is a tool that allows </span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.23.1">developers to describe the infrastructure and </span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.24.1">run it in any environment. </span><span class="koboSpan" id="kobo.24.2">Terraform has many use cases, such as building a whole data center or just a single server </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">or resource:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer010">
<span class="koboSpan" id="kobo.26.1"><img alt="Figure 2.1 – Terraform – multi-cloud" src="image/B18198_02_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.27.1">Figure 2.1 – Terraform – multi-cloud</span></p>
<p><span class="koboSpan" id="kobo.28.1">Terraform is a powerful infrastructure management tool that enables safe and efficient building, modification, and versioning of infrastructure. </span><span class="koboSpan" id="kobo.28.2">It is capable of managing both local and remote infrastructure, making it an ideal choice for distributed teams collaborating on a project from different geographical locations. </span><span class="koboSpan" id="kobo.28.3">With Terraform, teams can easily work together on complex infrastructure projects, regardless of their physical location, while ensuring that the infrastructure remains consistent and up </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">to date.</span></span></p>
<p><span class="koboSpan" id="kobo.30.1">The Terraform architecture is quite simple; it is composed of just </span><span class="No-Break"><span class="koboSpan" id="kobo.31.1">four components:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.32.1">Providers</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.33.1">Modules</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.34.1">Resources</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.35.1">Templates</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.36.1">The modules are used to define the infrastructure and its components. </span><span class="koboSpan" id="kobo.36.2">The providers are responsible for how these </span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.37.1">modules should be executed in different environments. </span><span class="koboSpan" id="kobo.37.2">Resources are what we need to build our infrastructure, and templates are used to describe them easily. </span><span class="koboSpan" id="kobo.37.3">The following diagram outlines the technical flow </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">for Terraform.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer011">
<span class="koboSpan" id="kobo.39.1"><img alt="Figure 2.2 – Terraform technical flow" src="image/B18198_02_2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.40.1">Figure 2.2 – Terraform technical flow</span></p>
<h3><span class="koboSpan" id="kobo.41.1">Providers</span></h3>
<p><span class="koboSpan" id="kobo.42.1">Terraform providers</span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.43.1"> are essentially plugins that Terraform installs to interact with remote systems, such as Azure, AWS, Google Cloud, VMware, and a lot of other </span><span class="No-Break"><span class="koboSpan" id="kobo.44.1">vendors’ devices.</span></span></p>
<p><span class="koboSpan" id="kobo.45.1">To interact with various cloud providers, SaaS providers, and other APIs, Terraform relies on plugins known as providers. </span><span class="koboSpan" id="kobo.45.2">These </span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.46.1">providers serve as the interface between Terraform and the target infrastructure, allowing Terraform to manage the desired resources. </span><span class="koboSpan" id="kobo.46.2">By leveraging a rich ecosystem of providers, Terraform enables users to manage infrastructure resources across multiple platforms using a unified, consistent syntax </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">and workflow.</span></span></p>
<p><span class="koboSpan" id="kobo.48.1">Terraform uses providers to provision resources, which describe one or more infrastructure objects such as virtual </span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.49.1">networks and compute instances. </span><span class="koboSpan" id="kobo.49.2">Each provider on the Terraform Registry has documentation detailing available resources and their </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">configuration options.</span></span></p>
<p><span class="koboSpan" id="kobo.51.1">If you haven’t used any</span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.52.1"> Terraform provider within your script, you won’t be able to manage or create any infrastructure. </span><span class="koboSpan" id="kobo.52.2">You can define more than one provider in your </span><span class="No-Break"><span class="koboSpan" id="kobo.53.1">Terraform code.</span></span></p>
<p><span class="koboSpan" id="kobo.54.1">If you are working with Terraform modules, then you need to declare the Terraform providers in your root module while the child modules inherit the provider configuration from the root module. </span><span class="koboSpan" id="kobo.54.2">Terraform providers follow their own release cadence and version </span><span class="No-Break"><span class="koboSpan" id="kobo.55.1">number syntax.</span></span></p>
<h3><span class="koboSpan" id="kobo.56.1">Modules</span></h3>
<p><span class="koboSpan" id="kobo.57.1">In Terraform, a module is</span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.58.1"> essentially a collection of Terraform template files that reside in a single directory. </span><span class="koboSpan" id="kobo.58.2">Even the most basic configuration consisting of just one</span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.59.1"> directory with one or more </span><strong class="source-inline"><span class="koboSpan" id="kobo.60.1">.tf</span></strong><span class="koboSpan" id="kobo.61.1"> files is considered a </span><strong class="bold"><span class="koboSpan" id="kobo.62.1">module</span></strong><span class="koboSpan" id="kobo.63.1">. </span><span class="koboSpan" id="kobo.63.2">When executing Terraform commands</span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.64.1"> directly from such a directory, it’s referred to as the </span><strong class="bold"><span class="koboSpan" id="kobo.65.1">root module</span></strong><span class="koboSpan" id="kobo.66.1">. </span><span class="koboSpan" id="kobo.66.2">By organizing infrastructure configurations into modules, users can encapsulate related resources and easily reuse them across different projects. </span><span class="koboSpan" id="kobo.66.3">This modularity enables teams to create scalable and maintainable infrastructure code, resulting in faster development and easier maintenance over time. </span><span class="koboSpan" id="kobo.66.4">The following shows a sample </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">folder structure.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer012">
<span class="koboSpan" id="kobo.68.1"><img alt="Figure 2.3 – Sample folder structure" src="image/B18198_02_3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.69.1">Figure 2.3 – Sample folder structure</span></p>
<p><span class="koboSpan" id="kobo.70.1">In Terraform, commands operate solely on the template files located in one specific directory, typically the current working directory. </span><span class="koboSpan" id="kobo.70.2">However, by utilizing module blocks in your templates, you can invoke modules residing in other directories. </span><span class="koboSpan" id="kobo.70.3">Whenever Terraform encounters a module block, it processes the configuration files for </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">that module.</span></span></p>
<p><span class="koboSpan" id="kobo.72.1">When a template calls a module, the module is considered a “child module” of that template. </span><span class="koboSpan" id="kobo.72.2">Modules can be sourced either locally or remotely. </span><span class="koboSpan" id="kobo.72.3">Terraform supports multiple remote sources, such as the Terraform Registry, various version control systems, HTTP URLs, and private module</span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.73.1"> registries in Terraform Cloud or Terraform Enterprise. </span><span class="koboSpan" id="kobo.73.2">By leveraging remote modules, teams </span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.74.1">can more easily share and collaborate on </span><span class="No-Break"><span class="koboSpan" id="kobo.75.1">infrastructure configurations.</span></span></p>
<p><span class="koboSpan" id="kobo.76.1">There are over 10,000 modules published in the public Terraform Registry ready to use at </span><a href="https://registry.terraform.io/browse/modules"><span class="koboSpan" id="kobo.77.1">https://registry.terraform.io/browse/modules</span></a><span class="koboSpan" id="kobo.78.1">, and you can start to use them to provision infrastructure </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">right away.</span></span></p>
<p><span class="koboSpan" id="kobo.80.1">Let’s go over the benefits of </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">using modules:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.82.1">Organize configuration</span></strong><span class="koboSpan" id="kobo.83.1">: Terraform offers </span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.84.1">modules as a means to simplify the organization and comprehension of your infrastructure configuration. </span><span class="koboSpan" id="kobo.84.2">This approach offers a more user-friendly experience, where users are not required to learn all of Terraform’s features, but instead can focus on the specific features they need. </span><span class="koboSpan" id="kobo.84.3">Infrastructure can be complex, and even relatively simple deployments may require hundreds or thousands of lines of code. </span><span class="koboSpan" id="kobo.84.4">By leveraging modules, you can logically group related configuration elements into discrete components, making it easier to manage and modify your infrastructure </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">over time.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.86.1">Encapsulate configuration</span></strong><span class="koboSpan" id="kobo.87.1">: Modules offer the additional advantage of encapsulating configuration into distinct, logical components. </span><span class="koboSpan" id="kobo.87.2">This encapsulation can help avoid unintended consequences, such as inadvertently modifying other infrastructure while attempting to change a single component, and also minimize the likelihood of simple errors, such as inadvertently assigning the same name to different resources. </span><span class="koboSpan" id="kobo.87.3">By keeping related configuration elements organized within their own modules, users can more easily understand and modify their infrastructure in a controlled and systematic manner, reducing the risk of unexpected errors and making it simpler to implement changes </span><span class="No-Break"><span class="koboSpan" id="kobo.88.1">over time.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.89.1">Reuse configuration</span></strong><span class="koboSpan" id="kobo.90.1">: Creating infrastructure configurations from scratch can be a time-intensive and error-prone process. </span><span class="koboSpan" id="kobo.90.2">By utilizing modules, however, users can save time, enforce governance, and minimize costly errors by reusing pre-existing configurations authored by themselves, their colleagues, or other members of the Terraform community who have made modules publicly available. </span><span class="koboSpan" id="kobo.90.3">Additionally, modules can be shared within teams or published publicly, offering users the ability to benefit from the expertise of others and distribute their own work to</span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.91.1"> others who may find it useful. </span><span class="koboSpan" id="kobo.91.2">Ultimately, leveraging modules can help users work more efficiently and effectively, making it easier to implement and maintain infrastructure configurations </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">over </span></span><span class="No-Break"><a id="_idIndexMarker066"/></span><span class="No-Break"><span class="koboSpan" id="kobo.93.1">time.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.94.1">Provide consistency and ensure best practices</span></strong><span class="koboSpan" id="kobo.95.1">: In addition to facilitating efficient configuration development, modules also promote consistency across infrastructure configurations. </span><span class="koboSpan" id="kobo.95.2">Consistency is essential for comprehending complex configurations and ensures that best practices are applied uniformly across all configurations. </span><span class="koboSpan" id="kobo.95.3">For example, cloud providers offer numerous options for configuring object storage services such as Amazon S3 buckets. </span><span class="koboSpan" id="kobo.95.4">Improperly secured object storage has led to several critical security incidents, and due to the complexity of configuring these services, misconfiguration can </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">occur easily.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.97.1">Self-service</span></strong><span class="koboSpan" id="kobo.98.1">: Modules simplify the usage of your configuration by other teams. </span><span class="koboSpan" id="kobo.98.2">The Terraform Registry enables other teams to locate and utilize your approved and published </span><span class="No-Break"><span class="koboSpan" id="kobo.99.1">Terraform modules.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.100.1">Leveraging modules can enhance the governance of your resources</span></strong><span class="koboSpan" id="kobo.101.1">: For instance, modules can be utilized to define the configuration of your organization’s public website buckets, as well as separate modules for private buckets that serve logging applications. </span><span class="koboSpan" id="kobo.101.2">Furthermore, modules facilitate updates to resource configurations by allowing you to modify a configuration in one location, which can then be applied to all instances where the module </span><span class="No-Break"><span class="koboSpan" id="kobo.102.1">is used.</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.103.1">Resources</span></h3>
<p><span class="koboSpan" id="kobo.104.1">Terraform uses resource blocks to manage various kinds of infrastructure, such as virtual networks, compute instances, and higher-level components including DNS records. </span><span class="koboSpan" id="kobo.104.2">These resource blocks map to </span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.105.1">one or more infrastructure objects within your </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">Terraform configuration.</span></span></p>
<p><span class="koboSpan" id="kobo.107.1">Typically, each Terraform </span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.108.1">provider has several distinct resources that correspond to the relevant APIs for managing a given infrastructure type. </span><span class="koboSpan" id="kobo.108.2">Resource declarations can include several advanced features, although only a limited subset is necessary for initial use. </span><span class="koboSpan" id="kobo.108.3">With advanced syntax features, such as single resource declarations that generate multiple similar remote objects, users can familiarize themselves with and confirm all the features of a resource provider’s documentation pages in the </span><span class="No-Break"><span class="koboSpan" id="kobo.109.1">Terraform Registry.</span></span></p>
<h3><span class="koboSpan" id="kobo.110.1">Templates</span></h3>
<p><span class="koboSpan" id="kobo.111.1">Terraform templates </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.112.1">provide a way to create resources in the desired format on the</span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.113.1"> target cloud providers </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">or systems.</span></span></p>
<p><span class="koboSpan" id="kobo.115.1">A Terraform template is a collection of files that define the desired state of your infrastructure to be achieved. </span><span class="koboSpan" id="kobo.115.2">They include different configuration files, such as variables, resources, and modules. </span><span class="koboSpan" id="kobo.115.3">You can keep a single file or multiple files under a directory, depending on your needs and </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">personal choice.</span></span></p>
<p><span class="koboSpan" id="kobo.117.1">Now that we have covered the components of the architecture, let’s look at </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">the workflow.</span></span></p>
<h2 id="_idParaDest-35"><a id="_idTextAnchor034"/><span class="koboSpan" id="kobo.119.1">Workflow</span></h2>
<p><span class="koboSpan" id="kobo.120.1">Terraform’s workflows </span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.121.1">consist of five </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">fundamental steps:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer013">
<span class="koboSpan" id="kobo.123.1"><img alt="Figure 2.4 – Terraform’s ﻿workflow" src="image/B18198_02_4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.124.1">Figure 2.4 – Terraform’s workflow</span></p>
<p><span class="koboSpan" id="kobo.125.1">These steps involve </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">the</span></span><span class="No-Break"><a id="_idIndexMarker072"/></span><span class="No-Break"><span class="koboSpan" id="kobo.127.1"> following:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.128.1">Write</span></strong><span class="koboSpan" id="kobo.129.1">: This step involves creating modifications to </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">the code.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.131.1">Init</span></strong><span class="koboSpan" id="kobo.132.1">: At this stage, you initialize your code and download the requirements specified in your code, such </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">as providers.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.134.1">Plan</span></strong><span class="koboSpan" id="kobo.135.1">: In this step, you review and predict the changes and determine whether to </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">accept them.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.137.1">Apply</span></strong><span class="koboSpan" id="kobo.138.1">: This is where you accept the changes and implement them on </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">real infrastructure.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.140.1">Destroy</span></strong><span class="koboSpan" id="kobo.141.1">: This final step involves destroying all the infrastructure </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">you’ve created.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.143.1">Details and actions vary </span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.144.1">between workflows. </span><span class="koboSpan" id="kobo.144.2">Let’s look at all the steps of the workflow </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">in detail.</span></span></p>
<h3><span class="koboSpan" id="kobo.146.1">Write</span></h3>
<p><span class="koboSpan" id="kobo.147.1">To begin with, author your</span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.148.1"> Terraform configuration just like you would write code in your preferred editor. </span><span class="koboSpan" id="kobo.148.2">It is standard practice to store your work in a version-controlled repository, even when </span><span class="No-Break"><span class="koboSpan" id="kobo.149.1">working individually.</span></span></p>
<h3><span class="koboSpan" id="kobo.150.1">Init</span></h3>
<p><span class="koboSpan" id="kobo.151.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.152.1">terraform init</span></strong><span class="koboSpan" id="kobo.153.1"> command initializes the working directory where Terraform configuration files are located. </span><span class="koboSpan" id="kobo.153.2">It is</span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.154.1"> recommended to execute this command as the first step after creating a new Terraform configuration or cloning an existing one from </span><span class="No-Break"><span class="koboSpan" id="kobo.155.1">version control.</span></span></p>
<p><span class="koboSpan" id="kobo.156.1">Executing this command multiple times is safe. </span><strong class="source-inline"><span class="koboSpan" id="kobo.157.1">terraform init</span></strong><span class="koboSpan" id="kobo.158.1"> carries out several initialization processes that prepare the current working directory for Terraform use. </span><span class="koboSpan" id="kobo.158.2">While subsequent runs may produce errors, the command will not delete your existing configuration </span><span class="No-Break"><span class="koboSpan" id="kobo.159.1">or state.</span></span></p>
<p><span class="koboSpan" id="kobo.160.1">Most providers are available as Terraform plugins. </span><span class="koboSpan" id="kobo.160.2">When executing the command, Terraform scans the configuration for direct and indirect references to providers and attempts to install the corresponding plugins. </span><span class="koboSpan" id="kobo.160.3">The program automatically discovers, downloads, and installs appropriate provider plugins that are published in either the public registry or a third-party </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">provider’s registry.</span></span></p>
<p><span class="koboSpan" id="kobo.162.1">Terraform stores information about the chosen providers in the dependency lock file after a successful installation. </span><span class="koboSpan" id="kobo.162.2">To ensure that Terraform selects the same provider versions when you run </span><strong class="source-inline"><span class="koboSpan" id="kobo.163.1">terraform init</span></strong><span class="koboSpan" id="kobo.164.1"> in the future, commit this file to your version </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">control system.</span></span></p>
<p><span class="koboSpan" id="kobo.166.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">terraform init</span></strong><span class="koboSpan" id="kobo.168.1"> command can </span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.169.1">be used for various purposes, such as plugin installation, child module installation, and </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">backend initialization.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer014">
<span class="koboSpan" id="kobo.171.1"><img alt="Figure 2.5 – Terraform initialization output" src="image/B18198_02_5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.172.1">Figure 2.5 – Terraform initialization output</span></p>
<h3><span class="koboSpan" id="kobo.173.1">Plan</span></h3>
<p><span class="koboSpan" id="kobo.174.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.175.1">terraform plan</span></strong><span class="koboSpan" id="kobo.176.1"> command generates an execution plan that enables you to preview the infrastructure </span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.177.1">modifications Terraform intends to make. </span><span class="koboSpan" id="kobo.177.2">Once a plan is generated, Terraform performs the </span><span class="No-Break"><span class="koboSpan" id="kobo.178.1">following actions:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.179.1">Reads the current state of existing remote objects to verify that the state </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">is current</span></span></li>
<li><span class="koboSpan" id="kobo.181.1">Compares the current state to the previous state, noting </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">any discrepancies</span></span></li>
<li><span class="koboSpan" id="kobo.183.1">Suggests a set of actions that, if implemented, should ensure that the remote objects align with </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">the configuration</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.185.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.186.1">terraform plan</span></strong><span class="koboSpan" id="kobo.187.1"> command itself does not implement the predicted modifications. </span><span class="koboSpan" id="kobo.187.2">Instead, it is intended for use before applying or sharing your changes with your team to verify that the </span><a id="_idIndexMarker078"/><span class="koboSpan" id="kobo.188.1">proposed changes align with your expectations. </span><span class="koboSpan" id="kobo.188.2">If Terraform detects no resource changes, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.189.1">terraform plan</span></strong><span class="koboSpan" id="kobo.190.1"> command indicates that no changes are required for the </span><span class="No-Break"><span class="koboSpan" id="kobo.191.1">actual infrastructure.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer015">
<span class="koboSpan" id="kobo.192.1"><img alt="Figure 2.6 – terraform plan output" src="image/B18198_02_6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.193.1">Figure 2.6 – terraform plan output</span></p>
<h3><span class="koboSpan" id="kobo.194.1">Apply</span></h3>
<p><span class="koboSpan" id="kobo.195.1">To execute the</span><a id="_idIndexMarker079"/><span class="koboSpan" id="kobo.196.1"> actions suggested by Terraform plan, use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.197.1">terraform apply</span></strong><span class="koboSpan" id="kobo.198.1"> command. </span><span class="koboSpan" id="kobo.198.2">The simplest approach is to execute </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1">terraform apply</span></strong><span class="koboSpan" id="kobo.200.1"> without any arguments, which automatically generates a new execution plan (similar to running </span><strong class="source-inline"><span class="koboSpan" id="kobo.201.1">terraform plan</span></strong><span class="koboSpan" id="kobo.202.1">) and asks for approval before executing the </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">proposed actions.</span></span></p>
<p><span class="koboSpan" id="kobo.204.1">Unless explicitly directed to skip approval, </span><strong class="source-inline"><span class="koboSpan" id="kobo.205.1">terraform apply</span></strong><span class="koboSpan" id="kobo.206.1"> prompts the user for confirmation before making any changes to the corresponding infrastructure </span><span class="No-Break"><span class="koboSpan" id="kobo.207.1">provider’s API.</span></span></p>
<p><span class="koboSpan" id="kobo.208.1">If no changes are detected </span><a id="_idIndexMarker080"/><span class="koboSpan" id="kobo.209.1">in the configuration files compared to the current Terraform state, no modifications will be made to the infrastructure. </span><span class="koboSpan" id="kobo.209.2">Since Terraform is a declarative language, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">terraform apply</span></strong><span class="koboSpan" id="kobo.211.1"> command can be executed multiple </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">times safely.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer016">
<span class="koboSpan" id="kobo.213.1"><img alt="Figure 2.7 – ﻿terraform apply command" src="image/B18198_02_7.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.214.1">Figure 2.7 – terraform apply command</span></p>
<h3><span class="koboSpan" id="kobo.215.1">Destroy</span></h3>
<p><span class="koboSpan" id="kobo.216.1">You can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.217.1">terraform destroy</span></strong><span class="koboSpan" id="kobo.218.1"> command to easily destroy all remote objects managed by a specific </span><a id="_idIndexMarker081"/><span class="koboSpan" id="kobo.219.1">Terraform configuration. </span><span class="koboSpan" id="kobo.219.2">You should not destroy objects that last for a long time in a production environment, but sometimes Terraform is used to handle short-lived infrastructure for development purposes, where </span><strong class="source-inline"><span class="koboSpan" id="kobo.220.1">terraform destroy</span></strong><span class="koboSpan" id="kobo.221.1"> can helpfully remove all temporary objects when you don’t need </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">them anymore.</span></span></p>
<p><span class="koboSpan" id="kobo.223.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.224.1">terraform destroy</span></strong><span class="koboSpan" id="kobo.225.1"> command should be used with caution and is not a command you would execute regularly. </span><span class="koboSpan" id="kobo.225.2">However, it is frequently used in non-production environments, where cleanup tasks are necessary for many </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">proof-of-concept tests.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer017">
<span class="koboSpan" id="kobo.227.1"><img alt="Figure 2.8 – ﻿terraform destroy command" src="image/B18198_02_8.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.228.1">Figure 2.8 – terraform destroy command</span></p>
<p><span class="koboSpan" id="kobo.229.1">In summary, Terraform </span><a id="_idIndexMarker082"/><span class="koboSpan" id="kobo.230.1">provides a set of commands to facilitate the creation, modification, and deletion of infrastructure resources. </span><span class="koboSpan" id="kobo.230.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.231.1">terraform init</span></strong><span class="koboSpan" id="kobo.232.1"> command initializes the working directory where the Terraform configuration files are located. </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">terraform plan</span></strong><span class="koboSpan" id="kobo.234.1"> generates an execution plan to preview the changes to be made to the infrastructure, while </span><strong class="source-inline"><span class="koboSpan" id="kobo.235.1">terraform apply</span></strong><span class="koboSpan" id="kobo.236.1"> executes the suggested changes after receiving user confirmation. </span><span class="koboSpan" id="kobo.236.2">Finally, </span><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">terraform destroy</span></strong><span class="koboSpan" id="kobo.238.1"> destroys all remote objects managed by the configuration. </span><span class="koboSpan" id="kobo.238.2">With these commands, Terraform provides a </span><a id="_idIndexMarker083"/><span class="koboSpan" id="kobo.239.1">powerful, flexible, and efficient toolset for managing IaC. </span><span class="koboSpan" id="kobo.239.2">Let’s compare other IaC tools </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">to Terraform.</span></span></p>
<h1 id="_idParaDest-36"><a id="_idTextAnchor035"/><span class="koboSpan" id="kobo.241.1">To Compare with the Other IaC Tools</span></h1>
<p><span class="koboSpan" id="kobo.242.1">Terraform’s flexible abstraction of resources and providers allows it to represent a wide range of infrastructure components, from physical hardware and virtual machines to email and DNS providers. </span><span class="koboSpan" id="kobo.242.2">This versatility makes Terraform capable of addressing </span><span class="No-Break"><span class="koboSpan" id="kobo.243.1">various issues.</span></span></p>
<p><span class="koboSpan" id="kobo.244.1">Terraform can manage virtually any cloud or virtual environment, including AWS, Microsoft Azure, and Google Cloud Platform, </span><span class="No-Break"><span class="koboSpan" id="kobo.245.1">among others.</span></span></p>
<p><span class="koboSpan" id="kobo.246.1">While this chapter focuses on using Terraform to manage AWS infrastructure, it is essential to note that Terraform is not exclusive to only cloud platforms. </span><span class="koboSpan" id="kobo.246.2">It can manage a single application or an entire </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">data center.</span></span></p>
<h2 id="_idParaDest-37"><a id="_idTextAnchor036"/><span class="koboSpan" id="kobo.248.1">Terraform versus CloudFormation</span></h2>
<p><span class="koboSpan" id="kobo.249.1">When it comes to </span><strong class="bold"><span class="koboSpan" id="kobo.250.1">IaC</span></strong><span class="koboSpan" id="kobo.251.1"> tools for cloud-based resources, two of the most popular choices are</span><a id="_idIndexMarker084"/><span class="koboSpan" id="kobo.252.1"> Terraform and AWS CloudFormation. </span><span class="koboSpan" id="kobo.252.2">While both </span><a id="_idIndexMarker085"/><span class="koboSpan" id="kobo.253.1">tools aim to provide a reliable, efficient, and safe way to manage cloud infrastructure, they differ in their approach and implementation. </span><span class="koboSpan" id="kobo.253.2">Terraform is an open source tool that offers a flexible and extensible language for creating and managing infrastructure. </span><span class="koboSpan" id="kobo.253.3">In contrast, CloudFormation is an </span><strong class="bold"><span class="koboSpan" id="kobo.254.1">AWS</span></strong><span class="koboSpan" id="kobo.255.1"> proprietary</span><a id="_idIndexMarker086"/><span class="koboSpan" id="kobo.256.1"> tool that uses JSON or YAML templates to define infrastructure resources. </span><span class="koboSpan" id="kobo.256.2">This section will compare and contrast the features and capabilities of Terraform and CloudFormation, to help you make an informed decision on which tool best suits your infrastructure </span><span class="No-Break"><span class="koboSpan" id="kobo.257.1">management needs.</span></span></p>
<h2 id="_idParaDest-38"><a id="_idTextAnchor037"/><span class="koboSpan" id="kobo.258.1">What is AWS CloudFormation?</span></h2>
<p><span class="koboSpan" id="kobo.259.1">CloudFormation is a service provided by </span><strong class="bold"><span class="koboSpan" id="kobo.260.1">AWS</span></strong><span class="koboSpan" id="kobo.261.1"> that simplifies the management of a </span><a id="_idIndexMarker087"/><span class="koboSpan" id="kobo.262.1">collection of AWS resources, including provisioning and updating them as necessary. </span><span class="koboSpan" id="kobo.262.2">With CloudFormation, you can create, update, and delete stacks in response to changes in your application environment. </span><span class="koboSpan" id="kobo.262.3">This AWS-managed service also offers a straightforward approach to creating reusable templates that enable you to deploy </span><span class="No-Break"><span class="koboSpan" id="kobo.263.1">cost-effective applications.</span></span></p>
<p><span class="koboSpan" id="kobo.264.1">CloudFormation allows you to design and provision AWS and third-party resources for your cloud environment using a configuration format known as templates. </span><span class="koboSpan" id="kobo.264.2">These templates, written in either</span><a id="_idIndexMarker088"/><span class="koboSpan" id="kobo.265.1"> JSON or YAML format, allow for the reusability and scalability of infrastructure, making it easier to manage large-scale cloud environments. </span><span class="koboSpan" id="kobo.265.2">The following diagram illustrates how Amazon CloudFormation serves as the central orchestrator for various </span><span class="No-Break"><span class="koboSpan" id="kobo.266.1">AWS services.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer018">
<span class="koboSpan" id="kobo.267.1"><img alt="Figure 2.9 – AWS CloudFormation" src="image/B18198_02_9.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.268.1">Figure 2.9 – AWS CloudFormation</span></p>
<h2 id="_idParaDest-39"><a id="_idTextAnchor038"/><span class="koboSpan" id="kobo.269.1">Comparison and differences between Terraform and CloudFormation</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.270.1">Scope</span></strong><span class="koboSpan" id="kobo.271.1">: On the coverage</span><a id="_idIndexMarker089"/><span class="koboSpan" id="kobo.272.1"> side, CloudFormation is very powerful because it is developed and supported directly by AWS, but Terraform has a great community</span><a id="_idIndexMarker090"/><span class="koboSpan" id="kobo.273.1"> that always works at a fast pace to ensure new resources, and features are implemented for </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">providers quickly.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.275.1">Type</span></strong><span class="koboSpan" id="kobo.276.1">: CloudFormation is a managed service by AWS, but Terraform has a CLI tool that can run from your workstation, a server, or a CI/CD system (such as Jenkins, GitHub Actions, etc.) or Terraform Cloud (a SaaS automation solution </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">from HashiCorp).</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.278.1">License and support</span></strong><span class="koboSpan" id="kobo.279.1">: CloudFormation is a native AWS service, and AWS Support plans cover it as well. </span><span class="koboSpan" id="kobo.279.2">Terraform is </span><a id="_idIndexMarker091"/><span class="koboSpan" id="kobo.280.1">an enterprise product and an open source project. </span><span class="koboSpan" id="kobo.280.2">HashiCorp offers 24/7 support, but at the same time, the huge Terraform community and provider developers are </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">always helpful.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.282.1">Syntax</span></strong><span class="koboSpan" id="kobo.283.1">/</span><strong class="bold"><span class="koboSpan" id="kobo.284.1">language</span></strong><span class="koboSpan" id="kobo.285.1">: CloudFormation supports both JSON and YAML formats. </span><span class="koboSpan" id="kobo.285.2">Terraform uses </span><strong class="bold"><span class="koboSpan" id="kobo.286.1">HashiCorp Configuration Language</span></strong><span class="koboSpan" id="kobo.287.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.288.1">HCL</span></strong><span class="koboSpan" id="kobo.289.1">), which is </span><a id="_idIndexMarker092"/><span class="koboSpan" id="kobo.290.1">human-readable as well </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">as machine-friendly.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.292.1">Architecture</span></strong><span class="koboSpan" id="kobo.293.1">: CloudFormation is an AWS-managed service to which you send/upload your templates for provisioning; on the other hand, Terraform is a decentralized system with which you can provision</span><a id="_idIndexMarker093"/><span class="koboSpan" id="kobo.294.1"> infrastructure from any workstation </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1">or server.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.296.1">Modularization</span></strong><span class="koboSpan" id="kobo.297.1">: In CloudFormation, nested stacks and cross-stack references can be used to achieve modularization, while Terraform is capable of creating reusable and </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">reproducible modules.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.299.1">User experience</span></strong><span class="koboSpan" id="kobo.300.1">/</span><strong class="bold"><span class="koboSpan" id="kobo.301.1">ease of use</span></strong><span class="koboSpan" id="kobo.302.1">: In contrast to CloudFormation, which is limited to AWS services, Terraform spans multiple cloud service providers such as AWS, Azure, and Google Cloud Platform, among others. </span><span class="koboSpan" id="kobo.302.2">This flexibility allows Terraform to provide a unified approach to managing cloud infrastructure across multiple providers, making it a popular choice for organizations that use more than one </span><span class="No-Break"><span class="koboSpan" id="kobo.303.1">cloud provider.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.304.1">Life cycle and state management</span></strong><span class="koboSpan" id="kobo.305.1">: CloudFormation stores the state and manages it with the use of stacks. </span><span class="koboSpan" id="kobo.305.2">Terraform stores the state on disk in JSON format and allows you to use a remote state system, such as an AWS S3 bucket, that gives you the capability of </span><span class="No-Break"><span class="koboSpan" id="kobo.306.1">tracking versions.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.307.1">Import from existing infrastructure</span></strong><span class="koboSpan" id="kobo.308.1">: It is possible to import resources into CloudFormation, but only a few resources are supported. </span><span class="koboSpan" id="kobo.308.2">It is possible to import all resources into Terraform state, but it does not generate configuration in the process; you need to handle that. </span><span class="koboSpan" id="kobo.308.3">But there are third-party tools that can generate </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">configuration, too.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.310.1">Verification steps</span></strong><span class="koboSpan" id="kobo.311.1">: CloudFormation uses change sets to verify the required changes. </span><span class="koboSpan" id="kobo.311.2">Terraform has a powerful plan for identifying changes and allows you to verify your changes to existing infrastructure before </span><span class="No-Break"><span class="koboSpan" id="kobo.312.1">applying them.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.313.1">Rolling updates and rollbacks</span></strong><span class="koboSpan" id="kobo.314.1">: CloudFormation automatically rolls back to the last working state. </span><span class="koboSpan" id="kobo.314.2">Terraform has no feature for rolling updates or rollbacks, but you can build a rollback system using a </span><span class="No-Break"><span class="koboSpan" id="kobo.315.1">CI/CD system.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.316.1">Multi-cloud management</span></strong><span class="koboSpan" id="kobo.317.1">: CloudFormation is AWS-only, but Terraform supports multiple cloud providers and many </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">more services.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.319.1">Compliance integration</span></strong><span class="koboSpan" id="kobo.320.1">: CloudFormation is built by AWS, so compliance is already assured, but for Terraform, you need to implement third-party tools yourself to </span><span class="No-Break"><span class="koboSpan" id="kobo.321.1">achieve compliance.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.322.1">Deployment type</span></strong><span class="koboSpan" id="kobo.323.1">: CloudFormation has a built-in CI/CD system that takes care of everything concerning deployment and rollbacks. </span><span class="koboSpan" id="kobo.323.2">Terraform can be deployed from any system, but you need to build your CI/CD </span><a id="_idIndexMarker094"/><span class="koboSpan" id="kobo.324.1">workflow or adopt a service</span><a id="_idIndexMarker095"/><span class="koboSpan" id="kobo.325.1"> that can fill </span><span class="No-Break"><span class="koboSpan" id="kobo.326.1">the gaps.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.327.1">Drift detection</span></strong><span class="koboSpan" id="kobo.328.1">: Both tools have drift detection </span><span class="No-Break"><span class="koboSpan" id="kobo.329.1">by default.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.330.1">Cost</span></strong><span class="koboSpan" id="kobo.331.1">:  Using AWS CloudFormation does not incur any additional charges beyond the cost of the AWS resources that are created, such as Amazon EC2 instances or Elastic Load Balancing load balancers. </span><span class="koboSpan" id="kobo.331.2">In contrast, Terraform is an open source project that can be used free of charge. </span><span class="koboSpan" id="kobo.331.3">However, to obtain enterprise-level features such as CI/CD automation and state management, you may need to consider using additional services and systems provided by HashiCorp or third-party service providers. </span><span class="koboSpan" id="kobo.331.4">These additional services may come with their </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">own costs.</span></span></p>
<h2 id="_idParaDest-40"><a id="_idTextAnchor039"/><span class="koboSpan" id="kobo.333.1">Terraform or CloudFormation – which should I choose?</span></h2>
<p><span class="koboSpan" id="kobo.334.1">The debate between Terraform</span><a id="_idIndexMarker096"/><span class="koboSpan" id="kobo.335.1"> and CloudFormation is ongoing and ultimately, the decision of which tool to use will depend on your personal preferences and requirements. </span><span class="koboSpan" id="kobo.335.2">Both </span><a id="_idIndexMarker097"/><span class="koboSpan" id="kobo.336.1">tools offer unique benefits and features, so it’s important to evaluate which one aligns best with your organization’s goals and cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.337.1">infrastructure needs.</span></span></p>
<p><span class="koboSpan" id="kobo.338.1">CloudFormation is a more fitting choice when your whole infrastructure relies on AWS and you have no intention of integrating a multi-cloud setup in the future. </span><span class="koboSpan" id="kobo.338.2">For newcomers to AWS services, the native AWS provided integration support can be quite advantageous. </span><span class="koboSpan" id="kobo.338.3">As it’s developed by AWS, CloudFormation enjoys quicker AWS-centric updates. </span><span class="koboSpan" id="kobo.338.4">It operates on JSON and YAML, thereby bypassing any potential learning hurdles associated </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">with HCL.</span></span></p>
<p><span class="koboSpan" id="kobo.340.1">On the other hand, Terraform shines when there’s usage (even potential future usage) of multi-cloud resources and faster operation is desired. </span><span class="koboSpan" id="kobo.340.2">Its module-based design promotes the creation of repeatable templates, accelerating the configuration process. </span><span class="koboSpan" id="kobo.340.3">Additionally, Terraform provides </span><a id="_idIndexMarker098"/><span class="koboSpan" id="kobo.341.1">a broader range of functions not found in CloudFormation, which is </span><a id="_idIndexMarker099"/><span class="koboSpan" id="kobo.342.1">beneficial for quicker </span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">resource provisioning.</span></span></p>
<p><span class="koboSpan" id="kobo.344.1">What is best for you ultimately depends on your requirements. </span><span class="koboSpan" id="kobo.344.2">You should assess your application’s infrastructure strategy, security and compliance requirements, and cloud adoption strategy to make a </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">final decision.</span></span></p>
<h1 id="_idParaDest-41"><a id="_idTextAnchor040"/><span class="koboSpan" id="kobo.346.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.347.1">This chapter provided an overview of Terraform and its architecture and workflow, as well as a comparison between Terraform and CloudFormation. </span><span class="koboSpan" id="kobo.347.2">Terraform is a popular IaC tool that allows for safe and efficient management of infrastructure across multiple cloud providers. </span><span class="koboSpan" id="kobo.347.3">It relies on plugins called providers to interact with cloud providers, SaaS providers, and other APIs. </span><span class="koboSpan" id="kobo.347.4">Terraform uses modules to organize and encapsulate configurations into logical components, making it easier to navigate and understand complex configurations. </span><span class="koboSpan" id="kobo.347.5">Using modules can also provide consistency in your configurations and make them easier for other teams to use. </span><span class="koboSpan" id="kobo.347.6">Terraform uses resource blocks to manage infrastructure objects in your configuration, with most providers having several different resources that map to the appropriate APIs to manage that infrastructure type. </span><span class="koboSpan" id="kobo.347.7">The workflow of Terraform consists of five key steps: </span><strong class="bold"><span class="koboSpan" id="kobo.348.1">Write</span></strong><span class="koboSpan" id="kobo.349.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.350.1">Init</span></strong><span class="koboSpan" id="kobo.351.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.352.1">Plan</span></strong><span class="koboSpan" id="kobo.353.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.354.1">Apply</span></strong><span class="koboSpan" id="kobo.355.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.356.1">and </span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.357.1">Destroy</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.358.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.359.1">The chapter also compared Terraform to AWS CloudFormation, which is limited to AWS services, whereas Terraform can span multiple cloud service providers. </span><span class="koboSpan" id="kobo.359.2">While CloudFormation simplifies the process of managing the life cycle of AWS resources and provides a simple way to create reusable templates, Terraform’s flexibility allows for a unified approach to managing cloud infrastructure across </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">multiple providers.</span></span></p>
<p><span class="koboSpan" id="kobo.361.1">Ultimately, the decision of whether to use Terraform or CloudFormation will depend on personal preference and requirements. </span><span class="koboSpan" id="kobo.361.2">Both tools offer unique benefits and features that can help organizations efficiently manage their </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">cloud infrastructure.</span></span></p>
<p><span class="koboSpan" id="kobo.363.1">In the upcoming chapter, we will delve into various key aspects of working with Terraform. </span><span class="koboSpan" id="kobo.363.2">Let’s start coding our first </span><span class="No-Break"><span class="koboSpan" id="kobo.364.1">Terraform template.</span></span></p>
</div>
</body></html>