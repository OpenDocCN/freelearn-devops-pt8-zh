- en: Exploring Advanced Synchronization Concepts
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索高级同步概念
- en: In current projects and workshops, we often see that administrators or consultants
    find handling the Azure AD Connect synchronization engine difficult, especially
    if the out-of-the-box functionality configured by the wizard doesn't work as expected
    in their scenarios. The chapter will give you all the needed knowledge so that
    you can handle basic and advanced synchronization requirements.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在当前的项目和工作坊中，我们经常看到管理员或顾问发现处理 Azure AD Connect 同步引擎非常困难，特别是当向导配置的开箱即用功能在他们的场景中无法按预期工作时。本章将为你提供所需的所有知识，以便你能够处理基本和高级的同步需求。
- en: In this chapter, we'll discuss advanced synchronization concepts. We'll look
    into the synchronization rules and work with practical situations to provide you
    with the information and practical experience you need to solve common requests
    in your projects or solutions. Furthermore, we explain the declarative provisioning
    and expressions concept and use them directly in real-world examples. Another
    topic in this chapter is the connection to an additional untrusted Active Directory
    forest. Finally, we'll give you an idea of the special considerations you need
    to handle.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们将讨论高级同步概念。我们将研究同步规则，并结合实际情况提供信息和实践经验，帮助你解决项目或解决方案中的常见需求。此外，我们将解释声明式配置和表达式的概念，并在实际示例中直接使用它们。本章的另一个主题是连接到额外的不受信任的
    Active Directory 林。最后，我们还会向你介绍需要处理的特殊注意事项。
- en: 'This chapter is organized into the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的结构包括以下主题：
- en: Understanding declarative provisioning and expressions
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解声明式配置和表达式
- en: Synchronization rules explained
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同步规则说明
- en: Special considerations in advanced synchronization concepts
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高级同步概念中的特殊注意事项
- en: We will start with the steps to prepare our lab environment.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从准备实验环境的步骤开始。
- en: Preparing your lab environment
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备实验环境
- en: To work through the guidance provided in this chapter, we need to arrange some
    preparation tasks. You need to provide an additional public DNS suffix (which in
    my case is `azureid.ch`) that represents `YOURDOMAIN2.COM`. We need to add this
    other domain as a custom domain in the first Azure AD tenant (`YOURDOMAIN1.ONMICROSOFT.COM`),
    which we used in [Chapter 2](c0918163-6616-4bdb-aa82-4a65f578d268.xhtml), *Understanding
    Identity Synchronization**:*
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 要按照本章提供的指导进行操作，我们需要安排一些准备工作。你需要提供一个额外的公共 DNS 后缀（在我的案例中是`azureid.ch`），代表`YOURDOMAIN2.COM`。我们需要将这个域名作为自定义域添加到第一个
    Azure AD 租户（`YOURDOMAIN1.ONMICROSOFT.COM`）中，这个租户我们在[第 2 章](c0918163-6616-4bdb-aa82-4a65f578d268.xhtml)《理解身份同步》中使用过，*理解身份同步**：*
- en: 'Use the following steps to start the configuration:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤开始配置：
- en: Open the Azure Portal: [https://portal.azure.com.](https://portal.azure.com)
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Azure 门户：[https://portal.azure.com.](https://portal.azure.com)
- en: Navigate to the Azure AD blade.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 Azure AD 面板。
- en: Click Custom domains.
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“自定义域”。
- en: Click Add custom domain.
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“添加自定义域”。
- en: 'Use your additional domain name:'
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用你的额外域名：
- en: '![](img/8512cad3-370b-474d-bc20-8d6f1ec266b9.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8512cad3-370b-474d-bc20-8d6f1ec266b9.png)'
- en: Adding a custom domain
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 添加自定义域
- en: 'Configure your public DNS to represent the following verification entry:'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置你的公共 DNS，以代表以下验证条目：
- en: '![](img/3e627533-2e35-4cb6-8997-9e829b0a91ff.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3e627533-2e35-4cb6-8997-9e829b0a91ff.png)'
- en: Custom domain verification
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义域验证
- en: Click Verify.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“验证”。
- en: 'The following result is expected:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 预计的结果如下：
- en: '![](img/6a2d0cd5-2ad9-4904-a690-5e35da8c3038.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a2d0cd5-2ad9-4904-a690-5e35da8c3038.png)'
- en: Verified domains overview
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 验证域概述
- en: 'The following diagram shows the complete lab environment we''ll use in this
    book:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了我们在本书中使用的完整实验环境：
- en: '![](img/d225759d-93f9-4a85-9839-30377eb0178f.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d225759d-93f9-4a85-9839-30377eb0178f.png)'
- en: Lab environment overview
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 实验环境概述
- en: Furthermore, we need to configure a new Active Directory Forest that uses the
    new domain name. Use the preceding specifications to create the virtual machine
    to host the domain controller. Create the same organizational structure and users,
    just like you did for the first Active Directory forest that we used in the [Chapter
    2](c0918163-6616-4bdb-aa82-4a65f578d268.xhtml), *Understanding Identity Synchronization*.
    You'll find all the scripts in this book's code package. Don't worry—we'll do
    the configuration in this chapter to avoid errors in your lab. After preparing
    the lab environment, we can start working through this chapter.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们需要配置一个新的Active Directory森林，使用新的域名。使用上述规范创建虚拟机以托管域控制器。创建与我们在[第2章](c0918163-6616-4bdb-aa82-4a65f578d268.xhtml)，*理解身份同步*中使用的第一个Active
    Directory森林相同的组织结构和用户。您将在本书的代码包中找到所有脚本。别担心——我们将在本章中进行配置，以避免实验室中的错误。在准备好实验环境后，我们可以开始处理本章内容。
- en: We are focusing on the synchronization process in this chapter to adopt the
    authentication parts you can use the resources from [Chapter 6](1f239a9c-c62a-4e40-ab58-ce78cd87e8be.xhtml),
    *Managing Authentication Protocols*, [Chapter 7](468509fa-856c-411d-abdb-e9a39c266750.xhtml), *Deploying
    Solutions on Azure AD and ADFS*, and [Chapter 8](efbe1917-c755-4449-b29e-fa4a21e819fd.xhtml), *Using
    the Azure AD App Proxy and the Web Application Proxy*.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 本章重点讲解同步过程，以便您可以采用身份验证部分，您可以使用来自[第6章](1f239a9c-c62a-4e40-ab58-ce78cd87e8be.xhtml)，*身份验证协议管理*，[第7章](468509fa-856c-411d-abdb-e9a39c266750.xhtml)，*在Azure
    AD和ADFS上部署解决方案*，以及[第8章](efbe1917-c755-4449-b29e-fa4a21e819fd.xhtml)，*使用Azure AD应用程序代理和Web应用程序代理*的资源。
- en: Understanding declarative provisioning and expressions
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解声明式配置和表达式
- en: 'The easiest way to explain declarative provisioning is as follows: objects
    are processed from the source connected directory to the target source by evaluating
    how the objects and the associated attributes should be transformed. This is controlled
    by inbound rules from the connector space to the metaverse and outbound rules
    from the metaverse to the connector space. The following diagram gives you an
    overview of all of the components:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 解释声明式配置的最简单方式如下：对象通过评估如何转换对象及其相关属性，从源连接目录处理到目标源。这由从连接器空间到元宇宙的入站规则以及从元宇宙到连接器空间的出站规则控制。以下图表为您概述了所有组件：
- en: '![](img/5b481b4a-e626-42bb-8d68-482c634be89a.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5b481b4a-e626-42bb-8d68-482c634be89a.png)'
- en: Declarative provisioning options and components overview
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 声明式配置选项和组件概览
- en: 'Declarative provisioning provides the following capabilities:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 声明式配置提供以下功能：
- en: The only way to configure the sync engine
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置同步引擎的唯一方式
- en: Functions to configure attribute flows
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置属性流的函数
- en: Precedence is on SRs (not on Connectors)
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优先级在SRs（而不是在连接器）上
- en: MV—deletion rules now use declarative provisioning
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MV—删除规则现在使用声明式配置
- en: Introduces parameters, such as `%Domain.Netbios%`
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 引入参数，如`%Domain.Netbios%`
- en: Configured through PowerShell
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过PowerShell配置
- en: 'The attribute-flow expression language can be explained as follows:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 属性流表达式语言可以解释如下：
- en: Written in **Visual Basic for Applications** (**VBA**)
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写于**Visual Basic for Applications**（**VBA**）
- en: 'Stricter syntax:'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更严格的语法：
- en: Useful errors for easy troubleshooting
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有助于故障排除的有用错误信息
- en: Strongly-typed for different data types
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强类型支持不同的数据类型
- en: 'Evolved expressions:'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进化的表达式：
- en: '`[attributename]`, `%parametername%`'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`[attributename]`，`%parametername%`'
- en: '`&H` (hexadecimal value)'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`&H`（十六进制值）'
- en: Constants—`CRLF`, `True`, `False`, `NULL`
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常量—`CRLF`，`True`，`False`，`NULL`
- en: 'It brings the following attribute flow operators into the game:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 它引入了以下属性流操作符：
- en: '**String concatenate**: `&`'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**字符串连接**：`&`'
- en: '**Mathematics**: `+`, `-`, `*`, `/`'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数学运算**：`+`，`-`，`*`，`/`'
- en: '**Comparison**: `=`, `<`, `>`, `<>`, `<=`, `>=`'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**比较**：`=`，`<`，`>`，`<>`，`<=`，`>=`'
- en: '**Evaluation order**: `( )`'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**评估顺序**：`( )`'
- en: '**Logical operator**: `&&` (and) `||` (or)'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**逻辑运算符**：`&&`（与）`||`（或）'
- en: 'It also provides a lot of functions for the attribute flow, as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 它还为属性流提供了许多功能，如下所示：
- en: '| **Conversion** | `CBool``CDate``CGuid``ConvertFromBase64``ConvertToBase64``CNum``CRef``CStr``StringFromGuid``StringFromSid`
    | **Math** | `BitAnd``BitOr``RandomNum` |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: '| **转换** | `CBool``CDate``CGuid``ConvertFromBase64``ConvertToBase64``CNum``CRef``CStr``StringFromGuid``StringFromSid`
    | **数学** | `BitAnd``BitOr``RandomNum` |'
- en: '| **Date/time** | `DateAdd``DateFromNum``FormatDateTime``Now``NumFromDate`
    | **Multi-valued** | `Contains` `Count``Item``Join``RemoveDuplicates``Split` |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: '| **日期/时间** | `DateAdd``DateFromNum``FormatDateTime``Now``NumFromDate` | **多值**
    | `Contains` `Count``Item``Join``RemoveDuplicates``Split` |'
- en: '| **Directory** | `DNComponent``DNComponentRev``EscapeDNComponent` | **Program
    flow** | `Error``IIF``Switch` |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| **目录** | `DNComponent``DNComponentRev``EscapeDNComponent` | **程序流程** | `Error``IIF``Switch`
    |'
- en: '| **Inspection** | `IsBitSet``IsDate``IsEmpty``IsGuid``IsNull``IsNullOrEmpty``IsNumeric``IsPresent``IsString`
    | **Text** | `GUID``InStr``InStrRev``LCase ``Left``Len``LTrim``Mid``PadLeft ``PadRight ``PCase ``Replace ``ReplaceChars``Right``RTrim``Trim``UCase ``Word`
    |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| **检查** | `IsBitSet``IsDate``IsEmpty``IsGuid``IsNull``IsNullOrEmpty``IsNumeric``IsPresent``IsString`
    | **文本** | `GUID``InStr``InStrRev``LCase ``Left``Len``LTrim``Mid``PadLeft ``PadRight ``PCase ``Replace ``ReplaceChars``Right``RTrim``Trim``UCase ``Word`
    |'
- en: In the following section, we'll explain these components in detail to provide
    you with a better understanding.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分中，我们将详细解释这些组件，以帮助你更好地理解。
- en: Synchronization rules explained
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 同步规则说明
- en: 'Azure AD Connect uses an extra user interface in the Synchronization Rules
    Editor to manage the synchronization logic. In the following screenshot, you can
    see all of the synchronization rules have been created for your basic configuration.
    Every entry is one synchronization rule. In the Direction dropdown, you can choose
    between two different types: Inbound and Outbound. Practically, we say that the
    Inbound and Outbound synchronization is always viewed from the metaverse perspective.
    In my explanations, I''ll use the inbound synchronization rules because we will
    find the related information there.'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD Connect 在同步规则编辑器中使用额外的用户界面来管理同步逻辑。在下方的截图中，你可以看到所有的同步规则已经为你的基础配置创建。每一项都是一个同步规则。在“方向”下拉框中，你可以选择两种不同的类型：入站和出站。从实际角度来说，入站和出站同步总是从元宇宙（metaverse）角度来看待。在我的解释中，我将使用入站同步规则，因为我们将在其中找到相关信息。
- en: 'In the following screenshot, we can see the connected Active Directory forest
    (`inovitdemos.ch`) and that it doesn''t have any services, such as Exchange or
    Skype for Business, and no synchronization rules have been created for these services:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在下方的截图中，我们可以看到已连接的 Active Directory 林（`inovitdemos.ch`），并且它没有任何服务，例如 Exchange
    或 Skype for Business，并且没有为这些服务创建同步规则：
- en: '![](img/9438d5a8-9150-49f5-b76f-5a848a3837e9.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9438d5a8-9150-49f5-b76f-5a848a3837e9.png)'
- en: Synchronization rules overview—Inbound
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 同步规则概述—入站
- en: 'With the following steps, we will gather more information on the practical
    usage of the tool:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 通过以下步骤，我们将收集有关工具实际使用的更多信息：
- en: View this configuration on your YD1ADS01.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的 YD1ADS01 上查看此配置。
- en: Click on Start and navigate to Azure AD Connect.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“开始”，然后导航到 Azure AD Connect。
- en: 'Click on Synchronization Rules Editor:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“同步规则编辑器”：
- en: '![](img/c89b2e4e-e5b7-4ca4-a097-32212203dcd7.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c89b2e4e-e5b7-4ca4-a097-32212203dcd7.png)'
- en: Start Menu—Synchronization Rules Editor
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 开始菜单—同步规则编辑器
- en: 'AAD Connect provides several default synchronization rules based on your configuration. The
    templates for these rules can be found under `C:\Program Files\Microsoft Azure
    AD Connect\SynchronizationRulesTemplates` and are XML-based:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: AAD Connect 根据你的配置提供了多个默认同步规则。这些规则的模板可以在`C:\Program Files\Microsoft Azure AD Connect\SynchronizationRulesTemplates`目录下找到，并且它们是基于
    XML 格式的：
- en: '![](img/8667ee0a-fa52-47cf-a4b6-203b36b6b9af.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8667ee0a-fa52-47cf-a4b6-203b36b6b9af.png)'
- en: Synchronization rules templates overview
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 同步规则模板概述
- en: The screenshot of the Synchronization Rules Editor shows the different rules
    and their precedence.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 同步规则编辑器的截图展示了不同的规则及其优先级。
- en: Microsoft always generates the first rule with the number `100` and iterates over
    all connectors. They read the first item in that file (sorted by precedence).
    It has the name of a rule and the criteria for being added. Then, they generate
    the first rule with the number `100` and iterate over all connectors. If there
    are multiple connectors, the `whenCreated` date/time is used as the arbitrator.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 微软始终生成编号为`100`的第一个规则，并遍历所有连接器。它们读取该文件中的第一项（按优先级排序）。它有一个规则名称和添加的标准。然后，它们生成编号为`100`的第一个规则，并遍历所有连接器。如果有多个连接器，则使用`whenCreated`日期/时间作为裁定标准。
- en: 'In the following screenshot, we''ll take an in-depth look into a synchronization
    rule:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在下方的截图中，我们将深入了解一个同步规则：
- en: '![](img/deba353b-d27a-43b5-befb-0a3056ed38b2.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](img/deba353b-d27a-43b5-befb-0a3056ed38b2.png)'
- en: Inbound synchronization rule details
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 入站同步规则详细信息
- en: Here, we'll find detailed information about the Connected System for which the
    rule applies. Further details are the object type in the metaverse and the connector
    space of the synchronization engine. As we can see in the preceding example, the
    object type in the connector space is called a user, which represents a user account
    in an Active Directory, for example. The Metaverse Object Type for a user is always
    a person. Under the Link Type, you can choose between Join, StickyJoin, and Provision.
    We already discussed the join and provision option in [Chapter 2](c0918163-6616-4bdb-aa82-4a65f578d268.xhtml),
    *Understanding Identity Synchronization*. The StickyJoin option can be used if
    the provisioning of a new object to the metaverse is prohibited. Furthermore,
    the rule is enabled for password synchronization.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将找到关于适用规则的**连接系统**的详细信息。进一步的细节包括元宇宙中的对象类型以及同步引擎的连接空间。如前面示例所示，连接空间中的对象类型称为用户，代表一个活动目录中的用户账户。例如，用户的元宇宙对象类型始终是**人**。在**链接类型**下，您可以选择**加入**、**粘性加入**和**预配**。我们已经在[第2章](c0918163-6616-4bdb-aa82-4a65f578d268.xhtml)中讨论了加入和预配选项，*理解身份同步*。如果禁止将新对象预配到元宇宙，则可以使用**粘性加入**选项。此外，规则启用了密码同步。
- en: 'In the following screenshot, we explore the Scoping filter capabilities. The
    following rule applies only if the user is enabled in the Active Directory. We
    use the userAccountControl attribute to identify the status of the user. This
    screenshot shows us that the value isn''t required to have the bit `2` not set.
    The value for an enabled user in Active Directory is `512`, and `514` for a disabled
    one:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，我们探讨了作用范围过滤器的功能。该规则仅在用户在活动目录中启用时应用。我们使用`userAccountControl`属性来识别用户的状态。该截图显示，值不需要将位`2`未设置。活动目录中启用用户的值为`512`，禁用用户为`514`：
- en: '![](img/2d8dab24-4f30-4e0b-91f3-f82ccce63d6b.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2d8dab24-4f30-4e0b-91f3-f82ccce63d6b.png)'
- en: Scoping filter options
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 作用范围过滤器选项
- en: 'Within the Scoping filter, we can see that there are groups and clauses that
    can be nested. To apply a rule, all clauses inside a group need to be met. A rule
    has two types of logical operators: the logical OR operator that''s used between
    groups and the logical AND within a group.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在作用范围过滤器中，我们可以看到有组和可以嵌套的子句。要应用规则，必须满足组内所有子句的条件。规则有两种逻辑运算符：逻辑“或”运算符用于组之间，逻辑“与”运算符用于组内。
- en: We'll take a closer look at the `Out to AAD—Group Join` rule, which is shown
    in the following screenshot. We can find an example of the different group types
    and how they get handled.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将仔细查看`向 AAD 导出—组加入`规则，如下图所示。在这里我们可以找到不同组类型的示例，以及它们如何被处理。
- en: 'The rule shown in the following screenshot regulates how and which groups are
    provisioned to the Azure AD. Also, other attributes will be checked from the rule:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图中显示的规则规定了如何以及哪些组会被分配到 Azure AD。此外，还会检查规则中的其他属性：
- en: '![](img/1dcbf78c-344b-4bfd-b5a7-64332b495526.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1dcbf78c-344b-4bfd-b5a7-64332b495526.png)'
- en: More Scoping filter options
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 更多作用范围过滤器选项
- en: 'In the following example, we look into the `In from AD—User Join rule`, where
    we find ms-DS-ConsistencyGuid and objectGuid handling for joining users from the
    connector space to the metaverse. Keep in mind that join rules will only be checked
    once. The link between the connector space and the metaverse object exists until
    the conditions in the synchronization rule will not be achieved. It''s important
    to know that the synchronization engine will show an error when multiple join
    rules want to be applied:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，我们查看了`从 AD 导入—用户加入规则`，在其中我们发现了 ms-DS-ConsistencyGuid 和 objectGuid 处理，涉及将用户从连接空间加入到元宇宙。请记住，加入规则只会检查一次。连接空间与元宇宙对象之间的链接存在，直到同步规则中的条件未被满足。重要的是要知道，当多个加入规则想要应用时，同步引擎会显示错误：
- en: '![](img/f9563612-2cf0-4375-9e5a-ff41287fff69.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f9563612-2cf0-4375-9e5a-ff41287fff69.png)'
- en: Join rules example
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 加入规则示例
- en: For transformations types, such as constant, direct or expression can be used.
    If we use a constant flow, we can write a value directly into the chosen attribute.
    With a direct flow, the attribute from the source system will be used in the target
    attribute. With **Visual Basic for Applications** (**VBA**), we can develop extended
    configurations. The syntax for attributes is the square brackets, such as company
    or department, as shown in the following screenshot. Keep in mind that you need
    to work with case-sensitive functions and attribute names. You can also use nesting
    options in your rules.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 对于转换类型，可以使用常量、直接流或表达式。如果我们使用常量流，我们可以直接将值写入选定的属性中。使用直接流时，源系统中的属性将用于目标属性。通过**Visual
    Basic for Applications**（**VBA**），我们可以开发扩展配置。属性的语法是方括号，例如公司或部门，如下图所示。请记住，你需要处理区分大小写的函数和属性名称。你还可以在规则中使用嵌套选项。
- en: 'The following screenshot shows the transformations of the `In from AD—User
    common` rule:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了`In from AD—User common`规则的转换：
- en: '![](img/2f90a56e-4dd0-40e7-a8ff-253c94d10cda.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2f90a56e-4dd0-40e7-a8ff-253c94d10cda.png)'
- en: Transformation rule example
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 转换规则示例
- en: 'We worked through individual synchronization rules. Sometimes, many synchronization
    rules are applied to one target attribute. The `sourceAnchor` in the following
    screenshot can be used as an example. There, you can see that two rules have been
    applied to the attribute. Now, precedence comes into the game and decides which
    rule will be used. View the following screenshots to follow the explanation:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经处理了各个同步规则。有时，多个同步规则会应用于一个目标属性。下图中的`sourceAnchor`可以作为示例。在那里，你可以看到两个规则已应用于该属性。现在，优先级就发挥作用，决定哪个规则将被使用。请查看以下截图以跟随说明：
- en: '`In from AD—User AccountEnabled`:'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`In from AD—User AccountEnabled`：'
- en: '![](img/0a571f62-d37a-4246-8ae2-d995a401d0cd.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0a571f62-d37a-4246-8ae2-d995a401d0cd.png)'
- en: Expression example for AccountEnabled
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: AccountEnabled的表达式示例
- en: '`In from AD—User Common`:'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`In from AD—User Common`：'
- en: '![](img/e39fb761-ea30-46fd-8f68-77e3b0b6c386.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e39fb761-ea30-46fd-8f68-77e3b0b6c386.png)'
- en: Expression example sourceAnchor
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 表达式示例 sourceAnchor
- en: In the case of `sourceAnchor`, an enabled account from the connected Active
    Directory will be populated to the Azure AD. If no enabled account is available
    in any connected Active Directory, the `In from AD—User Common` rule applies.
    The default behavior for multiple connected Active Directories is that the `In
    from AD—User Join` rule has the highest precedence. So, the system iterates through
    all connected Active Directories.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 对于`sourceAnchor`，来自连接的Active Directory的启用账户将被填充到Azure AD中。如果在任何连接的Active Directory中没有启用的账户，则应用`In
    from AD—User Common`规则。对于多个连接的Active Directory，默认行为是`In from AD—User Join`规则具有最高优先级。因此，系统会遍历所有连接的Active
    Directory。
- en: Now that we have introduced you to the concepts of declarative provisioning
    and synchronization rules, we'll configure some examples.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经介绍了声明性配置和同步规则的概念，接下来我们将配置一些示例。
- en: Special considerations in advanced synchronization concepts
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级同步概念中的特别注意事项
- en: In this section, we'll start using our knowledge in practical examples. First,
    we'll explore some essential functions that can be used out of the box. In some
    environments, you have the requirement that an organization has an **organizational
    unit** (**OU**) filter in place, where all users are included in this OU. But
    now that you need to filter out, this shouldn't be synchronized to the Azure AD.
    Furthermore, we'll integrate a second AD forest and use PowerShell to configure
    the synchronization rules.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将开始在实际示例中使用我们的知识。首先，我们将探讨一些可以开箱即用的基本功能。在某些环境中，你可能需要一个组织的**组织单位**（**OU**）过滤器，其中所有用户都包含在这个OU中。但现在你需要将其过滤掉，这些用户不应该同步到Azure
    AD。此外，我们还将集成第二个AD林，并使用PowerShell来配置同步规则。
- en: Using standard filters to exclude users and groups
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用标准过滤器排除用户和组
- en: 'In this section, we''ll use the standard filtering options to exclude users
    and groups to be synchronized to the metaverse:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用标准过滤选项排除不需要同步到元宇宙的用户和组：
- en: Log in as domain administrator to your YD1ADS01.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以域管理员身份登录到你的YD1ADS01。
- en: Open the Active Directory Users and Computers console (`dsa.msc`).
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Active Directory 用户和计算机控制台（`dsa.msc`）。
- en: 'Be sure that you are in the advanced features view:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请确保你处于高级功能视图中：
- en: '![](img/8732c575-25d0-4e3f-a883-8e28a955e2e8.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8732c575-25d0-4e3f-a883-8e28a955e2e8.png)'
- en: Active Directory Users and Computers—Advanced Features option
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: Active Directory 用户和计算机——高级功能选项
- en: Choose one of your users and move to the Attribute Editor tab.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你的一个用户并转到属性编辑器标签。
- en: 'Edit the adminDescription attribute and enter `User_NoSync`, where `User_`
    is the important part:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑 adminDescription 属性并输入 `User_NoSync`，其中 `User_` 是关键部分：
- en: '![](img/fc91ea9e-e48a-43cf-bbb9-0f68c3a8b6de.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fc91ea9e-e48a-43cf-bbb9-0f68c3a8b6de.png)'
- en: adminDescription filtering option
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: adminDescription 过滤选项
- en: Save your settings and minimize the console.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的设置并最小化控制台。
- en: Open the Synchronization Rules Editor.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开同步规则编辑器。
- en: Edit the rule `In from AD - User Common`.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑规则 `In from AD - User Common`。
- en: Click on Scoping filter.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击范围过滤器。
- en: 'You''ll see a Scoping filter with the following clause:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将看到具有以下条件的范围过滤器：
- en: '[PRE0]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following screenshot shows the configuration to filter users to synchronize
    to Azure AD by filling the `adminDescription` attribute:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了通过填写 `adminDescription` 属性来配置过滤要同步到 Azure AD 的用户：
- en: '![](img/2543e3fc-4fc8-4398-a432-546462a82d91.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2543e3fc-4fc8-4398-a432-546462a82d91.png)'
- en: Rule configuration to filter specific users
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 规则配置以过滤特定用户
- en: Click Cancel and minimize the synchronization rules editor.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击取消并最小化同步规则编辑器。
- en: Open the Synchronization Service Manager.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开同步服务管理器。
- en: Click on Connectors and start a delta import on your Active Directory connector.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“连接器”，并开始在你的 Active Directory 连接器上进行增量导入。
- en: 'You''ll get an update in the sync statistics:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将在同步统计中看到更新：
- en: '![](img/c5441614-42b2-477b-9a10-d9e98ccc542f.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5441614-42b2-477b-9a10-d9e98ccc542f.png)'
- en: Delta import synchronization statistics
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 增量导入同步统计信息
- en: Click on Updates.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击更新。
- en: 'You''ll notice add on your modified user account:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会注意到你修改的用户账户中添加了内容：
- en: '![](img/791a8505-b55d-4802-9020-827d0470e5e7.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/791a8505-b55d-4802-9020-827d0470e5e7.png)'
- en: adminDescription attribute flow
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: adminDescription 属性流
- en: Click on Preview.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击预览。
- en: Choose Delta Synchronization.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择增量同步。
- en: 'Click Generate Preview:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击生成预览：
- en: '![](img/0d4f31d6-5bfe-4ddd-9360-870b9d8b3595.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0d4f31d6-5bfe-4ddd-9360-870b9d8b3595.png)'
- en: Synchronization preview options
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 同步预览选项
- en: 'You''ll see in the result that the Object Deletion Rule was satisfied:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将在结果中看到对象删除规则已满足：
- en: '![](img/367cb67f-c54c-4ea3-ada9-dcd78a3bdded.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](img/367cb67f-c54c-4ea3-ada9-dcd78a3bdded.png)'
- en: Object deletion rule preview
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 对象删除规则预览
- en: 'Click on Connector Deprovisioning:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击连接器停用：
- en: '![](img/3e9bd5dc-714f-4c35-aa92-110c93e1e35f.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3e9bd5dc-714f-4c35-aa92-110c93e1e35f.png)'
- en: Connector Deprovisioning preview
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 连接器停用预览
- en: The object will be disconnected.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对象将被断开连接。
- en: Click Close.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击关闭。
- en: Click Preview.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击预览。
- en: Chose Delta synchronization.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择增量同步。
- en: 'Click Commit Preview:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击提交预览：
- en: '![](img/86dc303a-3f7b-4d38-882e-c84281f6ab33.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/86dc303a-3f7b-4d38-882e-c84281f6ab33.png)'
- en: Preview commitment option
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 提交预览选项
- en: 'Open a Metaverse Search:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开元宇宙搜索：
- en: '![](img/ac43bdd8-b0a3-4230-a251-a8dfadc2a90d.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ac43bdd8-b0a3-4230-a251-a8dfadc2a90d.png)'
- en: Metaverse search option
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 元宇宙搜索选项
- en: Click Search.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击搜索。
- en: Aaron Painter no longer exists in the Metaverse.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Aaron Painter 在元宇宙中已不存在。
- en: 'Run an Export on the Azure AD connector:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Azure AD 连接器上执行导出操作：
- en: '![](img/d697a01a-5f8b-4d83-aa00-d058543afdba.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d697a01a-5f8b-4d83-aa00-d058543afdba.png)'
- en: Export run profile execution on Azure AD
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Azure AD 上执行导出运行配置文件
- en: You'll get a delete in the sync statistics.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将在同步统计中看到删除信息。
- en: 'Click Deletes:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击删除：
- en: '![](img/4255e4e7-7904-4690-bcb9-4b8df6fc37c1.png)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4255e4e7-7904-4690-bcb9-4b8df6fc37c1.png)'
- en: Export Statistics on Azure AD
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 上的导出统计信息
- en: 'Click on the object GUID:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击对象 GUID：
- en: '![](img/45f15b27-7fd1-46c8-a986-a3d7ced59954.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/45f15b27-7fd1-46c8-a986-a3d7ced59954.png)'
- en: Connector space validation
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 连接器空间验证
- en: Your user will be deleted from the Azure AD.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你的用户将从 Azure AD 中删除。
- en: You'll see Awaiting Export Confirmation.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将看到“等待导出确认”。
- en: Run delta import on the Azure AD connector.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Azure AD 连接器上运行增量导入。
- en: 'The object will be deleted in the connector space of the Azure AD connector:'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对象将在 Azure AD 连接器的连接器空间中被删除：
- en: '![](img/557f2c74-c994-49c0-89ed-806e5031042a.png)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![](img/557f2c74-c994-49c0-89ed-806e5031042a.png)'
- en: Deletion of the object in the connector space
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在连接器空间中删除对象
- en: Run delta sync on the Azure AD connector to finish the change.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Azure AD 连接器上运行增量同步以完成更改。
- en: 'Open the connector space on the Azure AD connector. You won''t find the preceding
    `CN=`:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Azure AD 连接器的连接器空间，你将找不到前面的 `CN=`：
- en: '![](img/c4c676cc-954c-47ba-9398-621fab4897ab.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c4c676cc-954c-47ba-9398-621fab4897ab.png)'
- en: Connector space search and validation options
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 连接器空间搜索和验证选项
- en: 'With this option, you''ve seen that you can filter objects in a filter OU by
    filling the adminDescription attribute with User_NoSync. The same procedure can
    be used to filter groups with `Group_NoSync`, for example. Here, you can find
    the specific `In from AD—Group Common` inbound rule, which is shown in the following
    screenshot:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此选项，你已看到可以通过填充adminDescription属性为User_NoSync来过滤OU中的对象。相同的过程也可以用于筛选具有`Group_NoSync`的组。例如，你可以找到特定的`In
    from AD—Group Common`入站规则，如下图所示：
- en: '![](img/35772ed6-4700-4766-bc91-4ad29900509b.png)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![](img/35772ed6-4700-4766-bc91-4ad29900509b.png)'
- en: adminDescription usage for groups
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 使用adminDescription为组配置
- en: In the next example, we'll build a custom rule.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个示例中，我们将构建一个自定义规则。
- en: Building a custom rule for filtering
  id: totrans-185
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建自定义筛选规则
- en: 'In this example, we''ll build our own rule to filter by a specific department.
    You can use the following procedure in the Synchronization Rules Editor:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在本示例中，我们将构建自己的规则以按特定部门进行筛选。你可以在同步规则编辑器中使用以下过程：
- en: Open the Synchronization Rules Editor.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开同步规则编辑器。
- en: Click on Add New Rule and select Inbound.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击添加新规则并选择入站。
- en: 'Configure the Description section:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置描述部分：
- en: '![](img/fb173fc2-32c5-41b3-90fc-6c85b20d1275.png)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fb173fc2-32c5-41b3-90fc-6c85b20d1275.png)'
- en: Inbound rule creation process
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 入站规则创建过程
- en: 'Build a Scoping filter:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 构建作用域筛选器：
- en: '[PRE1]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The configuration should look like this:'
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置应如下所示：
- en: '![](img/86d24fcd-d080-4e5c-a290-1920dae3d3d3.png)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![](img/86d24fcd-d080-4e5c-a290-1920dae3d3d3.png)'
- en: Scope filtering by department attribute
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 按部门属性进行范围筛选
- en: Leave the Join rules.
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保留加入规则。
- en: 'Go to Transformations and create a transformation:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到转换并创建转换：
- en: '[PRE2]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'This is shown in the following screenshot:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如下图所示：
- en: '![](img/b9f82382-29f6-4c97-b45f-5fa86026d9b8.png)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b9f82382-29f6-4c97-b45f-5fa86026d9b8.png)'
- en: Cloud filtering option
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 云筛选选项
- en: 'Save the rule and step through the following run profile steps in the synchronization
    manager:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存规则并按照同步管理器中的运行配置步骤执行：
- en: '**Delta** **Import**: AD Connector'
  id: totrans-204
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增量导入**：AD连接器'
- en: '**Delta Sync**: AD Connector'
  id: totrans-205
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增量同步**：AD连接器'
- en: '**Export**: AAD Connector'
  id: totrans-206
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**导出**：AAD连接器'
- en: '**Delta Import**: AAD Connector'
  id: totrans-207
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增量导入**：AAD连接器'
- en: '**Delta Sync**: AAD Connector'
  id: totrans-208
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增量同步**：AAD连接器'
- en: Verify that the human resources users are deleted in your Azure AD.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证人力资源用户是否已从你的Azure AD中删除。
- en: With the following example, you can block synchronizing the `thumbnailPhoto`
    with Azure AD. Furthermore, the configuration will also remove other uploaded
    `thumbnailPhotos`.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下示例，你可以阻止同步`thumbnailPhoto`与Azure AD。此外，配置还将删除其他上传的`thumbnailPhotos`。
- en: 'You can use the following PowerShell to configure the scenario:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用以下PowerShell脚本配置场景：
- en: '[PRE3]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Connecting Azure AD Connect to the second forest
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将Azure AD Connect连接到第二个森林
- en: Now that we've seen how the synchronization rules work, we can integrate an
    additional Active Directory forest to our configuration.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解同步规则如何工作，我们可以将另一个Active Directory森林集成到我们的配置中。
- en: 'Perform the following steps and use the mentioned scripts to configure your
    environment:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤并使用提到的脚本配置你的环境：
- en: 'Create the Demo Org Structure:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建示例组织结构：
- en: '[PRE4]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Create the Azure AD Connect AD Management Agent service account:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建Azure AD Connect AD管理代理服务账户：
- en: '[PRE5]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Create the **group managed service account** (**gMSA**) to run the AAD Connect:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建**组管理服务账户**（**gMSA**）以运行AAD Connect：
- en: '[PRE6]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Set the following rights for the AD Management Agent account on the domain level.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为AD管理代理账户在域级别设置以下权限。
- en: 'Configure the permissions to configure AAD Connect `svcaadcadma`:'
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置AAD Connect `svcaadcadma`的权限：
- en: Replicate Directory Changes
  id: totrans-224
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 复制目录更改
- en: 'Replicate Directory Changes All:'
  id: totrans-225
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 复制目录更改所有：
- en: '![](img/f1bd4fed-5b49-47f0-9bdc-9780377bf0f6.png)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f1bd4fed-5b49-47f0-9bdc-9780377bf0f6.png)'
- en: Active Directory MA service account permissions
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: Active Directory MA服务账户权限
- en: 'Enable the AD `Recycle Bin Feature`:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用AD `回收站功能`：
- en: '[PRE7]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Create your test users with the following in detailed viewed script:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下详细视图脚本创建你的测试用户：
- en: 'Import the Active Directory module:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入Active Directory模块：
- en: '[PRE8]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The script part auto-populates the currently used domain:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 脚本部分会自动填充当前使用的域：
- en: '[PRE9]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Declare any variables:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 声明任何变量：
- en: '[PRE10]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Import the CSV file:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入CSV文件：
- en: '[PRE11]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Create users:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建用户：
- en: '[PRE12]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Create the email addresses from `userPrincipalName` with the following script:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下脚本从`userPrincipalName`创建电子邮件地址：
- en: '[PRE13]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Create a DNS forwarder to your other domain, because Active Directory trust
    has been established:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 创建指向其他域的DNS转发器，因为已建立Active Directory信任：
- en: '![](img/f5c5b3e3-f8ee-4479-bfb0-25f7316ae2df.png)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f5c5b3e3-f8ee-4479-bfb0-25f7316ae2df.png)'
- en: DNS configuration for additional forests
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 附加林的 DNS 配置
- en: 'Configure the `ms-ds-consistencyGuid` permissions for the `svcaadcadma` service
    account:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 配置 `ms-ds-consistencyGuid` 权限给 `svcaadcadma` 服务帐户：
- en: '[PRE14]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Now that we''ve prepared our second Active Directory Forest, we can include
    it in our Azure AD Connect:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经准备好第二个 Active Directory 林，可以将其添加到 Azure AD Connect 中：
- en: 'Open the Azure AD Configuration wizard on the YD1ADS01 server:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 YD1ADS01 服务器上打开 Azure AD 配置向导：
- en: '![](img/d4cb4ee6-f653-4587-be93-8d58d7b60574.png)'
  id: totrans-250
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d4cb4ee6-f653-4587-be93-8d58d7b60574.png)'
- en: Start Menu–Azure AD Connect
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 开始菜单–Azure AD Connect
- en: 'Click Configure:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击配置：
- en: '![](img/595f64fc-5de8-4df7-b98d-5fe7dcc357e4.png)'
  id: totrans-253
  prefs: []
  type: TYPE_IMG
  zh: '![](img/595f64fc-5de8-4df7-b98d-5fe7dcc357e4.png)'
- en: Azure AD Connect configuration
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD Connect 配置
- en: 'Click Customize synchronization options:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击自定义同步选项：
- en: '![](img/8f157f0b-6ffc-470d-add7-5c94e79d240a.png)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8f157f0b-6ffc-470d-add7-5c94e79d240a.png)'
- en: Synchronization options customization
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 同步选项自定义
- en: 'Connect to Azure AD with global administrator rights:'
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用全局管理员权限连接到 Azure AD：
- en: '![](img/2eb5d7ff-bf07-43dd-acf8-c47e5fb4219d.png)'
  id: totrans-259
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2eb5d7ff-bf07-43dd-acf8-c47e5fb4219d.png)'
- en: Providing global administrator credentials for Azure AD connection
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 提供 Azure AD 连接的全局管理员凭证
- en: 'Connect the second forest:'
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接第二个林：
- en: '![](img/f32be88c-eaba-4075-a268-ed6100a7007b.png)'
  id: totrans-262
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f32be88c-eaba-4075-a268-ed6100a7007b.png)'
- en: Connecting the additional AD forest
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 连接附加的 AD 林
- en: 'Use the service account in the other forest to connect:'
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用另一个林中的服务帐户进行连接：
- en: '![](img/84d7704f-8765-4485-8d6f-b1070709de14.png)'
  id: totrans-265
  prefs: []
  type: TYPE_IMG
  zh: '![](img/84d7704f-8765-4485-8d6f-b1070709de14.png)'
- en: Using the AD Management Agent service account of the additional forest
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 使用附加林的 AD 管理代理服务帐户
- en: 'You should get a second AD that''s valid in your list:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的列表中应该出现第二个有效的 AD：
- en: '![](img/844b6838-eb87-4f7d-919e-be8f60dabd7a.png)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![](img/844b6838-eb87-4f7d-919e-be8f60dabd7a.png)'
- en: Valid connection overview
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 有效连接概述
- en: 'As we already verified the domain suffixes, our domain suffix is okay to sync:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们已经验证了域后缀，因此我们的域后缀可以同步：
- en: '![](img/935f1c09-7f02-4b38-a483-d03112998e60.png)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![](img/935f1c09-7f02-4b38-a483-d03112998e60.png)'
- en: Sign-in configuration option
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 登录配置选项
- en: 'Filter the OU you want to synchronize:'
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 过滤您希望同步的 OU：
- en: '![](img/8736bdb4-4f0a-4891-b842-2f6910f67085.png)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8736bdb4-4f0a-4891-b842-2f6910f67085.png)'
- en: Filtering the related objects
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 过滤相关对象
- en: 'Enable the following features to see the extended synchronization options:'
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用以下功能以查看扩展的同步选项：
- en: '![](img/57406061-97da-476f-9660-678a6ac1e0f8.png)'
  id: totrans-277
  prefs: []
  type: TYPE_IMG
  zh: '![](img/57406061-97da-476f-9660-678a6ac1e0f8.png)'
- en: Configuration of optional features—app and attribute filtering, password hash
    sync, and extension attributes
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 可选功能配置——应用和属性过滤、密码哈希同步以及扩展属性
- en: 'With this configuration, you can limit the attributes that get synced to Azure
    AD for specific workloads:'
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用此配置，您可以限制同步到 Azure AD 的属性，以适应特定工作负载：
- en: '![](img/7803efa0-5220-410a-a6f5-435ded822c1f.png)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7803efa0-5220-410a-a6f5-435ded822c1f.png)'
- en: App filtering options
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 应用过滤选项
- en: 'Choose which attributes get exported:'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要导出的属性：
- en: '![](img/4654b2e7-a7ff-465e-9efe-e518387c5da7.png)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4654b2e7-a7ff-465e-9efe-e518387c5da7.png)'
- en: extensionAttribute limitations
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: extensionAttribute 限制
- en: 'Choose some additional attributes, but keep in mind that not all services will
    get these attributes:'
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一些附加属性，但请记住，并非所有服务都会获取这些属性：
- en: '![](img/cd50b7fa-4d21-4776-a9e3-12b8719cd336.png)'
  id: totrans-286
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cd50b7fa-4d21-4776-a9e3-12b8719cd336.png)'
- en: Directory extension implementation
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 目录扩展实现
- en: Never start the synchronization directly—Initial load is always a manual stepping
    process that's used to avoid errors.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 永远不要直接启动同步——初始加载始终是手动逐步过程，用于避免错误。
- en: 'We''re ready to start the configuration, so click Configure:'
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们准备好开始配置，点击配置：
- en: '![](img/4d3f9211-4557-448d-b07b-18e79c678db7.png)'
  id: totrans-290
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4d3f9211-4557-448d-b07b-18e79c678db7.png)'
- en: Final configuration step
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 最终配置步骤
- en: Close the configuration assistant.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭配置助手。
- en: 'Let''s start stepping through the initial load of the new Active Directory
    forest, so open the Synchronization Service Manager:'
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们开始处理新 Active Directory 林的初始加载，打开同步服务管理器：
- en: '![](img/1c684d19-220a-474c-954a-f7cf88a6e2ad.png)'
  id: totrans-294
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1c684d19-220a-474c-954a-f7cf88a6e2ad.png)'
- en: Connected directories overview
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 已连接目录概述
- en: 'Start the initial load with the following steps—and control every step:'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下步骤启动初始加载——并控制每个步骤：
- en: Run a full import on all AD Forests
  id: totrans-297
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对所有 AD 林进行完全导入
- en: Run a full import on AAD
  id: totrans-298
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对 AAD 进行完全导入
- en: Run a full sync on all AD Forests
  id: totrans-299
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对所有 AD 林进行完全同步
- en: Run a full sync on Azure AD
  id: totrans-300
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对 Azure AD 进行完全同步
- en: Run an Export on AAD
  id: totrans-301
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对 AAD 进行导出
- en: Run an Export on all AD Forests
  id: totrans-302
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对所有 AD 林进行导出
- en: Yeah! We connected our new forest under complete control. Congrats!
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 太棒了！我们已完全控制并连接了新的林，恭喜！
- en: The authentication part for this will be described in [Chapter 7](468509fa-856c-411d-abdb-e9a39c266750.xhtml), *Deploying
    Solutions on Azure AD and ADFS*, [Chapter 8](efbe1917-c755-4449-b29e-fa4a21e819fd.xhtml), *Using
    the Azure AD App Proxy and the Web Application Proxy*, and [Chapter 10](6b29475f-7917-49bf-91d4-3024835d0278.xhtml), *Exploring
    Azure AD Identity Services*.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 认证部分将在[第7章](468509fa-856c-411d-abdb-e9a39c266750.xhtml)，*在 Azure AD 和 ADFS 上部署解决方案*，[第8章](efbe1917-c755-4449-b29e-fa4a21e819fd.xhtml)，*使用
    Azure AD 应用代理和 Web 应用代理*，以及[第10章](6b29475f-7917-49bf-91d4-3024835d0278.xhtml)，*探索
    Azure AD 身份服务*中描述。
- en: Keep an eye out for the ADFS B2B configuration with a claim's provider trust
    in [Chapter 10](6b29475f-7917-49bf-91d4-3024835d0278.xhtml), *Exploring Azure
    AD Identity Services*.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 请留意在[第10章](6b29475f-7917-49bf-91d4-3024835d0278.xhtml)中，*探索 Azure AD 身份服务*的
    ADFS B2B 配置与声明提供者信任。
- en: Summary
  id: totrans-306
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you learned about declarative provisioning and how synchronization
    rules work. We explored practical examples to learn how to use standard sync rules
    and how to create our own. You also learned how to use PowerShell to configure
    synchronization rules and block/delete attributes to and in Azure AD. With the
    integration of another untrusted Active Directory, you saw the standard procedure
    to do this and to customize your synchronization options to define precisely what
    should happen in your environment.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你了解了声明式配置和同步规则的工作原理。我们通过实际示例探讨了如何使用标准同步规则以及如何创建我们自己的规则。你还学会了如何使用 PowerShell
    配置同步规则和阻止/删除 Azure AD 中的属性。通过集成另一个不受信任的 Active Directory，你看到了执行此操作的标准程序，并且如何定制你的同步选项，以精确定义在你的环境中应该发生的情况。
- en: In the next chapter, we'll show you how to monitor your synchronization solution.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将展示如何监控你的同步解决方案。
