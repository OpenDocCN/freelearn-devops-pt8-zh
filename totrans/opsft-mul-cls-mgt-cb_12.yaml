- en: '12'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '12'
- en: OpenShift Multi-Cluster Security
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OpenShift多集群安全
- en: In [*Chapter 8*](B18015_08.xhtml#_idTextAnchor153), *OpenShift Security*, we
    discussed some important aspects you may consider for defining and implementing
    security policies for your OpenShift cluster. We went through aspects such as
    authentication and authorization, certifications and encryption, container and
    network isolation, and others. If you haven't gone through that chapter yet, we
    encourage you to take a look now before reading this one.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第8章*](B18015_08.xhtml#_idTextAnchor153)《OpenShift安全》一章中，我们讨论了在为您的OpenShift集群定义和实施安全策略时可能需要考虑的一些重要方面。我们涵盖了身份验证和授权、证书和加密、容器与网络隔离等方面。如果您还没有阅读该章节，建议在阅读本章之前先看一下。
- en: Implementing security policies on OpenShift is important, but not really complicated
    in general – most policies’ configuration is straightforward and well documented.
    Things become more complicated when you scale your infrastructure to several clusters
    though. How can you be sure that all the containers that run on top of several
    clusters are using secure and certified base images? Do you know how compliant
    all your environments are according to industry and regulatory standards such
    as PCI and HIPAA? To help you to monitor and maximize your OpenShift and Kubernetes
    clusters’ security, we will introduce in this chapter Red Hat **Advanced Cluster
    Security** (**ACS**).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在OpenShift上实施安全策略很重要，但一般来说并不复杂——大多数策略的配置是直接且有良好文档的。然而，当您将基础设施扩展到多个集群时，事情就变得更加复杂了。那么，如何确保在多个集群上运行的所有容器都使用安全且经过认证的基础镜像呢？您是否知道所有环境在行业和监管标准（如PCI和HIPAA）下的合规性情况？为了帮助您监控和最大化OpenShift和Kubernetes集群的安全性，本章将介绍红帽**高级集群安全**（**ACS**）。
- en: 'Therefore, you will find the following topics covered in this chapter:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，本章将涵盖以下主题：
- en: What is Red Hat Advanced Cluster Security?
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是红帽高级集群安全？
- en: Red Hat Advanced Cluster Security installation
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 红帽高级集群安全安装
- en: Adding secured clusters
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加安全集群
- en: Policies and violations
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 策略和违规
- en: Vulnerability management
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞管理
- en: Risk profiling
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 风险评估
- en: Configuration management
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置管理
- en: Network segmentation
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络分段
- en: Let’s dive into it now!
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在深入了解吧！
- en: What is Red Hat Advanced Cluster Security?
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是红帽高级集群安全？
- en: 'Red Hat Advanced Cluster Security, also known as StackRox, is a Kubernetes-native
    security tool that provides the following features:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 红帽高级集群安全，也称为StackRox，是一款原生Kubernetes安全工具，提供以下功能：
- en: '**Policies and violations**: Defines security policies and has a report of
    all violation events in real time. You can define your own policies and/or use
    dozens of policies that come out of the box.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**策略和违规**：定义安全策略，并实时报告所有违规事件。您可以定义自己的策略和/或使用内置的数十个策略。'
- en: '**Vulnerability management**: Detects known vulnerabilities in your clusters
    to give you the weapons you need to remediate and prevent security issues.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**漏洞管理**：检测集群中的已知漏洞，提供修复和预防安全问题所需的工具。'
- en: '**Risk profiling**: Assesses the risk of your environment and classifies applications
    according to their security risk.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**风险评估**：评估您的环境风险，并根据安全风险对应用程序进行分类。'
- en: '**Compliance**: Reports the compliance of your clusters according to some industry-standard
    security profiles.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**合规性**：根据一些行业标准的安全配置文件报告集群的合规性。'
- en: '**Configuration management**: Helps you to make sure your deployments follow
    the security best practices.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**配置管理**：帮助您确保部署符合安全最佳实践。'
- en: '**Network segmentation**: Views the network traffic between different namespaces
    and allows you to create Network Policies to restrict and isolate traffic.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网络分段**：查看不同命名空间之间的网络流量，并允许您创建网络策略以限制和隔离流量。'
- en: Recent research conducted by *KuppingerCole* recognized Red Hat Advanced Cluster
    Security as the overall leader in the Kubernetes security segment. It is indeed
    a great product that is included with the **Red Hat OpenShift Plus** offering,
    which we will discuss in more detail in the next chapter. In the *Further reading*
    section of this chapter, you can find a link to *KuppingerCole’s* research.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，*KuppingerCole*进行的研究将红帽高级集群安全评为Kubernetes安全领域的领导者。它确实是一款优秀的产品，并包含在**Red Hat
    OpenShift Plus**产品中，下一章我们将更详细地讨论这个产品。在本章的*进一步阅读*部分，您可以找到指向*KuppingerCole*研究的链接。
- en: We encourage you to experiment with ACS if you have an active OpenShift Plus
    subscription or reach out to Red Hat’s account team that covers your company for
    more information about it.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有有效的OpenShift Plus订阅，或者可以联系覆盖你公司地区的Red Hat账户团队获取更多信息，我们鼓励你尝试使用ACS。
- en: Red Hat Advanced Cluster Security installation
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Red Hat高级集群安全安装
- en: 'The installation process of ACS is similar to what you have seen in the last
    chapter with ACM: through an Operator. However, you can also install it using
    **Helm charts** or the **roxctl** CLI. In this book, we will use the Operator
    installation; if you want more information about the Helm or roxctl installation
    process, refer to the official documentation. You can find links to the official
    documentation in the *Further reading* section of this chapter.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: ACS的安装过程与上一章你在ACM中看到的类似：通过一个操作员。然而，你也可以使用**Helm charts**或**roxctl** CLI进行安装。在本书中，我们将使用操作员安装；如果你想了解更多关于Helm或roxctl安装过程的信息，请参考官方文档。你可以在本章的*Further
    reading*部分找到官方文档的链接。
- en: To install ACS using the operator, proceed as follows.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用操作员安装ACS，请按以下步骤进行。
- en: Prerequisites
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 前提条件
- en: You will need access to an OpenShift cluster with cluster-admin permissions.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你需要访问具有集群管理员权限的OpenShift集群。
- en: Operator installation
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作员安装
- en: Follow the next steps to get the ACS operator ready for use:.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤准备ACS操作员：
- en: Access the OpenShift Web Console using the Administrator’s perspective.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用管理员视角访问OpenShift Web控制台。
- en: Navigate to the **Operators** | **OperatorHub** menu item.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**Operators** | **OperatorHub**菜单项。
- en: '![Figure 12.1 – OperatorHub ](img/B18015_12_01.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![图12.1 – OperatorHub](img/B18015_12_01.jpg)'
- en: Figure 12.1 – OperatorHub
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.1 – OperatorHub
- en: Search for `Advanced Cluster Security for Kubernetes` using the *Filter by keyword...*
    box.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用*Filter by keyword...*框搜索`Advanced Cluster Security for Kubernetes`。
- en: '![Figure 12.2 – Advanced Cluster Security for Kubernetes on OperatorHub ](img/B18015_12_02.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图12.2 – OperatorHub上的高级集群安全](img/B18015_12_02.jpg)'
- en: Figure 12.2 – Advanced Cluster Security for Kubernetes on OperatorHub
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.2 – OperatorHub上的高级集群安全
- en: Click on the **Advanced Cluster Security for Kubernetes** tile and on the **Install**
    button to see the **Install Operator** screen.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**Advanced Cluster Security for Kubernetes**模块并点击**Install**按钮以查看**Install
    Operator**界面。
- en: '![Figure 12.3 – Installing Advanced Cluster Security for Kubernetes ](img/B18015_12_03.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![图12.3 – 为Kubernetes安装高级集群安全](img/B18015_12_03.jpg)'
- en: Figure 12.3 – Installing Advanced Cluster Security for Kubernetes
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.3 – 为Kubernetes安装高级集群安全
- en: Don’t change the default namespace (`rhacs-operator`).
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不要更改默认命名空间（`rhacs-operator`）。
- en: Select **Automatic** or **Manual** for the upgrades **Approval Strategy**. If
    you select **Automatic**, upgrades will be performed automatically by the **Operator
    Lifecycle Manager** (**OLM**) as soon as they are released by Red Hat, while in
    **Manual**, you need to approve upgrades before being applied.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**Automatic**或**Manual**作为升级**批准策略**。如果选择**Automatic**，升级将在Red Hat发布后由**Operator
    Lifecycle Manager**（**OLM**）自动执行，而选择**Manual**时，你需要在升级应用之前进行批准。
- en: Select the proper **Update channel**. The latest channel is recommended as it
    contains the latest stable and *supported* version of the operator.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择正确的**更新通道**。建议选择最新通道，因为它包含操作员的最新稳定版和*支持的*版本。
- en: Click the **Install** button.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**Install**按钮。
- en: '![Figure 12.4 – Installing the operator ](img/B18015_12_04.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![图12.4 – 安装操作员](img/B18015_12_04.jpg)'
- en: Figure 12.4 – Installing the operator
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.4 – 安装操作员
- en: 'Wait up to 5 minutes until you see the following message:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 等待最多5分钟，直到你看到以下消息：
- en: '![Figure 12.5 – Operator installed ](img/B18015_12_05.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![图12.5 – 操作员已安装](img/B18015_12_05.jpg)'
- en: Figure 12.5 – Operator installed
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.5 – 操作员已安装
- en: Now that we have the operator installed, the next step is to deploy the ACS
    Central custom resource. See next how to do it.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经安装了操作员，下一步是部署ACS Central自定义资源。请参见下一步如何操作。
- en: ACS Central installation
  id: totrans-51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ACS Central安装
- en: 'We can now go ahead and deploy a new ACS *Central* instance:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以继续部署一个新的ACS*Central*实例：
- en: Click on the **View Operator** button or navigate to the **Operators** | **Installed
    Operators** menu and click on **Advanced Cluster Security for Kubernetes**.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**View Operator**按钮，或导航到**Operators** | **Installed Operators**菜单，点击**Advanced
    Cluster Security for Kubernetes**。
- en: Access the **Central** tab and click on the **Create Central** button.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问**Central**标签页并点击**Create Central**按钮。
- en: '![Figure 12.6 – Creating a new ACS Central instance ](img/B18015_12_06.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![图12.6 – 创建新的ACS Central实例](img/B18015_12_06.jpg)'
- en: Figure 12.6 – Creating a new ACS Central instance
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.6 – 创建新的 ACS 中央实例
- en: Usually, no changes are needed, so leave the default values and click on the
    **Create** button. Check out the link in the *Further reading* section of this
    chapter for product documentation for more information if you need to configure
    some advanced settings.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通常无需更改任何设置，因此保留默认值并点击 **Create** 按钮。如果您需要配置一些高级设置，请查看本章 **Further reading**
    部分的链接，获取更多产品文档信息。
- en: '![Figure 12.7 – Create ACS Central ](img/B18015_12_07.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.7 – 创建 ACS 中央](img/B18015_12_07.jpg)'
- en: Figure 12.7 – Create ACS Central
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.7 – 创建 ACS 中央
- en: 'Wait a few seconds until you see the **Conditions: Deployed, Initialized**
    status.'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '等待几秒钟，直到您看到 **Conditions: Deployed, Initialized** 状态。'
- en: '![Figure 12.8 – ACS Central installed ](img/B18015_12_08.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.8 – ACS 中央已安装](img/B18015_12_08.jpg)'
- en: Figure 12.8 – ACS Central installed
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.8 – ACS 中央已安装
- en: To access the recently created ACS Central portal, you need to first get the
    admin credentials. To do so, navigate to `rhacs-operator` project and click on
    the `central-htpasswd` secret.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要访问最近创建的 ACS 中央门户，您首先需要获取管理员凭证。为此，请导航至 `rhacs-operator` 项目并点击 `central-htpasswd`
    密钥。
- en: '![Figure 12.9 – Admin credentials secret ](img/B18015_12_09.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.9 – 管理员凭证密钥](img/B18015_12_09.jpg)'
- en: Figure 12.9 – Admin credentials secret
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.9 – 管理员凭证密钥
- en: Scroll down and click on **Reveal values**. Copy the value in the **password**
    field.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动并点击 **Reveal values**。复制 **password** 字段中的值。
- en: '![Figure 12.10 – Copy the admin password ](img/B18015_12_10.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.10 – 复制管理员密码](img/B18015_12_10.jpg)'
- en: Figure 12.10 – Copy the admin password
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.10 – 复制管理员密码
- en: 'Now go to **Networking** | **Routes** to get the ACS Central URL:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，转到 **Networking** | **Routes** 获取 ACS 中央 URL：
- en: '![Figure 12.11 – ACS Central URL ](img/Image91621.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.11 – ACS 中央 URL](img/Image91621.jpg)'
- en: Figure 12.11 – ACS Central URL
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.11 – ACS 中央 URL
- en: Use the admin username and the password you copied from the secret.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用管理员用户名和从密钥中复制的密码。
- en: '![Figure 12.12 – Red Hat ACS login page ](img/B18015_12_12.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.12 – Red Hat ACS 登录页面](img/B18015_12_12.jpg)'
- en: Figure 12.12 – Red Hat ACS login page
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.12 – Red Hat ACS 登录页面
- en: You now have Red Hat Advanced Cluster Security installed. You will notice though
    that we don’t have any clusters under ACS management. We will add a managed cluster
    (also known as secured cluster) in the next steps.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已经安装了 Red Hat 高级集群安全。您会注意到，当前 ACS 下没有任何集群。我们将在接下来的步骤中添加一个受管理集群（也叫受保护集群）。
- en: '![Figure 12.13 – Red Hat ACS initial page ](img/B18015_12_13.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.13 – Red Hat ACS 初始页面](img/B18015_12_13.jpg)'
- en: Figure 12.13 – Red Hat ACS initial page
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.13 – Red Hat ACS 初始页面
- en: Continue reading to see how to add secured clusters on ACS.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 继续阅读，了解如何在 ACS 上添加受保护集群。
- en: Adding secured clusters
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加受保护集群
- en: '**Secured cluster** is the term used to refer to a cluster under ACS management.
    ACS Central works as a control plane where you will create the policies and visualize
    violations, compliance, and all the features that we will walk through later in
    this chapter; while an ACS secured cluster is a set of ACS processes (**AdmissionControl**,
    **Scanner**, **Sensor**, and **Collector**) that run on managed clusters to monitor
    and enforce policies.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '**Secured cluster** 是指受 ACS 管理的集群。ACS 中央作为控制平面，您将在其中创建策略并可视化违规、合规性及本章后续将介绍的所有功能；而
    ACS 受保护集群是一组在受管集群上运行的 ACS 进程（**AdmissionControl**、**Scanner**、**Sensor** 和 **Collector**），用于监控和执行策略。'
- en: '![Figure 12.14 – ACS Central/secured cluster ](img/B18015_12_14.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.14 – ACS 中央/受保护集群](img/B18015_12_14.jpg)'
- en: Figure 12.14 – ACS Central/secured cluster
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.14 – ACS 中央/受保护集群
- en: 'The process of adding secured clusters on ACS Central comprises the following
    steps:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在 ACS 中央添加受保护集群的过程包括以下步骤：
- en: Generate an `init` bundle on ACS Central.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 ACS 中央生成 `init` 捆绑包。
- en: Run the `init` bundle.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行 `init` 捆绑包。
- en: Create a `SecuredCluster` custom resource in the ACS operator.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 ACS 操作员中创建 `SecuredCluster` 自定义资源。
- en: 'To perform the previous steps and add a secured cluster, run the following
    steps in **ACS Central**:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行前面的步骤并添加受保护集群，请在 **ACS 中央** 中执行以下步骤：
- en: 'Access the **Platform Configuration** | **Integrations** menu:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问 **Platform Configuration** | **Integrations** 菜单：
- en: '![Figure 12.15 – Generating an init bundle ](img/B18015_12_15.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.15 – 生成初始化捆绑包](img/B18015_12_15.jpg)'
- en: Figure 12.15 – Generating an init bundle
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.15 – 生成初始化捆绑包
- en: Scroll down and click on **Authentication Tokens** | **Cluster Init Bundle**.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动并点击 **Authentication Tokens** | **Cluster Init Bundle**。
- en: '![Figure 12.16 – Generating an init bundle ](img/B18015_12_16.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.16 – 生成初始化捆绑包](img/B18015_12_16.jpg)'
- en: Figure 12.16 – Generating an init bundle
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.16 – 生成初始化包
- en: 'Click on **Generate bundle**, give it a name, and click on the **Download Kubernetes
    secrets file** button:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **生成包**，为其命名，并点击 **下载 Kubernetes 秘密文件** 按钮：
- en: '![Figure 12.17 – Generating the init bundle ](img/B18015_12_17.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.17 – 生成初始化包 ](img/B18015_12_17.jpg)'
- en: Figure 12.17 – Generating the init bundle
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.17 – 生成初始化包
- en: Now, access the OpenShift cluster that you want to add as a secured cluster
    (not ACS Central).
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，访问你想要添加为受保护集群的 OpenShift 集群（不是 ACS Central）。
- en: 'Using a terminal with the `oc` CLI, run the following command. Note that you
    need to run this command in the secured cluster and not on ACS Central:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用带有 `oc` CLI 的终端，运行以下命令。请注意，你需要在受保护集群中运行此命令，而不是在 ACS Central 上运行：
- en: '[PRE0]'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Install the ACS operator in the secured cluster following the same steps we
    performed in the *Operator installation* section of this chapter. Note that this
    time, we are installing the operator in the secured cluster.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照本章 *操作员安装* 部分中我们执行的相同步骤，在受保护集群中安装 ACS 操作员。请注意，这次我们是在受保护集群中安装操作员。
- en: '![Figure 12.18 – ACS Operator installed in the ACS secured cluster ](img/B18015_12_18.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.18 – ACS 操作员安装在 ACS 受保护集群中 ](img/B18015_12_18.jpg)'
- en: Figure 12.18 – ACS Operator installed in the ACS secured cluster
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.18 – ACS 操作员安装在 ACS 受保护集群中
- en: 'Still in the OpenShift secured cluster, navigate to **Operators** | **Installed
    Operators** and click on **Advanced Cluster Security for Kubernetes**. On this
    page, access the **Secured Cluster** tab:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 仍然在 OpenShift 受保护集群中，导航至 **操作员** | **已安装操作员**，点击 **Kubernetes 高级集群安全**。在此页面上，访问
    **受保护集群** 标签页：
- en: '![Figure 12.19 – Creating a new secured cluster ](img/B18015_12_19.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.19 – 创建一个新的受保护集群 ](img/B18015_12_19.jpg)'
- en: Figure 12.19 – Creating a new secured cluster
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.19 – 创建一个新的受保护集群
- en: 'Click on the **Create SecuredCluster** button. On this page, give the cluster
    a name, add the ACS Central URL, and click on the **Create** button:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **创建 SecuredCluster** 按钮。在此页面中，给集群命名，添加 ACS Central URL，并点击 **创建** 按钮：
- en: '![Figure 12.20 – Adding a secured cluster ](img/B18015_12_20.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.20 – 添加受保护集群 ](img/B18015_12_20.jpg)'
- en: Figure 12.20 – Adding a secured cluster
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.20 – 添加受保护集群
- en: Important Note
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Always add the `port (:443`) in **Central Endpoint**. The secured cluster sensor
    and scanner may fail if you don’t specify the port.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 始终在 **Central Endpoint** 中添加 `port (:443)`。如果没有指定端口，受保护集群的传感器和扫描器可能会失败。
- en: 'Wait up to 10 minutes for **ACS Collector**, **Sensor**, and **AdmissionControl**
    to spin up in the managed cluster. To check the status of the ACS managed cluster,
    access ACS Central and navigate to **Platform Configuration** | **Clusters**.
    The cluster should be marked in green as **Healthy**:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 等待最多 10 分钟，直到 **ACS Collector**、**Sensor** 和 **AdmissionControl** 在管理集群中启动。要检查
    ACS 管理集群的状态，访问 ACS Central 并导航到 **平台配置** | **集群**。该集群应以绿色标记为 **Healthy**（健康状态）：
- en: '![Figure 12.21 – Secured cluster health ](img/B18015_12_21.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.21 – 受保护集群健康状态 ](img/B18015_12_21.jpg)'
- en: Figure 12.21 – Secured cluster health
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.21 – 受保护集群健康状态
- en: Note
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: It is normal to see **Cluster Status** as **Degraded** during the secured cluster
    deployment. Wait up to 10 minutes for it to be **Healthy**. Refresh your browser
    to check the latest status.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在受保护集群部署期间，看到 **集群状态** 为 **Degraded**（降级）是正常的。等待最多 10 分钟，直到它变为 **Healthy**（健康）。刷新浏览器以检查最新状态。
- en: 'We now have what we need to start using ACS: **ACS Central** monitoring one
    secured cluster. Continue to the next section to find out more about the ACS policies
    and violation features.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们拥有了开始使用 ACS 所需的所有内容：**ACS Central** 正在监控一个受保护的集群。继续阅读下一部分，了解更多关于 ACS 策略和违规功能的信息。
- en: Policies and violations
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 策略与违规
- en: ACS comes with dozens of security policies defined out of the box that you can
    just start using and also allows you to define custom security policies for your
    Kubernetes clusters. You can also easily check what policies are violated using
    the **Violations** feature.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: ACS 提供了多个开箱即用的安全策略，你可以直接使用，也可以为你的 Kubernetes 集群定义自定义安全策略。你还可以轻松检查哪些策略被违反，使用
    **Violations** 功能。
- en: In this section, we will see how to view and create policies and also walk through
    the Violations feature.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习如何查看和创建策略，并深入了解 Violations 功能。
- en: Security policies
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安全策略
- en: 'To access the security policies, navigate to **Platform Configuration** | **Policies**.
    All out-of-the-box policies will be listed in this view:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问安全策略，请导航至 **平台配置** | **策略**。所有开箱即用的策略将在此视图中列出：
- en: '![Figure 12.22 – Security policies ](img/B18015_12_22.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.22 – 安全策略 ](img/B18015_12_22.jpg)'
- en: Figure 12.22 – Security policies
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.22 – 安全策略
- en: 'Let’s use a simple policy to learn how a security policy works on ACS. In the
    `Policy` and hit *Enter*; then type `admin secret` and hit *Enter* again to find
    the `OpenShift: Advanced Cluster Security Central Admin Secret Accessed` policy:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '让我们使用一个简单的策略来了解安全策略如何在 ACS 上工作。输入`Policy`并按*Enter*，然后输入`admin secret`并再次按*Enter*，以查找`OpenShift:
    Advanced Cluster Security Central Admin Secret Accessed`策略：'
- en: '![Figure 12.23 – Latest tag policy ](img/B18015_12_23.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.23 – 最新标签策略](img/B18015_12_23.jpg)'
- en: Figure 12.23 – Latest tag policy
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.23 – 最新标签策略
- en: 'Now click on the link to see the **Policy details** page:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 现在点击链接查看**策略详情**页面：
- en: '![Figure 12.24 – Policy details ](img/B18015_12_24.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.24 – 策略详情](img/B18015_12_24.jpg)'
- en: Figure 12.24 – Policy details
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.24 – 策略详情
- en: On this page, you will find policy details, such as **Description**, **Type**,
    and so on. Let’s go ahead and click on **Actions** | **Edit policy** to take a
    look at what we can set up as part of a policy.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在此页面上，您将找到策略详细信息，例如**描述**、**类型**等。让我们点击**操作** | **编辑策略**，查看我们可以作为策略一部分设置的内容。
- en: '![Figure 12.25 – Editing policy details ](img/B18015_12_25.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.25 – 编辑策略详情](img/B18015_12_25.jpg)'
- en: Figure 12.25 – Editing policy details
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.25 – 编辑策略详情
- en: The first screen we see is **Policy details**. On this page, you can change
    general policy information, such as **Name**, the **Severity** level, **Categories**,
    and **Description**.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到的第一个屏幕是**策略详情**。在此页面上，您可以更改一般策略信息，如**名称**、**严重性**级别、**类别**和**描述**。
- en: MITRE ATT&CK
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK
- en: MITRE ATT&CK® is a knowledge base of tactics and techniques that are used often
    in cyberattacks on Kubernetes. First published by Microsoft in April 2020, it
    is a great source of security best practices for Kubernetes. ACS allows you to
    classify security policies according to the MITRE ATT&CK® matrix. If you want
    to learn more about this framework, check the links in the *Further reading* section
    at the end of this chapter.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK® 是一个关于战术和技术的知识库，这些战术和技术常常在针对 Kubernetes 的网络攻击中被使用。该知识库于 2020 年
    4 月由微软首次发布，是 Kubernetes 安全最佳实践的重要来源。ACS 允许您根据 MITRE ATT&CK® 矩阵对安全策略进行分类。如果你想了解更多关于该框架的信息，可以查看本章末尾的*进一步阅读*部分中的链接。
- en: 'The next screen is **Policy behavior**, which defines how the policy should
    be applied:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个屏幕是**策略行为**，它定义了策略应该如何应用：
- en: '![Figure 12.26 – Policy behavior ](img/B18015_12_26.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.26 – 策略行为](img/B18015_12_26.jpg)'
- en: Figure 12.26 – Policy behavior
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.26 – 策略行为
- en: 'The life cycle stages define to which stage the policy applies:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 生命周期阶段定义了策略应用于哪个阶段：
- en: '**Build**: Policy applied during the build of a container image. Used in general
    as part of a CI pipeline for static analysis of YAML Kubernetes manifests or Dockerfile
    instructions.'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**构建**：在容器镜像构建过程中应用的策略。通常作为 CI 流水线的一部分，用于对 YAML Kubernetes 清单或 Dockerfile 指令进行静态分析。'
- en: '**Deploy**: Policies in this stage will be fired during the application deployment
    and will inform or even block the deployment if it violates the policy, depending
    on what you configured in **Response method**.'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**部署**：此阶段的策略将在应用程序部署时触发，并根据您在**响应方法**中配置的内容，在策略违规时会通知或甚至阻止部署。'
- en: '**Runtime**: Policy applied during runtime. For runtime policies, you can define
    whether **Event source** will be from **Deployment** or **Audit logs**. With the
    **Deployment** event source, you can inform and block application deployments
    that violate the policy, while **Audit logs** is used to monitor Kubernetes API
    calls against **Secrets** and **ConfigMaps**, to search for suspicious activities,
    such as sensitive passwords being read – this is exactly what is done by the policy
    we are using in this example.'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**运行时**：在运行时应用的策略。对于运行时策略，您可以定义**事件来源**是来自**部署**还是**审计日志**。选择**部署**事件来源时，您可以通知并阻止违反策略的应用程序部署，而**审计日志**用于监控
    Kubernetes API 调用与**机密**和**配置映射**，以查找可疑活动，如敏感密码被读取——这正是我们在本示例中使用的策略所执行的任务。'
- en: 'You also can set up **Response method** for one of the following:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以为以下之一设置**响应方法**：
- en: '**Inform**: Only inform the violation by adding it as an item in the **Violations**
    feature.'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**通知**：仅通过将违规项添加到**违规**功能中来通知违规。'
- en: '**Inform and enforce**: Besides adding it to the violation list, it also enforces
    the following behavior, depending on the stage selected under Lifecycle stages:'
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**通知并强制执行**：除了将其添加到违规列表中外，还会根据生命周期阶段选择的内容强制执行以下行为：'
- en: '**Fails CI builds** if the **Build** stage is selected.'
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果选择**构建**阶段，则会**失败 CI 构建**。
- en: '**Blocks an application deployment** that violates the policy if the **Deploy**
    phase is selected.'
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**阻止**违反策略的应用部署，如果选择了**部署**阶段。'
- en: '**Kills pods** that violate the policy if the **Runtime** stage is selected.'
  id: totrans-148
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**终止**违反策略的pod，如果选择了**运行时**阶段。'
- en: 'The next step describes the policy criteria that will define the policy:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步描述将定义该策略的标准：
- en: '![Figure 12.27 – Editing policy criteria ](img/B18015_12_27.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.27 – 编辑策略标准](img/B18015_12_27.jpg)'
- en: Figure 12.27 – Editing policy criteria
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.27 – 编辑策略标准
- en: '**Policy criteria** differ according to **the event source**. When the event
    source is **Deployment**, then you can create Boolean logic based on a large set
    of entities related to the image, container configuration, metadata, storage,
    network, container runtime processes, and Kubernetes events. We encourage you
    to access different policies to check the different types of policy criteria available
    from existing policies.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '**策略标准**根据**事件源**的不同而有所不同。当事件源为**部署**时，您可以根据与图像、容器配置、元数据、存储、网络、容器运行时进程和Kubernetes事件相关的大量实体创建布尔逻辑。我们鼓励您访问不同的策略，以检查现有策略中可用的不同类型的策略标准。'
- en: 'When the event source is **Audit logs**, the criteria are defined in terms
    of Kubernetes API events. Let’s check the policy that we are using as an example
    to learn how audit logs-based policy criteria work. In our example, the following
    criteria are used:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 当事件源为**审计日志**时，标准根据Kubernetes API事件来定义。让我们检查一下我们作为示例使用的策略，以了解基于审计日志的策略标准是如何工作的。在我们的示例中，使用了以下标准：
- en: '`Kubernetes resource`: **Secrets**'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Kubernetes 资源`：**密钥**'
- en: '`Kubernetes API verb`: **GET**, **PATCH**, or **UPDATE**'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Kubernetes API 动词`：**GET**、**PATCH**或**UPDATE**'
- en: '`Kubernetes resource name`: `central-htpasswd`'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Kubernetes 资源名称`：`central-htpasswd`'
- en: '`Kubernetes user name is NOT`: `system:serviceaccount:openshift-authentication-operator:rhacs-operator-controller-manager`'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Kubernetes 用户名不是`：`system:serviceaccount:openshift-authentication-operator:rhacs-operator-controller-manager`'
- en: This means that a violation will be raised when the `central-htpasswd` secret
    is either `GET`) or `PATCH` or `UPDATE`) by *any user other than the* `rhacs-operator-controller-manager
    service account`.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着当`central-htpasswd`密钥被*任何非*`rhacs-operator-controller-manager service account`的用户`GET`、`PATCH`或`UPDATE`时，将会触发违规。
- en: 'You can also set the policy scope if you want:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，您还可以设置策略范围：
- en: Restrict the policy to only specific clusters, namespaces, or labels.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将策略限制为特定的集群、命名空间或标签。
- en: Alternatively, exclude entities from the policy.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 或者，排除策略中的实体。
- en: 'Exclude images to be checked during the **Build** stage:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**构建**阶段排除需要检查的图像：
- en: '![Figure 12.28 – Exclude or restrict entities and images from policy ](img/B18015_12_28.jpg)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.28 – 从策略中排除或限制实体和图像](img/B18015_12_28.jpg)'
- en: Figure 12.28 – Exclude or restrict entities and images from policy
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.28 – 从策略中排除或限制实体和图像
- en: This concludes the configurations you will find in a policy. It is not that
    difficult, right? We encourage you to create some custom policies to practice
    and learn from them.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是您在策略中会找到的配置。其实并不难，对吧？我们鼓励您创建一些自定义策略来练习并从中学习。
- en: Violations
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 违规
- en: 'The **Violations** feature lists all security policies that have been violated
    in the clusters monitored by ACS:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '**违规**功能列出了ACS监控的集群中所有违反的安全策略：'
- en: '![Figure 12.29 – Violations list ](img/B18015_12_29.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.29 – 违规列表](img/B18015_12_29.jpg)'
- en: Figure 12.29 – Violations list
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.29 – 违规列表
- en: 'Remember that we read `central-htpasswd` in *step 15* of the *ACS Central installation*
    section to get the ACS Central admin password. That raised a violation due to
    the policy we used as an example previously (`GET` *API of* `central-htpasswd`
    *secret*). Click on some of the violations you see on this page to explore the
    feature and learn about the events and data that are captured and shown by the
    ACS **Violations** feature:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，我们在*ACS Central安装*部分的*步骤15*中读取了`central-htpasswd`，以获取ACS Central管理员密码。由于我们之前使用的策略（`GET`
    *API的* `central-htpasswd` *密钥*），这引发了一个违规。在此页面上点击一些违规项，探索此功能并了解ACS **违规**功能所捕获和显示的事件和数据：
- en: '![Figure 12.30 – Example of a violation ](img/B18015_12_30.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.30 – 违规示例](img/B18015_12_30.jpg)'
- en: Figure 12.30 – Example of a violation
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.30 – 违规示例
- en: In this section, we have learned how a security policy is defined on ACM and
    how to easily see a list of the violations that occur in your clusters. Continue
    reading to learn more about the **Vulnerability Management** feature of ACS and
    how you can use it to identify, prioritize and remediate vulnerabilities.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们学习了如何在ACM上定义安全策略，以及如何轻松查看集群中发生的违规行为。继续阅读以了解更多关于ACS的**漏洞管理**功能，以及如何使用它来识别、优先处理和修复漏洞。
- en: Vulnerability management
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 漏洞管理
- en: 'There is a general consensus that any system has vulnerabilities; some of them
    are known and some are not identified yet. Vulnerability management is the process
    of identifying and managing known vulnerabilities, which means having plans in
    place to remediate or mitigate the impact of the vulnerabilities. Navigate to
    **Vulnerability Management** | **Dashboard** to see what this feature looks like:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 通常认为，任何系统都有漏洞；其中一些是已知的，而一些尚未被识别。漏洞管理是识别和管理已知漏洞的过程，这意味着有计划地修复或减轻漏洞的影响。导航到**漏洞管理**
    | **仪表板**查看此功能的界面：
- en: '![Figure 12.31 – Vulnerability management ](img/Image91803.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![图12.31 – 漏洞管理](img/Image91803.jpg)'
- en: Figure 12.31 – Vulnerability management
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.31 – 漏洞管理
- en: 'Through this feature, you can walk through all the vulnerabilities detected
    by ACS and decide what actions to take:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 通过此功能，你可以浏览ACS检测到的所有漏洞，并决定采取哪些措施：
- en: Remediate the vulnerability either by removing the vulnerable software package
    from the application or updating it with a more recent version in which the vulnerability
    is already fixed.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过删除应用程序中易受攻击的软件包或更新到已修复该漏洞的较新版本来修复漏洞。
- en: Accept the risk.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接受风险。
- en: Mark it as a false positive.
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将其标记为误报。
- en: 'Vulnerabilities are detected and grouped in terms of the following:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 漏洞按照以下方式进行检测和分组：
- en: '**Components**: Software packages used by containers. This group helps you
    to detect the software packages that contain more vulnerabilities and where they
    are used, so you can upgrade the applications accordingly to remediate them.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组件**：容器使用的软件包。此组帮助你检测包含更多漏洞的软件包以及它们的使用位置，从而可以相应地升级应用程序以修复这些漏洞。'
- en: '**Image**: Group the vulnerabilities by images. Similarly, you can view what
    images are more vulnerable, check whether there is a fix for the security issues,
    and plan accordingly.'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**镜像**：按镜像分组漏洞。类似地，你可以查看哪些镜像更容易受到攻击，检查是否有修复方案，并相应地进行规划。'
- en: '**Nodes**: Group the vulnerabilities by nodes.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**节点**：按节点分组的漏洞。'
- en: '**Deployment**: See the vulnerabilities by deployment. Easier to check vulnerabilities
    for specific applications.'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**部署**：按部署查看漏洞。更容易检查特定应用程序的漏洞。'
- en: '**Namespace**: Vulnerabilities by namespace.'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**命名空间**：按命名空间分组的漏洞。'
- en: '**Cluster**: All vulnerabilities by clusters.'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**集群**：按集群分组的所有漏洞。'
- en: 'These groups are accessed from the buttons at the top of the **Vulnerability
    Management** dashboard; click on them to explore the different ways you can see
    and filter the vulnerabilities:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 这些组可以通过**漏洞管理**仪表板顶部的按钮访问；点击它们以探索你可以查看和筛选漏洞的不同方式：
- en: '![Figure 12.32 – Group by entities ](img/B18015_12_32.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![图12.32 – 按实体分组](img/B18015_12_32.jpg)'
- en: Figure 12.32 – Group by entities
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.32 – 按实体分组
- en: 'We are going to deploy a sample application now to check the **Vulnerability
    Management** feature in action. To do so, run the following commands in the OpenShift
    secured cluster:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将部署一个示例应用程序，以检查**漏洞管理**功能的实际效果。为此，请在OpenShift安全集群中运行以下命令：
- en: '[PRE1]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Now, access again the **Vulnerability Management** dashboard. You may notice
    some interesting things in the dashboard now:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，再次访问**漏洞管理**仪表板。你可能会注意到现在仪表板中有一些有趣的内容：
- en: '![Figure 12.33 – Top riskiest images and deployments ](img/B18015_12_33.jpg)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![图12.33 – 风险最高的镜像和部署](img/B18015_12_33.jpg)'
- en: Figure 12.33 – Top riskiest images and deployments
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.33 – 风险最高的镜像和部署
- en: 'In the previous screenshot, you can see the following:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的截图中，你可以看到以下内容：
- en: The container image from the application we just deployed is listed as the top
    riskiest image.
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们刚刚部署的应用程序的容器镜像被列为风险最高的镜像。
- en: In the graph, the application deployment is shown as the most critical in terms
    of CVE count and CVSS score.
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在图表中，应用程序部署显示为CVEs数量和CVSS分数方面最为关键的。
- en: 'Click on **APPLICATION & INFRASTRUCTURE** | **Namespaces** to view the vulnerabilities
    grouped by namespaces:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**应用程序与基础设施** | **命名空间**，查看按命名空间分组的漏洞：
- en: '![Figure 12.34 – APPLICATION & INFRASTRUCTURE menu ](img/B18015_12_34.jpg)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![图12.34 – 应用程序与基础设施菜单](img/B18015_12_34.jpg)'
- en: Figure 12.34 – APPLICATION & INFRASTRUCTURE menu
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.34 – 应用程序与基础设施菜单
- en: 'You will notice now our `acs-test` namespace is listed with more than 400 CVEs,
    with more than 150 fixable:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你会注意到我们的`acs-test`命名空间列出了超过400个CVE，其中150多个是可修复的：
- en: '![Figure 12.35 – Vulnerabilities by namespace ](img/B18015_12_35.jpg)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![图12.35 – 按命名空间划分的漏洞](img/B18015_12_35.jpg)'
- en: Figure 12.35 – Vulnerabilities by namespace
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.35 – 按命名空间划分的漏洞
- en: Click on the `acs-test` namespace to drill down and see the details.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 点击`acs-test`命名空间，深入查看详细信息。
- en: '![Figure 12.36 – Namespace Summary view ](img/B18015_12_36.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![图12.36 – 命名空间摘要视图](img/B18015_12_36.jpg)'
- en: Figure 12.36 – Namespace Summary view
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.36 – 命名空间摘要视图
- en: 'Explore the `samba` deployment, policies that pass or fail for the namespace,
    a list of images and their vulnerabilities, and all components (software packages)
    that have CVEs, and, finally, a list of all CVEs detected in that namespace. You
    can learn by exploring the namespace that it contains two applications (deployments),
    in which one of them has 498 known CVEs, of which 169 are fixable:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 探索`samba`部署、通过或未通过命名空间的策略、镜像及其漏洞列表，以及所有包含CVE的组件（软件包），最后是该命名空间中检测到的所有CVE列表。你可以通过探索该命名空间发现，它包含两个应用程序（部署），其中一个已知有498个CVE，其中169个是可修复的：
- en: '![Figure 12.37 – CVEs detected ](img/B18015_12_37.jpg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![图12.37 – 检测到的CVE](img/B18015_12_37.jpg)'
- en: Figure 12.37 – CVEs detected
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.37 – 检测到的CVE
- en: 'By drilling down into the deployment and components, you can check which package
    version is in use and in which version the CVE was fixed:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 通过深入分析部署和组件，你可以检查正在使用的包版本以及在哪个版本中修复了CVE：
- en: '![Figure 12.38 – Components and CVEs ](img/B18015_12_38.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![图12.38 – 组件与CVE](img/B18015_12_38.jpg)'
- en: Figure 12.38 – Components and CVEs
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.38 – 组件与CVE
- en: 'That gives a lot of helpful information for you to identify vulnerable packages
    and images and remediate them. You can alternatively also decide to accept the
    risk (defer) or mark it as a false positive; to do so, access the image, scroll
    down and select the CVEs you want to defer, and click on **Defer CVE** or **Mark
    false positive**:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 这为你提供了大量有助于识别漏洞包和镜像并进行修复的信息。你也可以选择接受风险（延期）或将其标记为假阳性；为此，访问镜像，向下滚动并选择你想要延期的CVE，然后点击**延期CVE**或**标记为假阳性**：
- en: '![Figure 12.39 – Accepting the risk of a CVE ](img/B18015_12_39.jpg)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![图12.39 – 接受CVE风险](img/B18015_12_39.jpg)'
- en: Figure 12.39 – Accepting the risk of a CVE
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.39 – 接受CVE风险
- en: 'You can review and approve the CVEs in the **Vulnerability Management** | **Risk
    Acceptance** feature and also list the approved deferrals and false positives:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在**漏洞管理** | **风险接受**功能中查看和批准CVE，也可以列出已批准的延期和假阳性：
- en: '![Figure 12.40 – Risk Acceptance ](img/Image91889.jpg)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![图12.40 – 风险接受](img/Image91889.jpg)'
- en: Figure 12.40 – Risk Acceptance
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.40 – 风险接受
- en: The **Vulnerability Management** feature also includes a report feature, in
    which you can set up a security report and send it weekly or monthly to a distribution
    list. It is helpful to report vulnerabilities across the organization frequently.
    We will not cover this feature in this book, but you can find a link in the *Further
    reading* section of this chapter that will help you to configure it.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '**漏洞管理**功能还包括报告功能，你可以设置安全报告，并每周或每月将其发送到一个分发列表。定期报告组织中的漏洞非常有帮助。我们在本书中不会覆盖此功能，但你可以在本章的*进一步阅读*部分找到一个链接，帮助你进行配置。'
- en: Risk profiling
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 风险分析
- en: 'The **Risk** view is a feature that classifies all running deployments in terms
    of security risks. Navigate to the **Risk** menu to access the feature and learn
    from it:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '**风险**视图是一个将所有运行中部署按安全风险分类的功能。进入**风险**菜单访问该功能并从中学习：'
- en: '![Figure 12.41 – Risk feature ](img/Image91898.jpg)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![图12.41 – 风险功能](img/Image91898.jpg)'
- en: Figure 12.41 – Risk feature
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.41 – 风险功能
- en: 'Click on the `samba` deployment and explore **RISK INDICATORS**, **DEPLOYMENT
    DETAILS**, and **PROCESS DISCOVERY**:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 点击`samba`部署，探索**风险指标**、**部署详情**和**进程发现**：
- en: '![Figure 12.42 – Risk details ](img/B18015_12_42.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![图12.42 – 风险详情](img/B18015_12_42.jpg)'
- en: Figure 12.42 – Risk details
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.42 – 风险详情
- en: 'We will not walk through each option there but will highlight the **PROCESS
    DISCOVERY** tab, which provides some interesting insights, as you can see next:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会逐一讲解其中的每个选项，而是会重点介绍**过程发现**标签页，它提供了一些有趣的见解，正如下所示：
- en: '![Figure 12.43 – Process Discovery ](img/B18015_12_43.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.43 – 过程发现](img/B18015_12_43.jpg)'
- en: Figure 12.43 – Process Discovery
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.43 – 过程发现
- en: 'In this tab, you can see all the processes that are running in the container
    including details and also a graph that shows the process activities over time.
    Click on the **VIEW GRAPH** link to see it:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 在此标签页中，你可以看到容器中正在运行的所有进程，包括详细信息，还有一张显示进程活动随时间变化的图表。点击**查看图表**链接以查看它：
- en: '![Figure 12.44 – Process graph ](img/B18015_12_44.jpg)'
  id: totrans-233
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.44 – 过程图](img/B18015_12_44.jpg)'
- en: Figure 12.44 – Process graph
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.44 – 过程图
- en: This **Risk** feature can be helpful for you to sort your deployments in terms
    of security risks and then take action according to the prioritized list.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 这个**风险**功能对于你按安全风险对部署进行排序并根据优先级列表采取行动非常有帮助。
- en: Compliance
  id: totrans-236
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合规性
- en: The **Compliance** feature scans your clusters and reports them according to
    some out-of-the-box compliance industry standards, such as CIS Benchmarks for
    Docker and Kubernetes, **Health Insurance Portability and Accountability Act**
    (**HIPAA**), **National Institute of Standards and Technology** (**NIST**) Special
    Publications 800-190 and 800-53, and **Payment Card Industry Data Security Standard**
    (**PCI DSS**).
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '**合规性**功能扫描你的集群并根据一些现成的合规行业标准报告它们，例如Docker和Kubernetes的CIS基准、**健康保险携带与责任法案**（**HIPAA**）、**国家标准与技术研究所**（**NIST**）特别出版物800-190和800-53，以及**支付卡行业数据安全标准**（**PCI
    DSS**）。'
- en: 'To run the compliance scan, navigate to the **Compliance** feature and click
    on the **SCAN ENVIRONMENT** button:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行合规扫描，导航到**合规性**功能并点击**扫描环境**按钮：
- en: '![Figure 12.45 – Compliance feature ](img/Image91941.jpg)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.45 – 合规功能](img/Image91941.jpg)'
- en: Figure 12.45 – Compliance feature
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.45 – 合规功能
- en: 'After some seconds, you will see the compliance report, as follows:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 几秒钟后，你将看到合规报告，如下所示：
- en: '![Figure 12.46 – Compliance report ](img/B18015_12_46.jpg)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.46 – 合规报告](img/B18015_12_46.jpg)'
- en: Figure 12.46 – Compliance report
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.46 – 合规报告
- en: We will not dive into each of these industry standards, as they are very specific
    to different industries. We encourage you to explore the feature, click on each
    graph, drill down, and check which controls are compliant and not compliant and
    why. Read the reference we left in the *Further reading* if you want to see more
    about this compliance feature.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会深入探讨这些行业标准，因为它们非常具体于不同的行业。我们鼓励你探索该功能，点击每个图表，深入分析，检查哪些控制是合规的，哪些不合规，并了解原因。如果你想了解更多关于该合规功能的信息，可以阅读我们在*进一步阅读*中留下的参考资料。
- en: Configuration Management
  id: totrans-245
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置管理
- en: The **Configuration Management** feature is a different way to look at policies
    that are violated, correlating with the various objects that make up the configuration
    and use of the clusters. Using this feature, you can list all failing policies
    for all clusters and drill down to inspect all namespaces, deployments, and so
    on. You may be thinking that the same information can also be found in **Violations**
    and **Vulnerability Management**, and that is true! The same information is also
    there; however, here, you will find it grouped by clusters’ entities and also
    displaying summary data of each entity, which will help you to correlate the different
    entities and learn about the connections among them.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '**配置管理**功能是以另一种方式查看违反的政策，它将这些政策与构成集群配置和使用的各种对象相关联。使用此功能，你可以列出所有集群的失败政策，并深入检查所有命名空间、部署等。你可能会想，这些信息也可以在**违规**和**漏洞管理**中找到，没错！这些信息也在那里；不过，在这里，你会看到它按集群实体分组，并且展示每个实体的汇总数据，这有助于你关联不同实体，了解它们之间的关系。'
- en: 'To access this feature, navigate to the **Configuration Management** menu:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问此功能，导航到**配置管理**菜单：
- en: '![Figure 12.47 – Configuration Management feature ](img/Image91958.jpg)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.47 – 配置管理功能](img/Image91958.jpg)'
- en: Figure 12.47 – Configuration Management feature
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.47 – 配置管理功能
- en: 'You will first see a dashboard that summarizes the following information:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 你将首先看到一个仪表盘，汇总以下信息：
- en: '**POLICY VIOLATIONS BY SEVERITY**: Group the policy violations by severity
    (critical, high, medium, and low) and display them in a pie chart. You can drill
    down and inspect the policies by clicking on the link on the right side of the
    pie chart:'
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**按严重程度分类的策略违规**：按严重程度（关键、高、普通和低）对策略违规进行分组，并以饼图形式显示。你可以通过点击饼图右侧的链接深入查看并检查策略：'
- en: '![Figure 12.48 – POLICY VIOLATIONS BY SEVERITY pie chart ](img/B18015_12_48.jpg)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.48 – 按严重程度分类的策略违规饼图](img/B18015_12_48.jpg)'
- en: Figure 12.48 – POLICY VIOLATIONS BY SEVERITY pie chart
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.48 – 按严重程度分类的策略违规饼图
- en: '**CIS DOCKER/Kubernetes**: Another pie chart grouping entities by CIS Docker
    or CIS Kubernetes controls:'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CIS DOCKER/Kubernetes**：另一个按CIS Docker或CIS Kubernetes控制分组的饼图：'
- en: '![Figure 12.49 – CIS DOCKER/KUBERNETES pie chart ](img/B18015_12_49.jpg)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.49 – CIS DOCKER/KUBERNETES饼图](img/B18015_12_49.jpg)'
- en: Figure 12.49 – CIS DOCKER/KUBERNETES pie chart
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.49 – CIS DOCKER/KUBERNETES饼图
- en: 'See next the description of this pie chart:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是此饼图的描述：
- en: Pie chart that summarizes the controls compliance considering the CIS Docker
    or Kubernetes standard.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该饼图总结了考虑CIS Docker或Kubernetes标准下的控制合规性。
- en: Click here to switch between CIS Docker and CIS Kubernetes.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击这里在CIS Docker和CIS Kubernetes之间切换。
- en: Click on the **SCAN** button to perform a new scan in the environment.
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**扫描**按钮，在环境中执行新的扫描。
- en: Click on **VIEW STANDARD** to get a list of all CIS controls and the status
    (**Passing, Failing**, or **N/A**).
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**查看标准**，获取所有CIS控制及其状态（**通过**、**失败**或**N/A**）的列表。
- en: Drill down to the passed, failed, or N/A control list.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 深入查看已通过、失败或N/A的控制列表。
- en: '**USERS WITH MOST CLUSTER ADMIN ROLES**: This is self-explanatory. You can
    use this list to review users’ permissions and make sure they have the proper
    permissions:'
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**拥有最多集群管理员角色的用户**：显而易见，你可以使用此列表查看用户的权限，并确保他们拥有适当的权限：'
- en: '![Figure 12.50 – Users with most cluster admin roles ](img/B18015_12_50.jpg)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.50 – 拥有最多集群管理员角色的用户](img/B18015_12_50.jpg)'
- en: Figure 12.50 – Users with most cluster admin roles
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.50 – 拥有最多集群管理员角色的用户
- en: '**SECRETS MOST USED ACROSS DEPLOYMENTS**: Also self-explanatory. Use this list
    to find sensitive data and how it is accessed through the environment, and look
    for suspicious activities:'
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在部署中最常用的机密**：同样是显而易见的。使用此列表查找敏感数据及其如何通过环境访问，并查找可疑活动：'
- en: '![Figure 12.51 – Secrets most used across deployments ](img/B18015_12_51.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.51 – 在部署中最常用的机密](img/B18015_12_51.jpg)'
- en: Figure 12.51 – Secrets most used across deployments
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.51 – 在部署中最常用的机密
- en: 'You can also use the bar at the top of this page to inspect the policies and
    controls by clusters, namespaces, nodes, deployments, images, secrets, users and
    groups, service accounts, and roles:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以使用此页面顶部的条形图按集群、命名空间、节点、部署、镜像、机密、用户和组、服务账户及角色检查策略和控制：
- en: '![Figure 12.52 – View policies and controls by entities ](img/B18015_12_52.jpg)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.52 – 按实体查看策略和控制](img/B18015_12_52.jpg)'
- en: Figure 12.52 – View policies and controls by entities
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.52 – 按实体查看策略和控制
- en: 'Click on the menu options and explore the different lists you get with each
    of them. Notice also that you can drill down from clusters to deployments, images,
    and so on to navigate back and forth to analyze the entities:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 点击菜单选项，探索你从每个选项中获得的不同列表。还要注意，你可以从集群深入到部署、镜像等，前后导航分析实体：
- en: '![Figure 12.53 – Drill down from cluster to namespace ](img/B18015_12_53.jpg)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.53 – 从集群深入到命名空间](img/B18015_12_53.jpg)'
- en: Figure 12.53 – Drill down from cluster to namespace
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.53 – 从集群深入到命名空间
- en: This concludes an overview of the **Configuration Management** feature. Continue
    reading to see a great feature ACS brings to help you to inspect your clusters’
    network communication.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 这总结了**配置管理**功能的概述。继续阅读，查看ACS带来的一个很棒功能，帮助你检查集群的网络通信。
- en: Network segmentation
  id: totrans-276
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络分段
- en: 'An important security aspect in any Kubernetes cluster is how Pods communicate
    between each other and also ingress and egress communication. Currently, there
    isn’t any graphical view on Kubernetes to check how the network communications
    are performed in real time, and neither allowed nor blocked flows. To help with
    that, ACS brings the **Network Graph** feature, which allows you to view the active
    communications in real time and also define and apply NPs to allow or block network
    traffic. Click on the **Network Graph** menu to access the feature:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes 集群中的一个重要安全方面是 Pod 之间的通信方式，以及进入和离开通信。目前，Kubernetes 中没有图形化视图来实时检查网络通信如何执行，也无法查看允许的或被阻止的流量。为了解决这个问题，ACS
    提供了**网络图**功能，允许您实时查看活动通信，并定义和应用网络策略（NP）以允许或阻止网络流量。点击**网络图**菜单以访问该功能：
- en: '![Figure 12.54 – Network Graph feature ](img/B18015_12_54.jpg)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.54 – 网络图功能](img/B18015_12_54.jpg)'
- en: Figure 12.54 – Network Graph feature
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.54 – 网络图功能
- en: 'Select the `rhacs-operator` namespace to view what the network graph looks
    like:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 选择`rhacs-operator`命名空间查看网络图的样子：
- en: '![Figure 12.55 – Network graph for the rhacs-operator namespace ](img/B18015_12_55.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.55 – rhacs-operator 命名空间的网络图](img/B18015_12_55.jpg)'
- en: Figure 12.55 – Network graph for the rhacs-operator namespace
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.55 – rhacs-operator 命名空间的网络图
- en: You can change the view to see only active connections, allowed connections,
    or all types of connection flows.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以更改视图，仅查看活动连接、允许的连接或所有类型的连接流量。
- en: Network flows
  id: totrans-284
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络流量
- en: 'Red Hat Advanced Cluster Security can learn the network flows used by the applications
    and apply a baseline of all network flows. Any network flows detected that are
    different from the baseline are marked as anomalous for your review. When viewing
    the network flows and baseline, access any deployment, and you will see the anomalous
    flows marked in red:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: Red Hat 高级集群安全可以学习应用程序使用的网络流量，并应用所有网络流量的基线。检测到的任何与基线不同的网络流量都会被标记为异常，以供您审核。在查看网络流量和基线时，访问任何部署，您将看到异常流量以红色标记：
- en: '![Figure 12.56 – Network flows – anomalous and baseline ](img/B18015_12_56.jpg)'
  id: totrans-286
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.56 – 网络流量 – 异常和基线](img/B18015_12_56.jpg)'
- en: Figure 12.56 – Network flows – anomalous and baseline
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.56 – 网络流量 – 异常和基线
- en: 'Click on the **BASELINE SETTINGS** tab to check the current baseline:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**基线设置**标签页以查看当前基线：
- en: '![Figure 12.57 – Configure baseline ](img/B18015_12_57.jpg)'
  id: totrans-289
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.57 – 配置基线](img/B18015_12_57.jpg)'
- en: Figure 12.57 – Configure baseline
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.57 – 配置基线
- en: 'Through the **BASELINE SETTINGS** tab, you can do the following:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 通过**基线设置**标签页，您可以执行以下操作：
- en: View the baseline of network flows.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看网络流量的基线。
- en: Configure sending an alert when ACS detects anomalous flows.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置当 ACS 检测到异常流量时发送警报。
- en: Simulate the impact in the environment of having the baseline as NPs.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模拟将基线作为网络策略在环境中的影响。
- en: See next how to also use the **Network Graph** feature to generate a list of
    **NP**s (Network Policies) to allow only the communications that are required
    by the applications.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来将展示如何使用**网络图**功能生成仅允许应用程序所需通信的**网络策略**列表。
- en: Network Policy Simulator
  id: totrans-296
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络策略模拟器
- en: 'Do you know whether the NP configurations of your clusters allow only required
    communications and nothing more? Clusters with a permissive set of NPs are very
    common and the ACS Network Policy Simulator can help to avoid that. ACS monitors
    the network traffic between all Pods and namespaces in the clusters to create
    a matrix of firewall rules. You can use ACS to generate a set of NPs based on
    what it learned from the environment that will allow only the communications needed.
    To use this feature, click on the **Network Policy Simulator** button then click
    on **Generate and simulate network policies**:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 您知道您的集群的网络策略配置是否仅允许必要的通信吗？带有宽松网络策略集的集群非常常见，ACS 网络策略模拟器可以帮助避免这种情况。ACS 监控集群中所有
    Pod 和命名空间之间的网络流量，创建防火墙规则矩阵。您可以使用 ACS 基于它从环境中学到的信息生成一组仅允许所需通信的网络策略。要使用此功能，请点击**网络策略模拟器**按钮，然后点击**生成并模拟网络策略**：
- en: '![Figure 12.58 – Generate and simulate network policies ](img/B18015_12_58.jpg)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.58 – 生成并模拟网络策略](img/B18015_12_58.jpg)'
- en: Figure 12.58 – Generate and simulate network policies
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.58 – 生成并模拟网络策略
- en: You will see an extensive list of NPs that will allow only the communications
    that ACS learned from the environment that is in use. You can apply the NPs in
    the environment or share them by email. We highly recommend you review and test
    the NPs in a development or test environment before applying them in production.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到一个详尽的NP列表，这些NP仅允许ACS从正在使用的环境中学到的通信。您可以在环境中应用这些NP，或者通过电子邮件分享它们。我们强烈建议您在生产环境中应用之前，先在开发或测试环境中审查和测试这些NP。
- en: '![Figure 12.59 – Apply or share NPs ](img/B18015_12_59.jpg)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![图 12.59 – 应用或共享NPs](img/B18015_12_59.jpg)'
- en: Figure 12.59 – Apply or share NPs
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.59 – 应用或共享NPs
- en: Helpful, right? Now explore the **Network Graph** feature a bit more and envision
    how this feature can help you and your organization to have more visibility into
    the network traffic and also allow only the communications that are really required
    by your applications.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 很有帮助吧？现在再深入了解一下**网络图**功能，并设想这个功能如何帮助您和您的组织更好地了解网络流量，并仅允许您的应用程序真正需要的通信。
- en: Summary
  id: totrans-304
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: We covered a lot of content in this chapter about Red Hat Advanced Cluster Security.
    In this chapter, we have seen an overview of ACS capabilities to help you to learn
    how ACS can help to make sure your clusters are secure and vulnerabilities are
    known, and put an action plan in place.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了很多关于红帽高级集群安全（ACS）的内容。在本章中，我们概述了ACS的功能，帮助您了解ACS如何确保集群的安全性，识别已知漏洞，并制定行动计划。
- en: 'We learned how to use and define security policies and list all policy violations
    using the **Violations** feature. We also saw that the **Vulnerability Management**
    feature is very helpful to list all known vulnerabilities, review them, and take
    proper action: remediate (fix vulnerable packages), accept the risk, or mark them
    as false positives.'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 我们了解了如何使用和定义安全策略，并使用**违规**功能列出所有政策违规情况。我们还看到，**漏洞管理**功能非常有助于列出所有已知漏洞，审查它们，并采取适当的行动：修复（修复易受攻击的包）、接受风险或将其标记为误报。
- en: We also learned that the **Risk** profiling feature helps you to assess the
    risk of application deployments and prioritize the remediation and actions that
    need to be taken to enhance the security. **Compliance** reports the clusters,
    namespaces, and deployments in terms of industry standards, such as CIS Docker,
    HIPAA, NIST, PCI, and so on.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还了解到，**风险**分析功能帮助您评估应用部署的风险，并优先处理需要采取的补救措施和行动，以增强安全性。**合规性**根据行业标准（如CIS Docker、HIPAA、NIST、PCI等）报告集群、命名空间和部署情况。
- en: Finally, we saw the list of policies and controls aggregated by a cluster’s
    entities in the **Configuration Management** feature, helping to correlate the
    different entities into the clusters. **Network Graph**, in turn, gave us a nice
    view of the network flows in real time with some useful added features to help
    generate and simulate NPs and make sure only needed communications are allowed
    and nothing more.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们看到了通过**配置管理**功能按集群的实体汇总的策略和控制列表，帮助将不同的实体关联到集群中。**网络图**功能则为我们提供了网络流量的实时视图，并附加了一些有用的功能，帮助生成和模拟NP，确保只允许必要的通信，而不会有多余的通信。
- en: 'We hope this chapter helped you to understand Red Hat Advanced Cluster Security.
    We encourage you to move on to the next chapter to see how ACM, ACS, and other
    pieces will build together a complete and comprehensive platform for multi-cloud
    or hybrid cloud: **OpenShift Platform Plus**.'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望本章能帮助您理解红帽高级集群安全。我们鼓励您继续下一章，了解如何将ACM、ACS和其他组件结合起来，构建一个完整且全面的多云或混合云平台：**OpenShift
    Platform Plus**。
- en: Further reading
  id: totrans-310
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'Looking for more information? Check the following references to get more information
    about Red Hat Advanced Cluster Security:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 寻找更多信息？请查看以下参考资料，获取更多关于红帽高级集群安全的信息：
- en: '*KuppingerCole Report Leadership Compass: Container security*: [https://www.redhat.com/en/resources/kuppingercole-container-security-report-analyst-material](https://www.redhat.com/en/resources/kuppingercole-container-security-report-analyst-material)'
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*KuppingerCole报告领导者指南：容器安全*：[https://www.redhat.com/en/resources/kuppingercole-container-security-report-analyst-material](https://www.redhat.com/en/resources/kuppingercole-container-security-report-analyst-material)'
- en: '*ACM installation using the Operator*: [https://docs.openshift.com/acs/3.70/installing/install-ocp-operator.html](https://docs.openshift.com/acs/3.70/installing/install-ocp-operator.html)'
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Operator安装ACM*：[https://docs.openshift.com/acs/3.70/installing/install-ocp-operator.html](https://docs.openshift.com/acs/3.70/installing/install-ocp-operator.html)'
- en: '*ACM installation using Helm*: [https://docs.openshift.com/acs/3.70/installing/installing_helm/install-helm-quick.html](https://docs.openshift.com/acs/3.70/installing/installing_helm/install-helm-quick.html)'
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Helm安装ACM*: [https://docs.openshift.com/acs/3.70/installing/installing_helm/install-helm-quick.html](https://docs.openshift.com/acs/3.70/installing/installing_helm/install-helm-quick.html)'
- en: '*ACM installation using the roxctl CLI*: [https://docs.openshift.com/acs/3.70/installing/install-quick-roxctl.html](https://docs.openshift.com/acs/3.70/installing/install-quick-roxctl.html)'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用roxctl CLI安装ACM*: [https://docs.openshift.com/acs/3.70/installing/install-quick-roxctl.html](https://docs.openshift.com/acs/3.70/installing/install-quick-roxctl.html)'
- en: '*Threat matrix for Kubernetes* – Microsoft article about MITRE ATT&CK®: [https://www.microsoft.com/security/blog/2020/04/02/attack-matrix-kubernetes/](https://www.microsoft.com/security/blog/2020/04/02/attack-matrix-kubernetes/)'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Kubernetes的威胁矩阵* – 微软关于MITRE ATT&CK®的文章：[https://www.microsoft.com/security/blog/2020/04/02/attack-matrix-kubernetes/](https://www.microsoft.com/security/blog/2020/04/02/attack-matrix-kubernetes/)'
- en: '*Protecting Kubernetes Against MITRE ATT&CK: Initial Access* – First of a series
    of articles about the MITRE ATT&CK® framework: [https://cloud.redhat.com/blog/protecting-kubernetes-against-mitre-attck-initial-access](https://cloud.redhat.com/blog/protecting-kubernetes-against-mitre-attck-initial-access)'
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*保护Kubernetes免受MITRE ATT&CK：初始访问* – 一系列关于MITRE ATT&CK®框架的文章之一：[https://cloud.redhat.com/blog/protecting-kubernetes-against-mitre-attck-initial-access](https://cloud.redhat.com/blog/protecting-kubernetes-against-mitre-attck-initial-access)'
- en: '*MITRE ATT&CK® knowledge base:* [https://attack.mitre.org/](https://attack.mitre.org/)'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*MITRE ATT&CK®知识库*: [https://attack.mitre.org/](https://attack.mitre.org/)'
- en: '*Configuring the vulnerability reports*: [https://docs.openshift.com/acs/3.70/operating/manage-vulnerabilities.html#vulnerability-management-reporting_acs-operating-manage-vulnerabilities](https://docs.openshift.com/acs/3.70/operating/manage-vulnerabilities.html#vulnerability-management-reporting_acs-operating-manage-vulnerabilities)'
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*配置漏洞报告*: [https://docs.openshift.com/acs/3.70/operating/manage-vulnerabilities.html#vulnerability-management-reporting_acs-operating-manage-vulnerabilities](https://docs.openshift.com/acs/3.70/operating/manage-vulnerabilities.html#vulnerability-management-reporting_acs-operating-manage-vulnerabilities)'
- en: '*Managing compliance*: [https://docs.openshift.com/acs/3.70/operating/manage-compliance.html](https://docs.openshift.com/acs/3.70/operating/manage-compliance.html)'
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*管理合规性*: [https://docs.openshift.com/acs/3.70/operating/manage-compliance.html](https://docs.openshift.com/acs/3.70/operating/manage-compliance.html)'
