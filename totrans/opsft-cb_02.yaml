- en: Chapter 2. Managing Domains
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'This chapter presents a number of recipes that will show you how to get started
    with creating and managing domains. You will also learn how domains can help you
    work as a team and collaborate on a project. The specific recipes of this chapter
    are:'
  prefs: []
  type: TYPE_NORMAL
- en: Creating a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Renaming a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Viewing domain details using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding viewer members to a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding an editor member to a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding an admin member to a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Viewing all the members in a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Removing members from a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Restricting gear sizes for a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Leaving a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Deleting a domain using rhc
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A **domain** represents a unique name for each user within which each user application
    must exist. OpenShift users cannot create an application until they have a valid
    domain. The domain name becomes a part of the application URL. For example, if
    your domain name is `foo` and your application name is `bar`, the application
    URL will be `http://bar-foo.rhcloud.com`. Every OpenShift account must have at
    least one domain associated with it. The OpenShift Online free tier does not allow
    a user to create more than one domain, but you can create more than one domain
    in paid tiers. The domains make it possible for users to choose any valid name
    for their application. They allow two or more users to have the same name for
    their applications. For example, user A can have an application named `bar` in
    domain `foo`, and similarly, user B can also have an application named `bar` in
    domain `test`. Once a user has a valid domain, he/she can use any valid name for
    their application.
  prefs: []
  type: TYPE_NORMAL
- en: Team collaboration is one of the essential features of modern-day software development.
    Whether you are working on an open source project or an enterprise project, you
    need to collaborate and work with others. A group of people may work together
    to make a software project a success. A domain makes it possible to work as a
    team because you can add other users to your domain, giving them privileges to
    work with your application. This makes it very easy for different users to collaborate
    on a project and work together. You can add a user to your domain either as a
    viewer, editor, or an admin. Recipes 4 through 6 will cover these in detail.
  prefs: []
  type: TYPE_NORMAL
- en: A domain also helps us incorporate the concept of environments in our applications.
    You can have different domains for different environments. One can be used as
    a development environment, one as a quality assurance environment, and another
    for production. This allows you to give different people access to different domains.
    Your developers can have access to development and quality assurance domains but
    not to the production domain.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the *Creating OpenShift domains using the web console* recipe of [Chapter
    1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, you learned how to create a domain using the
    web console. In this recipe, you will learn how to create a domain using the rhc
    command line.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions. If you are using OpenShift''s
    free plan, you have to first delete the domain you created in the *Creating OpenShift
    domains using the web console* recipe of [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*,
    before continuing with this recipe. This is required because you cannot have more
    than one domain with OpenShift''s free plan. To delete a domain, run the command
    shown as follows. This command is explained in the *Deleting a domain using rhc*
    recipe in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To create a domain name, open a new command-line terminal and run the following
    command. Please provide a unique domain name.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: If you get the `You may not have more than 1 domain` error when you run this
    command, delete the existing domain associated with your account. In the free
    tier, you cannot create more than one domain.
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can use the `rhc domain-create` or `rhc create-domain` command to create
    a new domain name. The only required argument to create a domain is a unique alphanumeric
    name. Please note that a domain can contain, at most, 16 alphanumeric characters
    and cannot have spaces or symbols.
  prefs: []
  type: TYPE_NORMAL
- en: 'The output of the `rhc create-domain` command is shown as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'You can avoid using the `--namespace` option by typing the following command.
    The `rhc` command-line client is intelligent and understands that you are only
    providing the mandatory argument:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: All OpenShift commands have help associated with them. To understand the usage
    of the `rhc create-domain` command and all the options available with it, you
    can use the `-h` or `--help` option. We will look at the other options in the
    later recipes.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Creating OpenShift domains using the web console recipe* in [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Renaming a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing domain details using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Deleting a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Renaming a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Following the creation of a domain, you might need to rename it. Let's suppose
    you want to rename your existing name to reflect its environment. For instance,
    you may rename the `osbook` domain name to `devosbook` in order to indicate `devosbook`
    as your development environment.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To rename a domain, open a new command-line terminal and run the following
    command. You should provide a unique, new domain name:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To rename a domain, you have to first make sure there are no applications associated
    with it. If there are any applications associated with a domain, you have to first
    delete them. To learn how to delete an application, refer to the *Deleting the
    application* recipe in [Chapter 3](part0041_split_000.html#page "Chapter 3. Creating
    and Managing Applications"), *Creating and Managing Applications*. The `rename-domain`
    command first deletes the old domain before creating a new one using the new domain
    name. To rename the `osbook` domain to `devosbook`, you need to run the following
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can also rename a domain using the web console. Visit your domain web page
    at [https://openshift.redhat.com/app/console/domain/{domain-name}](https://openshift.redhat.com/app/console/domain/%7Bdomain-name%7D)
    and click on **Change**, as shown in the following screenshot. Please replace
    `{domain-name}` with your OpenShift account domain name.
  prefs: []
  type: TYPE_NORMAL
- en: '![There''s more…](img/00016.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: This will direct you to another web page where you can enter the new domain
    name, as seen in the following screenshot. Enter the new domain name and click
    on **Save**.
  prefs: []
  type: TYPE_NORMAL
- en: '![There''s more…](img/00017.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Creating OpenShift domains using the web console* recipe in [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Renaming a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing domain details using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Deleting a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Viewing domain details using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this recipe, you will learn how to view the details associated with a domain.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: Also, you will need to have a valid domain associated with your account. Refer
    to the *Creating a domain using rhc* recipe in this chapter for instructions on
    how to create a new domain.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To view domain details, open a new command-line terminal and run the following
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The `rhc show-domain` command returns the details of a domain and its applications.
    The output of the command is shown as follows. The details include the domain
    name, the owner''s e-mail ID, other domain members, and the information of all
    the applications within it:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: The `--namespace` option is optional. If you do not specify the `--namespace`
    option, OpenShift will first try to find the domain name from the Git repository
    configuration file in the current directory. It considers the directory from which
    you run the command as an OpenShift application Git repository. It uses the `git
    config --get rhc.domain-name` command to find the domain name. As we are not running
    the command inside an OpenShift application's Git repository, OpenShift will make
    a `GET` REST API request to fetch all the domains associated with the user. The
    user details and authorization token information will be retrieved from the `~/.openshift`
    folder. After finding all the domains associated with the user, a `GET` REST API
    call will be made to fetch details for each domain. Finally, the output will be
    shown to the user.
  prefs: []
  type: TYPE_NORMAL
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You can also view all the domains you have access to by running the `rhc list-domain`
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: As you can see, the `openshift.cookbook@gmail.com` user has access to two domains.
    The `openshift.cookbook@gmail.com` user owns the `devosbook` domain, but it is
    the only member of the `ndtv123` domain.
  prefs: []
  type: TYPE_NORMAL
- en: 'If a user only wants to view his/her domain, he/she can use the `--mine` argument,
    as shown in the following command-line output. To view all the options available
    for a command, you can pass the `--help` option:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Creating a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing domain details using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Deleting a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding viewer members to a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let's suppose you are a system administrator of your organization, where your
    job is to make sure all the production applications are running smoothly. Ideally,
    you would not want all the developers in your organization to have access to the
    production environment. Giving everyone access to the production environment is
    waiting for the inevitable to happen. What you should remember is that you can
    have different domains for different environments. The domain corresponding to
    the production deployment will be controlled by system administrators rather than
    developers. OpenShift allows you to give different access levels to a different
    group of people. You, along with other system administrators, can enjoy admin
    access to the production domain, whereas developers can only have viewer access,
    if required. Developers will be added to the production domain in the read-only
    mode. They can view the information about it and its applications, but they cannot
    make any changes. They also can't use Git to clone the source code or deploy changes.
    Viewers are also not allowed to SSH into the application gear.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: You will need two OpenShift accounts to work through this recipe. Please refer
    to the *Creating an OpenShift Online account* recipe in [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*,
    for OpenShift account registration instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Let''s suppose we have two OpenShift users, `openshift.cookbook@gmail.com`
    and `openshift.cookbook.test@gmail.com`. You may want to add `openshift.cookbook.test@gmail.com`
    as a viewer to the `prodosbook` domain of `openshift.cookbook@gmail.com`. The
    `prodosbook` domain corresponds to the production environment of your application.
    To do this, execute the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The `add-member` command allows you to add members to your domain. A user can
    be added to one of the three roles: `view`, `edit`, or `admin`. In this recipe,
    we may want to add `openshift.cookbook.test@gmail.com` as a viewer, so we use
    the `--role` option to give the user the view role.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The syntax of the `rhc add-member` command is shown as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'The breakup of the command is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '`login`: This is the e-mail ID or short name of the OpenShift account you want
    to add as a member'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`namespace`: This is the domain name in which you want to add a member'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`role`: This refers to the access level you want to give to a member'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You can view the added user by viewing the domain details:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'If the `openshift.cookbook.test@gmail.com` user tries to clone the application
    to their local machine, they will receive the permission denied error shown as
    follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'You can also add multiple members to your domain in one go, as shown:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'This also works for OpenShift account IDs as well by entering the following
    command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The OpenShift web console also allows users to add members. You can do this
    by going to [https://openshift.redhat.com/app/console/domain/{domain-name}](https://openshift.redhat.com/app/console/domain/%7Bdomain-name%7D)
    and replacing `{domain-name}` with your account domain name. Then, click on the
    **Add members…** web link:'
  prefs: []
  type: TYPE_NORMAL
- en: '![There''s more…](img/00018.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: 'Enter the user login details and the role you want to give to the user before
    clicking on **Save**:'
  prefs: []
  type: TYPE_NORMAL
- en: '![There''s more…](img/00019.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Adding an editor member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Adding an admin member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing all the members in a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding an editor member to a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Imagine that you are leading a software development team that uses OpenShift
    for development. During development, you would like all the developers in your
    team to be able to create, delete, push, or even SSH into application gear. However,
    you would not want users to rename or delete a domain, as this might impact other
    developers in your team or other teams. Another thing you would not like is to
    allow developers to change gear sizes. You can restrict development domains to
    only use small gears to save money. In this scenario, you will give developers
    an editor role that gives them the freedom to work with applications but not domains.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: You will need two OpenShift accounts to work through this recipe. Please refer
    to the *Creating an OpenShift online account* recipe in [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*,
    for OpenShift account registration instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To add the `openshift.cookbook.test@gmail.com` user as an editor to the `devosbook`
    domain of `openshift.cookbook@gmail.com`, run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The edit role allows a user to perform the following actions on a domain:'
  prefs: []
  type: TYPE_NORMAL
- en: A user can create applications under the domain
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A user can delete applications under the domain
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A user can view logs of the application
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A user can perform other application-related actions such as start, stop, and
    restart
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A user can push the source code using Git
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A user can SSH into the application gear using SSH
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: When you run the `rhc add-member` command with the edit role, OpenShift will
    firstly add a new member to a domain with an edit role and then copy the user
    public SSH key to the OpenShift gear `~/.ssh/authorized_keys` file. This allows
    an editor to perform SSH-related operations such as code deployment using Git
    and SSH to the application gear.
  prefs: []
  type: TYPE_NORMAL
- en: 'To check whether the editor has been added successfully, you can view the domain
    details:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can also use the web console to add the editor to your application. Just
    follow the steps mentioned in the *Adding viewer members to a domain using rhc*
    recipe in this chapter.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Adding viewer members to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Adding an admin member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing all the members in a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding an admin member to a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Consider a situation where a new system administrator joins your team. As the
    new system admin is also responsible for making sure your production apps are
    running smoothly, you would like to add the new system admin as an administrator.
    You can do this by giving the new user an admin role.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: You will need two OpenShift accounts to work through this recipe. Please refer
    to the *Creating an OpenShift Online account* recipe in [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*,
    for OpenShift account registration instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To add the `openshift.cookbook.test@gmail.com` user as an administrator to
    `prodosbook` of the `<[openshift.cookbook@gmail.com](mailto:openshift.cookbook@gmail.com)>`
    domain, run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The admin role allows a user to perform the following actions on a domain:'
  prefs: []
  type: TYPE_NORMAL
- en: Everything an editor can do such as performing actions related to applications
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Perform operations on a domain such as adding members to a domain
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: When you run the `rhc add-member` command with an admin role, OpenShift will
    add a new member to a domain with an admin role and then copy the public SSH key
    to the OpenShift gear `~/.ssh/authorized_keys` file. This allows an editor to
    perform SSH-related operations.
  prefs: []
  type: TYPE_NORMAL
- en: 'To check whether the administrator has been added successfully, you can view
    the domain details by inserting the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can also use the web console to add the editor to your application. Just
    follow the steps mentioned in the *Adding viewer members to a domain using rhc*
    recipe in this chapter.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Adding viewer members to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Adding an admin member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing all the members in a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Viewing all the members in a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There may be a situation when you want to view all the members in a domain.
    If so, you should follow this recipe.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: You will need two OpenShift accounts to work through this recipe. Please refer
    to the *Creating an OpenShift Online account* recipe in [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*,
    for OpenShift account registration instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To view all the members added to the `osbook` domain, run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The result of the `rhc list-member` command is shown as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: The `rhc list-member` command makes a `GET` request to fetch all the information
    about the `osbook` domain. The rhc client then parses the **JSON** response and
    shows the relevant information to the user.
  prefs: []
  type: TYPE_NORMAL
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You can also use a shortcut command to fetch all the members in a domain:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Adding viewer members to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Adding an admin member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing all the members in a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Removing members from a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Let's suppose you are a system admin and suddenly your application starts behaving
    weird. You looked at the logs but you were not able to understand them. To fix
    this issue, you had to give a developer access to look at the logs. The developer
    was able to understand the problem, and now you want to remove the developer membership.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: You will need two OpenShift accounts to work through this recipe. Please refer
    to the *Creating an OpenShift Online account* recipe in [Chapter 1](part0014_split_000.html#page
    "Chapter 1. Getting Started with OpenShift"), *Getting Started with OpenShift*,
    for OpenShift account registration instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To remove the `openshift.cookbook.test@gmail.com` user from the `osbook` domain
    of `<[openshift.cookbook@gmail.com](mailto:openshift.cookbook@gmail.com)>`, run
    the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The `rhc member-remove` command does two things:'
  prefs: []
  type: TYPE_NORMAL
- en: It removes the `openshift.cookbook.test@gmail.com` public SSH key from the authorized
    keys registry so that `openshift.cookbook.test@gmail.com` can't perform SSH operations
    such as `git clone` and SSH into application gears.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It removes the `openshift.cookbooktest@gmail.com` member from the `osbook` domain.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You can verify that `openshift.cookbook.test@gmail.com` is removed from the
    members'' list by inserting the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You can remove all the members from a domain by using the `--all` flag:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Adding viewer members to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Adding an admin member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing all the members in a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Restricting gear sizes for a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As you start using different domains for different environments, you will feel
    the need to restrict gear sizes for different domains. In particular, you would
    like to use small gears for development and large gears for production. When you
    create an application, you can specify the gear size for that application. This
    does not help much as it applies only to that application. To avoid using large
    gears for development, you would want to restrict the development domain only
    to small gears.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To restrict the `devosbook` domain to only small gears, run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: By default, when you create a new domain, it gains access to all the gear sizes
    available for your account. When you sign up for a free account, you receive access
    to only small gears, meaning what you can do is limited. However, in the commercial
    version, you can get access to bigger gear sizes. The `rhc configure-domain` command
    allows you to restrict a domain to specific gear sizes.
  prefs: []
  type: TYPE_NORMAL
- en: 'The `rhc configure-domain` command requires you to specify a list of gear sizes
    you want to allow in a domain. The namespace is optional. If you do not specify
    a domain name, the domain associated with the user specified in `~/.openshift/express.conf`
    will be configured. You can also specify multiple gear sizes:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You can also configure a domain to not allow any application creation by using
    the `--no-allowed-gear-sizes` option. You will use this option to disallow application
    creation for a domain or to block a domain name for later use. For example, I
    could create another domain, `osbook2`, for the second version of this book and
    configure it with the`--no-allowed-gear-sizes` option:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Adding viewer members to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Adding an admin member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing all the members in a domain using* rhc recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Leaving a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You have now become a member of a domain that corresponds to the production
    environment. You have completed your work and now you want to leave the production
    domain.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete this recipe, you will need to have rhc installed on your machine.
    Please refer to the *Installing the OpenShift rhc command-line client* recipe
    in [Chapter 1](part0014_split_000.html#page "Chapter 1. Getting Started with OpenShift"),
    *Getting Started with OpenShift*, for instructions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To leave a domain, you should run the following command. All the users are
    allowed to leave the domain they are a member of:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The `rhc leave-domain` command requires only one mandatory argument, which is
    `--namespace`, the namespace you want to leave. It then removes the user from
    the domain members. The rhc client makes a REST delete request to remove the member
    from the namespace.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Adding viewer members to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Adding an admin member to a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Viewing all the members in a domain using rhc* recipe*s*
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Deleting a domain using rhc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You created a domain for testing and now you no longer require it. Naturally,
    you would like to delete the domain.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To complete the steps in this recipe, you will need rhc to be installed on your
    machine.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'You should run the following command to delete a domain:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once the domain is deleted, there is no way to undo it. So, please use this
    command with precaution.
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The `rhc delete-domain` command will delete the domain by making a REST delete
    call to the OpenShift service. If your domain contains an application, you will
    not be able to delete the domain. Instead, you will get an error message:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: Therefore, to delete a domain with an application, you have to pass a `–force`
    flag. This will delete the domain and all the applications associated with it.
  prefs: []
  type: TYPE_NORMAL
- en: There's more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The OpenShift web console also allows you to delete members from a domain.
    Go to [https://openshift.redhat.com/app/console/domain/{domain-name}](https://openshift.redhat.com/app/console/domain/%7Bdomain-name%7D)
    and replace `{domain-name}` with the domain name in which you want to delete a
    member. Click on the **Delete this domain…** button to delete it. This is shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![There''s more…](img/00020.jpeg)'
  prefs: []
  type: TYPE_IMG
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The *Renaming a domain using rhc* recipe
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
