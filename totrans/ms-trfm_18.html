<html><head></head><body>
<div id="_idContainer222">
<h1 class="chapter-number" id="_idParaDest-314"><a id="_idTextAnchor740"/><span class="koboSpan" id="kobo.1.1">18</span></h1>
<h1 id="_idParaDest-315"><a id="_idTextAnchor741"/><span class="koboSpan" id="kobo.2.1">Looking Ahead – Certification, Emerging Trends, and Next Steps</span></h1>
<p><span class="koboSpan" id="kobo.3.1">We are at a place in our journey where we have to stop and ask ourselves, </span><em class="italic"><span class="koboSpan" id="kobo.4.1">What’s next?</span></em><span class="koboSpan" id="kobo.5.1"> Before we do that, let’s think about where </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">we’ve been.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">We’ve learned what Terraform is and how to use it. </span><span class="koboSpan" id="kobo.7.2">We’ve learned some basic concepts of cloud architecture that transcend the particular cloud platform you might be using at the moment. </span><span class="koboSpan" id="kobo.7.3">We’ve built three sophisticated architectures on each of the three major hyperscalers—AWS, Azure, and GCP—and finally, we’ve learned how to work with existing environments, either importing them into Terraform or managing them with Terraform as long-lived environments in production </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">or otherwise.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">That’s a lot! </span><span class="koboSpan" id="kobo.9.2">It’s been quite a journey, so where do we go from here? </span><span class="koboSpan" id="kobo.9.3">Well, the answer is in you. </span><span class="koboSpan" id="kobo.9.4">I hope that means you have learned something along this journey, and you’ll take that into your day-to-day work to build amazing systems that solve real-world problems and are better equipped to build and manage them with the power </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">of Terraform.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">In this chapter, before we close, I’d like to discuss some potential next steps, both for your personal growth and extended learning. </span><span class="koboSpan" id="kobo.11.2">You have invested a tremendous amount of time in reading this book and have begun your journey of mastering Terraform. </span><span class="koboSpan" id="kobo.11.3">You may want to consider certification as a way to validate your skills and knowledge and to demonstrate your expertise to </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">potential employers.</span></span></p>
<p><span class="koboSpan" id="kobo.13.1">Additionally, there may be other technologies that you may want to consider as you continue to deepen your mastery of Terraform. </span><span class="koboSpan" id="kobo.13.2">We’ll explore some of these options, including tools and platforms that complement Terraform and how they can enhance your </span><strong class="bold"><span class="koboSpan" id="kobo.14.1">Infrastructure as Code</span></strong><span class="koboSpan" id="kobo.15.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.16.1">IaC</span></strong><span class="koboSpan" id="kobo.17.1">) capabilities. </span><span class="koboSpan" id="kobo.17.2">By the end of this chapter, you should have a clear roadmap for your continued learning and a solid foundation for your future endeavors in the world of cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">infrastructure management.</span></span></p>
<p><span class="koboSpan" id="kobo.19.1">The chapter covers the </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.21.1">Preparing for </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">the exam</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.23.1">Terraform Cloud</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.24.1">What’s next?</span></span></li>
</ul>
<h1 id="_idParaDest-316"><a id="_idTextAnchor742"/><span class="koboSpan" id="kobo.25.1">Preparing for the exam</span></h1>
<p><span class="koboSpan" id="kobo.26.1">On your journey</span><a id="_idIndexMarker1247"/><span class="koboSpan" id="kobo.27.1"> through this book to mastering Terraform, you’ve gained a wealth of knowledge and practical experience. </span><span class="koboSpan" id="kobo.27.2">But how do you showcase your expertise to the world? </span><span class="koboSpan" id="kobo.27.3">One of the most effective ways is through certification. </span><span class="koboSpan" id="kobo.27.4">In this section, we’ll delve into the intricacies of preparing for the Terraform certification exams. </span><span class="koboSpan" id="kobo.27.5">We’ll cover the key topics you need to master, the format of the exam, and strategies to optimize your study time and approach. </span><span class="koboSpan" id="kobo.27.6">By the end of this section, you’ll be well equipped with the tools and confidence needed to tackle the certification exam and take a significant step forward in </span><span class="No-Break"><span class="koboSpan" id="kobo.28.1">mastering Terraform.</span></span><a id="_idTextAnchor743"/></p>
<h2 id="_idParaDest-317"><a id="_idTextAnchor744"/><span class="koboSpan" id="kobo.29.1">Scope and topics</span></h2>
<p><span class="koboSpan" id="kobo.30.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.31.1">HashiCorp Terraform Associate Certification</span></strong><span class="koboSpan" id="kobo.32.1"> is an </span><a id="_idIndexMarker1248"/><span class="koboSpan" id="kobo.33.1">entry-level certification that will test</span><a id="_idIndexMarker1249"/><span class="koboSpan" id="kobo.34.1"> you on general concepts of IaC, Terraform’s competitive position against other tools, working with code using the </span><strong class="bold"><span class="koboSpan" id="kobo.35.1">HashiCorp Configuration Language</span></strong><span class="koboSpan" id="kobo.36.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.37.1">HCL</span></strong><span class="koboSpan" id="kobo.38.1">), and </span><a id="_idIndexMarker1250"/><span class="koboSpan" id="kobo.39.1">using the core Terraform workflow as well as other workflows that are supported through various sub-commands within </span><a id="_idIndexMarker1251"/><span class="koboSpan" id="kobo.40.1">the </span><strong class="bold"><span class="koboSpan" id="kobo.41.1">Command-Line </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.42.1">Interface</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.43.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.44.1">CLI</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.45.1">).</span></span></p>
<p><span class="koboSpan" id="kobo.46.1">There is a new exam that is coming soon called </span><strong class="bold"><span class="koboSpan" id="kobo.47.1">Terraform Authoring and Operations Professional</span></strong><span class="koboSpan" id="kobo.48.1">. </span><span class="koboSpan" id="kobo.48.2">This </span><a id="_idIndexMarker1252"/><span class="koboSpan" id="kobo.49.1">exam is designed for seasoned practitioners who have extensive experience in managing production systems, developing reusable modules, and operating within a mature enterprise IaC environment. </span><span class="koboSpan" id="kobo.49.2">It aims to validate the advanced skills and deep understanding required to efficiently author and manage Terraform configurations at scale. </span><span class="koboSpan" id="kobo.49.3">Candidates can expect to be tested on their ability to implement complex infrastructure architectures, optimize workflows, and ensure best practices in an enterprise environment. </span><span class="koboSpan" id="kobo.49.4">This certification is an excellent opportunity for those looking to demonstrate their expertise in leveraging Terraform’s full capabilities in a sophisticated and dynamic </span><span class="No-Break"><span class="koboSpan" id="kobo.50.1">infrastructure landscape.</span></span></p>
<p><span class="koboSpan" id="kobo.51.1">This book is designed to help you go beyond many of the foundational concepts covered in the Associate exam and help you prepare for the Professional exam. </span><span class="koboSpan" id="kobo.51.2">As a result, our journey in this book has been taking a hyper-practical approach to building actual cloud architectures using Terraform and implementing collaborative flows with Terraform and an automation pipeline tool, which, for the entirety of this book, was </span><span class="No-Break"><span class="koboSpan" id="kobo.52.1">GitHub Actions.</span></span></p>
<p><span class="koboSpan" id="kobo.53.1">As you can see in the following diagram, I map chapters within this book to actual topics covered within the </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">Associate exam:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer214">
<span class="koboSpan" id="kobo.55.1"><img alt="Figure 18.1 – Map of Associate certification topics to chapters in this book" src="image/B21183_18_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.56.1">Figure 18.1 – Map of Associate certification topics to chapters in this book</span></p>
<p><span class="koboSpan" id="kobo.57.1">We breezed through the foundational conceptual layers of IaC, Terraform’s architecture, and HCL in the first three chapters of this book. </span><span class="koboSpan" id="kobo.57.2">This was by design, as this book is intended for an intermediate to advanced audience and not a </span><span class="No-Break"><span class="koboSpan" id="kobo.58.1">beginner’s guide.</span></span></p>
<p><span class="koboSpan" id="kobo.59.1">This allowed us to dedicate some time, in </span><em class="italic"><span class="koboSpan" id="kobo.60.1">Chapters 4</span></em><span class="koboSpan" id="kobo.61.1"> through </span><em class="italic"><span class="koboSpan" id="kobo.62.1">6</span></em><span class="koboSpan" id="kobo.63.1">, to the conceptual layer that most Terraform practitioners actually spend their time in—the cloud architectures that they are designing and provisioning when we set the bases for the cloud computing paradigms we would be working with across all </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">three clouds.</span></span></p>
<p><span class="koboSpan" id="kobo.65.1">Then, we hit the ground running, getting our hands dirty and building three real-world solutions for each </span><a id="_idIndexMarker1253"/><span class="koboSpan" id="kobo.66.1">cloud. </span><span class="koboSpan" id="kobo.66.2">As you can see, we spent most of our time in the book working on implementing HCL code across all three clouds—AWS, Azure, and GCP—and across three cloud computing paradigms—virtual machines, containers, and serverless. </span><span class="koboSpan" id="kobo.66.3">In these nine solutions, we implemented Terraform modules and delved deep into configuration using three corresponding Terraform providers: </span><strong class="source-inline"><span class="koboSpan" id="kobo.67.1">aws</span></strong><span class="koboSpan" id="kobo.68.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.69.1">azure</span></strong><span class="koboSpan" id="kobo.70.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.72.1">GCP</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.73.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.74.1">In </span><em class="italic"><span class="koboSpan" id="kobo.75.1">Chapters 16</span></em><span class="koboSpan" id="kobo.76.1"> and </span><em class="italic"><span class="koboSpan" id="kobo.77.1">17</span></em><span class="koboSpan" id="kobo.78.1">, we focused on the non-core workflows involving advanced topics in state management and configuration importation that are common and necessary when working with existing environments—whether or not they were originally provisioned </span><span class="No-Break"><span class="koboSpan" id="kobo.79.1">with Terraform.</span></span></p>
<p><span class="koboSpan" id="kobo.80.1">In the Professional exam, this is still significant coverage of all the key topics with one </span><span class="No-Break"><span class="koboSpan" id="kobo.81.1">key exception:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer215">
<span class="koboSpan" id="kobo.82.1"><img alt="Figure 18.2 – Map of Professional certification topics to chapters in this book" src="image/B21183_18_2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.83.1">Figure 18.2 – Map of Professional certification topics to chapters in this book</span></p>
<p><span class="koboSpan" id="kobo.84.1">The notable </span><a id="_idIndexMarker1254"/><span class="koboSpan" id="kobo.85.1">exception is </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">Terraform Cloud</span></strong><span class="koboSpan" id="kobo.87.1">, which I chose to omit as a main focus of this book since I don’t think knowledge of it is required to master Terraform at this time. </span><span class="koboSpan" id="kobo.87.2">We will look at Terraform Cloud in the next section of this chapter, as I think it is an interesting topic</span><a id="_idIndexMarker1255"/><span class="koboSpan" id="kobo.88.1"> area for further study if you want to leverage some of its capabilities to streamline your organization’s </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">collaborative work</span><a id="_idTextAnchor745"/><span class="koboSpan" id="kobo.90.1">flows.</span></span></p>
<h2 id="_idParaDest-318"><a id="_idTextAnchor746"/><span class="koboSpan" id="kobo.91.1">Preparation</span></h2>
<p><span class="koboSpan" id="kobo.92.1">Go and check out</span><a id="_idIndexMarker1256"/><span class="koboSpan" id="kobo.93.1"> the study guides for both the Associate and Professional exams. </span><span class="koboSpan" id="kobo.93.2">The study guides have helpful links to the official documentation, which should augment the contents of this book. </span><span class="koboSpan" id="kobo.93.3">Remember, this book was intended to be a practical guide for those who want to master Terraform to provision cloud architecture. </span><span class="koboSpan" id="kobo.93.4">That doesn’t necessarily mean memorizing every nook and cranny of the Terraform CLI. </span><span class="koboSpan" id="kobo.93.5">I specifically chose to focus on skills that will help you start developing real-world solutions no matter what cloud and cloud computing paradigm you’ll be </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">working with.</span></span></p>
<p><span class="koboSpan" id="kobo.95.1">The exam will likely have tricky edge cases or obscure commands that are seldom used, so be ready for that, but I wouldn’t dedicate a tremendous amount of time to it. </span><span class="koboSpan" id="kobo.95.2">Make yourself a quick cheat sheet of some of these obscure commands and how to use them. </span><span class="koboSpan" id="kobo.95.3">Employ flashcards to help you memorize them if you feel like you need to. </span><span class="koboSpan" id="kobo.95.4">If you have a solid understanding of Terraform’s architecture and are hands-on with it, you should </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">do well.</span></span></p>
<p><span class="koboSpan" id="kobo.97.1">My best advice is to study through hands-on experience. </span><span class="koboSpan" id="kobo.97.2">Take the projects in this book, and feel free to clone them from my GitHub repositories, but to maximize your own mastery, develop them from scratch in your own repository on GitHub. </span><span class="koboSpan" id="kobo.97.3">Recreate them, provision yourself and the environment, and then improve upon them. </span><span class="koboSpan" id="kobo.97.4">Think about how you would like to modularize components within them to be more reusable. </span><span class="koboSpan" id="kobo.97.5">Go ahead and implement those modules, and then refactor your environment to use your new modules. </span><span class="koboSpan" id="kobo.97.6">Treat your environment as if it were production and try to minimize the impact on your environment by making sure you avoid replacing resources in your existing environment while trying to refactor to use your </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">new modules.</span></span></p>
<p><span class="koboSpan" id="kobo.99.1">I sat for the exam while I was at HashiConf in October 2023. </span><span class="koboSpan" id="kobo.99.2">I didn’t study, I didn’t prepare, I didn’t even read the study guide. </span><span class="koboSpan" id="kobo.99.3">I passed with a score of 84.21%. </span><span class="koboSpan" id="kobo.99.4">I was pretty happy about it. </span><span class="koboSpan" id="kobo.99.5">Am I telling you this to brag? </span><span class="koboSpan" id="kobo.99.6">No. </span><span class="koboSpan" id="kobo.99.7">Well, maybe a little, but seriously, my point is that the best way for you to prepare is by doing. </span><span class="koboSpan" id="kobo.99.8">How was I able to pass without studying at all? </span><span class="koboSpan" id="kobo.99.9">Because I’ve been hands-on with Terraform for several years and know it inside and out. </span><span class="koboSpan" id="kobo.99.10">Did I know every obscure command within the Terraform CLI? </span><span class="koboSpan" id="kobo.99.11">Absolutely not. </span><span class="koboSpan" id="kobo.99.12">Had I ever used Terraform Cloud? </span><span class="koboSpan" id="kobo.99.13">Not for one New York minute. </span><span class="koboSpan" id="kobo.99.14">You have to ask yourself, do you want to pass an exam, or do you want to upskill yourself and become a dangerous force in the cloud automation space with one of the most powerful automation tools in the world? </span><span class="koboSpan" id="kobo.99.15">I think the answer is clear. </span><span class="koboSpan" id="kobo.99.16">Focus on the primary objective with gazelle-like intensity and augment it with a bit of studying more obscurities, and you will </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">d</span><a id="_idTextAnchor747"/><span class="koboSpan" id="kobo.101.1">o well.</span></span></p>
<p><span class="koboSpan" id="kobo.102.1">Now that you are energized, feeling empowered by all that you have learned from this book, and ready to</span><a id="_idIndexMarker1257"/><span class="koboSpan" id="kobo.103.1"> take the Terraform Associate or upcoming Professional exam, let’s look forward to some interesting topics that every Terraformer (not just the Azure ones) should </span><span class="No-Break"><span class="koboSpan" id="kobo.104.1">know about.</span></span></p>
<h1 id="_idParaDest-319"><a id="_idTextAnchor748"/><span class="koboSpan" id="kobo.105.1">Terraform Cloud</span></h1>
<p><span class="koboSpan" id="kobo.106.1">In this section, we’ll explore</span><a id="_idIndexMarker1258"/><span class="koboSpan" id="kobo.107.1"> Terraform Cloud, a powerful platform designed to enhance Terraform’s capabilities in team-based and enterprise environments. </span><span class="koboSpan" id="kobo.107.2">Terraform Cloud provides a centralized hub for managing and automating Terraform workflows, offering features such as version control integration, remote state management, and collaborative </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">IaC development.</span></span></p>
<p><span class="koboSpan" id="kobo.109.1">We’ll take a brief look at the core components of Terraform Cloud, including advanced features such as workspace management, private module registry, cost estimation, and </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">policy enforcement.</span></span></p>
<p><span class="koboSpan" id="kobo.111.1">By understanding Terraform Cloud’s features and use cases, you’ll gain insights into how it can streamline your infrastructure management processes and foster collaboration among team </span><a id="_idIndexMarker1259"/><span class="koboSpan" id="kobo.112.1">members. </span><span class="koboSpan" id="kobo.112.2">It’s definitely something to consider if you are looking to scale up your organization’s IaC </span><span class="No-Break"><span class="koboSpan" id="kobo.113.1">maturit</span><a id="_idTextAnchor749"/><span class="koboSpan" id="kobo.114.1">y quickly.</span></span></p>
<h2 id="_idParaDest-320"><a id="_idTextAnchor750"/><span class="koboSpan" id="kobo.115.1">Features</span></h2>
<p><span class="koboSpan" id="kobo.116.1">Terraform Cloud’s</span><a id="_idIndexMarker1260"/><span class="koboSpan" id="kobo.117.1"> mission is about streamlining the process of managing environments with IaC. </span><span class="koboSpan" id="kobo.117.2">This will include features that handle day-to-day operation concerns of using Terraform, as well as more advanced capabilities related to empowering teams and scaling across larger organizations within the enterprise. </span><span class="koboSpan" id="kobo.117.3">The following is a diagram showing the grouping of </span><span class="No-Break"><span class="koboSpan" id="kobo.118.1">these capabilities:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer216">
<span class="koboSpan" id="kobo.119.1"><img alt="Figure 18.3 – Terraform Cloud capabilities" src="image/B21183_18_3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.120.1">Figure 18.3 – Terraform Cloud capabilities</span></p>
<p><span class="koboSpan" id="kobo.121.1">These groupings are across four </span><span class="No-Break"><span class="koboSpan" id="kobo.122.1">functional areas:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.123.1">Core </span><span class="No-Break"><span class="koboSpan" id="kobo.124.1">workflow operations</span></span></li>
<li><span class="koboSpan" id="kobo.125.1">Organization </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">and logistics</span></span></li>
<li><span class="koboSpan" id="kobo.127.1">Module management </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">and publishing</span></span></li>
<li><span class="koboSpan" id="kobo.129.1">Day 2 </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">operations support</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.131.1">We’ll explore each </span><a id="_idIndexMarker1261"/><span class="koboSpan" id="kobo.132.1">of these functional areas individually to get a better idea of what Terraform Cloud brings to</span><a id="_idTextAnchor751"/> <span class="No-Break"><span class="koboSpan" id="kobo.133.1">the table.</span></span></p>
<h3><span class="koboSpan" id="kobo.134.1">Core workflow operations</span></h3>
<p><span class="koboSpan" id="kobo.135.1">As we know, Terraform, itself </span><a id="_idIndexMarker1262"/><span class="koboSpan" id="kobo.136.1">is a simple command-line tool that processes HCL code and leverages a multitude of providers to generate a plan and then execute that plan by orchestrating resource creation across multiple providers. </span><span class="koboSpan" id="kobo.136.2">Terraform Cloud is a multi-tenant SaaS offering that encapsulates the functionalities of the command-line tool and hosts it as a managed </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1">service offering.</span></span></p>
<p><span class="koboSpan" id="kobo.138.1">As a result, a significant portion of the value of Terraform Cloud comes from, well, Terraform itself—that is, the command-line tool that does all the work. </span><span class="koboSpan" id="kobo.138.2">However, Terraform Cloud provides many things beyond what is built into the command-line tool. </span><span class="koboSpan" id="kobo.138.3">As a hosted service, it sits atop our version control system and acts as a pipelining tool that executes the Terraform </span><strong class="source-inline"><span class="koboSpan" id="kobo.139.1">plan</span></strong><span class="koboSpan" id="kobo.140.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.141.1">apply</span></strong><span class="koboSpan" id="kobo.142.1"> commands. </span><span class="koboSpan" id="kobo.142.2">In this book, we worked with GitHub Actions to integrate the Terraform command-line tool into our workflows to run the core Terraform workflow, which includes </span><strong class="source-inline"><span class="koboSpan" id="kobo.143.1">plan</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.144.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.145.1">apply</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.147.1">Terraform Cloud’s capabilities in the </span><em class="italic"><span class="koboSpan" id="kobo.148.1">Core Workflow Operations</span></em><span class="koboSpan" id="kobo.149.1"> category focus on providing Terraform as a service, similar to what pipeline tools such as </span><strong class="bold"><span class="koboSpan" id="kobo.150.1">GitHub Actions</span></strong><span class="koboSpan" id="kobo.151.1"> do for general-purpose</span><a id="_idIndexMarker1263"/><span class="koboSpan" id="kobo.152.1"> pipelines, but Terraform-specific. </span><span class="koboSpan" id="kobo.152.2">This means Terraform Cloud is essentially an automation-hosted platform that specializes in executing Terraform configurations. </span><span class="koboSpan" id="kobo.152.3">As a result, the service is tailored to Terraform’s specific needs, including things such as remote state management. </span><span class="koboSpan" id="kobo.152.4">However, it also includes essential features found in general-purpose pipelining tools, such as source control integration, cloud platform credential management, and secure variable storage. </span><span class="koboSpan" id="kobo.152.5">It also offers extension points for integration with external tools, allowing it to be integrated into broader </span><span class="No-Break"><span class="koboSpan" id="kobo.153.1">automation o</span><a id="_idTextAnchor752"/><span class="koboSpan" id="kobo.154.1">rchestration.</span></span></p>
<h3><span class="koboSpan" id="kobo.155.1">Organizational and logistics</span></h3>
<p><span class="koboSpan" id="kobo.156.1">The organizational </span><a id="_idIndexMarker1264"/><span class="koboSpan" id="kobo.157.1">and logistics aspect of Terraform Cloud is designed to facilitate collaboration and management by teams within organizations large and small. </span><span class="koboSpan" id="kobo.157.2">It provides a structured environment to organize users, roles, and permissions across logical projects, leading to the creation and operation of Terraform workspaces—ensuring that team members have the appropriate access and permissions to perform their tasks effectively. </span><span class="koboSpan" id="kobo.157.3">Like other more general-purpose automation platforms</span><a id="_idIndexMarker1265"/><span class="koboSpan" id="kobo.158.1"> such as </span><strong class="bold"><span class="koboSpan" id="kobo.159.1">Azure DevOps</span></strong><span class="koboSpan" id="kobo.160.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.161.1">GitHub Enterprise</span></strong><span class="koboSpan" id="kobo.162.1">, maintaining</span><a id="_idIndexMarker1266"/><span class="koboSpan" id="kobo.163.1"> order and control in these collaborative environments is </span><a id="_idIndexMarker1267"/><span class="No-Break"><span class="koboSpan" id="kobo.164.1">baseli</span><a id="_idTextAnchor753"/><span class="koboSpan" id="kobo.165.1">ne functionality.</span></span></p>
<h3><span class="koboSpan" id="kobo.166.1">Module management and publishing</span></h3>
<p><span class="koboSpan" id="kobo.167.1">Terraform Cloud’s</span><a id="_idIndexMarker1268"/><span class="koboSpan" id="kobo.168.1"> capabilities within module management and publishing enable teams and organizations to build, maintain, and share their own libraries of Terraform modules across their organization. </span><span class="koboSpan" id="kobo.168.2">As we’ve discussed, Terraform modules often encapsulate organizationally approved best practices and are often maintained by a central organization responsible for their implementation and built-in quality. </span><span class="koboSpan" id="kobo.168.3">Terraform Cloud supports this publishing process by integrating Terraform module testing and validation to ensure quality before new versions of Terraform modules are distributed across an organization. </span><span class="koboSpan" id="kobo.168.4">Additionally, these modules can be made available in no-code environments, providing a service catalog-like experience for end users. </span><span class="koboSpan" id="kobo.168.5">This empowers teams to standardize and scale their infrastructure management efforts but also makes the solutions that they build available to parts of the organization that are unfamiliar with IaC or Ter</span><a id="_idTextAnchor754"/><span class="koboSpan" id="kobo.169.1">raform </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">in general.</span></span></p>
<h3><span class="koboSpan" id="kobo.171.1">Day 2 operations support</span></h3>
<p><span class="koboSpan" id="kobo.172.1">The Day 2 operations </span><a id="_idIndexMarker1269"/><span class="koboSpan" id="kobo.173.1">support functionality in Terraform Cloud is geared toward managing and maintaining existing systems in production. </span><span class="koboSpan" id="kobo.173.2">It includes continuous validation to ensure environments remain up to date with the desired state described within the code and drift detection to identify changes made outside of Terraform code. </span><span class="koboSpan" id="kobo.173.3">There are also more advanced enterprise features, such as audit logging, to help larger organizations meet regulatory compliance standards and implement risk management policies to detect and prevent unplanned changes to the environment. </span><span class="koboSpan" id="kobo.173.4">Another key feature is the policy-as-code capabilities provided by </span><strong class="bold"><span class="koboSpan" id="kobo.174.1">Sentinel</span></strong><span class="koboSpan" id="kobo.175.1">, which enables governance and security controls over the environments managed </span><a id="_idTextAnchor755"/><span class="koboSpan" id="kobo.176.1">by </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">Terraform Cloud.</span></span></p>
<h3><span class="koboSpan" id="kobo.178.1">Pricing tiers</span></h3>
<p><span class="koboSpan" id="kobo.179.1">The </span><em class="italic"><span class="koboSpan" id="kobo.180.1">Free</span></em><span class="koboSpan" id="kobo.181.1"> tier provides</span><a id="_idIndexMarker1270"/><span class="koboSpan" id="kobo.182.1"> all IaC capabilities of Terraform as </span><a id="_idIndexMarker1271"/><span class="koboSpan" id="kobo.183.1">a hosted service out of the box and all of the core workflow operations capabilities—including remote state, secure variable storage, dynamic provider credentials, and source control integration. </span><span class="koboSpan" id="kobo.183.2">It’s a great way to get your feet wet exploring the platform and learning the new way of working with Terraform Cloud as the foundation as opposed to a general-purpose pipeline tool. </span><span class="koboSpan" id="kobo.183.3">As expected, it is pretty limited with a single concurrent job and limited access to more advanced enterprise features such as Policy-as-Code and run tasks that are designed to help you scale Terraform Cloud into a larger, more sophisticated IaC-powered organization. </span><span class="koboSpan" id="kobo.183.4">The Free tier allows you to provision up to </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">500 resources.</span></span></p>
<p><span class="koboSpan" id="kobo.185.1">The </span><em class="italic"><span class="koboSpan" id="kobo.186.1">Standard</span></em><span class="koboSpan" id="kobo.187.1"> tier adds</span><a id="_idIndexMarker1272"/><span class="koboSpan" id="kobo.188.1"> team management and increases the number of concurrent jobs from one to three, which probably makes sense in a team environment. </span><span class="koboSpan" id="kobo.188.2">The pricing model is per hour per resource, which means every resource you declare in your Terraform configuration will count toward your usage. </span><span class="koboSpan" id="kobo.188.3">The price per hour per resource, at the time of writing, was $0.00014. </span><span class="koboSpan" id="kobo.188.4">To give you an idea of how much this would cost to operate, one of the environments that I manage is an environment with a small Kubernetes cluster and all the surrounding supporting infrastructure. </span><span class="koboSpan" id="kobo.188.5">I provisioned exactly 110 resources in this environment </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">using Terraform:</span></span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.190.1">110 resources x $0.00014 per resources per hour = $0.0154 </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.191.1">per hour</span></em></span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.192.1">$0.0154 per hour * 24 hours per day * 30 days per month = $11.088 </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.193.1">per month</span></em></span></p>
<p><span class="koboSpan" id="kobo.194.1">So, for roughly 11 dollars per month, I can use Terraform Cloud to manage my environment. </span><span class="koboSpan" id="kobo.194.2">This is in addition to what I pay for my source control management system and the cloud hosting costs of </span><span class="No-Break"><span class="koboSpan" id="kobo.195.1">the environment.</span></span></p>
<p><span class="koboSpan" id="kobo.196.1">The </span><em class="italic"><span class="koboSpan" id="kobo.197.1">Plus</span></em><span class="koboSpan" id="kobo.198.1"> tier introduces </span><a id="_idIndexMarker1273"/><span class="koboSpan" id="kobo.199.1">Day 2 operations support scenarios such as audit logging, drift detection, continuous validation, ephemeral workspaces, ServiceNow integrations, and unlimited Policy-as-Code to help you better manage your environments and integrate with your </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">day-to-day operations.</span></span></p>
<p><span class="koboSpan" id="kobo.201.1">The </span><em class="italic"><span class="koboSpan" id="kobo.202.1">Enterprise</span></em><span class="koboSpan" id="kobo.203.1"> tier is</span><a id="_idIndexMarker1274"/><span class="koboSpan" id="kobo.204.1"> essentially the hosted offering that allows you to deploy Terraform Enterprise into your own data center, which can be important to large enterprises that are not interested in taking advantage of the lowered operating cost of utilizing HashiCorp’s multi-tenant offering, </span><span class="No-Break"><span class="koboSpan" id="kobo.205.1">Terraform Cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.206.1">In this section, we looked at Terraform Cloud, including what it offers in terms of capabilities and recognizing that, unlike more general-purpose automation platforms, it is tailored specifically for IaC management and collaboration using Terraform. </span><span class="koboSpan" id="kobo.206.2">Compared to these more general-purpose pipeline tools, Terraform Cloud stands out by offering features specifically designed for Terraform workflows, such as remote state management, secure variable storage, and integrated module management. </span><span class="koboSpan" id="kobo.206.3">This focus on Terraform-specific functionality makes it an ideal choice for teams looking to take their IaC processes to the next level. </span><span class="koboSpan" id="kobo.206.4">Next, we’ll look at some other key trends to be aware of that are out of</span><a id="_idIndexMarker1275"/><span class="koboSpan" id="kobo.207.1"> the scope of this book but should be on the radar of anyone looking to truly </span><span class="No-Break"><span class="koboSpan" id="kobo.208.1">master Terraform.</span></span></p>
<h1 id="_idParaDest-321"><a id="_idTextAnchor756"/><span class="koboSpan" id="kobo.209.1">What’s next?</span></h1>
<p><span class="koboSpan" id="kobo.210.1">In this section, we’ll explore some emerging trends within the Terraform community that are essential for anyone working with Terraform to be aware of. </span><span class="koboSpan" id="kobo.210.2">While these topics are technically outside the scope of this book, including upcoming features that have not even been finalized and may evolve over time, understanding these emerging topics can provide valuable context into the future direction of Terraform and help you stay ahead of the curve in your journe</span><a id="_idTextAnchor757"/><span class="koboSpan" id="kobo.211.1">y to </span><span class="No-Break"><span class="koboSpan" id="kobo.212.1">mastering Terraform.</span></span></p>
<h2 id="_idParaDest-322"><a id="_idTextAnchor758"/><span class="koboSpan" id="kobo.213.1">CDK</span></h2>
<p><span class="koboSpan" id="kobo.214.1">The</span><a id="_idIndexMarker1276"/><span class="koboSpan" id="kobo.215.1"> Terraform </span><strong class="bold"><span class="koboSpan" id="kobo.216.1">Cloud Development Kit</span></strong><span class="koboSpan" id="kobo.217.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.218.1">CDK</span></strong><span class="koboSpan" id="kobo.219.1">) is a method for developing Terraform configuration using imperative programming languages that you already know and use within your application development. </span><span class="koboSpan" id="kobo.219.2">Any language can be used, from Python to C# and from TypeScript to Java. </span><span class="koboSpan" id="kobo.219.3">Any Terraform provider and Terraform modules can be used as well. </span><span class="koboSpan" id="kobo.219.4">It’s essentially the same thing as working with HCL but using the programming language of </span><span class="No-Break"><span class="koboSpan" id="kobo.220.1">your choice.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer217">
<span class="koboSpan" id="kobo.221.1"><img alt="Figure 18.4 – Use the programming language of your choice" src="image/B21183_18_4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.222.1">Figure 18.4 – Use the programming language of your choice</span></p>
<p><span class="koboSpan" id="kobo.223.1">Whatever language you choose will ultimately compile down into a Terraform-compatible JSON file that is then interpreted by Terraform in a similar way as HCL files </span><span class="No-Break"><span class="koboSpan" id="kobo.224.1">are processed.</span></span></p>
<p><span class="koboSpan" id="kobo.225.1">This option is great for existing development teams that already work with a programming language of choice and don’t want to invest energy in learning the HCL. </span><span class="koboSpan" id="kobo.225.2">However, for non-developers, the HCL is definitely the way to go as it provides a simple, functional language that is easier to adopt and already has a massive ecosystem of practitioners that are using it, asking and answering questions about it, and sharing code on public GitHub</span><a id="_idIndexMarker1277"/><span class="koboSpan" id="kobo.226.1"> repositories that can h</span><a id="_idTextAnchor759"/><span class="koboSpan" id="kobo.227.1">elp you along on </span><span class="No-Break"><span class="koboSpan" id="kobo.228.1">your way.</span></span></p>
<h2 id="_idParaDest-323"><a id="_idTextAnchor760"/><span class="koboSpan" id="kobo.229.1">Terraform Stacks</span></h2>
<p><strong class="bold"><span class="koboSpan" id="kobo.230.1">Terraform Stacks</span></strong><span class="koboSpan" id="kobo.231.1">, a highly </span><a id="_idIndexMarker1278"/><span class="koboSpan" id="kobo.232.1">anticipated feature on the horizon for Terraform, promises to revolutionize the way we design and manage complex architectures across multiple control planes. </span><span class="koboSpan" id="kobo.232.2">This innovative feature is expected to provide a seamless and integrated experience for users working with Terraform Cloud</span><a id="_idIndexMarker1279"/><span class="koboSpan" id="kobo.233.1"> and the </span><strong class="bold"><span class="koboSpan" id="kobo.234.1">Terraform Community Edition</span></strong><span class="koboSpan" id="kobo.235.1"> (the command-line tool). </span><span class="koboSpan" id="kobo.235.2">By allowing for more sophisticated organization and modularization of IaC, Terraform Stacks aims to streamline the process of deploying and managing large-scale, multi-tiered environments. </span><span class="koboSpan" id="kobo.235.3">We’ll dig into what we know right now based on what was made public by HashiCorp at the time of writing and how it’s supposed to work wh</span><a id="_idTextAnchor761"/><span class="koboSpan" id="kobo.236.1">en it’s </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">eventually released.</span></span></p>
<h3><span class="koboSpan" id="kobo.238.1">Current state</span></h3>
<p><span class="koboSpan" id="kobo.239.1">In the current </span><a id="_idIndexMarker1280"/><span class="koboSpan" id="kobo.240.1">landscape of Terraform usage, a singular root module serves as the cornerstone of infrastructure deployment. </span><span class="koboSpan" id="kobo.240.2">This root module encompasses the provider configuration and engages with various Terraform resources, either directly or via module references. </span><span class="koboSpan" id="kobo.240.3">The versatility of these root modules is heightened by supplying them with distinct input parameters tailored to the desired environment for deployment. </span><span class="koboSpan" id="kobo.240.4">To further segregate the deployment of each root module instance, Terraform workspaces are employed, resulting in individual Terraform state files. </span><span class="koboSpan" id="kobo.240.5">These state files are then uniquely associated with specific environments, such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">DEV</span></strong><span class="koboSpan" id="kobo.242.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">TEST</span></strong><span class="koboSpan" id="kobo.244.1">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">PROD</span></strong><span class="koboSpan" id="kobo.246.1">, effectively encapsulating the configuration and status of the deployed infrastructure within </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">each environment:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer218">
<span class="koboSpan" id="kobo.248.1"><img alt="Figure 18.5 – Current state: Terraform workspaces and root modules" src="image/B21183_18_5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.249.1">Figure 18.5 – Current state: Terraform workspaces and root modules</span></p>
<p><span class="koboSpan" id="kobo.250.1">In the realm of provisioning complex environments with Terraform, it is often necessary to employ multiple root modules to delineate layers of architecture based on their dependencies, such as blast radius considerations or concrete control plane dependencies such as those between a cloud platform and a Kubernetes control plane. </span><span class="koboSpan" id="kobo.250.2">This is not the only scenario where you will run into control plane dependencies within the providers, but it is a common one as the use of managed Kubernetes offerings continues to grow in popularity. </span><span class="koboSpan" id="kobo.250.3">The dependency can arise anytime you are provisioning resources with two or more providers and one provider provisions a resource that is then used to configure another Terraform provider. </span><span class="koboSpan" id="kobo.250.4">Depending on the way this dependent </span><a id="_idIndexMarker1281"/><span class="koboSpan" id="kobo.251.1">provider initializes, you might see a conflict arise because providers that rely on their control plane to be provisioned in another provider’s resource can experience deadlocks in both </span><strong class="source-inline"><span class="koboSpan" id="kobo.252.1">terraform apply</span></strong><span class="koboSpan" id="kobo.253.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">terraform destroy</span></strong><span class="koboSpan" id="kobo.255.1">. </span><span class="koboSpan" id="kobo.255.2">This is because Terraform cannot plan resources on the control plane, which doesn’t </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">exist yet.</span></span></p>
<p><span class="koboSpan" id="kobo.257.1">Some other common scenarios that I have encountered</span><a id="_idIndexMarker1282"/><span class="koboSpan" id="kobo.258.1"> are with the </span><strong class="bold"><span class="koboSpan" id="kobo.259.1">Azure Managed Grafana Service</span></strong><span class="koboSpan" id="kobo.260.1">, which provisions a </span><a id="_idIndexMarker1283"/><span class="koboSpan" id="kobo.261.1">hosted </span><strong class="bold"><span class="koboSpan" id="kobo.262.1">Grafana</span></strong><span class="koboSpan" id="kobo.263.1"> instance on Azure. </span><span class="koboSpan" id="kobo.263.2">Although this is an Azure service, it is fully compatible with the Grafana endpoint, which means you can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1">grafana</span></strong><span class="koboSpan" id="kobo.265.1"> provider for Terraform to provision resources for it. </span><span class="koboSpan" id="kobo.265.2">This mirrors the dependency created</span><a id="_idIndexMarker1284"/><span class="koboSpan" id="kobo.266.1"> by </span><strong class="bold"><span class="koboSpan" id="kobo.267.1">Azure Kubernetes Service</span></strong><span class="koboSpan" id="kobo.268.1"> (also an Azure resource) and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">kubernetes</span></strong><span class="koboSpan" id="kobo.270.1"> provider. </span><span class="koboSpan" id="kobo.270.2">It doesn’t matter what cloud platform you are working with. </span><span class="koboSpan" id="kobo.270.3">Many cloud platforms have similar managed service offerings that are provisioned through their corresponding provider, which produces an endpoint that can be automated by a Terraform provider designed for that control plane. </span><span class="koboSpan" id="kobo.270.4">This is even the case with something as fun as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.271.1">minecraft</span></strong><span class="koboSpan" id="kobo.272.1"> provider—whether you are using EC2, Azure VMs, </span><span class="No-Break"><span class="koboSpan" id="kobo.273.1">or GCE!</span></span></p>
<p><span class="koboSpan" id="kobo.274.1">While there are two main approaches to this, both necessitate executing </span><strong class="source-inline"><span class="koboSpan" id="kobo.275.1">terraform apply</span></strong><span class="koboSpan" id="kobo.276.1"> multiple times. </span><span class="koboSpan" id="kobo.276.2">The first approach involves provisioning each stage of our deployment independently and then linking the upstream dependency to the downstream stage using data sources, with values provided by input variables. </span><span class="koboSpan" id="kobo.276.3">This method allows different stages to be deployed relatively independently by various teams, but it introduces additional configuration management overhead, as each downstream dependency must explicitly reference the previously provisioned upstream stages. </span><span class="koboSpan" id="kobo.276.4">Consequently, this approach results in a highly serial deployment pattern, requiring each upstream dependency to be deployed and stabilized before progressing to the next </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">downstream </span></span><span class="No-Break"><a id="_idIndexMarker1285"/></span><span class="No-Break"><span class="koboSpan" id="kobo.278.1">dependency:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer219">
<span class="koboSpan" id="kobo.279.1"><img alt="Figure 18.6 – Current state: independent deployments with data source dependencies" src="image/B21183_18_6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.280.1">Figure 18.6 – Current state: independent deployments with data source dependencies</span></p>
<p><span class="koboSpan" id="kobo.281.1">An alternative approach to provisioning complex environments with Terraform diverges from independent deployments and instead adopts a monolithic pipeline that sequentially executes </span><strong class="source-inline"><span class="koboSpan" id="kobo.282.1">terraform apply</span></strong><span class="koboSpan" id="kobo.283.1">. </span><span class="koboSpan" id="kobo.283.2">In this model, the dependencies are seamlessly integrated by piping the Terraform outputs from the upstream dependency directly into the inputs of the downstream dependency. </span><span class="koboSpan" id="kobo.283.3">While this method streamlines automation, it also results in a tighter coupling of the environments. </span><span class="koboSpan" id="kobo.283.4">Irrespective of the approach—whether it involves independent deployments or a monolithic pipeline—there is an inherent necessity to implement a substantial amount of </span><em class="italic"><span class="koboSpan" id="kobo.284.1">glue</span></em><span class="koboSpan" id="kobo.285.1"> to stitch together multiple </span><strong class="source-inline"><span class="koboSpan" id="kobo.286.1">terraform apply</span></strong><span class="koboSpan" id="kobo.287.1"> steps. </span><span class="koboSpan" id="kobo.287.2">This entails writing Bash scripts or similar automation to act as the connective tissue, ensuring the correct values are passed from one pipeline job to the next, thereby maintaining the integrity of the deployment process across </span><a id="_idIndexMarker1286"/><span class="No-Break"><span class="koboSpan" id="kobo.288.1">various stages:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer220">
<span class="koboSpan" id="kobo.289.1"><img alt="Figure 18.7 – Current state: integrated deploymen﻿t with output-based dependencies" src="image/Image96503.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.290.1">Figure 18.7 – Current state: integrated deploymen</span><a id="_idTextAnchor762"/><span class="koboSpan" id="kobo.291.1">t with output-based dependencies</span></p>
<h3><span class="koboSpan" id="kobo.292.1">Stacks</span></h3>
<p><span class="koboSpan" id="kobo.293.1">Defined in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.294.1">.tfstack</span></strong><span class="koboSpan" id="kobo.295.1"> file, Stacks </span><a id="_idIndexMarker1287"/><span class="koboSpan" id="kobo.296.1">allow you to declare one or more </span><strong class="source-inline"><span class="koboSpan" id="kobo.297.1">component</span></strong><span class="koboSpan" id="kobo.298.1"> blocks that essentially define what is currently a root module. </span><span class="koboSpan" id="kobo.298.2">These components represent discrete and deterministic provisioning stages within </span><span class="No-Break"><span class="koboSpan" id="kobo.299.1">a deployment:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer221">
<span class="koboSpan" id="kobo.300.1"><img alt="Figure 18.8 – Future state: Terraform Stacks" src="image/B21183_18_8.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.301.1">Figure 18.8 – Future state: Terraform Stacks</span></p>
<p><span class="koboSpan" id="kobo.302.1">In the preceding diagram, we see three components that make up </span><span class="No-Break"><span class="koboSpan" id="kobo.303.1">our stack:</span></span></p>
<ul>
<li><span class="No-Break"><span class="koboSpan" id="kobo.304.1">Network infrastructure</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.305.1">Compute infrastructure</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.306.1">Kubernetes deployments</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.307.1">This would be defined in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">.tfstack</span></strong><span class="koboSpan" id="kobo.309.1"> file in </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">this manner:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.311.1">
component "network" {
  source = "./network"
  inputs = {
    region = var.region
  }
  providers = {
    aws = providers.aws.this
  }
}</span></pre> <p><span class="koboSpan" id="kobo.312.1">The compute infrastructure</span><a id="_idIndexMarker1288"/><span class="koboSpan" id="kobo.313.1"> would be defined in the same file but, this time, referencing outputs from the network component that it draws a dependency on. </span><span class="koboSpan" id="kobo.313.2">This informs Terraform to provision the </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">network</span></strong><span class="koboSpan" id="kobo.315.1"> component first and resolve that stage of the deployment first before attempting to deploy the </span><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">compute</span></strong><span class="koboSpan" id="kobo.317.1"> infrastructure </span><span class="No-Break"><span class="koboSpan" id="kobo.318.1">component next:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.319.1">
component "compute" {
  source = "./compute"
  inputs = {
    region = var.region
    network_name = component.network.network_name
  }
  providers = {
    aws = providers.aws.this
  }
}</span></pre> <p><span class="koboSpan" id="kobo.320.1">After the </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">compute</span></strong><span class="koboSpan" id="kobo.322.1"> component is provisioned, we will have a Kubernetes cluster that is ready to deploy our applications and services to. </span><span class="koboSpan" id="kobo.322.2">Therefore, we declare the final component of our stack, the </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">application component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.324.1">
component "app" {
  source = "./app"
  inputs = {
    region = var.region
    cluster_name = component.compute.cluster_name
  }
  providers = {
    aws = providers.aws.this
    kubernetes = providers.kubernetes.this
    helm = providers.helm.this
  }
}</span></pre> <p><span class="koboSpan" id="kobo.325.1">This allows us to initialize the </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">kubernetes</span></strong><span class="koboSpan" id="kobo.327.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.328.1">helm</span></strong><span class="koboSpan" id="kobo.329.1"> providers only after the necessary </span><a id="_idIndexMarker1289"/><span class="koboSpan" id="kobo.330.1">steps have been taken to provision the Kubernetes cluster, which is absolutely required before we</span><a id="_idTextAnchor763"/><span class="koboSpan" id="kobo.331.1"> can even begin to execute </span><span class="No-Break"><span class="koboSpan" id="kobo.332.1">a plan.</span></span></p>
<h3><span class="koboSpan" id="kobo.333.1">Deployments</span></h3>
<p><span class="koboSpan" id="kobo.334.1">Defined in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.335.1">.tfdeploy</span></strong><span class="koboSpan" id="kobo.336.1"> file, deployments</span><a id="_idIndexMarker1290"/><span class="koboSpan" id="kobo.337.1"> allow you to declare one or more </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">deployment</span></strong><span class="koboSpan" id="kobo.339.1"> blocks that essentially define a Terraform workspace that manifests itself once provisioned into an individual Terraform state file that represents a provisioned environment. </span><span class="koboSpan" id="kobo.339.2">The introduction of deployments allows us to declaratively establish different environments that we provision in our configuration rather than implicitly through the organization of our Terraform workspaces and the context in which we execute Terraform core workflow operations such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.340.1">plan</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.341.1">and </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.342.1">apply</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.343.1">.</span></span></p>
<p><span class="koboSpan" id="kobo.344.1">Deployments act as the central place where provider configuration is established. </span><span class="koboSpan" id="kobo.344.2">This includes linking the preferred method of authentication with each provider. </span><span class="koboSpan" id="kobo.344.3">This is done using a new block called </span><strong class="source-inline"><span class="koboSpan" id="kobo.345.1">identity_token</span></strong><span class="koboSpan" id="kobo.346.1">, which would be defined in this manner </span><span class="No-Break"><span class="koboSpan" id="kobo.347.1">for AWS:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.348.1">
identity_token "aws" {
  audience = ["aws.workload.identity"]
}</span></pre> <p><span class="koboSpan" id="kobo.349.1">This would be defined in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1">.tfdeploy</span></strong><span class="koboSpan" id="kobo.351.1"> file in </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1">this manner:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.353.1">
deployment "dev" {
  variables = {
    region = "us-west-2"
    identity_token_file = identity_token.aws.jwt_filename
  }
}</span></pre> <p><span class="koboSpan" id="kobo.354.1">As you can see, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.355.1">deployment</span></strong><span class="koboSpan" id="kobo.356.1"> block allows us to establish multiple instances of our Stacks and configure them with their own input variables and provider context, including relevant authentication and </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">authorization context.</span></span></p>
<p><span class="koboSpan" id="kobo.358.1">Terraform Stacks is an exciting new capability in preview on Terraform Cloud and is planned to be released for both Terraform Cloud and Terraform Community Edition. </span><span class="koboSpan" id="kobo.358.2">As you can see, with this approach, we’ll be able to eliminate a tremendous amount of </span><em class="italic"><span class="koboSpan" id="kobo.359.1">plumbing</span></em><span class="koboSpan" id="kobo.360.1"> that we currently put </span><a id="_idIndexMarker1291"/><span class="koboSpan" id="kobo.361.1">into</span><a id="_idIndexMarker1292"/><span class="koboSpan" id="kobo.362.1"> our </span><a id="_idIndexMarker1293"/><span class="koboSpan" id="kobo.363.1">pipelines (i.e., </span><strong class="bold"><span class="koboSpan" id="kobo.364.1">GitHub Actions</span></strong><span class="koboSpan" id="kobo.365.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.366.1">Azure DevOps</span></strong><span class="koboSpan" id="kobo.367.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.368.1">Jenkins</span></strong><span class="koboSpan" id="kobo.369.1">, etc.) and replace it with Terraform configuration that we can manage with the </span><strong class="bold"><span class="koboSpan" id="kobo.370.1">Gitflow</span></strong><span class="koboSpan" id="kobo.371.1"> standards we learned about in </span><a href="B21183_06.xhtml#_idTextAnchor330"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.372.1">Chapter 6</span></em></span></a><span class="koboSpan" id="kobo.373.1">. </span><span class="koboSpan" id="kobo.373.2">If you plan on managing complex </span><a id="_idIndexMarker1294"/><span class="koboSpan" id="kobo.374.1">solutions with Terraform, this is a f</span><a id="_idTextAnchor764"/><span class="koboSpan" id="kobo.375.1">eature to watch for in </span><span class="No-Break"><span class="koboSpan" id="kobo.376.1">future releases!</span></span></p>
<h1 id="_idParaDest-324"><a id="_idTextAnchor765"/><span class="koboSpan" id="kobo.377.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.378.1">In this final chapter of </span><em class="italic"><span class="koboSpan" id="kobo.379.1">Mastering Terraform</span></em><span class="koboSpan" id="kobo.380.1">, we’ve explored the next steps for those of you looking to deepen your mastery of Terraform and stay abreast of emerging trends in the community. </span><span class="koboSpan" id="kobo.380.2">We discussed the importance of Terraform certification, highlighting the Associate and Professional </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">level exams.</span></span></p>
<p><span class="koboSpan" id="kobo.382.1">We also delved into Terraform Cloud, which can enhance automation and collaboration in your IaC process, building upon the workflows and concepts we’ve covered throughout </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">this book.</span></span></p>
<p><span class="koboSpan" id="kobo.384.1">The Terraform community is vibrant and continuously evolving, with new trends and alternative pathways emerging regularly. </span><span class="koboSpan" id="kobo.384.2">We explored some of the latest developments, including the Terraform CDK, which allows you to use Terraform with familiar programming languages, and finally, we looked at some exciting upcoming features in Terraform, such as Terraform Stacks, which promises to revolutionize the way we manage environments through IaC by providing more flexibility and modularity in defining and deploying sophist</span><a id="_idTextAnchor766"/><span class="koboSpan" id="kobo.385.1">icated and layered </span><span class="No-Break"><span class="koboSpan" id="kobo.386.1">cloud architectures.</span></span></p>
<h1 id="_idParaDest-325"><a id="_idTextAnchor767"/><span class="koboSpan" id="kobo.387.1">Closing statement</span></h1>
<p><span class="koboSpan" id="kobo.388.1">We have traveled long, and we have traveled far. </span><span class="koboSpan" id="kobo.388.2">We have explored Terraform, its architecture, its capabilities, and its form and function. </span><span class="koboSpan" id="kobo.388.3">Beyond just learning Terraform, to truly become masters of Terraform, we need to ground ourselves in the architectures and work patterns expected of us as IaC practitioners. </span><span class="koboSpan" id="kobo.388.4">That means we need a deep understanding of cloud architectures to effectively use Terraform to its fullest potential. </span><span class="koboSpan" id="kobo.388.5">This includes the various flora and fauna we will find in the wild—from virtual machines to containers to serverless—and all the surrounding ancillary resources that support those architectures. </span><span class="koboSpan" id="kobo.388.6">Once we have this core conceptual knowledge, we’ll be able to better navigate the multi-cloud world that we live in today and truly transcend our current cloud provider of choice to be ready for the future—whatever </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">may come.</span></span></p>
<p><span class="koboSpan" id="kobo.390.1">Thank you for coming on this journey with me. </span><span class="koboSpan" id="kobo.390.2">I hope you enjoyed my very focused and practical approach to mastering Terraform. </span><span class="koboSpan" id="kobo.390.3">I think the best way to learn is by doing, so I encourage you to go to GitHub, clone any or all of the solutions described in this book, and get to work on finishing your journey of </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">mastering Terraform!</span></span></p>
</div>
</body></html>