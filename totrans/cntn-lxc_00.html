<html><head></head><body><div class="preface" title="Preface"><div class="titlepage"><div><div><h1 class="title"><a id="pref09"/>Preface</h1></div></div></div><p>Not too long ago, we used to deploy applications on a single server, scaling up by adding more hardware resources—we called it "the monolith approach." Achieving high availability was a matter of adding more single purpose servers/monoliths behind load balancers, more often than not ending with a cluster of under-utilized systems. Writing and deploying applications also followed this monolithic approach—the software was usually a large binary that provided most, if not all of the functionality. We either had to compile it from source and use some kind of installer, or package it and ship it to a repository.</p><p>With the advent of virtual machines and containers, we got away from the server monolith, fully utilizing the available compute resources by running our applications in isolated, resource-confined instances. Scaling up or down applications become a matter of adding more virtual machines or containers on a fleet of servers, then figuring a way to automatically deploy them. We also broke down the single binary application into microservices that communicate with each other through a message bus/queue, taking full advantage of the low overhead that containers provide. Deploying the full application stack is now just a matter of bundling the services into their own containers, creating a single, fully isolated, dependency-complete work unit that is ready to deploy. Using continuous integration patterns and tools such as Jenkins allowed us to automate the build and deploy process even further.</p><p>This book is about LXC containers and how to run your applications inside them. Unlike other container solutions such, as Docker, LXC is designed to run an entire Linux system, not just a single process, though the latter is also possible. Even though an LXC container can contain an entire Linux filesystem, the underlined host kernel is shared, no hypervisor layer needed.</p><p>This book takes a direct and practical approach to LXC. You will learn how to install, configure, and operate LXC containers along with multiple examples explaining how to run highly scalable and highly available applications inside LXC. You will use monitoring and deployment applications and other third-party tools. You will also learn how to write your own tools that extend the functionality provided by LXC and its various libraries. Finally, you will see a complete OpenStack deployment that adds the intelligence to managing a fleet of compute resources to easily deploy your application inside LXC containers.</p><div class="section" title="What this book covers"><div class="titlepage"><div><div><h1 class="title"><a id="pf09lvl1sec1"/>What this book covers</h1></div></div></div><p><a class="link" href="ch01.html" title="Chapter 1. Introduction to Linux Containers">Chapter 1</a>, <span class="emphasis"><em>Introduction to Linux Containers, </em></span>provides an in-depth exploration of the history of containers in the Linux kernel, along with some fundamental terminology. After going through the basics, you will have a detailed view of how kernel namespaces and control groups (cgroups) are implemented and will be able to experiment with some C system calls.</p><p><a class="link" href="ch02.html" title="Chapter 2. Installing and Running LXC on Linux Systems">Chapter 2</a>, <span class="emphasis"><em>Installing and Running LXC on Linux Systems, </em></span>covers everything that is needed to install, configure, and run LXC on Ubuntu and Red Hat systems. You will learn what packages and tools are required along with different ways of configuring LXC. By the end of this chapter, you will have a Linux system with running LXC containers.</p><p><a class="link" href="ch03.html" title="Chapter 3. Command-Line Operations Using Native and Libvirt Tools">Chapter 3</a>, <span class="emphasis"><em>Command-Line Operations Using Native and Libvirt Tools, </em></span>is all about running and operating LXC on the command line. The chapter will cover various tools from a list of packages and demonstrate different ways of interacting with your containerized application. The focus will be on the functionality that libvirt and the native LXC libraries provide in controlling the full life cycle of an LXC container.</p><p><a class="link" href="ch04.html" title="Chapter 4. LXC Code Integration with Python">Chapter 4</a>, <span class="emphasis"><em>LXC Code Integration with Python, </em></span>will show examples of how to write tools and automate LXC provisioning and management using Python libraries. You will also learn how to create a development environment using Vagrant and LXC.</p><p><a class="link" href="ch05.html" title="Chapter 5. Networking in LXC with the Linux Bridge and Open vSwitch">Chapter 5</a>, <span class="emphasis"><em>Networking in LXC with the Linux Bridge and Open vSwitch, </em></span>will be a deep dive into networking in the containerized world—connecting LXC to the Linux bridge, using direct connect, NAT, and various other methods. It will also demonstrate more advanced technics of traffic management using Open vSwitch.</p><p><a class="link" href="ch06.html" title="Chapter 6. Clustering and Horizontal Scaling with LXC">Chapter 6</a>, <span class="emphasis"><em>Clustering and Horizontal Scaling with LXC, </em></span>builds upon the knowledge presented in earlier chapters to build a cluster of Apache containers and demonstrate how to connect them using GRE tunnels with Open vSwitch. The chapter also presents examples of running single process applications inside minimal root filesystem containers.</p><p><a class="link" href="ch07.html" title="Chapter 7. Monitoring and Backups in a Containerized World">Chapter 7</a>, <span class="emphasis"><em>Monitoring and Backups in a Containerized World,</em></span> is about backing up your LXC application containers and deploying monitoring solutions to alert and trigger actions. We are going to see examples of using Sensu and Monit for monitoring, and iSCSI and GlusterFS for creating hot and cold backups.</p><p><a class="link" href="ch08.html" title="Chapter 8. Using LXC with OpenStack">Chapter 8</a>, <span class="emphasis"><em>Using LXC with OpenStack, </em></span>demonstrates how to provision LXC containers with OpenStack. It begins by introducing the various components that make OpenStack and how to use the LXC nova driver to automatically provision LXC containers among a pool of compute resources.</p><p><a class="link" href="apa.html" title="Appendix A. LXC Alternatives to Docker and OpenVZ">Appendix</a>, <span class="emphasis"><em>LXC Alternatives to Docker and OpenVZ</em></span>, ends the book by demonstrating how other popular container solutions, such as Docker and OpenVZ, came to be and the similarities and differences between them. It also explores practical examples of installing, configuring, and running them alongside LXC.</p></div></div>
<div class="section" title="What you need for this book"><div class="titlepage"><div><div><h1 class="title"><a id="pf09lvl1sec2"/>What you need for this book</h1></div></div></div><p>A beginner-level knowledge of Linux and the command line should be enough to follow along and run the examples. Some Python and C knowledge is required to fully understand and experiment with the code snippets, though the book is not about software development and you can skip <a class="link" href="ch04.html" title="Chapter 4. LXC Code Integration with Python">Chapter 4</a>, <span class="emphasis"><em>LXC Code Integration with Python</em></span> altogether, if not interested.</p><p>In terms of hardware and software requirements, most examples in the book have been tested in virtual machines utilizing various cloud providers such as Amazon AWS and Rackspace Cloud. We recommend using the latest version of Ubuntu, given Canonical's involvement with the LXC project, though we provide examples with CentOS whenever the installation/operation methods diverge.</p></div>
<div class="section" title="Who this book is for"><div class="titlepage"><div><div><h1 class="title"><a id="pf09lvl1sec3"/>Who this book is for</h1></div></div></div><p>This book is for anyone who is curious about Linux containers, from Linux administrators who are looking for in-depth understanding of how LXC works, to software developers who need a quick and easy way to prototype code in an isolated environment without the overhead of a full hypervisor. A DevOps engineer is most likely the best job title for those who want to read the book from cover to cover.</p></div>
<div class="section" title="Conventions"><div class="titlepage"><div><div><h1 class="title"><a id="pf09lvl1sec4"/>Conventions</h1></div></div></div><p>In this book, you will find a number of text styles that distinguish between different kinds of information. Here are some examples of these styles and an explanation of their meaning.</p><p>Code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "Manually building the root filesystem and configuration files using tools such as <code class="literal">debootstrap</code> and <code class="literal">yum</code>."</p><p>A block of code is set as follows:</p><pre class="programlisting">#define _GNU_SOURCE&#13;
#include&lt;stdlib.h&gt;&#13;
#include&lt;stdio.h&gt;&#13;
#include&lt;signal.h&gt;&#13;
#include&lt;sched.h&gt;&#13;
 &#13;
staticintchildFunc(void *arg)&#13;
{&#13;
  printf("UID inside the namespace is %ld\n", (long) geteuid());&#13;
  printf("GID inside the namespace is %ld\n", (long) getegid());&#13;
}</pre><p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p><pre class="programlisting">&lt;head&gt; &#13;
#define _GNU_SOURCE&#13;
#include&#13;
#include&#13;
#include&#13;
#include&#13;
&#13;
staticintchildFunc(void *arg)&#13;
{&#13;
<span class="strong"><strong>  printf("UID inside the namespace is %ld\n", (long) geteuid());&#13;
</strong></span>  printf("GID inside the namespace is %ld\n", (long) getegid());&#13;
}&#13;
</pre><p>Any command-line input or output is written as follows:</p><pre class="programlisting">
<span class="strong"><strong>root@ubuntu:~# lsb_release -dc&#13;
Description:   	Ubuntu 14.04.5 LTS&#13;
Codename:      	trusty&#13;
root@ubuntu:~#</strong></span>
</pre><p><span class="strong"><strong>New terms </strong></span>and <span class="strong"><strong>important words </strong></span>are shown in bold. Words that you see on the screen, for example, in menus or dialog boxes, appear in the text like this: "Navigate to <span class="strong"><strong>Networking support</strong></span> | <span class="strong"><strong>Networking options</strong></span> | <span class="strong"><strong>802.1d Ethernet Bridging</strong></span> and select either <span class="strong"><strong>Y</strong></span> to compile the bridging functionality in the kernel, or <span class="strong"><strong>M</strong></span> to compile it as a module."</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note1"/>Note</h3><p>Warnings or important notes appear in a box like this.</p></div></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip2"/>Tip</h3><p>Tips and tricks appear like this.</p></div></div></div>
<div class="section" title="Reader feedback"><div class="titlepage"><div><div><h1 class="title"><a id="pf09lvl1sec5"/>Reader feedback</h1></div></div></div><p>Feedback from our readers is always welcome. Let us know what you think about this book-what you liked or disliked. Reader feedback is important for us as it helps us develop titles that you will really get the most out of.
To send us general feedback, simply e-mail feedback@packtpub.com, and mention the book's title in the subject of your message.
If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide at <a class="ulink" href="http://www.packtpub.com/authors">www.packtpub.com/authors</a>.</p></div>
<div class="section" title="Customer support"><div class="titlepage"><div><div><h1 class="title"><a id="pf09lvl1sec6"/>Customer support</h1></div></div></div><p>Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p><div class="section" title="Downloading the example code"><div class="titlepage"><div><div><h2 class="title"><a id="pf09lvl2sec1"/>Downloading the example code</h2></div></div></div><p>You can download the example code files for this book from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p><p>You can download the code files by following these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in or register to our website using your e-mail address and password.</li><li class="listitem">Hover the mouse pointer on the <span class="strong"><strong>SUPPORT</strong></span> tab at the top.</li><li class="listitem">Click on <span class="strong"><strong>Code Downloads &amp; Errata</strong></span>.</li><li class="listitem">Enter the name of the book in the <span class="strong"><strong>Search</strong></span> box.</li><li class="listitem">Select the book for which you're looking to download the code files.</li><li class="listitem">Choose from the drop-down menu where you purchased this book from.</li><li class="listitem">Click on <span class="strong"><strong>Code Download</strong></span>.</li></ol></div><p>Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">WinRAR / 7-Zip for Windows</li><li class="listitem" style="list-style-type: disc">Zipeg / iZip / UnRarX for Mac</li><li class="listitem" style="list-style-type: disc">7-Zip / PeaZip for Linux</li></ul></div><p>The code bundle for the book is also hosted on GitHub at <a class="ulink" href="https://github.com/PacktPublishing/Containerization-with-LXC">https://github.com/PacktPublishing/Containerization-with-LXC</a>. We also have other code bundles from our rich catalog of books and videos available at <a class="ulink" href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p></div><div class="section" title="Downloading the color images of this book"><div class="titlepage"><div><div><h2 class="title"><a id="pf09lvl2sec2"/>Downloading the color images of this book</h2></div></div></div><p>We also provide you with a PDF file that has color images of the screenshots/diagrams used in this book. The color images will help you better understand the changes in the output. You can download this file from <a class="ulink" href="https://www.packtpub.com/sites/default/files/downloads/ContainerizationwithLXC_ColorImages.pdf">https://www.packtpub.com/sites/default/files/downloads/ContainerizationwithLXC_ColorImages.pdf</a>.</p></div><div class="section" title="Errata"><div class="titlepage"><div><div><h2 class="title"><a id="pf09lvl2sec3"/>Errata</h2></div></div></div><p>Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books-maybe a mistake in the text or the code-we would be grateful if you could report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a class="ulink" href="http://www.packtpub.com/submit-errata">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <span class="strong"><strong>Errata Submission Form</strong></span> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded to our website or added to any list of existing errata under the Errata section of that title.</p><p>To view the previously submitted errata, go to <a class="ulink" href="https://www.packtpub.com/books/content/support">https://www.packtpub.com/books/content/support</a> and enter the name of the book in the search field. The required information will appear under the <span class="strong"><strong>Errata</strong></span> section.</p></div><div class="section" title="Piracy"><div class="titlepage"><div><div><h2 class="title"><a id="pf09lvl2sec4"/>Piracy</h2></div></div></div><p>Piracy of copyrighted material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works in any form on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p>Please contact us at copyright@packtpub.com with a link to the suspected pirated material.</p><p>We appreciate your help in protecting our authors and our ability to bring you valuable content.</p></div><div class="section" title="Questions"><div class="titlepage"><div><div><h2 class="title"><a id="pf09lvl2sec5"/>Questions</h2></div></div></div><p>If you have a problem with any aspect of this book, you can contact us at questions@packtpub.com, and we will do our best to address the problem.</p></div></div></body></html>