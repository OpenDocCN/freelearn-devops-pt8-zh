["```\nroot@controller:~# apt install -y software-properties-common \nroot@controller:~# add-apt-repository cloud-archive:newton \n. . . \nPress [ENTER] to continue or ctrl-c to cancel adding it \n. . . \nOK \nroot@controller:~# apt update && apt dist-upgrade -y \nroot@controller:~# reboot \nroot@controller:~# apt install -y python-openstackclient\n\n```", "```\nroot@controller:~# apt install -y mariadb-server python-pymysql\n\n```", "```\nroot@controller:~# cat /etc/mysql/mariadb.conf.d/99-openstack.cnf \n[mysqld] \nbind-address = 10.208.130.36 \ndefault-storage-engine = innodb \ninnodb_file_per_table \nmax_connections = 4096 \ncollation-server = utf8_general_ci \ncharacter-set-server = utf8 \nroot@controller:~#\n\n```", "```\nroot@controller:~# service mysql restart \nroot@controller:~# mysql_secure_installation\n\n```", "```\nroot@controller:~# mysql -u root -h 10.208.130.36 -p \nEnter password: [lxcpassword] \nWelcome to the MariaDB monitor. Commands end with; or \\g. \nYour MariaDB connection id is 47 \nServer version: 10.0.28-MariaDB-0ubuntu0.16.04.1 Ubuntu 16.04 \nCopyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others. \nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement. \nMariaDB [(none)]> [quit]\n\n```", "```\nroot@controller:~# apt install -y rabbitmq-server\n\n```", "```\nroot@controller:~# rabbitmqctl add_user openstack lxcpassword \nCreating user \"openstack\" ... \nroot@controller:~# \n\n```", "```\nroot@controller:~# rabbitmqctl set_permissions openstack \".*\" \".*\" \".*\" \nSetting permissions for user \"openstack\" in vhost \"/\" ... \nroot@controller:~#\n\n```", "```\nroot@controller:~# apt install -y memcached python-memcache\n\n```", "```\nroot@controller:~# sed -i 's/127.0.0.1/10.208.130.36/g' /etc/memcached.conf\n\n```", "```\nroot@controller:~# cat /etc/memcached.conf | grep -vi \"#\" | sed '/^$/d' \n-d \nlogfile /var/log/memcached.log \n-m 64 \n-p 11211 \n-u memcache \n-l 10.208.130.36 \nroot@controller:~# service memcached restart\n\n```", "```\nroot@controller:~# mysql -u root -plxcpassword \nMariaDB [(none)]> CREATE DATABASE keystone; \nQuery OK, 1 row affected (0.01 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.01 sec) \nMariaDB [(none)]> exit \nBye \nroot@controller:~#\n\n```", "```\nroot@controller:~# apt install -y keystone\n\n```", "```\nroot@controller:~# cat /etc/keystone/keystone.conf \n[DEFAULT] \nlog_dir = /var/log/keystone \n[assignment] \n[auth] \n[cache] \n[catalog] \n[cors] \n[cors.subdomain] \n[credential] \n[database] \nconnection = mysql+pymysql://keystone:lxcpassword@controller/keystone \n[domain_config] \n[endpoint_filter] \n[endpoint_policy] \n[eventlet_server] \n[federation] \n[fernet_tokens] \n[identity] \n[identity_mapping] \n[kvs] \n[ldap] \n[matchmaker_redis] \n[memcache] \n[oauth1] \n[os_inherit] \n[oslo_messaging_amqp] \n[oslo_messaging_notifications] \n[oslo_messaging_rabbit] \n[oslo_messaging_zmq] \n[oslo_middleware] \n[oslo_policy] \n[paste_deploy] \n[policy] \n[profiler] \n[resource] \n[revoke] \n[role] \n[saml] \n[security_compliance] \n[shadow_users] \n[signing] \n[token] \nprovider = fernet \n[tokenless_auth] \n[trust] \n[extra_headers] \nDistribution = Ubuntu \nroot@controller:~#\n\n```", "```\nroot@controller:~# su -s /bin/sh -c \"keystone-manage db_sync\" keystone \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone \nroot@controller:~# keystone-manage credential_setup --keystone-user keystone --keystone-group keystone \nroot@controller:~#\n\n```", "```\nroot@controller:~# keystone-manage bootstrap --bootstrap-password lxcpassword --bootstrap-admin-url http://controller:35357/v3/ --bootstrap-internal-url http://controller:35357/v3/ --bootstrap-public-url http://controller:5000/v3/ --bootstrap-region-id RegionOne \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/apache2/apache2.conf \n... \nServerName controller \n... \nroot@controller:~# service apache2 restart \n\n```", "```\nroot@controller:~# rm -f /var/lib/keystone/keystone.db\n\n```", "```\nroot@controller:~# export OS_USERNAME=admin \nroot@controller:~# export OS_PASSWORD=lxcpassword \nroot@controller:~# export OS_PROJECT_NAME=admin \nroot@controller:~# export OS_USER_DOMAIN_NAME=default \nroot@controller:~# export OS_PROJECT_DOMAIN_NAME=default \nroot@controller:~# export OS_AUTH_URL=http://controller:35357/v3 \nroot@controller:~# export OS_IDENTITY_API_VERSION=3\n\n```", "```\nroot@controller:~# openstack project create --domain default --description \"LXC Project\" service \n+-------------+----------------------------------+ \n| Field | Value | \n+-------------+----------------------------------+ \n| description | LXC Project | \n| domain_id | default | \n| enabled | True | \n| id | 9a1a863fe41b42b2955b313f2cca0ef0 | \n| is_domain | False | \n| name | service | \n| parent_id | default | \n+-------------+----------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack project list \n+----------------------------------+---------+ \n| ID | Name | \n+----------------------------------+---------+ \n| 06f4e2d7e384474781803395b24b3af2 | admin | \n| 9a1a863fe41b42b2955b313f2cca0ef0 | service | \n+----------------------------------+---------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack project create --domain default --description \"LXC User Project\" lxc \n+-------------+----------------------------------+ \n| Field | Value | \n+-------------+----------------------------------+ \n| description | LXC User Project | \n| domain_id | default | \n| enabled | True | \n| id | eb9cdc2c2b4e4f098f2d104752970d52 | \n| is_domain | False | \n| name | lxc | \n| parent_id | default | \n+-------------+----------------------------------+ \nroot@controller:~# \nroot@controller:~# openstack user create --domain default --password-prompt lxc \nUser Password: \nRepeat User Password: \n+---------------------+----------------------------------+ \n| Field | Value | \n+---------------------+----------------------------------+ \n| domain_id | default | \n| enabled | True | \n| id | 1e83e0c8ca194f2e9d8161eb61d21030 | \n| name | lxc | \n| password_expires_at | None | \n+---------------------+----------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack role create user \n+-----------+----------------------------------+ \n| Field | Value | \n+-----------+----------------------------------+ \n| domain_id | None | \n| id | 331c0b61e9784112874627264f03a058 | \n| name | user | \n+-----------+----------------------------------+ \nroot@controller:~# openstack role add --project lxc --user lxc user \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/keystone/keystone-paste.ini \n# Keystone PasteDeploy configuration file. \n[filter:debug] \nuse = egg:oslo.middleware#debug \n[filter:request_id] \nuse = egg:oslo.middleware#request_id \n[filter:build_auth_context] \nuse = egg:keystone#build_auth_context \n[filter:token_auth] \nuse = egg:keystone#token_auth \n[filter:admin_token_auth] \nuse = egg:keystone#admin_token_auth \n[filter:json_body] \nuse = egg:keystone#json_body \n[filter:cors] \nuse = egg:oslo.middleware#cors \noslo_config_project = keystone \n[filter:http_proxy_to_wsgi] \nuse = egg:oslo.middleware#http_proxy_to_wsgi \n[filter:ec2_extension] \nuse = egg:keystone#ec2_extension \n[filter:ec2_extension_v3] \nuse = egg:keystone#ec2_extension_v3 \n[filter:s3_extension] \nuse = egg:keystone#s3_extension \n[filter:url_normalize] \nuse = egg:keystone#url_normalize \n[filter:sizelimit] \nuse = egg:oslo.middleware#sizelimit \n[filter:osprofiler] \nuse = egg:osprofiler#osprofiler \n[app:public_service] \nuse = egg:keystone#public_service \n[app:service_v3] \nuse = egg:keystone#service_v3 \n[app:admin_service] \nuse = egg:keystone#admin_service \n[pipeline:public_api] \npipeline = cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension public_service \n[pipeline:admin_api] \npipeline = cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension s3_extension admin_service \n[pipeline:api_v3] \npipeline = cors sizelimit http_proxy_to_wsgi osprofiler url_normalize request_id build_auth_context token_auth json_body ec2_extension_v3 s3_extension service_v3 \n[app:public_version_service] \nuse = egg:keystone#public_version_service \n[app:admin_version_service] \nuse = egg:keystone#admin_version_service \n[pipeline:public_version_api] \npipeline = cors sizelimit osprofiler url_normalize public_version_service \n[pipeline:admin_version_api] \npipeline = cors sizelimit osprofiler url_normalize admin_version_service \n[composite:main] \nuse = egg:Paste#urlmap \n/v2.0 = public_api \n/v3 = api_v3 \n/ = public_version_api \n[composite:admin] \nuse = egg:Paste#urlmap \n/v2.0 = admin_api \n/v3 = api_v3 \n/ = admin_version_api \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack --os-auth-url http://controller:35357/v3 --os-project-domain-name default --os-user-domain-name default --os-project-name admin --os-username admin token issue \nPassword: \n... \nroot@controller:~# openstack --os-auth-url http://controller:5000/v3 --os-project-domain-name default --os-user-domain-name default --os-project-name lxc --os-username lxc token issue \nPassword: \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat rc.admin \nexport OS_PROJECT_DOMAIN_NAME=default \nexport OS_USER_DOMAIN_NAME=default \nexport OS_PROJECT_NAME=admin \nexport OS_USERNAME=admin \nexport OS_PASSWORD=lxcpassword \nexport OS_AUTH_URL=http://controller:35357/v3 \nexport OS_IDENTITY_API_VERSION=3 \nexport OS_IMAGE_API_VERSION=2 \nroot@controller:~# \nroot@controller:~# cat rc.lxc \nexport OS_PROJECT_DOMAIN_NAME=default \nexport OS_USER_DOMAIN_NAME=default \nexport OS_PROJECT_NAME=lxc \nexport OS_USERNAME=lxc \nexport OS_PASSWORD=lxcpassword \nexport OS_AUTH_URL=http://controller:5000/v3 \nexport OS_IDENTITY_API_VERSION=3 \nexport OS_IMAGE_API_VERSION=2 \nroot@controller:~#\n\n```", "```\nroot@controller:~# . rc.admin\n\n```", "```\nroot@controller:~# env | grep ^OS \nOS_USER_DOMAIN_NAME=default \nOS_IMAGE_API_VERSION=2 \nOS_PROJECT_NAME=admin \nOS_IDENTITY_API_VERSION=3 \nOS_PASSWORD=lxcpassword \nOS_AUTH_URL=http://controller:35357/v3 \nOS_USERNAME=admin \nOS_PROJECT_DOMAIN_NAME=default \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack token issue \n+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ \n| Field | Value | \n+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ \n| expires | 2016-12-02 19:49:07+00:00 | \n| id | gAAAAABYQcIj7eKEfCMTWY43EXZbqZ8UdeZ8CZIb2l2sqIFHFBV_bv6LHO4CFbFLdh7kUEw_Zk-MzQrl5mbq7g8RXPAZ31iBDpDie2-xIAMgRqsxkAh7PJ2kdhcHAxkBj-Uq65rHmjYmPZTUlUTONOP3_dId0_8DsdLkFWoardxG0FAotrlH-2s | \n| project_id | 06f4e2d7e384474781803395b24b3af2 | \n| user_id | 5c331f397597439faef5a1199cdf354f | \n+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# mysql -u root -plxcpassword \nMariaDB [(none)]> CREATE DATABASE glance; \nQuery OK, 1 row affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> exit \nBye \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack user create --domain default --password-prompt glance \nUser Password: \nRepeat User Password: \n+---------------------+----------------------------------+ \n| Field | Value | \n+---------------------+----------------------------------+ \n| domain_id | default | \n| enabled | True | \n| id | ce29b972845d4d77978b7e7803275d53 | \n| name | glance | \n| password_expires_at | None | \n+---------------------+----------------------------------+ \nroot@controller:~# openstack role add --project service --user glance admin \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack service create --name glance --description \"OpenStack Image\" image \n+-------------+----------------------------------+ \n| Field | Value | \n+-------------+----------------------------------+ \n| description | OpenStack Image | \n| enabled | True | \n| id | 2aa82fc0a0224baab8d259e4f5279907 | \n| name | glance | \n| type | image | \n+-------------+----------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack endpoint create --region RegionOne image public http://controller:9292 \n+--------------+----------------------------------+ \n| Field | Value | \n+--------------+----------------------------------+ \n| enabled | True | \n| id | aa26c33d456d421ca3555e6523c7814f | \n| interface | public | \n| region | RegionOne | \n| region_id | RegionOne | \n| service_id | 2aa82fc0a0224baab8d259e4f5279907 | \n| service_name | glance | \n| service_type | image | \n| url | http://controller:9292 | \n+--------------+----------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack endpoint create --region RegionOne image internal http://controller:9292 \n... \nroot@controller:~# openstack endpoint create --region RegionOne image admin http://controller:9292 \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# apt install -y glance\n\n```", "```\nroot@controller:~# cat /etc/glance/glance-api.conf \n[DEFAULT] \n[cors] \n[cors.subdomain] \n[database] \nconnection = mysql+pymysql://glance:lxcpassword@controller/glance \n[glance_store] \nstores = file,http \ndefault_store = file \nfilesystem_store_datadir = /var/lib/glance/images/ \n[image_format] \ndisk_formats = ami,ari,aki,vhd,vhdx,vmdk,raw,qcow2,vdi,iso,root-tar \n[keystone_authtoken] \nauth_uri = http://controller:5000 \nauth_url = http://controller:35357 \nmemcached_servers = controller:11211 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nproject_name = service \nusername = glance \npassword = lxcpassword \n[matchmaker_redis] \n[oslo_concurrency] \n[oslo_messaging_amqp] \n[oslo_messaging_notifications] \n[oslo_messaging_rabbit] \n[oslo_messaging_zmq] \n[oslo_middleware] \n[oslo_policy] \n[paste_deploy] \nflavor = keystone \n[profiler] \n[store_type_location_strategy] \n[task] \n[taskflow_executor] \nroot@controller:~# \nroot@controller:~# cat /etc/glance/glance-registry.conf \n[DEFAULT] \n[database] \nconnection = mysql+pymysql://glance:GLANCE_DBPASS@controller/glance \n[keystone_authtoken] \nauth_uri = http://controller:5000 \nauth_url = http://controller:35357 \nmemcached_servers = controller:11211 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nproject_name = service \nusername = glance \npassword = lxcpassword \n[matchmaker_redis] \n[oslo_messaging_amqp] \n[oslo_messaging_notifications] \n[oslo_messaging_rabbit] \n[oslo_messaging_zmq] \n[oslo_policy] \n[paste_deploy] \nflavor = keystone \n[profiler] \nroot@controller:~#\n\n```", "```\nroot@controller:~# su -s /bin/sh -c \"glance-manage db_sync\" glance \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# service glance-registry restart \nroot@controller:~# service glance-api restart \nroot@controller:~#\n\n```", "```\nroot@controller:~# wget http://uec-images.ubuntu.com/releases/precise/release/ubuntu-12.04-server-cloudimg-amd64.tar.gz \nroot@controller:~# tar zxfv ubuntu-12.04-server-cloudimg-amd64.tar.gz \nprecise-server-cloudimg-amd64.img \nprecise-server-cloudimg-amd64-vmlinuz-virtual \nprecise-server-cloudimg-amd64-loader \nprecise-server-cloudimg-amd64-floppy \nREADME.files \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack image create \"lxc_ubuntu_12.04\" --file precise-server-cloudimg-amd64.img --disk-format raw --container-format bare --public \n+------------------+------------------------------------------------------+ \n| Field | Value | \n+------------------+------------------------------------------------------+ \n| checksum | b5e5895e85127d9cebbd2de32d9b193c | \n| container_format | bare | \n| created_at | 2016-12-02T19:01:28Z | \n| disk_format | raw | \n| file | /v2/images/f344646d-d293-4638-bab4-86d461f38233/file | \n| id | f344646d-d293-4638-bab4-86d461f38233 | \n| min_disk | 0 | \n| min_ram | 0 | \n| name | lxc_ubuntu_12.04 | \n| owner | 06f4e2d7e384474781803395b24b3af2 | \n| protected | False | \n| schema | /v2/schemas/image | \n| size | 1476395008 | \n| status | active | \n| tags | | \n| updated_at | 2016-12-02T19:01:41Z | \n| virtual_size | None | \n| visibility | public | \n+------------------+------------------------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# ls -la /var/lib/glance/images/ \ntotal 1441804 \ndrwxr-xr-x 2 glance glance 4096 Dec 2 19:01 . \ndrwxr-xr-x 4 glance glance 4096 Dec 2 18:53 .. \n-rw-r----- 1 glance glance 1476395008 Dec 2 19:01 f344646d-d293-4638-bab4-86d461f38233 \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack image list \n+--------------------------------------+------------------+--------+ \n| ID | Name | Status | \n+--------------------------------------+------------------+--------+ \n| f344646d-d293-4638-bab4-86d461f38233 | lxc_ubuntu_12.04 | active | \n+--------------------------------------+------------------+--------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# mysql -u root -plxcpassword \nMariaDB [(none)]> CREATE DATABASE nova_api; \nQuery OK, 1 row affected (0.00 sec) \nMariaDB [(none)]> CREATE DATABASE nova; \nQuery OK, 1 row affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'localhost' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.03 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'%' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'%' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> exit \nBye \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack user create --domain default --password-prompt nova \nUser Password: \nRepeat User Password: \n+---------------------+----------------------------------+ \n| Field | Value | \n+---------------------+----------------------------------+ \n| domain_id | default | \n| enabled | True | \n| id | a1305c903548431a80b608fadf78f287 | \n| name | nova | \n| password_expires_at | None | \n+---------------------+----------------------------------+ \nroot@controller:~# openstack role add --project service --user nova admin \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack service create --name nova --description \"OpenStack Compute\" compute \n+-------------+----------------------------------+ \n| Field | Value | \n+-------------+----------------------------------+ \n| description | OpenStack Compute | \n| enabled | True | \n| id | 779d2feb591545cf9d2acc18765a0ca5 | \n| name | nova | \n| type | compute | \n+-------------+----------------------------------+ \nroot@controller:~# openstack endpoint create --region RegionOne compute public http://controller:8774/v2.1/%\\(tenant_id\\)s \n+--------------+-------------------------------------------+ \n| Field | Value | \n+--------------+-------------------------------------------+ \n| enabled | True | \n| id | cccfd4d817a24f9ba58128901cbbb473 | \n| interface | public | \n| region | RegionOne | \n| region_id | RegionOne | \n| service_id | 779d2feb591545cf9d2acc18765a0ca5 | \n| service_name | nova | \n| service_type | compute | \n| url | http://controller:8774/v2.1/%(tenant_id)s | \n+--------------+-------------------------------------------+ \nroot@controller:~# openstack endpoint create --region RegionOne compute internal http://controller:8774/v2.1/%\\(tenant_id\\)s \n... \nroot@controller:~# openstack endpoint create --region RegionOne compute admin http://controller:8774/v2.1/%\\(tenant_id\\)s \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# apt install -y nova-api nova-conductor nova-consoleauth nova-novncproxy nova-scheduler\n\n```", "```\nroot@controller:~# cat /etc/nova/nova.conf \n[DEFAULT] \ndhcpbridge_flagfile=/etc/nova/nova.conf \ndhcpbridge=/usr/bin/nova-dhcpbridge \nlog-dir=/var/log/nova \nstate_path=/var/lib/nova \nforce_dhcp_release=True \nverbose=True \nec2_private_dns_show_ip=True \nenabled_apis=osapi_compute,metadata \ntransport_url = rabbit://openstack:lxcpassword@controller \nauth_strategy = keystone \nmy_ip = 10.208.132.45 \nuse_neutron = True \nfirewall_driver = nova.virt.firewall.NoopFirewallDriver \n[database] \nconnection = mysql+pymysql://nova:lxcpassword@controller/nova \n[api_database] \nconnection = mysql+pymysql://nova:lxcpassword@controller/nova_api \n[oslo_concurrency] \nlock_path = /var/lib/nova/tmp \n[libvirt] \nuse_virtio_for_bridges=True \n[wsgi] \napi_paste_config=/etc/nova/api-paste.ini \n[keystone_authtoken] \nauth_uri = http://controller:5000 \nauth_url = http://controller:35357 \nmemcached_servers = controller:11211 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nproject_name = service \nusername = nova \npassword = lxcpassword \n[vnc] \nvncserver_listen = $my_ip \nvncserver_proxyclient_address = $my_ip \n[glance] \napi_servers = http://controller:9292 \nroot@controller:~#\n\n```", "```\nroot@controller:~# su -s /bin/sh -c \"nova-manage api_db sync\" nova \n... \nroot@controller:~# su -s /bin/sh -c \"nova-manage db sync\" nova \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# service nova-api restart \nroot@controller:~# service nova-consoleauth restart \nroot@controller:~# service nova-scheduler restart \nroot@controller:~# service nova-conductor restart \nroot@controller:~# service nova-novncproxy restart \nroot@controller:~#\n\n```", "```\nroot@controller:~# apt install -y nova-compute\n\n```", "```\nroot@controller:~# cat /etc/nova/nova.conf \n[DEFAULT] \ndhcpbridge_flagfile=/etc/nova/nova.conf \ndhcpbridge=/usr/bin/nova-dhcpbridge \nlog-dir=/var/log/nova \nstate_path=/var/lib/nova \nforce_dhcp_release=True \nverbose=True \nec2_private_dns_show_ip=True \nenabled_apis=osapi_compute,metadata \ntransport_url = rabbit://openstack:lxcpassword@controller \nauth_strategy = keystone \nmy_ip = 10.208.132.45 \nuse_neutron = True \nfirewall_driver = nova.virt.firewall.NoopFirewallDriver \ncompute_driver = libvirt.LibvirtDriver \n[database] \nconnection = mysql+pymysql://nova:lxcpassword@controller/nova \n[api_database] \nconnection = mysql+pymysql://nova:lxcpassword@controller/nova_api \n[oslo_concurrency] \nlock_path = /var/lib/nova/tmp \n[libvirt] \nuse_virtio_for_bridges=True \n[wsgi] \napi_paste_config=/etc/nova/api-paste.ini \n[keystone_authtoken] \nauth_uri = http://controller:5000 \nauth_url = http://controller:35357 \nmemcached_servers = controller:11211 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nproject_name = service \nusername = nova \npassword = lxcpassword \n[vnc] \nenabled = True \nvncserver_listen = $my_ip \nvncserver_proxyclient_address = $my_ip \nnovncproxy_base_url = http://controller:6080/vnc_auto.html \n[glance] \napi_servers = http://controller:9292 \n[libvirt] \nvirt_type = lxc \nroot@controller:~#\n\n```", "```\nroot@controller:~# apt install -y nova-compute-lxc\n\n```", "```\nroot@controller:~# cat /etc/nova/nova-compute.conf \n[DEFAULT] \ncompute_driver=libvirt.LibvirtDriver \n[libvirt] \nvirt_type=lxc \nroot@controller:~#\n\n```", "```\nroot@controller:~# service nova-compute restart \nroot@controller:~# openstack compute service list \n+----+------------------+------------+----------+---------+-------+----------------------------+ \n| ID | Binary | Host | Zone | Status | State | Updated At | \n+----+------------------+------------+----------+---------+-------+----------------------------+ \n| 4 | nova-consoleauth | controller | internal | enabled | up | 2016-12-02T20:01:19.000000 | \n| 5 | nova-scheduler | controller | internal | enabled | up | 2016-12-02T20:01:25.000000 | \n| 6 | nova-conductor | controller | internal | enabled | up | 2016-12-02T20:01:26.000000 | \n| 8 | nova-compute | controller | nova | enabled | up | 2016-12-02T20:01:22.000000 | \n+----+------------------+------------+----------+---------+-------+----------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# mysql -u root -plxcpassword \nMariaDB [(none)]> CREATE DATABASE neutron; \nQuery OK, 1 row affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'localhost' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'%' IDENTIFIED BY 'lxcpassword'; \nQuery OK, 0 rows affected (0.00 sec) \nMariaDB [(none)]> exit \nBye \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack user create --domain default --password-prompt neutron \nUser Password: \nRepeat User Password: \n+---------------------+----------------------------------+ \n| Field | Value | \n+---------------------+----------------------------------+ \n| domain_id | default | \n| enabled | True | \n| id | 68867f6864574592b1a29ec293defb5d | \n| name | neutron | \n| password_expires_at | None | \n+---------------------+----------------------------------+ \nroot@controller:~# openstack role add --project service --user neutron admin \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack service create --name neutron --description \"OpenStack Networking\" network \n+-------------+----------------------------------+ \n| Field | Value | \n+-------------+----------------------------------+ \n| description | OpenStack Networking | \n| enabled | True | \n| id | 8bd98d58bfb5410694cbf7b6163a71a5 | \n| name | neutron | \n| type | network | \n+-------------+----------------------------------+ \nroot@controller:~# openstack endpoint create --region RegionOne network public http://controller:9696 \n+--------------+----------------------------------+ \n| Field | Value | \n+--------------+----------------------------------+ \n| enabled | True | \n| id | 4e2c1a8689b146a7b3b4207c63a778da | \n| interface | public | \n| region | RegionOne | \n| region_id | RegionOne | \n| service_id | 8bd98d58bfb5410694cbf7b6163a71a5 | \n| service_name | neutron | \n| service_type | network | \n| url | http://controller:9696 | \n+--------------+----------------------------------+ \nroot@controller:~# openstack endpoint create --region RegionOne network internal http://controller:9696 \n... \nroot@controller:~# openstack endpoint create --region RegionOne network admin http://controller:9696 \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# apt install -y neutron-server neutron-plugin-ml2 neutron-linuxbridge-agent neutron-l3-agent neutron-dhcp-agent neutron-metadata-agent\n\n```", "```\nroot@controller:~# cat /etc/neutron/neutron.conf \n[DEFAULT] \ncore_plugin = ml2 \nservice_plugins = router \nallow_overlapping_ips = True \ntransport_url = rabbit://openstack:lxcpassword@controller \nauth_strategy = keystone \nnotify_nova_on_port_status_changes = True \nnotify_nova_on_port_data_changes = True \n[agent] \nroot_helper = sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf \n[cors] \n[cors.subdomain] \n[database] \nconnection = mysql+pymysql://neutron:lxcpassword@controller/neutron \n[keystone_authtoken] \nauth_uri = http://controller:5000 \nauth_url = http://controller:35357 \nmemcached_servers = controller:11211 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nproject_name = service \nusername = neutron \npassword = lxcpassword \n[matchmaker_redis] \n[nova] \nauth_url = http://controller:35357 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nregion_name = RegionOne \nproject_name = service \nusername = nova \npassword = lxcpassword \n[oslo_concurrency] \n[oslo_messaging_amqp] \n[oslo_messaging_notifications] \n[oslo_messaging_rabbit] \n[oslo_messaging_zmq] \n[oslo_policy] \n[qos] \n[quotas] \n[ssl] \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/neutron/plugins/ml2/ml2_conf.ini \n[DEFAULT] \n[ml2] \ntype_drivers = flat,vlan,vxlan \ntenant_network_types = vxlan \nmechanism_drivers = linuxbridge,l2population \nextension_drivers = port_security \n[ml2_type_flat] \nflat_networks = provider \n[ml2_type_geneve] \n[ml2_type_gre] \n[ml2_type_vlan] \n[ml2_type_vxlan] \nvni_ranges = 1:1000 \n[securitygroup] \nenable_ipset = True \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/neutron/plugins/ml2/linuxbridge_agent.ini \n[DEFAULT] \n[agent] \n[linux_bridge] \nphysical_interface_mappings = provider:eth1 \n[securitygroup] \nenable_security_group = True \nfirewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver \n[vxlan] \nenable_vxlan = True \nlocal_ip = 10.208.132.45 \nl2_population = True \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/neutron/l3_agent.ini \n[DEFAULT] \ninterface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver \n[AGENT] \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/neutron/dhcp_agent.ini \n[DEFAULT] \ninterface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver \ndhcp_driver = neutron.agent.linux.dhcp.Dnsmasq \nenable_isolated_metadata = True \n[AGENT] \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/neutron/metadata_agent.ini \n[DEFAULT] \nnova_metadata_ip = controller \nmetadata_proxy_shared_secret = lxcpassword \n[AGENT] \n[cache] \nroot@controller:~#\n\n```", "```\nroot@controller:~# cat /etc/nova/nova.conf \n[DEFAULT] \ndhcpbridge_flagfile=/etc/nova/nova.conf \ndhcpbridge=/usr/bin/nova-dhcpbridge \nlog-dir=/var/log/nova \nstate_path=/var/lib/nova \nforce_dhcp_release=True \nverbose=True \nec2_private_dns_show_ip=True \nenabled_apis=osapi_compute,metadata \ntransport_url = rabbit://openstack:lxcpassword@controller \nauth_strategy = keystone \nmy_ip = 10.208.132.45 \nuse_neutron = True \nfirewall_driver = nova.virt.firewall.NoopFirewallDriver \ncompute_driver = libvirt.LibvirtDriver \nscheduler_default_filters = RetryFilter, AvailabilityZoneFilter, RamFilter, ComputeFilter, ComputeCapabilitiesFilter, ImagePropertiesFilter, ServerGroupAntiAffinityFilter, ServerGroupAffinityFilter \n[database] \nconnection = mysql+pymysql://nova:lxcpassword@controller/nova \n[api_database] \nconnection = mysql+pymysql://nova:lxcpassword@controller/nova_api \n[oslo_concurrency] \nlock_path = /var/lib/nova/tmp \n[libvirt] \nuse_virtio_for_bridges=True \n[wsgi] \napi_paste_config=/etc/nova/api-paste.ini \n[keystone_authtoken] \nauth_uri = http://controller:5000 \nauth_url = http://controller:35357 \nmemcached_servers = controller:11211 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nproject_name = service \nusername = nova \npassword = lxcpassword \n[vnc] \nenabled = True \nvncserver_listen = $my_ip \nvncserver_proxyclient_address = $my_ip \nnovncproxy_base_url = http://controller:6080/vnc_auto.html \n[glance] \napi_servers = http://controller:9292 \n[libvirt] \nvirt_type = lxc \n[neutron] \nurl = http://controller:9696 \nauth_url = http://controller:35357 \nauth_type = password \nproject_domain_name = default \nuser_domain_name = default \nregion_name = RegionOne \nproject_name = service \nusername = neutron \npassword = lxcpassword \nservice_metadata_proxy = True \nmetadata_proxy_shared_secret = lxcpassword \nroot@controller:~#\n\n```", "```\nroot@controller:~# su -s /bin/sh -c \"neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head\" neutron \nINFO [alembic.runtime.migration] Context impl MySQLImpl. \nINFO [alembic.runtime.migration] Will assume non-transactional DDL. \nRunning upgrade for neutron ... \nINFO [alembic.runtime.migration] Context impl MySQLImpl. \nINFO [alembic.runtime.migration] Will assume non-transactional DDL. \n... \nOK \nroot@controller:~#\n\n```", "```\nroot@controller:~# service nova-api restart \nroot@controller:~# service neutron-server restart \nroot@controller:~# service neutron-linuxbridge-agent restart \nroot@controller:~# service neutron-dhcp-agent restart \nroot@controller:~# service neutron-metadata-agent restart \nroot@controller:~# service neutron-l3-agent restart \nroot@controller:~# service nova-compute restart\n\n```", "```\nroot@controller:~# openstack network agent list \n+--------------------------------------+--------------------+------------+-------------------+-------+-------+---------------------------+ \n| ID | Agent Type | Host | Availability Zone | Alive | State | Binary | \n+--------------------------------------+--------------------+------------+-------------------+-------+-------+---------------------------+ \n| 2a715a0d-5593-4aba-966e-6ae3b2e02ba2 | L3 agent | controller | nova | True | UP | neutron-l3-agent | \n| 2ce176fb-dc2e-4416-bb47-1ae44e1f556f | Linux bridge agent | controller | None | True | UP | neutron-linuxbridge-agent | \n| 42067496-eaa3-42ef-bff9-bbbbcbf2e15a | DHCP agent | controller | nova | True | UP | neutron-dhcp-agent | \n| fad2b9bb-8ee7-468e-b69a-43129338cbaa | Metadata agent | controller | None | True | UP | neutron-metadata-agent | \n+--------------------------------------+--------------------+------------+-------------------+-------+-------+---------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack flavor create --id 0 --vcpus 1 --ram 1024 --disk 5 lxc.medium \n+----------------------------+------------+ \n| Field | Value | \n+----------------------------+------------+ \n| OS-FLV-DISABLED:disabled | False | \n| OS-FLV-EXT-DATA:ephemeral | 0 | \n| disk | 5 | \n| id | 0 | \n| name | lxc.medium | \n| os-flavor-access:is_public | True | \n| properties | | \n| ram | 1024 | \n| rxtx_factor | 1.0 | \n| swap | | \n| vcpus | 1 | \n+----------------------------+------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# ssh-keygen -q -N \"\"\n\n```", "```\nroot@controller:~# openstack keypair create --public-key ~/.ssh/id_rsa.pub lxckey \n+-------------+-------------------------------------------------+ \n| Field | Value | \n+-------------+-------------------------------------------------+ \n| fingerprint | 84:36:93:cc:2f:f0:f7:ba:d5:73:54:ca:2e:f0:02:6d | \n| name | lxckey | \n| user_id | 3a04d141c07541478ede7ea34f3e5c36 | \n+-------------+-------------------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack keypair list \n+--------+-------------------------------------------------+ \n| Name | Fingerprint | \n+--------+-------------------------------------------------+ \n| lxckey | 84:36:93:cc:2f:f0:f7:ba:d5:73:54:ca:2e:f0:02:6d | \n+--------+-------------------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack security group rule create --proto icmp default \n+-------------------+--------------------------------------+ \n| Field | Value | \n+-------------------+--------------------------------------+ \n| created_at | 2016-12-02T20:30:14Z | \n| description | | \n| direction | ingress | \n| ethertype | IPv4 | \n| headers | | \n| id | 0e17e0ab-4495-440a-b8b9-0a612f9eccae | \n| port_range_max | None | \n| port_range_min | None | \n| project_id | 488aecf07dcb4ae6bc1ebad5b76fbc20 | \n| project_id | 488aecf07dcb4ae6bc1ebad5b76fbc20 | \n| protocol | icmp | \n| remote_group_id | None | \n| remote_ip_prefix | 0.0.0.0/0 | \n| revision_number | 1 | \n| security_group_id | f21f3d3c-27fe-4668-bca4-6fc842dcb690 | \n| updated_at | 2016-12-02T20:30:14Z | \n+-------------------+--------------------------------------+ \nroot@controller:~# \nroot@controller:~# openstack security group rule create --proto tcp --dst-port 22 default \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack network create nat \n+---------------------------+--------------------------------------+ \n| Field | Value | \n+---------------------------+--------------------------------------+ \n| admin_state_up | UP | \n| availability_zone_hints | | \n| availability_zones | | \n| created_at | 2016-12-02T20:32:53Z | \n| description | | \n| headers | | \n| id | 66037974-d24b-4615-8b93-b0de18a4561b | \n| ipv4_address_scope | None | \n| ipv6_address_scope | None | \n| mtu | 1450 | \n| name | nat | \n| port_security_enabled | True | \n| project_id | 488aecf07dcb4ae6bc1ebad5b76fbc20 | \n| project_id | 488aecf07dcb4ae6bc1ebad5b76fbc20 | \n| provider:network_type | vxlan | \n| provider:physical_network | None | \n| provider:segmentation_id | 53 | \n| revision_number | 3 | \n| router:external | Internal | \n| shared | False | \n| status | ACTIVE | \n| subnets | | \n| tags | [] | \n| updated_at | 2016-12-02T20:32:53Z | \n+---------------------------+--------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack subnet create --network nat --dns-nameserver 8.8.8.8 --gateway 192.168.0.1 --subnet-range 192.168.0.0/24 nat \n+-------------------+--------------------------------------+ \n| Field | Value | \n+-------------------+--------------------------------------+ \n| allocation_pools | 192.168.0.2-192.168.0.254 | \n| cidr | 192.168.0.0/24 | \n| created_at | 2016-12-02T20:36:14Z | \n| description | | \n| dns_nameservers | 8.8.8.8 | \n| enable_dhcp | True | \n| gateway_ip | 192.168.0.1 | \n| headers | | \n| host_routes | | \n| id | 0e65fa94-be69-4690-b3fe-406ea321dfb3 | \n| ip_version | 4 | \n| ipv6_address_mode | None | \n| ipv6_ra_mode | None | \n| name | nat | \n| network_id | 66037974-d24b-4615-8b93-b0de18a4561b | \n| project_id | 488aecf07dcb4ae6bc1ebad5b76fbc20 | \n| project_id | 488aecf07dcb4ae6bc1ebad5b76fbc20 | \n| revision_number | 2 | \n| service_types | [] | \n| subnetpool_id | None | \n| updated_at | 2016-12-02T20:36:14Z | \n+-------------------+--------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# neutron net-update nat --router:external \nUpdated network: nat \nroot@controller:~# \n\n```", "```\nroot@controller:~# . rc.lxc \nroot@controller:~# openstack router create router \n+-------------------------+--------------------------------------+ \n| Field | Value | \n+-------------------------+--------------------------------------+ \n| admin_state_up | UP | \n| availability_zone_hints | | \n| availability_zones | | \n| created_at | 2016-12-02T20:38:08Z | \n| description | | \n| external_gateway_info | null | \n| flavor_id | None | \n| headers | | \n| id | 45557fac-f158-40ef-aeec-496de913d5a5 | \n| name | router | \n| project_id | b0cc5ccc12eb4d6b98aadd784540f575 | \n| project_id | b0cc5ccc12eb4d6b98aadd784540f575 | \n| revision_number | 2 | \n| routes | | \n| status | ACTIVE | \n| updated_at | 2016-12-02T20:38:08Z | \n+-------------------------+--------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# . rc.admin \nroot@controller:~# neutron router-interface-add router nat \nAdded interface be0f1e65-f086-41fd-b8d0-45ebb865bf0f to router router. \nroot@controller:~#\n\n```", "```\nroot@controller:~# ip netns \nqrouter-45557fac-f158-40ef-aeec-496de913d5a5 (id: 1) \nqdhcp-66037974-d24b-4615-8b93-b0de18a4561b (id: 0) \nroot@controller:~#\n\n```", "```\nroot@controller:~# neutron router-port-list router \n+--------------------------------------+------+-------------------+------------------------------------------------------------------------------------+ \n| id | name | mac_address | fixed_ips | \n+--------------------------------------+------+-------------------+------------------------------------------------------------------------------------+ \n| be0f1e65-f086-41fd-b8d0-45ebb865bf0f | | fa:16:3e:a6:36:7c | {\"subnet_id\": \"0e65fa94-be69-4690-b3fe-406ea321dfb3\", \"ip_address\": \"192.168.0.1\"} | \n+--------------------------------------+------+-------------------+------------------------------------------------------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack network list \n+--------------------------------------+------+--------------------------------------+ \n| ID | Name | Subnets | \n+--------------------------------------+------+--------------------------------------+ \n| 66037974-d24b-4615-8b93-b0de18a4561b | nat | 0e65fa94-be69-4690-b3fe-406ea321dfb3 | \n+--------------------------------------+------+--------------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack flavor list \n+----+------------+------+------+-----------+-------+-----------+ \n| ID | Name | RAM | Disk | Ephemeral | VCPUs | Is Public | \n+----+------------+------+------+-----------+-------+-----------+ \n| 0 | lxc.medium | 1024 | 5 | 0 | 1 | True | \n+----+------------+------+------+-----------+-------+-----------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack image list \n+--------------------------------------+------------------+--------+ \n| ID | Name | Status | \n+--------------------------------------+------------------+--------+ \n| 417e72b5-7b85-4555-835d-ce442e21aa4f | lxc_ubuntu_12.04 | active | \n+--------------------------------------+------------------+--------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack security group list \n+--------------------------------------+---------+------------------------+----------------------------------+ \n| ID | Name | Description | Project | \n+--------------------------------------+---------+------------------------+----------------------------------+ \n| f21f3d3c-27fe-4668-bca4-6fc842dcb690 | default | Default security group | 488aecf07dcb4ae6bc1ebad5b76fbc20 | \n+--------------------------------------+---------+------------------------+----------------------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# modprobe nbd\n\n```", "```\nroot@controller:~# openstack server create --flavor lxc.medium --image lxc_ubuntu_12.04 --nic net-id=66037974-d24b-4615-8b93-b0de18a4561b --security-group default --key-name lxckey lxc_instance \n... \nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack server list \n+--------------------------------------+--------------+--------+-----------------+------------------+ \n| ID | Name | Status | Networks | Image Name | \n+--------------------------------------+--------------+--------+-----------------+------------------+ \n| a86f8f56-80d7-4d36-86c3-827679f21ec5 | lxc_instance | ACTIVE | nat=192.168.0.3 | lxc_ubuntu_12.04 | \n+--------------------------------------+--------------+--------+-----------------+------------------+ \nroot@controller:~#\n\n```", "```\nroot@controller:~# virsh --connect lxc:// list --all \nId Name State \n---------------------------------------------------- \n16225 instance-00000002 running \nroot@controller:~#\n\n```", "```\nroot@controller:~# ps axfw \n... \n16225 ? S 0:00 /usr/lib/libvirt/libvirt_lxc --name instance-00000002 --console 23 --security=apparmor --handshake 26 --veth vnet0 \n16227 ? Ss 0:00 \\_ /sbin/init \n16591 ? S 0:00 \\_ upstart-socket-bridge --daemon \n16744 ? Ss 0:00 \\_ dhclient3 -e IF_METRIC=100 -pf /var/run/dhclient.eth0.pid -lf /var/lib/dhcp/dhclient.eth0.leases -1 eth0 \n17692 ? S 0:00 \\_ upstart-udev-bridge --daemon \n17696 ? Ss 0:00 \\_ /sbin/udevd --daemon \n17819 ? S 0:00 | \\_ /sbin/udevd --daemon \n18108 ? Ss 0:00 \\_ /usr/sbin/sshd -D \n18116 ? Ss 0:00 \\_ dbus-daemon --system --fork --activation=upstart \n18183 ? Ss 0:00 \\_ cron \n18184 ? Ss 0:00 \\_ atd \n18189 ? Ss 0:00 \\_ /usr/sbin/irqbalance \n18193 ? Ss 0:00 \\_ acpid -c /etc/acpi/events -s /var/run/acpid.socket \n18229 pts/0 Ss+ 0:00 \\_ /sbin/getty -8 38400 tty1 \n18230 ? Ssl 0:00 \\_ whoopsie \n18317 ? Sl 0:00 \\_ rsyslogd -c5 \n19185 ? Ss 0:00 \\_ /sbin/getty -8 38400 tty4 \n19186 ? Ss 0:00 \\_ /sbin/getty -8 38400 tty2 \n19187 ? Ss 0:00 \\_ /sbin/getty -8 38400 tty3 \nroot@controller:~#\n\n```", "```\nroot@controller:~# cd /var/lib/nova/instances/ \nroot@controller:/var/lib/nova/instances# ls -la a86f8f56-80d7-4d36-86c3-827679f21ec5/ \ntotal 12712 \ndrwxr-xr-x 3 nova nova 4096 Dec 2 20:52 . \ndrwxr-xr-x 5 nova nova 4096 Dec 2 20:52 .. \n-rw-r--r-- 1 nova nova 0 Dec 2 20:52 console.log \n-rw-r--r-- 1 nova nova 13041664 Dec 2 20:57 disk \n-rw-r--r-- 1 nova nova 79 Dec 2 20:52 disk.info \n-rw-r--r-- 1 nova nova 1534 Dec 2 20:52 libvirt.xml \ndrwxr-xr-x 2 nova nova 4096 Dec 2 20:52 rootfs \nroot@controller:/var/lib/nova/instances#\n\n```", "```\nroot@controller:/var/lib/nova/instances# cat a86f8f56-80d7-4d36-86c3-827679f21ec5/libvirt.xml \n<domain type=\"lxc\"> \n <uuid>a86f8f56-80d7-4d36-86c3-827679f21ec5</uuid> \n <name>instance-00000002</name> \n <memory>1048576</memory> \n <vcpu>1</vcpu> \n <metadata> \n <nova:instance \n      > \n <nova:package version=\"14.0.1\"/> \n <nova:name>lxc_instance</nova:name> \n <nova:creationTime>2016-12-02 20:52:52</nova:creationTime> \n <nova:flavor name=\"lxc.medium\"> \n <nova:memory>1024</nova:memory> \n <nova:disk>5</nova:disk> \n <nova:swap>0</nova:swap> \n <nova:ephemeral>0</nova:ephemeral> \n <nova:vcpus>1</nova:vcpus> \n </nova:flavor> \n <nova:owner> \n <nova:user uuid=\"3a04d141c07541478ede7ea34f3e5c36\">\n          admin\n        </nova:user> \n <nova:project uuid=\"488aecf07dcb4ae6bc1ebad5b76fbc20\">\n          admin\n        </nova:project> \n </nova:owner> \n <nova:root type=\"image\" uuid=\"417e72b5-7b85-4555-835d-ce442e21aa4f\"/> \n </nova:instance> \n </metadata> \n <os> \n <type>exe</type> \n <cmdline>console=tty0 console=ttyS0 console=ttyAMA0</cmdline> \n <init>/sbin/init</init> \n </os> \n <cputune> \n <shares>1024</shares> \n </cputune> \n <clock offset=\"utc\"/> \n <devices> \n <filesystem type=\"mount\"> \n <source dir=\"/var/lib/nova/instances/\n      a86f8f56-80d7-4d36-86c3-827679f21ec5/rootfs\"/> \n <target dir=\"/\"/> \n </filesystem> \n <interface type=\"bridge\"> \n <mac address=\"fa:16:3e:4f:e5:b5\"/> \n <source bridge=\"brq66037974-d2\"/> \n <target dev=\"tapf2073410-64\"/> \n </interface> \n <console type=\"pty\"/> \n </devices> \n</domain> \nroot@controller:/var/lib/nova/instances#\n\n```", "```\nroot@controller:/var/lib/nova/instances# brctl show \nbridge name      bridge id         STP enabled      interfaces \nbrq66037974-d2   8000.02d65d01c617  no              tap4e3afc26-88 \n tapbe0f1e65-f0 \n tapf2073410-64 \n vxlan-53 \nvirbr0           8000.5254004e7712  yes             virbr0-nic \nroot@controller:/var/lib/nova/instances#\n\n```", "```\nroot@controller:/var/lib/nova/instances# ifconfig brq66037974-d2 192.168.0.1 \nroot@controller:~# iptables -A POSTROUTING -t nat -s 192.168.0.0/24 ! -d 192.168.0.0/24 -j MASQUERADE \nroot@controller:~#\n\n```", "```\nroot@controller:/var/lib/nova/instances# ssh ubuntu@192.168.0.3\nWelcome to Ubuntu 12.04.5 LTS (GNU/Linux 4.4.0-51-generic x86_64)\nubuntu@lxc-instance:~$ ifconfig\neth0 Link encap:Ethernet HWaddr fa:16:3e:4f:e5:b5\ninet addr:192.168.0.3 Bcast:192.168.0.255 Mask:255.255.255.0\ninet6 addr: fe80::f816:3eff:fe4f:e5b5/64 Scope:Link\nUP BROADCAST RUNNING MULTICAST MTU:1450 Metric:1\nRX packets:290 errors:0 dropped:0 overruns:0 frame:0\nTX packets:340 errors:0 dropped:0 overruns:0 carrier:0\ncollisions:0 txqueuelen:1000\nRX bytes:35038 (35.0 KB) TX bytes:36830 (36.8 KB)\nlo Link encap:Local Loopback\ninet addr:127.0.0.1 Mask:255.0.0.0\ninet6 addr: ::1/128 Scope:Host\nUP LOOPBACK RUNNING MTU:65536 Metric:1\nRX packets:0 errors:0 dropped:0 overruns:0 frame:0\nTX packets:0 errors:0 dropped:0 overruns:0 carrier:0\ncollisions:0 txqueuelen:1\nRX bytes:0 (0.0 B) TX bytes:0 (0.0 B)\nubuntu@lxc-instance:~$ exit\nlogout\nConnection to 192.168.0.3 closed.\nroot@controller:/var/lib/nova/instances# cd\nroot@controller:~#\n\n```", "```\nroot@controller:~# openstack server delete lxc_instance \nroot@controller:~# openstack server list \nroot@controller:~#\n\n```"]