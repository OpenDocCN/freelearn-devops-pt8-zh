<html><head></head><body>
		<div>
			<div id="_idContainer021" class="Content">
			</div>
		</div>
		<div id="_idContainer022" class="Content">
			<h1 id="_idParaDest-42">3. <a id="_idTextAnchor048"/>Modernizing with hybrid cloud and multicloud</h1>
		</div>
		<div id="_idContainer023" class="Content">
			<p>Business environments are becoming increasingly complex. Many software applications now run on different systems located on-premises, off-premises, in multiple clouds, and at the edge. Proper planning, implementation, and management of these diverse environments are critical factors in helping your users and your organization to make the most of them. This chapter focuses on the role of Azure hybrid and multicloud solutions—in particular, Azure Arc and the Azure Stack family of solutions.</p>
			<p>By the end of this chapter, you will be able to do the following:</p>
			<ul>
				<li>Understand what hybrid cloud, multicloud, and edge computing are</li>
				<li>Discuss what makes a hybrid and multicloud strategy successful</li>
				<li>Explain Azure Arc enabled servers, data services, and Kubernetes app management</li>
				<li>Present the Azure Stack portfolio and explain how it can modernize your datacenter</li>
			</ul>
			<p>This chapter will teach you about Azure Arc connectivity requirements and approaches for creating Azure Arc enabled data services on Kubernetes clusters and managed Kubernetes services. You will also learn how to include the Azure Stack family of solutions in your architecture and manage Azure Stack Hub. In the first section, we'll kick things off with some terminology.</p>
			<h2 id="_idParaDest-43"><a id="_idTextAnchor049"/>What is hybrid cloud, multicloud, and edge computing?</h2>
			<p>We have already introduced hybrid cloud, multicloud, and edge computing in <em class="italics">Chapter 1</em>, <em class="italics">Introduction</em>, but here's a quick recap:</p>
			<ul>
				<li>A <strong class="bold">hybrid cloud</strong> approach involves the combination of cloud and non-cloud resources (such as an on-premises datacenter). This can offer greater flexibility, more deployment options, scalability, and operational consistency. </li>
				<li>A <strong class="bold">multicloud</strong> approach involves leveraging cloud computing services from multiple service providers. This can provide increased flexibility and better risk mitigation, as you can choose a combination of services and regional providers that best fits the needs of your organization. </li>
				<li>An <strong class="bold">edge computing</strong> approach harnesses the computing power of the cloud in devices close to the endpoints where data is created and consumed. These endpoints could include process control systems on production lines, building surveillance systems, and sensors and actuators at remote sites.</li>
			</ul>
			<p>Which of these computing environments you choose to use depends on a variety of different factors. For instance, a hybrid cloud approach that includes on-premises systems might be the best choice for your organization to meet regulatory and data sovereignty requirements while enhancing resilience and business continuity.</p>
			<p>By contrast, if your organization wants to reduce response latency and ensure offline availability in the field, edge computing, with its <strong class="bold">virtual machines</strong> (<strong class="bold">VMs</strong>), containers, and data services per device, could be essential.</p>
			<p>It is important to keep in mind that hybrid cloud, multicloud, and edge computing may also add operational complexity. For example, multicloud necessitates dealing with different cloud environments across different service providers, which poses an additional challenge for any organization already facing a shortage of cloud talent. In this case, a solution like Azure can help because it is designed to facilitate the management of multicloud as well as hybrid cloud and edge computing. </p>
			<p>Now that we have discussed terminology, let's talk about strategy.</p>
			<h2 id="_idParaDest-44"><a id="_idTextAnchor050"/>What makes a hybrid and multicloud strategy successful?</h2>
			<p>Enabling your teams to use the technology that fits their needs while providing security and governance across your organization's locations is a crucial goal if you want to use hybrid and multicloud solutions successfully. Besides improving your end users' experience, such an environment also enables unified operations for application development and IT management. Your developers can build apps with the same tools, APIs, and deployment across your organization. Your management, security, and governance can be made homogeneous for all your business locations. Consistent choices of databases and computing stacks across locations let you quickly move data and workloads as you need.</p>
			<p>Overall, Azure hybrid and multicloud solutions and products let you optimize:</p>
			<ul>
				<li><strong class="bold">User app experience</strong>: Create a consistent app experience across your entire cloud, on-premises, and off-premises estate.</li>
				<li><strong class="bold">Data services</strong>: Data migration, management, and analysis can be made seamless by running Azure data services wherever you need them.</li>
				<li><strong class="bold">IT management</strong>: Unify the management, governance, and security of your IT resources with centralized control across all your organizational domains.</li>
				<li><strong class="bold">Security and threat protection</strong>: Use one control plane across your digital estate for security and advanced threat protection for all your workloads.</li>
				<li><strong class="bold">Identity and user access</strong>: Use a unified platform for identity and access management for a seamless, single sign-on user experience globally.</li>
				<li><strong class="bold">Networking</strong>: Connect distributed workloads and locations securely across your organization by making Azure an extension of your current network.</li>
			</ul>
			<p>Azure Arc and Azure Stack are two components of Azure hybrid and multicloud solutions and products. Azure Arc provides simplified management of your deployments and extends Azure application services and data across multicloud, datacenters, and the edge. Azure Stack, through its three offerings and ability to optionally utilize Azure Arc, provides:</p>
			<ul>
				<li>A cloud-native integrated system that brings Azure cloud services on-premises, targeting disconnected scenarios.</li>
				<li>A <strong class="bold">hyperconverged infrastructure</strong> (<strong class="bold">HCI</strong>) that modernizes datacenters by refreshing virtualization hosts using modern software-defined storage and networking combined with Hyper-V for compute.</li>
				<li>Cloud-managed appliances/edge devices for running edge-computing workloads.</li>
			</ul>
			<p>Together, they enable you to:</p>
			<ul>
				<li>Use a single control plane to manage, govern, and secure servers, Kubernetes clusters, and apps seamlessly across multicloud, on-premises, and the edge.</li>
				<li>Keep your Azure services up to date on any infrastructure, along with automation, unified management, and security.</li>
				<li>Modernize applications on-premises or at the edge with cloud-native technologies.</li>
				<li>Combine virtualized apps with a local HCI that can easily add Azure services to the offering for optimal price performance.</li>
				<li>Extend Azure compute, storage, and AI to the IoT and other edge devices, and run machine learning and advanced analytics at the edge for real-time insights.<h4>Note</h4><p class="callout">This chapter focuses on Azure Arc and Azure Stack planning, implementation, and best practices. Further information on Azure security and related topics is available at <a href="https://azure.microsoft.com/services/security-center/">https://azure.microsoft.com/services/security-center/</a> and <a href="https://docs.microsoft.com/azure/?product=all">https://docs.microsoft.com/azure/?product=all</a>.</p><p class="callout">Microsoft also offers examples of solution architecture for building hybrid and multicloud solutions and a flexible migration path. Here is one for managing configurations for Azure Arc enabled servers: <a href="https://docs.microsoft.com/azure/architecture/hybrid/azure-arc-hybrid-config">https://docs.microsoft.com/azure/architecture/hybrid/azure-arc-hybrid-config</a>.</p></li>
			</ul>
			<p>Hopefully, these first sections have given you a good introductory foundation. In the next section, we'll take a deeper dive into Azure Arc.</p>
			<h2 id="_idParaDest-45"><a id="_idTextAnchor051"/>Azure Arc overview</h2>
			<p>As cloud, non-cloud, on-premises, and off-premises solutions continue to expand at ever-increasing rates, organizations must manage increasingly complex IT environments. Multiple clouds and environments means multiple disparate management tools and learning curves. As an additional challenge, existing tools may not adequately support such new cloud-native versions of operational models like DevOps and ITOps.</p>
			<p>Azure Arc offers a solution to simplify the management and governance of these environments. With Azure Arc, you can deploy Azure services and extend Azure management anywhere. It is a single platform (single pane of glass) for the consistent management of multicloud, on-premises, and edge resources, each projected via Azure Arc into <strong class="bold">Azure Resource Manager</strong> (<strong class="bold">ARM</strong>). This lets you manage VMs, Kubernetes clusters, and databases as if they were running in Azure, using Azure services and management tools.</p>
			<p>The key benefits of Azure Arc are:</p>
			<ul>
				<li>Single-pane-of-glass visibility of your operations and compliance. Use the Azure portal to manage, govern, and secure a wide range of resources across Windows, Linux, SQL Server, and Kubernetes spanning datacenters, the edge, and multicloud.</li>
				<li>The ability to architect and design hybrid applications at scale where components are distributed across public cloud services, private clouds, datacenters, and edge locations without sacrificing central visibility and control. Centrally code and deploy applications confidently to any Kubernetes distribution in any location. Accelerate development through standardized deployment, configuration, security, and observability.</li>
				<li>The extension of Azure application services and data to all your locations. Utilize Azure data and application services to implement cloud practices and automation to consistently deploy scalable, up-to-date Azure Arc enabled services.</li>
			</ul>
			<p>With Azure Arc, you can:</p>
			<ul>
				<li>Continue with and extend the application of the processes and services administered by your IT department for your business (ITOps) across all these environments.</li>
				<li>Deploy DevOps to support new cloud-native patterns across all environments, including cloud and non-cloud.</li>
				<li>Manage and govern Windows and Linux servers, including physical and virtual machines, inside and outside Azure. </li>
				<li>Manage and govern Kubernetes clusters at scale and with source control for the consistent deployment and configuration of applications.</li>
				<li>Manage Azure SQL Database and PostgreSQL Hyperscale services (Azure Data Services) with on-demand scaling backed by automated patching, upgrades, and security across your organizational domains inside and outside the cloud.</li>
			</ul>
			<p>Specifically, Azure Arc key features enable:</p>
			<ul>
				<li>Consistent server inventory, management, governance, and security across your environments.</li>
				<li>Monitoring, security, and updates of your servers by configuring Azure VM extensions for Azure management services.</li>
				<li>Management and scaling of Kubernetes clusters using any CNFC-conformant Kubernetes distribution using DevOps techniques.</li>
				<li>GitOps-based management with <strong class="bold">Configuration as Code</strong> (<strong class="bold">CaC</strong>) for the deployment of applications and configuration across multiple clusters, directly from source control.</li>
				<li>The use of Azure Policy for automated (zero-touch) compliance and configuration for your Kubernetes clusters.</li>
				<li>Deployment of Azure SQL Managed Instance and Azure Database for PostgreSQL Hyperscale (Azure data services) in any Kubernetes environment, with Azure-level upgrade/update, security, monitoring, and leveraging Azure SQL high availability features and PostgreSQL Hyperscale disconnected scenario support.</li>
				<li>A <a id="_idTextAnchor052"/>unified view of your Azure Arc enabled assets, wherever they are, whether via the Azure portal, CLI, PowerShell, or REST API.<h4>Note</h4><p class="callout">To run Kubernetes workloads on Azure Stack HCI, customers can deploy Azure Kubernetes Service on Azure Stack HCI, which is a service specially architected for Azure Stack HCI.</p></li>
			</ul>
			<p>Now we have an overview of what Azure Arc can help you accomplish, let's go into some detail. We will first go over Azure Arc enabled infrastructure, starting with how it facilitates the management of Kubernetes at scale. Later in this section, we will cover Azure Arc enabled data services that make it possible to run Azure data services on-premises, in other public clouds, and at the edge.</p>
			<h3 id="_idParaDest-46"><a id="_idTextAnchor053"/>Kubernetes app management at scale</h3>
			<p>The advantages of containers, including their portability, efficiency, and scalability, have made them popular for deploying business applications. New applications can be created as microservices in Kubernetes clusters. Legacy applications can be modernized by rewriting them as containers. However, with these possibilities comes the need for management of Kubernetes at scale.</p>
			<p>Azure Arc addresses this need, letting organizations deploy applications quickly to any Kubernetes cluster across multiple locations under robust management policies. This capability is enabled through <strong class="bold">Azure Kubernetes Configuration Management</strong> (<strong class="bold">AKCM</strong>), an Azure service that delivers configuration management and application deployment from Azure, using GitOps. Continuous, compliant deployment can be assured by linking application policies to specific GitHub repositories. With this capability, cluster admins can declare their cluster configuration and applications in Git. The development teams can then use pull requests and the tools they are familiar with (existing DevOps pipelines, Git, Kubernetes manifests, and Helm charts, for example) to easily deploy applications onto Azure Arc enabled Kubernetes clusters and make updates in production. The GitOps agents listen to changes and facilitate automated rollbacks if these changes result in system divergence from the source of truth.</p>
			<p>For example, a retailing enterprise with many outlets can migrate its in-store applications to Kubernetes clusters of containers. Azure Arc enables the uniform deployment, configuration, and management of these containerized applications to multiple locations. New outlets can receive specific sets of applications with centralized control of compliance and configuration. The IT team can also monitor, secure, and change configurations and applications in all outlets while leveraging policies to secure network connections and prevent misconfigurations. </p>
			<p><strong class="bold">Azure Kubernetes Service</strong> (<strong class="bold">AKS</strong>) can be used to monitor Kubernetes cluster health, carrying out maintenance, mounting storage volumes, and activating nodes for specific tasks (for example, using GPU-enabled nodes for parallel processing). Azure Arc and Azure Policy then give the retailer's IT team a unified view in the Azure portal of all clusters in all outlets. You can also run Azure Arc enabled data services on Azure Stack HCI. This is discussed later in the chapter.</p>
			<h3 id="_idParaDest-47"><a id="_idTextAnchor054"/>Azure Arc enabled servers</h3>
			<p>With Azure Arc enabled servers, you can apply native Azure VM levels of management to Windows and Linux machines located outside Azure, for example, on an enterprise network or as part of services from other cloud providers. These non-Azure resources can be connected to Azure and managed as Azure resources. Each connected hybrid machine is then included in a resource group with a machine-level resource ID. It can also be managed using standard Azure functionality such as Azure Policy, RBAC, and tags. </p>
			<p>For example, service providers managing multiple customer environments can extend native Azure management functionality via Azure Arc, such as Azure Lighthouse, which lets service providers sign in to their tenant so they can manage subscriptions and resource groups as delegated by customers.</p>
			<p>Azure Arc's control plane functionality provides:</p>
			<ul>
				<li>Management groups and tags for organizing your resources.</li>
				<li>The use of Azure Resource Graph for indexing and searching.</li>
				<li>The use of Azure <strong class="bold">Role-Based Access and Control</strong> (<strong class="bold">RBAC</strong>) for security and access control.</li>
				<li>Templates and extensions for environment creation and automation.</li>
				<li>Update management.</li>
			</ul>
			<h3>Supported scenarios</h3>
			<p>When you connect your machine to Azure Arc enabled servers, the following benefits are available:</p>
			<ul>
				<li><strong class="bold">Azure Automation Change Tracking and Inventory</strong>: Used for reporting on configuration changes on monitored servers. This can be used for Microsoft services, Windows registry and files, Linux daemons, and your installed software.</li>
				<li><strong class="bold">Azure Automation State Configuration</strong>: Used for simplifying deployment for your non-Azure Windows or Linux machines. You can also use Custom Script Extension for software installation or post-deployment configuration.</li>
				<li><strong class="bold">Update Management</strong>: For managing Windows and Linux server operating system updates. For more information, check out <a href="https://docs.microsoft.com/azure/automation/update-management/enable-from-automation-account">https://docs.microsoft.com/azure/automation/update-management/enable-from-automation-account</a>.</li>
				<li><strong class="bold">Azure Monitor for VMs</strong>: This allows you to monitor guest operating system performance on your connected machine. You can discover application components and monitor their processes and dependencies.</li>
				<li><strong class="bold">Azure Policy guest configurations</strong>: You can assign (and not just audit) Azure Policy guest configurations to your hybrid machine, just like you assign policies to Azure native machines.</li>
				<li><strong class="bold">Azure Defender</strong>: Used for detecting and responding to threats, as well as managing the preventative security and compliance capabilities of your non-Azure servers.<h4>Note</h4><p class="callout">Each hybrid machine to be managed via Azure Arc requires the installation of the Azure Connected Machine agent. For proactive monitoring of the operating system and workloads on the machine, you should also install the Log Analytics agent for Windows and Linux, then manage the device with automation runbooks, Update Management, Azure Security Center, or other suitable services. Log data collected and stored from the hybrid device can then be identified in a Log Analytics workspace via its resource ID or other properties.</p></li>
			</ul>
			<h3>Supported regions</h3>
			<p>Whether you enable Azure Arc enabled servers manually or through running a template script, the natural choice for the location is the Azure region geographically nearest to your device. Your choice of region may also be determined by data residency requirements, given that data is stored in the Azure geography that contains the chosen region. </p>
			<p>If there is an outage in the Azure region you select, your connected machine will not be affected. On the other hand, Azure-based management operations may not be able to complete. For a geographically redundant service with multiple devices or locations, connect them to different Azure regions.</p>
			<p>Some data is collected and stored from the connected machine. The following is stored in the region where the Azure Arc machine resource was created:</p>
			<ul>
				<li>The computer <strong class="bold">fully qualified domain name</strong> (<strong class="bold">FQDN</strong>)</li>
				<li>The name of the computer</li>
				<li>The version of the Connected Machine agent </li>
				<li>The name and version of the operating system</li>
			</ul>
			<p>Every 5 minutes, the connected machine sends a heartbeat signal to the service. If these signals cease, the service will change the status of the device in the portal to disconnected within 15 to 30 minutes. When the connected machine agent sends a new heartbeat signal, the status will change back to connected.</p>
			<p>For further reading, check out:</p>
			<ul>
				<li><a href="https://docs.microsoft.com/azure/azure-arc/servers/overview">https://docs.microsoft.com/azure/azure-arc/servers/overview</a></li>
				<li><a href="https://docs.microsoft.com/azure/azure-arc/servers/agent-overview">https://docs.microsoft.com/azure/azure-arc/servers/agent-overview</a></li>
			</ul>
			<h3 id="_idParaDest-48"><a id="_idTextAnchor055"/>Azure Arc enabled data services</h3>
			<p>With Azure Arc and Kubernetes, specified Azure data services are available for you to run on the infrastructure of your choice outside Azure, for example, on-premises, on edge devices, and in other clouds. Azure innovations, scalability, and unified management are then available for data workloads in both connected and disconnected scenarios. The first Azure Arc enabled data services to be made public (first in preview) are SQL Managed Instance and PostgreSQL Hyperscale. It is important to note that you can also run Azure Arc enabled data services on Azure Stack HCI, which is discussed later in this chapter.</p>
			<h3>Evergreen (always current)</h3>
			<p>By using Azure Arc enabled data services for on-premises workloads, you can systematically access the latest Azure features and capabilities. You can also configure automatic updates to receive the latest patches and upgrades from Microsoft Container Registry while controlling deployment cadences according to your policy and maximizing system uptime. As a further advantage, you can avoid end-of-support issues for your databases, because Azure Arc enabled data services are a subscription service.</p>
			<h3>Elasticity</h3>
			<p>Azure Arc enabled data services offer cloud-like elastic scaling for your on-premises databases, allowing you to meet the requirements of volatile and bursting workloads, as well as real-time data ingestion and queries. No limit is placed on scalability and you can spin up database instances in seconds for sub-second operational response times. Database administrative tasks such as configuring high availability are simplified to the level of a few clicks. Data workloads can dynamically scale according to the capacity needed and without halting applications, with both scale-up and scale-out possibilities for increased read replicas or sharding. </p>
			<h3>Unified management</h3>
			<p>You can get a unified view of your data assets deployed with Azure Arc by using tools such as the Azure portal, Azure Data Studio, or Azure Data CLI. You can check on infrastructure capacity and health using logs and telemetry from Kubernetes APIs. Azure Monitor is also available for operational views and insights across all your data estate.</p>
			<p>To scale management with resources, Azure Arc automates database management tasks. Out-of-the-box functionality includes monitoring, rapid provisioning, on-demand elastic scaling, patching, high availability setup, and backup and restore. With Azure Arc, databases in your digital domains can also benefit from Azure Backup, Azure Monitor, Azure Policy, Azure RBAC, and Advanced Data Security.</p>
			<h3>Management in disconnected scenarios</h3>
			<p>You can access Azure benefits with or without a direct and continuous cloud connection. Many services, including monitoring, automated backup/restore, and self-service provisioning, can run locally whether a direct connection to Azure is available or not. The local Azure Arc data controller offers comprehensive management functionality in your self-hosted environment for provisioning, elastic scale, backup, automated updates, monitoring, and high availability. Connecting directly to Azure adds options for integration with other Azure services such as Azure Monitor, and enables you to use the Azure portal and Azure Resource Manager APIs from anywhere for management of your Azure Arc enabled data services.</p>
			<h3 id="_idParaDest-49"><a id="_idTextAnchor056"/>Prerequisites for Azure data services</h3>
			<p>You will need a Kubernetes cluster based on a major Kubernetes distribution for the orchestration of Azure data services on the infrastructure of your choice. You will also need to install the Azure Arc data controller before provisioning Azure data services and using management functionality in your environment.</p>
			<h3>Should you choose an Arc enabled SQL server or Arc enabled managed instance?</h3>
			<p>Azure already offers different deployment and management options for hosting SQL Server capability. Support for SQL Server with Azure Arc increases the range of possibilities. Azure Arc possibilities can be compared as follows:</p>
			<ul>
				<li><strong class="bold">Azure Arc enabled SQL Server (currently in preview)</strong>: For SQL servers in your own infrastructure or another public cloud, Azure Arc enabled SQL Server lets you connect these SQL servers to Azure and take advantage of the associated Azure services. There is no impact on the SQL servers from connection and registration with Azure. There is no requirement for data migration or downtime either. With the Azure portal as your central management dashboard, you can manage all your SQL servers. The SQL Server On-Demand Assessment service lets you regularly validate the health of your SQL Server environment, mitigate risks, and enhance performance.</li>
				<li><strong class="bold">Azure Arc enabled SQL Managed Instance (currently in preview)</strong>: Azure Arc enabled SQL Managed Instance is an Azure SQL data service. It can be created anywhere in your infrastructure and has close to 100% compatibility with the most recent SQL Server database engine. With Azure Arc enabled SQL Managed Instance, you can lift and shift your applications to Azure Arc data services while minimizing changes to your applications and databases.</li>
			</ul>
			<p>Without leaving your existing infrastructure, you can migrate your existing SQL Server applications to the latest version of the SQL Server engine and get the additional advantage of the PaaS-like integrated management capabilities. These capabilities help you meet compliance criteria such as data sovereignty. To do this, you leverage the Kubernetes platform with Azure data services, for which deployment can be on any infrastructure.</p>
			<p>Currently, the following advantages are available:</p>
			<ul>
				<li>Easy creation, removal, and elastic scale-up or down of a managed instance within a minute.</li>
				<li>The platform automatically installs upgrades, updates, and patches to ensure that you run the most recent version of SQL Server.</li>
				<li>Monitoring, high availability, and backup and restore available as integrated management services.</li>
			</ul>
			<h3>Azure Arc enabled PostgreSQL Hyperscale or Azure Database for PostgreSQL Hyperscale?</h3>
			<p>These two entities differ from each other in a similar way as Arc enabled SQL Server and Arc enabled SQL Managed Instance do with each other. Azure Database for PostgreSQL Hyperscale is a service in Azure operated by Microsoft and running in Microsoft datacenters. By comparison, Azure Arc enabled PostgreSQL Hyperscale is part of Azure Arc enabled data services and runs on your own infrastructure. However, both entities are based on the hyperscale form factor of the PostgreSQL database powered by the Citus extension. </p>
			<h3 id="_idParaDest-50"><a id="_idTextAnchor057"/>Connectivity modes</h3>
			<p>Your Azure Arc enabled data services environment can connect to Azure in different ways, depending on factors like your business policy, government regulations, and the network connections available. With Azure Arc enabled data services, you can choose between the following connectivity modes:</p>
			<ul>
				<li>Directly connected (not supported at the time of writing)</li>
				<li>Indirectly connected</li>
				<li>Never connected (not supported at the time of writing)</li>
			</ul>
			<p>The availability of some functionality of Azure Arc enabled data services will depend on the connectivity mode that you choose. The choice of connectivity mode lets you decide how much data is transmitted to Azure and the type of user interaction with the Arc data controller. Let's discuss the differences between direct and indirect connections.</p>
			<h3>Direct connections</h3>
			<p>When Azure Arc enabled data services are directly connected to Azure:</p>
			<ul>
				<li>Users can operate the Azure Arc data services via Azure Resource Manager APIs, the Azure CLI, and the Azure portal.</li>
				<li><strong class="bold">Azure Active Directory</strong> (<strong class="bold">Azure AD</strong>) and Azure RBAC are available because of the continuous and direct communication in the directly connected mode.</li>
				<li>Services such as Azure Defender security services, Container Insights, and Azure Backup to blob storage are available in the directly connected mode. </li>
			</ul>
			<p>Operations in the directly connected mode are similar to using the Azure portal for services, for example, provisioning/de-provisioning, configuring, and scaling.</p>
			<p>Direct connections may be used for:</p>
			<ul>
				<li>Organizations using public clouds such as Azure, AWS, or Google Cloud Platform.</li>
				<li>Edge site locations such as retail stores where internet connectivity is often present and permitted.</li>
				<li>Corporate datacenters, allowing more extensive connectivity to/from the data region of their datacenter and the internet.</li>
			</ul>
			<h3>Indirect connections</h3>
			<p>When Azure Arc enabled data services are indirectly connected to Azure:</p>
			<ul>
				<li>Only a read-only view is available in the Azure portal. You can see instances and details of deployments of managed instances and Postgres Hyperscale instances, but you cannot act on them in the Azure portal.</li>
				<li>All actions must be initiated locally using Azure Data Studio, Azure Data CLI (<strong class="inline">azdata</strong>), or Kubernetes-native tools such as <strong class="inline">kubectl</strong>.</li>
				<li>Azure AD and Azure RBAC are not available.</li>
				<li>Services such as Azure Defender security services, Container Insights, and Azure Backup to blob storage are not available.</li>
			</ul>
			<p>At the time of writing, only the indirectly connected mode is supported (in preview).</p>
			<p>Indirect connections may be used for:</p>
			<ul>
				<li>On-premises datacenters, for example, for finance, healthcare, or government, may disallow connectivity in or out of the data region. This is due to business or regulatory compliance policies, often to avoid the risks of external attacks or data exfiltration.</li>
				<li>Edge site locations, for example, for oil/gas or military field applications, where connectivity to the internet is often unavailable.</li>
				<li>Edge site locations, such as ships, with only intermittent connectivity.</li>
			</ul>
			<h3>Never connected</h3>
			<p>In never connected mode, no data can be sent in any way to or from Azure. A use case for this scenario could be a top-secret government facility. This type of air-gapped environment ensures full data isolation.</p>
			<p>It is important to note that this mode is not yet supported.</p>
			<h3 id="_idParaDest-51"><a id="_idTextAnchor058"/>Connectivity requirements</h3>
			<p>An agent in your environment is always the initiator of communication between your environment and Azure. This is also true for operations initiated by a user in the Azure portal, which become tasks queued up in Azure. An agent in your environment then checks for tasks in the queue by initiating communication with Azure. The agent runs those tasks and reports to Azure on the task status (completion or failure).</p>
			<h3>Connections available for the indirectly connected mode</h3>
			<p>There are currently three connections available for the only supported mode in the preview phase, the indirectly connected mode. They are:</p>
			<ul>
				<li>Azure Monitor APIs</li>
				<li>Azure Resource Manager APIs</li>
				<li><strong class="bold">Microsoft Container Registry</strong> (<strong class="bold">MCR</strong>)</li>
			</ul>
			<p>All HTTPS connections to Azure and the Microsoft Container Registry are encrypted. They use SSL/TLS and officially signed and verifiable certificates.</p>
			<h3>Azure Monitor APIs and Azure Resource Manager APIs</h3>
			<p>Azure Data Studio, Azure Data CLI (<strong class="inline">azdata</strong>), and the Azure CLI connect to the Azure Resource Manager APIs to transmit data to, and receive data from, Azure for certain features.</p>
			<p>Currently, all browser HTTPS/443 connections to the Grafana and Kibana dashboards and from Azure Data CLI (<strong class="inline">azdata</strong>) to the data controller API use SSL encryption with self-signed certificates. A feature is planned to make encryption of these SSL connections possible using your own certificates.</p>
			<h3>Microsoft Container Registry</h3>
			<p>MCR is the repository for the Azure Arc enabled data services container images. You can pull these images from MCR and push them to a private container registry. You can then configure the data controller deployment process to pull the container images from that private container registry.</p>
			<p>Connections to the Kubernetes API server from Azure Data Studio and Azure Data CLI (<strong class="inline">azdata</strong>) use the Kubernetes authentication and encryption that you have put in place. To execute many of the actions concerning Azure Arc enabled data services, users of Azure Data Studio and Azure Data CLI must have an authenticated connection to the Kubernetes API.</p>
			<h3 id="_idParaDest-52"><a id="_idTextAnchor059"/>Azure Arc data controller creation</h3>
			<p>Several different approaches are possible for creating Azure Arc enabled data services on Kubernetes clusters and managed Kubernetes services.</p>
			<p>You can find a current list of the supported Kubernetes services and distributions here: <a href="https://docs.microsoft.com/azure/azure-arc/data/create-data-controller">https://docs.microsoft.com/azure/azure-arc/data/create-data-controller</a>.</p>
			<p>This URL will also provide you with requirements for the services and distributions. For example, the minimum supported version of the application, VM size, memory and storage, and connectivity requirements. In addition, you will find the information needed during the controller creation process.</p>
			<h3 id="_idParaDest-53"><a id="_idTextAnchor060"/>Azure Arc in GitHub</h3>
			<p>The GitHub repository at <a href="https://github.com/microsoft/azure_arc">https://github.com/microsoft/azure_arc</a> holds different resources to assist you in using Azure Arc enabled servers, Azure Arc enabled SQL Server, Azure Arc enabled Kubernetes, and Azure Arc enabled data services.</p>
			<p>We'll take a look at the different guides available that can assist you in Azure Arc adoption.</p>
			<h3>Azure Arc enabled servers</h3>
			<p>These deployment scenarios are available to guide you in onboarding different Windows and Linux server deployments to Azure with Azure Arc:</p>
			<ul>
				<li><strong class="bold">General</strong>: Examples that can be used to connect existing Windows or Linux servers to Azure with Azure Arc.</li>
				<li><strong class="bold">Microsoft Azure</strong>: Guides to onboarding an Azure VM as an Azure Arc enabled server. </li>
				<li>Additional guides give information on using Vagrant, <strong class="bold">Amazon Web Services</strong> (<strong class="bold">AWS</strong>), <strong class="bold">Google Cloud Platform</strong> (<strong class="bold">GCP</strong>), and VMware.</li>
				<li><strong class="bold">Azure Arc enabled servers—Day-2 scenarios and use cases</strong>: After server resources have been projected into Azure with Azure Arc to make them Azure Arc enabled servers, these guides show examples of managing these servers as native Azure resources using native Azure management tools such as resource tags, Azure Policy, and Log Analytics.</li>
				<li><strong class="bold">Azure Arc enabled servers—scaled deployment scenarios</strong>: Guides to the scaled onboarding to Azure Arc of VMs in different platforms and existing environments.</li>
			</ul>
			<h3>Azure Arc enabled SQL Server</h3>
			<p>These deployment scenarios offer guidance to onboarding deployments of Microsoft SQL Server on different platforms to Azure Arc:</p>
			<ul>
				<li><strong class="bold">Microsoft Azure</strong>: Walkthroughs of onboarding an Azure VM with an SQL Server installation as Azure Arc enabled SQL and as an Azure Arc enabled server. This guide is for demo and testing purposes only (it is not supported).</li>
				<li><strong class="bold">AWS</strong>: Guidance for end-to-end deployment in AWS of Windows Server with SQL Server and onboarding with Terraform to Azure with Azure Arc.</li>
				<li><strong class="bold">GCP</strong>: Guidance for end-to-end deployment in GCP of Windows Server with SQL Server and onboarding with Terraform to Azure with Azure Arc.</li>
				<li><strong class="bold">VMware</strong>: Guidance for end-to-end deployment in VMware vSphere of Windows Server with SQL Server and onboarding with Terraform to Azure with Azure Arc.</li>
			</ul>
			<h3>Azure Arc enabled Kubernetes</h3>
			<p>This section has options for Azure Arc enabled Kubernetes, for rapidly spinning up a Kubernetes cluster ready for projection in Azure Arc and management by Azure-native tools:</p>
			<ul>
				<li><strong class="bold">General</strong>: Demonstration by the example of connection to Arc or an existing Kubernetes cluster.</li>
				<li><strong class="bold">AKS</strong>: Example walkthroughs of creating an AKS cluster to simulate a cluster running on-premises. Deployment examples include using Terraform and an ARM template.</li>
				<li><strong class="bold">Amazon Elastic Kubernetes Service</strong> (<strong class="bold">EKS</strong>): An example using Terraform to deploy an EKS cluster on AWS and connection of this EKS cluster to Azure with Azure Arc.</li>
				<li><strong class="bold">Google Kubernetes Engine</strong> (<strong class="bold">GKE</strong>): An example using Terraform to deploy a GKE cluster on Google Cloud and the connection of this EKS cluster to Azure with Azure Arc.</li>
				<li><strong class="bold">Rancher k3s</strong>: Deployment examples of Rancher k3s lightweight Kubernetes (for example, for an edge, IoT, or embedded Kubernetes) on an Azure VM or VMware onboarding of the cluster to Azure with Azure Arc.</li>
				<li><strong class="bold">Azure Red Hat OpenShift</strong> (<strong class="bold">ARO</strong>) <strong class="bold">V4</strong>: An example using Terraform to deploy a new ARO cluster with onboarding of the cluster to Azure with Azure Arc.</li>
				<li><strong class="bold">Kubernetes in Docker</strong> (<strong class="bold">kind</strong>): An example of using kind for the creation of a Kubernetes cluster on your local machine (running as a local Kubernetes cluster using Docker container "nodes") and onboarding of the cluster as an Azure Arc enabled Kubernetes cluster.</li>
				<li><strong class="bold">MicroK8s</strong>: An example walkthrough of using MicroK8s to create a Kubernetes cluster on your local machine and onboarding of the cluster as an Azure Arc enabled Kubernetes cluster.</li>
				<li><strong class="bold">Azure Arc enabled Kubernetes—day-2 scenarios and use cases</strong>: After Kubernetes clusters have been projected into Azure with Azure Arc, these guides show examples of managing these clusters as native Azure resources using native Azure management tools such as Azure Monitor, Azure Policy, and GitOps configurations. For instance, for AKS (works also for GKE), you can deploy GitOps configurations and perform basic and Helm-based GitOps flow on AKS as an Azure Arc connected cluster. You can also apply GitOps configurations on AKS as an Azure Arc connected cluster using Azure Policy for Kubernetes and integrate Azure Monitor for containers with AKS as an Azure Arc connected cluster.</li>
			</ul>
			<h3>Azure Arc enabled data services (currently in preview)</h3>
			<p>This section contains deployment options for Azure Arc enabled data services. The goal is the rapid spinning-up of new Kubernetes clusters and deployment of Azure Arc enabled data services that are ready for projection in Azure Arc and management with Azure-native tooling. If you already have a Kubernetes cluster, you can use this information to deploy Azure Arc enabled data services to an existing Kubernetes cluster: <a href="https://docs.microsoft.com/azure/azure-arc/data/create-data-controller">https://docs.microsoft.com/azure/azure-arc/data/create-data-controller</a>:</p>
			<ul>
				<li><strong class="bold">Data services on AKS</strong>: Example walkthroughs for creating an AKS cluster with the deployment of Azure Arc data services on the cluster. For example, use of Azure Arc Data Controller Vanilla, Azure SQL Managed Instance, and Azure PostgreSQL Hyperscale Deployment on AKS with an Azure ARM template: <a href="https://github.com/microsoft/azure_arc/tree/main/azure_arc_data_jumpstart/aks/arm_template">https://github.com/microsoft/azure_arc/tree/main/azure_arc_data_jumpstart/aks/arm_template</a>.</li>
				<li><strong class="bold">Data services on AWS Elastic Kubernetes</strong>: Example walkthroughs for the creation of an EKS cluster and the deployment of Azure Arc data services on that cluster.</li>
				<li><strong class="bold">Data services on GCP Google Kubernetes</strong>: Example walkthroughs for the creation of a GKE cluster and the deployment of Azure Arc data services on that cluster.</li>
				<li><strong class="bold">Data services on upstream Kubernetes</strong> (<strong class="inline">Kubeadm</strong>): Example walkthroughs for the creation of a single-node Kubernetes cluster and the deployment of Azure Arc data services on that cluster.</li>
			</ul>
			<p>The GitHub repository provides excellent jumpstart documentation. It covers a wide variety of scenarios, and they are always looking for more if you are interested in contributing.</p>
			<p>We have covered a lot of material in our overview of Azure Arc. Hopefully, these sections have provided you with a solid starting point as you begin your proof-of-concept projects. We must now turn our attention to Azure Stack, another critical piece of the Azure hybrid and multicloud strategy.</p>
			<h2 id="_idParaDest-54"><a id="_idTextAnchor061"/>Modernizing your datacenter with Azure Stack</h2>
			<p>The Azure Stack family of solutions can extend Azure services and capabilities to all of your locations, such as your on-premises datacenter, remote offices, and edge devices. You can also create and run hybrid applications consistently across location and environment boundaries, meeting the requirements of diverse workloads.</p>
			<p>Azure Stack is a family of three products:</p>
			<ul>
				<li><strong class="bold">Azure Stack Hub</strong>: A cloud-native integrated system that brings Azure cloud services on-premises</li>
				<li><strong class="bold">Azure Stack HCI</strong>: An HCI that modernizes datacenters by refreshing virtualization hosts using modern software-defined storage and networking combined with Hyper-V for compute</li>
				<li><strong class="bold">Azure Stack Edge</strong>: A cloud-managed edge appliance for running AI/ML, IoT solutions, and edge computing workloads</li>
			</ul>
			<p>These three Azure Stack solutions can be positioned as follows:</p>
			<ol>
				<li>Azure Stack Hub:<ul><li>Private, autonomous cloud—enabling both completely disconnected scenarios as well as connected-hybrid-cloud scenarios, while maintaining operational consistency with Azure </li><li>App modernization (cloud-native apps)</li><li>Data sovereignty, regulatory, and compliance scenarios</li><li>Connected and disconnected or airgapped scenarios</li></ul></li>
				<li>Azure Stack HCI:<ul><li>Hybrid and hyperconverged solution integrated with Azure</li><li>Modernization of on-premises architecture eliminating the complexity of SAN storage</li><li>Scalable virtualization, storage, and networking</li><li>High-performance workloads</li><li>Remote and branch offices</li></ul></li>
				<li>Azure Stack Edge:<ul><li>Azure-managed appliance as a service</li><li>Hardware-accelerated compute, AI/ML, and IoT applications</li><li>Low-latency workloads</li><li>Cloud storage gateway capabilities</li></ul></li>
			</ol>
			<p>This chapter is focused on Azure Stack Hub and Azure Stack HCI. Further information on Azure Stack Edge can be found here: <a href="https://azure.microsoft.com/products/azure-stack/edge/">https://azure.microsoft.com/products/azure-stack/edge/</a>.</p>
			<p>Now we have briefly reviewed the three Azure Stack solutions, let's discuss one of its varieties, Azure Stack Hub, in detail. </p>
			<h3 id="_idParaDest-55"><a id="_idTextAnchor062"/>Azure Stack Hub overview</h3>
			<p>Azure Stack Hub brings Azure services on-premises, in your datacenter, and it is an extension of Azure. Using the same cloud platform across its digital estate, your organization can confidently let business requirements drive technology decisions instead of having technology limitations impact business decisions.</p>
			<h3>Why use Azure Stack Hub?</h3>
			<p>While native Azure offers developers comprehensive services for building modern apps, latency, sporadic connectivity, data regulations, and compliance, it can pose challenges for cloud-based applications. To solve these issues, Azure and Azure Stack Hub opens possibilities for new hybrid cloud scenarios for applications, whether intended for customers or internal use:</p>
			<ul>
				<li><strong class="bold">On-premises cloud apps</strong>: Using Azure services and container-based microservices and serverless architectures, you can extend current apps or create new ones to leverage cloud-style advantages and maintain operations consistency. This consistency across native-cloud Azure and an on-premises Azure Stack Hub allows one set of DevOps processes, helping accelerate app modernization and build robust mission-critical apps.</li>
				<li><strong class="bold">Cloud app compliance</strong>: Azure Stack Hub lets you combine on-premises requirements with cloud benefits. You can create and develop apps in an Azure environment for deployment on-premises with Azure Stack Hub with no code changes to satisfy regulatory and compliance requirements. Examples include apps for expense reporting, financial reporting, foreign exchange trading, and global audit.</li>
				<li><strong class="bold">Intermittent or no connectivity</strong>: You can use Azure Stack Hub with only intermittent or even no connectivity to Azure or the internet. Remote production sites, ships, and military applications are examples. Data can be processed in your Azure Stack Hub installation, then aggregated in Azure at a convenient time for additional analytics, avoiding issues of latency or permanent connection. </li>
			</ul>
			<h3 id="_idParaDest-56"><a id="_idTextAnchor063"/>Use cases for Azure Stack Hub</h3>
			<p>Among the many possibilities, we list selected examples here from six major sectors:</p>
			<ol>
				<li value="1">Financial services:<ul><li>Modernize mission-critical apps with a microservices architecture supported by Azure services and containers.</li><li>Satisfy regulatory requirements while streamlining operations by running cloud apps on-premises and keeping data, applications, and identities secure.</li><li>Leverage real-time insights, mitigate risks while avoiding latency, and enhance the customer experience through AI and other apps that run in local HCI.</li></ul></li>
				<li>Government:<ul><li>Use predictive maintenance on vehicle fleets and manage buildings for energy efficiency via IoT solutions that incorporate machine learning.</li><li>Enhance services for citizens through better on-premises application and database performance, including for legacy applications.</li><li>Remain compliant and enhance governance by using a consistent set of tools for application and data management.</li></ul></li>
				<li>Manufacturing:<ul><li>Use hybrid cloud capabilities to improve productivity and efficiency by running Azure services without the need for a permanent connection to the internet.</li><li>Improve employee safety through AI applications at the edge to alert on hazards, and avoid machine breakdown through predictive maintenance.</li><li>Monitor output from production stages in real time to enhance quality and reduce defects and damage.</li></ul></li>
				<li>Retail:<ul><li>Boost customer satisfaction through smarter use of data, including the analysis of promotions and customer interest local to each retail outlet.</li><li>Optimize the availability of products by monitoring inventory and rate of purchase to re-order the right quantities at the right time.</li><li>Reduce losses due to shrinkage, shoplifting, return fraud, or other inventory impacts through real-time intelligence from video and application data.</li></ul></li>
				<li>Energy:<ul><li>Use essential cloud services in activities and areas that are not connected to the internet, such as remote exploration sites and power grids.</li><li>Reduce and avoid expensive equipment failures, resolve remote site issues faster, and find and fix problems before they impact worker safety.</li><li>Store and process data locally to immediately optimize output and operations for oil wells, refineries, power stations, wind farms, and more.</li></ul></li>
				<li>Health:<ul><li>Modernize legacy systems and help protect patients from system malfunctions, while integrating medical devices and apps in cloud-like and hyperconverged environments.</li><li>Improve clinical environments and resource utilization, including operating room performance and ward occupancy, by moving infrastructure to flexible cloud configurations.</li><li>Optimize data analytics and health records management through local aggregation, processing, and medical records storage in a scalable, containerized infrastructure.</li></ul></li>
			</ol>
			<h3>App-, PaaS-, and IaaS-level uses for Azure Stack Hub</h3>
			<p>Azure Stack Hub is relevant at each of these three conventional cloud resource levels:</p>
			<ul>
				<li><strong class="bold">App level</strong>: Azure Stack Hub can support your app deployment and operation with modern DevOps practices. DevOps teams can maximize productivity and results by using infrastructure as code, <strong class="bold">continuous integration/continuous deployment</strong> (<strong class="bold">CI/CD</strong>), Azure-consistent VM extensions, and other features.</li>
				<li><strong class="bold">Platform as a Service (PaaS) level</strong>: Azure Stack Hub is also a platform for building and running apps that require on-premises PaaS services such as Event Hubs and Web apps. The services are available in Azure Stack Hub in the same way as in Azure, for a unified hybrid development and runtime environment.</li>
				<li><strong class="bold">Infrastructure as a Service (IaaS) level</strong>: Azure Hub Stack enables strongly isolated, self-service resources with detailed tracking of usage, and multi-tenant usage reporting. This makes it an ideal IaaS solution for enterprise private clouds and service providers. Azure Stack Hub, at its core, is an IaaS platform, and we've explored the <a href="https://azure.microsoft.com/blog/azure-stack-iaas-part-one/">https://azure.microsoft.com/blog/azure-stack-iaas-part-one/</a> series.</li>
			</ul>
			<h3 id="_idParaDest-57"><a id="_idTextAnchor064"/>Azure Stack Hub architecture</h3>
			<p>Azure Stack Hub integrated systems are packaged as groups of 4-16 servers (called <strong class="bold">scale units</strong>) delivered to your datacenter after being built by trusted hardware partners. The integrated system with its hardware and software provides a solution that offers cloud-paced innovation and simplified IT management. Azure Stack Hub uses industry-standard hardware and enables the same management tools as for Azure subscriptions, so you can use consistent DevOps processes independently of any connection to Azure. Azure Stack Hub integrated systems are supported both by Microsoft and the hardware partner. </p>
			<h3 id="_idParaDest-58"><a id="_idTextAnchor065"/>Azure Stack Hub identity provider</h3>
			<p>Azure Stack Hub uses one of the following two identity providers: Azure AD or <strong class="bold">Active Directory Federation Services</strong> (<strong class="bold">AD FS</strong>). Many internet-connected, hybrid configurations use Azure AD. On the other hand, disconnected deployments require the use of AD FS. Azure Stack Hub resource providers, along with other apps, function similarly with Azure AD or AD FS. Note that Azure Stack Hub has its own instance of Active Directory and an Active Directory Graph API.</p>
			<h3 id="_idParaDest-59"><a id="_idTextAnchor066"/>How is Azure Stack Hub managed?</h3>
			<p>In the same way that Microsoft delivers Azure services to tenants, you can use Azure Stack Hub operations to provide different services and apps to your tenant users. This is because Azure and Azure Stack Hub use the same operations model.</p>
			<p>Azure Stack Hub introduces a new role called <strong class="bold">Operator</strong>. This is an administrator-level function that is used to manage, monitor, and configure Azure Stack Hub. It is a critical role for the Azure Stack Hub environment, which requires a wide range of skills and knowledge—which are reflected in the Microsoft Certified: Azure Stack Hub Operator Associate (<a href="https://docs.microsoft.com/learn/certifications/azure-stack-hub-operator?WT.mc_id=Azure_blog-wwl">https://docs.microsoft.com/learn/certifications/azure-stack-hub-operator?WT.mc_id=Azure_blog-wwl</a>) certification and Exam AZ-600: Configuring and Operating a Hybrid Cloud with Microsoft Azure Stack Hub (<a href="https://docs.microsoft.com/learn/certifications/exams/az-600?WT.mc_id=Azure_blog-wwl">https://docs.microsoft.com/learn/certifications/exams/az-600?WT.mc_id=Azure_blog-wwl</a>). </p>
			<p>To prepare for this exam, we have published a set of materials (including the Azure Stack Hub Foundation Core <a href="https://github.com/Azure-Samples/Azure-Stack-Hub-Foundation-Core/tree/master/ASF-Training">https://github.com/Azure-Samples/Azure-Stack-Hub-Foundation-Core/tree/master/ASF-Training</a> materials) listed in TechCommunity blogs: <a href="https://techcommunity.microsoft.com/t5/azure-stack-blog/azure-stack-hub-operator-certification-az-600/ba-p/2024434">https://techcommunity.microsoft.com/t5/azure-stack-blog/azure-stack-hub-operator-certification-az-600/ba-p/2024434</a>. </p>
			<p>Azure Stack Hub can be managed using three options:</p>
			<ul>
				<li>Administrator portal</li>
				<li>User portal</li>
				<li>PowerShell</li>
			</ul>
			<p>The administrator portal can be used for management actions on Azure Stack Hub such as status monitoring or health maintenance of the integrated system, adding marketplace items, adding capacity, and adding new resource providers to enable new PaaS services. The Azure Stack Hub administration portal quickstart (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-manage-portals">https://docs.microsoft.com/azure-stack/operator/azure-stack-manage-portals</a>) has more information on using the administrator portal to manage Azure Stack Hub. </p>
			<p>Azure Stack Hub Quickstart templates are also available with examples for the deployment of resources, from a simple VM installation to more complex deployments such as Exchange and SharePoint.</p>
			<p>As an Azure Stack Hub Operator, you can enable various resource types for your users. For example, this can include SQL and MySQL servers, as well as VM custom images, app services, Azure functions, event hubs, and others. As an Operator, you can also manage capacity issues, create usage offers and subscriptions for tenants, and respond to alerts. </p>
			<p>Users can leverage the self-service capabilities of the user portal to consume cloud resources such as web apps, storage accounts, and VMs. Users consume services that are made available by the Operator, and they can provision, monitor, and manage services that they have subscribed to, such as storage, web apps, and VMs. Users have the choice of managing their environment with either the user portal or PowerShell. </p>
			<p>Azure Stack Hub provides a multi-tenant environment. This has enabled various service providers (including cloud solution providers, managed service providers, and <strong class="bold">independent software vendors</strong> (<strong class="bold">ISVs</strong>)) to build and offer value on top of the Azure Stack Hub platform and deliver this to multiple customers, each customer being isolated and secured in their own respective Azure Stack Hub subscriptions.</p>
			<h3 id="_idParaDest-60"><a id="_idTextAnchor067"/>Resource providers</h3>
			<p>Resource providers are services that form the foundation for all Azure Stack Hub IaaS and PaaS services. There are three <strong class="bold">foundational IaaS resource providers</strong> in Azure Stack Hub:</p>
			<ul>
				<li><strong class="bold">Compute resource provider</strong>: This allows the creation of VMs by your Azure Stack Hub tenants. With this provider, both VMs and VM extensions can be created.</li>
				<li><strong class="bold">Network resource provider</strong>: Enables the creation of network security groups, public IPs, virtual networks, and software load balancers. </li>
				<li><strong class="bold">Storage resource provider</strong>: Supports the creation of Azure Blob, Table, and Queue Storage services. Azure Key Vault (used to create and manage secret keys) is also supported through this resource provider.</li>
			</ul>
			<p>You can also deploy and use any of these <strong class="bold">optional PaaS resource providers</strong> with Azure Stack Hub:</p>
			<ul>
				<li><strong class="bold">App Service</strong>: A PaaS offering that allows customers to create web, API, and Azure Functions apps for any device or platform. Both your internal and external customers can automate their business processes and integrate your apps with their on-premises apps. These customer apps can be run by Azure Stack Hub cloud operators on shared or dedicated VMs that are fully managed.</li>
				<li><strong class="bold">Event Hubs</strong>: Event Hubs on Azure Stack Hub allows you to realize hybrid cloud scenarios. Streaming- and event-based solutions are supported, for both on-premises and Azure cloud processing. Whether your scenario is hybrid (connected), or disconnected, your solution can support the processing of events/streams at a large scale. Your scenario is bound only by cluster size, which you can provision according to your needs. (Source: <a href="https://docs.microsoft.com/azure/event-hubs/event-hubs-about">https://docs.microsoft.com/azure/event-hubs/event-hubs-about</a>)</li>
				<li><strong class="bold">IoT Hub (preview)</strong>: IoT Hub on Azure Stack Hub allows you to create hybrid IoT solutions. IoT Hub is a managed service, acting as a central message hub for bi-directional communication between your IoT application and the devices it manages. You can use IoT Hub on Azure Stack Hub to build IoT solutions with reliable and secure communications between IoT devices and an on-premises solution backend. (Source: <a href="https://github.com/MicrosoftDocs/azure-docs/blob/master/articles/iot-hub/about-iot-hub.md">https://github.com/MicrosoftDocs/azure-docs/blob/master/articles/iot-hub/about-iot-hub.md</a>)</li>
				<li><strong class="bold">SQL Server</strong>: This allows you to provide SQL databases as a service to your Azure Stack Hub tenants by providing a connector to an SQL Server instance.</li>
				<li><strong class="bold">MySQL Server</strong>: This lets you make MySQL databases available as an Azure Stack Hub service by providing a connector to a MySQL server instance.</li>
			</ul>
			<h3 id="_idParaDest-61"><a id="_idTextAnchor068"/>Azure Stack Hub administration basics</h3>
			<p>There are several fundamental aspects of Azure Stack Hub administration that you must know about, including understanding the builds, the choice of management tools, the typical responsibilities of an Azure Stack Hub Operator, and what to communicate to your users to help them become more productive.</p>
			<h3>Understanding the builds</h3>
			<p>The following are two build-related components you should be aware of:</p>
			<ul>
				<li><strong class="bold">Integrated systems</strong>: Update packages distribute updated versions of Azure Stack Hub for Azure Stack Hub integrated systems. You can import these packages and apply them by using the <strong class="bold">Updates</strong> tile in the administrator portal.</li>
				<li><strong class="bold">Development kit</strong>: The <strong class="bold">Azure Stack Development Kit</strong> (<strong class="bold">ASDK</strong>) is available as a sandbox for you to evaluate Azure Stack Hub and build and test apps in a non-production environment. The ASDK deployment page provides more information on deployment: <a href="https://docs.microsoft.com/azure-stack/asdk/asdk-install">https://docs.microsoft.com/azure-stack/asdk/asdk-install</a>.</li>
			</ul>
			<p>Innovation in Azure Stack Hub is rapid, with regular releases of new builds. If you are running ASDK and you want to move to the latest build and the most recent features of Azure Stack Hub, you cannot simply apply update packages—you must redeploy the ASDK. The ASDK documentation on the Azure website reflects the latest release build: <a href="https://docs.microsoft.com/azure-stack/asdk/">https://docs.microsoft.com/azure-stack/asdk/</a>. </p>
			<h3>Staying aware of available services</h3>
			<p>Azure Stack Hub supports an evolving subset of Azure services. You will need to be aware of the services that you can offer your Azure Stack Hub users at any given time. </p>
			<h3>Foundational services</h3>
			<p>By default, Azure Stack Hub includes the following foundational services at deployment:</p>
			<ul>
				<li>Compute</li>
				<li>Storage</li>
				<li>Networking</li>
				<li>Key Vault</li>
			</ul>
			<p>These foundational services allow you to propose IaaS to your users with minimal configuration.</p>
			<h3>Additional services</h3>
			<p>Following are the currently supported additional PaaS services:</p>
			<ul>
				<li>App Service</li>
				<li>Azure Functions</li>
				<li>SQL and MySQL RPs</li>
				<li>Event Hubs</li>
				<li>IoT Hub (in preview)</li>
				<li>Kubernetes (in preview)</li>
			</ul>
			<p>Before you can offer these additional services to your users, further configuration is needed. Check out the <em class="italics">Tutorials</em> and the <em class="italics">How-to guides</em> sections here for more information: <a href="https://docs.microsoft.com/azure-stack/operator/">https://docs.microsoft.com/azure-stack/operator/</a>.</p>
			<h3>What management tools can you use?</h3>
			<p>The administrator portal is the easiest way to learn basic management concepts. You can also use PowerShell for Azure Stack Hub management, although there are certain preparation steps. It may help to familiarize yourself with the way PowerShell applies to Azure Stack Hub, by visiting <em class="italics">Get started with PowerShell on Azure Stack Hub</em>: <a href="https://docs.microsoft.com/azure-stack/user/azure-stack-powershell-overview">https://docs.microsoft.com/azure-stack/user/azure-stack-powershell-overview</a>.</p>
			<p>As an underlying deployment, management, and organization mechanism, Azure Stack Hub uses Azure Resource Manager. To find out more about Resource Manager so that you can manage Azure Stack Hub and assist in supporting users, visit <em class="italics">Getting Started with Azure Resource Manager whitepaper</em>: <a href="https://download.microsoft.com/download/E/A/4/EA4017B5-F2ED-449A-897E-BD92E42479CE/Getting_Started_With_Azure_Resource_Manager_white_paper_EN_US.pdf">https://download.microsoft.com/download/E/A/4/EA4017B5-F2ED-449A-897E-BD92E42479CE/Getting_Started_With_Azure_Resource_Manager_white_paper_EN_US.pdf</a>.</p>
			<h3>Typical administrator/provider responsibilities</h3>
			<p>Users see the Azure Stack Hub Operator role as making available to them the services that they require. Accordingly, decide which services will be proposed, then create plans, offers, and quotas to make those services available. See also <em class="italics">Overview of offering services in Azure Stack Hub</em>: <a href="https://docs.microsoft.com/azure-stack/operator/service-plan-offer-subscription-overview">https://docs.microsoft.com/azure-stack/operator/service-plan-offer-subscription-overview</a>.</p>
			<p>You will also need to add items to Azure Stack Hub Marketplace. Downloading marketplace items to Azure Stack Hub from Azure is the easiest way to do this.</p>
			<h4>Note</h4>
			<p class="callout">You should use the user portal rather than the administrator portal to test the user availability of your services and the plans and offers for these services.</p>
			<p>In addition to providing services, there are periodic operator tasks to perform to ensure Azure Stack Hub continues to run correctly. These tasks include:</p>
			<ul>
				<li>The creation of user accounts for Azure AD deployment (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-add-new-user-aad">https://docs.microsoft.com/azure-stack/operator/azure-stack-add-new-user-aad</a>) or AD FS deployment (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-add-users-adfs">https://docs.microsoft.com/azure-stack/operator/azure-stack-add-users-adfs</a>).</li>
				<li>RBAC role assignment (not restricted to administrators) (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-manage-permissions">https://docs.microsoft.com/azure-stack/operator/azure-stack-manage-permissions</a>).</li>
				<li>Infrastructure health monitoring (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-monitor-health">https://docs.microsoft.com/azure-stack/operator/azure-stack-monitor-health</a>).</li>
				<li>Network management (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-viewing-public-ip-address-consumption">https://docs.microsoft.com/azure-stack/operator/azure-stack-viewing-public-ip-address-consumption</a>) and storage resource management (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-manage-storage-accounts">https://docs.microsoft.com/azure-stack/operator/azure-stack-manage-storage-accounts</a>).</li>
				<li>Replacing bad hardware, such as a failed disk (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-replace-disk">https://docs.microsoft.com/azure-stack/operator/azure-stack-replace-disk</a>).</li>
			</ul>
			<h3>Communicating with your users</h3>
			<p>Your users will need to know how to connect to the Azure Stack Hub environment, how to subscribe to offers, and how to use Azure Stack Hub services. The Azure Stack Hub user documentation (<a href="https://docs.microsoft.com/azure-stack/user/">https://docs.microsoft.com/azure-stack/user/</a>) is a useful information source.</p>
			<h3>Understanding how to use Azure Stack Hub services</h3>
			<p>Before users work with services and build apps in Azure Stack Hub, there are prerequisites such as specific versions of PowerShell and APIs. There are also some feature differences between an Azure service and the corresponding Azure Stack Hub service. Users should therefore familiarize themselves with the following content:</p>
			<ul>
				<li>Key considerations for using services or building apps for Azure Stack Hub: <a href="https://docs.microsoft.com/azure-stack/user/azure-stack-considerations ">https://docs.microsoft.com/azure-stack/user/azure-stack-considerations</a></li>
				<li>Considerations for VMs in Azure Stack Hub: <a href="https://docs.microsoft.com/azure-stack/user/azure-stack-vm-considerations ">https://docs.microsoft.com/azure-stack/user/azure-stack-vm-considerations</a></li>
				<li>Differences and considerations for Azure Stack Hub storage: <a href="https://docs.microsoft.com/azure-stack/user/azure-stack-acs-differences ">https://docs.microsoft.com/azure-stack/user/azure-stack-acs-differences</a></li>
			</ul>
			<p>The information in these three articles gives an overview of the differences between services in Azure and Azure Stack Hub. It is additional information to the global Azure documentation for a given Azure service.</p>
			<h3>Connections for users to Azure Stack Hub</h3>
			<p>In the ASDK case, users can configure a <strong class="bold">virtual private network</strong> (<strong class="bold">VPN</strong>) connection to connect to the ASDK environment if they are not using Remote Desktop. More information is available here: <a href="https://docs.microsoft.com/azure-stack/asdk/asdk-connect">https://docs.microsoft.com/azure-stack/asdk/asdk-connect</a>.</p>
			<p>Users will also want to know how to connect via the user portal (<a href="https://docs.microsoft.com/azure-stack/user/azure-stack-use-portal">https://docs.microsoft.com/azure-stack/user/azure-stack-use-portal</a>) or by using PowerShell. The user portal URL will vary per deployment in an integrated systems environment, so be sure to provide your users with the correct address.</p>
			<p>If the portal is published on the internet, users could also use things such as Cloud Shell to manage and create resources on Azure Stack Hub (please note that the Cloud Shell service itself is not available on Azure Stack Hub—you would need to be in a connected environment).</p>
			<p>Before using services via PowerShell, users may need to register resource providers, such as the networking resource provider that manages resources like load balancers, network interfaces, and virtual networks. Users must install PowerShell (<a href="https://docs.microsoft.com/azure-stack/operator/powershell-install-az-module">https://docs.microsoft.com/azure-stack/operator/powershell-install-az-module</a>), download additional modules (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-powershell-download">https://docs.microsoft.com/azure-stack/operator/azure-stack-powershell-download</a>), and configure PowerShell (which includes resource provider registration): <a href="https://docs.microsoft.com/azure-stack/user/azure-stack-powershell-configure-user">https://docs.microsoft.com/azure-stack/user/azure-stack-powershell-configure-user</a>.</p>
			<h3>Subscribing to an offer</h3>
			<p>Users must also subscribe to an offer (<a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-subscribe-plan-provision-vm">https://docs.microsoft.com/azure-stack/operator/azure-stack-subscribe-plan-provision-vm</a>) that an operator has created before they can use services. Offers are groups of one or more plans that enable Azure Stack Hub Operators to control things such as trial offers and capacity planning, and even delegate the creation of Azure Stack Hub subscriptions to other users.</p>
			<h3 id="_idParaDest-62"><a id="_idTextAnchor069"/>Getting support</h3>
			<p>Azure Stack Hub covers many areas. Before contacting Microsoft Support, review this web page. It provides common questions and issues with troubleshooting links: <a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy">https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy</a>. </p>
			<p>In addition to the issues outlined there, the following are some additional support considerations.</p>
			<h3>Integrated systems</h3>
			<p>An integrated system benefits from a coordinated escalation and resolution process between Microsoft and Microsoft's <strong class="bold">original equipment manufacturer</strong> (<strong class="bold">OEM</strong>) hardware partners.</p>
			<p>Microsoft Support can help if there is a cloud services issue. To open a support request, select the help and support icon (question mark) in the upper-right corner of the administrator portal. Then select <span class="P---Screen-Text">Help + support</span> and then <span class="P---Screen-Text">New support request</span> under the <span class="P---Screen-Text">Support</span> section.</p>
			<p>Your OEM hardware vendor is your first point of contact if there is an issue with deployment, patch, update, hardware (including field replaceable units), or any hardware-branded software, such as software running on the hardware lifecycle host.</p>
			<p>You should contact Microsoft Support for help with any other problems.</p>
			<h3 id="_idParaDest-63"><a id="_idTextAnchor070"/>Azure Stack Development Kit</h3>
			<p>ASDK is a single-node deployment of Azure Stack Hub that you can download and use for free. All ASDK components are installed in VMs running on a single-host computer that must have enough resources. ASDK is meant to provide an environment in which you can evaluate Azure Stack Hub and develop modern apps using APIs and tooling consistent with Azure in a non-production environment.</p>
			<p>As ASDK is a free product, there is no formal support offered. You can ask support-related questions about ASDK in the regularly monitored Microsoft forums (<a href="https://social.msdn.microsoft.com/Forums/azure/home?forum=azurestack">https://social.msdn.microsoft.com/Forums/azure/home?forum=azurestack</a>). To access the forums, select the help and support icon (question mark) in the upper-right corner of the administrator portal, then select <strong class="bold">Help + support</strong>, and then select <strong class="bold">MSDN Forums</strong> under the <strong class="bold">Support</strong> section. However, there is no official support offered through Microsoft Support as the ASDK is an evaluation environment.</p>
			<h3 id="_idParaDest-64"><a id="_idTextAnchor071"/>Azure Stack Hub update management</h3>
			<p>You can help to keep Azure Stack Hub up to date by applying full and express updates, hotfixes, and driver and firmware updates from the OEM. Remember, however, that Azure Stack Hub update packages are intended for integrated systems and cannot be applied to ASDK, for which redeployment is required. See <em class="italics">Redeploy ASDK</em> at <a href="https://docs.microsoft.com/azure-stack/asdk/asdk-redeploy">https://docs.microsoft.com/azure-stack/asdk/asdk-redeploy</a>.</p>
			<h3>Update package types</h3>
			<p>For integrated systems, there are three different types of update packages:</p>
			<ul>
				<li><strong class="bold">Azure Stack Hub software updates</strong>: These updates are downloaded directly from Microsoft and can include Azure Stack Hub feature updates, Windows Server security, and non-security-related updates. Each update package can either be of the type <strong class="bold">full</strong> or <strong class="bold">express</strong>:<ul><li>Full update packages update the physical host operating systems in the scale unit. They require a larger maintenance window.</li><li>Express update packages are scoped and don't update the underlying physical host operating systems.</li></ul></li>
				<li><strong class="bold">Azure Stack Hub hotfixes</strong>: These time-sensitive updates address a specific issue. Each hotfix is released with a corresponding Microsoft Knowledge Base article that details the issue, cause, and resolution. Hotfixes are downloaded and installed like the full update packages for Azure Stack Hub. You can read more about them here: <a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy#hotfixes">https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy#hotfixes</a>.</li>
				<li><strong class="bold">OEM hardware vendor–provided updates</strong>: These updates are managed by each hardware vendor. They typically contain driver and firmware updates, and each vendor hosts these on its own site.</li>
			</ul>
			<h3>When to update</h3>
			<p>The updates above are released at different frequencies:</p>
			<ul>
				<li><strong class="bold">Azure Stack Hub software updates</strong>: Multiple full and express software update packages a year are released by Microsoft.</li>
				<li><strong class="bold">Azure Stack Hub hotfixes</strong>: These are time-sensitive and can be released at any time. When you upgrade from one major version to another, if there are any hotfixes in the new version, they are automatically installed. </li>
				<li><strong class="bold">OEM hardware vendor-provided updates</strong>: These updates are released by OEM hardware vendors on an as-needed basis.</li>
			</ul>
			<p>You must keep your Azure Stack Hub environment on a supported Azure Stack Hub software version if you want to continue to receive support. For more information, visit this link to read the Azure Stack Hub Servicing Policy: <a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy">https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy</a>.</p>
			<h3>Checking available updates</h3>
			<p>The notification of updates depends on factors such as your internet connectivity and the type of update:</p>
			<ul>
				<li>For software updates and hotfixes released by Microsoft, you will see an update alert appear in the <strong class="bold">Update</strong> pane for Azure Stack Hub instances that are connected to the internet. Restart the infrastructure management controller VM if this blade is not displayed. For instances that are not connected, you can subscribe to the RSS feed (<a href="https://azurestackhubdocs.azurewebsites.net/xml/hotfixes.rss">https://azurestackhubdocs.azurewebsites.net/xml/hotfixes.rss</a>) to receive notification of each hotfix release.</li>
				<li>Notifications about updates provided by OEM hardware vendors depend on your communications with your manufacturer. For more information, visit the Apply Azure Stack Hub OEM updates page: <a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-update-oem">https://docs.microsoft.com/azure-stack/operator/azure-stack-update-oem</a>.</li>
			</ul>
			<h3>Updating from one major version to the next</h3>
			<p>Updating from one major version to the next major version must be done in the correct order and step by step. You cannot skip a major version update. For more details, please review this link: <a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-updates#how-to-know-an-update-is-available">https://docs.microsoft.com/azure-stack/operator/azure-stack-updates#how-to-know-an-update-is-available</a>.</p>
			<h3>Hotfixes within major versions</h3>
			<p>Within a major version release, there can be multiple hotfixes. These are cumulative, with the last hotfix package for that major version including all previous hotfixes for it. For more information, see <a href="https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy#hotfixes">https://docs.microsoft.com/azure-stack/operator/azure-stack-servicing-policy#hotfixes</a>.</p>
			<h3>The update resource provider</h3>
			<p>Azure Stack Hub handles the application of Microsoft software updates through an update resource provider. The provider verifies that updates have been applied across the Service Fabric apps and their runtimes, all of the physical hosts, and all VMs and the services associated with them.</p>
			<p>During the update process, you have access to a high-level status overview in Azure Stack Hub, where you can see progress for the different subsystems.</p>
			<p>We have covered the basics of Azure Stack Hub. Next, we move on to Azure Stack HCI, an HCI cluster solution.</p>
			<h2 id="_idParaDest-65"><a id="_idTextAnchor072"/>Azure Stack HCI solution overview</h2>
			<p>Azure Stack HCI is designed for hosting virtualized Linux and Windows workloads on validated partner hardware. Designed for the hybrid environment (on-premises and cloud), Azure Stack HCI combined with Azure hybrid services provides capabilities such as disaster recovery and backup options for your VMs, as well as cloud-based monitoring. You also get a single pane of glass for all your deployments and the ability to manage the cluster with tools such as Windows Admin Center, System Center, and PowerShell. In addition, AKS on Azure Stack HCI is available. It is an on-premises implementation of the AKS orchestrator—see <a href="https://docs.microsoft.com/azure-stack/aks-hci/overview">https://docs.microsoft.com/azure-stack/aks-hci/overview</a>.</p>
			<p>Azure Stack HCI software is available for download here: <a href="https://azure.microsoft.com/products/azure-stack/hci/hci-download/">https://azure.microsoft.com/products/azure-stack/hci/hci-download/</a>. An on-premises solution with built-in hybrid-cloud connections, it is billed to your Azure subscription as an Azure service. </p>
			<h3 id="_idParaDest-66"><a id="_idTextAnchor073"/>Azure Stack HCI use cases</h3>
			<p>There are a number of use cases for Azure Stack HCI, which we will discuss now.</p>
			<h3>Datacenter consolidation and modernization</h3>
			<p>Using Azure Stack HCI to refresh older virtualization hosts with possible consolidation has several potential benefits. It can enhance scalability and facilitate management and security for your environment. It can also reduce the footprint and total cost of ownership by replacing legacy SAN storage. Unified tools and interfaces, together with a single point of support, simplify systems administration and operations.</p>
			<h3>Hybrid infrastructure management for branch offices</h3>
			<p>Management of hybrid infrastructure can be challenging for enterprises with branch offices. When multiple locations must function without dedicated IT staff, it becomes more complicated to keep identity services synchronized, make data backups, and deploy applications. In this situation, businesses often need weeks or months to roll out application updates across multiple offices and infrastructures. Better solutions are needed to deploy application and identity changes quickly and easily across remote offices while enabling centralized monitoring for anomalies and violations.</p>
			<p>Consider the example of an international bank with 300 offices worldwide, for which each global update of all offices requires a year. To compound the problem, the multiple locations make it difficult to consistently correct configurations and avoid potential security risks such as open ports. New and updated app rollouts to branch offices are also a problem for any company that has double- or triple-digit numbers of such sites. This is especially true when remote sites need to run apps on local servers for reasons of latency or restricted internet connectivity.</p>
			<p>To help you overcome these challenges, Azure Stack HCI offers HCI based on industry-standard x86 servers with software-defined compute, storage, and networking. Using Azure Arc integration built into the Windows Admin Center, you can easily begin using the Azure portal cloud to manage your HCI. Reducing or removing the need for local IT staff, you can meet the evolving IT demands of branch offices, retail stores, and field locations, deploying container-based apps anywhere and essential business applications in highly available VMs. Azure Monitor then allows you to view system health across these different domains.</p>
			<h3>Remote and branch offices</h3>
			<p>Azure Stack HCI provides an affordable way to modernize remote and branch offices, including retail stores and field sites (two-server cluster solutions are currently available for less than $20,000 per location). Nested resiliency means that volumes can remain online and accessible even in the event of multiple simultaneous hardware failures. Cloud witness technology enables the use of Azure as the lightweight tiebreaker for cluster quorum. This prevents split-brain conditions yet does not involve the cost of a third host. In the Azure portal, you are given a centralized view of remote Azure Stack HCI deployments.</p>
			<h3>Virtual desktops</h3>
			<p>Azure Stack HCI provides like-local performance for your on-premises virtual desktops. This is ideal if you need to support data sovereignty for your users as well as low latency.</p>
			<h3 id="_idParaDest-67"><a id="_idTextAnchor074"/>Azure integration benefits</h3>
			<p>Azure Stack HCI lets you leverage combined cloud and on-premises resources via hybrid infrastructure, with native cloud monitoring, security, and backup.</p>
			<p>First, your Azure Stack HCI cluster must be registered with Azure. Then, you will be able to utilize the Azure portal for:</p>
			<ul>
				<li><strong class="bold">Monitoring</strong>: You are given an overall view of your Azure Stack HCI clusters. Here, you can group them by resource group and tag them. New upcoming features will also enable the creation and management of VMs from the portal.</li>
				<li><strong class="bold">Billing</strong>: Use your Azure subscription to pay for Azure Stack HCI (after the free preview phase).</li>
				<li><strong class="bold">Support</strong>: Azure Stack HCI support is available through a Standard or Professional Direct Azure support plan.</li>
			</ul>
			<p>These additional Azure hybrid services are also available for subscription:</p>
			<ul>
				<li>Azure Site Recovery for <strong class="bold">disaster recovery as a service</strong> (<strong class="bold">DRaaS</strong>) and high availability. </li>
				<li>Azure Monitor, for a centralized view of events on your apps, infrastructure, and network, including AI-driven advanced analytics.</li>
				<li>Cloud Witness, to leverage Azure as the lightweight cluster quorum tiebreaker.</li>
				<li>Azure Backup to protect data by storing it offsite, also achieving protection against ransomware.</li>
				<li>Azure Update Management to assess and deploy updates for Azure-hosted and on-premises Windows VMs.</li>
				<li>Azure Network Adapter to use a Point-to-Site VPN for connections between your Azure VMs and your on-premises resources.</li>
				<li>Azure File Sync for cloud syncing of your file server.</li>
			</ul>
			<p>See also <em class="italics">Connecting Windows Server to Azure hybrid services</em>: <a href="https://docs.microsoft.com/windows-server/manage/windows-admin-center/azure/index">https://docs.microsoft.com/windows-server/manage/windows-admin-center/azure/index</a>.</p>
			<h3 id="_idParaDest-68"><a id="_idTextAnchor075"/>Azure Stack HCI prerequisites</h3>
			<p>Initially, you will require:</p>
			<ul>
				<li>A cluster of at least two servers chosen from the Azure Stack HCI catalog and your elected Microsoft hardware partner.</li>
				<li>A subscription to Azure.</li>
				<li>An internet connection for HTTPS outbound transmissions every 30 days or more frequently for each server in the cluster.</li>
			</ul>
			<p>If your clusters span several sites, you will require at minimum a 1 Gb connection between sites (but preferably a 25 Gb RDMA connection), with a 5 ms round trip average latency if you plan to have synchronous replication with writes being done simultaneously at both sites.</p>
			<p>If you aim to use <strong class="bold">software-defined networking</strong> (<strong class="bold">SDN</strong>), plan also for the creation of Network Controller VMs on a <strong class="bold">virtual hard disk</strong> (<strong class="bold">VHD</strong>) for the Azure Stack HCI operating system (for more information, visit the <em class="italics">Plan to deploy Network Controller</em> page: <a href="https://docs.microsoft.com/azure-stack/hci/concepts/network-controller">https://docs.microsoft.com/azure-stack/hci/concepts/network-controller</a>).</p>
			<p>See also:</p>
			<ul>
				<li>System requirements: <a href="https://docs.microsoft.com/azure-stack/hci/concepts/system-requirements ">https://docs.microsoft.com/azure-stack/hci/concepts/system-requirements</a></li>
				<li>AKS requirements on Azure Stack HCI (for AKS on Azure Stack HCI): <a href="https://docs.microsoft.com/azure-stack/aks-hci/overview#what-you-need-to-get-started ">https://docs.microsoft.com/azure-stack/aks-hci/overview#what-you-need-to-get-started</a></li>
			</ul>
			<h3 id="_idParaDest-69"><a id="_idTextAnchor076"/>Hardware partners</h3>
			<p>By ordering validated Azure Stack HCI configurations from your elected Microsoft partner, you can start operations without undue design or deployment time. Implementation and support are also available via Microsoft partners from a single point of contact through joint support agreements. Options include buying validated nodes, or an integrated system with pre-installation of the Azure Stack HCI operating system together with driver and firmware update partner extensions.</p>
			<h3>Deployment options</h3>
			<ul>
				<li><strong class="bold">Integrated systems</strong>: Buy validated servers with a pre-installation of Azure Stack HCI from a hardware partner.</li>
				<li><strong class="bold">Validated nodes</strong>: Buy validated bare metal servers from a hardware partner, then sign up for the Azure Stack HCI service. Go to the Azure portal, where you can then obtain the Azure Stack HCI operating system download.</li>
				<li><strong class="bold">Repurposed hardware</strong>: Repurpose your existing hardware. For details on this path, review the following link: <a href="https://docs.microsoft.com/azure-stack/hci/deploy/migrate-cluster-same-hardware">https://docs.microsoft.com/azure-stack/hci/deploy/migrate-cluster-same-hardware</a>.</li>
			</ul>
			<p>You can read more about Azure Stack HCI here: <a href="https://azure.microsoft.com/overview/azure-stack/hci">https://azure.microsoft.com/overview/azure-stack/hci</a>.</p>
			<p>You can also check out the Azure Stack HCI catalog. It has details on more than 100 solutions from Microsoft partners. You can find the online catalog here: <a href="https://azure.microsoft.com/products/azure-stack/hci/catalog/">https://azure.microsoft.com/products/azure-stack/hci/catalog/</a>.</p>
			<h3 id="_idParaDest-70"><a id="_idTextAnchor077"/>Software partners</h3>
			<p>Microsoft partners are developing software to build on the Azure Stack HCI platform without needing to replace the tools already familiar to IT administrators. To review a list of highlighted ISVs and their applications, check out this link: <a href="https://docs.microsoft.com/azure-stack/hci/concepts/utility-applications">https://docs.microsoft.com/azure-stack/hci/concepts/utility-applications</a>.</p>
			<h3 id="_idParaDest-71"><a id="_idTextAnchor078"/>Licensing, billing, and pricing</h3>
			<p>Azure Stack HCI billing uses the number of physical processor cores to calculate the monthly subscription fee, instead of a perpetual license. The information on the number of cores that you are using is uploaded and evaluated for billing automatically when you connect to Azure. In this way and because more VMs does not mean higher costs, denser virtual environments lead to more attractive pricing.</p>
			<h3 id="_idParaDest-72"><a id="_idTextAnchor079"/>Management tools</h3>
			<p>You have full admin cluster rights with Azure Stack HCI, letting you directly manage:</p>
			<ul>
				<li><strong class="bold">Failover clustering</strong>: <a href="https://docs.microsoft.com/windows-server/failover-clustering/failover-clustering-overview ">https://docs.microsoft.com/windows-server/failover-clustering/failover-clustering-overview</a></li>
				<li><strong class="bold">Hyper-V on Windows Server</strong>: <a href="https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-on-windows-server ">https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-on-windows-server</a></li>
				<li><strong class="bold">SDN</strong>: <a href="https://docs.microsoft.com/windows-server/networking/sdn/">https://docs.microsoft.com/windows-server/networking/sdn/</a></li>
				<li><strong class="bold">Storage Spaces Direct</strong>: <a href="https://docs.microsoft.com/windows-server/storage/storage-spaces/storage-spaces-direct-overview ">https://docs.microsoft.com/windows-server/storage/storage-spaces/storage-spaces-direct-overview</a></li>
			</ul>
			<p>You also have these management tools available for use:</p>
			<ul>
				<li><strong class="bold">PowerShell</strong>: <a href="https://docs.microsoft.com/powershell/">https://docs.microsoft.com/powershell/</a></li>
				<li><strong class="bold">Server Manager</strong>: <a href="https://docs.microsoft.com/windows-server/administration/server-manager/server-manager ">https://docs.microsoft.com/windows-server/administration/server-manager/server-manager</a></li>
				<li><strong class="bold">System Center</strong>: <a href="https://www.microsoft.com/system-center">https://www.microsoft.com/system-center</a></li>
				<li><strong class="bold">Windows Admin Center</strong>: <a href="https://docs.microsoft.com/windows-server/manage/windows-admin-center/overview ">https://docs.microsoft.com/windows-server/manage/windows-admin-center/overview</a></li>
				<li>Other non-Microsoft tools such as 5Nine Manager</li>
			</ul>
			<h2 id="_idParaDest-73"><a id="_idTextAnchor080"/>Getting started with Azure Stack HCI and Windows Admin Center</h2>
			<p>These sections apply for Azure Stack HCI, version 20H2. They assume that you have already set up a cluster in your Azure Stack HCI installation and they give instructions for connecting to the cluster and monitoring cluster and storage performance. </p>
			<h3 id="_idParaDest-74"><a id="_idTextAnchor081"/>Installing Windows Admin Center</h3>
			<p>Windows Admin Center is a locally deployed, browser-based app for managing Azure Stack HCI. Windows Admin Center can be installed on a server in <strong class="bold">service mode</strong>, but it is simpler to install it on a local management PC in <strong class="bold">desktop mode</strong>. In service mode, tasks that require CredSSP, such as cluster creation and installing updates and extensions, necessitate the use of an account that is a member of the Gateway Administrators group on the Windows Admin Center server. For further details, check out <a href="https://docs.microsoft.com/windows-server/manage/windows-admin-center/configure/user-access-control#gateway-access-role-definitions">https://docs.microsoft.com/windows-server/manage/windows-admin-center/configure/user-access-control#gateway-access-role-definitions</a>.</p>
			<h3 id="_idParaDest-75"><a id="_idTextAnchor082"/>Adding and connecting to an Azure Stack HCI cluster</h3>
			<p>After installing Windows Admin Center, you can add a cluster to be managed from the Windows Admin Center dashboard's main overview page. The dashboard also shows you information on CPU, memory, and storage usage, together with alerts and health information about servers, drives, and volumes. Cluster performance information such as <strong class="bold">input/output operations/second</strong> (<strong class="bold">IOPS</strong>) and latency by the hour, day, week, month, or year is shown at the bottom of the dashboard displays.</p>
			<h3>Monitoring individual components</h3>
			<p>The <strong class="bold">Tools</strong> menu to the left of the dashboard allows you to drill down on any component of the cluster to view summaries and inventories of virtual machines, servers, volumes, drives, and virtual switches. Within the dashboard, the Performance Monitor tool lets you view, compare, and add performance counters for Windows, apps, or devices in real time.</p>
			<h3>Viewing the cluster dashboard</h3>
			<p>To view cluster dashboard information on cluster health and performance, select the cluster name under <strong class="bold">All connections</strong>. Then, on the left under <strong class="bold">Tools</strong>, select <strong class="bold">Dashboard</strong>. You can then see:</p>
			<ul>
				<li>Average cluster latency in milliseconds</li>
				<li>Cluster event alerts</li>
				<li>A list of:<ul><li>Disk drives available on the cluster</li><li>Servers joined to the cluster</li><li>VMs running on the cluster</li><li>Volumes available on the cluster</li></ul></li>
				<li>Total cluster:<ul><li>CPU usage for the cluster</li><li>IOPS</li><li>Memory usage for the cluster</li><li>Storage usage for the cluster</li></ul></li>
			</ul>
			<p>For more information, visit this link: <a href="https://docs.microsoft.com/azure-stack/hci/manage/cluster">https://docs.microsoft.com/azure-stack/hci/manage/cluster</a>.</p>
			<h3>Using Azure Monitor for monitoring and alerts</h3>
			<p>You can also use Azure Monitor to collect events and performance counters for analysis and reporting, react to specific conditions, and receive email notifications. By clicking Azure Monitor from the <strong class="bold">Tools</strong> menu, you will make a direct connection from Windows Admin Center to Azure.</p>
			<h3>Collecting diagnostics information</h3>
			<p>The <strong class="bold">Diagnostics</strong> tab in the <strong class="bold">Tools</strong> menu lets you collect troubleshooting information for your cluster. This information may also be requested by Microsoft Support if you ask for assistance.</p>
			<h3>Managing VMs with Windows Admin Center</h3>
			<p>You can use Windows Admin Center to spin up and manage your VMs on Azure Stack HCI (Azure Stack HCI, version 20H2 and Windows Server 2019). Functionality includes:</p>
			<ul>
				<li>Creating a new VM.</li>
				<li>Listing VMs on a server or in a cluster.</li>
				<li>Viewing VM details, including detailed information and performance charts from the dedicated page for a given VM.</li>
				<li>Viewing aggregate VM metrics to see overall resource usage and performance for all VMs in a cluster.</li>
				<li>Changing VM settings for memory, processors, disk size, and more (note that you will need to stop a VM first before changing certain settings).</li>
			</ul>
			<p>Additional functionality includes:</p>
			<ul>
				<li>Moving a VM to another server or cluster</li>
				<li>Joining a VM to a domain</li>
				<li>Cloning a VM</li>
				<li>Importing and exporting a VM</li>
				<li>Viewing VM export logs</li>
				<li>Protecting VMs with Azure Site Recovery (an optional value-add service)</li>
			</ul>
			<p>Note that you can also connect to a VM in other ways than just through Windows Admin Center:</p>
			<ul>
				<li>Via a Hyper-V host using a <strong class="bold">Remote Desktop Protocol</strong> (<strong class="bold">RDP</strong>) connection</li>
				<li>By using Windows PowerShell</li>
			</ul>
			<p>You can also make Storage Spaces Direct changes for your cluster and change general cluster settings. These can include:</p>
			<ul>
				<li>Cluster witnesses</li>
				<li>Node shutdown behavior</li>
				<li>Setting and managing access points</li>
				<li>Traffic encryption</li>
				<li>VM load balancing</li>
			</ul>
			<p>You can also monitor your Azure HCI cluster via Azure Monitor.</p>
			<h2 id="_idParaDest-76"><a id="_idTextAnchor083"/>Comparing Azure Stack Hub and Azure Stack HCI</h2>
			<p>Azure Stack HCI and Azure Stack Hub can both play an essential role in your hybrid and multicloud strategy. Here is a quick summary of their differences:</p>
			<ul>
				<li><strong class="bold">Azure Stack Hub</strong>: This allows you to run cloud apps on-premises, when you are disconnected, or to meet regulatory requirements, by leveraging consistent Azure services.</li>
				<li><strong class="bold">Azure Stack HCI</strong>: This allows you to run virtualized apps on-premises, strengthen and replace aging server infrastructure, and connect to Azure for cloud services.</li>
			</ul>
			<p>Azure Stack Hub offers innovative processes, though may require new skills. It brings Azure services into your datacenter. On the other hand, with Azure Stack HCI, you can use existing skills and familiar processes, and you connect your datacenter to Azure services. It may also be useful to compare what Azure Stack Hub and Azure Stack HCI are not designed to do, or possible constraints. </p>
			<p>Azure Stack Hub limitations:</p>
			<ul>
				<li>Azure Stack Hub must have a minimum of 4 nodes, as well as its own network switches.</li>
				<li>Azure Stack Hub limits Hyper-V's configurability and feature set in order to remain consistent with Azure.</li>
				<li>Azure Stack Hub does not give you access to underlying infrastructural technologies.</li>
			</ul>
			<p>Azure Stack HCI limitations:</p>
			<ul>
				<li>Azure Stack HCI does not natively offer or enforce multi-tenancy.</li>
				<li>Azure Stack HCI does not offer on-premises PaaS features.</li>
				<li>Azure Stack HCI does not include native DevOps toolsets.</li>
				<li>Azure Stack HCI can only work virtualized workloads—no application can be deployed on the metal.</li>
			</ul>
			<p>For additional reading, visit <a href="https://docs.microsoft.com/azure-stack/operator/compare-azure-azure-stack?view=azs-2008">https://docs.microsoft.com/azure-stack/operator/compare-azure-azure-stack?view=azs-2008</a>.</p>
			<h2 id="_idParaDest-77"><a id="_idTextAnchor084"/>Summary</h2>
			<p>As business environments evolve, software applications may run on different systems on-premises, off-premises, in multiple clouds, and at the edge of networks. Hybrid and multicloud solutions can enable you to successfully deploy and manage your apps if you also create a single, consistent environment across the locations of your organization. In doing so, you offer your developers a unified set of tools for building apps. You can easily move apps and data between locations to ensure efficiency and compliance, and to offer your users an optimal experience.</p>
			<p>Azure Arc and the Azure Stack portfolio are two major components of Azure hybrid and multicloud solutions and products. Azure Arc offers unified management to deploy Azure services and extend Azure management anywhere. With Azure Arc enabled servers, you can apply native Azure VM management to Windows and Linux machines outside Azure. With Azure Arc and Kubernetes, you can run specified Azure data services on the infrastructure of your choice.</p>
			<p>By comparison, Azure Stack makes Azure services available across cloud and non-cloud locations, letting you create and run hybrid applications for diverse workloads consistently across locations and environments. Azure Stack Hub is a cloud-native integrated system that lets you use Azure cloud services on-premises, while Azure Stack HCI offers HCI that modernizes datacenters and virtualization hosts.</p>
			<p>Individually, together, or in combination with other Microsoft and Azure solutions, Azure Arc and Azure Stack can help you meet challenges and make the most of opportunities in sectors ranging over finance, government, manufacturing, retail, energy, health, and more.</p>
			<p>You can try out functionality like Azure Arc immediately, using Azure Arc Jumpstart on AKS, AWS Elastic Kubernetes Service, GKE, or in an Azure VM. Some example main steps are as follows:</p>
			<ol>
				<li value="1">Install the client tools.</li>
				<li>Create the Azure Arc data controller.</li>
				<li>Create a managed instance on Azure Arc.</li>
				<li>Create an Azure Database for the PostgreSQL Hyperscale server group on Azure Arc.</li>
			</ol>
			<p>For further information on Azure hybrid and multicloud solutions and products and how to use them successfully for your enterprise or organization, visit these Microsoft web pages:</p>
			<ul>
				<li>Azure Hybrid and multicloud solutions: <a href="https://azure.microsoft.com/solutions/hybrid-cloud-app/">https://azure.microsoft.com/solutions/hybrid-cloud-app/</a></li>
				<li>Azure hybrid and multicloud architecture: <a href="https://docs.microsoft.com/azure/architecture/browse/?azure_categories=hybrid ">https://docs.microsoft.com/azure/architecture/browse/?azure_categories=hybrid</a></li>
				<li>Azure hybrid and multicloud patterns and solutions documentation: <a href="https://docs.microsoft.com/hybrid/app-solutions/?view=azs-1910 ">https://docs.microsoft.com/hybrid/app-solutions/?view=azs-1910</a></li>
			</ul>
			<p>We hope you have found this chapter helpful in your Azure hybrid and multicloud journey. Next, we will explore how to plan and implement migration to Azure. </p>
		</div>
	</body></html>