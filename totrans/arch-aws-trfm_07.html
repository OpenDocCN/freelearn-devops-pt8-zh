<html><head></head><body>
<div id="_idContainer035">
<h1 class="chapter-number" id="_idParaDest-142"><a id="_idTextAnchor141"/><span class="koboSpan" id="kobo.1.1">7</span></h1>
<h1 id="_idParaDest-143"><a id="_idTextAnchor142"/><span class="koboSpan" id="kobo.2.1">Implementing Terraform in Projects</span></h1>
<p><span class="koboSpan" id="kobo.3.1">Are you ready to start developing your AWS infrastructure with Terraform? </span><span class="koboSpan" id="kobo.3.2">In this chapter, you’ll learn the basics of Terraform and how to deploy your first template in AWS. </span><span class="koboSpan" id="kobo.3.3">We’ll cover the process of selecting the right AWS provider and choosing public modules that meet your project’s needs. </span><span class="koboSpan" id="kobo.3.4">You’ll also learn how to write custom Terraform AWS modules for your specific </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">use cases.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">By the end of this chapter, you will have developed and deployed your AWS infrastructure using Terraform. </span><span class="koboSpan" id="kobo.5.2">You’ll also have gained valuable skills in decision-making for providers and selecting the right public modules for your project’s needs. </span><span class="koboSpan" id="kobo.5.3">Additionally, you’ll learn how and when to develop custom AWS modules and how to use </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">them effectively.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">In this chapter, we will delve deeper into Terraform and explore how it can be used to develop and deploy AWS infrastructure projects. </span><span class="koboSpan" id="kobo.7.2">Here’s a look at the topics </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">we’ll cover:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.9.1">Terraform basics for developing AWS </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">infrastructure projects</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Selecting </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">AWS Providers</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Selecting AWS public modules for </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">your needs</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">How to write custom Terraform </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">AWS modules</span></span></li>
</ul>
<h1 id="_idParaDest-144"><a id="_idTextAnchor143"/><span class="koboSpan" id="kobo.17.1">Terraform basics for developing AWS infrastructure projects</span></h1>
<p><span class="koboSpan" id="kobo.18.1">Terraform is a tool for building, changing, and versioning</span><a id="_idIndexMarker337"/><span class="koboSpan" id="kobo.19.1"> infrastructure safely and efficiently. </span><span class="koboSpan" id="kobo.19.2">It can manage infrastructure for many different types of cloud providers, </span><span class="No-Break"><span class="koboSpan" id="kobo.20.1">including AWS.</span></span></p>
<p><span class="koboSpan" id="kobo.21.1">Let’s look at some basic concepts </span><span class="No-Break"><span class="koboSpan" id="kobo.22.1">in Terraform.</span></span></p>
<h2 id="_idParaDest-145"><a id="_idTextAnchor144"/><span class="koboSpan" id="kobo.23.1">Resources</span></h2>
<p><span class="koboSpan" id="kobo.24.1">A resource is an element of your infrastructure, such as an EC2 instance, an S3 bucket, or a </span><span class="No-Break"><span class="koboSpan" id="kobo.25.1">security group.</span></span></p>
<p><span class="koboSpan" id="kobo.26.1">A resource is typically created</span><a id="_idIndexMarker338"/><span class="koboSpan" id="kobo.27.1"> using a resource block in your Terraform configuration. </span><span class="koboSpan" id="kobo.27.2">A resource block has a type and a name, and it specifies the </span><a id="_idIndexMarker339"/><span class="koboSpan" id="kobo.28.1">desired state of the resource. </span><span class="koboSpan" id="kobo.28.2">For example, the following block creates an EC2 instance </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">in AWS:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.30.1">
resource "aws_instance" "web_server" {
  ami           = "ami-12345678"
  instance_type = "t2.micro"
}</span></pre> <p><span class="koboSpan" id="kobo.31.1">This resource block creates an EC2 instance with the type </span><strong class="source-inline"><span class="koboSpan" id="kobo.32.1">aws_instance</span></strong><span class="koboSpan" id="kobo.33.1"> and the name </span><strong class="source-inline"><span class="koboSpan" id="kobo.34.1">web_server</span></strong><span class="koboSpan" id="kobo.35.1">. </span><span class="koboSpan" id="kobo.35.2">It specifies that the instance should be created using the specified AMI and </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">instance type.</span></span></p>
<p><span class="koboSpan" id="kobo.37.1">When you run </span><strong class="source-inline"><span class="koboSpan" id="kobo.38.1">terraform apply</span></strong><span class="koboSpan" id="kobo.39.1">, Terraform will create the EC2 instance and set it to the desired state specified in the resource block. </span><span class="koboSpan" id="kobo.39.2">If the EC2 instance already exists and its state differs from the desired state, Terraform will update the instance to match the </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">desired state.</span></span></p>
<p><span class="koboSpan" id="kobo.41.1">You can also use resource properties to specify additional details about the resource, such as the VPC in which it should be created, the security groups it should be associated with, and </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">so on.</span></span></p>
<h2 id="_idParaDest-146"><a id="_idTextAnchor145"/><span class="koboSpan" id="kobo.43.1">Providers</span></h2>
<p><span class="koboSpan" id="kobo.44.1">A provider is a plugin</span><a id="_idIndexMarker340"/><span class="koboSpan" id="kobo.45.1"> that Terraform uses to interact with the infrastructure </span><a id="_idIndexMarker341"/><span class="koboSpan" id="kobo.46.1">of a particular cloud provider, such as AWS. </span><span class="koboSpan" id="kobo.46.2">Each provider has its own set of resources that you can use to create and </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">manage infrastructure.</span></span></p>
<p><span class="koboSpan" id="kobo.48.1">To use a provider in your Terraform configuration, you need to specify it in a provider block. </span><span class="koboSpan" id="kobo.48.2">For example, to use the AWS provider, you would add the following block to </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">your configuration:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.50.1">
provider "aws" {
  region = "us-east-1"
}</span></pre> <p><span class="koboSpan" id="kobo.51.1">This block specifies that you want to use the AWS provider and that you want to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.52.1">us-east-1</span></strong><span class="koboSpan" id="kobo.53.1"> region. </span><span class="koboSpan" id="kobo.53.2">You can also specify provider-specific configuration options, such as the access key and secret key to use when authenticating with the </span><span class="No-Break"><span class="koboSpan" id="kobo.54.1">provider’s APIs.</span></span></p>
<p><span class="koboSpan" id="kobo.55.1">Once you’ve specified a </span><a id="_idIndexMarker342"/><span class="koboSpan" id="kobo.56.1">provider in your configuration, you can use </span><a id="_idIndexMarker343"/><span class="koboSpan" id="kobo.57.1">resources from that provider to create and manage infrastructure. </span><span class="koboSpan" id="kobo.57.2">For example, you could use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.58.1">aws_instance</span></strong><span class="koboSpan" id="kobo.59.1"> resource to create an EC2 instance </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">in AWS:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.61.1">
resource "aws_instance" "web_server" {
  ami           = "ami-12345678"
  instance_type = "t2.micro"
}</span></pre> <h2 id="_idParaDest-147"><a id="_idTextAnchor146"/><span class="koboSpan" id="kobo.62.1">State</span></h2>
<p><span class="koboSpan" id="kobo.63.1">Terraform maintains a state file that stores the current configuration of your infrastructure. </span><span class="koboSpan" id="kobo.63.2">This allows it to track </span><a id="_idIndexMarker344"/><span class="koboSpan" id="kobo.64.1">changes and know what actions to take when you make changes to </span><span class="No-Break"><span class="koboSpan" id="kobo.65.1">your configuration.</span></span></p>
<p><span class="koboSpan" id="kobo.66.1">The state file is an important part </span><a id="_idIndexMarker345"/><span class="koboSpan" id="kobo.67.1">of how Terraform functions, as it allows Terraform to know what actions to take when you make changes to your infrastructure. </span><span class="koboSpan" id="kobo.67.2">For example, if you create a new EC2 instance using Terraform, the state file will be updated to reflect the existence of the new instance. </span><span class="koboSpan" id="kobo.67.3">If you then modify the instance using Terraform, the state file will be updated to reflect the new configuration of </span><span class="No-Break"><span class="koboSpan" id="kobo.68.1">the instance.</span></span></p>
<p><span class="koboSpan" id="kobo.69.1">There are a few different ways that you can store your </span><span class="No-Break"><span class="koboSpan" id="kobo.70.1">state file:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.71.1">Local state file</span></strong><span class="koboSpan" id="kobo.72.1">: By default, Terraform will store the state file locally in a file named </span><strong class="source-inline"><span class="koboSpan" id="kobo.73.1">terraform.tfstate</span></strong><span class="koboSpan" id="kobo.74.1">. </span><span class="koboSpan" id="kobo.74.2">This is the simplest option, but it can be inconvenient if you are working in a team and</span><a id="_idIndexMarker346"/><span class="koboSpan" id="kobo.75.1"> need to share the </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">state file.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.77.1">Remote state file</span></strong><span class="koboSpan" id="kobo.78.1">: You can also store</span><a id="_idIndexMarker347"/><span class="koboSpan" id="kobo.79.1"> the state file in a remote location, such as an S3 bucket or a Terraform Cloud workspace. </span><span class="koboSpan" id="kobo.79.2">This allows you to share the state file with other members of your team, and it can also help protect against data loss if your local machine </span><span class="No-Break"><span class="koboSpan" id="kobo.80.1">is destroyed.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.81.1">Locking state file</span></strong><span class="koboSpan" id="kobo.82.1">: When using </span><a id="_idIndexMarker348"/><span class="koboSpan" id="kobo.83.1">a remote state file, you can enable state file locking to prevent multiple users from modifying the state file simultaneously. </span><span class="koboSpan" id="kobo.83.2">This can help avoid </span><a id="_idIndexMarker349"/><span class="koboSpan" id="kobo.84.1">conflicts when multiple users are making changes to the infrastructure at the </span><span class="No-Break"><span class="koboSpan" id="kobo.85.1">same time.</span></span></li>
</ul>
<h2 id="_idParaDest-148"><a id="_idTextAnchor147"/><span class="koboSpan" id="kobo.86.1">Modules</span></h2>
<p><span class="koboSpan" id="kobo.87.1">Modules are self-contained packages of Terraform configurations that can be shared and reused. </span><span class="koboSpan" id="kobo.87.2">You can</span><a id="_idIndexMarker350"/><span class="koboSpan" id="kobo.88.1"> use modules to define your infrastructure in a more modular, </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">reusable way.</span></span></p>
<p><span class="koboSpan" id="kobo.90.1">For example, suppose you want to create a web server cluster with a load balancer and a database. </span><span class="koboSpan" id="kobo.90.2">You could create a module </span><a id="_idIndexMarker351"/><span class="koboSpan" id="kobo.91.1">for each of these components, and then use those modules to build the web server cluster. </span><span class="koboSpan" id="kobo.91.2">This would allow you to reuse the modules in other infrastructure projects, and it would make your code easier to understand </span><span class="No-Break"><span class="koboSpan" id="kobo.92.1">and maintain.</span></span></p>
<p><span class="koboSpan" id="kobo.93.1">To create a module, you create a directory with one or more Terraform configuration files and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.94.1">module.tf</span></strong><span class="koboSpan" id="kobo.95.1"> file that specifies the inputs and outputs of the module. </span><span class="koboSpan" id="kobo.95.2">You can then use the module in your infrastructure by calling it from another Terraform configuration using a </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">module block.</span></span></p>
<p><span class="koboSpan" id="kobo.97.1">Here’s an example of a module block that calls a module </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">named </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.99.1">web_server_cluster</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.101.1">
module "web_server_cluster" {
  source = "./web_server_cluster"
  num_web_servers = 3
  web_server_size = "t2.micro"
  database_size = "t2.micro"
}</span></pre> <p><span class="koboSpan" id="kobo.102.1">This block specifies the source of the module (a local directory named </span><strong class="source-inline"><span class="koboSpan" id="kobo.103.1">web_server_cluster</span></strong><span class="koboSpan" id="kobo.104.1">) and sets the input variables for the module (</span><strong class="source-inline"><span class="koboSpan" id="kobo.105.1">num_web_servers</span></strong><span class="koboSpan" id="kobo.106.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.107.1">web_server_size</span></strong><span class="koboSpan" id="kobo.108.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.109.1">database_size</span></strong><span class="koboSpan" id="kobo.110.1">). </span><span class="koboSpan" id="kobo.110.2">The module can then use these input </span><a id="_idIndexMarker352"/><span class="koboSpan" id="kobo.111.1">variables to create the </span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">desired infrastructure.</span></span></p>
<h2 id="_idParaDest-149"><a id="_idTextAnchor148"/><span class="koboSpan" id="kobo.113.1">Variables</span></h2>
<p><span class="koboSpan" id="kobo.114.1">Variables allow you to </span><a id="_idIndexMarker353"/><span class="koboSpan" id="kobo.115.1">parameterize your configurations and </span><a id="_idIndexMarker354"/><span class="koboSpan" id="kobo.116.1">make them more flexible. </span><span class="koboSpan" id="kobo.116.2">You can use variables to define values that are used in multiple places in your configuration, or that you want to be able to </span><span class="No-Break"><span class="koboSpan" id="kobo.117.1">adjust easily.</span></span></p>
<p><span class="koboSpan" id="kobo.118.1">To define a variable in your Terraform configuration, you can use a variable block. </span><span class="koboSpan" id="kobo.118.2">Here’s an example of a variable block that defines a variable </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">named </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">image_id</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.122.1">
variable "image_id" {
  type = string
}</span></pre> <p><span class="koboSpan" id="kobo.123.1">This block defines a variable of type string named </span><strong class="source-inline"><span class="koboSpan" id="kobo.124.1">image_id</span></strong><span class="koboSpan" id="kobo.125.1">. </span><span class="koboSpan" id="kobo.125.2">You can then use this variable in your configuration by referencing it with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.126.1">${var.name}</span></strong><span class="koboSpan" id="kobo.127.1"> syntax, </span><span class="No-Break"><span class="koboSpan" id="kobo.128.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.129.1">
resource "aws_instance" "web_server" {
  ami           = "${var.image_id}"
  instance_type = "t2.micro"
}</span></pre> <p><span class="koboSpan" id="kobo.130.1">You can also specify default values for your variables using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.131.1">default</span></strong><span class="koboSpan" id="kobo.132.1"> attribute, </span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.134.1">
variable "image_id" {
  type    = string
  default = "ami-12345678"
}</span></pre> <p><span class="koboSpan" id="kobo.135.1">This sets the default value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.136.1">image_id</span></strong><span class="koboSpan" id="kobo.137.1"> variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.138.1">ami-12345678</span></strong><span class="koboSpan" id="kobo.139.1">. </span><span class="koboSpan" id="kobo.139.2">If you don’t specify a value for the variable when you run Terraform, it will use the </span><span class="No-Break"><span class="koboSpan" id="kobo.140.1">default value.</span></span></p>
<p><span class="koboSpan" id="kobo.141.1">You can set the value of a variable using one </span><a id="_idIndexMarker355"/><span class="koboSpan" id="kobo.142.1">of the </span><span class="No-Break"><span class="koboSpan" id="kobo.143.1">following methods:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.144.1">Hard-coding the value</span></strong><span class="koboSpan" id="kobo.145.1">: You can set the value of a variable directly in your configuration using the default attribute. </span><span class="koboSpan" id="kobo.145.2">This is useful for simple configurations or </span><span class="No-Break"><span class="koboSpan" id="kobo.146.1">for testing.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.147.1">Using environment variables</span></strong><span class="koboSpan" id="kobo.148.1">: You can set the value of a variable using an environment variable. </span><span class="koboSpan" id="kobo.148.2">This </span><a id="_idIndexMarker356"/><span class="koboSpan" id="kobo.149.1">can be useful for storing sensitive information or for managing multiple environments (e.g. </span><span class="koboSpan" id="kobo.149.2">staging </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">and production).</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.151.1">Using a variable definition file</span></strong><span class="koboSpan" id="kobo.152.1">: You can store the values of your variables in a separate file (e.g. </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1">terraform.tfvars</span></strong><span class="koboSpan" id="kobo.154.1">) and reference the file in your configuration using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1">-var-file</span></strong><span class="koboSpan" id="kobo.156.1"> flag. </span><span class="koboSpan" id="kobo.156.2">This can be useful for sharing values across multiple configurations or for storing values that you don’t want to commit to </span><span class="No-Break"><span class="koboSpan" id="kobo.157.1">version control.</span></span></li>
</ul>
<h2 id="_idParaDest-150"><a id="_idTextAnchor149"/><span class="koboSpan" id="kobo.158.1">Outputs</span></h2>
<p><span class="koboSpan" id="kobo.159.1">Outputs are values that are exported from a Terraform configuration and can be accessed from other configurations or </span><a id="_idIndexMarker357"/><span class="koboSpan" id="kobo.160.1">consumed by </span><span class="No-Break"><span class="koboSpan" id="kobo.161.1">external systems.</span></span></p>
<p><span class="koboSpan" id="kobo.162.1">To define an output in your </span><a id="_idIndexMarker358"/><span class="koboSpan" id="kobo.163.1">Terraform configuration, you can use an </span><strong class="source-inline"><span class="koboSpan" id="kobo.164.1">output</span></strong><span class="koboSpan" id="kobo.165.1"> block. </span><span class="koboSpan" id="kobo.165.2">Here’s an example of an </span><strong class="source-inline"><span class="koboSpan" id="kobo.166.1">output</span></strong><span class="koboSpan" id="kobo.167.1"> block that exports the public IP address of an </span><span class="No-Break"><span class="koboSpan" id="kobo.168.1">EC2 instance:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.169.1">
output "public_ip" {
  value = "${aws_instance.web_server.public_ip}"
}</span></pre> <p><span class="koboSpan" id="kobo.170.1">This </span><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">output</span></strong><span class="koboSpan" id="kobo.172.1"> block exports a value named </span><strong class="source-inline"><span class="koboSpan" id="kobo.173.1">public_ip</span></strong><span class="koboSpan" id="kobo.174.1"> and sets its value to the public IP address of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.175.1">web_server</span></strong><span class="koboSpan" id="kobo.176.1"> EC2 instance. </span><span class="koboSpan" id="kobo.176.2">You can then access the value of this output using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.177.1">terraform output</span></strong><span class="koboSpan" id="kobo.178.1"> command or by referencing it in another Terraform configuration using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.179.1">${</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">output.name}</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.181.1"> syntax.</span></span></p>
<p><span class="koboSpan" id="kobo.182.1">Outputs are useful for displaying important information about your infrastructure, such as the IP addresses of resources or the URLs of applications. </span><span class="koboSpan" id="kobo.182.2">They can also be used to pass information between</span><a id="_idIndexMarker359"/><span class="koboSpan" id="kobo.183.1"> multiple configurations, such as the ID of an S3 bucket that is created in one configuration and used </span><span class="No-Break"><span class="koboSpan" id="kobo.184.1">in another.</span></span></p>
<h2 id="_idParaDest-151"><a id="_idTextAnchor150"/><span class="koboSpan" id="kobo.185.1">Provisioners</span></h2>
<p><span class="koboSpan" id="kobo.186.1">Provisioners are used to execute scripts or</span><a id="_idIndexMarker360"/><span class="koboSpan" id="kobo.187.1"> make API calls after a resource is created. </span><span class="koboSpan" id="kobo.187.2">This can be useful for</span><a id="_idIndexMarker361"/><span class="koboSpan" id="kobo.188.1"> tasks such as installing software on an EC2 instance or uploading files to an </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">S3 bucket.</span></span></p>
<p><span class="koboSpan" id="kobo.190.1">Provisioners are defined in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.191.1">provisioner</span></strong><span class="koboSpan" id="kobo.192.1"> block within a </span><strong class="source-inline"><span class="koboSpan" id="kobo.193.1">resource</span></strong><span class="koboSpan" id="kobo.194.1"> block. </span><span class="koboSpan" id="kobo.194.2">For example, the following </span><strong class="source-inline"><span class="koboSpan" id="kobo.195.1">resource</span></strong><span class="koboSpan" id="kobo.196.1"> block includes a provisioner that runs a shell script after the EC2 instance </span><span class="No-Break"><span class="koboSpan" id="kobo.197.1">is created:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.198.1">
resource "aws_instance" "web_server" {
  ami           = "ami-12345678"
  instance_type = "t2.micro"
  provisioner "remote-exec" {
    inline = [
      "apt-get update",
      "apt-get install -y nginx",
    ]
  }
}</span></pre> <p><span class="koboSpan" id="kobo.199.1">This provisioner uses the </span><strong class="source-inline"><span class="koboSpan" id="kobo.200.1">remote-exec</span></strong><span class="koboSpan" id="kobo.201.1"> provisioner type, which allows you to execute commands on the remote host using SSH. </span><span class="koboSpan" id="kobo.201.2">The inline attribute specifies the commands to run. </span><span class="koboSpan" id="kobo.201.3">In this case, the provisioner installs the </span><strong class="source-inline"><span class="koboSpan" id="kobo.202.1">nginx</span></strong><span class="koboSpan" id="kobo.203.1"> web server on the </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">EC2 instance.</span></span></p>
<p><span class="koboSpan" id="kobo.205.1">Terraform supports several different types of provisioners, including </span><strong class="source-inline"><span class="koboSpan" id="kobo.206.1">file</span></strong><span class="koboSpan" id="kobo.207.1">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.208.1">remote-exec</span></strong><span class="koboSpan" id="kobo.209.1">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.210.1">local-exec</span></strong><span class="koboSpan" id="kobo.211.1">. </span><span class="koboSpan" id="kobo.211.2">You can use different provisioners depending on your needs and the type of resource you</span><a id="_idIndexMarker362"/> <span class="No-Break"><span class="koboSpan" id="kobo.212.1">are managing.</span></span></p>
<h1 id="_idParaDest-152"><a id="_idTextAnchor151"/><span class="koboSpan" id="kobo.213.1">Selecting AWS Providers</span></h1>
<p><span class="koboSpan" id="kobo.214.1">In Terraform, a provider is a plugin that integrates Terraform with a specific infrastructure platform, such as AWS, Google Cloud, or Azure. </span><span class="koboSpan" id="kobo.214.2">Providers are responsible for understanding the API of the </span><a id="_idIndexMarker363"/><span class="koboSpan" id="kobo.215.1">infrastructure platform and exposing resources that can be created, modified, and destroyed </span><span class="No-Break"><span class="koboSpan" id="kobo.216.1">using Terraform.</span></span></p>
<p><span class="koboSpan" id="kobo.217.1">There are two types of Terraform providers – official providers and </span><span class="No-Break"><span class="koboSpan" id="kobo.218.1">third-party providers:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.219.1">Official providers</span></strong><span class="koboSpan" id="kobo.220.1"> are developed and </span><a id="_idIndexMarker364"/><span class="koboSpan" id="kobo.221.1">maintained by HashiCorp, the company behind Terraform. </span><span class="koboSpan" id="kobo.221.2">These providers are considered the most stable and reliable, as they are supported by HashiCorp and receive </span><span class="No-Break"><span class="koboSpan" id="kobo.222.1">regular updates.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.223.1">Third-party providers</span></strong><span class="koboSpan" id="kobo.224.1"> are developed </span><a id="_idIndexMarker365"/><span class="koboSpan" id="kobo.225.1">and maintained by external organizations or individuals. </span><span class="koboSpan" id="kobo.225.2">These providers are not officially supported by HashiCorp, but they can be useful for extending Terraform to support additional infrastructure platforms </span><span class="No-Break"><span class="koboSpan" id="kobo.226.1">or tools.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.227.1">You can find a list of all the available Terraform providers on the Terraform Registry. </span><span class="koboSpan" id="kobo.227.2">(</span><a href="https://registry.terraform.io/browse/providers"><span class="koboSpan" id="kobo.228.1">https://registry.terraform.io/browse/providers</span></a><span class="koboSpan" id="kobo.229.1">). </span><span class="koboSpan" id="kobo.229.2">The Registry lists both official and third-party providers, and it </span><a id="_idIndexMarker366"/><span class="koboSpan" id="kobo.230.1">includes information on the providers’ compatibility with Terraform and the resources </span><span class="No-Break"><span class="koboSpan" id="kobo.231.1">they support.</span></span></p>
<p><span class="koboSpan" id="kobo.232.1">To select a provider in Terraform, you need to specify it in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.233.1">provider</span></strong><span class="koboSpan" id="kobo.234.1"> block in your configuration. </span><span class="koboSpan" id="kobo.234.2">For example, to use the AWS provider, you would add the following block to </span><span class="No-Break"><span class="koboSpan" id="kobo.235.1">your configuration:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.236.1">
provider "aws" {
  region = "us-east-1"
}</span></pre> <p><span class="koboSpan" id="kobo.237.1">This block specifies that you want to use the AWS provider and that you want to use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.238.1">us-east-1</span></strong><span class="koboSpan" id="kobo.239.1"> region. </span><span class="koboSpan" id="kobo.239.2">You can also specify provider-specific configuration options, such as the access key and secret key to use when authenticating with the </span><span class="No-Break"><span class="koboSpan" id="kobo.240.1">provider’s APIs.</span></span></p>
<p><span class="koboSpan" id="kobo.241.1">You can use multiple </span><strong class="source-inline"><span class="koboSpan" id="kobo.242.1">provider</span></strong><span class="koboSpan" id="kobo.243.1"> blocks in a single configuration to manage resources across multiple providers. </span><span class="koboSpan" id="kobo.243.2">For example, you might use the AWS provider to manage your EC2 instances and the Google Cloud provider to manage your Compute </span><span class="No-Break"><span class="koboSpan" id="kobo.244.1">Engine instances.</span></span></p>
<p><span class="koboSpan" id="kobo.245.1">To specify the version of </span><a id="_idIndexMarker367"/><span class="koboSpan" id="kobo.246.1">a provider to use, you can use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.247.1">version</span></strong><span class="koboSpan" id="kobo.248.1"> attribute in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.249.1">provider</span></strong><span class="koboSpan" id="kobo.250.1"> block, </span><span class="No-Break"><span class="koboSpan" id="kobo.251.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.252.1">
provider "aws" {
  version = "~&gt; 2.0"
}</span></pre> <p><span class="koboSpan" id="kobo.253.1">This specifies that you want to use the latest version of the AWS provider that is compatible with </span><span class="No-Break"><span class="koboSpan" id="kobo.254.1">version 2.0.</span></span></p>
<p><span class="koboSpan" id="kobo.255.1">By running the </span><strong class="source-inline"><span class="koboSpan" id="kobo.256.1">terraform init</span></strong><span class="koboSpan" id="kobo.257.1"> command, Terraform will automatically download the required plugins for the providers specified in your configuration. </span><span class="koboSpan" id="kobo.257.2">To enforce a specific version of a provider, you can add a </span><strong class="source-inline"><span class="koboSpan" id="kobo.258.1">version</span></strong><span class="koboSpan" id="kobo.259.1"> attribute to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.260.1">provider</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.261.1"> block.</span></span></p>
<p><span class="koboSpan" id="kobo.262.1">You can also specify the version of a provider using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.263.1">-upgrade</span></strong><span class="koboSpan" id="kobo.264.1"> flag when running </span><strong class="source-inline"><span class="koboSpan" id="kobo.265.1">terraform init</span></strong><span class="koboSpan" id="kobo.266.1">. </span><span class="koboSpan" id="kobo.266.2">This will force Terraform to download the latest version of the provider, even if you have already downloaded a </span><span class="No-Break"><span class="koboSpan" id="kobo.267.1">compatible version.</span></span></p>
<p><span class="koboSpan" id="kobo.268.1">If you want to use a specific version of a provider, you can specify the version number in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.269.1">version</span></strong><span class="koboSpan" id="kobo.270.1"> attribute, </span><span class="No-Break"><span class="koboSpan" id="kobo.271.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.272.1">
provider "aws" {
  version = "2.23.0"
}</span></pre> <p><span class="koboSpan" id="kobo.273.1">This specifies that you want to use version 2.23.0 of the </span><span class="No-Break"><span class="koboSpan" id="kobo.274.1">AWS provider.</span></span></p>
<p><span class="koboSpan" id="kobo.275.1">If you want to use the latest version of a provider, you can set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.276.1">version</span></strong><span class="koboSpan" id="kobo.277.1"> attribute to </span><strong class="source-inline"><span class="koboSpan" id="kobo.278.1">latest</span></strong><span class="koboSpan" id="kobo.279.1">, </span><span class="No-Break"><span class="koboSpan" id="kobo.280.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.281.1">
provider "aws" {
  version = "latest"
}</span></pre> <p><span class="koboSpan" id="kobo.282.1">This specifies that you want to use the latest version of the AWS provider that </span><span class="No-Break"><span class="koboSpan" id="kobo.283.1">is available.</span></span></p>
<p><span class="koboSpan" id="kobo.284.1">You can also use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.285.1">-get-plugins</span></strong><span class="koboSpan" id="kobo.286.1"> flag when running </span><strong class="source-inline"><span class="koboSpan" id="kobo.287.1">terraform init</span></strong><span class="koboSpan" id="kobo.288.1"> to download the latest versions of all </span><a id="_idIndexMarker368"/><span class="koboSpan" id="kobo.289.1">the providers in </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">your configuration.</span></span></p>
<p><span class="koboSpan" id="kobo.291.1">There are currently two AWS Providers available </span><span class="No-Break"><span class="koboSpan" id="kobo.292.1">in Terraform:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.293.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.294.1">aws provider</span></strong><span class="koboSpan" id="kobo.295.1"> is the legacy provider, and it is written in Go. </span><span class="koboSpan" id="kobo.295.2">It uses the AWS SDK for Go to make </span><a id="_idIndexMarker369"/><span class="koboSpan" id="kobo.296.1">API requests to AWS, and it was the default AWS provider for Terraform for a </span><span class="No-Break"><span class="koboSpan" id="kobo.297.1">long time.</span></span></li>
<li><span class="koboSpan" id="kobo.298.1">The </span><strong class="bold"><span class="koboSpan" id="kobo.299.1">aws.sdk provider</span></strong><span class="koboSpan" id="kobo.300.1"> is a newer </span><a id="_idIndexMarker370"/><span class="koboSpan" id="kobo.301.1">provider, and it is written in TypeScript. </span><span class="koboSpan" id="kobo.301.2">It uses the AWS SDK for JavaScript to make API requests to AWS. </span><span class="koboSpan" id="kobo.301.3">It was introduced in Terraform v0.13 as an experimental provider, and it became a stable provider in </span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">Terraform v0.14.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.303.1">In general, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.304.1">aws.sdk</span></strong><span class="koboSpan" id="kobo.305.1"> provider is preferred over the </span><strong class="source-inline"><span class="koboSpan" id="kobo.306.1">aws</span></strong><span class="koboSpan" id="kobo.307.1"> provider, as it is more feature-complete and has better support for AWS services. </span><span class="koboSpan" id="kobo.307.2">However, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.308.1">aws</span></strong><span class="koboSpan" id="kobo.309.1"> provider is still widely used and is likely to be supported for the </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">foreseeable future.</span></span></p>
<h1 id="_idParaDest-153"><a id="_idTextAnchor152"/><span class="koboSpan" id="kobo.311.1">Selecting AWS public modules for your needs</span></h1>
<p><span class="koboSpan" id="kobo.312.1">To use a public module in</span><a id="_idIndexMarker371"/><span class="koboSpan" id="kobo.313.1"> Terraform, you need to specify the source of the module in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">module</span></strong><span class="koboSpan" id="kobo.315.1"> block in your configuration. </span><span class="koboSpan" id="kobo.315.2">You can specify the source of a module using a local path, Terraform Public Registry, a Git repository URL, or a URL to a compressed archive file (e.g. </span><span class="koboSpan" id="kobo.315.3">a </span><strong class="source-inline"><span class="koboSpan" id="kobo.316.1">.zip</span></strong><span class="koboSpan" id="kobo.317.1"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.318.1">.</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.319.1">tar.gz</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.320.1"> file).</span></span></p>
<p><span class="koboSpan" id="kobo.321.1">Here are some examples of how you can specify the source of a public module in a </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.322.1">module</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.323.1"> block:</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.324.1">Local path</span></strong><span class="koboSpan" id="kobo.325.1">: To use a module from a local directory, specify the path to the directory as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.326.1">source</span></strong><span class="koboSpan" id="kobo.327.1"> attribute, </span><span class="No-Break"><span class="koboSpan" id="kobo.328.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.329.1">
module "web_server_cluster" {
  source = "./web_server_cluster"
}</span></pre> <p><span class="koboSpan" id="kobo.330.1">This specifies that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.331.1">web_server_cluster</span></strong><span class="koboSpan" id="kobo.332.1"> module is located in a local directory </span><span class="No-Break"><span class="koboSpan" id="kobo.333.1">named </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.334.1">web_server_cluster</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.335.1">.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.336.1">Git repository</span></strong><span class="koboSpan" id="kobo.337.1">: To use a module from a Git repository, specify the URL of the repository as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.338.1">source</span></strong><span class="koboSpan" id="kobo.339.1"> attribute, </span><span class="No-Break"><span class="koboSpan" id="kobo.340.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.341.1">
module "web_server_cluster" {
  source = "git::https://github.com/example/web_server_cluster.git"
}</span></pre> <p><span class="koboSpan" id="kobo.342.1">This specifies that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">web_server_cluster</span></strong><span class="koboSpan" id="kobo.344.1"> module is located in a Git repository at the </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">URL </span></span><a href="https://github.com/example/web_server_cluster.git"><span class="No-Break"><span class="koboSpan" id="kobo.346.1">https://github.com/example/web_server_cluster.git</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.347.1">.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.348.1">Compressed archive file</span></strong><span class="koboSpan" id="kobo.349.1">: To use a</span><a id="_idIndexMarker372"/><span class="koboSpan" id="kobo.350.1"> module from a compressed archive file, specify the URL of the file as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.351.1">source</span></strong><span class="koboSpan" id="kobo.352.1"> attribute, </span><span class="No-Break"><span class="koboSpan" id="kobo.353.1">for example:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.354.1">
module "web_server_cluster" {
  source = "http://example.com/web_server_cluster.zip"
}</span></pre> <p><span class="koboSpan" id="kobo.355.1">This specifies that the </span><strong class="source-inline"><span class="koboSpan" id="kobo.356.1">web_server_cluster</span></strong><span class="koboSpan" id="kobo.357.1"> module is located in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.358.1">.zip</span></strong><span class="koboSpan" id="kobo.359.1"> file at the </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">URL </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.361.1">http://example.com/web_server_cluster.zip</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">.</span></span></p>
<p><strong class="bold"><span class="koboSpan" id="kobo.363.1">Terraform Registry</span></strong><span class="koboSpan" id="kobo.364.1">: To use a module from the Terraform Registry in your configuration, you need to specify the module in a </span><strong class="source-inline"><span class="koboSpan" id="kobo.365.1">module</span></strong><span class="koboSpan" id="kobo.366.1"> block and set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.367.1">source</span></strong><span class="koboSpan" id="kobo.368.1"> attribute to the URL of the module on </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">the registry.</span></span></p>
<p><span class="koboSpan" id="kobo.370.1">Here’s an example of a </span><strong class="source-inline"><span class="koboSpan" id="kobo.371.1">module</span></strong><span class="koboSpan" id="kobo.372.1"> block that calls a module hosted on the </span><span class="No-Break"><span class="koboSpan" id="kobo.373.1">Terraform Registry:</span></span></p>
<pre class="console"><span class="koboSpan" id="kobo.374.1">
module "web_server_cluster" {
  source = "my-terraform-modules/web_server_cluster"
}</span></pre> <p><span class="koboSpan" id="kobo.375.1">You can find a list of available public modules on the Terraform Registry (</span><a href="https://registry.terraform.io/browse/modules"><span class="koboSpan" id="kobo.376.1">https://registry.terraform.io/browse/modules</span></a><span class="koboSpan" id="kobo.377.1">). </span><span class="koboSpan" id="kobo.377.2">The Registry includes both official and third-party modules, and it includes information on the module’s compatibility with Terraform and the resources it supports. </span><span class="koboSpan" id="kobo.377.3">You can use the search bar to find specific modules, or you can browse the categories to find modules for a particular infrastructure platform or </span><span class="No-Break"><span class="koboSpan" id="kobo.378.1">use case.</span></span></p>
<h2 id="_idParaDest-154"><a id="_idTextAnchor153"/><span class="koboSpan" id="kobo.379.1">How to decide on Terraform module selection</span></h2>
<p><span class="koboSpan" id="kobo.380.1">There are several factors to consider when deciding which Terraform modules to use in </span><span class="No-Break"><span class="koboSpan" id="kobo.381.1">your infrastructure:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.382.1">Compatibility</span></strong><span class="koboSpan" id="kobo.383.1">: Make sure that the module is compatible with the version of Terraform you are using. </span><span class="koboSpan" id="kobo.383.2">You </span><a id="_idIndexMarker373"/><span class="koboSpan" id="kobo.384.1">can check the compatibility information on the module’s page on the </span><span class="No-Break"><span class="koboSpan" id="kobo.385.1">Terraform Registry.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.386.1">Supported resources</span></strong><span class="koboSpan" id="kobo.387.1">: Check that the module supports the resources you need to create or manage. </span><span class="koboSpan" id="kobo.387.2">You can find a list of the resources supported by the module on its page on the </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">Terraform Registry.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.389.1">Input variables</span></strong><span class="koboSpan" id="kobo.390.1">: Make sure that the module has the input variables you need to customize the behavior of the module. </span><span class="koboSpan" id="kobo.390.2">You can find a list of the input variables for the module on its page on the </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">Terraform Registry.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.392.1">Output values</span></strong><span class="koboSpan" id="kobo.393.1">: Check that the module has the output values you need to access the created resources or pass information between modules. </span><span class="koboSpan" id="kobo.393.2">You can find a list of the output values for the module on its page on the </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">Terraform Registry.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.395.1">Maintenance</span></strong><span class="koboSpan" id="kobo.396.1">: Consider the maintenance status of the module. </span><span class="koboSpan" id="kobo.396.2">Check when the module was last updated and whether it is actively maintained. </span><span class="koboSpan" id="kobo.396.3">You may want to choose a module that is more actively maintained to ensure that it stays up to date and receives bug fixes and </span><span class="No-Break"><span class="koboSpan" id="kobo.397.1">new features.</span></span></li>
</ul>
<h1 id="_idParaDest-155"><a id="_idTextAnchor154"/><span class="koboSpan" id="kobo.398.1">How to write custom Terraform AWS modules</span></h1>
<p><span class="koboSpan" id="kobo.399.1">To write a Terraform </span><a id="_idIndexMarker374"/><span class="koboSpan" id="kobo.400.1">module, you will need to create a configuration file or a set of configuration files that define the resources you want to create or manage. </span><span class="koboSpan" id="kobo.400.2">A module is essentially a reusable configuration that can be called from other configurations </span><span class="No-Break"><span class="koboSpan" id="kobo.401.1">or modules.</span></span></p>
<p><span class="koboSpan" id="kobo.402.1">Here are the steps you can follow to write a </span><span class="No-Break"><span class="koboSpan" id="kobo.403.1">Terraform module:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.404.1">Define the resources you want to create or manage</span></strong><span class="koboSpan" id="kobo.405.1">: Use </span><strong class="source-inline"><span class="koboSpan" id="kobo.406.1">resource</span></strong><span class="koboSpan" id="kobo.407.1"> blocks to define the resources you want to create or manage. </span><span class="koboSpan" id="kobo.407.2">For example, you might use an </span><strong class="source-inline"><span class="koboSpan" id="kobo.408.1">aws_instance</span></strong><span class="koboSpan" id="kobo.409.1"> resource to create an EC2 instance or an </span><strong class="source-inline"><span class="koboSpan" id="kobo.410.1">aws_s3_bucket</span></strong><span class="koboSpan" id="kobo.411.1"> resource to create an </span><span class="No-Break"><span class="koboSpan" id="kobo.412.1">S3 bucket.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.413.1">Define the input variables for the module</span></strong><span class="koboSpan" id="kobo.414.1">: Use </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1">variable</span></strong><span class="koboSpan" id="kobo.416.1"> blocks to define the input variables for the module. </span><span class="koboSpan" id="kobo.416.2">Input variables allow users of the module to customize the behavior of the module when it is called. </span><span class="koboSpan" id="kobo.416.3">For example, you might define a variable for the number of EC2 instances to create or the name of an </span><span class="No-Break"><span class="koboSpan" id="kobo.417.1">S3 bucket.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.418.1">Define the output values for the module</span></strong><span class="koboSpan" id="kobo.419.1">: Use </span><strong class="source-inline"><span class="koboSpan" id="kobo.420.1">output</span></strong><span class="koboSpan" id="kobo.421.1"> blocks to define the output values for the module. </span><span class="koboSpan" id="kobo.421.2">Output values allow users of the module to access the created resources or pass information between modules. </span><span class="koboSpan" id="kobo.421.3">For example, you might define</span><a id="_idIndexMarker375"/><span class="koboSpan" id="kobo.422.1"> an output value for the public IP address of an EC2 instance or the URL of an </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">S3 bucket.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.424.1">Test the module</span></strong><span class="koboSpan" id="kobo.425.1">: Use </span><strong class="source-inline"><span class="koboSpan" id="kobo.426.1">terraform plan</span></strong><span class="koboSpan" id="kobo.427.1"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1">terraform apply</span></strong><span class="koboSpan" id="kobo.429.1"> to test the module and make sure it is creating the resources </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">as expected.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.431.1">Document the module</span></strong><span class="koboSpan" id="kobo.432.1">: Document the input variables, output values, and any other important information about the module in the README file for </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">the module.</span></span></li>
</ol>
<h1 id="_idParaDest-156"><a id="_idTextAnchor155"/><span class="koboSpan" id="kobo.434.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.435.1">In this chapter, we covered the basics of developing AWS infrastructure projects with Terraform. </span><span class="koboSpan" id="kobo.435.2">We learned how to deploy our first Terraform template in AWS, select AWS Providers, and choose public AWS modules that best suit our needs. </span><span class="koboSpan" id="kobo.435.3">We also explored how to write custom Terraform AWS modules and how to use them effectively. </span><span class="koboSpan" id="kobo.435.4">By the end of this chapter, you should be able to develop and deploy your own AWS infrastructure, make decisions about providers, select the best public AWS modules, and create and use custom Terraform AWS modules. </span><span class="koboSpan" id="kobo.435.5">These skills will serve as a foundation for you to continue exploring Terraform and AWS </span><span class="No-Break"><span class="koboSpan" id="kobo.436.1">infrastructure development.</span></span></p>
<p><span class="koboSpan" id="kobo.437.1">Whether you’re new to serverless or an experienced developer, deploying serverless projects with Terraform can be a game changer for your development workflow. </span><span class="koboSpan" id="kobo.437.2">In the next chapter, we’ll dive into the world of serverless and explore how to use Terraform to deploy serverless applications on AWS Lambda. </span><span class="koboSpan" id="kobo.437.3">From configuring AWS APIs and authentication to handling event triggers and scaling, you’ll gain the skills needed to successfully deploy and manage your serverless projects </span><span class="No-Break"><span class="koboSpan" id="kobo.438.1">with Terraform.</span></span></p>
</div>
</body></html>