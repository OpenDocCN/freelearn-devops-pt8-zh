<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with OpenShift"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Getting Started with OpenShift</h1></div></div></div><p class="calibre6">This chapter presents a number of recipes that show you how to get started with OpenShift using the web console and <code class="email">rhc</code> command-line client. You will learn how to host your own WordPress blog with a button click, make source code changes and deploy them, and perform basic operations with the <code class="email">rhc</code> command-line client. The specific recipes of this chapter are:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Creating an OpenShift Online account</li><li class="listitem">Creating OpenShift domains using the web console</li><li class="listitem">Creating a WordPress application using the web console</li><li class="listitem">Uploading SSH keys using the web console</li><li class="listitem">Working with the SSH key passphrases</li><li class="listitem">Cloning the application to the local machine</li><li class="listitem">Deploying your first change</li><li class="listitem">Checking the application's gear quota and limits</li><li class="listitem">Installing the OpenShift rhc command-line client</li><li class="listitem">Setting up an OpenShift account using rhc</li><li class="listitem">Enabling the autocomplete feature in an rhc command-line client</li><li class="listitem">Viewing the account details using rhc</li><li class="listitem">Specifying a different OpenShift server hostname</li><li class="listitem">Updating rhc</li></ul></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Getting Started with OpenShift">
<div class="book" title="A brief introduction into OpenShift"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>A brief introduction into OpenShift</h1></div></div></div><p class="calibre6">A few years ago, I wanted to write a web application that would process a stream of tweets about a movie and then output the overall sentiment about it. This would help me decide whether I should watch a movie or not. So, I researched for a hosting provider and found out that I could rent a few virtual machines from Amazon to host my web application. This was my entry into the world of cloud computing. Cloud computing allows access to a shared pool of computing (both hardware and software) resources available as a service over the network, which is pay per use, has an elastic nature (that is, can be scaled up and down), and is available on demand. It has three delivery models:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre7">Infrastructure as a Service (IaaS)</strong></span>: This is the<a id="id0" class="calibre1"/> most fundamental delivery model where a user can provision compute, storage, and other resources such as network to run an application, but the user has to install and manage the application stack required to run the application. Examples of IaaS include Amazon EC2, Google Compute Engine, and Rackspace.</li><li class="listitem"><span class="strong"><strong class="calibre7">Platform as a Service (PaaS)</strong></span>: PaaS <a id="id1" class="calibre1"/>provides an application development platform to help developers build their applications using the runtimes, tools, libraries, and services provided by the platform provider. Examples of PaaS include OpenShift, Cloud Foundry, and Heroku.</li><li class="listitem"><span class="strong"><strong class="calibre7">Software as a Service (SaaS)</strong></span>: SaaS is<a id="id2" class="calibre1"/> a set of applications (or software) that run on the cloud and are available as a service. Examples of SaaS include Google Apps and Microsoft Office 365.</li></ul></div><p class="calibre6">As a developer, I liked the concept of PaaS, as it enabled me to use my skillset to focus only on the application code and let someone else worry about managing the application stack and infrastructure for me.</p><p class="calibre6">OpenShift<a id="id3" class="calibre1"/> is an open source, a polyglot, and a scalable PaaS from Red Hat. At the time of writing this book, OpenShift officially supports the Java, Ruby, Python, Node.js, PHP, and Perl programming language runtimes, along with MySQL, PostgreSQL, and MongoDB databases, and a lot of other features. Along with all the supported services, OpenShift<a id="id4" class="calibre1"/> users can also leverage marketplace (<a class="calibre1" href="https://marketplace.openshift.com/home">https://marketplace.openshift.com/home</a>) to try and use other cloud services managed by various partners. The services supported by the partners vary from databases such as ElephantSQL scalable PostgreSQL as a Service to SendGrid's Email as a Service.</p><p class="calibre6">OpenShift is an umbrella under which three subprojects coexist. These three subprojects differ in the way they deliver the OpenShift technology to the users, developers, and community members. Each of the subprojects is described as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre7">OpenShift Origin</strong></span>: OpenShift Origin is the <a id="id5" class="calibre1"/>open sourced, Apache License 2.0, community-supported version of OpenShift. It is the upstream feeder project to <a id="id6" class="calibre1"/>both OpenShift Online and OpenShift Enterprise. The project is available on GitHub at <a class="calibre1" href="https://github.com/openshift">https://github.com/openshift</a>.</li><li class="listitem"><span class="strong"><strong class="calibre7">OpenShift Online</strong></span>: OpenShift Online <a id="id7" class="calibre1"/>is the public-managed version of <a id="id8" class="calibre1"/>OpenShift. It runs on top of Amazon EC2 and uses a hardened and stabilized version of OpenShift Origin. Every OpenShift Online user is entitled to a free plan. The free plan gives users access to three small instances with 512 MB RAM and 1 GB of disk space. OpenShift Online is also available as commercial offering via Bronze and Silver plans. The commercial plans allow users to get more resources, storage, and Red Hat professional support. You can learn about the OpenShift Online pricing<a id="id9" class="calibre1"/> at <a class="calibre1" href="https://www.openshift.com/products/pricing">https://www.openshift.com/products/pricing</a>.</li><li class="listitem"><span class="strong"><strong class="calibre7">OpenShift Enterprise</strong></span>: OpenShift Enterprise<a id="id10" class="calibre1"/> is a Red Hat <a id="id11" class="calibre1"/>fully supported, private PaaS solution, which can run on enterprise hardware. OpenShift Enterprise can help make enterprises more agile and meet their business application demands.</li></ul></div><p class="calibre6">This book will focus mainly on OpenShift Online, but the recipes apply to all three.</p><p class="calibre6">As a developer, you can interact with OpenShift in the following four ways:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre7">Web console</strong></span>: This is the <a id="id12" class="calibre1"/>easiest way to get started with OpenShift, as it does<a id="id13" class="calibre1"/> not require you to install any software on your machine. You can log in to the web console and start creating applications. At the time of writing this book, the web console lacks all the features available in the command-line tool.</li><li class="listitem"><span class="strong"><strong class="calibre7">The rhc command line</strong></span>: This<a id="id14" class="calibre1"/> is a command-line tool that interacts with <a id="id15" class="calibre1"/>OpenShift. It is available as a Ruby gem. It is the most powerful way to interact with OpenShift because it exposes all the OpenShift functionalities.</li><li class="listitem"><span class="strong"><strong class="calibre7">IDE Integration</strong></span>: If <a id="id16" class="calibre1"/>you are a developer who likes to do most of the coding from<a id="id17" class="calibre1"/> within an IDE, then you will be happy to know that OpenShift has first class integration with various IDEs such as Eclipse, IntelliJ IDEA, Zend Studio, and Titanium Studio.</li><li class="listitem"><span class="strong"><strong class="calibre7">The REST API</strong></span>: You <a id="id18" class="calibre1"/>can write your own client using the OpenShift REST API. You<a id="id19" class="calibre1"/> can use this API to write plugins for IDEs such as NetBeans or write another command-line client. You can read the REST API<a id="id20" class="calibre1"/> documentation at <a class="calibre1" href="https://access.redhat.com/knowledge/docs/en-US/OpenShift/2.0/html-single/REST_API_Guide/index.html">https://access.redhat.com/knowledge/docs/en-US/OpenShift/2.0/html-single/REST_API_Guide/index.html</a>.</li></ul></div><p class="calibre6">The important OpenShift<a id="id21" class="calibre1"/> components are shown in the following diagram:</p><div class="mediaobject"><img src="../images/00002.jpeg" alt="A brief introduction into OpenShift" class="calibre8"/></div><p class="calibre9"> </p><p class="calibre6">As shown in the preceding diagram, a developer interacts with OpenShift using one of the client interfaces, that is, the web console, <code class="email">rhc</code> command-line client, or IDE support. OpenShift has the following three main components:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre7">Broker</strong></span>: All the <a id="id22" class="calibre1"/>clients interact with the broker using a well-defined <a id="id23" class="calibre1"/>REST interface exposed by the broker. The broker is responsible for all application management activities. It is a Ruby on Rails application that manages user logins, DNS management, and general application orchestration.</li><li class="listitem"><span class="strong"><strong class="calibre7">Node</strong></span>: This is a set of <a id="id24" class="calibre1"/>RHEL instances that provides a multitenant environment <a id="id25" class="calibre1"/>for end user applications.</li><li class="listitem"><span class="strong"><strong class="calibre7">Gear</strong></span>: A gear<a id="id26" class="calibre1"/> is a <a id="id27" class="calibre1"/>secure container that runs inside a node and host user applications. It is constrained by CPU, disk space, and memory.</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre6">The broker and nodes use the ActiveMQ message queue to talk with each other. They both have the MCollective client installed on them to send instructions to each other.</p></div><p class="calibre6">Now that you know what OpenShift is and how you can work with it, let's kick off the first chapter. This chapter presents a number of recipes that gets you up to speed quickly by giving you information you need to create cloud applications using OpenShift. You will learn how to create your first OpenShift application using the web console, clone the application using Git, make your first source code change, and finally deploy that change to OpenShift. If this is the first time you are working with OpenShift, then you will be amazed by the speed at which you can create and deploy applications on OpenShift. This chapter will also cover how to install the <code class="email">rhc</code> command-line client and perform some basic operations using it.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating an OpenShift Online account"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>Creating an OpenShift Online account</h1></div></div></div><p class="calibre6">In this recipe, you will learn how to create an OpenShift Online account. You can sign up for an OpenShift Online account for free; all you need is a valid e-mail address.</p></div>

<div class="book" title="Creating an OpenShift Online account">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec07" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To create an OpenShift Online account, you need a web browser and a valid e-mail address.</p></div></div>

<div class="book" title="Creating an OpenShift Online account">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec08" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Follow these steps to create an <a id="id28" class="calibre1"/>OpenShift Online account:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Open a web browser and go to the<a id="id29" class="calibre1"/> sign-up page at <a class="calibre1" href="https://www.openshift.com/app/account/new">https://www.openshift.com/app/account/new</a>.</li><li class="listitem" value="2">Enter the details required to create a new account and then submit the form.</li><li class="listitem" value="3">After signing up, you will receive an e-mail in your inbox that contains the verification link. Click on the verification link to verify your e-mail address. This will redirect the browser to a web page, asking you to accept the legal terms to use OpenShift Online, as shown in the following screenshot:<div class="mediaobject"><img src="../images/00003.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="4">Click on the <span class="strong"><strong class="calibre7">I Accept</strong></span> button and the browser will redirect to the getting started web page.<div class="note" title="Note"><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre6">If you do not receive a verification e-mail, make sure to check your <code class="email">Spam</code> folder.</p></div></li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Creating an OpenShift Online account">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec09" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">In this recipe, you learned <a id="id30" class="calibre1"/>how to create an OpenShift Online account. From a user's perspective, OpenShift Online is the easiest way to get started with OpenShift because you do not have to deploy and manage your own OpenShift installation.</p><p class="calibre6">When you sign up for OpenShift Online, you will be associated with a free plan. At the time of writing this, Red Hat gives every user three free gears on which to run their applications. A gear provides a resource-constrained container to run one or more cartridges. A cartridge provides the actual functionality required to run the application. OpenShift Online currently supports many cartridges such as JBoss, Tomcat, PHP, Ruby, Python, MongoDB, MySQL, and so on. Gear provides RAM and disk space to a cartridge. At the time of writing this book, each gear is 512 MB of RAM and 1 GB of disk space. A user can upgrade to the Bronze or Silver plan to get access to more and bigger resources. You can refer to<a id="id31" class="calibre1"/> the pricing web page<a id="id32" class="calibre1"/> at <a class="calibre1" href="https://www.openshift.com/products/pricing%20for%20up%20to%20date%20information">https://www.openshift.com/products/pricing for up to date information</a>.</p></div></div>

<div class="book" title="Creating an OpenShift Online account">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec10" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Creating OpenShift domains using the web console</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Creating a WordPress application using the web console</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating OpenShift domains using the web console"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Creating OpenShift domains using the web console</h1></div></div></div><p class="calibre6">After creating the OpenShift Online <a id="id33" class="calibre1"/>account, the first step is to<a id="id34" class="calibre1"/> create a domain. A domain or namespace is a logical container for applications. It forms parts of an application URL and is unique to an account. In this recipe, you will learn how to create a domain using the web console.</p></div>

<div class="book" title="Creating OpenShift domains using the web console">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec11" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">Open the OpenShift Online login page<a id="id35" class="calibre1"/> at <a class="calibre1" href="https://openshift.redhat.com/app/login">https://openshift.redhat.com/app/login</a> in your favorite web browser and then sign in using your OpenShift Online credentials.</p></div></div>

<div class="book" title="Creating OpenShift domains using the web console">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec12" class="calibre1"/>How to do it…</h2></div></div></div><div class="book"><ol class="orderedlist"><li class="listitem" value="1">To create a domain or namespace, go to the<a id="id36" class="calibre1"/> account settings web page at <a class="calibre1" href="https://openshift.redhat.com/app/console/settings">https://openshift.redhat.com/app/console/settings</a> and enter a unique name. A domain or namespace should be unique across all the users. This means that you can't use <code class="email">osbook</code> as a domain name because the OpenShift account associated with this book uses <code class="email">osbook</code>. <p class="calibre14">Click on the <span class="strong"><strong class="calibre7">Save</strong></span> button to create a new domain, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00004.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="2">After the domain is created, you will see a message, <span class="strong"><strong class="calibre7">The domain 'osbook' has been created</strong></span>, on your screen. Instead of <code class="email">osbook</code>, the message would refer to your domain name.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Creating OpenShift domains using the web console">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec13" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">OpenShift requires<a id="id37" class="calibre1"/> you to have a domain before it can<a id="id38" class="calibre1"/> allow you to create applications. A domain represents a logical container for the applications under an OpenShift account. All the OpenShift applications must belong to a domain. It is unique across all OpenShift users and is a part of the application URL. For example, if your application name is <code class="email">myapp</code> and your domain name is <code class="email">osbook</code>, then your application URL will be <code class="email">http://myapp-osbook.rhcloud.com</code>. A domain can contain as many as 16 alphanumeric characters and cannot have spaces or symbols. It is also sometimes called a namespace.</p><p class="calibre6">A user can join domains created by other OpenShift users. This allows users to work as a team. Depending on the OpenShift plan or configuration, a user will able to create more than one domain. The free plan does not allow a user to create more than one domain name, but you can still join other domains. We will discuss domains in detail in <a class="calibre1" title="Chapter 2. Managing Domains" href="part0029_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre10">Managing Domains</em></span>.</p><p class="calibre6">You can see the created domains listed on the application settings web page<a id="id39" class="calibre1"/> at <a class="calibre1" href="https://openshift.redhat.com/app/console/settings">https://openshift.redhat.com/app/console/settings</a>. This can be seen in the following screenshot:</p><div class="mediaobject"><img src="../images/00005.jpeg" alt="How it works…" class="calibre8"/></div><p class="calibre9"> </p></div></div>

<div class="book" title="Creating OpenShift domains using the web console">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec14" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">In this recipe, you learned<a id="id40" class="calibre1"/> how to create a domain using the web <a id="id41" class="calibre1"/>console. You can view the details of a domain by clicking on the domain name web link. The following screenshot shows the domain details:</p><div class="mediaobject"><img src="../images/00006.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p><p class="calibre6">In the preceding screenshot, you can see that there are no applications associated with this domain. As per the free plan configuration, you can only use small gears. If you uncheck the <span class="strong"><strong class="calibre7">Allow small gears</strong></span> checkbox, then you will not be able to create any applications. You can also invite other users to join your domain by clicking on the <span class="strong"><strong class="calibre7">Add members…</strong></span> web link. Team collaboration will be covered in detail in <a class="calibre1" title="Chapter 2. Managing Domains" href="part0029_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre10">Managing Domains</em></span>. You can also delete a domain by clicking on the <span class="strong"><strong class="calibre7">Delete this domain…</strong></span> button.</p></div></div>

<div class="book" title="Creating OpenShift domains using the web console">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec15" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Creating a domain using rhc</em></span> recipe in <a class="calibre1" title="Chapter 2. Managing Domains" href="part0029_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre10">Managing Domains</em></span></li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing domain details using rhc</em></span> recipe in <a class="calibre1" title="Chapter 2. Managing Domains" href="part0029_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre10">Managing Domains</em></span></li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an editor member to a domain using rhc</em></span> recipe in <a class="calibre1" title="Chapter 2. Managing Domains" href="part0029_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre10">Managing Domains</em></span></li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating a WordPress application using the web console"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Creating a WordPress application using the web console</h1></div></div></div><p class="calibre6">In this recipe, you will <a id="id42" class="calibre1"/>create your first OpenShift <a id="id43" class="calibre1"/>application using the web console. The web console, as mentioned in the <span class="strong"><em class="calibre10">Introduction</em></span> section, is a web interface to OpenShift that developers can use to quickly create and manage applications. You will use the OpenShift WordPress quickstart in order to create a fully configured application. If you do not have a blog, now is the time to have your own personal blog for free.</p></div>

<div class="book" title="Creating a WordPress application using the web console">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec16" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">Open the login web page at <a class="calibre1" href="https://openshift.redhat.com/app/login">https://openshift.redhat.com/app/login</a> in your favorite web browser and log in using your OpenShift credentials.</p></div></div>

<div class="book" title="Creating a WordPress application using the web console">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec17" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Follow these steps to create a WordPress application using the web console:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Go to the applications web page<a id="id44" class="calibre1"/> at <a class="calibre1" href="https://openshift.redhat.com/app/console/applications">https://openshift.redhat.com/app/console/applications</a> and click on the <span class="strong"><strong class="calibre7">Create your first application now</strong></span> web link.</li><li class="listitem" value="2">Under the <span class="strong"><strong class="calibre7">Instant App</strong></span> section, click on the <span class="strong"><strong class="calibre7">WordPress 3.9</strong></span> instant app. At the time of writing this book, the WordPress version is 3.9, as shown in the following screenshot:<div class="mediaobject"><img src="../images/00007.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="3">Enter a name for the <a id="id45" class="calibre1"/>blog and <a id="id46" class="calibre1"/>click on the <span class="strong"><strong class="calibre7">Create Application</strong></span> button. I have used <code class="email">blog</code> as the name of the WordPress application, as shown in the following screenshot:<div class="mediaobject"><img src="../images/00008.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="4">After the <a id="id47" class="calibre1"/>application is <a id="id48" class="calibre1"/>created, you will be directed to a page that shows the MySQL connection details. You can view the newly created application details by clicking on <span class="strong"><strong class="calibre7">Continue to the application overview page</strong></span>.</li><li class="listitem" value="5">Your WordPress blog will now be running at <code class="email">http://blog-{domain-name}.rhcloud.com/</code>. Replace <code class="email">{domain-name}</code> with your OpenShift account domain name.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Creating a WordPress application using the web console">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec18" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">A quickstart<a id="id49" class="calibre1"/> is a<a id="id50" class="calibre1"/> preconfigured <a id="id51" class="calibre1"/>OpenShift application that provides a repeatable way to spin up an application with its source code and dependencies such as databases. You can view the list of actively maintained quickstarts<a id="id52" class="calibre1"/> at <a class="calibre1" href="https://www.openshift.com/quickstarts">https://www.openshift.com/quickstarts</a>. Note that the OpenShift team does not support these quickstarts. They are just to help you get your favorite project (mostly open source) running on OpenShift. In this recipe, you used WordPress quickstart to quickly scaffold a WordPress application. You selected the WordPress 3.x quickstart in the web console and gave it a name. An application name can contain 32 alphanumeric characters at most. The WordPress quickstart uses a public Git repository, which installs the WordPress application. It also defines the cartridges it will use. The WordPress quickstart uses the PHP 5.3 and MySQL 5.1 cartridges.</p><p class="calibre6">To create an application, click on the <span class="strong"><strong class="calibre7">Create Application</strong></span> button. This will create an application container for us, called a gear, and set up all the required SELinux policies and cgroups configuration. OpenShift will also set up a private Git repository using the quickstart public Git repository. It will install the MySQL database on the application gear. The quickstart source code references the MySQL database using the environment variables. You will learn about OpenShift application details in <a class="calibre1" title="Chapter 3. Creating and Managing Applications" href="part0041_split_000.html#page">Chapter 3</a>, <span class="strong"><em class="calibre10">Creating and Managing Applications</em></span>.</p><p class="calibre6">Finally, OpenShift will propagate the DNS to the outside world. The application will be accessible at <code class="email">http://blog-{domain-name}.rhcloud.com/</code>. Replace the <code class="email">{domain-name}</code> part with your own unique OpenShift domain name, sometimes called a namespace. Open the <code class="email">http://blog-{domain-name}.rhcloud.com/</code> link in your favorite browser and set up your WordPress installation. After the setup, you will have your own WordPress blog and you can start blogging.</p></div></div>

<div class="book" title="Creating a WordPress application using the web console">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec19" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">In this recipe, you learned how to create a WordPress application using the OpenShift web console. You can also view the application details by going to the <span class="strong"><strong class="calibre7">Applications</strong></span> tab and then clicking on the application, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00009.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p><p class="calibre6">In the preceding<a id="id53" class="calibre1"/> screenshot, you can<a id="id54" class="calibre1"/> see the state of the application, that is, <span class="strong"><strong class="calibre7">Started</strong></span>. You can restart the application by clicking on the restart button next to <span class="strong"><strong class="calibre7">Started</strong></span>. The application uses the PHP 5.3 and MySQL 5.1 cartridges. To view the database password, you can click on the <span class="strong"><strong class="calibre7">show</strong></span> web link. To add the phpMyAdmin 4.0 MySQL web client, click on the <span class="strong"><strong class="calibre7">Add phpMyAdmin 4.0</strong></span> web link. Next, click on the <span class="strong"><strong class="calibre7">Add Cartridge</strong></span> button to add the phpMyAdmin 4.0 cartridge.</p><p class="calibre6">The cartridge will be available at <code class="email">https://blog-{domain-name}.rhcloud.com/phpmyadmin/</code>. The phpMyAdmin credentials are the same as the database credentials.</p></div></div>

<div class="book" title="Creating a WordPress application using the web console">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec20" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Cloning the application to the local machine</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Deploying your first change</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Uploading SSH keys using the web console"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec12" class="calibre1"/>Uploading SSH keys using the web console</h1></div></div></div><p class="calibre6">
<span class="strong"><strong class="calibre7">Secure Shell</strong></span> (<span class="strong"><strong class="calibre7">SSH</strong></span>) is<a id="id55" class="calibre1"/> a network <a id="id56" class="calibre1"/>protocol that guarantees robust<a id="id57" class="calibre1"/> authentication, data encryption, and data integrity between two networked machines that connect over an insecure network. It uses the client-server architecture and transparently encrypts the data between the client and server. SSH clients communicate with SSH servers over encrypted network connections. There are plenty of free and commercial products available that implement the SSH protocol. SSH has various authentication mechanisms where OpenShift uses the public-private key pair authentication mechanism. Other SSH authentication methods such as password authentication and host-based authentication are beyond the scope of this book.</p><p class="calibre6">In this recipe, you will learn how to create a public-private key pair and upload the public key to your OpenShift account. OpenShift uses SSH for the following purposes:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Providing a secure and encrypted connection between your machine and application gear</li><li class="listitem">Allowing remote access to your application gear</li><li class="listitem">Working with your application Git repository and deploying code to OpenShift</li><li class="listitem">Port forwarding, which allows users to connect to OpenShift services such as databases from their own machines</li></ul></div></div>

<div class="book" title="Uploading SSH keys using the web console">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec21" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this <a id="id58" class="calibre1"/>recipe, you will need the OpenSSH SSH<a id="id59" class="calibre1"/> connectivity tools installed on your machine. These are very common as they come bundled with most Linux installations, Macintosh OS X, and almost all Unix-inspired operating systems. Microsoft Windows also has plenty of free and commercial SSH clients as mentioned at <a class="calibre1" href="http://www.openssh.com/windows.html">http://www.openssh.com/windows.html</a>. Also, if you use PuTTy on your Windows machine, then you can refer to the official documentation at <a class="calibre1" href="https://www.openshift.com/developers/install-and-setup-putty-ssh-client-for-windows">https://www.openshift.com/developers/install-and-setup-putty-ssh-client-for-windows</a>.</p><p class="calibre6">To verify that the OpenSSH client tool is installed, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh -V</strong></span>
<span class="strong"><strong class="calibre7">OpenSSH_6.2p2, OpenSSL 1.0.1e-fips 11 Feb 2013</strong></span>
</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note04" class="calibre1"/>Note</h3><p class="calibre6">The output of the preceding command will depend on your operating system and the OpenSSH version installed on your machine. If you get <code class="email">ssh: command not found</code>, then the tools are not installed on your machine.</p><p class="calibre6">This recipe will use the WordPress application created in the preceding recipe.</p></div></div></div>

<div class="book" title="Uploading SSH keys using the web console">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec22" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Perform the following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Run the <code class="email">ssh-keygen</code> command to generate a new pair of SSH keys. The <code class="email">ssh-keygen</code> command is one of the SSH tools installed by OpenSSH. This command will generate a key pair in the <code class="email">.ssh</code> folder under the user's home directory:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh-keygen -t rsa -b 2048 -C 'SSH keys to connect with OpenShift'</strong></span>
</pre></div></li><li class="listitem" value="2">Go to the <span class="strong"><strong class="calibre7">Settings</strong></span> web page at <a class="calibre1" href="https://openshift.redhat.com/app/console/settings">https://openshift.redhat.com/app/console/settings</a> and paste the content of<a id="id60" class="calibre1"/> the public key. The public <a id="id61" class="calibre1"/>key is the key with the <code class="email">.pub</code> extension. After pasting the public key content, click on the <span class="strong"><strong class="calibre7">save</strong></span> button.</li><li class="listitem" value="3">Go to the <span class="strong"><strong class="calibre7">Applications</strong></span> web page at <a class="calibre1" href="https://openshift.redhat.com/app/console/applications">https://openshift.redhat.com/app/console/applications</a> and click on the application for its details, as shown in the following screenshot:<div class="mediaobject"><img src="../images/00010.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="4">Next, view the application SSH details by clicking on <span class="strong"><strong class="calibre7">Want to log in to your application?</strong></span>, as shown in the following screenshot:<p class="calibre14"> </p><div class="mediaobject"><img src="../images/00011.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p><p class="calibre14">
</p></li><li class="listitem" value="5">Copy the<a id="id62" class="calibre1"/> application SSH information <a id="id63" class="calibre1"/>shown in the following screenshot:<div class="mediaobject"><img src="../images/00012.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="6">Open a new command-line terminal on your local machine and run the following command. Here, you will list the directories in the application's gear home folder. Replace the SSH information with your application SSH information.<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
<span class="strong"><strong class="calibre7">app-deployments</strong></span>
<span class="strong"><strong class="calibre7">app-root</strong></span>
<span class="strong"><strong class="calibre7">git</strong></span>
<span class="strong"><strong class="calibre7">mysql</strong></span>
<span class="strong"><strong class="calibre7">php</strong></span>
<span class="strong"><strong class="calibre7">phpmyadmin</strong></span>
</pre></div></li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Uploading SSH keys using the web console">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec23" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">First, let's try to understand what you did in the preceding section. In the first step, you created a new pair of SSH keys. The <code class="email">ssh-keygen</code> utility can take a number of options. Three of the many options used are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The <code class="email">-t</code> option<a id="id64" class="calibre1"/> is<a id="id65" class="calibre1"/> used to specify the type of<a id="id66" class="calibre1"/> the key. It can be either RSA or DSA, and in this case, the RSA key type is used. Note that OpenShift supports both the RSA and DSA key types.</li><li class="listitem">The <code class="email">-b</code> option<a id="id67" class="calibre1"/> is used to specify the number of bits in the key. For RSA keys, the minimum size is 768 bits and the default is 2048 bits. Generally, 2048 bits is considered sufficient.</li><li class="listitem">The <code class="email">-C</code> option<a id="id68" class="calibre1"/> is used to provide a comment, which can be useful to identify a key. This is appended to the public key.</li></ul></div><p class="calibre6">The <code class="email">ssh-keygen</code> command prompts the user with a few questions, as shown in the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh-keygen -t rsa -b 2048 -C 'SSH keys to connect with OpenShift'</strong></span>
<span class="strong"><strong class="calibre7">Generating public/private rsa key pair.</strong></span>
<span class="strong"><strong class="calibre7">Enter file in which to save the key (/home/vagrant/.ssh/id_rsa):</strong></span>
<span class="strong"><strong class="calibre7">Enter passphrase (empty for no passphrase):</strong></span>
<span class="strong"><strong class="calibre7">Enter same passphrase again:</strong></span>
<span class="strong"><strong class="calibre7">Your identification has been saved in /home/vagrant/.ssh/id_rsa.</strong></span>
<span class="strong"><strong class="calibre7">Your public key has been saved in /home/vagrant/.ssh/id_rsa.pub.</strong></span>
<span class="strong"><strong class="calibre7">The key fingerprint is:</strong></span>
<span class="strong"><strong class="calibre7">ad:59:8a:02:e6:94:35:92:a3:b9:94:93:c8:9a:30:47 SSH keys to connect with OpenShift</strong></span>
<span class="strong"><strong class="calibre7">The key's randomart image is:</strong></span>
<span class="strong"><strong class="calibre7">+--[ RSA 2048]----+</strong></span>
<span class="strong"><strong class="calibre7">|                 |</strong></span>
<span class="strong"><strong class="calibre7">|   .             |</strong></span>
<span class="strong"><strong class="calibre7">|  E o            |</strong></span>
<span class="strong"><strong class="calibre7">|o+o= .   .       |</strong></span>
<span class="strong"><strong class="calibre7">|***     S o      |</strong></span>
<span class="strong"><strong class="calibre7">|+O..   . =       |</strong></span>
<span class="strong"><strong class="calibre7">|+ . . . +        |</strong></span>
<span class="strong"><strong class="calibre7">|     .           |</strong></span>
<span class="strong"><strong class="calibre7">|                 |</strong></span>
<span class="strong"><strong class="calibre7">+-----------------+</strong></span>
</pre></div><p class="calibre6">Firstly, this command asks the user to provide the SSH key filename and its location. The default filename for RSA keys is <code class="email">id_rsa</code> for a private key and <code class="email">id_rsa.pub</code> for a public key. The default location to store these keys is the <code class="email">.ssh</code> folder under the user's <code class="email">home</code> directory.</p><p class="calibre6">Secondly, it asks the user to provide a passphrase. In order to not use a passphrase, just press <span class="strong"><em class="calibre10">Enter</em></span> twice. The passphrase is used to secure the private key. If you enter a passphrase, you will be prompted to enter the passphrase every time you perform any operation that requires SSH. In the next recipe, you will learn how to use a passphrase without entering it each time.</p><p class="calibre6">When you run any SSH client, such as <code class="email">ssh</code>, to connect with an SSH server, the client uses the private key to prove your identity to the server. The server uses the public key for authentication. If the authentication succeeds, then the connection proceeds. Otherwise, you will get an error message.</p><p class="calibre6">In the second step, you<a id="id69" class="calibre1"/> uploaded the public SSH key to the <a id="id70" class="calibre1"/>OpenShift account. OpenShift copies the public key into an authorization file on the application gear at <code class="email">~/.ssh/authorized_keys</code>. Thereafter, when an SSH client requests a connection to the application gear, the SSH server running on the application gear consults the <code class="email">authorized_keys</code> file to find the matching public key.</p><p class="calibre6">From step 3 to step 5, you learned how to find the SSH information for an application using the web console. In step 6, you tested the SSH connection by executing the <code class="email">ls</code> command on the application gear. The first time you connect to an SSH server, you will be asked whether you want to connect to the server. This is because the client does not know about the server. The SSH client consults the <code class="email">known_hosts</code> file at <code class="email">~/.ssh/known_hosts</code> for the server information. If there is no entry in <code class="email">~/.ssh/known_hosts</code>, then it will ask for confirmation, as shown in the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>

<span class="strong"><strong class="calibre7">The authenticity of host 'blog-osbook.rhcloud.com (54.221.64.115)' can't be established.</strong></span>
<span class="strong"><strong class="calibre7">RSA key fingerprint is cf:ee:77:cb:0e:fc:02:d7:72:7e:ae:80:c0:90:88:a7.</strong></span>
<span class="strong"><strong class="calibre7">Are you sure you want to continue connecting (yes/no)? yes</strong></span>

<span class="strong"><strong class="calibre7">Warning: Permanently added 'blog-osbook.rhcloud.com,54.221.64.115' (RSA) to the list of known hosts.</strong></span>

<span class="strong"><strong class="calibre7">app-deployments</strong></span>
<span class="strong"><strong class="calibre7">app-root</strong></span>
<span class="strong"><strong class="calibre7">git</strong></span>
<span class="strong"><strong class="calibre7">mysql</strong></span>
<span class="strong"><strong class="calibre7">php</strong></span>
<span class="strong"><strong class="calibre7">phpmyadmin</strong></span>
</pre></div><p class="calibre6">After you enter <code class="email">yes</code>, a new entry will be added to the <code class="email">known_hosts</code> file at <code class="email">~/.ssh/known_hosts</code>. The <code class="email">known_hosts</code> file at <code class="email">~/.ssh/known_hosts</code> acts as a database, and the client will check this file for the server entry on every subsequent request.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note05" class="calibre1"/>Note</h3><p class="calibre6">The OpenShift <code class="email">rhc</code> command-line client also offers various commands to work with SSH keys. Once you have installed the <code class="email">rhc</code> client, you can run the <code class="email">rhc sshkey</code> command to view all the supported actions.</p></div></div></div>

<div class="book" title="Uploading SSH keys using the web console">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec24" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can decide to use <a id="id71" class="calibre1"/>another name or location for the SSH <a id="id72" class="calibre1"/>key pair. You can create another SSH key using the <code class="email">ssh-keygen</code> utility. This time, name the key <code class="email">openshift_key</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh-keygen</strong></span>
<span class="strong"><strong class="calibre7">Generating public/private rsa key pair.</strong></span>
<span class="strong"><strong class="calibre7">Enter file in which to save the key (/home/vagrant/.ssh/id_rsa): /home/vagrant/.ssh/openshift_key</strong></span>
</pre></div><p class="calibre6">Go to the OpenShift account settings web page<a id="id73" class="calibre1"/> at <a class="calibre1" href="https://openshift.redhat.com/app/console/settings">https://openshift.redhat.com/app/console/settings</a> and delete the existing key, as shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00013.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p><p class="calibre6">Now, upload the <code class="email">openshift_key.pub</code> SSH key to your OpenShift account as discussed previously.</p><p class="calibre6">Run the <code class="email">ssh</code> command again. This<a id="id74" class="calibre1"/> time, you will get an error, as the SSH <a id="id75" class="calibre1"/>client used the default key to connect with the SSH server. The default key name is <code class="email">id_rsa</code>. Now, let's try to run the <code class="email">ls</code> command on the application gear to confirm whether we get the <code class="email">Permission denied</code> error:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
<span class="strong"><strong class="calibre7">Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</strong></span>
</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre6">To get debug information, you should use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">ssh -v 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
</pre></div><p class="calibre6">To get even more debug information, you should use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">ssh -v -v -v 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
</pre></div></div><p class="calibre6">The number of <code class="email">–v</code> options in the preceding command defines the verbosity.</p><p class="calibre6">To connect with the application gear, you have to connect using <code class="email">openshift_key</code>. To use a different key, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh -i /home/vagrant/.ssh/openshift_key 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
</pre></div><p class="calibre6">The <code class="email">-i</code> option is used to tell the SSH client to pick a different SSH key.</p></div></div>

<div class="book" title="Uploading SSH keys using the web console">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec25" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Working with the SSH key passphrases</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Working with the SSH key passphrases"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec13" class="calibre1"/>Working with the SSH key passphrases</h1></div></div></div><p class="calibre6">In the <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe, you learned how to create a new SSH key pair and upload it to an <a id="id76" class="calibre1"/>OpenShift account. The SSH key pair was created with an empty passphrase. The passphrase is a password to protect the private key. The empty passphrase avoids reentering a passphrase every time you use the key, but it might cause some security concerns. This recipe will walk you through the process of securing your SSH keys while avoiding having to re-enter the passphrase every time you use the key.</p></div>

<div class="book" title="Working with the SSH key passphrases">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec26" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To step through this recipe, you will need the OpenSSH SSH connectivity tools installed on your machine.</p><p class="calibre6">To make sure that the OpenSSH client tool is installed, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh -V</strong></span>
<span class="strong"><strong class="calibre7">OpenSSH_6.2p2, OpenSSL 1.0.1e-fips 11 Feb 2013</strong></span>
</pre></div><p class="calibre6">The output of the preceding command will depend on the operating system and OpenSSH version installed on your machine. If you get <code class="email">ssh: command not found</code>, then the OpenSSH tools are not installed on your machine.</p><p class="calibre6">This recipe will use the WordPress application created in the <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe.</p></div></div>

<div class="book" title="Working with the SSH key passphrases">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec27" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Perform the following steps to use SSH key passphrases:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Passphrases can be added during key creation time or to an existing key without regenerating a new key pair. As you have already created the key pair in the <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe, we will reuse this key pair. You will use <code class="email">ssh-keygen</code> to add a key pair to the existing key:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh-keygen -p</strong></span>
<span class="strong"><strong class="calibre7">Enter file in which the key is (/home/vagrant/.ssh/id_rsa):</strong></span>
<span class="strong"><strong class="calibre7">Key has comment '/home/vagrant/.ssh/id_rsa'</strong></span>
<span class="strong"><strong class="calibre7">Enter new passphrase (empty for no passphrase): &lt;Enter passphrase&gt;</strong></span>
<span class="strong"><strong class="calibre7">Enter same passphrase again: &lt;Enter passphrase again&gt;</strong></span>
<span class="strong"><strong class="calibre7">Your identification has been saved with the new passphrase.</strong></span>
</pre></div></li><li class="listitem" value="2">Now, if you try to SSH into the application gear, you will be asked to enter the passphrase.</li><li class="listitem" value="3">Next, run the <code class="email">ssh-agent</code> command. The <code class="email">ssh-agent</code> command, which is a part of the OpenSSH toolbelt, is another tool that stores your passphrase securely so that you do not have to re-enter the passphrase. You can run the <code class="email">ssh-agent</code> command by typing the following:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh-agent $SHELL</strong></span>
</pre></div></li><li class="listitem" value="4">To add the passphrase, run the <code class="email">ssh-add</code> utility:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh-add</strong></span>
<span class="strong"><strong class="calibre7">Enter passphrase for /home/vagrant/.ssh/id_rsa: &lt;Enter passphrase&gt;</strong></span>
<span class="strong"><strong class="calibre7">Identity added: /home/vagrant/.ssh/id_rsa (/home/vagrant/.ssh/id_rsa)</strong></span>
</pre></div></li><li class="listitem" value="5">Connect to the application gear to see the SSH agent in action. You will notice that you are not asked to enter the passphrase:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
<span class="strong"><strong class="calibre7">app-deployments</strong></span>
<span class="strong"><strong class="calibre7">app-root</strong></span>
<span class="strong"><strong class="calibre7">git</strong></span>
<span class="strong"><strong class="calibre7">mysql</strong></span>
<span class="strong"><strong class="calibre7">php</strong></span>
<span class="strong"><strong class="calibre7">phpmyadmin</strong></span>
</pre></div></li><li class="listitem" value="6">Exit the shell to end the <code class="email">ssh-agent</code> session. If you try to connect with the application gear now, you will be asked to enter the passphrase:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
<span class="strong"><strong class="calibre7">Enter passphrase for key '/home/vagrant/.ssh/id_rsa':</strong></span>
</pre></div></li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Working with the SSH key passphrases">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec28" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The <code class="email">ssh-agent</code> utility<a id="id77" class="calibre1"/> stores the <a id="id78" class="calibre1"/>SSH keys in memory. It caches the private keys and responds to the authentication queries from SSH clients. The <code class="email">ssh-add</code> utility is used to add and remove keys from <code class="email">ssh-agent</code>. In step 1, you added the passphrase to your existing key. By default, it will use the default key, <code class="email">id_rsa</code>, in the <code class="email">.ssh</code> folder, but you can provide another SSH key file using the <code class="email">-i</code> option. Now, SSH into the application gear and you will be asked to enter the passphrase:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52b823b34382ec52670003f6@blog-osbook.rhcloud.com ls</strong></span>
<span class="strong"><strong class="calibre7">Enter passphrase for key '/home/vagrant/.ssh/id_rsa':</strong></span>
</pre></div><p class="calibre6">Step 2 starts the agent by forking the existing shell. It sets some environment variables required by the SSH agent. Next, in step 3, you add the SSH key into the agent. It asks for the passphrase to decrypt the private key. After decryption, it adds the private key to the agent's cache.</p><p class="calibre6">Finally, in step 4, you connect to the application gear using the <code class="email">ssh</code> client. This time you will not be asked to enter the passphrase as the agent already cached the private key.</p><p class="calibre6">You can terminate the agent <a id="id79" class="calibre1"/>or log out from the shell to end the session.</p></div></div>

<div class="book" title="Working with the SSH key passphrases">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec29" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Cloning the application to the local machine"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec14" class="calibre1"/>Cloning the application to the local machine</h1></div></div></div><p class="calibre6">Every OpenShift application has a<a id="id80" class="calibre1"/> private Git repository that houses the application<a id="id81" class="calibre1"/> source code. OpenShift uses Git not only as a version control system but also to build and deploy the application using Git's action hooks. In this recipe, you will learn how to get the source code of the OpenShift application on your local machine.</p></div>

<div class="book" title="Cloning the application to the local machine">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec30" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">You will need Git installed on the operating system before stepping through this recipe. For Debian-based Linux distributions, you can install Git with <code class="email">apt-get install git</code> as the root. If you are on Fedora or any other Red Hat-based system, you can install Git with <code class="email">yum install git-core</code> as the root. Mac and Windows users can download the Git package from the official download site at <a class="calibre1" href="http://git-scm.com/downloads">http://git-scm.com/downloads</a>.</p><p class="calibre6">This recipe will use the WordPress application created in the <span class="strong"><em class="calibre10">Creating a WordPress application using the web console</em></span> recipe.</p></div></div>

<div class="book" title="Cloning the application to the local machine">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec31" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Perform the following steps to clone the repository:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Go to the <span class="strong"><strong class="calibre7">Applications</strong></span> tab in the web console at <a class="calibre1" href="https://openshift.redhat.com/app/console/applications">https://openshift.redhat.com/app/console/applications</a> and click on the application to view its details, as shown in the following screenshot:<div class="mediaobject"><img src="../images/00014.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="2">Copy the Git<a id="id82" class="calibre1"/> repository URL mentioned on the<a id="id83" class="calibre1"/> application detail web page, as shown in the following screenshot:<div class="mediaobject"><img src="../images/00015.jpeg" alt="How to do it…" class="calibre8"/></div><p class="calibre12"> </p></li><li class="listitem" value="3">Open a command-line terminal, go to a convenient location on your machine, and execute the <code class="email">git clone</code> command. Replace the repository URL with your application Git URL:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ git clone ssh://52b823b34382ec52670003f6@blog-osbook.rhcloud.com/~/git/blog.git/</strong></span>
</pre></div></li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Cloning the application to the local machine">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec32" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The first and second steps helped us to locate the application Git repository URL. As discussed in the preceding section, OpenShift uses Git as revision control and a source code management system. Every application has a private Git repository. A Git repository contains all the information needed to retain and manage the revisions and history of a project. OpenShift uses the SSH transport protocol to work with Git repositories. To create a secure communication channel between the local machine and application gear, Git uses the SSH key setup discussed in the <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe. Nobody will be able to clone your application repository unless you add their public SSH key to your account.</p><p class="calibre6">In step 3, you cloned<a id="id84" class="calibre1"/> the application Git repository <a id="id85" class="calibre1"/>using<a id="id86" class="calibre1"/> the <code class="email">clone</code> command. The <code class="email">git clone</code> command<a id="id87" class="calibre1"/> created a new Git repository based on the original application repository URL. The difference between Git and other version control systems is that Git clones the full copy of the repository, in addition to the working copy, of all the files in the repository. The <code class="email">clone</code> command will create a new directory on your local filesystem with the same name as the application.</p></div></div>

<div class="book" title="Cloning the application to the local machine">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec33" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also specify a different folder name with the <code class="email">git clone</code> command. Suppose you want to clone the application in the <code class="email">myapp</code> folder. To do this, execute the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ git clone ssh://52b823b34382ec52670003f6@blog-osbook.rhcloud.com/~/git/blog.git/ myapp</strong></span>
</pre></div><p class="calibre6">If you want to allow any of your friends or team members to clone your repository, just add their public key to your account. Follow the <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe to upload the public SSH key. We will discuss team collaboration in detail in <a class="calibre1" title="Chapter 2. Managing Domains" href="part0029_split_000.html#page">Chapter 2</a>, <span class="strong"><em class="calibre10">Managing Domains</em></span>.</p></div></div>

<div class="book" title="Cloning the application to the local machine">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec34" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Deploying your first change</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Deploying your first change"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec15" class="calibre1"/>Deploying your first change</h1></div></div></div><p class="calibre6">In the <span class="strong"><em class="calibre10">Cloning the application to the local machine</em></span> recipe, you learned how to clone an OpenShift application Git<a id="id88" class="calibre1"/> repository using the <code class="email">git clone</code> command. The next logical step after cloning the repository is to make a change, commit it, and finally deploy it. In this recipe, you will learn how to deploy the source code changes to OpenShift applications.</p></div>

<div class="book" title="Deploying your first change">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec35" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To step through this recipe, you will need Git installed on your local machine.</p></div></div>

<div class="book" title="Deploying your first change">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec36" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Perform the following steps to deploy your first change:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Go to the OpenShift web console and navigate to the PHP 5.4 application creation page at <a class="calibre1" href="https://openshift.redhat.com/app/console/application_type/cart!php-5.4">https://openshift.redhat.com/app/console/application_type/cart!php-5.4</a>.</li><li class="listitem" value="2">Enter the name of the application. I have used <code class="email">myapp</code> as the application name.</li><li class="listitem" value="3">Click on the <a id="id89" class="calibre1"/><span class="strong"><strong class="calibre7">Create Application</strong></span> button to create a new application.</li><li class="listitem" value="4">Clone the application's Git repository on your local machine by following the steps mentioned in the <span class="strong"><em class="calibre10">Cloning the application to the local machine</em></span> recipe.</li><li class="listitem" value="5">Open the <code class="email">index.php</code> file inside the application source code root directory. Go to the following line of code in <code class="email">index.php</code>:<div class="informalexample"><pre class="programlisting">&lt;h1&gt;Welcome to your PHP application on OpenShift&lt;/h1&gt;</pre></div><p class="calibre14">Replace the preceding line of code with this:</p><div class="informalexample"><pre class="programlisting">&lt;h1&gt;Updated the application&lt;/h1&gt;</pre></div></li><li class="listitem" value="6">Commit the change to the local repository using Git:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ git commit -am 'modified index.php'</strong></span>
</pre></div></li><li class="listitem" value="7">Push the changes to the remote repository hosted on the OpenShift application gear using the following Git command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ git push origin master</strong></span>
</pre></div></li><li class="listitem" value="8">After <code class="email">git push</code> successfully completes, open the <code class="email">http://myapp-{domain-name}.rhcloud.com/</code> application in your favorite browser. You will see your first change.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Deploying your first change">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec37" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The OpenShift deployment process is based around Git. From step 1 to step 4, you created a PHP 5.4 application using the web console and cloned the application on your local machine. In step 5, you made a simple change to the <code class="email">index.php</code> file. This change has not yet been committed to the local repository. Git, being a distributed version control system, has a concept of local and remote repositories. You can continue working (making changes and committing them) on your local machine as long as you want, and when you are ready, you can push the changes to the remote Git repository.</p><p class="calibre6">In step 6, you committed the change to your local Git repository using the <code class="email">git commit</code> command. You used the <code class="email">-a</code> and <code class="email">-m</code> options. The <code class="email">-a</code> option tells the <code class="email">git</code> command to automatically stage the modified and deleted files, but new files are not touched. To commit a new file, you have to first stage the file using the <code class="email">git add</code> command and then commit it:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ git add test.html</strong></span>
<span class="strong"><strong class="calibre7">$ git commit -m 'new html file'</strong></span>
</pre></div><p class="calibre6">Step 7 pushes the<a id="id90" class="calibre1"/> local commits to a remote repository. When you clone a repository, the cloned repository maintains a link back to its parent repository via a remote called <code class="email">origin</code>. A remote is a handle or reference to another Git repository. The remote information is stored in a configuration file called <code class="email">config</code> under the <code class="email">.git</code> folder. You can open the <code class="email">.git/config</code> file and view the <code class="email">origin</code> remote information as follows:</p><div class="informalexample"><pre class="programlisting">[remote 'origin']
  url = ssh://52bbf209e0b8cd707000018a@myapp-osbook.rhcloud.com/~/git/blog.git/
  fetch = +refs/heads/*:refs/remotes/origin/*</pre></div><p class="calibre6">As shown in the preceding code, a remote consists of two different parts. The <code class="email">url</code> part is the name of the remote repository in the form of a URL. The <code class="email">fetch</code> part specifies how a reference should be mapped from the namespace of one repository into that of another.</p><p class="calibre6">The output of the <code class="email">git push</code> command is as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ git push origin master</strong></span>
<span class="strong"><strong class="calibre7">Counting objects: 7, done.</strong></span>
<span class="strong"><strong class="calibre7">Compressing objects: 100% (4/4), done.</strong></span>
<span class="strong"><strong class="calibre7">Writing objects: 100% (4/4), 404 bytes | 0 bytes/s, done.</strong></span>
<span class="strong"><strong class="calibre7">Total 4 (delta 3), reused 0 (delta 0)</strong></span>
<span class="strong"><strong class="calibre7">remote: Stopping PHP cartridge</strong></span>
<span class="strong"><strong class="calibre7">remote: Waiting for stop to finish</strong></span>
<span class="strong"><strong class="calibre7">remote: Stopping MySQL cartridge</strong></span>
<span class="strong"><strong class="calibre7">remote: Stopping PHPMyAdmin cartridge</strong></span>
<span class="strong"><strong class="calibre7">remote: Waiting for stop to finish</strong></span>
<span class="strong"><strong class="calibre7">remote: Building git ref 'master', commit 3933f99</strong></span>
<span class="strong"><strong class="calibre7">remote: Building PHP cartridge</strong></span>
<span class="strong"><strong class="calibre7">remote: Preparing build for deployment</strong></span>
<span class="strong"><strong class="calibre7">remote: Deployment id is b78e5efd</strong></span>
<span class="strong"><strong class="calibre7">remote: Activating deployment</strong></span>
<span class="strong"><strong class="calibre7">remote: Starting MySQL cartridge</strong></span>
<span class="strong"><strong class="calibre7">remote: Starting PHPMyAdmin cartridge</strong></span>
<span class="strong"><strong class="calibre7">remote: Database already configured.</strong></span>
<span class="strong"><strong class="calibre7">remote: Starting PHP cartridge</strong></span>
<span class="strong"><strong class="calibre7">remote: Result: success</strong></span>
<span class="strong"><strong class="calibre7">remote: Activation status: success</strong></span>
<span class="strong"><strong class="calibre7">remote: Deployment completed with status: success</strong></span>
<span class="strong"><strong class="calibre7">To ssh://52bbf209e0b8cd707000018a@blog-osbook.rhcloud.com/~/git/blog.git/</strong></span>
<span class="strong"><strong class="calibre7">   e83c2a7..3933f99  master -&gt; master</strong></span>
</pre></div><p class="calibre6">This is how the process works:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Git takes <a id="id91" class="calibre1"/>the <code class="email">master</code> branch changes, compresses them, and transfers all the missing objects from your local repository to the remote repository named <code class="email">origin</code>.</li><li class="listitem" value="2">Next, a pre-receive action hook is invoked on the application gear. Git hooks are custom scripts, which Git will run at specific events like <code class="email">push</code>. You can write scripts in bash, Perl, Python, Ruby, or whatever you have. The pre-receive hook receives a list of all (new or old) the refs that are to be updated. The pre-receive action hook in the application gear Git repository stops the PHP and other cartridges, checks the deployment integrity, and configures the deployment metadata.</li><li class="listitem" value="3">Lastly, the postreceive action hook is invoked on the application gear. It receives a list of all the updated refs. The postreceive action hook in the application gear Git repository archives the application repository, builds the application, starts the PHP and other cartridges, and then finally deploys the application.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Deploying your first change">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec38" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">Instead of using the <code class="email">git push origin master</code> command, you can also use <code class="email">git push</code>. The <code class="email">origin</code> part is the default remote and <code class="email">master</code> is the default branch, so they are not required.</p></div></div>

<div class="book" title="Deploying your first change">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec39" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Cloning the application to the local machine</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Checking the application's gear quota and limits"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec16" class="calibre1"/>Checking the application's gear quota and limits</h1></div></div></div><p class="calibre6">In this recipe, you will learn how to<a id="id92" class="calibre1"/> check the application resource limits.</p></div>

<div class="book" title="Checking the application's gear quota and limits">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec40" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To step through this recipe, you will need the OpenSSH SSH connectivity tools installed on your machine. This recipe will use the WordPress application created in the <span class="strong"><em class="calibre10">Creating a WordPress application using the web console</em></span> recipe.</p></div></div>

<div class="book" title="Checking the application's gear quota and limits">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec41" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To check the resources consumed by your application, run the following command. Here, you replace the SSH URL with your application SSH URL. To find the SSH URL of your application, refer to the <span class="strong"><em class="calibre10">Uploading SSH keys using the web console</em></span> recipe.</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52bbf209e0b8cd707000018a@blog-osbook.rhcloud.com quota -s</strong></span>
</pre></div></div></div>

<div class="book" title="Checking the application's gear quota and limits">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec42" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The OpenShift applications run inside gears that have limited resources. Every gear, depending on its size, has a definite amount of resources. The <code class="email">quota -s</code> command can be used to check the resources consumed by the application and the limits imposed on the gear.</p><p class="calibre6">The output of the <code class="email">quota -s</code> command is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">Disk quotas for user 52bbf209e0b8cd707000018a (uid 2187):</strong></span>
<span class="strong"><strong class="calibre7">     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace</strong></span>
<span class="strong"><strong class="calibre7">/dev/mapper/EBSStore01-user_home01</strong></span>
<span class="strong"><strong class="calibre7">                   124M       0   1024M            2898       0   80000</strong></span>
</pre></div><p class="calibre6">The first column is the name of the filesystem that has quota enabled for it. The second column shows how many blocks the user is currently using. The fourth column tells us the storage limit. Gears in free tier have access to 1 GB of disk storage. The sixth column tells us the number of files created by the application. The eighth column shows the maximum number of files a user can create. Gears can create a maximum of 80,000 files. The gears also have limited RAM memory. Small gears have 512 MB of RAM, medium gears have 1 GB of RAM, and large gears have 2 GB of RAM. The medium and large gears are only available in the <a id="id93" class="calibre1"/>Bronze and Silver commercial plans.</p></div></div>

<div class="book" title="Checking the application's gear quota and limits">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec43" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also view how much disk space your gear is using by running the <code class="email">***du***</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ssh 52bbf209e0b8cd707000018a@blog-osbook.rhcloud.com 'du -sh *'</strong></span>

<span class="strong"><strong class="calibre7">17M	app-deployments</strong></span>
</pre></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Installing the OpenShift rhc command-line client"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec17" class="calibre1"/>Installing the OpenShift rhc command-line client</h1></div></div></div><p class="calibre6">The <code class="email">rhc</code> client is <a id="id94" class="calibre1"/>the most powerful and feature-rich command-line<a id="id95" class="calibre1"/> client utility, which users can use to work with OpenShift. It is built using Ruby programming language and packaged as a Ruby gem. The <code class="email">rhc</code> source code<a id="id96" class="calibre1"/> is available on GitHub at <a class="calibre1" href="https://github.com/openshift/rhc">https://github.com/openshift/rhc</a>.</p></div>

<div class="book" title="Installing the OpenShift rhc command-line client">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec44" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To install <code class="email">rhc</code>, you will need to have Ruby 1.8.7 or above installed on your machine. You can check whether Ruby is installed on your machine by running the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ruby --version</strong></span>
<span class="strong"><strong class="calibre7">ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-linux]</strong></span>
</pre></div><p class="calibre6">The output of the preceding command will depend on the operating system and Ruby version installed on your machine. If you receive <code class="email">ruby: command not found</code>, then Ruby is not installed on your machine. Install Ruby<a id="id97" class="calibre1"/> on your operating system. You can download the package for your operating system from the official website at <a class="calibre1" href="https://www.ruby-lang.org/en/downloads/">https://www.ruby-lang.org/en/downloads/</a>.</p></div></div>

<div class="book" title="Installing the OpenShift rhc command-line client">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec45" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Open a new command-line terminal and run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ gem install rhc</strong></span>
</pre></div><p class="calibre6">This command will install the <code class="email">rhc</code> gem required to work with OpenShift.</p></div></div>

<div class="book" title="Installing the OpenShift rhc command-line client">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec46" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">OpenShift packages the <code class="email">rhc</code> command-line utility as a gem. A gem is a reusable piece of code or a command-line utility to help automate tasks. <code class="email">RubyGems</code> is a package manager for the Ruby programming language that provides a standard format for distributing Ruby programs and libraries. This software allows a developer to download, install, and use software packages on their machine. The <code class="email">gem</code> command allows you to work with <code class="email">RubyGems</code>.</p><p class="calibre6">When you run the <code class="email">gem install command</code>, the <code class="email">gem</code> command-line tool fetches the package and its dependencies from the central repository and installs them. The central gem repository is available at <a class="calibre1" href="http://rubygems.org">http://rubygems.org</a>.</p><p class="calibre6">After the command successfully finishes, you can check the version of <code class="email">rhc</code> using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc --version</strong></span>
<span class="strong"><strong class="calibre7">rhc 1.27.4</strong></span>
</pre></div></div></div>

<div class="book" title="Installing the OpenShift rhc command-line client">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec47" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">The <code class="email">gem install</code> command<a id="id98" class="calibre1"/> also generates the documentation for the installed packages. You can use the Ruby <code class="email">ri</code> command-line tool to view the documentation offline. For example, if you <a id="id99" class="calibre1"/>want to list all the classes for which <code class="email">ri</code> can show <a id="id100" class="calibre1"/>documentation, then run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ri --list</strong></span>
</pre></div><p class="calibre6">This command will list all the classes and their methods for which you can view the documentation. To view the documentation of the <code class="email">CLI</code> class method of the <code class="email">RHC</code> class, execute the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ ri RHC::CLI</strong></span>
</pre></div><p class="calibre6">The output will be the documentation for the <code class="email">CLI</code> method, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">= RHC::CLI</strong></span>
<span class="strong"><strong class="calibre7">(from gem rhc-1.27.4)</strong></span>
<span class="strong"><strong class="calibre7">------------------------------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Run and execute a command line session with the RHC tools.</strong></span>

<span class="strong"><strong class="calibre7">You can invoke the CLI with:</strong></span>
<span class="strong"><strong class="calibre7">  bundle exec ruby -e 'require 'rhc/cli'; RHC::CLI.start(ARGV);' -- &lt;arguments&gt;</strong></span>
</pre></div><p class="calibre6">You can disable the documentation generation by using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ gem install rhc --no-document</strong></span>
</pre></div></div></div>

<div class="book" title="Installing the OpenShift rhc command-line client">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec48" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Setting up an OpenShift account using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Updating rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Setting up an OpenShift account using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec18" class="calibre1"/>Setting up an OpenShift account using rhc</h1></div></div></div><p class="calibre6">In the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe, you learned how to install the <code class="email">rhc</code> command-line client. After installation, the first operation you have to perform is to set up the OpenShift account. In this recipe, you will learn how to set up your account using <code class="email">rhc</code>.</p></div>

<div class="book" title="Setting up an OpenShift account using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec49" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have <code class="email">rhc</code> installed on your machine. Refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe for instructions.</p></div></div>

<div class="book" title="Setting up an OpenShift account using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec50" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To set up an <a id="id101" class="calibre1"/>OpenShift account, open a command-line terminal and<a id="id102" class="calibre1"/> run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc setup</strong></span>
</pre></div></div></div>

<div class="book" title="Setting up an OpenShift account using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec51" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">Before you can use the <code class="email">rhc</code> client to work with OpenShift, you have to set up the account.</p><p class="calibre6">The <code class="email">setup</code> command does the following:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">It first asks you to provide your OpenShift credentials to authenticate with <a class="calibre1" href="http://openshift.redhat.com">openshift.redhat.com</a>.</li><li class="listitem" value="2">After successful authentication, <code class="email">rhc</code> asks whether it should create an authorization token. An authorization token allows you to access the OpenShift server without entering the password with every command. It stores the token in the <code class="email">.openshift</code> folder under the user's <code class="email">home</code> directory. By default, the token is valid for 30 days, which means that after this you have to authenticate it again.</li><li class="listitem" value="3">Next, the <code class="email">setup</code> command creates a file called <code class="email">express.conf</code> in the <code class="email">.openshift</code> folder under the user's <code class="email">home</code> directory. The <code class="email">express.conf</code> file stores the basic configuration required by <code class="email">rhc</code> such as the OpenShift server location, your OpenShift username, and whether or not to create and use authorization tokens.</li><li class="listitem" value="4">If no SSH key exists in the <code class="email">.ssh</code> folder at <code class="email">~/.ssh</code>, then the <code class="email">rhc</code> <code class="email">setup</code> command will generate a new key pair using the <code class="email">ssh-keygen</code> utility.</li><li class="listitem" value="5">After generating the new SSH key pair, <code class="email">rhc</code> will upload the public SSH key to the OpenShift server. OpenShift copies the public key into an authorization file on the application gear called <code class="email">authorized_keys</code> at <code class="email">~/.ssh/authorized_keys</code>. In the <span class="strong"><em class="calibre10">Uploading SSh keys using the web console</em></span> recipe, you uploaded the public SSH key using the web console. It will prompt you to provide the name of the key or use the default name generated by the <code class="email">setup</code> command.</li><li class="listitem" value="6">Next, <code class="email">rhc</code> checks if Git has been installed. The <code class="email">rhc setup</code> command will run a simple check against your local configuration and credentials to confirm that the configurations have been completed. It will also run a series of tests to check whether <code class="email">ssh</code> has been configured properly and whether your system can communicate with OpenShift servers.</li><li class="listitem" value="7">Finally, <code class="email">rhc</code> asks the user to create a domain if one is not already created. In the <span class="strong"><em class="calibre10">Creating OpenShift domains using the web console</em></span> recipe, you created the domain using<a id="id103" class="calibre1"/> the <a id="id104" class="calibre1"/>web console.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Setting up an OpenShift account using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec52" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can run the <code class="email">rhc</code> <code class="email">setup</code> command<a id="id105" class="calibre1"/> anytime while working with OpenShift. Every time you run the <code class="email">rhc</code> <code class="email">setup</code> command, it will use the configuration properties defined in the <code class="email">express.conf</code> file. If you want to generate a new, clean configuration, you can use the <code class="email">--clean</code> option. This will run the <code class="email">setup</code> command again, ignoring any saved configuration options stored in <code class="email">express.conf</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc setup --clean</strong></span>
</pre></div></div></div>

<div class="book" title="Setting up an OpenShift account using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec53" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Enabling the autocomplete feature in an rhc command-line client</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing the account details using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Specifying a different OpenShift server hostname</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Enabling the autocomplete feature in an rhc command-line client"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec19" class="calibre1"/>Enabling the autocomplete feature in an rhc command-line client</h1></div></div></div><p class="calibre6">The <code class="email">rhc</code> command-line utility <a id="id106" class="calibre1"/>supports autocompletion. This<a id="id107" class="calibre1"/> involves <code class="email">rhc</code> predicting a command that the user wants to type in without them actually typing it completely. This is very helpful for new users who do not know all the commands supported by <code class="email">rhc</code>. In this recipe, you will learn how to enable autocomplete for the <code class="email">rhc</code> command-line client.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note06" class="calibre1"/>Note</h3><p class="calibre6">The autocomplete feature does not work for Windows Terminal.</p></div></div>

<div class="book" title="Enabling the autocomplete feature in an rhc command-line client">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec54" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To step through this recipe, you will need to have <code class="email">rhc</code> installed on your machine. Refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe for instructions.</p></div></div>

<div class="book" title="Enabling the autocomplete feature in an rhc command-line client">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec55" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To enable <a id="id108" class="calibre1"/>autocompletion, perform the<a id="id109" class="calibre1"/> following steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Run the <code class="email">rhc setup</code> command again with the <code class="email">autocomplete</code> option:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc setup --autocomplete</strong></span>
</pre></div></li><li class="listitem" value="2">The previous step will generate a file named <code class="email">bash_autocomplete</code> in the <code class="email">.openshift</code> folder at <code class="email">~/.openshift</code>. To enable autocompletion, you have to add the <code class="email">~/.openshift/bash_autocomplete</code> line to the <code class="email">.bashrc</code> or <code class="email">.bash_profile</code> file present in your user's home directory. The <code class="email">.bashrhc</code> file on my Fedora box is as follows:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7"># .bashrc</strong></span>
<span class="strong"><strong class="calibre7">. ~/.openshift/bash_autocomplete</strong></span>
<span class="strong"><strong class="calibre7"># Source global definitions</strong></span>
<span class="strong"><strong class="calibre7">if [ -f /etc/bashrc ]; then</strong></span>
<span class="strong"><strong class="calibre7">. /etc/bashrc</strong></span>
<span class="strong"><strong class="calibre7">fi</strong></span>
<span class="strong"><strong class="calibre7"># User specific aliases and functions</strong></span>
</pre></div></li><li class="listitem" value="3">Note that on Mac OS X, you have to add <code class="email">~/.openshift/bash_autocomplete</code> to your <code class="email">~/.bash_profile</code>. On Mac OS X, the new Terminal windows and tabs are always considered login shells, so this is a necessary step for OS X users.</li><li class="listitem" value="4">Reload or restart the shell to allow these changes to take effect.</li></ol><div class="calibre13"/></div></div></div>

<div class="book" title="Enabling the autocomplete feature in an rhc command-line client">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec56" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">You should try to understand what you have done in the preceding section. In step 1, you ran the <code class="email">setup</code> command with the <code class="email">autocomplete</code> option. This generated a bash script called <code class="email">bash_autocomplete</code> in the <code class="email">.openshift</code> folder at <code class="email">~/.openshift</code>. This bash script defines a custom completion function called <code class="email">_rhc</code> for the <code class="email">rhc</code> command-line client. Bash will execute this function when the <code class="email">rhc</code> tab key is typed at the prompt and will display possible completions.</p><p class="calibre6">In step 2, you sourced the <code class="email">bash_autocomplete</code> file by adding <code class="email">~/.openshift/bash_autocomplete</code> to the <code class="email">.bashrc</code> script. This will make sure that the autocompletion functionality is available for each shell.</p><p class="calibre6">Finally, in step 3, you restarted the shell to load the <code class="email">_rhc</code> function. Now, if you type <code class="email">rhc</code> and then press the <span class="strong"><em class="calibre10">Tab</em></span> key, it will show you all the <code class="email">rhc</code> commands:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc</strong></span>
<span class="strong"><strong class="calibre7">account                   app-tidy                  deployment-list  member-list // removed all commands for brevity</strong></span>
</pre></div></div></div>

<div class="book" title="Enabling the autocomplete feature in an rhc command-line client">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec57" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">Most of the <code class="email">rhc</code> commands have options, which you can provide. To view all the options for a command, type in <code class="email">--</code> and press <span class="strong"><em class="calibre10">Tab</em></span>. For example, to view all the <code class="email">rhc setup</code> command options, type in <code class="email">rhc setup --</code> and press <span class="strong"><em class="calibre10">Tab</em></span>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc setup --</strong></span>
<span class="strong"><strong class="calibre7">--autocomplete     --clean            --create-token     --no-create-token  --server</strong></span>
</pre></div></div></div>

<div class="book" title="Enabling the autocomplete feature in an rhc command-line client">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec58" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Setting up an OpenShift account using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Viewing the account details using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec20" class="calibre1"/>Viewing the account details using rhc</h1></div></div></div><p class="calibre6">In this recipe, you will learn<a id="id110" class="calibre1"/> how to<a id="id111" class="calibre1"/> view your account details using <code class="email">rhc</code>.</p></div>

<div class="book" title="Viewing the account details using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec59" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have <code class="email">rhc</code> installed on your machine. Refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe for instructions.</p></div></div>

<div class="book" title="Viewing the account details using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec60" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To view the account details, run the <code class="email">rhc account</code> command as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc account</strong></span>
</pre></div><p class="calibre6">This is all you need to do to view the account details.</p></div></div>

<div class="book" title="Viewing the account details using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec61" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The <code class="email">rhc account</code> command<a id="id112" class="calibre1"/> shows details about the currently logged-in user. When you run the command, it makes a REST call to the OpenShift REST API using the authentication token generated during <code class="email">rhc setup</code>. The REST API returns a JSON response, which <code class="email">rhc</code> will render in a human-readable format:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc account</strong></span>
<span class="strong"><strong class="calibre7">Login openshift.cookbook@gmail.com on openshift.redhat.com</strong></span>
<span class="strong"><strong class="calibre7">----------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">  ID:                 52b8112ae0b8cdc308000018</strong></span>
<span class="strong"><strong class="calibre7">  Plan:               Free</strong></span>
<span class="strong"><strong class="calibre7">  Gears Used:         0</strong></span>
<span class="strong"><strong class="calibre7">  Gears Allowed:      3</strong></span>
<span class="strong"><strong class="calibre7">  Domains Allowed:    1</strong></span>
<span class="strong"><strong class="calibre7">  Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">  SSL Certificates:   no</strong></span>
</pre></div><p class="calibre6">The account details include whom you are logged in as, which OpenShift server you are connected to, your <a id="id113" class="calibre1"/>OpenShift user ID, the OpenShift plan you are <a id="id114" class="calibre1"/>using, the number of gears as well as the gear size used and allowed, the number of domains allowed, and whether you can use SSL certificates or not.</p><p class="calibre6">You can also view the account details in the web console by navigating to the account web page at <a class="calibre1" href="https://openshift.redhat.com/app/account">https://openshift.redhat.com/app/account</a>.</p></div></div>

<div class="book" title="Viewing the account details using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec62" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also view details of any of your other OpenShift accounts by passing the <code class="email">-l</code> or <code class="email">--rhlogin</code> option. The <code class="email">-l</code> or <code class="email">--rhlogin</code> option is a global option available with every command. When you use <code class="email">-l</code> or <code class="email">--rhlogin</code>, you force the <code class="email">rhc</code> client to use the user-specified login:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc account --rhlogin user@example.com</strong></span>
</pre></div><p class="calibre6">You can log out from your current session on the server by using the <code class="email">rhc account-logout</code> command. This ends the user's current session and deletes the authorization token files in the <code class="email">.openshift</code> folder at <code class="email">~/.openshift</code>:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc account-logout</strong></span>
</pre></div><p class="calibre6">You can also use <code class="email">rhc logout</code> as a short alternative to <code class="email">rhc account-logout</code>.</p></div></div>

<div class="book" title="Viewing the account details using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec63" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Setting up an OpenShift account using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Specifying a different OpenShift server hostname"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec21" class="calibre1"/>Specifying a different OpenShift server hostname</h1></div></div></div><p class="calibre6">This recipe talks about how you can<a id="id115" class="calibre1"/> configure a different OpenShift server hostname. By default, when you set up your OpenShift account using the <code class="email">rhc setup</code> command, <code class="email">rhc</code> is configured to work with the public OpenShift PaaS hosted at <a class="calibre1" href="http://openshift.redhat.com">openshift.redhat.com</a>. However, it is possible to use a different OpenShift installation, which can be either an OpenShift Enterprise or an OpenShift Origin installation.</p></div>

<div class="book" title="Specifying a different OpenShift server hostname">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec64" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To step through this recipe, you will need to have <code class="email">rhc</code> installed on your machine. Refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe for instructions.</p></div></div>

<div class="book" title="Specifying a different OpenShift server hostname">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec65" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Open a command-line terminal and run the following command to use a different OpenShift server hostname:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc setup --server &lt;My OpenShift Installation Hostname&gt;</strong></span>
</pre></div><p class="calibre6">Replace <code class="email">&lt;My OpenShift Installation Hostname&gt;</code> with the OpenShift server hostname.</p></div></div>

<div class="book" title="Specifying a different OpenShift server hostname">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec66" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The <code class="email">rhc setup</code> <a id="id116" class="calibre1"/>command <a id="id117" class="calibre1"/>takes an option, <code class="email">--server</code>, which allows a user to specify the server hostname. When you run the <code class="email">rhc setup</code> command with the new server location, the <code class="email">setup</code> command will perform all the actions required to configure your OpenShift account to work with the new server. The <code class="email">setup</code> command will overwrite the <code class="email">express.conf</code> file in <code class="email">~/.openshift</code> with the new server hostname. The <code class="email">rhc</code> client will get configured to work with the new OpenShift server.</p></div></div>

<div class="book" title="Specifying a different OpenShift server hostname">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec67" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also configure the server by directly editing the <code class="email">express.conf</code> file at <code class="email">~/.openshift/express.conf</code>. The <code class="email">libra_server</code> property is as follows:</p><div class="informalexample"><pre class="programlisting"># The OpenShift server to connect to
libra_server=openshift.redhat.com</pre></div><p class="calibre6">Change the preceding code to a new server hostname:</p><div class="informalexample"><pre class="programlisting"># The OpenShift server to connect to
libra_server=&lt;Your OpenShift Installation&gt;</pre></div></div></div>

<div class="book" title="Specifying a different OpenShift server hostname">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec68" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Setting up an OpenShift account using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing the account details using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Updating rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec22" class="calibre1"/>Updating rhc</h1></div></div></div><p class="calibre6">The OpenShift command-line tool, <code class="email">rhc</code>, is the<a id="id118" class="calibre1"/> most powerful and popular way to work with OpenShift. In this recipe, you will learn how to update <code class="email">rhc</code> to the latest version. OpenShift Online has a three-week release cycle, and most of the time, the <code class="email">rhc</code> client tool is also updated to either support a new feature or fix a bug. So, it always helps if you use the latest version of <code class="email">rhc</code>.</p></div>

<div class="book" title="Updating rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec69" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To be ready for this recipe, you will need an already installed <code class="email">rhc</code>. No other prerequisites are required.</p></div></div>

<div class="book" title="Updating rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec70" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To update the <code class="email">rhc</code> gem, run the <code class="email">gem update</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ gem update rhc</strong></span>
</pre></div><p class="calibre6">This is all you need to do to update the <code class="email">rhc</code> command line to the latest version.</p></div></div>

<div class="book" title="Updating rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec71" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">
<code class="email">rhc</code> is a Ruby gem and <code class="email">RubyGems</code> is a <a id="id119" class="calibre1"/>package manager like many other package managers. It uses a central repository, which hosts installable packages. When you run the <code class="email">gem update</code> command, this command-line tool fetches the latest packages from the central repository and installs them.</p></div></div>

<div class="book" title="Updating rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec72" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">When you start working with <code class="email">rhc</code>, you will soon have multiple versions of the <code class="email">rhc</code> gem installed on your machine. You can uninstall all the previous versions using the <code class="email">cleanup</code> command. This command will uninstall old versions of installed gems in the local repository:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ gem cleanup rhc</strong></span>
</pre></div></div></div>

<div class="book" title="Updating rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec73" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe</li></ul></div></div></div></body></html>