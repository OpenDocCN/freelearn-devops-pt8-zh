<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Preface</h1>
                </header>
            
            <article>
                
<p>Puppet 5 remains the software configuration management software of choice, especially for larger-scale configurations.</p>
<p>Here are some examples of current real-world use cases of Puppet:</p>
<ul>
<li>Twitter uses Puppet for what is currently one of the larger social networking infrastructures (<a href="https://blog.twitter.com/engineering/en_us/topics/infrastructure/2017/the-infrastructure-behind-twitter-scale.html">https://blog.twitter.com/engineering/en_us/topics/infrastructure/2017/the-infrastructure-behind-twitter-scale.html</a>). Facebook uses Opscode Chef, the competitive product in the software configuration management category.</li>
<li>Uber uses Puppet for its standard configuration management (<a href="https://eng.uber.com/uchat/">https://eng.uber.com/uchat/</a>).</li>
<li>Walmart is also a very large Puppet user (<a href="https://puppet.com/blog/how-walmart-scaled-puppet-55K-nodes-and-beyond">https://puppet.com/blog/how-walmart-scaled-puppet-55K-nodes-and-beyond</a>).</li>
</ul>
<p>Although there are newer products, such as Ansible and Salt, Puppet remains – I believe – the premier tool, especially for such larger infrastructures (10,000+ servers). It is worth mentioning that Ansible has also become very popular, possibly due to its shallower learning curve and adoption by Red Hat.</p>
<p>Dealing with this level of scale and complexity is non-trivial. With this book, <em>Mastering Puppet 5</em>, we want to put the know-how at your disposal to tackle your own large-scale challenges, at mastery level.</p>
<p>Version 5 of Puppet, which is the version covered by this book, was announced with considerable fanfare at last year's PuppetConf (2017) by the new CEO, Sanjay Mirchandani, as <q>"<em>Puppet's largest set of product innovations. Ever</em>."</q> In this book, we've gone through these new technologies, including Puppet Discovery, Puppet Tasks, and Puppet Pipelines, to give you the know-how you need to use Puppet 5 in the real world with confidence.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Who this book is for</h1>
                </header>
            
            <article>
                
<p>If you are a system administrator or developer who has already used Puppet and are looking for mastery-level skills and best practices with a view to using Puppet in an enterprise environment, at large scale, this book is for you. Some beginner-level knowledge of using Puppet would be necessary.</p>
<p class="mce-root"/>
<p>If you are looking for a gentle introduction to Puppet, before starting to use this book, please take a look at Puppet's own free self-paced training courses (<a href="https://learn.puppet.com/category/self-paced-training">https://learn.puppet.com/category/self-paced-training</a>) or attend some instructor-led or private training (<a href="https://puppet.com/support-services/training">https://puppet.com/support-services/training</a>).</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What this book covers</h1>
                </header>
            
            <article>
                
<p><a href="e7bbbeb3-e406-46ea-aad3-20f4af34d014.xhtml"/><a href="e7bbbeb3-e406-46ea-aad3-20f4af34d014.xhtml">Chapter 1</a>, <em>Authoring Modules</em><span>, <span class="TextRun SCXW40962989"><span class="NormalTextRun SCXW40962989">will really get you on the right path to higher quality Puppet modules and manifests, introducing 12 best practices for module writing.</span></span></span></p>
<p><a href="5c43e11c-c240-4623-afd3-8ded4b8c2cdf.xhtml">Chapter 2</a>, <em>Roles and Profiles</em><span>, introduces two<span class="TextRun SCXW169166053"><span class="NormalTextRun SCXW169166053"> additional </span></span><span class="TextRun SCXW169166053"><span class="NormalTextRun SCXW169166053">layers of abstraction and improved interfaces for making your hierarchical business data easier to integrate, making system configurations easier to read, and making refactoring easier.</span></span></span></p>
<p><a href="4f08c492-8dd1-4b7b-986b-bb6e1abd7bae.xhtml">Chapter 3</a>, <em>Extending Puppet</em><span>, covers three </span><span>parts of the ecosystem that can still be accessed at the Ruby level for the purposes of extending Puppet to suit more advanced use cases; namely, c</span><span>ustom facts, c</span><span>ustom functions, and t</span><span>ypes and providers. </span></p>
<p><a href="cea19359-3ab3-4ee7-99d5-be2e4cd1f992.xhtml">Chapter 4</a>, <em>Hiera 5</em><span>, covers the latest incarnation of Hiera, which <span class="TextRun SCXW11550141"><span class="NormalTextRun SCXW11550141">allows us to keep all site-specific and business-specific data out of our manifests, making </span></span><span class="TextRun SCXW11550141"><span class="NormalTextRun SCXW11550141">our </span></span><span class="TextRun SCXW11550141"><span class="NormalTextRun SCXW11550141">Puppet modules </span></span><span class="TextRun SCXW11550141"><span class="NormalTextRun SCXW11550141">vastly </span></span><span class="TextRun SCXW11550141"><span class="NormalTextRun SCXW11550141">more portable. We also take a quick look in this chapter at the<span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691"> </span></span><span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691">three </span></span><span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691">layers of configuration and data: </span></span><span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691">global</span></span><span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691">, </span></span><span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691">environment,</span></span><span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691"> and </span></span><span class="TextRun SCXW189668691"><span class="NormalTextRun SCXW189668691">module. We also cover how to set up an e<span class="TextRun SCXW66656802"><span class="NormalTextRun SCXW66656802">ncrypted YAML backend. Lastly, we take a cursory look at using Jerakia to extend Heira.</span></span></span></span></span></span></span></p>
<p><a href="6c818865-77fb-4527-a3a5-922db1301217.xhtml">Chapter 5</a>, <em>Managing Code</em><span>, covers the use of r10k and Code Manager, allowing us to store all Puppet code in Git repositories and providing version control and rollback capabilities. We discuss directory environments, which give us multiple versions of code on a single master, and how they're supported by r10k and Code Manager. We build a Puppetfile and actively deploy our code to our Puppet Master.</span></p>
<p><a href="0d435242-d7ac-4727-b632-71957c064919.xhtml">Chapter 6</a>, <em>Workflow</em>, covers a basic Puppet workflow. We'll be incorporating the PDK into our basic workflow more heavily, allowing us to write code more efficiently.</p>
<p><a href="6dbeb80c-ff05-46bf-9418-41706055f81a.xhtml">Chapter 7</a>, <em>Continuous Integration</em><span>, covers tying Puppet into Jenkins as a <strong>Continuous Integration</strong> (<strong>CI</strong>) system. We'll discuss the components of a <strong>CI/Continue Deployment</strong> (<strong>CI/CD</strong>) pipeline, what it takes to achieve some of the milestones to get there, and actively improve our Puppet code in a CI system.</span></p>
<p class="mce-root"/>
<p><span><a href="683ff898-d0ea-47e0-bbc7-b3458e300904.xhtml">Chapter 8</a>,</span><span> </span><em>Extending Puppet with Tasks and Discovery</em><span>, covers Puppet Tasks and Puppet Discovery. Puppet Tasks allows us to run ad hoc commands and use them as building blocks for imperative scripts. We'll be building a task to inspect log files and planning to build an aggregated log file for our Puppet Master. Puppet Discovery allows us to inspect our existing infrastructure and determine ground truth on packages, services, users, and various other components of a virtual machine or container.</span></p>
<p><a href="036a4b96-b91a-4c72-83dc-e5505efc26cd.xhtml">Chapter 9</a>, <em>Exported Resources</em><span>, covers virtual and exported resources in Puppet. We'll explore exporting and collecting resources in our manifests, and the common use cases for exported and collected resources to include the following: a dynamic <kbd>/etc/hosts</kbd> file, load balancing, and automatic database connections. We'll also explore the <kbd>file_line</kbd> and <kbd>concat</kbd> resources to allow us to build dynamic configuration files based on these exported resources.</span></p>
<p><span><a href="86dd6089-20d3-441a-8aa2-367384778c0d.xhtml">Chapter 10</a>,</span> <em>Application Orchestration</em><span>, covers the ordering of multiple node runs. We'll build application orchestration manifests, which allow us to tie nodes together and provide configuration values across multiple nodes, ensuring that our multi-node application runs in the order necessary, with the information it needs.</span></p>
<p><span><a href="89fcf8aa-e010-44dc-9df9-90ec4179488f.xhtml">Chapter 11</a>,</span> <em>Scaling Puppet</em><span>, covers the horizontal and vertical scaling of Puppet. We'll explore some common settings for tuning, and inspect ways to horizontally scale Puppet services.</span></p>
<p><span><a href="f4155d29-38b7-475b-8dc9-cd5f9b45914b.xhtml">Chapter 12</a>,</span> <em>Troubleshooting and Profiling</em><span>, covers some common troubleshooting cases we see with Puppet. We'll focus on both Puppet service errors and catalog compilation errors, and inspect tuning and configuring our log files.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">To get the most out of this book</h1>
                </header>
            
            <article>
                
<p>Users with some prior Puppet experience will get the most out of this book, but every lesson is intended to be helpful to someone at any stage of learning about Puppet. To follow along in the book, users should install a trial version of Puppet Enterprise and attach some nodes to the Puppet Master. Each chapter will help set up the Puppet Master in a way to utilize the existing infrastructure.</p>
<p>Directions for installing Puppet Enterprise can be found at <a href="https://puppet.com/docs/pe/latest/installing_pe.html">https://puppet.com/docs/pe/latest/installing_pe.html</a>. </p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Download the example code files</h1>
                </header>
            
            <article>
                
<p>You can download the example code files for this book from your account at <a href="http://www.packtpub.com" target="_blank">www.packt.com</a>. If you purchased this book elsewhere, you can visit <a href="http://www.packtpub.com/support" target="_blank">www.packt.com/support</a> and register to have the files emailed directly to you.</p>
<p>You can download the code files by following these steps:</p>
<ol>
<li>Log in or register at <a href="http://www.packtpub.com/support" target="_blank">www.packt.com</a>.</li>
<li>Select the <span class="packt_screen">SUPPORT</span> tab.</li>
<li>Click on <span class="packt_screen">Code Downloads &amp; Errata</span>.</li>
<li>Enter the name of the book in the <span class="packt_screen">Search</span> box and follow the onscreen instructions.</li>
</ol>
<p>Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p>
<ul>
<li>WinRAR/7-Zip for Windows</li>
<li>Zipeg/iZip/UnRarX for Mac</li>
<li>7-Zip/PeaZip for Linux</li>
</ul>
<p><span>The code bundle for the book is also hosted on GitHub at</span><span> <a href="https://github.com/PacktPublishing/Mastering-Puppet-5">https://github.com/PacktPublishing/Mastering-Puppet-5</a></span><span>. </span><span>In case there's an update to the code, it will be updated on the existing GitHub repository.</span></p>
<p><span>We also have other code bundles from our rich catalog of books and videos available at</span><span> </span><strong><span class="Object"><a href="https://github.com/PacktPublishing/" target="_blank">https://github.com/PacktPublishing/</a></span></strong><span>. Check them out!</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Download the color images</h1>
                </header>
            
            <article>
                
<p>We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://www.packtpub.com/sites/default/files/downloads/9781788831864_ColorImages.pdf">https://www.packtpub.com/sites/default/files/downloads/9781788831864_ColorImages.pdf</a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Conventions used</h1>
                </header>
            
            <article>
                
<p>There are a number of text conventions used throughout this book.</p>
<p><kbd>CodeInText</kbd>: <span>Indicates c</span>ode words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. <span>Here is an example:</span> "The earlier incarnations of Hiera (version 3 or earlier) used a single, entirely global <kbd>hiera.yaml</kbd>."</p>
<p>A block of code is set as follows:</p>
<pre>lookup({<br/>   'name'  =&gt; 'classification',<br/>   'merge' =&gt; {<br/>     'strategy'        =&gt; 'deep',<br/>     'knockout_prefix' =&gt; '--',<br/>   },<br/> })</pre>
<p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
<pre>lookup({<br/>   'name'  =&gt; 'classification',<br/>   'merge' =&gt; {<br/>     <strong>'strategy' =&gt; 'deep',</strong><br/>     'knockout_prefix' =&gt; '--',<br/>   },<br/> })</pre>
<p>Any command-line input or output is written as follows:</p>
<pre><strong>$ sudo /opt/puppetlabs/puppet/bin/gem install hiera-eyaml</strong></pre>
<p><strong>Bold</strong>: Indicates a new term, an important word, or w<span>ords that you see on screen. For example, words in menus or dialog boxes appear in the text like this. Here is an example: "We can reach the plugin page by clicking on <span class="packt_screen">Manage Jenkins</span> on the left-hand side of the screen.</span><span>"</span></p>
<div class="packt_infobox">Warnings or important notes appear like this.</div>
<div class="packt_tip">Tips and tricks appear like this.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Get in touch</h1>
                </header>
            
            <article>
                
<p>Feedback from our readers is always welcome.</p>
<p class="mce-root"><strong>General feedback</strong>: Email <kbd><span>customercare@packtpub.com</span></kbd> and mention the book title in the subject of your message. If you have questions about any aspect of this book, please email us at <kbd>customercare@packtpub.com</kbd>.</p>
<p><strong>Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/submit-errata" target="_blank">www.packt.com/submit-errata</a>, selecting your book, clicking on the Errata Submission Form link, and entering the details.</p>
<p><strong>Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <kbd>copyright@packt.com</kbd> with a link to the material.</p>
<p class="mce-root"><strong>If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com/" target="_blank">authors.packtpub.com</a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Reviews</h1>
                </header>
            
            <article>
                
<p>Please leave a review. Once you have read and used this book, why not leave a review on the site that you purchased it from? Potential readers can then see and use your unbiased opinion to make purchase decisions, we at Packt can understand what you think about our products, and our authors can see your feedback on their book. Thank you!</p>
<p>For more information about Packt, please visit <a href="https://www.packtpub.com/" target="_blank">packtpub.com</a>.<a href="https://www.packtpub.com/" target="_blank"/></p>


            </article>

            
        </section>
    </body></html>