<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;7.&#xA0;Delivering PaaS &#x2013; WebSites Cloud and Service Bus" id="1Q5IA1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07" class="calibre1"/>Chapter 7. Delivering PaaS – WebSites Cloud and Service Bus</h1></div></div></div><p class="calibre8">In this chapter, we will be focusing on delivering the <span class="strong"><strong class="calibre9">PaaS</strong></span> (<span class="strong"><strong class="calibre9">Platform as a Service</strong></span>) cloud offerings of Windows <a id="id753" class="calibre1"/>Azure Pack. PaaS enables tenants and organizations to develop, run, and manage their applications on the cloud provider's platform without worrying about the infrastructure layer, such as hardware or the operating system.</p><p class="calibre8">In this chapter, we will be talking about two major PaaS offerings available in Windows Azure Pack, which includes WebSites and Service Bus. The WAP WebSite cloud can be used by organizations and cloud providers to deliver website hosting services to internal business lines and tenants. The WAP website cloud supports multiple programming languages, such as ASP.NET, PHP, and Node.js.</p><p class="calibre8">WAP websites work in a consistent manner with Azure WebSites. Tenants are responsible for their website's development and management, whereas platform responsibility lies with the cloud service provider.</p><p class="calibre8">Though it looks more of like IT developers' stuff, this chapter is for IT professionals only. We will be focusing upon building a reliable platform, which is capable of hosting thousands of high density websites in a multi-tenant fashion. Any website development or programming will work in the same traditional web development service mechanism and won't be a part of the Windows Azure Pack Websites cloud.</p><p class="calibre8">Another PaaS offering of WAP is Service Bus, which provides a reliable and scalable messaging service. This can be used by applications to pass messages or information.</p><p class="calibre8">In this chapter, we will be covering the following topics:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Overview and capabilities of the WebSites cloud</li><li class="listitem">Planning the WebSites cloud platform</li><li class="listitem">Preparing the installation of Windows Azure Pack WebSites cloud</li><li class="listitem">Installing and configuring the WebSites cloud</li><li class="listitem">WebSites cloud – management operations</li><li class="listitem">WebSites cloud – a tenant's experience</li><li class="listitem">Windows Azure Pack Service Bus</li><li class="listitem">Installing and configuring the Service Bus cloud farm</li></ul></div></div>

<div class="book" title="Chapter&#xA0;7.&#xA0;Delivering PaaS &#x2013; WebSites Cloud and Service Bus" id="1Q5IA1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Overview and capabilities of the WebSites cloud"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch07lvl1sec54" class="calibre1"/>Overview and capabilities of the WebSites cloud</h1></div></div></div><p class="calibre8">The WebSites cloud in Windows Azure Pack enables organizations and service providers to offer high-density web hosting services to their internal or external tenants. The WAP Websites cloud provides a platform to tenants to develop and run their websites.</p><p class="calibre8">WAP websites are<a id="id754" class="calibre1"/> designed to provide services at a web scale, hosting thousands <a id="id755" class="calibre1"/>of websites with flexibilities and capabilities in terms of scalability, granular control, and metering. The WebSites cloud platform is made up by combining capabilities and features of Windows server, IIS, SQL database, and many third-party and open source technologies.</p></div></div>

<div class="book" title="Chapter&#xA0;7.&#xA0;Delivering PaaS &#x2013; WebSites Cloud and Service Bus" id="1Q5IA1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Overview and capabilities of the WebSites cloud">
<div class="book" title="WAP websites capabilities from the service provider's point of view"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec102" class="calibre1"/>WAP websites capabilities from the service provider's point of view</h2></div></div></div><p class="calibre8">Windows Azure Pack websites provide a similar experience to that of Microsoft Azure's website, which is one of the largest website hosting service providers. The Websites service works on a distributed architecture that offers scalability and eliminates any single point of failure. Let's have a look at the capabilities and features that the WAP websites cloud offers for service providers:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">High density and scalability</strong></span>: WAP websites are designed to run tens of thousands and<a id="id756" class="calibre1"/> more websites in a single farm with flexible scaling decisions. Service providers can start with<a id="id757" class="calibre1"/> a small farm and add more resources at a later stage as per requirement without any interruption to the services.</li><li class="listitem"><span class="strong"><strong class="calibre9">Multi tenancy</strong></span>: WAP<a id="id758" class="calibre1"/> websites services are multi tenant in nature and provide isolated services with granular control and self-service to tenants on shared platforms. Reserved, also known as dedicated servers, can also be provided to tenants.</li><li class="listitem"><span class="strong"><strong class="calibre9">Simple and faster deployment and management</strong></span>: Simplicity is one of the key requirements from IT solutions<a id="id759" class="calibre1"/> in today's world. WAP websites are easy, fast, and hassle free to deploy, manage, and scale.</li><li class="listitem"><span class="strong"><strong class="calibre9">Automatic and self service</strong></span>: WAP websites provide automated platform and websites deployment in a <a id="id760" class="calibre1"/>self-service manner for both cloud administrators and tenants.</li><li class="listitem"><span class="strong"><strong class="calibre9">Application and framework support</strong></span>: WAP websites support a wide range of frameworks and programming languages without any extra administrative burden. This includes <a id="id761" class="calibre1"/>both Microsoft and third-party frameworks along with open source technologies. WAP websites support frameworks and technologies, such as ASP.NET, classic ASP, PHP, Node.js, and more with source control using GitHub, Bitbucket, Dropbox, and Team Foundation Server. Along with applications and programming language support, it also provides a Web App Gallery having preconfigured website templates and application templates.</li><li class="listitem"><span class="strong"><strong class="calibre9">Flexible service levels</strong></span>: By <a id="id762" class="calibre1"/>default, Windows Azure Pack Websites provide multiple service levels, such as shared or dedicated servers for tenants. Customers can choose their website scale between shared and reserved mode as per requirements.</li><li class="listitem"><span class="strong"><strong class="calibre9">Granual QOS and metering</strong></span>: Windows Azure Pack plans for websites provide a granular level of quality of service control. This ensures that tenants get their required<a id="id763" class="calibre1"/> resources as per contract even if it's running in shared mode. All these service levels are delivered with a strong metering mechanism for chargeback.</li><li class="listitem"><span class="strong"><strong class="calibre9">Resilient distributed architecture</strong></span>: WAP websites work in a distributed architecture spread across multiple roles and servers with full resiliency eliminating any single<a id="id764" class="calibre1"/> point of failure.</li><li class="listitem"><span class="strong"><strong class="calibre9">Hypervisor agnostic</strong></span>: Websites<a id="id765" class="calibre1"/> cloud services require Windows Server 2012 or 2012 R2 operating to run, which can be hosted on any supported hypervisors or physical servers.</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note32" class="calibre1"/>Note</h3><p class="calibre8">Although, Windows Server 2012 is supported for hosting WAP websites servers, it is recommended to use Windows Server 2012 R2 with the latest Windows updates.</p></div></div></div></div>

<div class="book" title="Chapter&#xA0;7.&#xA0;Delivering PaaS &#x2013; WebSites Cloud and Service Bus" id="1Q5IA1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Overview and capabilities of the WebSites cloud">
<div class="book" title="WAP websites overview and capabilities from a tenant's point of view"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec103" class="calibre1"/>WAP websites overview and capabilities from a tenant's point of view</h2></div></div></div><p class="calibre8">Apart from typical cloud computing benefits, WAP websites service offers the following capabilities and benefits for tenants:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Simple and faster website provisioning and management</strong></span>: In a traditional IT delivery mechanism, a website platform deployment is likely to take days to get the web up and running. This platform deployment includes infrastructure level<a id="id766" class="calibre1"/> readiness, an operating system, and middleware or web server deployment. With WAP websites, tenants can have the website up and running in just a few clicks. This enables tenants to focus more on web development pieces instead of platforms.</li><li class="listitem"><span class="strong"><strong class="calibre9">Scalability</strong></span>: Scalability in traditional deployment models is the most challenging aspect. Windows<a id="id767" class="calibre1"/> Azure Pack eliminates this by providing easy scale in and out with just a few clicks. Tenants may choose to have more servers during peak hours or days only in a very easy and cost-effective manner.</li><li class="listitem"><span class="strong"><strong class="calibre9">Self service</strong></span>: Windows Azure Pack websites service operations, such as provisioning and<a id="id768" class="calibre1"/> administration, which are available through an easy-to-use, self-service portal, eliminating any possible errors and delay due to human interaction.</li><li class="listitem"><span class="strong"><strong class="calibre9">A wide range of frameworks and programming options</strong></span>: Tenants are free to choose a development<a id="id769" class="calibre1"/> framework as per their necessity and choice. WAP supports multiple application frameworks, such as ASP .NET, PHP, Node.js, and more.</li><li class="listitem"><span class="strong"><strong class="calibre9">Flexible development and deployment tools</strong></span>: WAP supports a wide range of development and<a id="id770" class="calibre1"/> deployment tools<a id="id771" class="calibre1"/> including Visual Studio, FTP, WebDeploy, GIT, Bitbucket, Dropbox, Team Foundation Server, and more.</li><li class="listitem"><span class="strong"><strong class="calibre9">The web app gallery</strong></span>: The web app gallery available in Windows Azure Pack has a wide range<a id="id772" class="calibre1"/> of preconfigured website templates and popular web applications from Microsoft, third-party vendors, and open source. Tenants can leverage these to develop websites faster and in an efficient manner.</li></ul></div></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="WAP WebSites &#x2013; architecture" id="1R42S1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec55" class="calibre1"/>WAP WebSites – architecture</h1></div></div></div><p class="calibre8">The WebSites cloud <a id="id773" class="calibre1"/>solution consists of multiple roles and runs on multiple servers. All servers are based on Windows Server 2012 R2 (2012 is also supported). The overall <a id="id774" class="calibre1"/>solution makes use of Windows server capabilities, such as the dynamic <span class="strong"><strong class="calibre9">Windows Process Activation Service</strong></span>, resource throttling, IIS, and more along with SQL<a id="id775" class="calibre1"/> database and website roles. Let's dive deeper into the architectural components of WebSites cloud solution.</p></div>

<div class="book" title="WAP WebSites &#x2013; architecture" id="1R42S1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="WebSites cloud service roles"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec104" class="calibre1"/>WebSites cloud service roles</h2></div></div></div><p class="calibre8">Windows Azure Pack-based<a id="id776" class="calibre1"/> websites cloud service consist of a minimum of six server roles:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">WebSites controller</strong></span>: This role <a id="id777" class="calibre1"/>deploys and manages other roles. This is the first role to install, and it contains all media, setup, and configurations used for deploying and configuring other roles.</li><li class="listitem"><span class="strong"><strong class="calibre9">WebSites management server</strong></span>: This role communicates with Windows Azure Pack management portals<a id="id778" class="calibre1"/> and APIs. It exposes a <span class="strong"><strong class="calibre9">Representational State Transfer</strong></span> (<span class="strong"><strong class="calibre9">REST</strong></span>) endpoint that is used by WAP to connect and communicate with Website cloud platforms. All website provisioning operations are performed via this management server.</li><li class="listitem"><span class="strong"><strong class="calibre9">Web worker</strong></span>: This role hosts and runs tenants' websites. Client requests for websites are processed by web workers only. Web worker servers can work in shared or reserved <a id="id779" class="calibre1"/>mode. In shared mode, one web worker role handles website requites for multiple tenants, whereas in the case of reserved, it's dedicated to a single tenant.</li><li class="listitem"><span class="strong"><strong class="calibre9">The front end role</strong></span>: This role accepts the client's requests, routes to the worker role for processing, and<a id="id780" class="calibre1"/> returns the response to the client. One front end server can route requests to multiple web worker roles along with load balancing capabilities. Front end<a id="id781" class="calibre1"/> servers are also responsible for SSL termination.</li><li class="listitem"><span class="strong"><strong class="calibre9">File server</strong></span>: A file server is a Windows-based file server role and is used to store files for hosting<a id="id782" class="calibre1"/> website content. Files include application and data content for all the websites hosted in the website's cloud. Websites leverage the File Server Resource Manager feature of Windows file servers for managing files for websites' hosting.</li><li class="listitem"><span class="strong"><strong class="calibre9">Publisher role</strong></span>: This role <a id="id783" class="calibre1"/>publishes content to the website's farm via FTP clients, Visual Studio, and WebMatrix. Publisher role uses FTP and Web Deploy protocols. Tenants use the publish server to upload and publish their website's content.</li></ul></div></div></div>

<div class="book" title="WAP WebSites &#x2013; architecture" id="1R42S1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="WAP Websites – database roles"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec105" class="calibre1"/>WAP Websites – database roles</h2></div></div></div><p class="calibre8">Just as any other<a id="id784" class="calibre1"/> Microsoft product, WAP websites cloud leverages the Microsoft SQL Server for its database necessities. The WAP website's database requirements can be alienated in three categories:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">The website's run time database</strong></span>: This <a id="id785" class="calibre1"/>database hosts the run time database and configuration for the tenant's websites. This must be a Microsoft SQL Server based database.</li><li class="listitem"><span class="strong"><strong class="calibre9">Application database or tenants DB</strong></span>: This database is used by tenants to host websites' data. This isn't a mandatory requirement and depends upon the tenant's website<a id="id786" class="calibre1"/> architecture and requirement. Tenant must subscribe to database services of WAP to use this. This<a id="id787" class="calibre1"/> can be a MS SQL or MySQL based database as per web application support.</li><li class="listitem"><span class="strong"><strong class="calibre9">Service management API database</strong></span>: This database is used by the WAP service management API to<a id="id788" class="calibre1"/> store configuration data. It is the same database that we used while configuring Windows Azure Pack installation in <a class="calibre1" title="Chapter 3. Installing and Configuring Windows Azure Pack" href="part0033_split_000.html#VF2I1-b479cf466c26404ca54119871a9b2715">Chapter 3</a>, <span class="strong"><em class="calibre12">Installing and Configuring Windows Azure Pack</em></span>. This must be a Microsoft SQL Server-based <a id="id789" class="calibre1"/>database.</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Planning the WebSites cloud platform" id="1S2JE1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec56" class="calibre1"/>Planning the WebSites cloud platform</h1></div></div></div><p class="calibre8">In this topic, we <a id="id790" class="calibre1"/>will discuss about planning factors and best practices for<a id="id791" class="calibre1"/> the website's cloud platform in terms of capacity, resiliency, and more.</p></div>

<div class="book" title="Planning the WebSites cloud platform" id="1S2JE1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Planning for resiliency"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec106" class="calibre1"/>Planning for resiliency</h2></div></div></div><p class="calibre8">Windows Azure Pack <a id="id792" class="calibre1"/>Websites cloud solution can be protected against failures by adding redundant servers at each role or layer. Adding additional server for redundancy is quite an easy and simple process.</p><p class="calibre8">Following are the resiliency recommendations for each role:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">WebSites roles</strong></span>: This role can be protected against failure by deploying additional servers for redundancy:<div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre9">Controller servers</strong></span>: A maximum of two controller servers can be provisioned in a WAP website's deployment. This provides high availability at the controller layer.</li><li class="listitem"><span class="strong"><strong class="calibre9">Management and publisher</strong></span>: For the management and publisher role, it is recommended to have a minimum of two servers hosting this to provide resiliency. Additional servers can also be added as per scalability requirements.</li><li class="listitem"><span class="strong"><strong class="calibre9">Front end</strong></span>: Two front end servers can be deployed for providing high availability; however, more than two front end deployments are also supported for capacity and load balancing. Load balancers should be configured for client access requests load balancing to front end servers.</li><li class="listitem"><span class="strong"><strong class="calibre9">Web worker role</strong></span>: It is recommended to have a minimum of four web worker roles—two for shared hosting and two for reserved. Additional worker roles can be deployed as per scalability requirements.</li></ul></div></li><li class="listitem"><span class="strong"><strong class="calibre9">File servers</strong></span>: It is recommended to use a preconfigured Windows-based File Server Cluster for the<a id="id793" class="calibre1"/> WAP websites cloud usage for production environments. Note that the Sale-out File Server cluster isn't supported for the website's cloud usage as it requires the File Server Resource Manager to function.</li><li class="listitem"><span class="strong"><strong class="calibre9">SQL servers</strong></span>: For <a id="id794" class="calibre1"/>production environments, it is recommended to use a database server that is configured with SQL level cluster technologies such as SQL server cluster or SQL Server Always On.</li></ul></div><p class="calibre8">It is also recommended to<a id="id795" class="calibre1"/> host the website's cloud role in virtual machines to take advantage of high-level, hypervisor availability techniques.</p></div></div>

<div class="book" title="Planning the WebSites cloud platform" id="1S2JE1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Planning for capacity"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec107" class="calibre1"/>Planning for capacity</h2></div></div></div><p class="calibre8">Windows Azure Pack websites cloud solution can be easily scaled in and out as per capability requirements. The following guidelines provide basic design consideration while planning for <a id="id796" class="calibre1"/>capacity:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">WebSites Roles</strong></span>:<div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre9">Controller servers</strong></span>: A controller server does not require much compute, network, or storage resources since it is used only for provisioning other roles. Standard sizing includes two virtual CPUs and four or eight Gig RAM with decent storage space to host OS. The controller should suffice these requirements.</li><li class="listitem"><span class="strong"><strong class="calibre9">Management</strong></span>: This role<a id="id797" class="calibre1"/> handles communication between WAP and WebSites cloud. This server doesn't require much resources unless multiple simultaneous provisioning operations are initiated.</li><li class="listitem"><span class="strong"><strong class="calibre9">Front end</strong></span>: The front end server routes all the website's access requests to worker rules. For a better load sharing, it is recommended to deploy multiple front end servers. As per Microsoft guidelines, one core can handle 100 requests per second. Compute power for the front end can be sized using this value, considering peak hours as one additional factor.</li><li class="listitem"><span class="strong"><strong class="calibre9">Publisher server</strong></span>: Publisher server usually experiences high compute utilization only when multiple publishing operations are initiated by tenants.</li><li class="listitem"><span class="strong"><strong class="calibre9">Web worker role</strong></span>: This role is the most resource-intensive role in WebSites cloud since all websites are hosted on these servers. It is recommended to deploy multiple servers for a web worker role. Memory for web worker roles needs to be planned as per the number of active websites at a single point of time. As per Microsoft recommendations, average memory footprint in a production environment for one website is 70 MB. It's a good idea to plan memory considering the number of regular active websites along with peak hours or day values.</li></ul></div></li><li class="listitem"><span class="strong"><strong class="calibre9">File server</strong></span>: A file <a id="id798" class="calibre1"/>server hosts all the content and applications of websites running in farm and is disk IO intensive. It is recommended to use disks with a higher number of IOPS for file servers.</li><li class="listitem"><span class="strong"><strong class="calibre9">SQL Server</strong></span>: As per Microsoft's guidelines, SQL<a id="id799" class="calibre1"/> memory should be sized as four GB per 30,000 provisioned websites. It is recommended to take extra memory, and the<a id="id800" class="calibre1"/> SQL performance is mostly dependent on the available memory. Four GB of disk space per 10 K websites is required.</li></ul></div></div></div>

<div class="book" title="Planning the WebSites cloud platform" id="1S2JE1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Domain versus workgroup for WebSites server roles"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec108" class="calibre1"/>Domain versus workgroup for WebSites server roles</h2></div></div></div><p class="calibre8">Windows Azure Pack<a id="id801" class="calibre1"/> websites roles can be deployed in both domain and workgroup environments. It is recommended to use domain-joined servers in production deployments to take advantage of AD capabilities, such as secure authentication with Kerberos and simple user management along with better control with Group policies. Work group servers can be used for test and development environments.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Preparing the installation of Windows Azure Pack WebSites cloud"><div class="book" id="1T1402-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec57" class="calibre1"/>Preparing the installation of Windows Azure Pack WebSites cloud</h1></div></div></div><p class="calibre8">Before starting the installation<a id="id802" class="calibre1"/> and configuration of WAP websites cloud, there are multiple prerequisites that need to be fulfilled. Let's have a look<a id="id803" class="calibre1"/> at them.</p></div>

<div class="book" title="Preparing the installation of Windows Azure Pack WebSites cloud">
<div class="book" title="Preparing Windows servers"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec109" class="calibre1"/>Preparing Windows servers</h2></div></div></div><p class="calibre8">All servers designated to host<a id="id804" class="calibre1"/> websites cloud components must be running Windows Server 2012 or 2012 R2 operating system. It is recommended to patch the server with latest updates. It is advised to use a clean installation of the operating system.</p><p class="calibre8">Enable Windows Remote Management on all servers. Create inbound an access firewall rule for the following services for publisher and front end servers:</p><div class="book"><ul class="itemizedlist"><li class="listitem">File and printer sharing (SMB-In)</li><li class="listitem">Windows Management Instrumentation (WMI-In)</li></ul></div><p class="calibre8">On all the server's user account control must be disabled for remote operations. This can be performed by adding the following registry key. Server must be restarted post adding the following registry key:</p><p class="calibre8"><code class="email">reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f</code></p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip20" class="calibre1"/>Tip</h3><p class="calibre8">Adding the<a id="id805" class="calibre1"/> previous registry key does not affect the local UAC configuration.</p></div></div></div>

<div class="book" title="Preparing the installation of Windows Azure Pack WebSites cloud">
<div class="book" title="Preparing DNS records"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec110" class="calibre1"/>Preparing DNS records</h2></div></div></div><p class="calibre8">Windows Azure Pack websites<a id="id806" class="calibre1"/> requires DNS records to do the following:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Access websites</strong></span>: By Default, each website hosted in Windows Azure Pack websites contains a DNS suffix configured by the service provider. This DNS suffix needs to point to front end servers for the website's name resolution. For<a id="id807" class="calibre1"/> example, FQDN for a website named 'abc' in a website cloud having a DNS suffice 'xyz.com' would be 'abc.xyz.com'. The service provider needs to plan and decide the DNS suffix and create necessary zones in internal or public DNS server.</li><li class="listitem"><span class="strong"><strong class="calibre9">Develop/Publish</strong></span>: This<a id="id808" class="calibre1"/> record is used by tenants to<a id="id809" class="calibre1"/> upload and publish the website's content. Two 'CNAME' records are required for this, and they point to the publisher server.</li></ul></div><p class="calibre8">Overall, the following DNS records need to be created in DNS Server for websites cloud to function:</p><div class="informalexample"><table border="1" class="calibre16"><colgroup class="calibre17"><col class="calibre18"/><col class="calibre18"/><col class="calibre18"/></colgroup><thead class="calibre19"><tr class="calibre20"><th valign="bottom" class="calibre25">
<p class="calibre22">Name</p>
</th><th valign="bottom" class="calibre25">
<p class="calibre22">IP Address</p>
</th><th valign="bottom" class="calibre25">
<p class="calibre22">Usage</p>
</th></tr></thead><tbody class="calibre23"><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">*</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">Front End Server(s)</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">For accessing websites</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">*.scm</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">Front End Server(s)</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">For Content publishing via Git</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">ftp</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">Publisher Server(s)</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">For publishing content via Web Deploy or FTP</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">publisher</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">Publisher Server(s)</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">For publishing content via Web Deploy or FTP</p>
</td></tr></tbody></table></div></div></div>

<div class="book" title="Preparing the installation of Windows Azure Pack WebSites cloud">
<div class="book" title="Preparing a SQL server for the WebSites cloud database"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec111" class="calibre1"/>Preparing a SQL server for the WebSites cloud database</h2></div></div></div><p class="calibre8">The following <a id="id810" class="calibre1"/>database configuration needs must be met while using the SQL Server for the WebSite's cloud:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The SQL version must be SQL Server 2012 SP1 or later. The Express edition can be used for evaluation; the full edition is required for production. The database server must be reachable from all nodes.</li><li class="listitem">The necessary clustering technologies must be configured as per the design such as SQL Cluster or Always On.</li><li class="listitem">Mixed mode<a id="id811" class="calibre1"/> authentication must be enabled.</li><li class="listitem">If using the names instance, the SQL browser service needs to be started manually along with opening the 1434 port.</li></ul></div></div></div>

<div class="book" title="Preparing the installation of Windows Azure Pack WebSites cloud">
<div class="book" title="Preparing SSL certificates"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch07lvl2sec112" class="calibre1"/>Preparing SSL certificates</h2></div></div></div><p class="calibre8">By default, Windows Azure Pack Websites<a id="id812" class="calibre1"/> generate and install self-signed certificates for websites cloud. It is not recommended to use self-signed certificates in a production environment. You can use internal CA to issues the following certificates for an internal private cloud. For service providers, it is recommend to <a id="id813" class="calibre1"/>get the SSL issued by the public trusted CA.</p><p class="calibre8">The following two SSL certificates are required in a WAP solution:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Default Domain certificate</strong></span>: These are used while accessing websites and source control. Since this certificate is<a id="id814" class="calibre1"/> used by all tenants' websites, it needs to be a wildcard and must be in the <code class="email">.pfx</code> format. This certificate is placed at the front end servers. The following subject names need to be configured as per the service provider's naming convention:<div class="book"><ul class="itemizedlist1"><li class="listitem"><code class="email">*.dnssuffix.com</code></li><li class="listitem"><code class="email">*.scm.dnssuffix.com</code></li></ul></div></li><li class="listitem"><span class="strong"><strong class="calibre9">Publishing certificate</strong></span>: Publishing SSL <a id="id815" class="calibre1"/>certificates is used to provide secure communication to developers for uploading or publishing the website's content via FTP or Web Deploy. This certificate needs to be placed at the publishing server and should contain the<a id="id816" class="calibre1"/> following SAN names as per the service provider's naming convention:<div class="book"><ul class="itemizedlist1"><li class="listitem"><code class="email">Publish.dnssuffix.com</code></li><li class="listitem"><code class="email">ftp.dnssuffix.com</code></li></ul></div></li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip21" class="calibre1"/>Tip</h3><p class="calibre8">Wild certificates used for default domain certificates can also be used for publishing since it contains the same parent domain name.</p></div></div></div>

<div class="book" title="Preparing the installation of Windows Azure Pack WebSites cloud">
<div class="book" title="Preparing file servers"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch07lvl2sec113" class="calibre1"/>Preparing file servers</h2></div></div></div><p class="calibre8">Windows Azure Pack websites support both the standalone and preconfigured File Server Cluster or NAS device. It is recommended to use a File Server Cluster or a NAS device in a production<a id="id817" class="calibre1"/> deployment to achieve high availability and better performance. The following steps are required to configure a File Server Cluster for WAP websites:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Configure the File Server Cluster or the NAS device.</li><li class="listitem" value="2">Create user accounts and groups (for file share owners and users).</li><li class="listitem" value="3">Enable <a id="id818" class="calibre1"/><span class="strong"><strong class="calibre9">WinRM </strong></span>(<span class="strong"><strong class="calibre9">Windows Remote Management</strong></span>) and <a id="id819" class="calibre1"/><span class="strong"><strong class="calibre9">FSRM </strong></span>(<span class="strong"><strong class="calibre9">File Server Resource Manager</strong></span>).</li><li class="listitem" value="4">Provision Content Shares and Certificate Store Shares using standard file server operations.</li><li class="listitem" value="5">Add the <code class="email">FileShareOwners</code> group to the local Administrators group of the file server to enable WinRM.</li><li class="listitem" value="6">Configure the access control to share as per the provisioned user account and group.</li></ol><div class="calibre27"/></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Installing and configuring the WebSite cloud"><div class="book" id="1TVKI2-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec58" class="calibre1"/>Installing and configuring the WebSite cloud</h1></div></div></div><p class="calibre8">Microsoft Web Platform Installer is used to download and install websites cloud components. See <a class="calibre1" title="Chapter 3. Installing and Configuring Windows Azure Pack" href="part0033_split_000.html#VF2I1-b479cf466c26404ca54119871a9b2715">Chapter 3</a>, <span class="strong"><em class="calibre12">Installing and Configuring Windows Azure Pack</em></span> to know more on the Web Platform Installer.</p><p class="calibre8">Before starting installation, verify that<a id="id820" class="calibre1"/> all the design decisions and planning is made and prerequisites are completed.</p><p class="calibre8">First, the controller<a id="id821" class="calibre1"/> server is installed, and later, it is used to install and configure other roles. The installation of the controller server also installs one management console for Windows Azure Pack websites, which can be used to install and configure other server roles in conjunction with the WAP service management portal.</p></div>

<div class="book" title="Installing and configuring the WebSite cloud">
<div class="book" title="Installing and configuring controller and management servers"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec114" class="calibre1"/>Installing and configuring controller and management servers</h2></div></div></div><p class="calibre8">The following steps <a id="id822" class="calibre1"/>outline the installation and configuration process for the controller and management servers:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the <a id="id823" class="calibre1"/>server designated for the WebSites controller.</li><li class="listitem" value="2">Run the Microsoft Web PI.</li><li class="listitem" value="3">Search for Windows Azure Pack WebSites.</li><li class="listitem" value="4">Select <span class="strong"><strong class="calibre9">Windows Azure Pack: WebSiteVersion2 Update 7 </strong></span>(the latest version available at the time of writing this book).<div class="note" title="Note"><h3 class="title2"><a id="tip22" class="calibre1"/>Tip</h3><p class="calibre8">Installing controller servers includes downloading all media required for deploying and configuring other roles.</p></div><div class="mediaobject"><img src="../images/00148.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Click on<a id="id824" class="calibre1"/> <span class="strong"><strong class="calibre9">Install</strong></span> to proceed.</li><li class="listitem" value="6">The WebSites installer <a id="id825" class="calibre1"/>will be downloaded, installed, and launched automatically.<div class="mediaobject"><img src="../images/00149.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="7">Click on<a id="id826" class="calibre1"/> <span class="strong"><strong class="calibre9">Install Websites Controller</strong></span>.</li><li class="listitem" value="8">Accept the agreement and proceed further.</li><li class="listitem" value="9">Verify all the Microsoft and<a id="id827" class="calibre1"/> third-party components to be installed. You can choose to install locally or download them for installation on another server.</li><li class="listitem" value="10">The installation will proceed; wait for the download and installation to finish.<div class="mediaobject"><img src="../images/00150.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="11">Click on <span class="strong"><strong class="calibre9">Configure</strong></span> to <a id="id828" class="calibre1"/>start configuring<a id="id829" class="calibre1"/> the controller deployment.<div class="mediaobject"><img src="../images/00151.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="12">Clicking on <span class="strong"><strong class="calibre9">Configure</strong></span> will launch the Windows Azure Pack WebSites Management console. All the other <a id="id830" class="calibre1"/>website's roles can be installed <a id="id831" class="calibre1"/>and configured using this wizard or the WAP management portal.<div class="mediaobject"><img src="../images/00152.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="13">Select <span class="strong"><strong class="calibre9">Controller type</strong></span>; since we<a id="id832" class="calibre1"/> are deploying the first controller server, it will be the primary controller in our case.</li><li class="listitem" value="14">Select <span class="strong"><strong class="calibre9">File server type</strong></span>. Selecting<a id="id833" class="calibre1"/> the file server will display additional options including hosting database configuration and other system setting, such as DNS suffix, credentials, and more.<div class="mediaobject"><img src="../images/00153.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="15">Enter the database <a id="id834" class="calibre1"/>configuration for both hosting<a id="id835" class="calibre1"/> and metering databases.<div class="mediaobject"><img src="../images/00154.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="16">Provide the DNS suffix <a id="id836" class="calibre1"/>and automatic updates for websites, and<a id="id837" class="calibre1"/> send the usage information to Microsoft settings.<div class="mediaobject"><img src="../images/00155.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="17">Provide system credentials for the following:<div class="book"><ul class="itemizedlist1"><li class="listitem">Administrator credentials for provisioning the website's cloud roles including front end, publisher, file server, and management servers</li><li class="listitem">Administrator <a id="id838" class="calibre1"/>credentials for provisioning the web worker role</li><li class="listitem">File share owner credentials</li><li class="listitem">File share user credentials</li><li class="listitem">Service endpoint<a id="id839" class="calibre1"/> credentials (used by WAP)<p class="calibre8">These user accounts must be a member of the local administrator group on the target servers</p></li></ul></div><div class="mediaobject"><img src="../images/00156.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="18">Enter the standalone or preconfigured file server details.</li><li class="listitem" value="19">At last, enter server details to configure the management role.<div class="mediaobject"><img src="../images/00157.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="20">The Website cloud<a id="id840" class="calibre1"/> farm is now configured. The controller<a id="id841" class="calibre1"/> service status will be displayed in the <span class="strong"><strong class="calibre9">Windows Azure Pack Websites Management Console</strong></span>.<div class="mediaobject"><img src="../images/00158.jpeg" alt="Installing and configuring controller and management servers" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="21"><span class="strong"><strong class="calibre9">Windows Azure Websites Management Console</strong></span> can now be used to modify any existing configuration or deploy additional servers. Verify the server's status<a id="id842" class="calibre1"/> in the server's console. Review error logs in case of any issue.</li><li class="listitem" value="22">Additional Management and<a id="id843" class="calibre1"/> Controller servers can be deployed in a similar fashion by selecting add additional server.</li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="Installing and configuring the WebSite cloud">
<div class="book" title="Registering the Websites Management Server with Windows Azure Pack"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec115" class="calibre1"/>Registering the Websites Management Server with Windows Azure Pack</h2></div></div></div><p class="calibre8">Windows Azure Pack<a id="id844" class="calibre1"/> uses the REST endpoint of WebSites Management Server to register the website's cloud resource providers and operations. Perform the following steps to register a websites cloud with Windows Azure Pack:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows Azure Pack Management portal for administrators.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">web site clouds</strong></span> workspace.</li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre9">Register your existing Web Site Cloud REST Endpoint.</strong></span><div class="mediaobject"><img src="../images/00159.jpeg" alt="Registering the Websites Management Server with Windows Azure Pack" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="4">Provide cloud connection details including display name, management server address, and credentials (the service endpoint credentials).<div class="mediaobject"><img src="../images/00160.jpeg" alt="Registering the Websites Management Server with Windows Azure Pack" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">The registered<a id="id845" class="calibre1"/> website cloud will now be visible under the <span class="strong"><strong class="calibre9">web site clouds</strong></span> workspace in the WAP portal.<div class="mediaobject"><img src="../images/00161.jpeg" alt="Registering the Websites Management Server with Windows Azure Pack" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="6">The Windows Azure Pack portal can now be used to provision other roles and management tasks.</li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="Installing and configuring the WebSite cloud">
<div class="book" title="Installing and configuring frontend, web worker and publisher roles"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec116" class="calibre1"/>Installing and configuring frontend, web worker and publisher roles</h2></div></div></div><p class="calibre8">The remaining<a id="id846" class="calibre1"/> websites cloud roles including front end, web <a id="id847" class="calibre1"/>worker, and publisher can be installed and configured using the Windows Azure Pack Service Management portal or WebSites Management Console installed on the controller server. For the purpose of demonstration in this book, we will be using the WAP Service Management<a id="id848" class="calibre1"/> portal. The following steps outline the process of deploying the remaining website's cloud components:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the <a id="id849" class="calibre1"/>Windows Azure Pack Management portal for administrators.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">WEBSITES</strong></span> workspace.</li><li class="listitem" value="3">Open the newly registered website cloud endpoint.</li><li class="listitem" value="4">Open the <span class="strong"><strong class="calibre9">ROLES</strong></span> workspace; this will list all the website roles configured in the website cloud farm currently.<div class="mediaobject"><img src="../images/00162.jpeg" alt="Installing and configuring frontend, web worker and publisher roles" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Click on <span class="strong"><strong class="calibre9">Add role</strong></span> to provision the website's roles.<div class="mediaobject"><img src="../images/00163.jpeg" alt="Installing and configuring frontend, web worker and publisher roles" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="6">Select <span class="strong"><strong class="calibre9">ADD NEW WEB WORKER</strong></span> to add a new worker role.</li><li class="listitem" value="7">Provide a<a id="id850" class="calibre1"/> worker role server name <a id="id851" class="calibre1"/>and configuration including the work type. <span class="strong"><strong class="calibre9">WORKER TYPE</strong></span> includes the following:<div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre9">Shared</strong></span></li><li class="listitem"><span class="strong"><strong class="calibre9">Reserved - Small</strong></span></li><li class="listitem"><span class="strong"><strong class="calibre9">Reserved - Medium</strong></span></li><li class="listitem"><span class="strong"><strong class="calibre9">Reserved- Large</strong></span></li></ul></div><div class="mediaobject"><img src="../images/00164.jpeg" alt="Installing and configuring frontend, web worker and publisher roles" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="8">The worker role installation will now start. The WAP portal displays the status of the<a id="id852" class="calibre1"/> installation.</li><li class="listitem" value="9">Add a new front <a id="id853" class="calibre1"/>end by just providing the hostname or IP for the server designated to host the front end role.<div class="mediaobject"><img src="../images/00165.jpeg" alt="Installing and configuring frontend, web worker and publisher roles" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="10">Add a new Publisher server by just providing the hostname or IP for the server designated to host the front end role.<div class="mediaobject"><img src="../images/00166.jpeg" alt="Installing and configuring frontend, web worker and publisher roles" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="11">Additional<a id="id854" class="calibre1"/> servers can be configured for achieving high availability and capabilities in a similar <a id="id855" class="calibre1"/>manner.</li><li class="listitem" value="12">Post installation, all the server roles available can be listed in the <span class="strong"><strong class="calibre9">ROLES</strong></span> tab under the <span class="strong"><strong class="calibre9">website clouds</strong></span> workspace.<div class="mediaobject"><img src="../images/00167.jpeg" alt="Installing and configuring frontend, web worker and publisher roles" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Customizing the WebSite cloud source control and the web gallery feed settings" id="1UU541-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec59" class="calibre1"/>Customizing the WebSite cloud source control and the web gallery feed settings</h1></div></div></div><p class="calibre8">The source control<a id="id856" class="calibre1"/> and the WebApp gallery feed settings are global to the WAP site cloud. All websites and websites cloud farms can take advantage <a id="id857" class="calibre1"/>of source control mechanisms configured at the WAP level. The same goes for the Web App gallery feed as well.</p></div>

<div class="book" title="Customizing the WebSite cloud source control and the web gallery feed settings" id="1UU541-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Configuring source control"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec117" class="calibre1"/>Configuring source control</h2></div></div></div><p class="calibre8">Windows <a id="id858" class="calibre1"/>Azure Pack supports multiple repositories for the source control of websites. These can be utilized for tenants to affect the content management and publishing of their websites.</p><p class="calibre8">This setting is configured on the WebSite cloud globally.</p><p class="calibre8">Service providers need to register on a respective source control website first to allow tenants to use these. The following source control repositories are supported:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Bitbucket</li><li class="listitem">GitHub</li><li class="listitem">CodePlex</li><li class="listitem">Dropbox</li></ul></div><p class="calibre8">To configure source control settings, we need to follow these steps:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows Azure Pack Management portal for administrators.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">web sites clouds</strong></span> workspace.</li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre9">SOURCE CONTROL</strong></span>.</li><li class="listitem" value="4">Enter the source control website's specific settings such as client ID, credentials, and more.<div class="mediaobject"><img src="../images/00168.jpeg" alt="Configuring source control" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="Customizing the WebSite cloud source control and the web gallery feed settings" id="1UU541-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Web Gallery feed settings"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec118" class="calibre1"/>Web Gallery feed settings</h2></div></div></div><p class="calibre8">Windows Azure Pack fully<a id="id859" class="calibre1"/> integrates with the Web App Gallery, which contains many preconfigured website templates and web applications. This enables customers to deploy top web applications faster and in an efficient manner. By default, Windows Azure Pack websites cloud is configured to the Microsoft standard Web App Gallery. Cloud providers can also choose to create custom the Web App Gallery. The following steps are required to change the Web App Gallery URL for a WAP deployment:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows Azure Pack Management portal for administrators.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">websites cloud</strong></span> workspace.</li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre9">SETTINGS</strong></span>.</li><li class="listitem" value="4">By default, the Microsoft Web App Gallery URL is configured; any custom gallery feed URL can be configured using this setting.<div class="mediaobject"><img src="../images/00169.jpeg" alt="Web Gallery feed settings" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="WebSites cloud &#x2013; management operations"><div class="book" id="1VSLM2-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec60" class="calibre1"/>WebSites cloud – management operations</h1></div></div></div><p class="calibre8">The Windows Azure<a id="id860" class="calibre1"/> Pack management portal offers a self-service experience not only for tenant users but also for cloud administrators. The WAP management portal can be used to perform monitoring and management operations on<a id="id861" class="calibre1"/> a websites cloud farm such as the following:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Monitoring the utilization and availability status of the cloud farm and the tenants' websites</li><li class="listitem">Provisioning, monitoring, and starting or stopping websites roles</li><li class="listitem">Customizing WebSites settings such as SSL and DNS records</li><li class="listitem">Configuring and managing block lists, IP SSL, and platform credentials</li></ul></div></div>

<div class="book" title="WebSites cloud &#x2013; management operations">
<div class="book" title="The utilization dashboard"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec119" class="calibre1"/>The utilization dashboard</h2></div></div></div><p class="calibre8">The <span class="strong"><strong class="calibre9">DASHBOARD</strong></span> page<a id="id862" class="calibre1"/> of the WebSites cloud provides graphs for the CPU and memory utilization of a complete website cloud farm. Along with utilization, event logs for website cloud can also be viewed using the <span class="strong"><strong class="calibre9">DASHBOARD</strong></span> page.</p></div></div>

<div class="book" title="WebSites cloud &#x2013; management operations">
<div class="book" title="Roles – configuration and management"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec120" class="calibre1"/>Roles – configuration and management</h2></div></div></div><p class="calibre8">The <span class="strong"><strong class="calibre9">ROLES</strong></span> page <a id="id863" class="calibre1"/>enables administrators to perform the following operations:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Provision and remove any websites server roles</li><li class="listitem">Reboot, repair, and make any server role offline</li><li class="listitem">View the list of server roles along with their status</li></ul></div><p class="calibre8">The following steps outline the process to access the roles page:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows Azure Pack Management portal for administrators.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">website clouds</strong></span> workspace.</li><li class="listitem" value="3">Select the websites cloud to manage and access the <span class="strong"><strong class="calibre9">ROLES</strong></span> tab.<div class="mediaobject"><img src="../images/00170.jpeg" alt="Roles – configuration and management" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="WebSites cloud &#x2013; management operations">
<div class="book" title="WebSites – monitoring and operations"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec121" class="calibre1"/>WebSites – monitoring and operations</h2></div></div></div><p class="calibre8">The websites page enables<a id="id864" class="calibre1"/> the following operations to be performed on the websites created by tenants:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Viewing and monitoring all websites created by tenants</li><li class="listitem">Performing tenant operations on websites such as modifying the .NET framework version<a id="id865" class="calibre1"/> on behalf of tenants</li></ul></div><p class="calibre8">The following steps outline the process to access the <span class="strong"><strong class="calibre9">ROLES</strong></span> page:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows Azure Pack Management portal for administrators.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">websites cloud</strong></span> workspace.</li><li class="listitem" value="3">Select the website's cloud to manage and access the <span class="strong"><strong class="calibre9">WEB SITES</strong></span> tab.<div class="mediaobject"><img src="../images/00171.jpeg" alt="WebSites – monitoring and operations" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="WebSites cloud &#x2013; management operations">
<div class="book" title="Configuring WebSites cloud settings"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch07lvl2sec122" class="calibre1"/>Configuring WebSites cloud settings</h2></div></div></div><p class="calibre8">This page can be<a id="id866" class="calibre1"/> used to modify website cloud setting such as SSL certificate and DNS names.</p><p class="calibre8">The following settings can be customized using this page:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Upload a new WebSites default certificate. By default, all WAP websites are configured with the self-signed SSL, which is a potential security issue. Using this option, cloud providers can upload the publicly trusted CA issued SSL for the website's usage. Normally, it would be the wildcard certificate consisting of the DNS suffix for websites as domain name.</li><li class="listitem">It can enable, disable, or force websites Windows authentication.</li><li class="listitem">It can allow or disallow <span class="strong"><strong class="calibre9">CUSTOM APPLICATION POOL IDENTITY</strong></span>.<div class="mediaobject"><img src="../images/00172.jpeg" alt="Configuring WebSites cloud settings" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem">Configuring <span class="strong"><strong class="calibre9">publishing settings</strong></span> includes the following:<div class="book"><ul class="itemizedlist1"><li class="listitem">Web Deploy DNS Record</li><li class="listitem">FTP Deploy <a id="id867" class="calibre1"/>DNS Records</li><li class="listitem">Publishing a certificate</li></ul></div><div class="mediaobject"><img src="../images/00173.jpeg" alt="Configuring WebSites cloud settings" class="calibre10"/></div><p class="calibre26"> </p></li></ul></div></div></div>

<div class="book" title="WebSites cloud &#x2013; management operations">
<div class="book" title="The block list – IP filtering"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch07lvl2sec123" class="calibre1"/>The block list – IP filtering</h2></div></div></div><p class="calibre8">Windows Azure Pack provides<a id="id868" class="calibre1"/> a strong IP filtering mechanism, which can be used to prevent and a <span class="strong"><strong class="calibre9">DOS</strong></span> (<span class="strong"><strong class="calibre9">Denial of Service</strong></span>) attack. A <a id="id869" class="calibre1"/>block list can be used to block a selected IP or a range of IP addresses to access websites. This can be automated to prevent any attack in conjunction with a firewall device.</p><p class="calibre8">The following steps outline the process to block any given IP range to access websites:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Browse the <span class="strong"><strong class="calibre9">BLOCK LIST</strong></span> tab.<div class="mediaobject"><img src="../images/00174.jpeg" alt="The block list – IP filtering" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="2">Click on <span class="strong"><strong class="calibre9">START CREATING A BLOCK LIST</strong></span>.</li><li class="listitem" value="3">Enter the required IP<a id="id870" class="calibre1"/> range to block:<div class="mediaobject"><img src="../images/00175.jpeg" alt="The block list – IP filtering" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="4">This page can also be used to create an additional block list, delete any existing block list and upload a CSV file for blocking access.</li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="WebSites cloud &#x2013; management operations">
<div class="book" title="Websites cloud platform credentials"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_6"><a id="ch07lvl2sec124" class="calibre1"/>Websites cloud platform credentials</h2></div></div></div><p class="calibre8">The <span class="strong"><strong class="calibre9">CREDENTIALS</strong></span> tab displays all <a id="id871" class="calibre1"/>credentials configured for authentication and authorization between websites cloud components. These credentials are defined while deploying the first website controller role. Any of these can be easily edited by selecting the credential's name and hitting <span class="strong"><strong class="calibre9">edit</strong></span> at<a id="id872" class="calibre1"/> the bottom pane. Browse the <span class="strong"><strong class="calibre9">CREDENTIALS</strong></span> tab under website cloud settings to modify any credential.</p><div class="mediaobject"><img src="../images/00176.jpeg" alt="Websites cloud platform credentials" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div class="book" title="WebSites cloud &#x2013; management operations">
<div class="book" title="Websites IP SSL"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_7"><a id="ch07lvl2sec125" class="calibre1"/>Websites IP SSL</h2></div></div></div><p class="calibre8">Tenants' websites can be configured to use the IP-based SSL certificate, providing more secure mechanisms of the <a id="id873" class="calibre1"/>website's access. In this case, a service provider must configure all website-specific IP addresses on all front end servers.</p><p class="calibre8">The IP SSL page under websites cloud settings can be used to configure the VIP and local address between VIP. VIP settings and their port mapping must also be configured on load balancer devices for the IP SSL to function.</p><div class="mediaobject"><img src="../images/00177.jpeg" alt="Websites IP SSL" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Authoring WebSite cloud plans" id="20R681-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec61" class="calibre1"/>Authoring WebSite cloud plans</h1></div></div></div><p class="calibre8">Windows Azure Pack plans<a id="id874" class="calibre1"/> for websites allows administrators to offer websites cloud services to tenants <a id="id875" class="calibre1"/>with granular control on services and resources, such as CPU or memory. Multiple plans can be created from a single cloud farm with different limits and capabilities. See <a class="calibre1" title="Chapter 5. Assigning Cloud Services – Plans, Add-Ons, Tenant Accounts, and Subscriptions" href="part0051_split_000.html#1GKCM2-b479cf466c26404ca54119871a9b2715">Chapter 5</a>, <span class="strong"><em class="calibre12">Assigning Cloud Services – Plans, Add-Ons, Tenant Accounts, and Subscriptions</em></span> to know more about Windows Azure Pack plans.</p></div>

<div class="book" title="Authoring WebSite cloud plans" id="20R681-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Websites cloud plans overview and service models"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec126" class="calibre1"/>Websites cloud plans overview and service models</h2></div></div></div><p class="calibre8">WAP plans for websites <a id="id876" class="calibre1"/>are configured to provide three service <a id="id877" class="calibre1"/>models:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Intro</li><li class="listitem">Basic</li><li class="listitem">Reserved</li></ul></div><p class="calibre8">For each plan, 17 quota settings can be configured, which include QOS such as subscription CPU time, maximum memory working set, and more.</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">The Intro mode</strong></span>: This is also<a id="id878" class="calibre1"/> known as the free mode. It provides a shared platform for hosting a tenant's websites. This is an entry level offering and should be used for test and development purposes. A tenant website in the Intro mode can be upgraded to basic and reserved as per requirement. This mode does not include any scaling capabilities.</li><li class="listitem"><span class="strong"><strong class="calibre9">The Basic mode</strong></span>: This mode also<a id="id879" class="calibre1"/> works in a shared model, but it provides better performance than free mode websites. This provides a low-cost websites hosting for tenants' websites with production-ready features, such as easy scaling, custom DNS names, and more.</li><li class="listitem"><span class="strong"><strong class="calibre9">The Reserved mode</strong></span>: In the <a id="id880" class="calibre1"/>Reserved mode, a tenant's websites can be provisioned to run on dedicated resources such as CPU core, memory, or bandwidth. This mode<a id="id881" class="calibre1"/> provides the highest performance in comparison to the other two models.</li></ul></div><p class="calibre8">Service providers can<a id="id882" class="calibre1"/> create multiple plans as per available platform capabilities and business strategies. Basically, plans can be configured in two manners:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Standard plans</strong></span>: These are <a id="id883" class="calibre1"/>publicly available plans for standard websites requirements</li><li class="listitem"><span class="strong"><strong class="calibre9">Customized plans</strong></span>: These<a id="id884" class="calibre1"/> are dedicated for a particular tenant as per customized requirements and contracts</li></ul></div></div></div>

<div class="book" title="Authoring WebSite cloud plans" id="20R681-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Creating a plan for WebSites cloud offerings"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec127" class="calibre1"/>Creating a plan for WebSites cloud offerings</h2></div></div></div><p class="calibre8">The following<a id="id885" class="calibre1"/> steps outline the steps to create and configure a WAP plan for offering WebSites cloud services to tenants:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the management portal.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">plans</strong></span> workspace.</li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre9">Let's Create a Hosting Plan</strong></span>.</li><li class="listitem" value="4">Enter a friendly name for the plan.<div class="mediaobject"><img src="../images/00178.jpeg" alt="Creating a plan for WebSites cloud offerings" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Select the <span class="strong"><strong class="calibre9">WEB SITES CLOUD </strong></span>on <span class="strong"><strong class="calibre9">PLAN SERVICES</strong></span> page.<div class="mediaobject"><img src="../images/00179.jpeg" alt="Creating a plan for WebSites cloud offerings" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="6">Select Add-Ons if applicable.</li><li class="listitem" value="7">Click on the newly<a id="id886" class="calibre1"/> created plan to start the configuration.<div class="mediaobject"><img src="../images/00180.jpeg" alt="Creating a plan for WebSites cloud offerings" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="8">Click on the plan name under the <span class="strong"><strong class="calibre9">PLAN SERVICES</strong></span> workspace to start customizing.</li><li class="listitem" value="9">Configure additional <a id="id887" class="calibre1"/>QOS and capabilities settings as per requirements and business strategies.<div class="mediaobject"><img src="../images/00181.jpeg" alt="Creating a plan for WebSites cloud offerings" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="10">Save the changes and configure the additional plan setting such as invite code, advertisement, changing access to public, and more. See <a class="calibre1" title="Chapter 5. Assigning Cloud Services – Plans, Add-Ons, Tenant Accounts, and Subscriptions" href="part0051_split_000.html#1GKCM2-b479cf466c26404ca54119871a9b2715">Chapter 5</a>, <span class="strong"><em class="calibre12">Assigning Cloud Services – Plans, Add-Ons, Tenant Accounts, and Subscriptions</em></span>, to know more on performing these operations on WAP plans.</li></ol><div class="calibre27"/></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="WebSites cloud &#x2013; a tenant's experience"><div class="book" id="21PMQ2-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec62" class="calibre1"/>WebSites cloud – a tenant's experience</h1></div></div></div><p class="calibre8">Using the tenant portal, tenants can provision and manage their websites on the Windows Azure pack Websites<a id="id888" class="calibre1"/> cloud in a self-service and automated manner. In this topic, we will walk through the tenant's experience for WAP websites provisioning and management operations.</p></div>

<div class="book" title="WebSites cloud &#x2013; a tenant's experience">
<div class="book" title="Creating Websites – Quick Create and the Web App Gallery"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec128" class="calibre1"/>Creating Websites – Quick Create and the Web App Gallery</h2></div></div></div><p class="calibre8">The following steps <a id="id889" class="calibre1"/>outline the process followed by tenants to provision websites:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows<a id="id890" class="calibre1"/> Azure Pack tenant portal.</li><li class="listitem" value="2">Subscribe to the websites plans using the configured invite code.</li><li class="listitem" value="3">The <span class="strong"><strong class="calibre9">WEB SITES</strong></span> workspace will not be visible in the management portal.<div class="mediaobject"><img src="../images/00182.jpeg" alt="Creating Websites – Quick Create and the Web App Gallery" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="4">Click on <span class="strong"><strong class="calibre9">CREATE A WEB SITE</strong></span> to start; select <span class="strong"><strong class="calibre9">QUICK CREATE</strong></span> or <span class="strong"><strong class="calibre9">FROM GALLERY</strong></span> as per choices and requirements. Note that the preconfigured DNS suffix by cloud provider is already added to the URL.<div class="mediaobject"><img src="../images/00183.jpeg" alt="Creating Websites – Quick Create and the Web App Gallery" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Websites will be created in a moment and will be available for access and further development.<div class="mediaobject"><img src="../images/00184.jpeg" alt="Creating Websites – Quick Create and the Web App Gallery" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="6">Clicking on <span class="strong"><strong class="calibre9">FROM GALLERY</strong></span> will display the Web App Gallery to choose preconfigured<a id="id891" class="calibre1"/> website templates and other<a id="id892" class="calibre1"/> web applications.<div class="mediaobject"><img src="../images/00185.jpeg" alt="Creating Websites – Quick Create and the Web App Gallery" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="7">Tenants can choose gallery items of their choice and proceed further.</li><li class="listitem" value="8">Enter gallery item-specific values including URL; then, click on the check mark to deploy a website.<div class="mediaobject"><img src="../images/00186.jpeg" alt="Creating Websites – Quick Create and the Web App Gallery" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="9">Now, let's try to<a id="id893" class="calibre1"/> open one of the newly created <a id="id894" class="calibre1"/>websites called <code class="email">quick.wapcloud</code>.<div class="mediaobject"><img src="../images/00187.jpeg" alt="Creating Websites – Quick Create and the Web App Gallery" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div><p class="calibre8">Tenants can now publish content to the newly created website using traditional publishing tools, such as FTP and WebDeploy, or they can also do so using source control mechanisms such as Git.</p></div></div>

<div class="book" title="WebSites cloud &#x2013; a tenant's experience">
<div class="book" title="Management operations – tenants' websites"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec129" class="calibre1"/>Management operations – tenants' websites</h2></div></div></div><p class="calibre8">Windows Azure pack provides self-service portal capabilities to tenants for performing, monitoring, and administrating <a id="id895" class="calibre1"/>on their websites. Let's have a look at the management and monitoring operations available for tenants.</p><p class="calibre8">Using the <span class="strong"><strong class="calibre9">WEB SITES</strong></span> workspace on the tenant's portal, tenants can do the following:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Browse the website</li><li class="listitem">Stop the website</li><li class="listitem">Restart the website</li><li class="listitem">Delete the website</li></ul></div><p class="calibre8">Lets have a look at other management and administration operations available for tenants:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong class="calibre9">quick settings</strong></span>: Using a quick setting button under a website, tenants can learn and perform the following configurations:<div class="book"><ul class="itemizedlist1"><li class="listitem">Getting tools such as WebMatrix</li><li class="listitem">Publishing the application</li><li class="listitem">Setting up the deployment from the source control</li></ul></div><div class="mediaobject"><img src="../images/00188.jpeg" alt="Management operations – tenants' websites" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem"><span class="strong"><strong class="calibre9">DASHBOARD</strong></span>: This displays the websites statics data, such as CPU, memory utilization, data utilization, and additional settings, such as VIP. Adding new deployment slots can be performed on this page.. This page can also be used to manage linked resources such as database or storage.</li><li class="listitem"><span class="strong"><strong class="calibre9">MONITOR</strong></span>: This<a id="id896" class="calibre1"/> displays the website usage statics. Additional statics counters can be also added, such as the count of HTTP errors or success.<div class="mediaobject"><img src="../images/00189.jpeg" alt="Management operations – tenants' websites" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem"><span class="strong"><strong class="calibre9">WEBJOBS</strong></span>: This enables tenants to run continuously or on-demand scripts for any web application deployed in the WAP websites cloud.<p class="calibre15">WAP supports the following types of files to be uploaded in webjobs:</p><div class="book"><ul class="itemizedlist1"><li class="listitem"><code class="email">cmd</code>, <code class="email">.bat</code>, <code class="email">.exe</code> (Windows)</li><li class="listitem"><code class="email">.ps1</code> (Windows PowerShell)</li><li class="listitem">.<code class="email">sh</code> (Bash)</li><li class="listitem"><code class="email">.php</code> (PHP: Hypertext Preprocessor)</li><li class="listitem"><code class="email">.py</code> (Python)</li><li class="listitem"><code class="email">.js</code> (JavaScript)</li></ul></div></li></ul></div><p class="calibre8">The following steps outline the process to configure and manage WebJobs:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Browse the <span class="strong"><strong class="calibre9">WEBJOBS</strong></span> tab under the website's settings in the tenant portal.</li><li class="listitem" value="2">Click on <span class="strong"><strong class="calibre9">ADD A JOB</strong></span> to<a id="id897" class="calibre1"/> add a new WebJob.</li><li class="listitem" value="3">Enter the <span class="strong"><strong class="calibre9">NAME</strong></span> WebJob, upload the script file, and configure the execution type (continuously or on demand).<div class="mediaobject"><img src="../images/00190.jpeg" alt="Management operations – tenants' websites" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div><p class="calibre8">The <span class="strong"><strong class="calibre9">CONFIGURE</strong></span> tab allows tenants to choose platforms and versions for their websites. Configuration of these items are directly dependent on the web application platform and architecture and may vary from deployment to deployment. This includes settings as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The .NET framework version</li><li class="listitem">The PHP version</li><li class="listitem">The managed pipeline mode (classic or integrated)</li><li class="listitem">Windows authentication</li><li class="listitem">Custom identity pool</li><li class="listitem">Web sockets</li><li class="listitem">SSL certificates</li><li class="listitem">Domain names</li><li class="listitem">SSL bindings</li><li class="listitem">Application diagnostics</li><li class="listitem">Site diagnostics</li><li class="listitem">Additional app settings <a id="id898" class="calibre1"/>such as virtual directories<div class="mediaobject"><img src="../images/00191.jpeg" alt="Management operations – tenants' websites" class="calibre10"/></div><p class="calibre26"> </p></li></ul></div><p class="calibre8">The <span class="strong"><strong class="calibre9">SCALE</strong></span> tab under the website's setting allows tenants to perform the following operations:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Upgrade the website mode between three service models (intro, basic, and reserved)</li><li class="listitem">Scale in and out of a number of instances<div class="mediaobject"><img src="../images/00192.jpeg" alt="Management operations – tenants' websites" class="calibre10"/></div><p class="calibre26"> </p></li></ul></div><p class="calibre8">Websites and web applications deployed by tenants may need additional resources such as database or storage. The<a id="id899" class="calibre1"/> <span class="strong"><strong class="calibre9">LINKED RESOURCES</strong></span> tabs allows tenants to link these resources with websites.</p><div class="mediaobject"><img src="../images/00193.jpeg" alt="Management operations – tenants' websites" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Windows Azure Pack Service Bus"><div class="book" id="22O7C2-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec63" class="calibre1"/>Windows Azure Pack Service Bus</h1></div></div></div><p class="calibre8">Windows Azure Pack Service Bus provides a reliable messaging service, which can be used by a tenant's applications to pass information or messages. This service is consistent to Microsoft's public cloud offering Azure Service Bus. Applications can be hosted anywhere; that is, they <a id="id900" class="calibre1"/>can be hosted on the provider's cloud, inside the tenant's datacenter, or anywhere else.</p><p class="calibre8">Windows Azure Pack Service Bus can be leveraged by the organization's internal developers for passing messages between applications in an efficient manner. This can be offered as a service by service providers to external tenants enabling cloud-driven applications' messaging.</p><p class="calibre8">Service Bus in <a id="id901" class="calibre1"/>Windows Azure Pack provides two solutions:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Service Bus queues</li><li class="listitem">Service Bus topics</li></ul></div></div>

<div class="book" title="Windows Azure Pack Service Bus">
<div class="book" title="Understanding Service Bus queues"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch07lvl2sec130" class="calibre1"/>Understanding Service Bus queues</h2></div></div></div><p class="calibre8">Service Bus queues offer load leveling by adding a Service Bus namespace in between both applications, which allows message receivers to receive messages as per their own pace and resource <a id="id902" class="calibre1"/>availabilities. This enables efficient and reliable message transfer between loosely coupled applications.</p><p class="calibre8">There can be additional receivers as well that can receive messages from the same Service Bus name space. The following diagram explains the working mechanism of Service Bus queues.</p><div class="mediaobject"><img src="../images/00194.jpeg" alt="Understanding Service Bus queues" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div class="book" title="Windows Azure Pack Service Bus">
<div class="book" title="Understanding Service Bus topics"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch07lvl2sec131" class="calibre1"/>Understanding Service Bus topics</h2></div></div></div><p class="calibre8">Service Bus topics <a id="id903" class="calibre1"/>provide publishing and subscribing capabilities that can be utilized by multiple subscribers and receivers to receive messages independently to each other simultaneously. Subscribers can also be configured to receive only filtered messages.</p><div class="mediaobject"><img src="../images/00195.jpeg" alt="Understanding Service Bus topics" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">In topics, instead of using a direct communication model, a separate model of communication, <span class="strong"><em class="calibre12">Publish and subscribe,</em></span> is used. In this model, communication is established via an intermediate, which is a topic. Service Bus topics provides additional capabilities such as one to many communication while comparing with queues. Topics allow tenants to perform<a id="id904" class="calibre1"/> large-scale message transportation, which comprises of a large number of users, applications, and devices.</p></div></div>

<div class="book" title="Windows Azure Pack Service Bus">
<div class="book" title="The Service Bus architecture"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec132" class="calibre1"/>The Service Bus architecture</h2></div></div></div><p class="calibre8">The Windows Azure Pack Service Bus architecture contains the following components:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Windows Server 2012 or 2012 R2 operating system</li><li class="listitem">SQL Server<a id="id905" class="calibre1"/> database</li><li class="listitem">Windows Azure Pack Service Bus 1.1</li><li class="listitem">Microsoft Windows Fabric</li></ul></div><p class="calibre8">It is recommended to deploy multiple Service Bus servers with a SQL database in a highly available mode to eliminate any single point of failure. This architecture works in a farm model; multiple servers can be deployed under a single farm providing resiliency and load balancing</p></div></div>

<div class="book" title="Windows Azure Pack Service Bus">
<div class="book" title="Installing and configuring the Service Bus cloud farm"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch07lvl2sec133" class="calibre1"/>Installing and configuring the Service Bus cloud farm</h2></div></div></div><p class="calibre8">The following<a id="id906" class="calibre1"/> steps are required to perform the installation and<a id="id907" class="calibre1"/> configuration of a Service Bus farm:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the server designated for installing Service Bus.</li><li class="listitem" value="2">Download and run Microsoft Web PI.</li><li class="listitem" value="3">Search for Service Bus and select <span class="strong"><strong class="calibre9">Windows Azure Pack Service Bus 1.1</strong></span> to install it.<div class="mediaobject"><img src="../images/00196.jpeg" alt="Installing and configuring the Service Bus cloud farm" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="4">Install Service Bus components by the following Web PI instructions. Exit post the successful installation.<div class="mediaobject"><img src="../images/00197.jpeg" alt="Installing and configuring the Service Bus cloud farm" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Launch the Service <a id="id908" class="calibre1"/>Bus configuration app via the<a id="id909" class="calibre1"/> start menu.</li><li class="listitem" value="6">Click on <span class="strong"><strong class="calibre9">Create a New Farm</strong></span> with default or custom settings as per requirements. Choosing default settings is suitable for most of the deployment models.<div class="mediaobject"><img src="../images/00198.jpeg" alt="Installing and configuring the Service Bus cloud farm" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="7">Enter the <a id="id910" class="calibre1"/>database server name and credentials; click <a id="id911" class="calibre1"/>on <span class="strong"><strong class="calibre9">Test Connection</strong></span> to test the connectivity.<div class="mediaobject"><img src="../images/00199.jpeg" alt="Installing and configuring the Service Bus cloud farm" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="8">Enter service account details, certification, and generation key (this is used to add new servers to the existing Service Bus farm).<div class="mediaobject"><img src="../images/00200.jpeg" alt="Installing and configuring the Service Bus cloud farm" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="9">Provide the default namespace for the Service Bus configuration.</li><li class="listitem" value="10">Enter service management portal <a id="id912" class="calibre1"/>access credentials; these will be used by Windows Azure Pack<a id="id913" class="calibre1"/> to communicate with Service Bus.<div class="mediaobject"><img src="../images/00201.jpeg" alt="Installing and configuring the Service Bus cloud farm" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="11">Review the settings<a id="id914" class="calibre1"/> in summary and click on the checkmark to start the deployment.</li><li class="listitem" value="12">The configuration<a id="id915" class="calibre1"/> process will start; monitor the logs in case of any errors. Click on the checkmark once this is completed.<div class="mediaobject"><img src="../images/00202.jpeg" alt="Installing and configuring the Service Bus cloud farm" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="Windows Azure Pack Service Bus">
<div class="book" title="Registering the Service Bus cloud with Windows Azure Pack"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch07lvl2sec134" class="calibre1"/>Registering the Service Bus cloud with Windows Azure Pack</h2></div></div></div><p class="calibre8">The following<a id="id916" class="calibre1"/> steps outline the process to register Windows Azure Pack with a Service Bus cloud farm:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows Azure Pack Management portal.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">service bus clouds</strong></span> workspace.<div class="mediaobject"><img src="../images/00203.jpeg" alt="Registering the Service Bus cloud with Windows Azure Pack" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="3">Click on <span class="strong"><strong class="calibre9">Connect to an existing Service Bus Cloud</strong></span>.</li><li class="listitem" value="4">Enter the <span class="strong"><strong class="calibre9">SERVICE BUS CLOUD</strong></span> endpoint and credentials for admin and tenant operations <a id="id917" class="calibre1"/>while configuring the Service Bus cloud configuration.</li><li class="listitem" value="5">Post successful registration, the newly registered Service Bus cloud will be visible under the <span class="strong"><strong class="calibre9">service bus clouds</strong></span> workspace.<div class="mediaobject"><img src="../images/00204.jpeg" alt="Registering the Service Bus cloud with Windows Azure Pack" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="Windows Azure Pack Service Bus">
<div class="book" title="Authoring a Service Bus plan"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_6"><a id="ch07lvl2sec135" class="calibre1"/>Authoring a Service Bus plan</h2></div></div></div><p class="calibre8">Like any other Windows Azure Pack cloud service offering, Service Bus can also be used by tenants via subscribing to relevant plans configured by service providers. See <a class="calibre1" title="Chapter 5. Assigning Cloud Services – Plans, Add-Ons, Tenant Accounts, and Subscriptions" href="part0051_split_000.html#1GKCM2-b479cf466c26404ca54119871a9b2715">Chapter 5</a>, <span class="strong"><em class="calibre12">Assigning Cloud Services – Plans, Add-Ons, Tenant Accounts, and Subscriptions</em></span> to know more about Windows Azure Pack plans. The following steps outline the process to author a Service<a id="id918" class="calibre1"/> Bus plan:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the management portal.</li><li class="listitem" value="2">Browse the <span class="strong"><strong class="calibre9">plans</strong></span> workspace and click on <span class="strong"><strong class="calibre9">CREATE A NEW HOSTING PLAN</strong></span>.</li><li class="listitem" value="3">Enter a friendly name for the plan.</li><li class="listitem" value="4">Select <span class="strong"><strong class="calibre9">SERVICE BUS</strong></span> and the newly registered Service Bus cloud in <span class="strong"><strong class="calibre9">PLAN SERVICES</strong></span>.<div class="mediaobject"><img src="../images/00205.jpeg" alt="Authoring a Service Bus plan" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Configure additional plan settings. Note that there are no quotas or any other settings available to configure. Service Bus cloud works on a shared model for all users without any per user quota or limitations.<div class="mediaobject"><img src="../images/00206.jpeg" alt="Authoring a Service Bus plan" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div>

<div class="book" title="Windows Azure Pack Service Bus">
<div class="book" title="Service Bus – a tenant's experience"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_7"><a id="ch07lvl2sec136" class="calibre1"/>Service Bus – a tenant's experience</h2></div></div></div><p class="calibre8">This topics discusses <a id="id919" class="calibre1"/> a tenant's experience for provisioning and using Service Bus operations from a tenant's point of view. A tenant must be subscribed to a WAP plan, which is configured to provide Service Bus offerings.</p><div class="book" title="Provisioning and accessing a Service Bus namespace and features"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch07lvl3sec32" class="calibre1"/>Provisioning and accessing a Service Bus namespace and features</h3></div></div></div><p class="calibre8">The following steps are to be<a id="id920" class="calibre1"/> performed by tenants for<a id="id921" class="calibre1"/> provisioning, using, and managing a Service Bus namespace:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Log into the Windows Azure Pack portal for tenants.</li><li class="listitem" value="2">Subscribe to WAP plans configured for Service Bus offerings.</li><li class="listitem" value="3">Browse the <span class="strong"><strong class="calibre9">service bus</strong></span> workspace.<div class="mediaobject"><img src="../images/00207.jpeg" alt="Provisioning and accessing a Service Bus namespace and features" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="4">Click on <span class="strong"><strong class="calibre9">CREATE A NAMESPACE</strong></span> to start creating a namespace.<div class="mediaobject"><img src="../images/00208.jpeg" alt="Provisioning and accessing a Service Bus namespace and features" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Post <a id="id922" class="calibre1"/>successful creation, the<a id="id923" class="calibre1"/> namespace will be available in a portal.</li><li class="listitem" value="6">Click on <span class="strong"><strong class="calibre9">Connection Info</strong></span> to know connectivity mechanisms regarding the namespace.<div class="mediaobject"><img src="../images/00209.jpeg" alt="Provisioning and accessing a Service Bus namespace and features" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="7">The <span class="strong"><strong class="calibre9">CONFIGURE</strong></span> tab of the namespace allows tenants to configure and manage accessing policies and primary and secondary keys for authorization.<div class="mediaobject"><img src="../images/00210.jpeg" alt="Provisioning and accessing a Service Bus namespace and features" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div><div class="book" title="Creating topics and queues"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch07lvl3sec33" class="calibre1"/>Creating topics and queues</h3></div></div></div><p class="calibre8">The <span class="strong"><strong class="calibre9">New Items</strong></span> workspace<a id="id924" class="calibre1"/> of the WAP portal is used to create new queues or topics. The following steps can be used for creating and managing topics and <a id="id925" class="calibre1"/>queues:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Click on the <span class="strong"><strong class="calibre9">NEW</strong></span> button at the bottom of the WAP tenant portal.</li><li class="listitem" value="2">Select <span class="strong"><strong class="calibre9">SERVICE BUS</strong></span>.</li><li class="listitem" value="3">Select the <span class="strong"><strong class="calibre9">QUEUE</strong></span> service or <span class="strong"><strong class="calibre9">TOPIC</strong></span> as per your choice and requirement.</li><li class="listitem" value="4">Provide a name and namespace for creating the required item.<div class="mediaobject"><img src="../images/00211.jpeg" alt="Creating topics and queues" class="calibre10"/></div><p class="calibre26"> </p></li><li class="listitem" value="5">Post successful provisioning, the newly created queue or topic will be visible in its respective tab under the selected namespace. Select any provisioned topic to queue to view its dashboard, which includes the utilization status and connectivity related information.<div class="mediaobject"><img src="../images/00212.jpeg" alt="Creating topics and queues" class="calibre10"/></div><p class="calibre26"> </p></li></ol><div class="calibre27"/></div></div></div></div>
<div class="book" title="Summary" id="23MNU1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch07lvl1sec64" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we covered two major PaaS cloud offerings that are WebSites and Service Bus. You learned about planning, deployment, and tenant experience for these services.</p><p class="calibre8">In the next chapter, we move ahead and learn about the planning and deployment of another cloud offering of Windows Azure Pack that is DBaaS.</p></div></body></html>