<html><head></head><body>
<div id="_idContainer096" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-45"><a id="_idTextAnchor171" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1.1">2</span></h1>
<h1 id="_idParaDest-46" class="calibre5"><a id="_idTextAnchor172" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.2.1">Getting Things Ready with Zabbix User Management</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.3.1">In this chapter, we will work on creating our first user groups, users, and user roles. </span><span class="kobospan" id="kobo.3.2">It’s very important to set these up in the correct manner, as they will give people access to your Zabbix environment with the correct permissions. </span><span class="kobospan" id="kobo.3.3">By going over these things step by step, we will make sure we have a structured Zabbix setup before continuing on with </span><span><span class="kobospan" id="kobo.4.1">this book.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.5.1">As a bonus, we will also set up some advanced user authentication using SAML and LDAP to make things easier for your Zabbix users and provide them with a way to use the login credentials they might already be using throughout your company. </span><span class="kobospan" id="kobo.5.2">We will go over all these steps in the order of the </span><span><span class="kobospan" id="kobo.6.1">following recipes:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.7.1">Creating </span><span><span class="kobospan" id="kobo.8.1">user groups</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.9.1">Using Zabbix </span><span><span class="kobospan" id="kobo.10.1">user roles</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.11.1">Creating your </span><span><span class="kobospan" id="kobo.12.1">first users</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.13.1">Azure AD SAML user authentication and JIT </span><span><span class="kobospan" id="kobo.14.1">user provisioning</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.15.1">OpenLDAP user authentication and JIT </span><span><span class="kobospan" id="kobo.16.1">user provisioning</span></span></li>
</ul>
<h1 id="_idParaDest-47" class="calibre5"><a id="_idTextAnchor173" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor174" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.17.1">Technical requirements</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.18.1">We can do all of the work in this chapter with any installed Zabbix setup. </span><span class="kobospan" id="kobo.18.2">If you haven’t installed Zabbix yet, check out the previous chapter to learn how to do so. </span><span class="kobospan" id="kobo.18.3">We will go through our Zabbix setup to get everything ready for our users to start logging in and using the </span><span><span class="kobospan" id="kobo.19.1">Zabbix frontend.</span></span></p>
<h1 id="_idParaDest-48" class="calibre5"><a id="_idTextAnchor175" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor176" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.20.1">Creating user groups</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.21.1">To log in to the</span><a id="_idTextAnchor177" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.22.1"> Zabbix frontend, we are going to need users. </span><span class="kobospan" id="kobo.22.2">Right now, we are logged in with the default user, which is logical</span><a id="_idIndexMarker085" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.23.1"> because we need a user to create users. </span><span class="kobospan" id="kobo.23.2">This isn’t a safe setup though, because we don’t want to keep using </span><strong class="source-inline"><span class="kobospan" id="kobo.24.1">zabbix</span></strong><span class="kobospan" id="kobo.25.1"> as a password. </span><span class="kobospan" id="kobo.25.2">So, we are going to learn how to create new users and group </span><span><span class="kobospan" id="kobo.26.1">them accordingly.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.27.1">It’s important to choose how you want to manage users in Zabbix before setting up user accounts. </span><span class="kobospan" id="kobo.27.2">If you want to use something such as LDAP or SAML, it’s a smart idea to make the choice to use one of those authentication methods right away, so you won’t have any </span><span><span class="kobospan" id="kobo.28.1">migration trouble.</span></span><a id="_idTextAnchor178" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor179" class="pcalibre calibre6 pcalibre1"/></p>
<h2 id="_idParaDest-49" class="calibre7"><a id="_idTextAnchor180" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.29.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.30.1">Now that we know how the Zabbix UI is structured and how to navigate it, we can start doing some actual configuration. </span><span class="kobospan" id="kobo.30.2">We’ll start out by creating some user groups to get familiar with the process and start using them. </span><span class="kobospan" id="kobo.30.3">This way, our Zabbix setup gets not only more structured but also </span><span><span class="kobospan" id="kobo.31.1">more secure.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.32.1">To get started with this, we’ll need a Zabbix server like the one we used in the previous recipes and the</span><a id="_idTextAnchor181" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.33.1"> knowledge we’ve acquired there to navigate to the correct </span><span><span class="kobospan" id="kobo.34.1">frontend sections.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.35.1">Looking at the following figure, we can see how</span><a id="_idTextAnchor182" class="pcalibre calibre6 pcalibre1"/><a id="_idIndexMarker086" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.36.1"> our example company, </span><strong class="bold"><span class="kobospan" id="kobo.37.1">Cloud Hoster</span></strong><span class="kobospan" id="kobo.38.1">, is set up. </span><span class="kobospan" id="kobo.38.2">We will create the users seen in the diagram to create a structured and solid </span><span><span class="kobospan" id="kobo.39.1">user setup:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer044">
<span class="kobospan" id="kobo.40.1"><img alt="Figure 2.1 – Cloud Hoster department diagram" src="image/B19803_02_01.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.41.1">Figure 2.1 – Cloud Hoster department diagram</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.42.1">So, </span><strong class="bold"><span class="kobospan" id="kobo.43.1">Cloud Hoster</span></strong><span class="kobospan" id="kobo.44.1"> has some departments that need access to the Zabbix frontend and others that don’t need it at all. </span><span class="kobospan" id="kobo.44.2">Let’s say</span><a id="_idIndexMarker087" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.45.1"> we want to give the following departments access to the </span><a id="_idIndexMarker088" class="pcalibre calibre6 pcalibre1"/><span><span class="kobospan" id="kobo.46.1">Zabbix frontend:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.47.1">Networking</span></strong><span class="kobospan" id="kobo.48.1">: To configure and monitor their </span><span><span class="kobospan" id="kobo.49.1">network devices</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.50.1">Infrastructure</span></strong><span class="kobospan" id="kobo.51.1">: To configure and monitor their </span><span><span class="kobospan" id="kobo.52.1">Linux servers</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.53.1">Buying and Inventory</span></strong><span class="kobospan" id="kobo.54.1">: To look at inventory information and compare it with other </span><span><span class="kobospan" id="kobo.55.1">internal too</span><a id="_idTextAnchor183" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor184" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.56.1">ls</span></span></li>
</ul>
<h2 id="_idParaDest-50" class="calibre7"><a id="_idTextAnchor185" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.57.1">How to do it…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.58.1">Let’s get start</span><a id="_idTextAnchor186" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.59.1">ed with creating these three groups in our </span><span><span class="kobospan" id="kobo.60.1">Zabbix UI:</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.61.1">To do this, navigate to </span><strong class="bold"><span class="kobospan" id="kobo.62.1">Users</span></strong><span class="kobospan" id="kobo.63.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.64.1">User groups</span></strong><span class="kobospan" id="kobo.65.1">, which will show you the </span><span><span class="kobospan" id="kobo.66.1">following page</span><a id="_idTextAnchor187" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.67.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer045">
<span class="kobospan" id="kobo.68.1"><img alt="Figure 2.2 – The Zabbix User groups window" src="image/B19803_02_02.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.69.1">Figure 2.2 – The Zabbix User groups window</span></p>
<ol class="calibre16">
<li value="2" class="calibre15"><span class="kobospan" id="kobo.70.1">Now, let’s start by </span><a id="_idIndexMarker089" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.71.1">creating the </span><strong class="bold"><span class="kobospan" id="kobo.72.1">Networking</span></strong><span class="kobospan" id="kobo.73.1"> group by clicking </span><strong class="bold"><span class="kobospan" id="kobo.74.1">Create user group</span></strong><span class="kobospan" id="kobo.75.1"> in the top-right corner. </span><span class="kobospan" id="kobo.75.2">This will bring you to the </span><span><span class="kobospan" id="kobo.76.1">following screen</span><a id="_idTextAnchor188" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.77.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer046">
<span class="kobospan" id="kobo.78.1"><img alt="Figure 2.3 – The Zabbix User groups configuration window" src="image/B19803_02_03.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.79.1">Figure 2.3 – The Zabbix User groups configuration window</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.80.1">We will ne</span><a id="_idTextAnchor189" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.81.1">ed to fill in the information, starting with </span><strong class="bold"><span class="kobospan" id="kobo.82.1">Group name</span></strong><span class="kobospan" id="kobo.83.1">, which will of course be </span><strong class="source-inline"><span class="kobospan" id="kobo.84.1">Networking</span></strong><span class="kobospan" id="kobo.85.1">. </span><span class="kobospan" id="kobo.85.2">There are no users for this group yet, so we’ll skip that one. </span><strong class="bold"><span class="kobospan" id="kobo.86.1">Frontend access</span></strong><span class="kobospan" id="kobo.87.1"> gives us the option to provide authentication; if you select </span><strong class="bold"><span class="kobospan" id="kobo.88.1">LDAP</span></strong><span class="kobospan" id="kobo.89.1"> here, LDAP authentication will be used for authenticating. </span><span class="kobospan" id="kobo.89.2">We will keep it as </span><strong class="bold"><span class="kobospan" id="kobo.90.1">System default</span></strong><span class="kobospan" id="kobo.91.1">, which uses the internal Zabbix </span><span><span class="kobospan" id="kobo.92.1">authentication system.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.93.1">Multi-factor authentication</span></p>
<p class="callout"><span class="kobospan" id="kobo.94.1">New to Zabbix 7.0 is the ability to use </span><a id="_idIndexMarker090" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.95.1">multi-factor authentication. </span><span class="kobospan" id="kobo.95.2">If we want users to be forced to use this, we can set that up in the user group here. </span><span class="kobospan" id="kobo.95.3">Before doing that, however, make sure to set up multi-factor authentication under </span><strong class="bold"><span class="kobospan" id="kobo.96.1">Users | </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.97.1">Authentication</span></strong></span><span><span class="kobospan" id="kobo.98.1">.</span></span></p>
<ol class="calibre16">
<li value="3" class="calibre15"><span class="kobospan" id="kobo.99.1">Now, let’s navigate to the </span><a id="_idIndexMarker091" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.100.1">next tab on this page, which is </span><span><strong class="bold"><span class="kobospan" id="kobo.101.1">Template permission</span><a id="_idTextAnchor190" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.102.1">s</span></strong></span><span><span class="kobospan" id="kobo.103.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer047">
<span class="kobospan" id="kobo.104.1"><img alt="Figure 2.4 – The Zabbix User groups Template permissions configuration window" src="image/B19803_02_04.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.105.1">Figure 2.4 – The Zabbix User groups Template permissions configuration window</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.106.1">Here, we can specify what host groups our group will have access to. </span><span class="kobospan" id="kobo.106.2">There’s a default host group for </span><strong class="bold"><span class="kobospan" id="kobo.107.1">Network devices</span></strong><span class="kobospan" id="kobo.108.1"> already, which we will use in </span><span><span class="kobospan" id="kobo.109.1">this example.</span></span></p>
<ol class="calibre16">
<li value="4" class="calibre15"><span class="kobospan" id="kobo.110.1">Click </span><strong class="bold"><span class="kobospan" id="kobo.111.1">Select</span></strong><span class="kobospan" id="kobo.112.1"> to take you to a pop-up window with host groups available. </span><span class="kobospan" id="kobo.112.2">Select </span><strong class="bold"><span class="kobospan" id="kobo.113.1">Templates/Network devices</span></strong><span class="kobospan" id="kobo.114.1"> here and it’ll take you back to the previous window, with the group </span><span><span class="kobospan" id="kobo.115.1">filled in.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.116.1">Select </span><span><strong class="bold"><span class="kobospan" id="kobo.117.1">Read-write</span></strong></span><span><span class="kobospan" id="kobo.118.1"> permissions.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.119.1">We won’t</span><a id="_idTextAnchor191" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.120.1"> be adding anything else, so click the big blue </span><strong class="bold"><span class="kobospan" id="kobo.121.1">Add</span></strong><span class="kobospan" id="kobo.122.1"> button to finish creating this </span><span><span class="kobospan" id="kobo.123.1">host group.</span></span></li>
</ol>
<p class="callout-heading"><span class="kobospan" id="kobo.124.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.125.1">When using Zabbix authentication such as HTTP, LDAP, or SAML, we still need to create our users internally with the right permissions if we do not use JIT user provisioning. </span><span class="kobospan" id="kobo.125.2">To do so, configure your users to match your authentication method’s username in Zabbix and use the authentication method for password management. </span><span class="kobospan" id="kobo.125.3">When using JIT user provisioning, this is not something we have to </span><span><span class="kobospan" id="kobo.126.1">worry about.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.127.1">Now we will have a </span><a id="_idIndexMarker092" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.128.1">new user group called </span><strong class="bold"><span class="kobospan" id="kobo.129.1">Networking</span></strong><span class="kobospan" id="kobo.130.1"> that is only allowed to read and write to the </span><strong class="bold"><span class="kobospan" id="kobo.131.1">Templates/Network devices</span></strong> <span><span class="kobospan" id="kobo.132.1">template grou</span><a id="_idTextAnchor192" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.133.1">p:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer048">
<span class="kobospan" id="kobo.134.1"><img alt="Figure 2.5 – The Zabbix User groups window" src="image/2.5.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.135.1">Figure 2.5 – The Zabbix User groups window</span></p>
<ol class="calibre16">
<li value="7" class="calibre15"><span class="kobospan" id="kobo.136.1">Let’s repeat this process to create a new </span><strong class="bold"><span class="kobospan" id="kobo.137.1">Infrastructure</span></strong><span class="kobospan" id="kobo.138.1"> user group, except instead of adding the </span><strong class="bold"><span class="kobospan" id="kobo.139.1">Templates/Network devices</span></strong><span class="kobospan" id="kobo.140.1"> template group, we’ll add the </span><strong class="bold"><span class="kobospan" id="kobo.141.1">Linux servers</span></strong><span class="kobospan" id="kobo.142.1"> host group, </span><span><span class="kobospan" id="kobo.143.1">like this</span><a id="_idTextAnchor193" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.144.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer049">
<span class="kobospan" id="kobo.145.1"><img alt="Figure 2.6 – The Zabbix User groups Permissions configuration window with one host group" src="image/B19803_02_06.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.146.1">Figure 2.6 – The Zabbix User groups Permissions configuration window with one host group</span></p>
<ol class="calibre16">
<li value="8" class="calibre15"><span class="kobospan" id="kobo.147.1">Click </span><strong class="bold"><span class="kobospan" id="kobo.148.1">Add</span></strong><span class="kobospan" id="kobo.149.1"> to sa</span><a id="_idTextAnchor194" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.150.1">ve this </span><span><span class="kobospan" id="kobo.151.1">host group.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.152.1">Repeat the steps again and to add </span><strong class="bold"><span class="kobospan" id="kobo.153.1">Buying and Inventory</span></strong><span class="kobospan" id="kobo.154.1"> user group, we’ll do something differently. </span><span class="kobospan" id="kobo.154.2">We’ll repeat the process we’ve just done except for the part with the permissions. </span><span class="kobospan" id="kobo.154.3">We want </span><strong class="bold"><span class="kobospan" id="kobo.155.1">Buying and Inventory</span></strong><span class="kobospan" id="kobo.156.1"> to be able to read our inventory data, but </span><a id="_idIndexMarker093" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.157.1">we don’t want them to actually change our host configuration. </span><span class="kobospan" id="kobo.157.2">Add both the </span><strong class="bold"><span class="kobospan" id="kobo.158.1">Templates/Network devices</span></strong><span class="kobospan" id="kobo.159.1"> template group and </span><strong class="bold"><span class="kobospan" id="kobo.160.1">Linux servers</span></strong><span class="kobospan" id="kobo.161.1"> host group to the user group, but with only </span><strong class="bold"><span class="kobospan" id="kobo.162.1">Read</span></strong><span class="kobospan" id="kobo.163.1"> permissions </span><span><span class="kobospan" id="kobo.164.1">like this:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer050">
<span class="kobospan" id="kobo.165.1"><img alt="Figure 2.7 – The Zabbix User groups Permissions configuration window with two groups" src="image/B19803_02_07_Combined.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.166.1">Figure 2.7 – The Zabbix User groups Permissions configuration window with two groups</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.167.1">Congratulations! </span><span class="kobospan" id="kobo.167.2">Finishing this means you’ve ended up with three different user groups and we ca</span><a id="_idTextAnchor195" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.168.1">n continue to create our first new users! </span><span class="kobospan" id="kobo.168.2">Let’s get </span><span><span class="kobospan" id="kobo.169.1">to it.</span></span><a id="_idTextAnchor196" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor197" class="pcalibre calibre6 pcalibre1"/></p>
<h2 id="_idParaDest-51" class="calibre7"><a id="_idTextAnchor198" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.170.1">There’s more...</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.171.1">Zabbix user groups are quite extensive and there is a lot more to it than there seems at first. </span><span class="kobospan" id="kobo.171.2">As the entire permission system is based on what user group(s) and user role you are part of, it is always a good idea to</span><a id="_idIndexMarker094" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.172.1"> read the Zabbix documentation </span><span><span class="kobospan" id="kobo.173.1">first: </span></span><a href="https://www.zabbix.com/documentation/current/en/manual/config/users_and_usergroups/usergroup" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.174.1">https://www.zabbix.com/documentation/current/en/manual/config/users_and_usergroups/usergroup</span></span></a><span><span><a id="_idTextAnchor199" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor200" class="pcalibre calibre6 pcalibre1"/></span></span><span><span class="kobospan" id="kobo.175.1">.</span></span></p>
<h1 id="_idParaDest-52" class="calibre5"><a id="_idTextAnchor201" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.176.1">Using Zabbix user roles</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.177.1">Since Zabbix 6.0, we can create user roles within our Zabbix system. </span><span class="kobospan" id="kobo.177.2">By creating our own user roles in Zabbix, it’s possible to </span><a id="_idIndexMarker095" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.178.1">provide additional permission settings. </span><span class="kobospan" id="kobo.178.2">In older Zabbix versions, we had the ability to assign one of three </span><span><span class="kobospan" id="kobo.179.1">user types:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.180.1">Users</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.181.1">Admin</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.182.1">Super admin</span></strong></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.183.1">What these user types did in earlier releases was restrict what Zabbix users could see in the frontend. </span><span class="kobospan" id="kobo.183.2">This was always </span><span><span class="kobospan" id="kobo.184.1">pre-defined though.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.185.1">Although these user groups are still in Zabbix, with the addition of user roles that we can create ourselves, we can set up our own frontend-related restrictions, making it possible to only show certain parts of the UI to certain Zabbix users. </span><span class="kobospan" id="kobo.185.2">This is done by limiting access to certain permissions a user group has by default as well as respecting the user </span><span><span class="kobospan" id="kobo.186.1">group-related permission</span><a id="_idTextAnchor202" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor203" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.187.1">s.</span></span></p>
<h2 id="_idParaDest-53" class="calibre7"><a id="_idTextAnchor204" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.188.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.189.1">For this recipe, we will need a Zabbix server, preferably the one set up in the previous recipe. </span><span class="kobospan" id="kobo.189.2">In the previous recipe, we set up different user groups to provide for different permissions on host groups. </span><span class="kobospan" id="kobo.189.3">Completely separate from the user group, we will apply certain user roles to our users to determine what they can see in the UI. </span><span class="kobospan" id="kobo.189.4">Let’s check out how to set up </span><a id="_idTextAnchor205" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.190.1">our </span><span><span class="kobospan" id="kobo.191.1">user role</span><a id="_idTextAnchor206" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor207" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.192.1">s.</span></span></p>
<h2 id="_idParaDest-54" class="calibre7"><a id="_idTextAnchor208" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.193.1">How to do it...</span></h2>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.194.1">First, navigate to the Zabbix frontend and go to </span><strong class="bold"><span class="kobospan" id="kobo.195.1">Users</span></strong><span class="kobospan" id="kobo.196.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.197.1">User roles</span></strong><span class="kobospan" id="kobo.198.1">. </span><span class="kobospan" id="kobo.198.2">This will show us the default user roles as you know them from older </span><span><span class="kobospan" id="kobo.199.1">Zabbix versions</span><a id="_idTextAnchor209" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.200.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer051">
<span class="kobospan" id="kobo.201.1"><img alt="Figure 2.8 – The default Zabbix User roles configuration window" src="image/B19803_02_09.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.202.1">Figure 2.8 – The default Zabbix User roles configuration window</span></p>
<ol class="calibre16">
<li value="2" class="calibre15"><span class="kobospan" id="kobo.203.1">Here, we can click on the blue </span><strong class="bold"><span class="kobospan" id="kobo.204.1">Create user role</span></strong><span class="kobospan" id="kobo.205.1"> button in the </span><span><span class="kobospan" id="kobo.206.1">top-right corner.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.207.1">We’ll set up a new </span><a id="_idIndexMarker096" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.208.1">user role called </span><strong class="source-inline1"><span class="kobospan" id="kobo.209.1">User+ role</span></strong><span class="kobospan" id="kobo.210.1">. </span><span class="kobospan" id="kobo.210.2">This role will be for Zabbix users with only read permissions, but who need more access than just the </span><strong class="bold"><span class="kobospan" id="kobo.211.1">Monitoring</span></strong><span class="kobospan" id="kobo.212.1">, </span><strong class="bold"><span class="kobospan" id="kobo.213.1">Inventory</span></strong><span class="kobospan" id="kobo.214.1">, and </span><strong class="bold"><span class="kobospan" id="kobo.215.1">Reports</span></strong> <span><span class="kobospan" id="kobo.216.1">navigational elements</span><a id="_idTextAnchor210" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.217.1">.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer052">
<span class="kobospan" id="kobo.218.1"><img alt="Figure 2.9 – The top part of a new Zabbix User role configuration window" src="image/B19803_02_10.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.219.1">Figure 2.9 – The top part of a new Zabbix User role configuration window</span></p>
<ol class="calibre16">
<li value="4" class="calibre15"><span class="kobospan" id="kobo.220.1">First thin</span><a id="_idTextAnchor211" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.221.1">gs first, make </span><a id="_idIndexMarker097" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.222.1">sure to enter </span><strong class="source-inline1"><span class="kobospan" id="kobo.223.1">User+ role</span></strong><span class="kobospan" id="kobo.224.1"> into the </span><span><strong class="bold"><span class="kobospan" id="kobo.225.1">Name</span></strong></span><span><span class="kobospan" id="kobo.226.1"> field.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.227.1">Let’s focus on the part where it states </span><strong class="bold"><span class="kobospan" id="kobo.228.1">Access to UI elements</span></strong><span class="kobospan" id="kobo.229.1"> first. </span><span class="kobospan" id="kobo.229.2">When </span><strong class="bold"><span class="kobospan" id="kobo.230.1">User</span></strong><span class="kobospan" id="kobo.231.1"> is selected for </span><strong class="bold"><span class="kobospan" id="kobo.232.1">User type</span></strong><span class="kobospan" id="kobo.233.1">, we are not able to add access rights to the user role. </span><span class="kobospan" id="kobo.233.2">So, let’s change the </span><strong class="bold"><span class="kobospan" id="kobo.234.1">User type</span></strong><span class="kobospan" id="kobo.235.1"> by selecting </span><strong class="bold"><span class="kobospan" id="kobo.236.1">Admin</span></strong><span class="kobospan" id="kobo.237.1"> in </span><span><span class="kobospan" id="kobo.238.1">the dropdown.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.239.1">I specifically want this user role named </span><strong class="source-inline1"><span class="kobospan" id="kobo.240.1">User+ role</span></strong><span class="kobospan" id="kobo.241.1"> to have the ability to access the maintenance</span><a id="_idIndexMarker098" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.242.1"> page. </span><span class="kobospan" id="kobo.242.2">Setting this up will look </span><span><span class="kobospan" id="kobo.243.1">like thi</span><a id="_idTextAnchor212" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.244.1">s:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer053">
<span class="kobospan" id="kobo.245.1"><img alt="Figure 2.10 – A new Zabbix User+ role with access to Maintenance" src="image/B19803_02_11.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.246.1">Figure 2.10 – A new Zabbix User+ role with access to Maintenance</span></p>
<ol class="calibre16">
<li value="7" class="calibre15"><span class="kobospan" id="kobo.247.1">Make sure</span><a id="_idTextAnchor213" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.248.1"> to also change </span><a id="_idIndexMarker099" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.249.1">the </span><strong class="bold"><span class="kobospan" id="kobo.250.1">Access to actions</span></strong><span class="kobospan" id="kobo.251.1"> section of the form by deselecting </span><strong class="bold"><span class="kobospan" id="kobo.252.1">Manage scheduled reports</span></strong> <span><span class="kobospan" id="kobo.253.1">as follow</span><a id="_idTextAnchor214" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.254.1">s:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer054">
<span class="kobospan" id="kobo.255.1"><img alt="Figure 2.11 – A new Zabbix User+ role with correct Access to actions settings" src="image/B19803_02_12.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.256.1">Figure 2.11 – A new Zabbix User+ role with correct Access to actions settings</span></p>
<ol class="calibre16">
<li value="8" class="calibre15"><span class="kobospan" id="kobo.257.1">Last, but not least, click </span><a id="_idIndexMarker100" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.258.1">on the blue </span><strong class="bold"><span class="kobospan" id="kobo.259.1">Add</span></strong><span class="kobospan" id="kobo.260.1"> button at the bottom of the form to add this </span><a id="_idTextAnchor215" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.261.1">new </span><span><span class="kobospan" id="kobo.262.1">user ro</span><a id="_idTextAnchor216" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor217" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.263.1">le.</span></span></li>
</ol>
<h2 id="_idParaDest-55" class="calibre7"><a id="_idTextAnchor218" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.264.1">How it works...</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.265.1">First, let’s break down the options we have when creating user roles </span><span><span class="kobospan" id="kobo.266.1">in Zabbix:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.267.1">Name</span></strong><span class="kobospan" id="kobo.268.1">: We can set a custom name for our user </span><span><span class="kobospan" id="kobo.269.1">role here.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.270.1">User type</span></strong><span class="kobospan" id="kobo.271.1">: User types still exist in Zabbix 6, although they are now assigned through user roles. </span><span class="kobospan" id="kobo.271.2">There’s still a limit to what can be seen by a certain user type, for example the </span><strong class="source-inline1"><span class="kobospan" id="kobo.272.1">User</span></strong><span class="kobospan" id="kobo.273.1"> type will never have more than read access and the </span><strong class="source-inline1"><span class="kobospan" id="kobo.274.1">Super admin</span></strong><span class="kobospan" id="kobo.275.1"> type is still unrestricted when it comes </span><span><span class="kobospan" id="kobo.276.1">to permissions.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.277.1">Access to UI elements</span></strong><span class="kobospan" id="kobo.278.1">: Here, we can restrict what a user can see on the Zabbix UI when they are assigned</span><a id="_idIndexMarker101" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.279.1"> to this </span><span><span class="kobospan" id="kobo.280.1">user role.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.281.1">Access to services</span></strong><span class="kobospan" id="kobo.282.1">: Service or SLA monitoring can be restricted here, as we might not want all users to have access </span><span><span class="kobospan" id="kobo.283.1">to it.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.284.1">Access to modules</span></strong><span class="kobospan" id="kobo.285.1">: Custom Zabbix frontend modules are fully integrated into the user role system, meaning we can select what frontend modules a Zabbix user </span><span><span class="kobospan" id="kobo.286.1">can see.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.287.1">Access to API</span></strong><span class="kobospan" id="kobo.288.1">: The Zabbix API can be restricted to certain user roles. </span><span class="kobospan" id="kobo.288.2">For example, you might only want a specific API user role, limiting the rest of the users’ access to the </span><span><span class="kobospan" id="kobo.289.1">Zabbix API.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.290.1">Access to actions</span></strong><span class="kobospan" id="kobo.291.1">: In Zabbix user roles, certain actions can be limited, including the ability to </span><a id="_idTextAnchor219" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.292.1">edit dashboards, maintenance API tokens, </span><span><span class="kobospan" id="kobo.293.1">and more.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.294.1">Now, let’s look at what we’ve changed between the user role called </span><strong class="source-inline"><span class="kobospan" id="kobo.295.1">User role</span></strong><span class="kobospan" id="kobo.296.1"> and the user role called </span><strong class="source-inline"><span class="kobospan" id="kobo.297.1">User+ role</span></strong><span class="kobospan" id="kobo.298.1">. </span><span class="kobospan" id="kobo.298.2">The default user role called </span><strong class="source-inline"><span class="kobospan" id="kobo.299.1">User role</span></strong><span class="kobospan" id="kobo.300.1"> has the following access to </span><span><span class="kobospan" id="kobo.301.1">UI elemen</span><a id="_idTextAnchor220" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.302.1">ts:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer055">
<span class="kobospan" id="kobo.303.1"><img alt="Figure 2.12 – Default Zabbix user role called User role Access to UI elements" src="image/B19803_02_13.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.304.1">Figure 2.12 – Default Zabbix user role called User role Access to UI elements</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.305.1">By default</span><a id="_idTextAnchor221" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.306.1">, we have three </span><a id="_idIndexMarker102" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.307.1">user roles in Zabbix 6, which mirror the available user types. </span><span class="kobospan" id="kobo.307.2">The user role we see here in </span><strong class="bold"><span class="kobospan" id="kobo.308.1">Name</span></strong><span class="kobospan" id="kobo.309.1"> mirrors the user type we have called </span><strong class="source-inline"><span class="kobospan" id="kobo.310.1">User</span></strong><span class="kobospan" id="kobo.311.1">. </span><span class="kobospan" id="kobo.311.2">It gives us access to the UI elements seen above, restricting the user role called </span><strong class="source-inline"><span class="kobospan" id="kobo.312.1">User role</span></strong><span class="kobospan" id="kobo.313.1"> to only be able to see certain things and make no </span><span><span class="kobospan" id="kobo.314.1">configuration changes.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.315.1">For example, it’s considered an impactful permission to be able to set </span><strong class="bold"><span class="kobospan" id="kobo.316.1">Maintenance</span></strong><span class="kobospan" id="kobo.317.1">. </span><span class="kobospan" id="kobo.317.2">Because of course, you could restrict important notifications by setting </span><strong class="bold"><span class="kobospan" id="kobo.318.1">Maintenance</span></strong><span class="kobospan" id="kobo.319.1">. </span><span class="kobospan" id="kobo.319.2">But here comes the catch, what if you </span><a id="_idIndexMarker103" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.320.1">explicitly want a Zabbix user to only be able to read information but still not have access to configuration pages? </span><span class="kobospan" id="kobo.320.2">In Zabbix 5.0, this wasn’t possible because you could only select the </span><strong class="bold"><span class="kobospan" id="kobo.321.1">User</span></strong><span class="kobospan" id="kobo.322.1">, </span><strong class="bold"><span class="kobospan" id="kobo.323.1">Admin</span></strong><span class="kobospan" id="kobo.324.1">, or </span><strong class="bold"><span class="kobospan" id="kobo.325.1">Super admin</span></strong><span class="kobospan" id="kobo.326.1"> types, immediately giving access to the entire configuration section when using the </span><strong class="bold"><span class="kobospan" id="kobo.327.1">Admin</span></strong><span class="kobospan" id="kobo.328.1"> and </span><strong class="bold"><span class="kobospan" id="kobo.329.1">Super admin</span></strong> <span><span class="kobospan" id="kobo.330.1">user types.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.331.1">Now, let’s see</span><a id="_idTextAnchor222" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.332.1"> what we did by creating a new user role called </span><span><strong class="source-inline"><span class="kobospan" id="kobo.333.1">User+ r</span><a id="_idTextAnchor223" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.334.1">ole</span></strong></span><span><span class="kobospan" id="kobo.335.1">:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer056">
<span class="kobospan" id="kobo.336.1"><img alt="Figure 2.13 – New Zabbix user role called User+ role Access to UI elements" src="image/B19803_02_14.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.337.1">Figure 2.13 – New Zabbix user role called User+ role Access to UI elements</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.338.1">Here, we can see what happens if </span><a id="_idIndexMarker104" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.339.1">we change the user type to </span><strong class="bold"><span class="kobospan" id="kobo.340.1">Admin</span></strong><span class="kobospan" id="kobo.341.1"> but do not select all the available </span><strong class="bold"><span class="kobospan" id="kobo.342.1">Access to UI elements</span></strong><span class="kobospan" id="kobo.343.1">. </span><span class="kobospan" id="kobo.343.2">We now have a user role with no access to important configuration pages but with access </span><span><span class="kobospan" id="kobo.344.1">to </span></span><span><strong class="bold"><span class="kobospan" id="kobo.345.1">Maintenance</span></strong></span><span><span class="kobospan" id="kobo.346.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.347.1">Combining that with the settings for </span><strong class="bold"><span class="kobospan" id="kobo.348.1">Access to actions</span></strong><span class="kobospan" id="kobo.349.1">, where we added the </span><strong class="bold"><span class="kobospan" id="kobo.350.1">Create and edit maintenance</span></strong><span class="kobospan" id="kobo.351.1"> setting as seen in </span><span><em class="italic"><span class="kobospan" id="kobo.352.1">Figure 2</span></em></span><em class="italic"><span class="kobospan" id="kobo.353.1">.11</span></em><span class="kobospan" id="kobo.354.1">, we would have full access to the </span><span><span class="kobospan" id="kobo.355.1">maintenance settings.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.356.1">When we assign this role to</span><a id="_idIndexMarker105" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.357.1"> a user in the next recipe and log in as that user, we will be able to see the following in our </span><span><span class="kobospan" id="kobo.358.1">Zabbix sid</span><a id="_idTextAnchor224" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.359.1">ebar:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer057">
<span class="kobospan" id="kobo.360.1"><img alt="Figure 2.14 – Custom User role Zabbix sidebar" src="image/B19803_02_15.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.361.1">Figure 2.14 – Custom User role Zabbix sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.362.1">This, of course, is just one of the many types of configurations we can use. </span><span class="kobospan" id="kobo.362.2">We also have the ability to allow Z</span><a id="_idTextAnchor225" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.363.1">abbix users access to menus and options through a number of parameters under a bunch of custom user roles. </span><span class="kobospan" id="kobo.363.2">We are free to set this up however we please, adding a lot of user flexibility </span><span><span class="kobospan" id="kobo.364.1">within Za</span><a id="_idTextAnchor226" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor227" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.365.1">bbix.</span></span></p>
<h2 id="_idParaDest-56" class="calibre7"><a id="_idTextAnchor228" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.366.1">There’s more...</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.367.1">Zabbix is currently in the process of working out user roles further, meaning that some parts might still be missing or you might see issues with them. </span><span class="kobospan" id="kobo.367.2">As it is a new feature, it is constantly being improved and extended. </span><span class="kobospan" id="kobo.367.3">Check out the Zabbix documentation for more information regarding this </span><span><span class="kobospan" id="kobo.368.1">feature: </span></span><a href="https://www.zabbix.com/documentation/6.4/en/manual/web_interface/frontend_sections/users/user_roles" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.369.1">https://www.zabbix.com/documentation/6.4/en/manual/web_interface/frontend_sections/users/user_roles</span></span></a></p>
<h1 id="_idParaDest-57" class="calibre5"><a id="_idTextAnchor229" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.370.1">Creating your first users</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.371.1">With our</span><a id="_idTextAnchor230" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.372.1"> newly created user groups and user roles, we’ve taken our first step toward a more structured and secure Zabbix</span><a id="_idIndexMarker106" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.373.1"> setup. </span><span class="kobospan" id="kobo.373.2">The next step is to actually assign some users to the newly created user groups to make sure they are assigned our new user permissions from the group, as well as making them part of a user role to provide the correct access to </span><span><span class="kobospan" id="kobo.374.1">UI ele</span><a id="_idTextAnchor231" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor232" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.375.1">ments.</span></span></p>
<h2 id="_idParaDest-58" class="calibre7"><a id="_idTextAnchor233" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.376.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.377.1">To get started, we’ll need the server and the newly created user groups from the last recipe. </span><span class="kobospan" id="kobo.377.2">So, let’s start with </span><span><span class="kobospan" id="kobo.378.1">the configuration.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.379.1">We know there are three departments in the </span><strong class="bold"><span class="kobospan" id="kobo.380.1">Cloud Hoster</span></strong><span class="kobospan" id="kobo.381.1"> company that are going to use our Zabbix installation. </span><span class="kobospan" id="kobo.381.2">We’ve created user groups for them, but there are also users in those departments that actually want to use our installation. </span><span class="kobospan" id="kobo.381.3">Let’s </span><span><span class="kobospan" id="kobo.382.1">meet </span><a id="_idTextAnchor234" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.383.1">them:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer058">
<span class="kobospan" id="kobo.384.1"><img alt="Figure 2.15 – Cloud Hoster users diagram" src="image/B19803_02_16.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.385.1">Figure 2.15 – Cloud Hoster users diagram</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.386.1">These are the users we need to configure for </span><strong class="bold"><span class="kobospan" id="kobo.387.1">Cloud Hoster</span></strong> <span><span class="kobospan" id="kobo.388.1">to</span><a id="_idTextAnchor235" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor236" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.389.1"> use.</span></span></p>
<h2 id="_idParaDest-59" class="calibre7"><a id="_idTextAnchor237" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.390.1">How to do it…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.391.1">Let’s start creating the users. </span><span class="kobospan" id="kobo.391.2">We</span><a id="_idIndexMarker107" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.392.1"> will start with our </span><span><strong class="bold"><span class="kobospan" id="kobo.393.1">Networking</span></strong></span><span><span class="kobospan" id="kobo.394.1"> department:</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.395.1">Navigate to </span><strong class="bold"><span class="kobospan" id="kobo.396.1">Users</span></strong><span class="kobospan" id="kobo.397.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.398.1">Users</span></strong><span class="kobospan" id="kobo.399.1">, which will bring us to </span><span><span class="kobospan" id="kobo.400.1">this </span><a id="_idTextAnchor238" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.401.1">page:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer059">
<span class="kobospan" id="kobo.402.1"><img alt="Figure 2.16 – The Zabbix Users window" src="image/2.17.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.403.1">Figure 2.16 – The Zabbix Users window</span></p>
<ol class="calibre16">
<li value="2" class="calibre15"><span class="kobospan" id="kobo.404.1">This is where all the user creation magic is happening, as we will be managing all of our</span><a id="_idTextAnchor239" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.405.1"> users from this page. </span><span class="kobospan" id="kobo.405.2">To create our first </span><strong class="bold"><span class="kobospan" id="kobo.406.1">Networking</span></strong><span class="kobospan" id="kobo.407.1"> department user named </span><strong class="source-inline1"><span class="kobospan" id="kobo.408.1">s_network</span></strong><span class="kobospan" id="kobo.409.1">, click the </span><strong class="bold"><span class="kobospan" id="kobo.410.1">Create user</span></strong><span class="kobospan" id="kobo.411.1"> button in the top-right corner, bringing us to the </span><span><span class="kobospan" id="kobo.412.1">following scr</span><a id="_idTextAnchor240" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.413.1">een:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer060">
<span class="kobospan" id="kobo.414.1"><img alt="Figure 2.17 – The Zabbix Users configuration window" src="image/B19803_02_18.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.415.1">Figure 2.17 – The Zabbix Users configuration window</span></p>
<ol class="calibre16">
<li value="3" class="calibre15"><span class="kobospan" id="kobo.416.1">Fill out the </span><strong class="bold"><span class="kobospan" id="kobo.417.1">Username</span></strong><span class="kobospan" id="kobo.418.1"> field to provide us with the username this user will have, which will </span><span><span class="kobospan" id="kobo.419.1">be </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.420.1">s_network</span></strong></span><span><span class="kobospan" id="kobo.421.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.422.1">Also,</span><a id="_idTextAnchor241" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.423.1"> it’s important to add this user to the group we have just created to give our user the right permissions. </span><span class="kobospan" id="kobo.423.2">Click </span><strong class="bold"><span class="kobospan" id="kobo.424.1">Select</span></strong><span class="kobospan" id="kobo.425.1"> and pick our group </span><span><span class="kobospan" id="kobo.426.1">called </span></span><span><strong class="bold"><span class="kobospan" id="kobo.427.1">Networking</span></strong></span><span><span class="kobospan" id="kobo.428.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.429.1">Last but not least, set a </span><a id="_idIndexMarker108" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.430.1">secure password in the </span><strong class="bold"><span class="kobospan" id="kobo.431.1">Password</span></strong><span class="kobospan" id="kobo.432.1"> fields; don’t forget it because we will be using </span><span><span class="kobospan" id="kobo.433.1">it later.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.434.1">After this, move on to the </span><strong class="bold"><span class="kobospan" id="kobo.435.1">Permissions</span></strong><span class="kobospan" id="kobo.436.1"> tab as we won’t be configuring </span><strong class="bold"><span class="kobospan" id="kobo.437.1">Media</span></strong> <span><span class="kobospan" id="kobo.438.1">just </span><a id="_idTextAnchor242" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.439.1">yet:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer061">
<span class="kobospan" id="kobo.440.1"><img alt="Figure 2.18 – The Zabbix user Permissions configuration window" src="image/B19803_02_19.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.441.1">Figure 2.18 – The Zabbix user Permissions configuration window</span></p>
<ol class="calibre16">
<li value="7" class="calibre15"><span class="kobospan" id="kobo.442.1">Select the </span><strong class="bold"><span class="kobospan" id="kobo.443.1">Role</span></strong><span class="kobospan" id="kobo.444.1"> option named </span><strong class="bold"><span class="kobospan" id="kobo.445.1">Super admin role</span></strong><span class="kobospan" id="kobo.446.1"> here. </span><span class="kobospan" id="kobo.446.2">This will enable our user to access all UI </span><a id="_idIndexMarker109" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.447.1">elements and see and edit information about all host groups in the </span><span><span class="kobospan" id="kobo.448.1">Zabbix server.</span></span><p class="calibre3"><span class="kobospan" id="kobo.449.1">The foll</span><a id="_idTextAnchor243" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.450.1">owing user roles are available in Zabbix </span><span><span class="kobospan" id="kobo.451.1">by default:</span></span></p><table class="no-table-style" id="table001-1"><colgroup class="calibre10"><col class="calibre11"/><col class="calibre11"/></colgroup><thead class="calibre12"><tr class="no-table-style1"><td class="no-table-style2"><p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.452.1">Default roles</span></strong></span></p></td><td class="no-table-style2"><p class="calibre3"><span><strong class="bold"><span class="kobospan" id="kobo.453.1">Description</span></strong></span></p></td></tr></thead><tbody class="calibre13"><tr class="no-table-style1"><td class="no-table-style2"><p class="calibre3"><span><span class="kobospan" id="kobo.454.1">User role</span></span></p></td><td class="no-table-style2"><p class="calibre3"><span class="kobospan" id="kobo.455.1">The Zabbix User role has access</span><a id="_idIndexMarker110" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.456.1"> to the visualization aspects of our Zabbix environment. </span><span class="kobospan" id="kobo.456.2">Specifically, the Monitoring, Services, and Inventory and Reporting menus are available. </span><span class="kobospan" id="kobo.456.3">The user will only ever have READ access to templates and hosts and they must be </span><span><span class="kobospan" id="kobo.457.1">explicitly assigned.</span></span></p></td></tr><tr class="no-table-style1"><td class="no-table-style2"><p class="calibre3"><span><span class="kobospan" id="kobo.458.1">Admin role</span></span></p></td><td class="no-table-style2"><p class="calibre3"><span class="kobospan" id="kobo.459.1">The Zabbix Admin role can additionally manage the configuration of our Zabbix monitoring. </span><span class="kobospan" id="kobo.459.2">Specifically, all the menus that the Zabbix User has access to are available, with the addition of Data collection and Alerts. </span><span class="kobospan" id="kobo.459.3">The user can be assigned READ-WRITE access to templates and hosts and they must be </span><span><span class="kobospan" id="kobo.460.1">explicitly assigned.</span></span></p></td></tr><tr class="no-table-style1"><td class="no-table-style2"><p class="calibre3"><span class="kobospan" id="kobo.461.1">Super </span><span><span class="kobospan" id="kobo.462.1">admin role</span></span></p></td><td class="no-table-style2"><p class="calibre3"><span class="kobospan" id="kobo.463.1">The Zabbix Super admin role has access to the administrative aspects of our Zabbix environment. </span><span class="kobospan" id="kobo.463.2">Specifically, all the menus that the Zabbix Admin has access to are available, with the addition of Users and Administration. </span><span class="kobospan" id="kobo.463.3">The user will always have READ-WRITE access to all templates </span><span><span class="kobospan" id="kobo.464.1">and hosts.</span></span></p></td></tr></tbody></table></li>
</ol>
<p class="calibre3"><a id="_idTextAnchor244" class="pcalibre calibre6 pcalibre1"/></p>
<p class="calibre3"><span class="kobospan" id="kobo.465.1">8.	</span><span class="kobospan" id="kobo.465.2">Let’s repeat the previous steps for the user named </span><strong class="source-inline"><span class="kobospan" id="kobo.466.1">y_network</span></strong><span class="kobospan" id="kobo.467.1">, but in the </span><strong class="bold"><span class="kobospan" id="kobo.468.1">Permissions</span></strong><span class="kobospan" id="kobo.469.1"> tab, select</span><a id="_idIndexMarker111" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.470.1"> the </span><strong class="bold"><span class="kobospan" id="kobo.471.1">Admin role</span></strong><span class="kobospan" id="kobo.472.1"> option </span><span><span class="kobospan" id="kobo.473.1">as follows:</span></span></p>
<p class="calibre3"><a id="_idTextAnchor245" class="pcalibre calibre6 pcalibre1"/></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer062">
<span class="kobospan" id="kobo.474.1"><img alt="Figure 2.19 – The Zabbix user Permissions configuration window" src="image/B19803_02_20.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.475.1">Figure 2.19 – The Zabbix user Permissions configuration window</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.476.1">After creating </span><a id="_idTextAnchor246" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.477.1">these two users, let’s move on to create the infrastructure user, </span><strong class="source-inline"><span class="kobospan" id="kobo.478.1">r_ infra</span></strong><span class="kobospan" id="kobo.479.1">. </span><span class="kobospan" id="kobo.479.2">Repeat the steps we took for </span><strong class="source-inline"><span class="kobospan" id="kobo.480.1">s_network</span></strong><span class="kobospan" id="kobo.481.1">, changing the </span><strong class="bold"><span class="kobospan" id="kobo.482.1">Username</span></strong><span class="kobospan" id="kobo.483.1">, of course. </span><span class="kobospan" id="kobo.483.2">Then, add this user to the group and give our user the right permissions. </span><span class="kobospan" id="kobo.483.3">Click </span><strong class="bold"><span class="kobospan" id="kobo.484.1">Select</span></strong><span class="kobospan" id="kobo.485.1"> and pick our group called </span><strong class="bold"><span class="kobospan" id="kobo.486.1">Infrastructure</span></strong><span class="kobospan" id="kobo.487.1">. </span><span class="kobospan" id="kobo.487.2">It will look </span><span><span class="kobospan" id="kobo.488.1">as follows:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer063">
<span class="kobospan" id="kobo.489.1"><img alt="Figure 2.20 – The Zabbix user configuration window for r_infra" src="image/B19803_02_21.jpg" class="calibre4"/></span>
</div>
</div>
<p class="calibre3"><a id="_idTextAnchor247" class="pcalibre calibre6 pcalibre1"/></p>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.490.1">Figure 2.20 – The Zabbix user configuration window for r_infra</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.491.1">Lastly, make </span><a id="_idTextAnchor248" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.492.1">this user another </span><strong class="bold"><span class="kobospan" id="kobo.493.1">Super admin</span></strong><span class="kobospan" id="kobo.494.1"> on the </span><span><strong class="bold"><span class="kobospan" id="kobo.495.1">Permissions</span></strong></span><span><span class="kobospan" id="kobo.496.1"> page.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.497.1">9.	</span><span class="kobospan" id="kobo.497.2">Now, for our last user, let’s</span><a id="_idIndexMarker112" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.498.1"> repeat our steps, changing the </span><strong class="bold"><span class="kobospan" id="kobo.499.1">Username</span></strong><span class="kobospan" id="kobo.500.1"> and the group in the </span><strong class="bold"><span class="kobospan" id="kobo.501.1">User</span></strong><span class="kobospan" id="kobo.502.1"> tab </span><span><span class="kobospan" id="kobo.503.1">as follows:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer064">
<span class="kobospan" id="kobo.504.1"><img alt="Figure 2.21 – The Zabbix User configuration window for e_buy" src="image/B19803_02_22.jpg" class="calibre4"/></span>
</div>
</div>
<p class="calibre3"><a id="_idTextAnchor249" class="pcalibre calibre6 pcalibre1"/></p>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.505.1">Figure 2.21 – The Zabbix User configuration window for e_buy</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.506.1">10.	</span><span class="kobospan" id="kobo.506.2">If you didn’t </span><a id="_idTextAnchor250" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.507.1">follow the previous</span><a id="_idIndexMarker113" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.508.1"> recipe, you can change this user’s </span><strong class="bold"><span class="kobospan" id="kobo.509.1">Role</span></strong><span class="kobospan" id="kobo.510.1"> to </span><strong class="source-inline"><span class="kobospan" id="kobo.511.1">User role</span></strong><span class="kobospan" id="kobo.512.1"> at the </span><strong class="bold"><span class="kobospan" id="kobo.513.1">Permissions</span></strong><span class="kobospan" id="kobo.514.1"> tab. </span><span class="kobospan" id="kobo.514.2">But if you did follow the previous recipe, we can use the </span><strong class="source-inline"><span class="kobospan" id="kobo.515.1">User+ role</span></strong><span class="kobospan" id="kobo.516.1"> we created </span><span><span class="kobospan" id="kobo.517.1">as follows:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer065">
<span class="kobospan" id="kobo.518.1"><img alt="Figure 2.22 – The Zabbix user configuration window for e_buy" src="image/B19803_02_23.jpg" class="calibre4"/></span>
</div>
</div>
<p class="calibre3"><a id="_idTextAnchor251" class="pcalibre calibre6 pcalibre1"/></p>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.519.1">Figure 2.22 – The Zabbix user configuration window for e_buy</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.520.1">Setting the user up with the </span><strong class="source-inline"><span class="kobospan" id="kobo.521.1">User+</span></strong><span class="kobospan" id="kobo.522.1"> role</span><a id="_idIndexMarker114" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.523.1"> will also let the </span><strong class="source-inline"><span class="kobospan" id="kobo.524.1">e_buy</span></strong><span class="kobospan" id="kobo.525.1"> user create </span><span><span class="kobospan" id="kobo.526.1">maintenance periods.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.527.1">When you’re done, you’ll end up with </span><span><span class="kobospan" id="kobo.528.1">the following:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="source-inline1"><span class="kobospan" id="kobo.529.1">s_network</span></strong><span class="kobospan" id="kobo.530.1">: A user with access to the </span><strong class="bold"><span class="kobospan" id="kobo.531.1">Networking</span></strong><span class="kobospan" id="kobo.532.1"> user group permissions with the </span><strong class="bold"><span class="kobospan" id="kobo.533.1">Super </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.534.1">admin</span></strong></span><span><span class="kobospan" id="kobo.535.1"> role</span></span></li>
<li class="calibre15"><strong class="source-inline1"><span class="kobospan" id="kobo.536.1">y_network</span></strong><span class="kobospan" id="kobo.537.1">: A user with access to the </span><strong class="bold"><span class="kobospan" id="kobo.538.1">Networking</span></strong><span class="kobospan" id="kobo.539.1"> user group permissions with the </span><span><strong class="bold"><span class="kobospan" id="kobo.540.1">Admin</span></strong></span><span><span class="kobospan" id="kobo.541.1"> role</span></span></li>
<li class="calibre15"><strong class="source-inline1"><span class="kobospan" id="kobo.542.1">r_infra</span></strong><span class="kobospan" id="kobo.543.1">: A user with access to the </span><strong class="bold"><span class="kobospan" id="kobo.544.1">Infrastructure</span></strong><span class="kobospan" id="kobo.545.1"> user group permissions with the </span><strong class="bold"><span class="kobospan" id="kobo.546.1">Super </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.547.1">admin</span></strong></span><span><span class="kobospan" id="kobo.548.1"> role</span></span></li>
<li class="calibre15"><strong class="source-inline1"><span class="kobospan" id="kobo.549.1">e_buy</span></strong><span class="kobospan" id="kobo.550.1">: A </span><a id="_idTextAnchor252" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor253" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.551.1">user with access to the </span><strong class="bold"><span class="kobospan" id="kobo.552.1">Buying and Inventory</span></strong><span class="kobospan" id="kobo.553.1"> user group permissions with either the </span><strong class="source-inline1"><span class="kobospan" id="kobo.554.1">User</span></strong><span class="kobospan" id="kobo.555.1"> role or the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.556.1">User+ role</span></strong></span></li>
</ul>
<h1 id="_idParaDest-60" class="calibre5"><a id="_idTextAnchor254" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor255" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.557.1">Azure AD SAML user authentication and JIT user provisioning</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.558.1">In this </span><a id="_idIndexMarker115" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.559.1">recipe, w</span><a id="_idTextAnchor256" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.560.1">e will use </span><strong class="bold"><span class="kobospan" id="kobo.561.1">Security Assertion Markup Language</span></strong><span class="kobospan" id="kobo.562.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.563.1">SAML</span></strong><span class="kobospan" id="kobo.564.1">) authentication, a</span><a id="_idTextAnchor257" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.565.1"> widely used </span><a id="_idIndexMarker116" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.566.1">form of authentication</span><a id="_idIndexMarker117" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.567.1"> in the IT world. </span><span class="kobospan" id="kobo.567.2">The SAML standard allows us to exchange authorization data between applications, so we can authenticate between our Zabbix application and an authentication provider. </span><span class="kobospan" id="kobo.567.3">We’ll be using this as a form of managing passwords for our Zabbix users. </span><span class="kobospan" id="kobo.567.4">Please note that if you only set up user authentication with passwords with SAML or LDAP, you still have to </span><a id="_idIndexMarker118" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.568.1">create users with their permissions manually within Zabbix. </span><span class="kobospan" id="kobo.568.2">To circumvent this, we can</span><a id="_idIndexMarker119" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.569.1"> also set up </span><strong class="bold"><span class="kobospan" id="kobo.570.1">Just In Time</span></strong><span class="kobospan" id="kobo.571.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.572.1">JIT</span></strong><span class="kobospan" id="kobo.573.1">) user provisioning since </span><span><span class="kobospan" id="kobo.574.1">Zabbix </span><a id="_idTextAnchor258" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor259" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.575.1">6.4.</span></span></p>
<h2 id="_idParaDest-61" class="calibre7"><a id="_idTextAnchor260" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.576.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.577.1">To get started with SAML</span><a id="_idIndexMarker120" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.578.1"> authentication, we will need our configured Zabbix server from the previous recipe. </span><span class="kobospan" id="kobo.578.2">It’s important that we have all the configured users from the previous recipe. </span><span class="kobospan" id="kobo.578.3">We will also need something </span><a id="_idIndexMarker121" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.579.1">to authenticate with SAML. </span><span class="kobospan" id="kobo.579.2">We will be using Microsoft Azure </span><strong class="bold"><span class="kobospan" id="kobo.580.1">Active Directory</span></strong><span class="kobospan" id="kobo.581.1"> (</span><span><strong class="bold"><span class="kobospan" id="kobo.582.1">AD</span></strong></span><span><span class="kobospan" id="kobo.583.1">) SAML.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.584.1">Make sure to set up users in your Azure AD before continuing with this recipe. </span><span class="kobospan" id="kobo.584.2">You can use your existing AD users for authentication, so you can use this recipe with your existing </span><span><span class="kobospan" id="kobo.585.1">AD setup.</span></span></p>
<p class="calibre3"><a id="_idTextAnchor261" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.586.1">We </span><a id="_idTextAnchor262" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.587.1">will be using the </span><strong class="source-inline"><span class="kobospan" id="kobo.588.1">s_network</span></strong><span class="kobospan" id="kobo.589.1"> user as an example as well as a new </span><strong class="source-inline"><span class="kobospan" id="kobo.590.1">JIT_Admin</span></strong><span class="kobospan" id="kobo.591.1"> user group in our Zabbix environment with no permissions set up. </span><span class="kobospan" id="kobo.591.2">The Azure user looks </span><span><span class="kobospan" id="kobo.592.1">as fol</span><a id="_idTextAnchor263" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.593.1">lows:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer066">
<span class="kobospan" id="kobo.594.1"><img alt="Figure 2.23 – The Azure Users and groups window" src="image/B19803_02_24.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.595.1">Figure 2.23 – The Azure Users and groups window</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.596.1">For JIT user provisioning, we also made sure to make this user part of a new </span><span><strong class="source-inline"><span class="kobospan" id="kobo.597.1">zbx_admin</span></strong></span><span><span class="kobospan" id="kobo.598.1"> gr</span><a id="_idTextAnchor264" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.599.1">oup:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer067">
<span class="kobospan" id="kobo.600.1"><img alt="Figure 2.24 – The Azure users group details window" src="image/B19803_02_25.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.601.1">Figure 2.24 – The Azure users group details window</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.602.1">This group is just going to be an</span><a id="_idIndexMarker122" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.603.1"> empty security</span><a id="_idIndexMarker123" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.604.1"> group that we will use to assign permissions in </span><span><span class="kobospan" id="kobo.605.1">Zabbix later:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer068">
<span class="kobospan" id="kobo.606.1"><img alt="Figure 2.25 – The Azure group details window" src="image/B19803_02_26.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.607.1">Figure 2.25 – The Azure group details window</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.608.1">To set up SAML, retrieve your SAML settings from your AD or another SAML provider. </span><span class="kobospan" id="kobo.608.2">To work with Zabbix, we will need </span><span><span class="kobospan" id="kobo.609.1">the following:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.610.1">IdP </span><span><span class="kobospan" id="kobo.611.1">entity ID</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.612.1">SSO </span><span><span class="kobospan" id="kobo.613.1">service URL</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.614.1">SLO </span><span><span class="kobospan" id="kobo.615.1">service URL</span></span></li>
<li class="calibre15"><span><span class="kobospan" id="kobo.616.1">Username attribute</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.617.1">SP </span><span><span class="kobospan" id="kobo.618.1">entity ID</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.619.1">SP name </span><span><span class="kobospan" id="kobo.620.1">ID format</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.621.1">For the JIT user provisioning, we</span><a id="_idIndexMarker124" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.622.1"> will need </span><span><span class="kobospan" id="kobo.623.1">the following:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.624.1">Group </span><span><span class="kobospan" id="kobo.625.1">name attribute</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.626.1">User </span><span><span class="kobospan" id="kobo.627.1">name attribute</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.628.1">User last </span><span><span class="kobospan" id="kobo.629.1">name attribute</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.630.1">User </span><span><span class="kobospan" id="kobo.631.1">group m</span><a id="_idTextAnchor265" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor266" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.632.1">apping</span></span></li>
</ul>
<h2 id="_idParaDest-62" class="calibre7"><a id="_idTextAnchor267" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.633.1">How to do it…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.634.1">We start with the </span><a id="_idIndexMarker125" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.635.1">assumpti</span><a id="_idTextAnchor268" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.636.1">on that y</span><a id="_idTextAnchor269" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.637.1">ou have your Azure AD ready. </span><span class="kobospan" id="kobo.637.2">Let’s see how we can configure SAML using </span><span><span class="kobospan" id="kobo.638.1">our setup:</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.639.1">Let’s navigate to the following </span><span><span class="kobospan" id="kobo.640.1">URL: </span></span><a href="https://portal.azure.com/" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.641.1">https://portal.azure.com/</span></span></a><span><span class="kobospan" id="kobo.642.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.643.1">After logging in, navigate to Azure AD and click on </span><span><strong class="bold"><span class="kobospan" id="kobo.644.1">Enterprise Applications</span></strong></span><span><span class="kobospan" id="kobo.645.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.646.1">Now click on </span><strong class="bold"><span class="kobospan" id="kobo.647.1">+ New Application</span></strong><span class="kobospan" id="kobo.648.1"> to create our new application. </span><span class="kobospan" id="kobo.648.2">At the next window, click on </span><strong class="bold"><span class="kobospan" id="kobo.649.1">Create your </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.650.1">own applic</span><a id="_idTextAnchor270" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.651.1">ation</span></strong></span><span><span class="kobospan" id="kobo.652.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer069">
<span class="kobospan" id="kobo.653.1"><img alt="Figure 2.26 – The Azure enterprise application creation page﻿" src="image/B19803_02_27.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.654.1">Figure 2.26 – The Azure enterprise application creation page</span><a id="_idTextAnchor271" class="pcalibre calibre6 pcalibre1"/></p>
<ol class="calibre16">
<li value="4" class="calibre15"><span class="kobospan" id="kobo.655.1">In th</span><a id="_idTextAnchor272" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.656.1">e next window, name </span><a id="_idIndexMarker126" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.657.1">our new application </span><strong class="source-inline1"><span class="kobospan" id="kobo.658.1">Zabbix</span></strong><span class="kobospan" id="kobo.659.1"> and click on the blue </span><span><strong class="bold"><span class="kobospan" id="kobo.660.1">Create</span></strong></span><span><span class="kobospan" id="kobo.661.1"> b</span><a id="_idTextAnchor273" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.662.1">utton:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer070">
<span class="kobospan" id="kobo.663.1"><img alt="Figure 2.27 – The Azure enterprise new application page" src="image/B19803_02_28.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.664.1">Figure 2.27 – The Azure enterprise new application page</span></p>
<ol class="calibre16">
<li value="5" class="calibre15"><span class="kobospan" id="kobo.665.1">Select our new</span><a id="_idIndexMarker127" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.666.1"> application from the list and click on </span><strong class="bold"><span class="kobospan" id="kobo.667.1">Users and Groups</span></strong><span class="kobospan" id="kobo.668.1"> to add the correct users. </span><span class="kobospan" id="kobo.668.2">In our case, this will </span><span><span class="kobospan" id="kobo.669.1">be </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.670.1">s_ne</span><a id="_idTextAnchor274" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.671.1">twork</span></strong></span><span><span class="kobospan" id="kobo.672.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer071">
<span class="kobospan" id="kobo.673.1"><img alt="Figure 2.28 – The Azure enterprise application User addition" src="image/B19803_02_29.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.674.1">Figure 2.28 – The Azure enterprise application User addition</span></p>
<ol class="calibre16">
<li value="6" class="calibre15"><span class="kobospan" id="kobo.675.1">If we are setting up JIT user provisioning, make sure to also add the </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.676.1">zbx_admin</span></strong></span><span><span class="kobospan" id="kobo.677.1"> group:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer072">
<span class="kobospan" id="kobo.678.1"><img alt="Figure 2.29 – The Azure enterprise application Group addition" src="image/B19803_02_30.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.679.1">Figure 2.29 – The Azure enterprise application Group addition</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.680.1">With JIT user provisioning, adding the group should </span><span><span class="kobospan" id="kobo.681.1">be enough.</span></span></p>
<ol class="calibre16">
<li value="7" class="calibre15"><span class="kobospan" id="kobo.682.1">You will also have to assign a</span><a id="_idIndexMarker128" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.683.1"> role. </span><span class="kobospan" id="kobo.683.2">Click on </span><strong class="bold"><span class="kobospan" id="kobo.684.1">Select a role</span></strong><span class="kobospan" id="kobo.685.1"> and add the role you want to use. </span><span class="kobospan" id="kobo.685.2">When using JIT you can use the </span><strong class="bold"><span class="kobospan" id="kobo.686.1">zbx_admin</span></strong><span class="kobospan" id="kobo.687.1"> group, otherwise just add the user </span><span><span class="kobospan" id="kobo.688.1">as </span></span><span><strong class="bold"><span class="kobospan" id="kobo.689.1">User</span></strong></span><span><span class="kobospan" id="kobo.690.1">.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer073">
<span class="kobospan" id="kobo.691.1"><img alt="Figure 2.30 – Azure enterprise application role assignment" src="image/B19803_02_31.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.692.1">Figure 2.30 – Azure enterprise application role assignment</span></p>
<ol class="calibre16">
<li value="8" class="calibre15"><span class="kobospan" id="kobo.693.1">Click on </span><strong class="bold"><span class="kobospan" id="kobo.694.1">Select</span></strong><span class="kobospan" id="kobo.695.1"> and </span><span><span class="kobospan" id="kobo.696.1">then </span></span><span><strong class="bold"><span class="kobospan" id="kobo.697.1">Assign</span></strong></span><span><span class="kobospan" id="kobo.698.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.699.1">Now </span><a id="_idTextAnchor275" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.700.1">let’</span><a id="_idTextAnchor276" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.701.1">s move on to the</span><a id="_idIndexMarker129" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.702.1"> SAML settings </span><a id="_idIndexMarker130" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.703.1">by clicking on </span><strong class="bold"><span class="kobospan" id="kobo.704.1">Single sign-on</span></strong><span class="kobospan" id="kobo.705.1"> in </span><span><span class="kobospan" id="kobo.706.1">the sidebar.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.707.1">Now click on </span><strong class="bold"><span class="kobospan" id="kobo.708.1">SAML</span></strong><span class="kobospan" id="kobo.709.1"> on the page shown in the following screenshot </span><span><span class="kobospan" id="kobo.710.1">and con</span><a id="_idTextAnchor277" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.711.1">tinue:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer074">
<span class="kobospan" id="kobo.712.1"><img alt="Figure 2.31 – The Azure enterprise application SAML option" src="image/B19803_02_32.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.713.1">Figure 2.31 – The Azure enterprise application SAML option</span></p>
<ol class="calibre16">
<li value="11" class="calibre15"><span class="kobospan" id="kobo.714.1">Now at </span><strong class="bold"><span class="kobospan" id="kobo.715.1">1</span></strong><span class="kobospan" id="kobo.716.1">, we can add the following information, where the black marks are our Zabbix </span><span><span class="kobospan" id="kobo.717.1">server</span><a id="_idTextAnchor278" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.718.1"> URL:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer075">
<span class="kobospan" id="kobo.719.1"><img alt="Figure 2.32 – The Azure SAML setting 1" src="image/B19803_02_33.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.720.1">Figure 2.32 – The Azure SAML setting 1</span></p>
<ol class="calibre16">
<li value="12" class="calibre15"><span class="kobospan" id="kobo.721.1">At </span><strong class="bold"><span class="kobospan" id="kobo.722.1">2</span></strong><span class="kobospan" id="kobo.723.1">, fil</span><a id="_idTextAnchor279" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.724.1">l o</span><a id="_idTextAnchor280" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.725.1">ut </span><span><span class="kobospan" id="kobo.726.1">the follow</span><a id="_idTextAnchor281" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.727.1">ing:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer076">
<span class="kobospan" id="kobo.728.1"><img alt="Figure 2.33 – The Azure SAML setting 2" src="image/B19803_02_34.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.729.1">Figure 2.33 – The Azure SAML setting 2</span></p>
<ol class="calibre16">
<li value="13" class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.730.1">3</span></strong><span class="kobospan" id="kobo.731.1"> will be </span><a id="_idIndexMarker131" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.732.1">automatically filled. </span><span class="kobospan" id="kobo.732.2">Click on </span><strong class="bold"><span class="kobospan" id="kobo.733.1">Download</span></strong><span class="kobospan" id="kobo.734.1"> for </span><span><strong class="bold"><span class="kobospan" id="kobo.735.1">Certificate (Base</span><a id="_idTextAnchor282" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.736.1">64)</span></strong></span><span><span class="kobospan" id="kobo.737.1">:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer077">
<span class="kobospan" id="kobo.738.1"><img alt="Figure 2.34 – The Azure SAML setting 3" src="image/B19803_02_35.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.739.1">Figure 2.34 – The Azure SAML setting 3</span></p>
<ol class="calibre16">
<li value="14" class="calibre15"><span class="kobospan" id="kobo.740.1">Log in to the Zabbix </span><a id="_idIndexMarker132" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.741.1">server CLI and create a new file with the </span><span><span class="kobospan" id="kobo.742.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.743.1">vim /usr/share/zabbix/conf/certs/idp.cert</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.744.1">Paste the contents from</span><a id="_idIndexMarker133" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.745.1"> the file downloaded in </span><em class="italic"><span class="kobospan" id="kobo.746.1">step 11</span></em><span class="kobospan" id="kobo.747.1"> here and save </span><span><span class="kobospan" id="kobo.748.1">the file.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.749.1">N</span><a id="_idTextAnchor283" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.750.1">ow b</span><a id="_idTextAnchor284" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.751.1">ack at Azure for </span><strong class="bold"><span class="kobospan" id="kobo.752.1">4</span></strong><span class="kobospan" id="kobo.753.1">, we</span><a id="_idIndexMarker134" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.754.1"> will get the </span><span><span class="kobospan" id="kobo.755.1">following inform</span><a id="_idTextAnchor285" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.756.1">ation:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer078">
<span class="kobospan" id="kobo.757.1"><img alt="Figure 2.35 – The Azure SAML setting 4" src="image/B19803_02_36.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.758.1">Figure 2.35 – The Azure SAML setting 4</span></p>
<ol class="calibre16">
<li value="17" class="calibre15"><span class="kobospan" id="kobo.759.1">At the Zabbix frontend, go to the </span><strong class="bold"><span class="kobospan" id="kobo.760.1">Users</span></strong><span class="kobospan" id="kobo.761.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.762.1">Authentication</span></strong><span class="kobospan" id="kobo.763.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.764.1">SAML settings</span></strong><span class="kobospan" id="kobo.765.1"> page and fill in the </span><span><span class="kobospan" id="kobo.766.1">following informa</span><a id="_idTextAnchor286" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.767.1">tion:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer079">
<span class="kobospan" id="kobo.768.1"><img alt="Figure 2.36 – The Zabbix SAML settings" src="image/B19803_02_37.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.769.1">Figure 2.36 – The Zabbix SAML settings</span></p>
<ol class="calibre16">
<li value="18" class="calibre15"><span class="kobospan" id="kobo.770.1">If you also want to use JIT</span><a id="_idIndexMarker135" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.771.1"> user provisioning, enable</span><a id="_idIndexMarker136" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.772.1"> it as seen in the previous screenshot as well as fill in the </span><span><span class="kobospan" id="kobo.773.1">following information:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer080">
<span class="kobospan" id="kobo.774.1"><img alt="Figure 2.37 – The Zabbix SAML JIT settings" src="image/B19803_02_38.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.775.1">Figure 2.37 – The Zabbix SAML JIT settings</span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.776.1">Important note</span></p>
<p class="callout"><span class="kobospan" id="kobo.777.1">I have used the </span><strong class="bold"><span class="kobospan" id="kobo.778.1">JIT_Admin</span></strong><span class="kobospan" id="kobo.779.1"> user group as suggested in the </span><em class="italic"><span class="kobospan" id="kobo.780.1">Getting ready</span></em><span class="kobospan" id="kobo.781.1"> part of this recipe. </span><span class="kobospan" id="kobo.781.2">Please use any user group and roles you see fit and make sure to integrate the JIT user provisioning into your own groups </span><span><span class="kobospan" id="kobo.782.1">and permis</span><a id="_idTextAnchor287" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.783.1">sions.</span></span></p>
<ol class="calibre16">
<li value="19" class="calibre15"><span class="kobospan" id="kobo.784.1">If you have already</span><a id="_idIndexMarker137" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.785.1"> created the </span><strong class="source-inline1"><span class="kobospan" id="kobo.786.1">s_network</span></strong><span class="kobospan" id="kobo.787.1"> user and you aren’t going to use JIT user provisioning, go to </span><strong class="bold"><span class="kobospan" id="kobo.788.1">Users</span></strong><span class="kobospan" id="kobo.789.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.790.1">Users</span></strong><span class="kobospan" id="kobo.791.1"> an</span><a id="_idTextAnchor288" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.792.1">d change the </span><strong class="source-inline1"><span class="kobospan" id="kobo.793.1">s_network</span></strong><span class="kobospan" id="kobo.794.1"> user to include the used Azure </span><a id="_idIndexMarker138" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.795.1">domain, </span><span><span class="kobospan" id="kobo.796.1">for e</span><a id="_idTextAnchor289" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.797.1">xample:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer081">
<span class="kobospan" id="kobo.798.1"><img alt="Figure 2.38 – The Zabbix edit user screen for our SAML setup" src="image/B19803_02_39.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.799.1">Figure 2.38 – The Zabbix edit user screen for our SAML setup</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.800.1">If you are using JIT user provisioning, you can simply log in with the new user credentials using SAML authentication and it should create the user with the </span><span><span class="kobospan" id="kobo.801.1">correct credentials.</span></span></p>
<ol class="calibre16">
<li value="20" class="calibre15"><span class="kobospan" id="kobo.802.1">After following these steps, it</span><a id="_idIndexMarker139" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.803.1"> should now be possible to log in with your user configured in Zabbix and use the password </span><a id="_idIndexMarker140" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.804.1">set in Azure AD </span><span><span class="kobospan" id="kobo.805.1">f</span><a id="_idTextAnchor290" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.806.1">or this:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer082">
<span class="kobospan" id="kobo.807.1"><img alt="Figure 2.39 – The Zabbix logi﻿﻿n window" src="image/B19803_02_40.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.808.1">Figure 2.39 – The Zabbix logi</span><a id="_idTextAnchor291" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor292" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.809.1">n window</span></p>
<h2 id="_idParaDest-63" class="calibre7"><a id="_idTextAnchor293" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.810.1">How it works…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.811.1">Zabbix SAML user authentication is by default used to centralize password management. </span><span class="kobospan" id="kobo.811.2">In the past, we </span><a id="_idTextAnchor294" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.812.1">were</span><a id="_idTextAnchor295" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.813.1"> not able to actually assign user groups and permissions to users via this setup. </span><span class="kobospan" id="kobo.813.2">If we set it up without JIT user provisioning we can use it for simple </span><span><span class="kobospan" id="kobo.814.1">password management.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.815.1">This way, we can make sure it is easier for users to keep their </span><span><span class="kobospan" id="kobo.816.1">passwords centr</span><a id="_idTextAnchor296" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.817.1">alized:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer083">
<span class="kobospan" id="kobo.818.1"><img alt="Figure 2.40 – Zabbix SAML authentication diagram" src="image/B19803_02_41.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.819.1">Figure 2.40 – Zabbix SAML authentication diagram</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.820.1">Zabbix communicates with our Azure AD SAML component when we click the </span><strong class="bold"><span class="kobospan" id="kobo.821.1">Sign in</span></strong><span class="kobospan" id="kobo.822.1"> button. </span><span class="kobospan" id="kobo.822.2">The user is then authenticated against your Azure AD user and a confirmation is sent back to the</span><a id="_idTextAnchor297" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.823.1"> Zabbix server. </span><span class="kobospan" id="kobo.823.2">Congratulatio</span><a id="_idTextAnchor298" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.824.1">ns, you are now logged in to your </span><span><span class="kobospan" id="kobo.825.1">Zabbix server.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.826.1">However, since Zabbix 6.4 it is also</span><a id="_idIndexMarker141" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.827.1"> possible to enable JIT user provisioning. </span><span class="kobospan" id="kobo.827.2">This new feature allows us to also assign Zabbix User groups and</span><a id="_idIndexMarker142" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.828.1"> roles according to user groups on our SAML server. </span><span class="kobospan" id="kobo.828.2">As such, the whole process with JIT user provisioning included looks something </span><span><span class="kobospan" id="kobo.829.1">like this:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer084">
<span class="kobospan" id="kobo.830.1"><img alt="Figure 2.41 – Zabbix SAML JIT authentication﻿﻿ diagram" src="image/B19803_02_42.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.831.1">Figure 2.41 – Zabbix SAML JIT authentication</span><a id="_idTextAnchor299" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor300" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.832.1"> diagram</span></p>
<h2 id="_idParaDest-64" class="calibre7"><a id="_idTextAnchor301" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.833.1">There’s more…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.834.1">We can do this kind of authentication not only with SAML but also with HTTP and LDAP. </span><span class="kobospan" id="kobo.834.2">This way, you can choose the right form of advanced authentication for </span><span><span class="kobospan" id="kobo.835.1">your organization.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.836.1">Check out the Zabbix documentation for </span><a id="_idIndexMarker143" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.837.1">more information on the different forms of </span><span><span class="kobospan" id="kobo.838.1">authentication:</span></span><span><span> </span></span><a href="https://www.zabbix.com/documentation/current/en/manual/web_interface/frontend_sections/users/authentication" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.839.1">https://www.zabbix.com/documentation/current/en/manual/web_interface/frontend_sections/users/authentication</span></span></a></p>
<p class="calibre3"><span class="kobospan" id="kobo.840.1">It’s also possible to work with an identity provider such as Okta or OneLogin, among others. </span><span class="kobospan" id="kobo.840.2">This means your</span><a id="_idIndexMarker144" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.841.1"> options aren’t limited to Azure AD: as long as it supports SAML, you can use it to authenticate against your </span><span><span class="kobospan" id="kobo.842.1">Zabbix server.</span></span></p>
<h1 id="_idParaDest-65" class="calibre5"><a id="_idTextAnchor302" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.843.1">OpenLDAP user authentication and JIT user provisioning</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.844.1">Although a lot of people use SAML in </span><a id="_idIndexMarker145" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.845.1">combination with Azure Active Directory, that isn’t always the case. </span><span class="kobospan" id="kobo.845.2">There are loads of different methods of running your </span><span><span class="kobospan" id="kobo.846.1">user authentication.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.847.1">One of those methods is using</span><a id="_idIndexMarker146" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.848.1"> LDAP instead of SAML with, for example, an OpenLDAP server. </span><span class="kobospan" id="kobo.848.2">OpenLDAP provides us with a solid open source implementation to set up a user database with LDAP. </span><span class="kobospan" id="kobo.848.3">The great thing about this is that </span><strong class="bold"><span class="kobospan" id="kobo.849.1">JIT</span></strong><span class="kobospan" id="kobo.850.1"> user provisioning doesn’t just work with SAML, but also with LDAP, meaning we can apply JIT user provisioning here </span><span><span class="kobospan" id="kobo.851.1">as well.</span></span></p>
<h2 id="_idParaDest-66" class="calibre7"><a id="_idTextAnchor303" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.852.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.853.1">To get things going, we are going to need an</span><a id="_idIndexMarker147" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.854.1"> OpenLDAP server set up and ready to go. </span><span class="kobospan" id="kobo.854.2">It is recommended to use your own OpenLDAP environment. </span><span class="kobospan" id="kobo.854.3">There are loads of guides available online to do a solid OpenLDAP implementation as well as a quick start guide for the latest version on the official </span><span><span class="kobospan" id="kobo.855.1">website: </span></span><a href="https://www.openldap.org/" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.856.1">https://www.openldap.org/</span></span></a></p>
<p class="calibre3"><span class="kobospan" id="kobo.857.1">Another way to go is spin up a test OpenLDAP environment with Docker. </span><span class="kobospan" id="kobo.857.2">We can use the </span><span><span class="kobospan" id="kobo.858.1">following command:</span></span></p>
<pre class="console"><span class="kobospan1" id="kobo.859.1">
docker run -p 389:389 -p 636:636 --name openldap-server --detach oicts/openldap:1.0.0
docker run -p 8081:80 -p 4443:443 --name phpldapadmin --hostname phpldapadmin --link openldap-server:ldap-host --env PHPLDAPADMIN_LDAP_HOSTS=ldap-host --detach osixia/phpldapadmin:0.9.0</span></pre> <p class="calibre3"><span class="kobospan" id="kobo.860.1">Please use this for testing only, since the preceding code might not be using the latest </span><span><span class="kobospan" id="kobo.861.1">versions anymore.</span></span></p>
<h2 id="_idParaDest-67" class="calibre7"><a id="_idTextAnchor304" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.862.1">How to do it…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.863.1">Once OpenLDAP is set up, we can </span><a id="_idIndexMarker148" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.864.1">start to create some users and groups in our new OpenLDAP environment. </span><span class="kobospan" id="kobo.864.2">Let’s</span><a id="_idIndexMarker149" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.865.1"> get started on </span><span><span class="kobospan" id="kobo.866.1">that first:</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.867.1">We will open the OpenLDAP GUI by navigating to the URL in </span><span><span class="kobospan" id="kobo.868.1">our browser:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.869.1">
https://&lt;ip_address_of_server&gt;:4443</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.870.1">After logging in, let’s create some new users. </span><span class="kobospan" id="kobo.870.2">First, click on </span><strong class="bold"><span class="kobospan" id="kobo.871.1">Login</span></strong><span class="kobospan" id="kobo.872.1"> on the left-hand side of the window. </span><span class="kobospan" id="kobo.872.2">The default username and password are </span><span><span class="kobospan" id="kobo.873.1">as follows:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.874.1">
Login DN: cn=admin,dc=example,dc=org
Password: admin</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.875.1">You should see that we have already created some groups and users for you if you are using our Docker images, as you can see in the </span><span><span class="kobospan" id="kobo.876.1">following screenshot:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer085">
<span class="kobospan" id="kobo.877.1"><img alt="Figure 2.42 – OpenLDAP server groups and users" src="image/B19803_02_43.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.878.1">Figure 2.42 – OpenLDAP server groups and users</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.879.1">If you are using your own </span><a id="_idIndexMarker150" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.880.1">OpenLDAP environment, make sure to have at least one group and one user </span><span><span class="kobospan" id="kobo.881.1">for testing.</span></span></p>
<ol class="calibre16">
<li value="4" class="calibre15"><span class="kobospan" id="kobo.882.1">Let’s use these usernames </span><a id="_idIndexMarker151" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.883.1">and groups to set up LDAP authentication with JIT </span><span><span class="kobospan" id="kobo.884.1">user provisioning.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.885.1">Move on to the Zabbix frontend and navigate to </span><strong class="bold"><span class="kobospan" id="kobo.886.1">Users</span></strong><span class="kobospan" id="kobo.887.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.888.1">Users</span></strong><span class="kobospan" id="kobo.889.1">. </span><span class="kobospan" id="kobo.889.2">First, we’ll give ourselves access at any time even if the default authentication method will be switched to LDAP. </span><span class="kobospan" id="kobo.889.3">Switch the </span><strong class="bold"><span class="kobospan" id="kobo.890.1">Admin</span></strong><span class="kobospan" id="kobo.891.1"> user’s default authentication method to internal by adding them to the </span><span><strong class="bold"><span class="kobospan" id="kobo.892.1">Internal</span></strong></span><span><span class="kobospan" id="kobo.893.1"> group.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer086">
<span class="kobospan" id="kobo.894.1"><img alt="Figure 2.43 – Zabbix Admin user settings" src="image/B19803_02_44.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.895.1">Figure 2.43 – Zabbix Admin user settings</span></p>
<ol class="calibre16">
<li value="6" class="calibre15"><span class="kobospan" id="kobo.896.1">Click on </span><strong class="bold"><span class="kobospan" id="kobo.897.1">Update</span></strong><span class="kobospan" id="kobo.898.1"> and it should</span><a id="_idIndexMarker152" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.899.1"> then look like the </span><span><span class="kobospan" id="kobo.900.1">following screenshot.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer087">
<span class="kobospan" id="kobo.901.1"><img alt="Figure 2.44 – Zabbix Admin user with Internal Frontend access" src="image/B19803_02_45.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.902.1">Figure 2.44 – Zabbix Admin user with Internal Frontend access</span></p>
<ol class="calibre16">
<li value="7" class="calibre15"><span class="kobospan" id="kobo.903.1">Then we will go to </span><strong class="bold"><span class="kobospan" id="kobo.904.1">Users</span></strong><span class="kobospan" id="kobo.905.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.906.1">Authentication</span></strong><span class="kobospan" id="kobo.907.1"> and then </span><strong class="bold"><span class="kobospan" id="kobo.908.1">LDAP settings</span></strong><span class="kobospan" id="kobo.909.1">. </span><span class="kobospan" id="kobo.909.2">Set up the default authentication</span><a id="_idIndexMarker153" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.910.1"> method to LDAP and the deprovisioned users group </span><span><span class="kobospan" id="kobo.911.1">as follows.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer088">
<span class="kobospan" id="kobo.912.1"><img alt="Figure 2.45 – Zabbix Default authentication method" src="image/B19803_02_46.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.913.1">Figure 2.45 – Zabbix Default authentication method</span></p>
<ol class="calibre16">
<li value="8" class="calibre15"><span class="kobospan" id="kobo.914.1">Next, we’ll click on the </span><strong class="bold"><span class="kobospan" id="kobo.915.1">LDAP settings</span></strong><span class="kobospan" id="kobo.916.1"> tab. </span><span class="kobospan" id="kobo.916.2">This is where we can configure our LDAP server and JIT user provisioning. </span><span class="kobospan" id="kobo.916.3">Let’s start by enabling the ones we would like </span><span><span class="kobospan" id="kobo.917.1">to use.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer089">
<span class="kobospan" id="kobo.918.1"><img alt="Figure 2.46 – Zabbix Default authentication method" src="image/B19803_02_47.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.919.1">Figure 2.46 – Zabbix Default authentication method</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.920.1">When using just LDAP, we will have to create our users manually. </span><span class="kobospan" id="kobo.920.2">By enabling JIT, users will be created </span><a id="_idIndexMarker154" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.921.1">and granted the correct </span><span><span class="kobospan" id="kobo.922.1">permissions automatically.</span></span></p>
<ol class="calibre16">
<li value="9" class="calibre15"><span class="kobospan" id="kobo.923.1">It’s also possible to add</span><a id="_idIndexMarker155" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.924.1"> multiple LDAP servers in Zabbix now. </span><span class="kobospan" id="kobo.924.2">Let’s add our OpenLDAP server by clicking on </span><strong class="bold"><span class="kobospan" id="kobo.925.1">Add</span></strong> <span><span class="kobospan" id="kobo.926.1">at </span></span><span><strong class="bold"><span class="kobospan" id="kobo.927.1">Servers</span></strong></span><span><span class="kobospan" id="kobo.928.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.929.1">Then, fill in </span><span><span class="kobospan" id="kobo.930.1">the following.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer090">
<span class="kobospan" id="kobo.931.1"><img alt="Figure 2.47 – Zabbix LDAP authentication setup" src="image/B19803_02_48.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.932.1">Figure 2.47 – Zabbix LDAP authentication setup</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.933.1">The default </span><strong class="bold"><span class="kobospan" id="kobo.934.1">Bind password</span></strong><span class="kobospan" id="kobo.935.1"> value </span><span><span class="kobospan" id="kobo.936.1">is </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.937.1">password</span></strong></span><span><span class="kobospan" id="kobo.938.1">.</span></span></p>
<ol class="calibre16">
<li value="11" class="calibre15"><span class="kobospan" id="kobo.939.1">If we want, we can also enable JIT provisioning. </span><span class="kobospan" id="kobo.939.2">Enable it and fill in </span><span><span class="kobospan" id="kobo.940.1">the following.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer091">
<span class="kobospan" id="kobo.941.1"><img alt="Figure 2.48 – Zabbix LDAP authentication setup with JIT" src="image/B19803_02_49.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.942.1">Figure 2.48 – Zabbix LDAP authentication setup with JIT</span></p>
<ol class="calibre16">
<li value="12" class="calibre15"><span class="kobospan" id="kobo.943.1">Now, sign out of the</span><a id="_idIndexMarker156" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.944.1"> currently</span><a id="_idIndexMarker157" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.945.1"> logged-in account by clicking the </span><strong class="bold"><span class="kobospan" id="kobo.946.1">Sign out</span></strong><span class="kobospan" id="kobo.947.1"> button in the lower left corner of </span><span><span class="kobospan" id="kobo.948.1">the sidebar.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.949.1">We should now be able to log in with the </span><strong class="source-inline1"><span class="kobospan" id="kobo.950.1">user1</span></strong><span class="kobospan" id="kobo.951.1"> LDAP user. </span><span class="kobospan" id="kobo.951.2">The password </span><span><span class="kobospan" id="kobo.952.1">is </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.953.1">password</span></strong></span><span><span class="kobospan" id="kobo.954.1">.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer092">
<span class="kobospan" id="kobo.955.1"><img alt="Figure 2.49 – Zabbix login window for user1" src="image/B19803_02_50.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.956.1">Figure 2.49 – Zabbix login window for user1</span></p>
<ol class="calibre16">
<li value="14" class="calibre15"><span class="kobospan" id="kobo.957.1">When we log in for the</span><a id="_idIndexMarker158" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.958.1"> first time, the user will be created with the correct permissions as defined</span><a id="_idIndexMarker159" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.959.1"> in the JIT user provisioning step. </span><span class="kobospan" id="kobo.959.2">If logged in as a Zabbix super admin, we can see this under </span><strong class="bold"><span class="kobospan" id="kobo.960.1">Users</span></strong><span class="kobospan" id="kobo.961.1"> | </span><span><strong class="bold"><span class="kobospan" id="kobo.962.1">Users</span></strong></span><span><span class="kobospan" id="kobo.963.1">.</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer093">
<span class="kobospan" id="kobo.964.1"><img alt="Figure 2.50 – Zabbix LDAP provisioned user" src="image/B19803_02_51.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.965.1">Figure 2.50 – Zabbix LDAP provisioned user</span></p>
<h2 id="_idParaDest-68" class="calibre7"><a id="_idTextAnchor305" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.966.1">How it works…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.967.1">As you can see, we can use Zabbix in combination with an LDAP server to make password management easier as a whole. </span><span class="kobospan" id="kobo.967.2">There are two options for us to choose from: using LDAP with or without JIT </span><span><span class="kobospan" id="kobo.968.1">user provisioning.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.969.1">When we use Zabbix in</span><a id="_idIndexMarker160" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.970.1"> combination with an LDAP server, but choose to not use JIT user provisioning, Zabbix will communicate with the LDAP server just to do the password authentication upon pressing the </span><strong class="bold"><span class="kobospan" id="kobo.971.1">Sign </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.972.1">in</span></strong></span><span><span class="kobospan" id="kobo.973.1"> button.</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer094">
<span class="kobospan" id="kobo.974.1"><img alt="Figure 2.51 – Zabbix LDAP authentication diagram" src="image/B19803_02_52.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.975.1">Figure 2.51 – Zabbix LDAP authentication diagram</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.976.1">However, since Zabbix 6.4 it is </span><a id="_idIndexMarker161" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.977.1">also possible to enable JIT user provisioning. </span><span class="kobospan" id="kobo.977.2">This new feature allows us to also assign Zabbix user groups and roles in line with the user groups on our LDAP server. </span><span class="kobospan" id="kobo.977.3">As such, the whole process with JIT user provisioning included looks something like </span><span><span class="kobospan" id="kobo.978.1">the following:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer095">
<span class="kobospan" id="kobo.979.1"><img alt="Figure 2.52 – Zabbix LDAP JIT authentication diagram" src="image/B19803_02_53.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.980.1">Figure 2.52 – Zabbix LDAP JIT authentication diagram</span></p>
</div>
</body></html>