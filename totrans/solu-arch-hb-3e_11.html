<html><head></head><body>
<div class="Basic-Text-Frame" id="_idContainer198">
<h1 class="chapterNumber"><span class="koboSpan" id="kobo.1.1">11</span></h1>
<h1 class="chapterTitle" id="_idParaDest-319"><span class="koboSpan" id="kobo.2.1">DevOps and Solution Architecture Framework</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.3.1">In the previous chapter, you explored creating a cost-aware architecture and methods to continually optimize costs without compromising performance. </span><span class="koboSpan" id="kobo.3.2">Automation and collaboration across teams are crucial for developing robust applications and saving costs. </span><span class="koboSpan" id="kobo.3.3">This chapter will delve into DevOps, a methodology that fosters collaboration between development and operations teams while automating the processes of application deployment and monitoring.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.4.1">In traditional environments, the development team and the IT operations team work in silos. </span><span class="koboSpan" id="kobo.4.2">The development team gathers requirements from business owners and develops the applications. </span><span class="koboSpan" id="kobo.4.3">System administrators are solely responsible for operations and for meeting uptime requirements. </span><span class="koboSpan" id="kobo.4.4">These teams generally have little direct communication during the development life cycle, and each team rarely understands the processes and needs of the other team.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.5.1">Each team has its own tools, processes, and redundant approaches, sometimes resulting in conflict. </span><span class="koboSpan" id="kobo.5.2">For example, the </span><a id="_idIndexMarker1404"/><span class="koboSpan" id="kobo.6.1">development and </span><strong class="keyWord"><span class="koboSpan" id="kobo.7.1">quality assurance</span></strong><span class="koboSpan" id="kobo.8.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.9.1">QA</span></strong><span class="koboSpan" id="kobo.10.1">) teams </span><a id="_idIndexMarker1405"/><span class="koboSpan" id="kobo.11.1">could test the build on a specific </span><strong class="keyWord"><span class="koboSpan" id="kobo.12.1">operating system</span></strong><span class="koboSpan" id="kobo.13.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.14.1">OS</span></strong><span class="koboSpan" id="kobo.15.1">) patch. </span><span class="koboSpan" id="kobo.15.2">However, the operations team deploys the same build on a different OS version in the production environment, causing issues and delays in the delivery.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.16.1">DevOps is a methodology that promotes collaboration and coordination between developers and operational teams to deliver products or services continuously. </span><span class="koboSpan" id="kobo.16.2">This approach is constructive in organizations where the teams rely on multiple applications, tools, technologies, platforms, databases, devices, and so on in the process of developing or delivering a product or service. </span><span class="koboSpan" id="kobo.16.3">Although there are different approaches to the DevOps culture, all are about achieving a common goal. </span><span class="koboSpan" id="kobo.16.4">DevOps is about delivering a product or service in the shortest amount of time by increasing operational efficiency through shared responsibilities.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.17.1">Security is the top priority for any application, and security incidents can have a severe business impact. </span><span class="koboSpan" id="kobo.17.2">Despite this, security is often an afterthought in the deployment process, treated as a separate concern handled reactively by specialized security teams within an organization.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.18.1">Embedding security in the DevOps process as a crucial aspect can be achieved by implementing DevSecOps. </span><span class="koboSpan" id="kobo.18.2">DevSecOps is about integrating security early and throughout the software development life cycle, thus breaking down silos and fostering collaboration between development, operations, and security teams. </span><span class="koboSpan" id="kobo.18.3">DevSecOps helps deliver without compromising quality, reliability, stability, resilience, or security.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.19.1">In this chapter, you will learn about the following DevOps topics:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.20.1">Introducing DevOps</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.21.1">Understanding the components of DevOps</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.22.1">Continuous integration/Continuous deployment (CI/CD)</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.23.1">Introducing DevSecOps in security</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.24.1">Combining DevSecOps and CI/CD</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.25.1">Implementing a CD strategy</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.26.1">Implementing continuous testing in the CI/CD pipeline</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.27.1">Using DevOps tools for CI/CD</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.28.1">Implementing DevOps best practices</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.29.1">Building DevOps and DevSecOps in the cloud</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.30.1">By the end of this chapter, you will have learned about the importance of DevOps in application deployment, testing, and security. </span><span class="koboSpan" id="kobo.30.2">You will also learn about the best practices of DevOps and DevSecOps and their different implementation tools and techniques.</span></p>
<h1 class="heading-1" id="_idParaDest-320"><span class="koboSpan" id="kobo.31.1">Introducing DevOps</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.32.1">In a </span><strong class="keyWord"><span class="koboSpan" id="kobo.33.1">DevOps</span></strong><span class="koboSpan" id="kobo.34.1"> (short </span><a id="_idIndexMarker1406"/><span class="koboSpan" id="kobo.35.1">for </span><strong class="keyWord"><span class="koboSpan" id="kobo.36.1">development and operations</span></strong><span class="koboSpan" id="kobo.37.1">) approach, the development and operations teams work collaboratively during the build and deployment phases of the software development life cycle, sharing responsibilities and providing continuous feedback. </span><span class="koboSpan" id="kobo.37.2">The software builds are tested frequently throughout the build phase in production-like environments, allowing the early detection of defects.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.38.1">DevOps is a combination of culture and practices. </span><span class="koboSpan" id="kobo.38.2">It requires organizations to change their culture by breaking down the barriers between all teams in the product development and delivery life cycle. </span><span class="koboSpan" id="kobo.38.3">DevOps is not just about development and operations; it involves the entire organization, including management, business/application owners, developers, QA engineers, release managers, the operations team, and system administrators.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.39.1">Speed enables </span><a id="_idIndexMarker1407"/><span class="koboSpan" id="kobo.40.1">organizations to stay ahead of the competition and address customer requirements quickly. </span><span class="koboSpan" id="kobo.40.2">Good DevOps practices encourage software development engineers and operations professionals to work better together. </span><span class="koboSpan" id="kobo.40.3">This results in closer collaboration and communication, leading to a shorter </span><strong class="keyWord"><span class="koboSpan" id="kobo.41.1">time to market</span></strong><span class="koboSpan" id="kobo.42.1">, reliable release, improved code quality, and better maintenance.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.43.1">Sometimes with DevOps, you will find that a software application’s development and operations are handled by a single team, where engineers work across the entire application life cycle. </span><span class="koboSpan" id="kobo.43.2">Such a team needs to develop a range of skills that are not limited to a single function. </span><span class="koboSpan" id="kobo.43.3">Application testing and security teams may also work more closely with the operations and development teams from the inception to the production launch of an application.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.44.1">Developers benefit from feedback provided by the operations teams and create strategies for testing and deployment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.45.1">System administrators don’t have to implement defective or untested software in production environments because they participate in the </span><em class="italic"><span class="koboSpan" id="kobo.46.1">build phase</span></em><span class="koboSpan" id="kobo.47.1">. </span><span class="koboSpan" id="kobo.47.2">As all software development and delivery life cycle stakeholders collaborate, they can also evaluate the tools they intend to use at each step of the process, verify compatibility between the devices, and determine whether any tools can be shared across the teams.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.48.1">DevOps is gaining popularity as the preferred operating culture, especially for organizations that leverage cloud or distributed computing technologies. </span><span class="koboSpan" id="kobo.48.2">Let’s learn about some of the various benefits of DevOps and why it is essential for your application workload.</span></p>
<h2 class="heading-2" id="_idParaDest-321"><span class="koboSpan" id="kobo.49.1">Understanding the benefits of DevOps</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.50.1">The goal of DevOps is a </span><strong class="keyWord"><span class="koboSpan" id="kobo.51.1">CI/CD</span></strong><span class="koboSpan" id="kobo.52.1"> model that can be utilized to make the software development </span><a id="_idIndexMarker1408"/><span class="koboSpan" id="kobo.53.1">life cycle repeatable, reliable, stable, resilient, and secure. </span><span class="koboSpan" id="kobo.53.2">These characteristics of the model help in improving operational efficiency. </span><span class="koboSpan" id="kobo.53.3">To achieve this goal, teams must collaborate and participate in the development and delivery process. </span><span class="koboSpan" id="kobo.53.4">All technical team members should have experience with the processes and tools involved in the development pipeline. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.54.1">A mature DevOps process provides a number of benefits, as shown in the following diagram:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.55.1"><img alt="" role="presentation" src="../Images/B21336_11_01.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.56.1">Figure 11.1: Benefits of DevOps</span></p>
<p class="normal"><span class="koboSpan" id="kobo.57.1">The benefits provided by DevOps are elaborated on here:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.58.1">Speed</span></strong><span class="koboSpan" id="kobo.59.1">: Releasing product features faster helps to accommodate your customers’ changing business needs and expand your market. </span><span class="koboSpan" id="kobo.59.2">A DevOps model enables an organization to achieve results faster.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.60.1">Fast delivery</span></strong><span class="koboSpan" id="kobo.61.1">: DevOps processes facilitate efficiency by automating end-to-end pipelines, from code build to code deployment and production launch. </span><span class="koboSpan" id="kobo.61.2">Rapid delivery helps you to innovate faster. </span><span class="koboSpan" id="kobo.61.3">The faster release of bug fixes and features allows you to gain a competitive edge.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.62.1">Reliability</span></strong><span class="koboSpan" id="kobo.63.1">: DevOps processes provide checks to ensure delivery quality and the safety of rapid application updates. </span><span class="koboSpan" id="kobo.63.2">DevOps practices like CI and CD embed automation testing and security checks for a positive end-user experience.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.64.1">Scalability</span></strong><span class="koboSpan" id="kobo.65.1">: DevOps helps to scale your infrastructure and application on an on-demand basis by including automation everywhere.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.66.1">Collaboration</span></strong><span class="koboSpan" id="kobo.67.1">: The DevOps model builds a culture of ownership whereby the teams consider their actions. </span><span class="koboSpan" id="kobo.67.2">The operations and dev teams work together in a shared responsibility model. </span><span class="koboSpan" id="kobo.67.3">Collaboration simplifies the process and increases efficiency.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.68.1">Security</span></strong><span class="koboSpan" id="kobo.69.1">: In an agile environment, frequent changes require stringent security checks. </span><span class="koboSpan" id="kobo.69.2">The DevOps model automates security and compliance best practices, monitors them, and takes corrective action in an automated way.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.70.1">Teams take </span><a id="_idIndexMarker1409"/><span class="koboSpan" id="kobo.71.1">full ownership of the services they deliver, often beyond the traditional scope of their roles, and develop thinking from a customer point of view to solve any issue. </span><span class="koboSpan" id="kobo.71.2">Let’s look at understanding the different components of DevOps processes.</span></p>
<h1 class="heading-1" id="_idParaDest-322"><span class="koboSpan" id="kobo.72.1">Understanding the components of DevOps</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.73.1">DevOps tools and automation bring together development and system operations. </span><span class="koboSpan" id="kobo.73.2">The following </span><a id="_idIndexMarker1410"/><span class="koboSpan" id="kobo.74.1">are the critical components of a DevOps practice:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.75.1">CI/CD</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.76.1">Continuous monitoring and improvement</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.77.1">Infrastructure as code</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.78.1">Configuration management</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.79.1">A common best </span><a id="_idIndexMarker1411"/><span class="koboSpan" id="kobo.80.1">practice across all the elements is </span><strong class="keyWord"><span class="koboSpan" id="kobo.81.1">automation</span></strong><span class="koboSpan" id="kobo.82.1">. </span><span class="koboSpan" id="kobo.82.2">Automation can involve scripts, templates, and other tools. </span><span class="koboSpan" id="kobo.82.3">In a thriving DevOps environment, infrastructure is managed as code. </span><span class="koboSpan" id="kobo.82.4">Automation enables DevOps teams to set up and tune test and production environments rapidly. </span><span class="koboSpan" id="kobo.82.5">Let’s explore more details about each component.</span></p>
<h2 class="heading-2" id="_idParaDest-323"><span class="koboSpan" id="kobo.83.1">Continuous integration/Continuous deployment</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.84.1">In </span><strong class="keyWord"><span class="koboSpan" id="kobo.85.1">CI</span></strong><span class="koboSpan" id="kobo.86.1">, developers </span><a id="_idIndexMarker1412"/><span class="koboSpan" id="kobo.87.1">commit code frequently to a code repository. </span><span class="koboSpan" id="kobo.87.2">The code is built frequently. </span><span class="koboSpan" id="kobo.87.3">Each build is tested using automated unit tests and integration tests. </span><span class="koboSpan" id="kobo.87.4">In </span><strong class="keyWord"><span class="koboSpan" id="kobo.88.1">CD</span></strong><span class="koboSpan" id="kobo.89.1">, you go further and frequently deploy your code in production. </span><span class="koboSpan" id="kobo.89.2">Builds are deployed to test environments and are tested using automated and possibly manual tests. </span><span class="koboSpan" id="kobo.89.3">Successful builds pass tests and are deployed to staging or production environments.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.90.1">The following diagram illustrates the impact of CI versus CD in the software development life cycle:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.91.1"><img alt="" role="presentation" src="../Images/B21336_11_02.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.92.1">Figure 11.2: CI/CD</span></p>
<p class="normal"><span class="koboSpan" id="kobo.93.1">As shown </span><a id="_idIndexMarker1413"/><span class="koboSpan" id="kobo.94.1">in the preceding diagram, CI refers to the software development life cycle’s building and unit testing stages. </span><span class="koboSpan" id="kobo.94.2">Every update that is committed in the code repository creates an automated build and test. </span><span class="koboSpan" id="kobo.94.3">The CD is an essential aspect of CI that extends the CI process further to deploy the build in production. </span><span class="koboSpan" id="kobo.94.4">In CI/CD practices, several people work on the code. </span><span class="koboSpan" id="kobo.94.5">They all must use the latest working build for their efforts. </span><span class="koboSpan" id="kobo.94.6">Code repositories maintain different versions of the code and also make the code accessible to the team. </span><span class="koboSpan" id="kobo.94.7">You check out the code from the repository, make changes, write new code in your local copy, compile and test your code, and frequently commit your code back to the main repository. </span><span class="koboSpan" id="kobo.94.8">In CI/CD, software development life cycle phases such as code, build, deploy, and test are automated using the DevOps pipeline.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.95.1">CI automates most of the software release process. </span><span class="koboSpan" id="kobo.95.2">It creates an automated flow that builds, tests, and then stages the update. </span><span class="koboSpan" id="kobo.95.3">However, a developer must trigger the final deployment to </span><a id="_idIndexMarker1414"/><span class="koboSpan" id="kobo.96.1">a live production environment that is not automated. </span><span class="koboSpan" id="kobo.96.2">It expands upon CD by deploying all code changes to testing and/or production environments after the build stage. </span><span class="koboSpan" id="kobo.96.3">Developers will always have a tested and deployment-ready build if CD is implemented correctly.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.97.1">The following diagram illustrates everything related to the automation of an application, ranging from code commits into a code repo to the deployment pipeline. </span><span class="koboSpan" id="kobo.97.2">It shows an end-to-end flow from the build to the production environment, where the developer checks the code change into the code repository, which the CI server pulls. </span><span class="koboSpan" id="kobo.97.3">The CI server triggers the build to create a deployment package with new application binaries and corresponding dependencies. </span><span class="koboSpan" id="kobo.97.4">These new binaries are deployed in a targeted development or testing environment. </span><span class="koboSpan" id="kobo.97.5">Binaries also get checked into the artifact repository for safe version-controlled storage:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.98.1"><img alt="" role="presentation" src="../Images/B21336_11_03.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.99.1">Figure 11.3: CI/CD for DevOps</span></p>
<p class="normal"><span class="koboSpan" id="kobo.100.1">A robust CD pipeline also automates the provisioning of infrastructure for testing and production environments and enables the monitoring and management of test and production environments. </span><span class="koboSpan" id="kobo.100.2">CD does not mean that every change committed by the developer goes </span><a id="_idIndexMarker1415"/><span class="koboSpan" id="kobo.101.1">into production. </span><span class="koboSpan" id="kobo.101.2">Instead, it means that every change is </span><em class="italic"><span class="koboSpan" id="kobo.102.1">ready</span></em><span class="koboSpan" id="kobo.103.1"> to go into production. </span><span class="koboSpan" id="kobo.103.2">When the changes are staged and tested in the stage environment, a manual approval process initiates and gives a green signal to deploy to production. </span><span class="koboSpan" id="kobo.103.3">Thus, in CD, deploying to production becomes a business decision and is still automated with tools.</span></p>
<h2 class="heading-2" id="_idParaDest-324"><span class="koboSpan" id="kobo.104.1">Continuous monitoring and improvement</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.105.1">Continuous monitoring helps us to understand the impact of application and infrastructure </span><a id="_idIndexMarker1416"/><span class="koboSpan" id="kobo.106.1">performance on the customer. </span><span class="koboSpan" id="kobo.106.2">You can learn how code changes impact users by analyzing </span><a id="_idIndexMarker1417"/><span class="koboSpan" id="kobo.107.1">data and logs. </span><span class="koboSpan" id="kobo.107.2">Active monitoring is essential in the era of 24/7 services and constant updates to applications and infrastructure. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.108.1">You can proactively monitor services by creating alerts and performing real-time analysis. </span><span class="koboSpan" id="kobo.108.2">You can track various metrics to monitor and improve your DevOps practice.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.109.1">Examples of </span><a id="_idIndexMarker1418"/><span class="koboSpan" id="kobo.110.1">DevOps-related metrics are as follows:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.111.1">Change volume</span></strong><span class="koboSpan" id="kobo.112.1">: This is the number of user stories developed, the number of lines of new code, and the number of bugs fixed.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.113.1">Deployment frequency</span></strong><span class="koboSpan" id="kobo.114.1">: This indicates how often a team is deploying an application. </span><span class="koboSpan" id="kobo.114.2">This metric should generally remain stable or show an upward trend.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.115.1">Lead time from development to deployment</span></strong><span class="koboSpan" id="kobo.116.1">: The time between the beginning of a development cycle and the end of deployment can be used to identify inefficiencies in the intermediate steps of the release cycle.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.117.1">Percentage of failed deployments</span></strong><span class="koboSpan" id="kobo.118.1">: The percentage of failed deployments, including the number of deployments that resulted in outages, should be low.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.119.1">This metric should be reviewed in conjunction with the change volume. </span><span class="koboSpan" id="kobo.119.2">Analyze potential points of failure if the change volume is low but the number of failed deployments is high.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.120.1">Availability</span></strong><span class="koboSpan" id="kobo.121.1">: Track how many releases caused failures that possibly resulted in violations of </span><strong class="keyWord"><span class="koboSpan" id="kobo.122.1">service-level agreements</span></strong><span class="koboSpan" id="kobo.123.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.124.1">SLAs</span></strong><span class="koboSpan" id="kobo.125.1">). </span><span class="koboSpan" id="kobo.125.2">What is the average downtime for the application?</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.126.1">Customer complaint volume</span></strong><span class="koboSpan" id="kobo.127.1">: The number of complaint tickets filed by customers indicates the quality of your application.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.128.1">Percentage change in user volume</span></strong><span class="koboSpan" id="kobo.129.1">: The number of new users signing up to use your application and the resulting increase in traffic can help you scale your infrastructure to match the workload.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.130.1">After your </span><a id="_idIndexMarker1419"/><span class="koboSpan" id="kobo.131.1">deploy builds </span><a id="_idIndexMarker1420"/><span class="koboSpan" id="kobo.132.1">to the production environment, monitoring your application’s performance is essential. </span><span class="koboSpan" id="kobo.132.2">As we discussed automating environments, let’s explore </span><strong class="keyWord"><span class="koboSpan" id="kobo.133.1">Infrastructure as code</span></strong><span class="koboSpan" id="kobo.134.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.135.1">IaC</span></strong><span class="koboSpan" id="kobo.136.1">) in detail.</span></p>
<h2 class="heading-2" id="_idParaDest-325"><span class="koboSpan" id="kobo.137.1">Infrastructure as code</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.138.1">Provisioning, managing, and even deprecating infrastructure is a costly activity in terms of human </span><a id="_idIndexMarker1421"/><span class="koboSpan" id="kobo.139.1">effort. </span><span class="koboSpan" id="kobo.139.2">Furthermore, errors can be made by repeated attempts to build and modify environments manually. </span><span class="koboSpan" id="kobo.139.3">Whether working from </span><a id="_idIndexMarker1422"/><span class="koboSpan" id="kobo.140.1">prior experience or a well-documented runbook, the tendency for a human to make a mistake is a statistical probability.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.141.1">We can automate the task of creating a complete environment. </span><span class="koboSpan" id="kobo.141.2">Task automation can help to complete repetitive tasks and provide significant value effortlessly.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.142.1">With IaC, we can </span><a id="_idIndexMarker1423"/><span class="koboSpan" id="kobo.143.1">define our infrastructure in the form of </span><strong class="keyWord"><span class="koboSpan" id="kobo.144.1">templates</span></strong><span class="koboSpan" id="kobo.145.1">. </span><span class="koboSpan" id="kobo.145.2">A single template may consist of a part or the entirety of an environment. </span><span class="koboSpan" id="kobo.145.3">More importantly, this template can be used repeatedly to create the same environment again.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.146.1">In IaC, infrastructure is spun up and managed using code. </span><span class="koboSpan" id="kobo.146.2">An IaC model helps you interact with infrastructure programmatically at scale and avoid human errors by automating resource configuration. </span><span class="koboSpan" id="kobo.146.3">That way, you can work with infrastructure the same way you would with code by using code-based tools. </span><span class="koboSpan" id="kobo.146.4">As the infrastructure is managed through code, the application can be deployed using a standardized method, and any patches and versions can be updated repeatedly without errors.</span><strong class="keyWord"> </strong></p>
<p class="normal"><span class="koboSpan" id="kobo.147.1">Some of the most popular IaC scripting tools are Ansible, Terraform, Azure Resource Manager, Google </span><a id="_idIndexMarker1424"/><span class="koboSpan" id="kobo.148.1">Cloud Deployment Manager, Chef, Puppet, AWS </span><strong class="keyWord"><span class="koboSpan" id="kobo.149.1">Cloud Development Kit</span></strong><span class="koboSpan" id="kobo.150.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.151.1">CDK</span></strong><span class="koboSpan" id="kobo.152.1">) and AWS CloudFormation.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.153.1">The </span><a id="_idIndexMarker1425"/><span class="koboSpan" id="kobo.154.1">following is a code </span><a id="_idIndexMarker1426"/><span class="koboSpan" id="kobo.155.1">sample from AWS CloudFormation, which provides IaC capability to automate infrastructures on the AWS cloud platform.</span></p>
<pre class="programlisting code"><code class="hljs-code"><code class="hljs-code"><span class="hljs-attribute"><span class="koboSpan" id="kobo.156.1">AWSTemplateFormatVersion</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.157.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.158.1">'2010-09-09'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.159.1">Description</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.160.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.161.1">'Create an S3 Storage with a parameter to choose own bucket name.'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.162.1">Parameters</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.163.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.164.1">S3NameParam</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.165.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.166.1">Type</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.167.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.168.1">String</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.169.1">Default</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.170.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.171.1">'architect-book-storage'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.172.1">Description</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.173.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.174.1">'Enter the S3 Bucket Name'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.175.1">MinLength</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.176.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.177.1">'5'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.178.1">MaxLength</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.179.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.180.1">'30'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.181.1">Resources</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.182.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.183.1">Bucket</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.184.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.185.1">Type</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.186.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.187.1">'AWS::S3::Bucket'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.188.1">DeletionPolicy</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.189.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.190.1">Retain</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.191.1">Properties</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.192.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.193.1">AccessControl</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.194.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.195.1">Private</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.196.1">BucketName</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.197.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.198.1">Ref</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.199.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.200.1">S3NameParam</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.201.1">Tags</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.202.1">:</span></span>
<span class="hljs-bullet"><span class="koboSpan" id="kobo.203.1">-</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.204.1">Key: 'Name'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.205.1">Value</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.206.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.207.1">'MyBucket'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.208.1">Outputs</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.209.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.210.1">BucketName</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.211.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.212.1">Description</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.213.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.214.1">'BucketName'</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.215.1">Value</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.216.1">:</span></span>
<span class="hljs-attribute"><span class="koboSpan" id="kobo.217.1">Ref</span></span><span class="hljs-punctuation"><span class="koboSpan" id="kobo.218.1">:</span></span> <span class="hljs-string"><span class="koboSpan" id="kobo.219.1">S3NameParam</span></span>
</code></code></pre>
<p class="normal"><span class="koboSpan" id="kobo.220.1">The preceding code creates Amazon S3 object storage with an option for the user to provide their choice of storage name, as shown below:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.221.1"><img alt="" role="presentation" src="../Images/B21336_11_04.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.222.1">Figure 11.4: IaC using AWS CloudFormation</span></p>
<p class="normal"><span class="koboSpan" id="kobo.223.1">After </span><a id="_idIndexMarker1427"/><span class="koboSpan" id="kobo.224.1">execution of the code, the Amazon S3 bucket gets </span><a id="_idIndexMarker1428"/><span class="koboSpan" id="kobo.225.1">created, as you can see in </span><strong class="keyWord"><span class="koboSpan" id="kobo.226.1">Resources</span></strong><span class="koboSpan" id="kobo.227.1">:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.228.1"><img alt="" role="presentation" src="../Images/B21336_11_05.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.229.1">Figure 11.5: Automated AWS S3 object storage creation using AWS CloudFormation</span></p>
<p class="normal"><span class="koboSpan" id="kobo.230.1">Multiple teams can use the provided code to create any amount of Amazon S3 storage. </span><span class="koboSpan" id="kobo.230.2">As data is so essential, the admin chose to add bucket </span><code class="inlineCode"><span class="koboSpan" id="kobo.231.1">"DeletionPolicy": "Retain,"</span></code><span class="koboSpan" id="kobo.232.1"> which ensures storage doesn’t get deleted when infrastructure comes down and that data is safe.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.233.1">You </span><a id="_idIndexMarker1429"/><span class="koboSpan" id="kobo.234.1">can see how you </span><a id="_idIndexMarker1430"/><span class="koboSpan" id="kobo.235.1">can implement standardization, consistency, and compliance across organizations using IaC. </span><span class="koboSpan" id="kobo.235.2">Configuration management is another vital aspect of the DevOps process. </span><span class="koboSpan" id="kobo.235.3">Let’s learn more about it.</span></p>
<h2 class="heading-2" id="_idParaDest-326"><span class="koboSpan" id="kobo.236.1">Configuration management</span></h2>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.237.1">Configuration management </span></strong><span class="koboSpan" id="kobo.238.1">(</span><strong class="keyWord"><span class="koboSpan" id="kobo.239.1">CM</span></strong><span class="koboSpan" id="kobo.240.1">) is the process of using automation to standardize resource </span><a id="_idIndexMarker1431"/><span class="koboSpan" id="kobo.241.1">configurations across your entire infrastructure and applications. </span><span class="koboSpan" id="kobo.241.2">CM tools such as Chef, Puppet, and </span><a id="_idIndexMarker1432"/><span class="koboSpan" id="kobo.242.1">Ansible can help you manage IaC and automate most system administration tasks, including provisioning, configuring, and managing IT resources.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.243.1">By automating and standardizing resource configurations across the development, build, test, and deployment phases, you can ensure consistency and eliminate failures caused by misconfiguration. </span><span class="koboSpan" id="kobo.243.2">CM can also increase the productivity of your operations by allowing you to deploy the same configuration to hundreds of servers automatically at the push of a button. </span><span class="koboSpan" id="kobo.243.3">CM can also be leveraged to deploy changes to configurations.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.244.1">Although you can use registry settings or databases to store system configuration settings, a CM application allows you to maintain version control as well, in addition to storage. </span><span class="koboSpan" id="kobo.244.2">CM is also a way to track and audit configuration changes. </span><span class="koboSpan" id="kobo.244.3">If necessary, you can even maintain multiple configuration settings versions for various software versions.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.245.1">CM tools include a controller machine that manages server nodes. </span><span class="koboSpan" id="kobo.245.2">For example, Chef requires a client agent application installed on each server to manage, and a master Chef application is installed on the controller machine. </span><span class="koboSpan" id="kobo.245.3">Puppet also works the same way with a centralized server. </span><span class="koboSpan" id="kobo.245.4">However, Ansible has a decentralized approach that doesn’t require installing agent software on the server nodes.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.246.1">The following table shows a high-level comparison between the various popular configuration management tools:</span></p>
<table class="table-container" id="table001-4">
<tbody>
<tr>
<td class="table-cell"/>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.247.1">Ansible</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.248.1">Puppet</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.249.1">Chef</span></strong></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.250.1">Mechanism</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.251.1">Controller machine applies changes to servers using </span><strong class="keyWord"><span class="koboSpan" id="kobo.252.1">Secure Shell</span></strong><span class="koboSpan" id="kobo.253.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.254.1">SSH</span></strong><span class="koboSpan" id="kobo.255.1">)</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.256.1">Master synchronizes changes to Puppet node</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.257.1">The Chef workstation looks for changes in Chef servers and pushes them to the Chef node.</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.258.1">Architecture</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.259.1">Any server can be the controller</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.260.1">Centralized control by the Puppet master</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.261.1">Centralized control by Chef server</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.262.1">Script Language</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.263.1">YAML</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.264.1">Domain-specific on Ruby</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.265.1">Ruby</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.266.1">Scripting Terminology</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.267.1">Playbook and roles</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.268.1">Manifests and modules</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.269.1">Recipes and cookbooks</span></p>
</td>
</tr>
<tr>
<td class="table-cell">
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.270.1">Test Execution</span></strong></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.271.1">Sequential order</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.272.1">Non-sequential order</span></p>
</td>
<td class="table-cell">
<p class="normal"><span class="koboSpan" id="kobo.273.1">Sequential order</span></p>
</td>
</tr>
</tbody>
</table>
<p class="packt_figref"><span class="koboSpan" id="kobo.274.1">Table 11.1 – Popular CM tools comparison chart </span></p>
<p class="normal"><span class="koboSpan" id="kobo.275.1">CM tools </span><a id="_idIndexMarker1433"/><span class="koboSpan" id="kobo.276.1">provide a domain-specific language and set </span><a id="_idIndexMarker1434"/><span class="koboSpan" id="kobo.277.1">of features for automation. </span><span class="koboSpan" id="kobo.277.2">Some of these tools have a steep learning curve whereby the team has to learn the tool. </span><span class="koboSpan" id="kobo.277.3">AWS provides a managed platform called OpsWorks to manage Chef and Puppet in the cloud. </span><span class="koboSpan" id="kobo.277.4">It provides various attributes to manage IT infrastructure through automation, as shown below:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.278.1"><img alt="" role="presentation" src="../Images/B21336_11_06.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.279.1">Figure 11.6: AWS OpsWorks service capabilities for managed Chef and Puppet</span></p>
<p class="normal"><span class="koboSpan" id="kobo.280.1">Security </span><a id="_idIndexMarker1435"/><span class="koboSpan" id="kobo.281.1">has become a priority for any organization, so complete security automation is the need of </span><a id="_idIndexMarker1436"/><span class="koboSpan" id="kobo.282.1">the hour. </span><span class="koboSpan" id="kobo.282.2">Organizations are moving to tight security implementations and monitoring to avoid human error, using the DevOps process </span><a id="_idIndexMarker1437"/><span class="koboSpan" id="kobo.283.1">popularly known as </span><strong class="keyWord"><span class="koboSpan" id="kobo.284.1">DevSecOps</span></strong><span class="koboSpan" id="kobo.285.1">. </span><span class="koboSpan" id="kobo.285.2">In the next section, let’s explore </span><strong class="keyWord"><span class="koboSpan" id="kobo.286.1">DevSecOps</span></strong><span class="koboSpan" id="kobo.287.1"> (short for </span><strong class="keyWord"><span class="koboSpan" id="kobo.288.1">development, security, and operations</span></strong><span class="koboSpan" id="kobo.289.1">).</span></p>
<h1 class="heading-1" id="_idParaDest-327"><span class="koboSpan" id="kobo.290.1">Introducing DevSecOps for Security</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.291.1">We are now more focused on security than ever. </span><span class="koboSpan" id="kobo.291.2">In many situations, security is the only way to </span><a id="_idIndexMarker1438"/><span class="koboSpan" id="kobo.292.1">win customer trust. </span><span class="koboSpan" id="kobo.292.2">DevSecOps is about the automation of security and the implementation of security at scale. </span><span class="koboSpan" id="kobo.292.3">The development team constantly makes changes, and the DevOps team publishes them in production (changes are often customer-facing). </span><span class="koboSpan" id="kobo.292.4">DevSecOps ensures application security in the overall process.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.293.1">DevSecOps is not there to audit code or CI/CD artifacts. </span><span class="koboSpan" id="kobo.293.2">Organizations should implement DevSecOps to enable speed and agility, but not at the expense of validating security which slows down the development and deployment process. </span><span class="koboSpan" id="kobo.293.3">The power of automation is in increasing product feature launch agility while implementing the required security measures. </span><span class="koboSpan" id="kobo.293.4">A DevSecOps approach results in built-in security; security is not applied only as an afterthought. </span><span class="koboSpan" id="kobo.293.5">DevOps is about adding efficiency to speed up the product launch life cycle, while DevSecOps validates all building blocks without slowing the life cycle.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.294.1">To institute a DevSecOps approach in your organization, start with a solid DevOps foundation across the development environment, as security is everyone’s responsibility. </span><span class="koboSpan" id="kobo.294.2">It would be best to embed security in the architecture design from inception to create collaboration between development and security teams. </span><span class="koboSpan" id="kobo.294.3">Automate continuous security testing and build it into the CI/CD pipeline to avoid any security gaps. </span><span class="koboSpan" id="kobo.294.4">To keep track of any security breach, extend monitoring to include security and compliance by monitoring for drift from the design state in real time. </span><span class="koboSpan" id="kobo.294.5">Monitoring should enable alerting, automated remediation, and removal of non-compliant resources.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.295.1">Codifying everything is an essential requirement that opens up infinite possibilities. </span><span class="koboSpan" id="kobo.295.2">DevSecOps aims to keep the pace of innovation, which should meet the pace of security automation. </span><span class="koboSpan" id="kobo.295.3">A scalable infrastructure needs scalable security, requiring automatic incident response remediation to implement continuous compliance and validation.</span></p>
<h1 class="heading-1" id="_idParaDest-328"><span class="koboSpan" id="kobo.296.1">Combining DevSecOps and CI/CD</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.297.1">A </span><a id="_idIndexMarker1439"/><span class="koboSpan" id="kobo.298.1">DevSecOps practice must be embedded with every CI/CD pipeline step. </span><span class="koboSpan" id="kobo.298.2">DevSecOps ensures </span><a id="_idIndexMarker1440"/><span class="koboSpan" id="kobo.299.1">the security of the CI/CD pipeline by managing the proper access and roles assigned to each server and making sure the build servers, such as Jenkins, are hardened to be protected from any security glitch. </span><span class="koboSpan" id="kobo.299.2">In addition to that, we need to ensure that all artifacts are validated, and code analysis is in place. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.300.1">It’s advisable to be ready for incident response by automating continuous compliance validation and incident response remediation. </span><span class="koboSpan" id="kobo.300.2">For instance, if an organization needs to comply with the Payment Card Industry Data Security Standard (PCI-DSS), continuous compliance validation would involve setting up automated tools and processes to constantly check that the handling, processing, and storage of credit card information meet PCI-DSS requirements.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.301.1">The </span><a id="_idIndexMarker1441"/><span class="koboSpan" id="kobo.302.1">following diagram provides us with multiple stages to test security boundaries and catch </span><a id="_idIndexMarker1442"/><span class="koboSpan" id="kobo.303.1">security issues and ensure compliance with policies as early as possible:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.304.1"><img alt="" role="presentation" src="../Images/B21336_11_07.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.305.1">Figure 11.7: DevSecOps and CI/CD</span></p>
<p class="normal"><span class="koboSpan" id="kobo.306.1">At each integration point, you can identify different issues, as illustrated in the preceding diagram:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.307.1">In the </span><strong class="keyWord"><span class="koboSpan" id="kobo.308.1">Code</span></strong><span class="koboSpan" id="kobo.309.1"> phase, scan all code to ensure no secret or access key is hardcoded between code lines.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.310.1">During the </span><strong class="keyWord"><span class="koboSpan" id="kobo.311.1">Build</span></strong><span class="koboSpan" id="kobo.312.1"> phase, include all security artifacts, such as the encryption key and access token management, and tag them for easy identification.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.313.1">During the </span><strong class="keyWord"><span class="koboSpan" id="kobo.314.1">Test</span></strong><span class="koboSpan" id="kobo.315.1"> phase, scan the configuration to make sure all security standards are met by test security.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.316.1">In the </span><strong class="keyWord"><span class="koboSpan" id="kobo.317.1">Deploy</span></strong><span class="koboSpan" id="kobo.318.1"> and </span><strong class="keyWord"><span class="koboSpan" id="kobo.319.1">Provision</span></strong><span class="koboSpan" id="kobo.320.1"> phases, ensure all security components are registered. </span><span class="koboSpan" id="kobo.320.2">Perform a checksum to ensure no changes in the build files. </span><span class="koboSpan" id="kobo.320.3">A checksum is a technique used to determine the authenticity of received files. </span><span class="koboSpan" id="kobo.320.4">Operating systems provide a </span><code class="inlineCode"><span class="koboSpan" id="kobo.321.1">checksum</span></code><span class="koboSpan" id="kobo.322.1"> command to validate the file and ensure no changes are made during file transfer.</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.323.1">Monitor all security standards during the </span><strong class="keyWord"><span class="koboSpan" id="kobo.324.1">Monitor</span></strong><span class="koboSpan" id="kobo.325.1"> phase. </span><span class="koboSpan" id="kobo.325.2">Perform continuous audits and validation in an automated way.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.326.1">You </span><a id="_idIndexMarker1443"/><span class="koboSpan" id="kobo.327.1">can integrate multiple tools into DevSecOps pipelines to identify security vulnerabilities at various </span><a id="_idIndexMarker1444"/><span class="koboSpan" id="kobo.328.1">stages and aggregate the vulnerability findings. </span></p>
<p class="normal"><strong class="keyWord"><span class="koboSpan" id="kobo.329.1">Application security testing</span></strong><span class="koboSpan" id="kobo.330.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.331.1">AST</span></strong><span class="koboSpan" id="kobo.332.1">), which involves using tools to automate the testing, analysis, and </span><a id="_idIndexMarker1445"/><span class="koboSpan" id="kobo.333.1">reporting of security vulnerabilities, is a critical component of application development. </span><span class="koboSpan" id="kobo.333.2">AST can be broken down into the following four categories to scan security vulnerabilities in software applications:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.334.1">Software composite analysis </span></strong><span class="koboSpan" id="kobo.335.1">(</span><strong class="keyWord"><span class="koboSpan" id="kobo.336.1">SCA</span></strong><span class="koboSpan" id="kobo.337.1">): SCA evaluates the open-source software’s </span><a id="_idIndexMarker1446"/><span class="koboSpan" id="kobo.338.1">security, license compliance, and code quality in a codebase. </span><span class="koboSpan" id="kobo.338.2">SCA attempts to detect publicly disclosed vulnerabilities contained </span><a id="_idIndexMarker1447"/><span class="koboSpan" id="kobo.339.1">within a project’s dependencies. </span><span class="koboSpan" id="kobo.339.2">Popular SCA tools are OWASP Dependency-Check, Synopsys’ Black Duck, WhiteSource, Synk, and GitLab.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.340.1">Static application security testing</span></strong><span class="koboSpan" id="kobo.341.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.342.1">SAST</span></strong><span class="koboSpan" id="kobo.343.1">): SAST involves scanning an application’s </span><a id="_idIndexMarker1448"/><span class="koboSpan" id="kobo.344.1">code prior to compilation. </span><span class="koboSpan" id="kobo.344.2">These tools provide developers with immediate feedback during </span><a id="_idIndexMarker1449"/><span class="koboSpan" id="kobo.345.1">the coding process, allowing for the early correction of issues before the code build phase. </span><span class="koboSpan" id="kobo.345.2">As a white-box testing method, SAST analyzes the source code to identify vulnerabilities that could make applications prone to attacks. </span><span class="koboSpan" id="kobo.345.3">Its key advantage is its integration early in the DevOps </span><a id="_idIndexMarker1450"/><span class="koboSpan" id="kobo.346.1">cycle, during the coding stage, as it doesn’t require a functioning application or code execution. </span><span class="koboSpan" id="kobo.346.2">Popular SAST tools include SonarQube, PHPStan, Coverity, Synk, Appknox, Klocwork, CodeScan, and Checkmarx.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.347.1">Dynamic application security testing</span></strong><span class="koboSpan" id="kobo.348.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.349.1">DAST</span></strong><span class="koboSpan" id="kobo.350.1">): DAST identifies security vulnerabilities </span><a id="_idIndexMarker1451"/><span class="koboSpan" id="kobo.351.1">by mimicking external attacks on an application while it </span><a id="_idIndexMarker1452"/><span class="koboSpan" id="kobo.352.1">is running. </span><span class="koboSpan" id="kobo.352.2">It assesses the application from the outside, probing exposed interfaces for vulnerabilities. </span><span class="koboSpan" id="kobo.352.3">Known as black-box security testing or a web application vulnerability scanner, DAST tools include OWASP ZAP, Netsparker, Detectify Deep Scan, StackHawk, Appknox, HCL AppScan, GitLab, and Checkmarx.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.353.1">Interactive application security testing</span></strong><span class="koboSpan" id="kobo.354.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.355.1">IAST</span></strong><span class="koboSpan" id="kobo.356.1">): IAST examines code for security </span><a id="_idIndexMarker1453"/><span class="koboSpan" id="kobo.357.1">vulnerabilities while </span><a id="_idIndexMarker1454"/><span class="koboSpan" id="kobo.358.1">the application is actively being tested or used, thus reporting issues in real time without causing delays in the CI/CD pipeline. </span><span class="koboSpan" id="kobo.358.2">IAST tools are typically implemented in QA environments alongside automated functional tests. </span><span class="koboSpan" id="kobo.358.3">Notable IAST tools are GitLab, Veracode, CxSAST, Burp Suite, Acunetix, Netsparker, InsightAppSec, and HCL AppScan.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.359.1">You will learn about integrating some of the above tools in the DevOps pipeline later in the chapter, under the </span><em class="italic"><span class="koboSpan" id="kobo.360.1">Building DevOps and DevSecOps in the cloud</span></em><span class="koboSpan" id="kobo.361.1"> section. </span><span class="koboSpan" id="kobo.361.2">DevSecOps CI/CD confirms that the code is validated against the corporate security policy.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.362.1">It helps to avoid any infrastructure and application failure in later deployment due to different security configurations. </span><span class="koboSpan" id="kobo.362.2">DevSecOps maintains agility and ensures security at scale without affecting DevOps’ pace of innovation. </span><span class="koboSpan" id="kobo.362.3">Let’s learn about the CD strategy in the DevOps pipeline.</span></p>
<h1 class="heading-1" id="_idParaDest-329"><span class="koboSpan" id="kobo.363.1">Implementing a CD strategy</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.364.1">CD </span><a id="_idIndexMarker1455"/><span class="koboSpan" id="kobo.365.1">provides seamless migration of the existing version of an application to the new version. </span><span class="koboSpan" id="kobo.365.2">Some of the most popular techniques to implement through CD are as follows:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.366.1">In-place deployment</span></strong><span class="koboSpan" id="kobo.367.1">: Update application on a current server</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.368.1">Rolling deployment</span></strong><span class="koboSpan" id="kobo.369.1">: Gradually roll out the new version in the existing fleet of servers</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.370.1">Blue-green deployment</span></strong><span class="koboSpan" id="kobo.371.1">: Gradually replace the existing server with the new server</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.372.1">Red-black deployment</span></strong><span class="koboSpan" id="kobo.373.1">: Instant cutover to the new server from the existing server</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.374.1">Immutable deployment</span></strong><span class="koboSpan" id="kobo.375.1">: Stand up a new set of servers altogether</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.376.1">Let’s explore </span><a id="_idIndexMarker1456"/><span class="koboSpan" id="kobo.377.1">each option in more detail.</span></p>
<h2 class="heading-2" id="_idParaDest-330"><span class="koboSpan" id="kobo.378.1">In-place deployment</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.379.1">In-place deployment is a method of rolling out a new application version on an existing fleet of </span><a id="_idIndexMarker1457"/><span class="koboSpan" id="kobo.380.1">servers. </span><span class="koboSpan" id="kobo.380.2">The update is done in one deployment action, requiring some downtime. </span><span class="koboSpan" id="kobo.380.3">Hardly any infrastructure </span><a id="_idIndexMarker1458"/><span class="koboSpan" id="kobo.381.1">changes are needed for this update. </span><span class="koboSpan" id="kobo.381.2">There is also no need to update existing </span><strong class="keyWord"><span class="koboSpan" id="kobo.382.1">Domain Name System</span></strong><span class="koboSpan" id="kobo.383.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.384.1">DNS</span></strong><span class="koboSpan" id="kobo.385.1">) records. </span><span class="koboSpan" id="kobo.385.2">The deployment process itself is relatively quick. </span><span class="koboSpan" id="kobo.385.3">If the deployment fails, redeployment is the only option for restoration.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.386.1">As a simple explanation, you are replacing the existing application version (v1) on the application infrastructure with the new version (v2). </span><span class="koboSpan" id="kobo.386.2">In-place updates are low-cost and fast to deploy.</span></p>
<h2 class="heading-2" id="_idParaDest-331"><span class="koboSpan" id="kobo.387.1">Rolling deployment</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.388.1">With a rolling deployment, the server fleet is divided into groups, so it doesn’t need to be updated </span><a id="_idIndexMarker1459"/><span class="koboSpan" id="kobo.389.1">simultaneously. </span><span class="koboSpan" id="kobo.389.2">The deployment process runs old and new software versions on the same server fleet but with different subgroups. </span><span class="koboSpan" id="kobo.389.3">A rolling </span><a id="_idIndexMarker1460"/><span class="koboSpan" id="kobo.390.1">deployment approach helps to achieve zero downtime. </span><span class="koboSpan" id="kobo.390.2">If a new version deployment fails, then only a subset of servers is impacted from the entire fleet, and the risk is minimal because half of the fleet will still be up and running. </span><span class="koboSpan" id="kobo.390.3">A rolling deployment helps to achieve zero downtime; however, deployment time is little more than in-place deployment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.391.1">A rolling deployment not only helps achieve zero downtime, enhancing the user experience, but it is also cost-neutral in terms of additional resource allocation. </span><span class="koboSpan" id="kobo.391.2">Unlike blue-green deployments that require doubling the environment for a period, rolling deployments update existing resources one by one, avoiding the need for extra infrastructure. </span><span class="koboSpan" id="kobo.391.3">While the deployment time might be slightly longer compared to in-place deployments, this </span><a id="_idIndexMarker1461"/><span class="koboSpan" id="kobo.392.1">method doesn’t incur extra costs from provisioning </span><a id="_idIndexMarker1462"/><span class="koboSpan" id="kobo.393.1">additional resources, making it an efficient strategy for continuous delivery without impacting your budget. </span><span class="koboSpan" id="kobo.393.2">Let’s learn about blue-green deployment now. </span></p>
<h2 class="heading-2" id="_idParaDest-332"><span class="koboSpan" id="kobo.394.1">Blue-green deployment</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.395.1">The idea behind blue-green deployment is that your blue environment is your existing production </span><a id="_idIndexMarker1463"/><span class="koboSpan" id="kobo.396.1">environment carrying live traffic. </span><span class="koboSpan" id="kobo.396.2">In parallel, you provide a green environment, which is identical to the blue environment, other than having the new version of your code. </span><span class="koboSpan" id="kobo.396.3">When it’s time to deploy, you route production </span><a id="_idIndexMarker1464"/><span class="koboSpan" id="kobo.397.1">traffic from the blue to the green environment. </span><span class="koboSpan" id="kobo.397.2">If you encounter any issues with the green environment, you can roll it back by reverting traffic to the original blue environment. </span><span class="koboSpan" id="kobo.397.3">DNS cutover and swapping auto-scaling groups are the two most common methods to re-route traffic in blue-green deployment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.398.1">Using auto-scaling policies, you can gradually replace existing instances with instances hosting the new version of your application as your application scales out. </span><span class="koboSpan" id="kobo.398.2">This option is best used for minor releases and small code changes. </span><span class="koboSpan" id="kobo.398.3">Another option is to leverage DNS routing to perform sophisticated load balancing between different versions of our application.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.399.1">As illustrated in the following diagram, after creating a production environment that hosts the new version of our application, you can use the DNS route to shift a small portion of traffic to the new environment:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.400.1"><img alt="" role="presentation" src="../Images/B21336_11_08.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.401.1">Figure 11.8: Blue-green deployment DNS gradual cutover</span></p>
<p class="normal"><span class="koboSpan" id="kobo.402.1">Test the green </span><a id="_idIndexMarker1465"/><span class="koboSpan" id="kobo.403.1">environment with a fraction of production traffic, called </span><strong class="keyWord"><span class="koboSpan" id="kobo.404.1">canary analysis</span></strong><span class="koboSpan" id="kobo.405.1">. </span><span class="koboSpan" id="kobo.405.2">If the environment has functional issues, you can immediately tell and switch traffic back before </span><a id="_idIndexMarker1466"/><span class="koboSpan" id="kobo.406.1">impacting your users significantly. </span><span class="koboSpan" id="kobo.406.2">Continue to gradually shift traffic, testing the ability of the green environment </span><a id="_idIndexMarker1467"/><span class="koboSpan" id="kobo.407.1">to handle the load. </span><span class="koboSpan" id="kobo.407.2">Monitor the green environment to detect issues, providing an opportunity to change traffic back, thus limiting the blast radius. </span><span class="koboSpan" id="kobo.407.3">Finally, decommission the blue environment and release the resources when all the metrics are correct.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.408.1">Blue-green deployment helps to achieve zero downtime and provides easy rollback. </span><span class="koboSpan" id="kobo.408.2">You can customize the time to deploy as per your needs. </span><span class="koboSpan" id="kobo.408.3">However, these zero downtimes do come with a cost consideration as this approach requires maintaining two identical production environments, one active (blue) and one idle (green). </span><span class="koboSpan" id="kobo.408.4">The need to duplicate the environment means higher operational costs due to the additional resources required. </span><span class="koboSpan" id="kobo.408.5">However, this cost is often justified by the value it adds in terms of risk mitigation and uninterrupted user experience.</span></p>
<h2 class="heading-2" id="_idParaDest-333"><span class="koboSpan" id="kobo.409.1">Red-black deployment</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.410.1">Before standing up a new version of a system in red-black deployment, perform canary testing. </span><span class="koboSpan" id="kobo.410.2">The canary replaces around 1% of its existing production system with the latest version of </span><a id="_idIndexMarker1468"/><span class="koboSpan" id="kobo.411.1">the application and monitors the newest version for errors. </span><span class="koboSpan" id="kobo.411.2">The system is deemed ready for deployment if the canary clears this initial test. </span><span class="koboSpan" id="kobo.411.3">A new </span><a id="_idIndexMarker1469"/><span class="koboSpan" id="kobo.412.1">system version stands up alongside the old version in preparation for the switchover. </span><span class="koboSpan" id="kobo.412.2">The initial capacity of the new system is set manually by examining how many instances are currently running in production and setting this number as the desired capacity for the new auto-scaling group. </span><span class="koboSpan" id="kobo.412.3">Once the new system is up and running, both systems are red. </span><span class="koboSpan" id="kobo.412.4">The current version is the only version accepting traffic.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.413.1">The system is then cut over from the existing version to the new version using the DNS service. </span><span class="koboSpan" id="kobo.413.2">At this point, the old version is regarded as black; it is still running but is not receiving any traffic. </span><span class="koboSpan" id="kobo.413.3">If any issues are detected with the new version, reverting becomes as simple as pointing the DNS server back to the old version’s load balancer.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.414.1">Red-black deployment </span><a id="_idIndexMarker1470"/><span class="koboSpan" id="kobo.415.1">is also known as </span><strong class="keyWord"><span class="koboSpan" id="kobo.416.1">dark launch</span></strong><span class="koboSpan" id="kobo.417.1"> and is slightly different from blue-green deployment. </span><span class="koboSpan" id="kobo.417.2">In red-black deployment, you do a sudden DNS cutover from the old version to the new version, while in blue-green deployment, the DNS gradually increases traffic to the new version. </span><span class="koboSpan" id="kobo.417.3">Blue-green deployments and dark launches can be combined to deploy both versions of software side by side. </span><span class="koboSpan" id="kobo.417.4">Two separate code paths are used, but only one is activated. </span><span class="koboSpan" id="kobo.417.5">A feature flag activates the other code path. </span><span class="koboSpan" id="kobo.417.6">This deployment can be used as a beta test where you can explicitly enable the new features.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.418.1">Red-black deployment, similar to blue-green deployment, involves running two identical environments to ensure zero downtime and facilitate easy rollbacks. </span><span class="koboSpan" id="kobo.418.2">The cost implications are primarily associated with the need to double resources during the deployment phase. </span><span class="koboSpan" id="kobo.418.3">You’ll have a “red” environment (the current live version) and a “black” environment (the new version). </span><span class="koboSpan" id="kobo.418.4">Both environments must be fully operational, which effectively doubles the resource requirements—including compute, storage, and network resources—during the transition period. </span><span class="koboSpan" id="kobo.418.5">While this approach significantly reduces deployment risks and provides a seamless user experience, the duplicated environment leads to increased costs. </span><span class="koboSpan" id="kobo.418.6">However, since the additional resources are only needed for the duration of the deployment window, this cost is temporary and can be considered an investment in stability and reliability.</span></p>
<h2 class="heading-2" id="_idParaDest-334"><span class="koboSpan" id="kobo.419.1">Immutable deployment</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.420.1">An immutable or disposable upgrade is more straightforward if your application has unknown dependencies. </span><span class="koboSpan" id="kobo.420.2">An older application infrastructure that has been patched and re-patched </span><a id="_idIndexMarker1471"/><span class="koboSpan" id="kobo.421.1">over time becomes increasingly difficult to upgrade. </span><span class="koboSpan" id="kobo.421.2">This type of upgrade technique is more common in an immutable infrastructure.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.422.1">During the </span><a id="_idIndexMarker1472"/><span class="koboSpan" id="kobo.423.1">new release, a new server instance set is rolled out by terminating older instances. </span><span class="koboSpan" id="kobo.423.2">For disposable upgrades, you can set up a cloned environment with deployment services such as Chef, Puppet, Ansible, and Terraform or use them combined with an auto-scaling configuration to manage the updates.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.424.1">In addition to downtime, you must consider the cost while designing your deployment strategy. </span><span class="koboSpan" id="kobo.424.2">Consider the number of instances you need to replace and your deployment frequency to determine the cost. </span><span class="koboSpan" id="kobo.424.3">Use the approach that best fits, taking your budget and downtime into consideration.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.425.1">In this section, you learned about various CD strategies that help make your application release more efficient and hassle-free. </span><span class="koboSpan" id="kobo.425.2">Let’s see the best practices for choosing the right deployment type.</span></p>
<h1 class="heading-1" id="_idParaDest-335"><span class="koboSpan" id="kobo.426.1">Best practices for choosing the right deployment strategy</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.427.1">Choosing the </span><a id="_idIndexMarker1473"/><span class="koboSpan" id="kobo.428.1">right deployment strategy is crucial for successful application updates and a seamless user experience. </span><span class="koboSpan" id="kobo.428.2">Here are the best practices for choosing among the various deployment strategies:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.429.1">In-place deployment</span></strong><span class="koboSpan" id="kobo.430.1">: In-place deployment is ideal for scenarios where simplicity is key and the application is relatively small or has a limited user base. </span><span class="koboSpan" id="kobo.430.2">For instance, updating a company’s internal tool with a small team fits this approach well. </span><span class="koboSpan" id="kobo.430.3">It involves updating the application on the current server, but it’s important to note that it can cause downtime. </span><span class="koboSpan" id="kobo.430.4">This strategy is not the best fit for large-scale or high-availability applications. </span><span class="koboSpan" id="kobo.430.5">A notable example would be updating a small-scale web service overnight with low user traffic. </span><span class="koboSpan" id="kobo.430.6">It’s crucial to have a rollback strategy in case the update fails to restore the previous version and minimize disruption quickly.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.431.1">Rolling deployment</span></strong><span class="koboSpan" id="kobo.432.1">: Rolling deployment is suitable for applications that need minimal downtime but don’t require additional resources. </span><span class="koboSpan" id="kobo.432.2">This approach updates the application gradually across the existing fleet of servers. </span><span class="koboSpan" id="kobo.432.3">An example would be deploying an update to an e-commerce website’s servers in stages, ensuring that only a portion of users experience any potential </span><a id="_idIndexMarker1474"/><span class="koboSpan" id="kobo.433.1">issues at a time. </span><span class="koboSpan" id="kobo.433.2">However, this method is unsuitable for applications that cannot simultaneously handle different versions. </span><span class="koboSpan" id="kobo.433.3">Continuous monitoring of application performance during the deployment is key to addressing issues as they arise.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.434.1">Blue-green deployment</span></strong><span class="koboSpan" id="kobo.435.1">: Blue-green deployment is best for critical applications where zero downtime is essential. </span><span class="koboSpan" id="kobo.435.2">A financial services company might use this strategy to update its customer-facing application. </span><span class="koboSpan" id="kobo.435.3">Once the green environment is thoroughly tested and ready, traffic is switched from blue to green. </span><span class="koboSpan" id="kobo.435.4">This method requires double the resources but offers a seamless user experience and quick rollback capability. </span><span class="koboSpan" id="kobo.435.5">It’s crucial to ensure that load balancing and DNS switching mechanisms are robust and reliable.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.436.1">Red-black deployment</span></strong><span class="koboSpan" id="kobo.437.1">: Red-black deployment is similar to blue-green but focuses on a faster cutover to the new version. </span><span class="koboSpan" id="kobo.437.2">It is particularly effective for quickly releasing new versions and is often used in containerized environments. </span><span class="koboSpan" id="kobo.437.3">For example, a media streaming service might deploy a new version of its platform using this strategy, ensuring immediate availability of new features to all users. </span><span class="koboSpan" id="kobo.437.4">While it offers rapid release and immediate switching, thorough testing of the new version is crucial as rollback involves reverting to the old environment.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.438.1">Immutable deployment</span></strong><span class="koboSpan" id="kobo.439.1">: Immutable deployment ensures consistency and reliability, especially in cloud environments. </span><span class="koboSpan" id="kobo.439.2">Each deployment involves setting up new servers, guaranteeing a predictable and stable state. </span><span class="koboSpan" id="kobo.439.3">This approach could benefit an application with complex dependencies, as it avoids the “configuration drift” seen in long-lived environments. </span><span class="koboSpan" id="kobo.439.4">This strategy requires efficient management of infrastructure resources, as it involves provisioning new servers and decommissioning old ones with each release.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.440.1">In each of these strategies, it’s important to assess factors like the application’s complexity, scale, user base, and the impact of potential downtime. </span></p>
<p class="normal"><span class="koboSpan" id="kobo.441.1">Additionally, resource availability, infrastructure costs, and the application’s criticality should guide the deployment strategy choice. </span><span class="koboSpan" id="kobo.441.2">Regularly updating and refining the deployment approach in line with technological and organizational changes is also key to maintaining an effective deployment process.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.442.1">You need to </span><a id="_idIndexMarker1475"/><span class="koboSpan" id="kobo.443.1">perform application testing at every step for high-quality delivery, which often requires significant effort. </span><span class="koboSpan" id="kobo.443.2">A DevOps pipeline can help you automate the testing process and increase the quality and frequency of feature releases. </span><span class="koboSpan" id="kobo.443.3">Let’s learn more about continuous testing in the CI/CD pipeline.</span></p>
<h1 class="heading-1" id="_idParaDest-336"><span class="koboSpan" id="kobo.444.1">Implementing continuous testing in the CI/CD pipeline</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.445.1">DevOps is </span><a id="_idIndexMarker1476"/><span class="koboSpan" id="kobo.446.1">key for continually changing business scenarios based on customer feedback, demand for new features, or shifts in </span><a id="_idIndexMarker1477"/><span class="koboSpan" id="kobo.447.1">market trends. </span><span class="koboSpan" id="kobo.447.2">A robust CI/CD pipeline ensures further features/feedback are incorporated in less time, and customers can use the new features faster.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.448.1">With frequent code check-ins, having a good testing strategy baked into your CI/CD pipeline ensures you close that feedback loop with quality. </span><span class="koboSpan" id="kobo.448.2">Continuous testing is essential in balancing the CI/CD pipeline. </span><span class="koboSpan" id="kobo.448.3">While adding software features rapidly is good, ensuring that the features adhere to good quality standards is achieved by continuous testing.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.449.1">Unit tests form the most significant amount of your testing strategy. </span><span class="koboSpan" id="kobo.449.2">They typically run on the developer’s machine and are the fastest and cheapest. </span><span class="koboSpan" id="kobo.449.3">A general rule of thumb is to incorporate 70% of your testing efforts in unit testing. </span><span class="koboSpan" id="kobo.449.4">Bugs caught at this stage can quickly be fixed with fewer complexities.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.450.1">The developer often performs unit tests, and once the code is ready, it is deployed for integration and system testing. </span><span class="koboSpan" id="kobo.450.2">These tests require their own environments and sometimes separate testing teams, which makes the testing process costlier. </span><span class="koboSpan" id="kobo.450.3">Once the team ensures that all intended features work as expected, the operations team needs to run performance </span><a id="_idIndexMarker1478"/><span class="koboSpan" id="kobo.451.1">and compliance tests. </span><span class="koboSpan" id="kobo.451.2">These tests need production-like environments and are costly. </span><span class="koboSpan" id="kobo.451.3">Also, </span><strong class="keyWord"><span class="koboSpan" id="kobo.452.1">user acceptance testing</span></strong><span class="koboSpan" id="kobo.453.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.454.1">UAT</span></strong><span class="koboSpan" id="kobo.455.1">) needs a replica of production-like environments, causing more expense.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.456.1">As illustrated in the following diagram, developers perform unit tests to test code changes/new features in the development phase. </span><span class="koboSpan" id="kobo.456.2">Testing is usually done on a developer’s machine after coding is complete. </span><span class="koboSpan" id="kobo.456.3">It is also recommended to run static code analysis </span><a id="_idIndexMarker1479"/><span class="koboSpan" id="kobo.457.1">on the code changes and do </span><a id="_idIndexMarker1480"/><span class="koboSpan" id="kobo.458.1">code coverage, adherence to coding guidelines, and so on. </span><span class="koboSpan" id="kobo.458.2">Smaller unit tests with no dependencies run faster. </span><span class="koboSpan" id="kobo.458.3">Therefore, the developer can find out quickly if the test has failed:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.459.1"><img alt="A picture containing text, screenshot, font, line  Description automatically generated" src="../Images/B21336_11_09.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.460.1">Figure 11.9: Continuous testing in CI/CD</span></p>
<p class="normal"><span class="koboSpan" id="kobo.461.1">The </span><strong class="keyWord"><span class="koboSpan" id="kobo.462.1">build phase</span></strong><span class="koboSpan" id="kobo.463.1"> is the </span><a id="_idIndexMarker1481"/><span class="koboSpan" id="kobo.464.1">first test for integration between different components and individual components. </span><span class="koboSpan" id="kobo.464.2">The build phase is also an excellent time to test if the code committed by a developer breaks any existing features and to perform regression testing.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.465.1">A </span><strong class="keyWord"><span class="koboSpan" id="kobo.466.1">staging environment</span></strong><span class="koboSpan" id="kobo.467.1"> is a mirror </span><a id="_idIndexMarker1482"/><span class="koboSpan" id="kobo.468.1">of the production environment. </span><span class="koboSpan" id="kobo.468.2">An end-to-end system test is performed at this stage (the UI, backend logic, and API are tested extensively). </span><span class="koboSpan" id="kobo.468.3">Performance testing tests the application performance under a particular workload. </span><span class="koboSpan" id="kobo.468.4">Performance tests include load tests and stress tests. </span><span class="koboSpan" id="kobo.468.5">UAT is also performed at this stage in readiness for production deployment. </span><span class="koboSpan" id="kobo.468.6">Compliance testing is done to test for industry-specific regulatory compliance.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.469.1">For example, let’s assume you are integrating continuous testing into the CI/CD pipeline for a video personalization feature in an online streaming platform. </span><span class="koboSpan" id="kobo.469.2">When your development team commits their code changes, the CI tool, such as Jenkins, automatically initiates the build process and conducts a series of automated tests. </span><span class="koboSpan" id="kobo.469.3">These include unit tests to validate individual components of the personalization feature, integration tests to ensure compatibility with existing system components, and UI tests to confirm user interaction flows smoothly. </span><span class="koboSpan" id="kobo.469.4">Performance tests are particularly critical in this scenario to verify that the new feature does not degrade the streaming experience. </span><span class="koboSpan" id="kobo.469.5">If any issues arise during these tests, the pipeline is halted, allowing developers to make necessary corrections, thus ensuring that only thoroughly vetted code progresses to the next stages. </span><span class="koboSpan" id="kobo.469.6">After </span><a id="_idIndexMarker1483"/><span class="koboSpan" id="kobo.470.1">passing automated </span><a id="_idIndexMarker1484"/><span class="koboSpan" id="kobo.471.1">testing, the feature advances to a staging environment, mimicking production, for further testing and validation. </span><span class="koboSpan" id="kobo.471.2">This additional layer of scrutiny ensures the feature performs well under various scenarios and user behaviors through user acceptance testing before deployment.</span></p>
<h2 class="heading-2" id="_idParaDest-337"><span class="koboSpan" id="kobo.472.1">A/B testing</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.473.1">Often, in software development, which feature’s implementation will be most successful in the real </span><a id="_idIndexMarker1485"/><span class="koboSpan" id="kobo.474.1">world needs to be clarified. </span><span class="koboSpan" id="kobo.474.2">An entire computer science discipline—</span><strong class="keyWord"><span class="koboSpan" id="kobo.475.1">human/computer interaction</span></strong><span class="koboSpan" id="kobo.476.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.477.1">HCI</span></strong><span class="koboSpan" id="kobo.478.1">)—is devoted to answering this </span><a id="_idIndexMarker1486"/><span class="koboSpan" id="kobo.479.1">question. </span><span class="koboSpan" id="kobo.479.2">While UI experts have several guidelines to help design suitable interfaces, the best choice of design often can only be determined by giving it to users and seeing whether they can use the design to complete a given task.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.480.1">A strategy such as A/B testing or canary analysis tests the new application version in the production phase. </span><span class="koboSpan" id="kobo.480.2">In A/B testing, the new application version is deployed to a small percentage of production servers and tested for user feedback. </span><span class="koboSpan" id="kobo.480.3">Gradually, depending on how well the users receive the new application, the deployment is increased to span all production servers.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.481.1">As shown in the following diagram, A/B testing is a methodology in which two or more versions of features are given to different sets of users. </span><span class="koboSpan" id="kobo.481.2">Detailed metrics on the usage of each implementation are gathered, and UI engineers examine this data to determine which implementation should be adopted going forward:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.482.1"><img alt="" role="presentation" src="../Images/B21336_11_10.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.483.1">Figure 11.10: Split users by feature experiment using A/B testing</span></p>
<p class="normal"><span class="koboSpan" id="kobo.484.1">The preceding </span><a id="_idIndexMarker1487"/><span class="koboSpan" id="kobo.485.1">diagram represents an A/B testing scenario where different versions of a web application are being tested simultaneously to evaluate their performance, user engagement, or other defined metrics. </span><span class="koboSpan" id="kobo.485.2">Here’s how the A/B testing process is depicted in this architecture:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><strong class="keyWord"><span class="koboSpan" id="kobo.486.1">Traffic distribution</span></strong><span class="koboSpan" id="kobo.487.1">: The application load balancer plays a crucial role by directing incoming user traffic to different versions of the web application. </span><span class="koboSpan" id="kobo.487.2">In this scenario, the majority of the traffic (90%) is routed to the stable production version (V1.1), while the new versions under test, V1.2 and V1.3, receive a smaller fraction of the traffic, 7% and 3% respectively.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.488.1">Web server fleet</span></strong><span class="koboSpan" id="kobo.489.1">: Each version of the application runs on a separate set of web servers or instances, ensuring that changes in one version do not affect the others. </span><span class="koboSpan" id="kobo.489.2">This isolation is essential for obtaining accurate test results. </span><span class="koboSpan" id="kobo.489.3">The version receiving the most traffic serves as the control group, while the other versions with changes or new features are the test groups.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.490.1">Database</span></strong><span class="koboSpan" id="kobo.491.1">: All versions of the application interact with the same backend database. </span><span class="koboSpan" id="kobo.491.2">This is common in A/B tests where the underlying data remains consistent across different user experiences. </span><span class="koboSpan" id="kobo.491.3">However, care must be taken to ensure database schemas and interactions are compatible across all versions to prevent errors or inconsistencies in data handling.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.492.1">You need to make sure that throughout the A/B test, performance metrics are continuously </span><a id="_idIndexMarker1488"/><span class="koboSpan" id="kobo.493.1">monitored to assess how each version of the application performs in real-world conditions. </span><span class="koboSpan" id="kobo.493.2">This includes evaluating response times, error rates, and resource utilization, among other factors. </span><span class="koboSpan" id="kobo.493.3">After a significant amount of data has been collected, the results are analyzed to determine which version of the application performs best based on the testing criteria. </span><span class="koboSpan" id="kobo.493.4">Decisions can then be made on whether to fully roll out a new version, make further modifications, or roll back changes based on the insights gained from the A/B test.</span></p>
<h1 class="heading-1" id="_idParaDest-338"><span class="koboSpan" id="kobo.494.1">Using DevOps tools for CI/CD</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.495.1">To build a CI/CD pipeline, a developer requires various tools. </span><span class="koboSpan" id="kobo.495.2">These include a code editor, a source </span><a id="_idIndexMarker1489"/><span class="koboSpan" id="kobo.496.1">repository, a build server, a deployment tool, and orchestrating an overall CI pipeline. </span><span class="koboSpan" id="kobo.496.2">Let’s explore some popular technology choices of developer tools for DevOps, both in the cloud and on-premises.</span></p>
<h2 class="heading-2" id="_idParaDest-339"><span class="koboSpan" id="kobo.497.1">Code editor</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.498.1">DevOps is a hands-on coding role where you often need to write a script to automate the environment. </span><span class="koboSpan" id="kobo.498.2">You </span><a id="_idIndexMarker1490"/><span class="koboSpan" id="kobo.499.1">can use the </span><strong class="keyWord"><span class="koboSpan" id="kobo.500.1">Ace editor</span></strong><span class="koboSpan" id="kobo.501.1"> or the </span><strong class="keyWord"><span class="koboSpan" id="kobo.502.1">cloud-based AWS Cloud9 integrated development environment</span></strong><span class="koboSpan" id="kobo.503.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.504.1">IDE</span></strong><span class="koboSpan" id="kobo.505.1">). </span><span class="koboSpan" id="kobo.505.2">Ace provides </span><a id="_idIndexMarker1491"/><span class="koboSpan" id="kobo.506.1">syntax highlighting and other features that are valuable for developers. </span><span class="koboSpan" id="kobo.506.2">Cloud9 </span><a id="_idIndexMarker1492"/><span class="koboSpan" id="kobo.507.1">is integrated with the AWS platform, making it easy for developers to create serverless applications, and work with AWS services. </span><span class="koboSpan" id="kobo.507.2">It also supports collaborative coding and is equipped with essential tools for popular programming languages.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.508.1">You can use a web-based code editor on your local computer or install a code editor on your local server that connects to the application environments—such as dev, test, and prod—to interact. </span><span class="koboSpan" id="kobo.508.2">In an environment, you store your project’s files and run the tools to develop your apps. </span><span class="koboSpan" id="kobo.508.3">You can save these files locally on the instance or server or clone a remote code repository into your environment. </span><span class="koboSpan" id="kobo.508.4">The AWS Cloud9 IDE is a cloud-native IDE provided as a managed service.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.509.1">The Ace editor lets you write code quickly and easily. </span><span class="koboSpan" id="kobo.509.2">It’s a web-based code editor but provides </span><a id="_idIndexMarker1493"/><span class="koboSpan" id="kobo.510.1">performance similar to popular desktop-based code editors such as Eclipse, Vim, </span><strong class="keyWord"><span class="koboSpan" id="kobo.511.1">Visual Studio Code</span></strong><span class="koboSpan" id="kobo.512.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.513.1">VS Code</span></strong><span class="koboSpan" id="kobo.514.1">), and so on. </span><span class="koboSpan" id="kobo.514.2">It has standard IDE features such as live syntax and matching parentheses highlighting, auto-indentation </span><a id="_idIndexMarker1494"/><span class="koboSpan" id="kobo.515.1">and completion, toggling between tabs, integration with version control tools, and multiple cursor selections. </span><span class="koboSpan" id="kobo.515.2">It works with large files, having hundreds of thousands of lines without typing lag. </span><span class="koboSpan" id="kobo.515.3">It has built-in support for all popular coding languages and debugging tools, and you can also install your tools. </span><span class="koboSpan" id="kobo.515.4">For a desktop-based IDE, VS Code and Eclipse are other popular code editor options that DevOps engineers can choose.</span></p>
<h2 class="heading-2" id="_idParaDest-340"><span class="koboSpan" id="kobo.516.1">Source code management</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.517.1">There are multiple choices available for your source code repository. </span><span class="koboSpan" id="kobo.517.2">You can set up, run, and manage </span><a id="_idIndexMarker1495"/><span class="koboSpan" id="kobo.518.1">your Git server, where you will be responsible for everything.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.519.1">You can </span><a id="_idIndexMarker1496"/><span class="koboSpan" id="kobo.520.1">choose to use a hosting service such as GitHub or Bitbucket. </span><span class="koboSpan" id="kobo.520.2">If you are looking for a cloud solution, </span><strong class="keyWord"><span class="koboSpan" id="kobo.521.1">AWS CodeCommit</span></strong><span class="koboSpan" id="kobo.522.1"> offers a </span><a id="_idIndexMarker1497"/><span class="koboSpan" id="kobo.523.1">secure, highly scalable, and managed source control system to host private Git repositories.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.524.1">You need to set up authentication and authorization for your code repository to provide access to authorized team members for code to read or write. </span><span class="koboSpan" id="kobo.524.2">You can apply data encryption in transit and at rest. </span><span class="koboSpan" id="kobo.524.3">When you push into the code repository (</span><code class="inlineCode"><span class="koboSpan" id="kobo.525.1">git push</span></code><span class="koboSpan" id="kobo.526.1">), it encrypts and stores the data. </span><span class="koboSpan" id="kobo.526.2">When you pull from the code repository (</span><code class="inlineCode"><span class="koboSpan" id="kobo.527.1">git pull</span></code><span class="koboSpan" id="kobo.528.1">), it decrypts the data and then sends it back to the caller. </span><span class="koboSpan" id="kobo.528.2">The user must be authenticated with the proper access level to the code repository. </span><span class="koboSpan" id="kobo.528.3">Data can be encrypted in transit by transmitting through encrypted network connections using HTTPS or SSH protocols.</span></p>
<h2 class="heading-2" id="_idParaDest-341"><span class="koboSpan" id="kobo.529.1">CI server</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.530.1">A CI server is also </span><a id="_idIndexMarker1498"/><span class="koboSpan" id="kobo.531.1">known as a </span><strong class="keyWord"><span class="koboSpan" id="kobo.532.1">build server</span></strong><span class="koboSpan" id="kobo.533.1">. </span><span class="koboSpan" id="kobo.533.2">With teams working on multiple </span><a id="_idIndexMarker1499"/><span class="koboSpan" id="kobo.534.1">branches, merging back into the main branch is complicated. </span><span class="koboSpan" id="kobo.534.2">CI, in this scenario, plays a key role. </span><span class="koboSpan" id="kobo.534.3">CI server hooks provide a way to trigger the build based on the event when code is committed to the repository. </span><span class="koboSpan" id="kobo.534.4">Hooks, incorporated in almost every version control system, refer to custom scripts triggered by specified necessary actions in a repository. </span><span class="koboSpan" id="kobo.534.5">Hooks can run either on the client side or the server side.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.535.1">Pull requests are common for developers to notify and review each other’s work before it is merged into common code branches. </span><span class="koboSpan" id="kobo.535.2">A CI server provides a web interface to review changes before adding them to the final project. </span><span class="koboSpan" id="kobo.535.3">If there are any problems with the proposed changes, the source code can be sent back to the developer to tweak as per the organization’s coding requirements.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.536.1">As shown in </span><a id="_idIndexMarker1500"/><span class="koboSpan" id="kobo.537.1">the following diagram, server-side hooks in </span><a id="_idIndexMarker1501"/><span class="koboSpan" id="kobo.538.1">combination with the CI server are used to increase the velocity of integration:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.539.1"><img alt="A picture containing text, font, screenshot  Description automatically generated" src="../Images/B21336_11_11.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.540.1">Figure 11.11: Automation of CI</span></p>
<p class="normal"><span class="koboSpan" id="kobo.541.1">As illustrated in the preceding diagram, using </span><code class="inlineCode"><span class="koboSpan" id="kobo.542.1">post-receive</span></code><span class="koboSpan" id="kobo.543.1">, you can direct new branches to trigger tests on a CI server to verify that the new build integrates correctly and that all units function correctly. </span><span class="koboSpan" id="kobo.543.2">The developer is notified of test failures and then knows to merge their branch with the mainline only after fixing the problems. </span><span class="koboSpan" id="kobo.543.3">The developer can build from their branch, test the changes there, and get feedback on how well their changes work before deciding whether to merge their branch into the mainline.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.544.1">Running integration and unit tests significantly reduces resistance when merging that branch into the mainline. </span><span class="koboSpan" id="kobo.544.2">Hooks can also be customized to test merges into the mainline and block any merges that don’t pass. </span><span class="koboSpan" id="kobo.544.3">Integration is best accomplished with a CI server.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.545.1">Jenkins is the most popular choice for building the CI server. </span><span class="koboSpan" id="kobo.545.2">As illustrated in the following diagram, you </span><a id="_idIndexMarker1502"/><span class="koboSpan" id="kobo.546.1">can host the Jenkins cluster in the AWS </span><strong class="keyWord"><span class="koboSpan" id="kobo.547.1">Elastic Compute Cloud</span></strong><span class="koboSpan" id="kobo.548.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.549.1">EC2</span></strong><span class="koboSpan" id="kobo.550.1">) server’s fleet and auto-scale as per build load:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.551.1"><img alt="A picture containing diagram, text, screenshot, line  Description automatically generated" src="../Images/B21336_11_12.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.552.1">Figure 11.12: Auto-scaling of Jenkins CI servers</span></p>
<p class="normal"><span class="koboSpan" id="kobo.553.1">The</span><strong class="keyWord"><span class="koboSpan" id="kobo.554.1"> Jenkins Controller </span></strong><span class="koboSpan" id="kobo.555.1">offload builds to the agent node instance in the case of overload. </span><span class="koboSpan" id="kobo.555.2">When the </span><a id="_idIndexMarker1503"/><span class="koboSpan" id="kobo.556.1">load goes down, the </span><strong class="keyWord"><span class="koboSpan" id="kobo.557.1">Jenkins Controller</span></strong><span class="koboSpan" id="kobo.558.1"> automatically terminates agent instances.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.559.1">However, you have </span><a id="_idIndexMarker1504"/><span class="koboSpan" id="kobo.560.1">to maintain security and patch the server </span><a id="_idIndexMarker1505"/><span class="koboSpan" id="kobo.561.1">by yourself. </span><span class="koboSpan" id="kobo.561.2">For native cloud options and managed services, you can use managed code-build services such as AWS CodeBuild, eliminating the need for server administration and significantly reducing costs with a </span><strong class="keyWord"><span class="koboSpan" id="kobo.562.1">pay-as-you-go</span></strong><span class="koboSpan" id="kobo.563.1"> model—the service scales as per your demand. </span><span class="koboSpan" id="kobo.563.2">Your team is empowered to focus on pushing code and lets a service build all the artifacts.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.564.1">While a CI server helps you build the correct version of code from a source code repository by collaborating across team members of the development team, code deployment helps the team get code ready for testing and release for end-user consumption. </span><span class="koboSpan" id="kobo.564.2">Let’s learn about code deployment in more detail.</span></p>
<h2 class="heading-2" id="_idParaDest-342"><span class="koboSpan" id="kobo.565.1">Code deployment</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.566.1">Once your build is ready, you can deploy the Jenkins server or choose AWS CodeDeploy as a cloud-native </span><a id="_idIndexMarker1506"/><span class="koboSpan" id="kobo.567.1">managed service. </span><span class="koboSpan" id="kobo.567.2">You can use other </span><a id="_idIndexMarker1507"/><span class="koboSpan" id="kobo.568.1">popular tools, such as Chef or Puppet, to create a deployment script. </span><span class="koboSpan" id="kobo.568.2">The options for specifying a deployment configuration are as follows:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.569.1">OneAtATime</span></strong><span class="koboSpan" id="kobo.570.1">: Only a single instance in a deployment group at a time installs a new </span><a id="_idIndexMarker1508"/><span class="koboSpan" id="kobo.571.1">deployment. </span><span class="koboSpan" id="kobo.571.2">Suppose a deployment on a given instance fails. </span><span class="koboSpan" id="kobo.571.3">In that case, the deployment script will halt the deployment and return an error response detailing the number of successful versus the number of failed installations.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.572.1">HalfAtATime</span></strong><span class="koboSpan" id="kobo.573.1">: Half of the instances in the deployment group install a new deployment. </span><span class="koboSpan" id="kobo.573.2">The </span><a id="_idIndexMarker1509"/><span class="koboSpan" id="kobo.574.1">deployment succeeds if half of the instances successfully install the revision. </span><span class="koboSpan" id="kobo.574.2">HalfAtATime is a good option for production/test environments where half of the instances are updated to a new revision, and the other half remain available in production at an older revision.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.575.1">AllAtOnce</span></strong><span class="koboSpan" id="kobo.576.1">: Each instance installs the latest revision available whenever it next polls </span><a id="_idIndexMarker1510"/><span class="koboSpan" id="kobo.577.1">the deployment service. </span><span class="koboSpan" id="kobo.577.2">This option is best used for development and test deployments as it has the potential to install a non-functioning deployment on every instance in a deployment group.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.578.1">Custom</span></strong><span class="koboSpan" id="kobo.579.1">: You can </span><a id="_idIndexMarker1511"/><span class="koboSpan" id="kobo.580.1">use this command to create a custom deployment configuration specifying a fixed number of healthy hosts that must exist in a deployment group at any given time. </span><span class="koboSpan" id="kobo.580.2">This option is a more flexible implementation of the OneAtATime option. </span><span class="koboSpan" id="kobo.580.3">It allows for the possibility that a deployment may fail on one or two instances that have become corrupt or are improperly configured.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.581.1">The following diagram illustrates life cycle events during deployment:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.582.1"><img alt="" role="presentation" src="../Images/B21336_11_13.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.583.1">Figure 11.13: Deployment life cycle events</span></p>
<p class="normal"><span class="koboSpan" id="kobo.584.1">The deployment agent runs through a series of steps to execute a deployment. </span><span class="koboSpan" id="kobo.584.2">These steps are called </span><a id="_idIndexMarker1512"/><span class="koboSpan" id="kobo.585.1">life cycle events. </span><span class="koboSpan" id="kobo.585.2">In the preceding diagram, the steps shown in lighter boxes can be controlled by human intervention; however, the </span><a id="_idIndexMarker1513"/><span class="koboSpan" id="kobo.586.1">steps shown in darker boxes are automated and controlled by a deployment agent. </span><span class="koboSpan" id="kobo.586.2">Let’s go into some detail for each of these steps:</span></p>
<ol class="numberedList" style="list-style-type: decimal;">
<li class="numberedList" value="1"><strong class="keyWord"><span class="koboSpan" id="kobo.587.1">ApplicationStop</span></strong><span class="koboSpan" id="kobo.588.1">: To trigger a deployment, the first requirement is to stop the application server so that traffic stops serving while files are copied. </span><span class="koboSpan" id="kobo.588.2">Examples of software application servers are Tomcat, JBoss, or WebSphere servers.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.589.1">DownloadBundle</span></strong><span class="koboSpan" id="kobo.590.1">: After stopping the application server, the deployment agent starts downloading a pre-built deployment bundle from an artifactory such as JFrog Artifactory. </span><span class="koboSpan" id="kobo.590.2">The artifactory stores the application binary, which can be deployed and tested for application before the new version launch.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.591.1">BeforeInstall</span></strong><span class="koboSpan" id="kobo.592.1">: The deployment agent triggers pre-install steps such as creating a backup of the current version and any required configuration update via a script.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.593.1">Install</span></strong><span class="koboSpan" id="kobo.594.1">: In this step, deployment agents start the installation—for example, running an Ant or Maven script to install a Java application.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.595.1">AfterInstall</span></strong><span class="koboSpan" id="kobo.596.1">: The deployment agent triggers this step after completing your application installation. </span><span class="koboSpan" id="kobo.596.2">It may include updating post-installation configuration, such as local memory settings and log parameters.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.597.1">ApplicationStart</span></strong><span class="koboSpan" id="kobo.598.1">: In this step, the agent starts the application and notifies the success or failure operations team.</span></li>
<li class="numberedList"><strong class="keyWord"><span class="koboSpan" id="kobo.599.1">ValidateService</span></strong><span class="koboSpan" id="kobo.600.1">: The validation step fires after everything else is done, allowing you to check the app quickly. </span><span class="koboSpan" id="kobo.600.2">It includes steps such as performing automated sanity tests and integration tests to verify if the new version of the application has been installed correctly. </span><span class="koboSpan" id="kobo.600.3">The agent also sends a notification to the team when testing is successful.</span></li>
</ol>
<p class="normal"><span class="koboSpan" id="kobo.601.1">You have learned </span><a id="_idIndexMarker1514"/><span class="koboSpan" id="kobo.602.1">about various code deployment </span><a id="_idIndexMarker1515"/><span class="koboSpan" id="kobo.603.1">strategies and steps as independent components. </span><span class="koboSpan" id="kobo.603.2">However, you must stitch all the DevOps steps together to set up an automated CI/CD pipeline. </span><span class="koboSpan" id="kobo.603.3">Let’s learn more about the code pipeline, which can help you build an end-to-end CI/CD pipeline.</span></p>
<h2 class="heading-2" id="_idParaDest-343"><span class="koboSpan" id="kobo.604.1">Code pipeline</span></h2>
<p class="normal"><span class="koboSpan" id="kobo.605.1">The code pipeline is about orchestrating everything together to achieve CD. </span><span class="koboSpan" id="kobo.605.2">The entire software </span><a id="_idIndexMarker1516"/><span class="koboSpan" id="kobo.606.1">release process is fully automated in CD, including building and deploying to the production release. </span><span class="koboSpan" id="kobo.606.2">Over some time, with experiments, you can set </span><a id="_idIndexMarker1517"/><span class="koboSpan" id="kobo.607.1">up a mature CI/CD pipeline. </span><span class="koboSpan" id="kobo.607.2">The path to the production launch is automated, thus enabling the rapid deployment of features and immediate customer feedback. </span><span class="koboSpan" id="kobo.607.3">You can use cloud-native managed services such as AWS CodePipeline to orchestrate the overall code pipeline or use the Jenkins server.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.608.1">The code pipeline enables you to add actions to stages in your CI/CD pipeline. </span><span class="koboSpan" id="kobo.608.2">Each action can be associated with a provider that executes the action. </span><span class="koboSpan" id="kobo.608.3">The code pipeline action categories </span><a id="_idIndexMarker1518"/><span class="koboSpan" id="kobo.609.1">and examples of providers are as follows:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.610.1">Source</span></strong><span class="koboSpan" id="kobo.611.1">: Your application code needs to be stored in a central repository with version </span><a id="_idIndexMarker1519"/><span class="koboSpan" id="kobo.612.1">control called </span><strong class="keyWord"><span class="koboSpan" id="kobo.613.1">source code repositories</span></strong><span class="koboSpan" id="kobo.614.1">. </span><span class="koboSpan" id="kobo.614.2">Some popular </span><a id="_idIndexMarker1520"/><span class="koboSpan" id="kobo.615.1">code repositories </span><a id="_idIndexMarker1521"/><span class="koboSpan" id="kobo.616.1">are AWS CodeCommit, Bitbucket, GitHub, </span><strong class="keyWord"><span class="koboSpan" id="kobo.617.1">Concurrent Versions System</span></strong><span class="koboSpan" id="kobo.618.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.619.1">CVS</span></strong><span class="koboSpan" id="kobo.620.1">), </span><strong class="keyWord"><span class="koboSpan" id="kobo.621.1">Subversion</span></strong><span class="koboSpan" id="kobo.622.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.623.1">SVN</span></strong><span class="koboSpan" id="kobo.624.1">), and so on.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.625.1">Build</span></strong><span class="koboSpan" id="kobo.626.1">: The build tool pulls code from the source code repository and creates an application binary package. </span><span class="koboSpan" id="kobo.626.2">Some of the popular build tools are AWS CodeBuild, Jenkins, Solano CI, and so on. </span><span class="koboSpan" id="kobo.626.3">Once the build is completed, you can store binaries in an artifactory such as JFrog.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.627.1">Deploy</span></strong><span class="koboSpan" id="kobo.628.1">: The deployment tool helps you to deploy application binaries on the server. </span><span class="koboSpan" id="kobo.628.2">Some popular deployment tools are AWS Elastic Beanstalk, AWS CodeDeploy, Chef, Puppet, Jenkins, and so on.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.629.1">Test</span></strong><span class="koboSpan" id="kobo.630.1">: Automated testing tools help you to complete and perform post-deployment validation. </span><span class="koboSpan" id="kobo.630.2">Some popular test-validating tools are Jenkins, BlazeMeter, Ghost Inspector, etc.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.631.1">Invoke</span></strong><span class="koboSpan" id="kobo.632.1">: You </span><a id="_idIndexMarker1522"/><span class="koboSpan" id="kobo.633.1">can use an events-based script to invoke activities such as backup and alert. </span><span class="koboSpan" id="kobo.633.2">Any scripting language, such as a shell script, PowerShell, and Python, can be used to invoke various customized activities.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.634.1">Approval</span></strong><span class="koboSpan" id="kobo.635.1">: Approval is an essential step in CD. </span><span class="koboSpan" id="kobo.635.2">You can either ask for manual approval by an automated email trigger, or approval can be automated from tools.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.636.1">In this section, you </span><a id="_idIndexMarker1523"/><span class="koboSpan" id="kobo.637.1">learned about various DevOps tools to manage the </span><strong class="keyWord"><span class="koboSpan" id="kobo.638.1">software development life cycle</span></strong><span class="koboSpan" id="kobo.639.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.640.1">SDLC</span></strong><span class="koboSpan" id="kobo.641.1">), such as a code editor, a repository, and build, test, and deployment tools. </span><span class="koboSpan" id="kobo.641.2">The other tools you need to integrate into DevOps pipelines are continuous logging, continuous monitoring, and operation handling, which you learned in </span><em class="chapterRef"><span class="koboSpan" id="kobo.642.1">Chapter 9</span></em><span class="koboSpan" id="kobo.643.1">, </span><em class="italic"><span class="koboSpan" id="kobo.644.1">Operational Excellence Considerations</span></em><span class="koboSpan" id="kobo.645.1">. </span><span class="koboSpan" id="kobo.645.2">As of now, you have learned about various DevOps techniques for each SDLC phase. </span><span class="koboSpan" id="kobo.645.3">Let’s learn more about best practices and anti-patterns.</span></p>
<h1 class="heading-1" id="_idParaDest-344"><span class="koboSpan" id="kobo.646.1">Implementing DevOps best practices</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.647.1">While building a CI/CD pipeline, consider your need to create a project and add team members </span><a id="_idIndexMarker1524"/><span class="koboSpan" id="kobo.648.1">to it. </span><span class="koboSpan" id="kobo.648.2">The project dashboard provides visibility to the code flow through the deployment pipeline, monitors the build, triggers alerts, and tracks application activities. </span><span class="koboSpan" id="kobo.648.3">The following diagram illustrates a well-defined DevOps pipeline:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.649.1"><img alt="A picture containing text, screenshot, diagram, line  Description automatically generated" src="../Images/B21336_11_14.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.650.1">Figure 11.14: CI/CD workflow best practice</span></p>
<p class="normal"><span class="koboSpan" id="kobo.651.1">Consider the </span><a id="_idIndexMarker1525"/><span class="koboSpan" id="kobo.652.1">following points while designing the pipeline:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.653.1">The number of stages</span></strong><span class="koboSpan" id="kobo.654.1">: Stages could be development, integration, system, user acceptance, and production. </span><span class="koboSpan" id="kobo.654.2">Some organizations also include dev, alpha, beta, and release stages.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.655.1">Types of tests in each stage</span></strong><span class="koboSpan" id="kobo.656.1">: Each stage can have multiple types of tests, such as unit tests, integration tests, system tests, UATs, smoke tests, load tests, and A/B tests at the production stage.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.657.1">The sequence of a test</span></strong><span class="koboSpan" id="kobo.658.1">: Test cases can be run in parallel or need to be in sequence.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.659.1">Monitoring and reporting</span></strong><span class="koboSpan" id="kobo.660.1">: Monitor system defects and failures and send notifications as failures occur.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.661.1">Infrastructure provisioning</span></strong><span class="koboSpan" id="kobo.662.1">: Methods to provision infrastructure for each stage.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.663.1">Rollback</span></strong><span class="koboSpan" id="kobo.664.1">: Define the rollback strategy to fall back to the previous version if required.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.665.1">Having a system that requires manual intervention where it’s avoidable slows down your process. </span><span class="koboSpan" id="kobo.665.2">So, automating your process using CD will accelerate it.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.666.1">Another common anti-pattern is keeping configuration values for a build inside the code or even having developers use different tools in their build processes, leading to inconsistent builds between developers. </span><span class="koboSpan" id="kobo.666.2">It takes lots of time and effort to troubleshoot why particular builds work in one environment rather than in others. </span><span class="koboSpan" id="kobo.666.3">To overcome this, it is better to store build configurations outside of code. </span><span class="koboSpan" id="kobo.666.4">Externalizing these configurations </span><a id="_idIndexMarker1526"/><span class="koboSpan" id="kobo.667.1">to tools that keep them consistent between builds enables better automation and allows your process to scale much more quickly. </span><span class="koboSpan" id="kobo.667.2">Not using a CD process can lead to last-minute, middle-of-the-night rushes to get a build to work. </span><span class="koboSpan" id="kobo.667.3">Design your CD process to </span><em class="italic"><span class="koboSpan" id="kobo.668.1">fail fast</span></em><span class="koboSpan" id="kobo.669.1"> to reduce the likelihood of any last-minute surprises.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.670.1">Externalizing environment-specific configurations is crucial for maintaining consistency and scalability across builds. </span><span class="koboSpan" id="kobo.670.2">Some tools and services that facilitate this abstraction include:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.671.1">AWS Systems Manager Parameter Store</span></strong><span class="koboSpan" id="kobo.672.1">: Provides secure, hierarchical storage for configuration data management and secrets management. </span><span class="koboSpan" id="kobo.672.2">You can store data such as passwords, database strings, and license codes as parameter values.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.673.1">ConfigMaps and Secrets in Kubernetes</span></strong><span class="koboSpan" id="kobo.674.1">: Kubernetes objects that allow you to separate configuration artifacts from image content to keep containerized applications portable.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.675.1">Docker Swarm secrets</span></strong><span class="koboSpan" id="kobo.676.1">: Used to manage sensitive data with Docker containers, offering a way to securely transmit and store secrets within the Swarm cluster.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.677.1">Consul by HashiCorp</span></strong><span class="koboSpan" id="kobo.678.1">: A service networking solution to automate network configurations with distributed key-value stores.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.679.1">By using these tools, you can manage your configurations and secrets outside of your application code and templates, making it easier to manage and rotate them securely without redeploying or changing the application.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.680.1">To effectively </span><a id="_idIndexMarker1527"/><span class="koboSpan" id="kobo.681.1">gauge the impact of CI/CD within your DevOps framework, monitoring </span><strong class="keyWord"><span class="koboSpan" id="kobo.682.1">key performance indicators</span></strong><span class="koboSpan" id="kobo.683.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.684.1">KPIs</span></strong><span class="koboSpan" id="kobo.685.1">) is essential. </span><span class="koboSpan" id="kobo.685.2">Key CI/CD KPIs include:</span></p>
<ul>
<li class="bulletList"><span class="koboSpan" id="kobo.686.1">Deployment frequency, which signals how often updates reach production, reflecting the agility of your release process</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.687.1">Lead time for changes, which shows the duration from code commitment to live deployment, with shorter spans indicating a more efficient development cycle</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.688.1">Change failure rate, which identifies the proportion of deployments causing failures, with a lower rate denoting better deployment stability</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.689.1">Mean time to recovery</span></strong><span class="koboSpan" id="kobo.690.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.691.1">MTTR</span></strong><span class="koboSpan" id="kobo.692.1">), which measures the average recovery duration </span><a id="_idIndexMarker1528"/><span class="koboSpan" id="kobo.693.1">from a failure, with quicker recoveries exemplifying a team’s effective incident management</span></li>
<li class="bulletList"><span class="koboSpan" id="kobo.694.1">Automated test pass rate, which highlights the reliability of your code through the success rate of automated tests in each CI/CD cycle</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.695.1">The twelve-factor </span><a id="_idIndexMarker1529"/><span class="koboSpan" id="kobo.696.1">methodology can be used to apply architecture best practices at each step of application development, as recommended </span><a id="_idIndexMarker1530"/><span class="koboSpan" id="kobo.697.1">by The Twelve-Factor App (</span><a href="https://12factor.net/"><span class="url"><span class="koboSpan" id="kobo.698.1">https://12factor.net/</span></span></a><span class="koboSpan" id="kobo.699.1">), which enterprises adopt for the end-to-end development and delivery of web applications. </span><span class="koboSpan" id="kobo.699.2">This applies to all coding platforms regardless of programming languages. </span><span class="koboSpan" id="kobo.699.3">Nowadays, most applications are built as web apps and utilize a cloud platform. </span><span class="koboSpan" id="kobo.699.4">Let’s learn how to build end-to-end DevOps and security automation in the cloud.</span></p>
<h1 class="heading-1" id="_idParaDest-345"><span class="koboSpan" id="kobo.700.1">Building DevOps and DevSecOps in the cloud</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.701.1">As you have learned in previous sections, building a CI/CD pipeline requires multiple tools, and adding security automation on top of that increases the complexity. </span><span class="koboSpan" id="kobo.701.2">Integrating </span><a id="_idIndexMarker1531"/><span class="koboSpan" id="kobo.702.1">a range of tools and consolidating the results of vulnerability assessments from the ground up can be a complex </span><a id="_idIndexMarker1532"/><span class="koboSpan" id="kobo.703.1">task. </span><span class="koboSpan" id="kobo.703.2">A public cloud provider like AWS offers the adaptability required to construct DevSecOps pipelines. </span><span class="koboSpan" id="kobo.703.3">This includes the straightforward integration of both cloud-native and third-party tools, as well as the capability to aggregate security findings effectively.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.704.1">DevSecOps pipeline architecture covers CI/CD practices, including SCA, SAST, and DAST tools:</span></p>
<ul>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.705.1">Software composition analysis</span></strong><span class="koboSpan" id="kobo.706.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.707.1">SCA</span></strong><span class="koboSpan" id="kobo.708.1">) tools analyze open-source components </span><a id="_idIndexMarker1533"/><span class="koboSpan" id="kobo.709.1">in your application to identify known vulnerabilities, licensing issues, and outdated libraries. </span><span class="koboSpan" id="kobo.709.2">They can automate the process of checking for updates and security patches, making it easier to manage your application’s dependencies.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.710.1">SAST</span></strong><span class="koboSpan" id="kobo.711.1"> tools are designed to analyze source code or compiled versions of code to </span><a id="_idIndexMarker1534"/><span class="koboSpan" id="kobo.712.1">detect security vulnerabilities. </span><span class="koboSpan" id="kobo.712.2">They can identify issues such as input validation errors, insecure dependencies, and potential backdoors without executing the code.</span></li>
<li class="bulletList"><strong class="keyWord"><span class="koboSpan" id="kobo.713.1">DAST</span></strong><span class="koboSpan" id="kobo.714.1"> tools </span><a id="_idIndexMarker1535"/><span class="koboSpan" id="kobo.715.1">assess running applications for vulnerabilities. </span><span class="koboSpan" id="kobo.715.2">Unlike SAST tools that analyze static code, DAST tools interact with the application from the outside, performing black-box testing to detect issues such as SQL injection, cross-site scripting, and authentication problems.</span></li>
</ul>
<p class="normal"><span class="koboSpan" id="kobo.716.1">Integrating these tools into a CI/CD pipeline allows for continuous and automated security testing, enabling teams to detect and resolve security issues promptly and improve the overall security posture of their applications. </span><span class="koboSpan" id="kobo.716.2">The following diagram visualizes the concepts of security automation in the pipeline:</span></p>
<figure class="mediaobject"><span class="koboSpan" id="kobo.717.1"><img alt="" role="presentation" src="../Images/B21336_11_15.png"/></span></figure>
<p class="packt_figref"><span class="koboSpan" id="kobo.718.1">Figure 11.15: DevSecOps CI/CD pipeline architecture in the AWS cloud</span></p>
<p class="normal"><span class="koboSpan" id="kobo.719.1">The preceding diagram shows that the CI/CD pipeline gets triggered when a developer commits the </span><a id="_idIndexMarker1536"/><span class="koboSpan" id="kobo.720.1">code in GitHub. </span><span class="koboSpan" id="kobo.720.2">An event </span><a id="_idIndexMarker1537"/><span class="koboSpan" id="kobo.721.1">gets generated to start the AWS CodePipeline using AWS CloudWatch. </span><span class="koboSpan" id="kobo.721.2">AWS CodePipeline orchestrates the CI/CD pipeline, including code commit, build, and deployment. </span><span class="koboSpan" id="kobo.721.3">AWS CodeBuild compiles the build and then uploads the resulting artifacts to AWS CodeArtifact. </span><span class="koboSpan" id="kobo.721.4">For initiating the scanning process, AWS CodeBuild fetches authentication details, including tokens for scanning tools, from the AWS Parameter Store.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.722.1">Once the deployment is successfully completed, CodeBuild initiates DAST. </span><span class="koboSpan" id="kobo.722.2">If this process uncovers any vulnerabilities, CodeBuild triggers a Lambda function. </span><span class="koboSpan" id="kobo.722.3">This function then proceeds to log the security findings in AWS Security Hub. </span><span class="koboSpan" id="kobo.722.4">Suppose DAST finds no security issues. </span><span class="koboSpan" id="kobo.722.5">In that case, the build can advance for approval, and the pipeline notifies the approver for action to push the build into the production AWS ECS environment. </span><span class="koboSpan" id="kobo.722.6">During the CI/CD pipeline run, AWS CloudWatch monitors all the changes and sends email notifications to DevOps and the dev team through SNS notifications.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.723.1">AWS CloudTrail tracks any critical changes, such as pipeline updates, deletions, and creation, and sends notifications to the DevOps team for audit purposes. </span><span class="koboSpan" id="kobo.723.2">Further, AWS Config tracks all the configuration changes.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.724.1">In DevSecOps, securing </span><a id="_idIndexMarker1538"/><span class="koboSpan" id="kobo.725.1">the CI/CD pipeline is achieved through AWS </span><strong class="keyWord"><span class="koboSpan" id="kobo.726.1">Identity and Access Management</span></strong><span class="koboSpan" id="kobo.727.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.728.1">IAM</span></strong><span class="koboSpan" id="kobo.729.1">) roles, which restricts </span><a id="_idIndexMarker1539"/><span class="koboSpan" id="kobo.730.1">access strictly to the necessary resources. </span><span class="koboSpan" id="kobo.730.2">Encryption and </span><strong class="keyWord"><span class="koboSpan" id="kobo.731.1">Secure Sockets Layer</span></strong><span class="koboSpan" id="kobo.732.1"> (</span><strong class="keyWord"><span class="koboSpan" id="kobo.733.1">SSL</span></strong><span class="koboSpan" id="kobo.734.1">) are employed to protect pipeline data both at rest and in transit. </span><span class="koboSpan" id="kobo.734.2">Sensitive details like API tokens and passwords are securely stored in the AWS Parameter Store.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.735.1">Centralizing </span><a id="_idIndexMarker1540"/><span class="koboSpan" id="kobo.736.1">security findings </span><a id="_idIndexMarker1541"/><span class="koboSpan" id="kobo.737.1">in AWS Security Hub facilitates the automation of remediation processes. </span><span class="koboSpan" id="kobo.737.2">Depending on the nature of the security issue, a Lambda function can be triggered to perform the required remedial actions. </span><span class="koboSpan" id="kobo.737.3">For instance, if an SSH port is inadvertently exposed, the system can automatically restrict server access from the internet. </span><span class="koboSpan" id="kobo.737.4">This automation relieves the burden on DevOps and security teams, allowing them to address vulnerabilities from a single tool, rather than managing multiple dashboards.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.738.1">Addressing security threats early in the application development life cycle can significantly reduce the cost of making changes to the application. </span><span class="koboSpan" id="kobo.738.2">Automating this process can further expedite the delivery of these changes, making a DevSecOps pipeline an essential component for successful application development.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.739.1">DevOps integrates culture, practices, and tools to merge application development with operations, enabling rapid delivery of new application features. </span><span class="koboSpan" id="kobo.739.2">DevSecOps extends this by weaving security into the DevOps process, ensuring that secure and compliant application changes are delivered swiftly and operations are consistently automated. </span><span class="koboSpan" id="kobo.739.3">This integration is key to maintaining a secure, efficient, and resilient application development environment.</span></p>
<h1 class="heading-1" id="_idParaDest-346"><span class="koboSpan" id="kobo.740.1">Summary</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.741.1">In this chapter, you have learned about the key components of a strong DevOps practice along with its benefits, CI/CD, and continuous monitoring and improvement. </span><span class="koboSpan" id="kobo.741.2">The agility of CI/CD can be achieved only by applying automation everywhere. </span><span class="koboSpan" id="kobo.741.3">To automate, you learned about IaC and configuration management. </span><span class="koboSpan" id="kobo.741.4">You also looked at various automation tools such as Chef, Puppet, and Ansible to automate configuration management.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.742.1">As security is the priority, you learned about DevSecOps, which is DevOps in security. </span><span class="koboSpan" id="kobo.742.2">CD is one of the critical aspects of DevOps. </span><span class="koboSpan" id="kobo.742.3">You learned about various deployment strategies: rolling, blue-green, and red-black. </span><span class="koboSpan" id="kobo.742.4">Testing is another aspect of ensuring the quality of your product. </span><span class="koboSpan" id="kobo.742.5">You learned about the concept of continuous testing in DevOps and how A/B testing can help improve the product by taking direct feedback from a customer in the live environment.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.743.1">You have learned about the stages in a CI/CD pipeline. </span><span class="koboSpan" id="kobo.743.2">You have learned about the tools and services you can use and the best practices you can follow for a robust CI/CD pipeline. </span><span class="koboSpan" id="kobo.743.3">You have learned how individual services work and discussed how to integrate services to build a sophisticated solution.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.744.1">Until this point, you have learned about various aspects of solution architecture. </span><span class="koboSpan" id="kobo.744.2">As every organization has lots of data, they put great effort into getting insight into their data. </span><span class="koboSpan" id="kobo.744.3">In the next chapter, you will learn about collecting, processing, and consuming data to get a more in-depth insight.</span></p>
<h1 class="heading-1" id="_idParaDest-347"><span class="koboSpan" id="kobo.745.1">Leave a review!</span></h1>
<p class="normal"><span class="koboSpan" id="kobo.746.1">Enjoying this book? </span><span class="koboSpan" id="kobo.746.2">Help readers like you by leaving an Amazon review. </span><span class="koboSpan" id="kobo.746.3">Scan the QR code below to get a free eBook of your choice.</span></p>
<p class="normal"><span class="koboSpan" id="kobo.747.1"><img alt="" role="presentation" src="../Images/Image.png"/></span></p>
</div>
</body></html>