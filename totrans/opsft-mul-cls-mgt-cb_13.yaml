- en: '13'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '13'
- en: OpenShift Plus – a Multi-Cluster Enterprise Ready Solution
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OpenShift Plus – 一个多集群企业级解决方案
- en: In this book, we discussed in [*Chapter 1*](B18015_01.xhtml#_idTextAnchor016),
    *Hybrid Cloud Journey and Strategies*, the main challenges related to public cloud
    usage, such as keeping cloud costs under control and having consistent, secure,
    and compliant platforms, no matter which cloud provider is being used. We also
    introduced some of the tools that are helpful to work with multi-clusters and
    help to address those challenges, from a technology perspective.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们在[*第1章*](B18015_01.xhtml#_idTextAnchor016)，*混合云之旅与策略*，讨论了与公共云使用相关的主要挑战，例如如何控制云成本，以及无论使用哪个云服务提供商，都能够保持一致、安全和合规的平台。我们还介绍了一些有助于多集群工作的工具，并从技术角度帮助解决这些挑战。
- en: In [*Chapter 9*](B18015_09.xhtml#_idTextAnchor176), *OpenShift Pipelines – Tekton*,
    and [*Chapter 10*](B18015_10.xhtml#_idTextAnchor204), *OpenShift GitOps – ArgoCD*,
    we covered **CI/CD pipelines** and **GitOps** using OpenShift, including deployment
    into multiple clusters.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第9章*](B18015_09.xhtml#_idTextAnchor176)，*OpenShift Pipelines – Tekton*，和[*第10章*](B18015_10.xhtml#_idTextAnchor204)，*OpenShift
    GitOps – ArgoCD*，我们讨论了使用 OpenShift 的**CI/CD 管道**和**GitOps**，包括部署到多个集群中。
- en: In [*Chapter 11*](B18015_11.xhtml#_idTextAnchor229), *OpenShift Multi-Cluster
    GitOps and Management*, we saw how to use **Red Hat Advanced Cluster Management**
    to manage and observe several clusters from a single pane, deploy workloads into
    many clusters at once, and also use policies to ensure all your clusters are compliant.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第11章*](B18015_11.xhtml#_idTextAnchor229)，*OpenShift 多集群 GitOps 与管理*，我们看到了如何使用**Red
    Hat 高级集群管理**从单一视图管理和观察多个集群，同时将工作负载部署到多个集群，并使用策略确保所有集群符合合规要求。
- en: Finally, in the previous chapter – [*Chapter 12*](B18015_12.xhtml#_idTextAnchor251),
    *OpenShift Multi-Cluster Security* – we introduced the **Red Hat Advanced Cluster
    Security** tool, which helps to enhance the security of all your clusters, by
    implementing security policies, managing the known vulnerabilities, assessing
    the security risks and compliance, and managing the network traffic.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在上一章—[*第12章*](B18015_12.xhtml#_idTextAnchor251)，*OpenShift 多集群安全*—我们介绍了**Red
    Hat 高级集群安全**工具，它通过实施安全策略、管理已知漏洞、评估安全风险和合规性，以及管理网络流量，帮助增强所有集群的安全性。
- en: 'Now, we have two different focuses in this chapter, the first is to introduce
    the last important piece for the hybrid cloud strategy: **Red Hat Quay**, which
    will store all container images in a central image registry and makes your CI/CD
    process a bit easier and more robust; and the second is to discuss the **Red Hat
    OpenShift Plus** offering, which bundles all these pieces together to provide
    you a comprehensive and competitive solution.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们在这一章中有两个不同的重点，第一是介绍混合云策略中的最后一个重要部分：**Red Hat Quay**，它将所有容器镜像存储在一个中央镜像注册表中，并使您的
    CI/CD 过程更简单、更稳健；第二是讨论**Red Hat OpenShift Plus**产品，它将所有这些部分捆绑在一起，为您提供一个全面且具竞争力的解决方案。
- en: 'Therefore, you will find the following in this chapter:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，您将在本章中找到以下内容：
- en: Introducing Red Hat Quay
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍 Red Hat Quay
- en: Deploying Red Hat using the Quay Operator
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Quay Operator 部署 Red Hat
- en: Using Red Hat Quay
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Red Hat Quay
- en: What is OpenShift Plus?
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是 OpenShift Plus？
- en: 'OpenShift Plus: A practical use-case'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'OpenShift Plus: 一个实际用例'
- en: Let’s start now then!
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 那我们现在开始吧！
- en: Introducing Red Hat Quay
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍 Red Hat Quay
- en: 'Red Hat Quay is an enterprise container registry platform that runs on Red
    Hat Enterprise Linux or OpenShift, on-premise or in the cloud. Red Hat Quay provides
    great features for an image registry, such as the following:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Red Hat Quay 是一个企业级容器注册表平台，可以在 Red Hat Enterprise Linux 或 OpenShift 上运行，无论是本地还是云端。Red
    Hat Quay 提供了许多出色的镜像注册表功能，如下所示：
- en: '**Image vulnerability scan**: Scan the images to find known vulnerabilities
    just after they are pushed to the registry using the Clair project. See more information
    about Clair in the *Further reading* section of this chapter.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**镜像漏洞扫描**：使用 Clair 项目在镜像推送到注册表后，扫描镜像以查找已知漏洞。有关 Clair 的更多信息，请参见本章的*进一步阅读*部分。'
- en: '**Geo-replication**: Sync the image registry contents between two or more Quay
    instances, allowing multiple and geographically distributed Quay deployments to
    look like a single registry. This is especially helpful for environments spread
    over far distances and with high latency. Quay handles asynchronous data synchronization
    between the different instances to make images available transparently for the
    end user.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地理复制**：在两个或多个 Quay 实例之间同步镜像注册表内容，允许多个地理分布的 Quay 部署看起来像一个单一的注册表。这对于分布在遥远地区且延迟较高的环境特别有帮助。Quay
    处理不同实例之间的异步数据同步，使得镜像对最终用户透明可用。'
- en: '**Repository mirroring**: This synchronizes one or more repositories between
    two Quay instances.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仓库镜像**：同步两个或多个仓库到两个 Quay 实例之间。'
- en: '**Access control**: Granular permission control allows you to define who can
    read, write, and administer groups and repositories. You can also leverage robot
    accounts to allow automated access to organizations and repositories using the
    Quay API.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问控制**：精细的权限控制允许您定义谁能读取、写入和管理组和仓库。您还可以利用机器人账户通过 Quay API 允许组织和仓库的自动化访问。'
- en: '**Red Hat Quay** is available as a managed offering on the [quay.io](http://quay.io)
    portal or self-managed, where you deploy and maintain it.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**Red Hat Quay**可在[quay.io](http://quay.io)门户上作为托管服务使用，或者您可以选择自行管理，在这种情况下，您需要部署和维护它。'
- en: Deploying Red Hat Quay using the Quay Operator
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Quay Operator 部署 Red Hat Quay
- en: There are different ways to deploy Quay, as you can see in the product’s official
    documentation link that you’ll find in the *Further reading* section of this chapter.
    For didactical reasons, we decided to deploy it using the Quay Operator with fully-managed
    components – a comfortable way to start using Quay.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 有多种部署 Quay 的方式，您可以在本章*进一步阅读*部分中找到产品的官方文档链接。出于教学目的，我们决定使用完全托管组件的 Quay Operator
    来部署。
- en: Some prerequisites are necessary to install Quay as an enterprise container
    registry.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Quay 作为企业容器注册表需要满足一些先决条件。
- en: Prerequisites
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 先决条件
- en: 'The prerequisites to install Quay using the Operator are as follows:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Operator 安装 Quay 的先决条件如下：
- en: An OpenShift cluster with a privileged account to deploy and set up Quay.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个具有特权账户的 OpenShift 集群，用于部署和设置 Quay。
- en: 'Object storage: The supported object storage is Red Hat OpenShift Data Foundation,
    AWS S3, Google Cloud Storage, Azure Storage, Ceph/RadosGW Storage/Hitachi HCP
    storage, Swift storage, and NooBaa.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对象存储：支持的对象存储包括 Red Hat OpenShift Data Foundation、AWS S3、Google Cloud Storage、Azure
    Storage、Ceph/RadosGW Storage/Hitachi HCP Storage、Swift Storage 和 NooBaa。
- en: 'Cluster capacity to host the following services:'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群容量可托管以下服务：
- en: PostgreSQL or MySQL database. PostgreSQL is preferred due to enhanced features
    for Clair security scanning.
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: PostgreSQL 或 MySQL 数据库。由于 Clair 安全扫描的增强功能，推荐使用 PostgreSQL。
- en: A proxy server.
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理服务器。
- en: A key-value database. Redis is the default option to store non-critical Red
    Hat Quay configuration.
  id: totrans-31
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 键值数据库。Redis 是存储非关键 Red Hat Quay 配置的默认选项。
- en: Quay, the application service itself.
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Quay，应用程序服务本身。
- en: With all prerequisites met, we can install the Quay Operator. See next how to
    install it.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 所有先决条件准备就绪后，我们可以安装 Quay Operator。请查看如何安装它的下一步骤。
- en: Operator installation
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作员安装
- en: 'The process to deploy the Quay Operator is simple. Follow the instructions
    in the next steps:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 部署 Quay Operator 的过程很简单。请按照下一步的说明操作：
- en: Navigate to `Red Hat Quay`.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到`Red Hat Quay`。
- en: '![Figure 13.1 – Seach for the Red Hat Quay Operator ](img/B18015_13_01.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.1 – 搜索 Red Hat Quay Operator](img/B18015_13_01.jpg)'
- en: Figure 13.1 – Seach for the Red Hat Quay Operator
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.1 – 搜索 Red Hat Quay Operator
- en: Click on the tile and then on the **Install** button.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击磁贴，然后点击**安装**按钮。
- en: '![Figure 13.2 – Install Red Hat Quay ](img/B18015_13_02.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.2 – 安装 Red Hat Quay](img/B18015_13_02.jpg)'
- en: Figure 13.2 – Install Red Hat Quay
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.2 – 安装 Red Hat Quay
- en: Leave the default options and click on the **Install** button.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保留默认选项，然后点击**安装**按钮。
- en: '![Figure 13.3 – Operator installation ](img/B18015_13_03.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.3 – 操作员安装](img/B18015_13_03.jpg)'
- en: Figure 13.3 – Operator installation
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.3 – 操作员安装
- en: When the Operator is installed, access the **Quay Registry** tab and click on
    **Create instance**.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装操作员后，访问**Quay 注册表**选项卡，然后点击**创建实例**。
- en: '![Figure 13.4 – Creating a Quay Registry instance ](img/B18015_13_04.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.4 – 创建 Quay 注册表实例](img/B18015_13_04.jpg)'
- en: Figure 13.4 – Creating a Quay Registry instance
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.4 – 创建 Quay 注册表实例
- en: Optionally, change the name in the proper field and leave all default options.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可选地，在适当的字段更改名称并保留所有默认选项。
- en: '![Figure 13.5 – Quay instance creation ](img/B18015_13_05.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.5 – Quay 实例创建 ](img/B18015_13_05.jpg)'
- en: Figure 13.5 – Quay instance creation
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.5 – Quay 实例创建
- en: Check the **Quay Registry** tab. You will see the **Status** column similar
    to the following screenshot.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查 **Quay 注册表** 选项卡。你将看到类似下面截图的 **状态** 列。
- en: '![Figure 13.6 – Quay instance created ](img/B18015_13_06.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.6 – Quay 实例已创建 ](img/B18015_13_06.jpg)'
- en: Figure 13.6 – Quay instance created
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.6 – Quay 实例已创建
- en: As soon as it finishes, click on the registry that has been just created and
    inspect the **Registry Endpoint** URL.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦完成，点击刚创建的注册表并检查 **注册表终端点** URL。
- en: '![Figure 13.7 – Quay endpoint ](img/B18015_13_07.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.7 – Quay 终端点 ](img/B18015_13_07.jpg)'
- en: Figure 13.7 – Quay endpoint
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.7 – Quay 终端点
- en: Click on the registry endpoint address. The Quay Registry application will be
    shown to configure your multi-cluster registry.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 点击注册表终端点地址。Quay 注册表应用程序将显示以配置你的多集群注册表。
- en: Configuring Quay
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置 Quay
- en: 'Once the installation process finishes, you will have access to some important
    endpoints that are used to configure the integration between the Quay Operator,
    the Quay Registry instance, and OpenShift. To use them, you need to follow the
    next steps:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程完成后，你将能够访问一些重要的终端点，这些终端点用于配置 Quay 操作员、Quay 注册表实例与 OpenShift 之间的集成。要使用它们，你需要按照以下步骤进行操作：
- en: In the namespace in which you installed Quay (in our case, the `openshift-operators`
    namespace), navigate to `<objectInstanceName>-quay-config-editor-credentials-<randomPodId>`.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装 Quay 的命名空间中（在我们的例子中是 `openshift-operators` 命名空间），导航到 `<objectInstanceName>-quay-config-editor-credentials-<randomPodId>`。
- en: '![Figure 13.8 – Check Quay config credentials ](img/B18015_13_08.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.8 – 检查 Quay 配置凭证 ](img/B18015_13_08.jpg)'
- en: Figure 13.8 – Check Quay config credentials
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.8 – 检查 Quay 配置凭证
- en: Click on it and choose **Reveal Values**.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击它并选择 **显示值**。
- en: '![Figure 13.9 – Quay credential values ](img/B18015_13_09.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.9 – Quay 凭证值 ](img/B18015_13_09.jpg)'
- en: Figure 13.9 – Quay credential values
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.9 – Quay 凭证值
- en: Take note of the credentials and navigate back to **Config Editor Endpoint**
    in the Quay Registry Operator instance.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 记下凭证并返回到 Quay 注册表操作员实例中的 **配置编辑终端点**。
- en: '![Figure 13.10 – Quay config endpoint ](img/B18015_13_10.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.10 – Quay 配置终端点 ](img/B18015_13_10.jpg)'
- en: Figure 13.10 – Quay config endpoint
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.10 – Quay 配置终端点
- en: Click the link to access **Config Editor Tool**. Use the credentials you got
    in the previous step.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击链接访问 **配置编辑工具**。使用你在上一步获得的凭证。
- en: '![Figure 13.11 – Quay UI config tool ](img/B18015_13_11.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.11 – Quay UI 配置工具 ](img/B18015_13_11.jpg)'
- en: Figure 13.11 – Quay UI config tool
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.11 – Quay UI 配置工具
- en: On this page, you can change many Quay configurations, such as SSL certificates,
    and so on – in our example, we changed the **Time Machine** expiration time. Click
    on **Validate Configuration Changes** after you make your changes.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此页面上，你可以更改许多 Quay 配置，例如 SSL 证书等——在我们的例子中，我们更改了 **时间机器** 过期时间。完成更改后，点击 **验证配置更改**。
- en: '![Figure 13.12 – Quay settings config tool ](img/B18015_13_12.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.12 – Quay 设置配置工具 ](img/B18015_13_12.jpg)'
- en: Figure 13.12 – Quay settings config tool
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.12 – Quay 设置配置工具
- en: After the configurations are validated, choose **Reconfigure Quay**.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置验证完成后，选择 **重新配置 Quay**。
- en: '![Figure 13.13 – Quay config tool validation ](img/B18015_13_13.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.13 – Quay 配置工具验证 ](img/B18015_13_13.jpg)'
- en: Figure 13.13 – Quay config tool validation
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.13 – Quay 配置工具验证
- en: Important Note
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 重要说明
- en: This step will restart the operator pods and Quay may become unavailable for
    a short period.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 此步骤将重启操作员 Pod，Quay 可能会在短时间内不可用。
- en: The Quay Config Editor tool will automatically update the `quay-config-bundle`
    secret, used to store the configuration parameters. To see it navigate to `quay-config-bundle`
    secret and click on **Reveal values**. The changes made previously must be reflected
    inside this secret.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Quay 配置编辑工具将自动更新 `quay-config-bundle` 密钥，用于存储配置参数。要查看它，导航到 `quay-config-bundle`
    密钥并点击 **显示值**。之前所做的更改应已反映在该密钥中。
- en: '![Figure 13.14 – Quay secret after config tool changes ](img/B18015_13_14.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.14 – 配置工具更改后的 Quay 密钥 ](img/B18015_13_14.jpg)'
- en: Figure 13.14 – Quay secret after config tool changes
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.14 – 配置工具更改后的 Quay 密钥
- en: If everything appears correct, you will be able to start using your Quay instance.
    Proceed with the next section to see instructions on how to use Quay.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切看起来正常，你将能够开始使用你的 Quay 实例。请继续下一部分查看如何使用 Quay 的说明。
- en: Using Red Hat Quay
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Red Hat Quay
- en: 'Red Hat Quay usage is very simple. A user-friendly interface will help you
    to configure additional global and security settings. We recommend you create
    an *organization* to organize your Quay registry by departments, regions, or any
    other division you want:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: Red Hat Quay的使用非常简单。一个用户友好的界面将帮助你配置额外的全局和安全设置。我们建议你创建一个*组织*，以按部门、区域或任何其他你想要的方式来组织你的Quay注册表：
- en: In this example, we created an organization named **multiclusterbook**.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个例子中，我们创建了一个名为**multiclusterbook**的组织。
- en: '![Figure 13.15 – Quay organization ](img/B18015_13_15.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.15 – Quay 组织](img/B18015_13_15.jpg)'
- en: Figure 13.15 – Quay organization
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.15 – Quay 组织
- en: Next, we created a private repository to upload our images.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们创建了一个私有仓库来上传我们的镜像。
- en: '![Figure 13.16 – Quay repository ](img/B18015_13_16.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.16 – Quay 仓库](img/B18015_13_16.jpg)'
- en: Figure 13.16 – Quay repository
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.16 – Quay 仓库
- en: A very helpful way to learn how to use Red Hat Quay is using the tutorial. You’ll
    see how to do that.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 学习如何使用Red Hat Quay的一个非常有用的方法是通过教程。你将看到如何操作。
- en: Running the tutorial
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 运行教程
- en: 'Running the tutorial mentioned in the Quay UI is not required but it can be
    a good starting point to understanding Red Hat Quay as an enterprise container
    registry. The first step of this tutorial is to log in via the terminal to the
    Quay registry endpoint. We are using `docker login` instead of `podman login`,
    `docker run` instead of `podman run`, and so on):'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在Quay UI中提到的运行教程不是必需的，但它可以作为理解Red Hat Quay作为企业容器注册表的一个良好起点。本教程的第一步是通过终端登录到Quay注册表端点。我们使用`docker
    login`而不是`podman login`，使用`docker run`而不是`podman run`，等等：
- en: '[PRE0]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: You should have a successful login, otherwise, check the credentials used. After,
    try to run a **BusyBox** container image.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该已经成功登录，否则请检查所使用的凭据。然后，尝试运行一个**BusyBox**容器镜像。
- en: '![Figure 13.17 – Quay tutorial ](img/B18015_13_17.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.17 – Quay 教程](img/B18015_13_17.jpg)'
- en: Figure 13.17 – Quay tutorial
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.17 – Quay 教程
- en: 'Now, run the following commands to create a sample container image for this
    repository:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，运行以下命令为该仓库创建一个示例容器镜像：
- en: '[PRE1]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Simple, right?! Now your instance of Quay Container Registry is configured,
    tested, and ready to use. Start exploring it in your CI/CD pipelines, pushing
    images to it, and using it as the enterprise container registry for your DevOps
    and DevSecOps pipelines.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 很简单吧？！现在你的Quay容器注册表实例已配置好、测试通过并准备使用。开始在你的CI/CD流水线中探索它，向其中推送镜像，并将其作为你DevOps和DevSecOps流水线的企业容器注册表。
- en: Now that we’ve already covered Quay, let’s discuss a bit more about OpenShift
    Plus. Next, you’ll continue to discover why you should care about and consider
    OpenShift Plus in your hybrid or multi-cloud strategy.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们已经讨论了Quay，让我们再深入了解一下OpenShift Plus。接下来，你将继续发现为什么在你的混合云或多云战略中，应该关注并考虑OpenShift
    Plus。
- en: What is OpenShift Plus?
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是OpenShift Plus？
- en: 'OpenShift Plus is an offering from Red Hat that bundles the OpenShift platform
    with the products you can see in the following diagram:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: OpenShift Plus是Red Hat的一项服务，将OpenShift平台与以下图中所示的产品捆绑在一起：
- en: '![Figure 13.18 – OpenShift Plus products offering ](img/B18015_13_18.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.18 – OpenShift Plus 产品服务](img/B18015_13_18.jpg)'
- en: Figure 13.18 – OpenShift Plus products offering
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.18 – OpenShift Plus 产品服务
- en: 'These products are included with this offering(besides OpenShift itself):'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 以下产品包含在此服务中（除了OpenShift本身）：
- en: '**Advanced Cluster Management**: Provides features to manage several OpenShift
    and Kubernetes clusters. The features include cluster management, observability,
    policy and compliance, and workload deployment. We dove into this product in [*Chapter
    11*](B18015_11.xhtml#_idTextAnchor229), *OpenShift Multi-Cluster GitOps and Management*.
    If you haven’t seen that chapter yet, we highly encourage you to go back and walk
    through it now.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高级集群管理**：提供管理多个OpenShift和Kubernetes集群的功能。这些功能包括集群管理、可观测性、策略和合规性以及工作负载部署。我们在[*第11章*](B18015_11.xhtml#_idTextAnchor229)中深入探讨了这个产品，*OpenShift多集群GitOps与管理*。如果你还没有看过这一章，我们强烈建议你回去阅读并逐步学习。'
- en: '**Advanced Cluster Security**: Enhance the security of your Kubernetes and
    OpenShift clusters with features such as Vulnerability Management, Network management,
    and others. This product was covered in [*Chapter 12*](B18015_12.xhtml#_idTextAnchor251),
    *OpenShift Multi-Cluster Security*. We also encourage you to check this chapter
    now if you haven’t done so yet.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高级集群安全**：通过漏洞管理、网络管理等功能增强你的Kubernetes和OpenShift集群的安全性。本产品在[*第12章*](B18015_12.xhtml#_idTextAnchor251)中有详细介绍，*OpenShift多集群安全*。如果你还没有阅读这一章，我们也建议你现在去看看。'
- en: '**Quay Enterprise Registry**: The global enterprise registry was covered at
    the beginning of this chapter.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Quay 企业版注册中心**：全球企业版注册中心在本章开头已经介绍过。'
- en: '`RWX` persistent volumes) using `RWO` persistent volumes) using **Ceph RBD**,
    and object storage provided by a solution named **Noobaa**. This product is not
    covered in this book. If you want to see more information about it, check the
    links we left in the *Further reading* section of this chapter.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RWX` 持久卷) 使用 `RWO` 持久卷) 使用 **Ceph RBD** 和由名为 **Noobaa** 的解决方案提供的对象存储。该产品在本书中未作详细介绍。如果您想了解更多信息，请查看我们在本章的
    *进一步阅读* 部分中留下的链接。'
- en: If you have followed this book from the beginning, this is not new information
    for you. We will focus now on giving additional information that can help you
    to understand the value proposition behind OpenShift Plus and why you should consider
    OpenShift Plus, instead of *just* the OpenShift platform.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您从本书一开始就跟随阅读，这些信息对您来说并不新鲜。我们现在将重点提供更多的额外信息，帮助您理解 OpenShift Plus 背后的价值主张，并解释为什么您应该考虑
    OpenShift Plus，而不仅仅是*仅仅*考虑 OpenShift 平台。
- en: 'Value proposition: benefits'
  id: totrans-113
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 价值主张：优势
- en: 'OpenShift Plus adds some great benefits to your multi-cluster strategy:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: OpenShift Plus 为您的多集群战略增加了一些极好的优势：
- en: '**Consistency**: ACM provides the governance feature, which helps you to have
    consistent configurations among all your clusters. In terms of security, ACS also
    implements security policies you can define that will also help to keep all clusters
    compliant with them.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一致性**：ACM 提供了治理功能，帮助您在所有集群中保持一致的配置。在安全性方面，ACS 还实现了可以定义的安全策略，这些策略将有助于确保所有集群都遵循这些策略。'
- en: '**Portability**: Quay provides a global image registry that all clusters pull
    images from. ACM also can help you to deploy applications against many clusters
    at once and to inspect and monitor their status. By using it together with OpenShift
    GitOps, you can leverage **ArgoCD** to implement **GitOps** deployment practices
    and maintain the desired state of your applications, no matter in which OpenShift
    cluster and cloud provider you are running them. Of course, the portability between
    clusters also depends on the application, as the more decoupled the application
    is, the easier it will be to port between different OpenShift clusters and providers.
    The important thing to understand is that ACM and Quay help to make your applications
    portable much easier. OpenShift Data Foundation also helps to make stateful workloads
    easier to port, by providing a standard way for applications to have access to
    Persistent Volumes, regardless of the infrastructure or cloud providers the clusters
    are running on.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可移植性**：Quay 提供了一个全球镜像注册中心，所有集群都从中拉取镜像。ACM 还可以帮助您同时在多个集群上部署应用，并检查和监控它们的状态。通过与
    OpenShift GitOps 一起使用，您可以利用**ArgoCD**实现**GitOps**部署实践，并保持应用程序的期望状态，无论您在哪个 OpenShift
    集群和云提供商上运行它们。当然，集群之间的可移植性也取决于应用程序，因为应用程序解耦越多，迁移到不同的 OpenShift 集群和提供商之间就越容易。需要理解的重要一点是，ACM
    和 Quay 有助于使您的应用程序更容易实现可移植性。OpenShift 数据基础也有助于使有状态工作负载更容易迁移，通过提供一种标准的方式，让应用程序能够访问持久卷，无论集群运行在哪种基础设施或云提供商上。'
- en: '**Management**: Managing several clusters in different environments is not
    an easy task in general. Companies usually have many people focused only on doing
    that. You can turn this activity into a bit of an easier task and perhaps decrease
    the costs associated with it by using ACM. Features such as cluster management,
    observability, and governance (policies) are helpful to manage several clusters
    from a single pane.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理**：管理多个不同环境中的集群通常不是一项简单的任务。公司通常会有很多人专门从事这一工作。通过使用 ACM，您可以将这项任务变得稍微轻松一些，并且可能会降低与此相关的成本。集群管理、可观察性和治理（策略）等功能有助于通过一个面板管理多个集群。'
- en: '**Security**: As we discussed in [*Chapter 12*](B18015_12.xhtml#_idTextAnchor251),
    *OpenShift Multi-Cluster Security*, making a few clusters secure and compliant
    in general is not a hard task, however, when we scale to several clusters it becomes
    more challenging. ACS adds the capability to easily enforce security policies,
    detect vulnerabilities, and plan actions to remediate them.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全性**：正如我们在[*第12章*](B18015_12.xhtml#_idTextAnchor251)中讨论的，*OpenShift 多集群安全性*，使少数几个集群在一般情况下安全且符合规范并不是一项困难任务，然而，当我们扩展到多个集群时，问题变得更加复杂。ACS
    增加了轻松强制执行安全策略、检测漏洞并规划修复措施的能力。'
- en: 'Besides OpenShift Plus, Red Hat also provides some additional value-added products
    available in the Red Hat Hybrid Cloud portal ([cloud.redhat.com](http://cloud.redhat.com))
    for any OpenShift customer:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 除了 OpenShift Plus，红帽还为任何 OpenShift 客户提供一些额外增值产品，可在红帽混合云门户（[cloud.redhat.com](http://cloud.redhat.com)）上找到：
- en: '**OpenShift Cluster Management**: This allows you to view high-level cluster
    information, create new clusters using the Assisted Installer, configure Red Hat
    subscriptions, basic level monitoring, and more.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OpenShift 集群管理**：这允许您查看高级别的集群信息，使用辅助安装程序创建新的集群，配置红帽订阅，基本级别的监控等。'
- en: '**Cost Management**: Cost management is an interesting tool to track costs
    and usage of AWS, Google Cloud, Azure cloud providers, and OpenShift clusters
    as well. It helps you to have a consolidated view of the costs associated with
    multiple cloud accounts and also across your hybrid cloud infrastructure, to inspect
    cost trends, and to even use it as a basis for charging departments or teams by
    their usage. See the link for more information about this tool in the *Further
    reading* section of this chapter.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**成本管理**：成本管理是一个有趣的工具，用于跟踪 AWS、Google Cloud、Azure 云提供商和 OpenShift 集群的成本和使用情况。它帮助您综合查看与多个云帐户相关的成本，并查看混合云基础架构的成本趋势，甚至可以用作按部门或团队使用量计费的依据。有关此工具的更多信息，请参阅本章的
    *Further reading* 部分链接。'
- en: In the next screenshot, you see an example of what the **Cost Management Overview**
    screen looks like.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个屏幕截图中，您可以看到 **成本管理概述** 屏幕的示例。
- en: '![Figure 13.19 – Cost Management feature ](img/B18015_13_19.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.19 – 成本管理功能](img/B18015_13_19.jpg)'
- en: Figure 13.19 – Cost Management feature
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.19 – 成本管理功能
- en: '**Developer Sandbox**: This is a free OpenShift environment in a shared, multi-tenant
    OpenShift cluster pre-configured with a set of developer tools. Use it as a sandbox
    for your tests and as an environment to learn how to develop for OpenShift. You
    will find the link for it in the *Further reading* section of this chapter.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开发者沙盒**：这是一个免费的 OpenShift 环境，位于共享的多租户 OpenShift 集群中，预先配置了一组开发工具。用它作为您的测试沙盒和学习如何为
    OpenShift 开发的环境。您将在本章的 *Further reading* 部分找到其链接。'
- en: Besides the items listed in the preceding list, OpenShift Plus may make sense
    from the subscription cost as well. Any package is usually priced better than
    buying individual pieces separately. That being said, if you are interested in
    any software that is part of the *Plus* stack mentioned in this chapter, it might
    make sense to buy OpenShift Plus, instead of OpenShift and the software only.
    Consult your Red Hat account team and ask for a quote for OpenShift Plus.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 除了前面列出的项目，从订阅成本的角度来看，OpenShift Plus 也许更合理。任何套餐通常价格优于单独购买每个部分。话虽如此，如果您对本章提到的
    *Plus* 堆栈中的任何软件感兴趣，购买 OpenShift Plus 而不是仅购买 OpenShift 和软件可能更合适。请咨询您的红帽客户团队，并要求
    OpenShift Plus 的报价。
- en: Now that we’ve already discussed some of the benefits of having the OpenShift
    Plus stack and considerations for when it is really compelling, let’s use a fictional
    use case as an example to make it more tangible.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经讨论了拥有 OpenShift Plus 堆栈的一些好处，以及其何时真正引人注目的考虑因素，让我们使用一个虚构的用例作为示例，使其更具体化。
- en: OpenShift Plus – a practical use case
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OpenShift Plus – 一个实际的用例
- en: Let’s consider the following use case. Try to use the concepts we covered in
    this book to identify which tool you could use to cover each requirement.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑以下用例。尝试使用本书涵盖的概念，找出每个需求可以使用的工具。
- en: '**Use case**: The company *HybridMyCloud* is developing an AI/ML application
    that has the following requirements:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '**用例**：公司 *HybridMyCloud* 正在开发一个具有以下要求的 AI/ML 应用：'
- en: The application life cycle is comprised of Development, QA, Pre-prod, and Production
    environments.
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用生命周期包括开发（Development）、质量保证（QA）、预生产（Pre-prod）和生产（Production）环境。
- en: Development and QA can share the same underlying platform. Pre-prod and Production
    need to be separated due to regulatory needs. Production application needs to
    be in a private subnet, with no public direct access from the internet.
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开发和 QA 可以共享相同的基础平台。由于监管需求，预生产和生产需要分开。生产应用需要在私有子网中，从互联网无法直接访问。
- en: The C-level and procurement department of *HybridMyCloud* signed a contract
    with AWS and, due to that, wants to host most resources there. However, they don’t
    want to be locked into it and want to have the ability to move the application
    to Azure when needed.
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*HybridMyCloud*的C级管理层和采购部门与AWS签订了合同，因此希望将大多数资源托管在那里。然而，他们不希望被锁定在AWS上，并希望在需要时能够将应用程序迁移到Azure。'
- en: This AI/ML application is based on containers and stateless, however, it stores
    images in S3 object storage. It receives an X-Ray image, stores it in S3 object
    storage, and uses an ML-trained model to make a risk assessment of pneumonia.
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个AI/ML应用基于容器并且是无状态的，但它将图像存储在S3对象存储中。它接收X光图像，存储到S3对象存储中，并使用经过ML训练的模型对肺炎进行风险评估。
- en: This application handles **Protected Health Information** (**PHI**), therefore
    *HybridMyCloud* wants to be compliant with the **Health Insurance Portability
    and Accountability Act** (**HIPAA**).
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该应用程序处理**受保护健康信息**（**PHI**），因此*HybridMyCloud*希望符合**健康保险流通与问责法案**（**HIPAA**）。
- en: This is a mission-critical application, so the enterprise architects of *HybridMyCloud*
    decided to have this application deployed not only on multi-availability zones
    but also using multiple regions on AWS.
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是一个关键任务应用程序，因此*HybridMyCloud*的企业架构师决定将该应用程序不仅部署在多个可用区，还要在AWS上使用多个区域。
- en: 'Other policies defined by *HybridMyCloud* are as follows:'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*HybridMyCloud*定义的其他政策如下：'
- en: All containers need to have resource requests and limits for CPU and memory.
  id: totrans-138
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有容器都需要为CPU和内存设置资源请求和限制。
- en: Never use the latest tag images.
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 切勿使用最新标签的镜像。
- en: All images used need to come from the enterprise registry. Pulling images from
    any other sources other than the enterprise registry and Red Hat certified image
    registries is strictly prohibited.
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有使用的镜像必须来自企业注册中心。严格禁止从企业注册中心以外的任何其他来源拉取镜像，包括非Red Hat认证的镜像注册中心。
- en: 'So, how would you fulfill all these requirements? There are many different
    options to match these requirements; OpenShift Plus is definitely a good option
    that can comply with all of them. Let’s discuss what the infrastructure would
    look like and how OpenShift Plus tools would be used with this use case:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，如何满足所有这些要求呢？有许多不同的选项可以匹配这些要求；OpenShift Plus无疑是一个可以符合所有要求的好选择。让我们讨论一下基础设施应该是什么样的，以及如何在这个用例中使用OpenShift
    Plus工具：
- en: 'Several OpenShift clusters are required to fulfill these requirements:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 需要多个OpenShift集群来满足这些要求：
- en: One cluster for Development and QA
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个开发和QA用的集群
- en: One cluster for Pre-prod
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个预生产集群
- en: Two clusters for Production, each one in a different AWS region
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个生产集群，每个集群位于不同的AWS区域
- en: One spare cluster on Azure that can host the application at any given time
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个备用集群在Azure上，可以在任何时候托管应用程序
- en: 'You could use the Cluster Lifecycle Management feature of **Advanced Cluster
    Management** first to deploy these clusters on AWS and Azure. For S3 storage,
    either the native cloud provider services can be used or, alternatively, use the
    **OpenShift Data Foundation** with *Multi-Cloud Object Gateway*, which would add
    the following benefits:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以首先使用**高级集群管理**的集群生命周期管理功能，在AWS和Azure上部署这些集群。对于S3存储，可以使用本地云服务提供商的服务，或者选择使用**OpenShift数据基础设施**与*多云对象网关*，这将带来以下好处：
- en: Use Object Bucket Claims to create S3 volumes.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用对象桶声明（Object Bucket Claims）创建S3卷。
- en: Use the *Multi-Cloud Object Gateway* to mirror the volume between AWS and Azure.
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用*多云对象网关*在AWS和Azure之间镜像卷。
- en: 'With clusters in place, **Advanced Cluster Management** can also be used for
    the following:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 部署完集群后，**高级集群管理**也可以用于以下操作：
- en: '**Advanced Cluster Management** in conjunction with **OpenShift GitOps** can
    be used to deploy the application in multiple clusters at the same time.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高级集群管理**与**OpenShift GitOps**结合使用，可以同时在多个集群中部署应用程序。'
- en: Policies can be created to set `allowedRegistries` field of the `image.config.openshift.io/cluster`
    custom resource to only allow images that come from the enterprise registry to
    run.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以创建策略，将`image.config.openshift.io/cluster`自定义资源的`allowedRegistries`字段设置为仅允许来自企业注册中心的镜像运行。
- en: Use the observability feature to monitor the application and cluster health.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用可观察性功能来监控应用程序和集群的健康状况。
- en: Quay can be used as the enterprise registry and the embedded image vulnerability
    scanning tool can be used as one of the sources to find known vulnerabilities.
    ACS can be used to detect known vulnerabilities in all clusters and assess them
    using HIPAA policies. It also can be used in the CI/CD pipeline to perform a static
    security analysis of manifests and to find anti-patterns, such as the usage of
    the latest tag image.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: Quay 可以作为企业注册表，而嵌入式图像漏洞扫描工具可以作为发现已知漏洞的来源之一。ACS 可用于检测所有集群中的已知漏洞，并使用 HIPAA 政策评估这些漏洞。它还可以用于
    CI/CD 流水线，执行清单的静态安全分析，并找出反模式，例如使用最新标签的镜像。
- en: These are just a few examples. Other tools we covered in this book can also
    be used, such as OpenShift Pipelines to implement CI/CD pipelines, Cost Management
    to track costs with cloud providers, and Red Hat Container Catalog to provide
    the best container base image, and so on.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 这些只是一些例子。我们在本书中涵盖的其他工具也可以使用，例如 OpenShift Pipelines 来实现 CI/CD 流水线，Cost Management
    来跟踪与云服务商的成本，Red Hat 容器目录提供最佳容器基础镜像，等等。
- en: Summary
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we had a brief overview of Red Hat Quay, an interesting option
    for a container image registry. We discussed the main benefits of OpenShift Plus
    and why it makes sense to at least consider OpenShift Plus with your hybrid or
    multi-cloud strategy. Finally, we used a fictional use case to think about how
    the OpenShift Plus stack could be used in a practical scenario.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 本章简要概述了 Red Hat Quay，这是一个有趣的容器镜像注册表选项。我们讨论了 OpenShift Plus 的主要优势，并说明了为何至少在混合云或多云战略中考虑使用
    OpenShift Plus 是有意义的。最后，我们通过一个虚构的使用案例，思考了 OpenShift Plus 堆栈在实际场景中的应用。
- en: 'Wow, what a great journey so far! We have covered many things already in this
    book and we are so pleased that you have come along with us on this journey. We
    are almost at the end of our long journey here, but the best part is coming: in
    the next chapter, we will exercise most of what we have learned in this book using
    one practical example. We will have a comprehensive review of OpenShift Pipelines,
    GitOps, and all other tools we covered in this book using an example, practice
    with the concepts and tools from scratch, and have a real functional application
    deployed into multiple clusters in the end.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 哇，到目前为止真是一次伟大的旅程！我们在本书中已经涵盖了很多内容，非常高兴你能和我们一起走到这里。我们的长途旅程即将结束，但最精彩的部分即将到来：在下个章节中，我们将通过一个实际的案例，练习书中学到的大部分内容。我们将通过一个示例对
    OpenShift Pipelines、GitOps 以及本书中涵盖的所有工具进行全面回顾，动手实践这些概念和工具，从零开始，并最终在多个集群中部署一个真实的功能应用。
- en: We encourage you to move on to the next chapter and try the exercises we propose
    there.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我们鼓励你继续前进，尝试我们在下个章节中提出的练习。
- en: Further reading
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'Looking for more information? Check the following references to get more information
    about Red Hat Quay:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 想要获取更多信息？请查阅以下参考资料，了解更多关于 Red Hat Quay 的内容：
- en: '*Quay product documentation:* [https://access.redhat.com/documentation/en-us/red_hat_quay/3.7](https://access.redhat.com/documentation/en-us/red_hat_quay/3.7)'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Quay 产品文档:* [https://access.redhat.com/documentation/en-us/red_hat_quay/3.7](https://access.redhat.com/documentation/en-us/red_hat_quay/3.7)'
- en: '*Quay Object Storage prerequisite:* [https://access.redhat.com/documentation/en-us/red_hat_quay/3.7/html/deploy_red_hat_quay_on_openshift_with_the_quay_operator/operator-preconfigure#operator-storage-preconfig](https://access.redhat.com/documentation/en-us/red_hat_quay/3.7/html/deploy_red_hat_quay_on_openshift_with_the_quay_operator/operator-preconfigure#operator-storage-preconfig)'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Quay 对象存储前提条件:* [https://access.redhat.com/documentation/en-us/red_hat_quay/3.7/html/deploy_red_hat_quay_on_openshift_with_the_quay_operator/operator-preconfigure#operator-storage-preconfig](https://access.redhat.com/documentation/en-us/red_hat_quay/3.7/html/deploy_red_hat_quay_on_openshift_with_the_quay_operator/operator-preconfigure#operator-storage-preconfig)'
- en: '*Clair – Vulnerability Static Analysis for Containers:* [https://github.com/quay/clair](https://github.com/quay/clair
    )'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Clair – 容器的漏洞静态分析:* [https://github.com/quay/clair](https://github.com/quay/clair
    )'
- en: 'Check the following references to get more information about Red Hat OpenShift
    Data Foundation:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 查阅以下参考资料以获取更多关于 Red Hat OpenShift 数据基础的相关信息：
- en: '*OpenShift Data Foundation Smart Page:* [https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation](https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation)'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*OpenShift 数据基础智能页面:* [https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation](https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation)'
- en: '*OpenShift Data Foundation Product Page:* [https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation](https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation)'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*OpenShift 数据基础产品页面:* [https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation](https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation)'
- en: 'Check the following references to get more information about Red Hat OpenShift
    Plus:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 查阅以下参考资料以获取有关 Red Hat OpenShift Plus 的更多信息：
- en: '*OpenShift Plus Smart Page:* [https://www.redhat.com/en/technologies/cloud-computing/openshift/platform-plus](https://www.redhat.com/en/technologies/cloud-computing/openshift/platform-plus)'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*OpenShift Plus 智能页面:* [https://www.redhat.com/en/technologies/cloud-computing/openshift/platform-plus](https://www.redhat.com/en/technologies/cloud-computing/openshift/platform-plus)'
- en: 'Check the following references to get more information about Red Hat Cost Management:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 查阅以下参考资料以获取有关 Red Hat 成本管理的更多信息：
- en: '*Official documentation:* [https://access.redhat.com/documentation/en-us/cost_management_service/2022](https://access.redhat.com/documentation/en-us/cost_management_service/2022)'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*官方文档:* [https://access.redhat.com/documentation/en-us/cost_management_service/2022](https://access.redhat.com/documentation/en-us/cost_management_service/2022)'
- en: '*Upstream project:* [https://project-koku.github.io/](https://project-koku.github.io/)'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*上游项目:* [https://project-koku.github.io/](https://project-koku.github.io/)'
- en: 'Check the following references to get more information about OpenShift Developer
    Sandbox:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 查阅以下参考资料以获取有关 OpenShift 开发者沙箱的更多信息：
- en: '*Getting started:* [https://developers.redhat.com/developer-sandbox](https://developers.redhat.com/developer-sandbox)'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*入门指南:* [https://developers.redhat.com/developer-sandbox](https://developers.redhat.com/developer-sandbox)'
