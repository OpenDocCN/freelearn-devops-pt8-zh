<html><head></head><body><div class="chapter" title="Chapter&#xA0;9.&#xA0;Extending and Enhancing Salesforce CRM"><div class="titlepage"><div><div><h1 class="title"><a id="ch09"/>Chapter 9. Extending and Enhancing Salesforce CRM</h1></div></div></div><p>In this chapter, we will look at how to extend and enhance the functionality within the Salesforce CRM application and how to move beyond the standard Salesforce Apps and features that we have looked at so far.</p><p>We will look at how additional functionality can be added to your Salesforce environment by using external applications from the <span class="strong"><strong>AppExchange Marketplace</strong></span> to extend the capability of the core Salesforce CRM platform.</p><p>An overview of the technologies and techniques that allow advanced customization will be presented, which will help you gain an understanding of the features and considerations required to create web mashups in your Salesforce CRM applications.</p><p>You will discover how, with the use of platforms and technologies such as Visualforce, you can extend the core functionality of the application and leverage significant benefits for your organization, as well as how to enhance the system without the need for expensive IT development resources.</p><p>The following topics will be covered in this chapter:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Salesforce AppExchange Marketplace</li><li class="listitem" style="list-style-type: disc">Enterprise mashups in web applications</li><li class="listitem" style="list-style-type: disc">Mashups in Salesforce CRM</li><li class="listitem" style="list-style-type: disc">Introduction to Visualforce</li><li class="listitem" style="list-style-type: disc">Creating an example mashup with Visualforce</li><li class="listitem" style="list-style-type: disc">Overview of Visualforce controllers</li><li class="listitem" style="list-style-type: disc">Introduction to Apex code and triggers</li><li class="listitem" style="list-style-type: disc">Change management overview</li><li class="listitem" style="list-style-type: disc">User adoption</li></ul></div><div class="section" title="Salesforce AppExchange Marketplace"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec104"/>Salesforce AppExchange Marketplace</h1></div></div></div><p>The Salesforce <span class="strong"><strong>AppExchange Marketplace</strong></span> is a website provided by Salesforce.com that enables organizations to select additional applications, known as <span class="strong"><strong>Apps</strong></span>, to add new features to their Salesforce CRM application</p><p>Both the Salesforce CRM application and the AppExchange provide web-delivered platforms for using and building applications. This integrated web-delivered approach allows for the installation of applications and new functionality from AppExchange into Salesforce, which is often far simpler and more cost effective than traditional software update mechanisms. The benefits of the AppExchange are that system administrators can easily extend the Salesforce CRM application as your company's business requirements change.</p><p>There is a wealth of solutions available to help achieve most requirements that you can access from the Salesforce <span class="strong"><strong>AppExchange Marketplace</strong></span>, and in this section we will describe and take you through the process of installing an example app.</p><p>The apps and services listed on AppExchange are provided by the Salesforce community of third-party developers and system integrators. Many of the apps are also provided by Salesforce themselves through their team known as the <span class="strong"><strong>Force.com Labs</strong></span>. The apps can range from highly complex multiple screen solutions to simple sets of dashboards or reports.</p><p>Apps can sometimes incur additional costs, but there are many which are provided for free or a small fee. In general, apps provided by the Salesforce.com Force.com Labs team tend to be free. To access AppExchange, navigate to <span class="strong"><strong>Setup |</strong></span>
<span class="strong"><strong>AppExchange Marketplace</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_001.jpg" alt="Salesforce AppExchange Marketplace"/></div><p>
</p><p>You can also access the <span class="strong"><strong>AppExchange Marketplace</strong></span> website directly by navigating to 
<a class="ulink" href="http://www.appexchange.com/">http://www.appexchange.com/</a>
, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_002.jpg" alt="Salesforce AppExchange Marketplace"/></div><p>
</p><p>As a directory, Salesforce AppExchange is similar to consumer websites, such as the App Store from Apple, in the way that it seeks to provide an open, community-based channel for the distribution, retrieval, and installation of applications.</p><p>AppExchange differs, however, in that it provides not only the facilities for the third-party distribution of apps, but also the listing of services by system integrators. This enables the Salesforce community to search for and review both apps and services from a central site.</p><div class="section" title="Managed and unmanaged packages"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec235"/>Managed and unmanaged packages</h2></div></div></div><p>Salesforce terms the collection of components and applications that are distributed through AppExchange as a <span class="strong"><strong>package</strong></span>. There are two main types of packages, namely, managed and unmanaged.</p><p>Managed packages differ from unmanaged packages by the use of protected components that allow the managed packages to be upgraded by the developers, allowing them to add new functionality or to refactor in any changes in the Salesforce environment. By protecting certain components such as <code class="literal">Apex Code</code>, managed packages also serve to protect the intellectual property of the developer organization.</p><p>Unmanaged packages, on the other hand, do not protect components and are therefore static within your organization, as they cannot be upgraded by the publishing developer. They allow you to access all of the implemented customization or code and can be useful if you want to change or extend the functionality yourself.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note312"/>Note</h3><p>Users with the permission <span class="strong"><strong>Download AppExchange Packages</strong></span> enabled for their profile can install or uninstall the AppExchange packages from the AppExchange website.</p></div></div><p>Sometimes apps are distributed by <span class="strong"><strong>Independent Software Vendors </strong></span>(<span class="strong"><strong>ISVs</strong></span>), which use the AppExchange package as a channel to advertise their presence and to showcase their range of products.</p></div><div class="section" title="External and third-party tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec236"/>External and third-party tools</h2></div></div></div><p>By showcasing on the <span class="strong"><strong>AppExchange Marketplace</strong></span> website, ISVs often provide free apps, which help drive traffic and interest in their core products that complement Salesforce CRM, and they are usually provided as web-based solutions in the same way as Salesforce.</p><p>These complementary applications are typically deployed alongside Salesforce CRM in support of a specific business process or function. For example, <span class="strong"><strong>incentive and commission management</strong></span>, <span class="strong"><strong>project management</strong></span>, <span class="strong"><strong>product configuration</strong></span>, <span class="strong"><strong>expense management</strong></span>, <span class="strong"><strong>address checking</strong></span>, and so on, are all examples of apps for Salesforce that are available from AppExchange.</p></div><div class="section" title="App security"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec237"/>App security</h2></div></div></div><p>Salesforce inspects all registered apps to be sure that they have no obvious security risks. However, it is worth noting that since the apps are developed by third-party providers, you should also carry out extensive testing and employ due diligence to eliminate any risk before installing the app into your production instance.</p><p>After an app has passed the Salesforce inspection, the core functionality and code can no longer be changed. However, custom links and web tabs are allowed to be changed because they may need to be altered after installation, for example, simple target URLs might need to be changed from one organization to another.</p><p>You need to be aware how these links may introduce risks as part of your decision whether to trust the source of an app before installing it to production. This is described in more detail in the following section.</p></div><div class="section" title="Before installing an app"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec238"/>Before installing an app</h2></div></div></div><p>The following steps are recommended to help you understand more about the app and to determine any risk or need for further setup in your organization before you actually install the app into your production instance:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Read the specifications and reviews.</li><li class="listitem">Review the screenshots and customization guides.</li><li class="listitem">Take a test drive.</li></ol></div><div class="section" title="Reading specifications and reviews"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec273"/>Reading specifications and reviews</h3></div></div></div><p>Before installing, read the specification associated with the app, where you will see the following details: which Salesforce editions are supported, what languages are supported, the components summary, and package details.</p><p>It is often also worth looking at the reviews that have been left by others that have attempted to install the app. Although there is no guarantee that the review is 100% accurate, and it may be subjective, it can give you an indication of the complexity in the use and successful installation of an app by other system administrators.</p></div><div class="section" title="Reviewing screenshots and customization guides"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec274"/>Reviewing screenshots and customization guides</h3></div></div></div><p>Most apps that have been listed on the AppExchange website provide screenshots and guides for any post-install customization that may be required. These are useful and provide a quick indicator of whether the app will be of use to you and your organization.</p></div><div class="section" title="Taking a test drive"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec275"/>Taking a test drive</h3></div></div></div><p>Apps typically offer a test drive option (especially the more complex apps), where you are directed to an external Salesforce application where you can use the app as a read-only user before installation. A test drive gives you a far better way of determining whether the app is suitable for your organization before installing.</p><p>Within the test drive, you have the opportunity to check the app and its components to ensure that they are suitable, and also that they pose no security risks. For example, components such as custom links, formula fields, and web tabs can send Salesforce session IDs to external web services.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note313"/>Note</h3><p>Session IDs are tokens that allow users to access Salesforce CRM without re-entering the login name and password.</p></div></div><p>Salesforce.com recommends checking all links to external services that include a <code class="literal">session ID merge</code> field, because if these <code class="literal">session ID</code>s are shared with an external service, then they can expose your data, potentially leading to a significant security risk that we need to be aware of.</p></div></div><div class="section" title="Installing an app"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec239"/>Installing an app</h2></div></div></div><p>The following steps describe the process of how to install an app into your Salesforce CRM application from the <span class="strong"><strong>AppExchange Marketplace</strong></span>:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Click the <span class="strong"><strong>Get It Now</strong></span> button.</li><li class="listitem">Examine the package.</li><li class="listitem">Review the security.</li><li class="listitem">Install the app.</li><li class="listitem">Perform the post-installation configuration.</li></ol></div><p>The best way to guide you through the use of new technology is by demonstrating with an example.</p><p>Here, we are going to install an application called <span class="strong"><strong>Mass Delete</strong></span>, which has been developed and published by Salesforce.com's Force.com Labs team. This is a free app that provides a set of custom buttons that allow users to select any number of records and then delete them with a single click.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note314"/>Note</h3><p>The <code class="literal">Mass Delete</code> app from Salesforce.com's Force.com Labs is available from the <span class="strong"><strong>AppExchange Marketplace</strong></span> directly through the following URL:

<a class="ulink" href="http://appexchange.salesforce.com/listingDetail?listingId=a0N300000016YuDEAU">http://appexchange.salesforce.com/listingDetail?listingId=a0N300000016YuDEAU</a>

</p></div></div><p>The <span class="strong"><strong>Mass Delete app</strong></span> page looks as follows:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_003.jpg" alt="Installing an app"/></div><p>
</p><div class="section" title="Get It Now"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec276"/>Get It Now</h3></div></div></div><p>By clicking on the <span class="strong"><strong>Get It Now</strong></span> button, you will start the process of installing the application, where you will be prompted to log in to AppExchange using your Salesforce credentials, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_004.jpg" alt="Get It Now"/></div><p>
</p><p>You will then be asked to select the location for the installation, where the options are to either <span class="strong"><strong>Install in production </strong></span>or to <span class="strong"><strong>Install in sandbox,</strong></span> as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_005.jpg" alt="Get It Now"/></div><p>
</p><p>You will then be presented with details of the app that will be installed (listed in the <span class="emphasis"><em>What you are installing </em></span>section) and the Salesforce organization where the app will be installed (listed in the <span class="emphasis"><em>Where you are installing </em></span>section), as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_006.jpg" alt="Get It Now"/></div><p>
</p><p>This page shows information about the <span class="strong"><strong>Package</strong></span> and <span class="strong"><strong>Version,</strong></span> along with the <span class="strong"><strong>Subscription</strong></span>, <span class="strong"><strong>Duration</strong></span>, and <span class="strong"><strong>Number of Subscribers</strong></span> information that are a part of the app package.</p><p>Click on the checkbox labeled <span class="strong"><strong>I have read and agree to the terms and conditions</strong></span> to confirm that you agree to proceed with the installation and then click on the <span class="strong"><strong>Confirm</strong></span> and <span class="strong"><strong>Install</strong></span>! to continue to the Salesforce login screen, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_007.jpg" alt="Get It Now"/></div><p>
</p><p>This screen allows you to log into the Salesforce app. If you wish to install the app into your production organization, you would use your production login details along with the Salesforce production URL, which may be 
<a class="ulink" href="https://login.salesforce.com">https://login.salesforce.com</a>
. If you want to install it into a sandbox org, you must change the login URL to that of the sandbox, which is <a class="ulink" href="https://test.salesforce.com">
https://test.salesforce.com
</a>, and use your sandbox login details.</p><p>Now enter your <span class="strong"><strong>User Name</strong></span> and <span class="strong"><strong>Password</strong></span> and then click on <span class="strong"><strong>Login</strong></span> to proceed to the next screen:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_008.jpg" alt="Get It Now"/></div><p>
</p><p>In this screen you are presented with options of how to handle a situation when an existing component's name conflicts with a component being installed. Here, the options available are <span class="strong"><strong>Do not install and Rename conflicting components in package</strong></span>. You are also presented with options for the users' profile permissions that will be applied when the app is installed.</p><p>Now click on the <span class="strong"><strong>Install</strong></span> button to proceed with the installation, and when complete the following confirmation screen appears:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_010.jpg" alt="Get It Now"/></div><p>
</p><p>In this final screen you are presented with information about the <span class="strong"><strong>App Name</strong></span>, <span class="strong"><strong>Publisher, Version Name</strong></span>, and various other details that make up the app package.</p><p>This screen provides confirmation that the app package has been successfully installed.</p><p>For large and complex apps, you may not see the <span class="strong"><strong>Installation Complete Confirmation</strong></span> screen straight away. Instead, a screen is sometimes displayed that shows a message that the installation has been scheduled, and you will then later receive an e-mail notification when the deployment is complete.</p></div><div class="section" title="Post-install configuration"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec277"/>Post-install configuration</h3></div></div></div><p>Included in the package components of this <span class="strong"><strong>Mass Delete</strong></span> app is a PDF guide describing the post-installation configuration that must be applied to the app before the functionality can be used. The guide can be accessed from within the <span class="strong"><strong>Documents</strong></span> tab (which is accessible from the main <span class="strong"><strong>Documents</strong></span> tab), as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_011.jpg" alt="Post-install configuration"/></div><p>
</p><p>The guide describes how to complete the installation and customization of the app:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_012-2.jpg" alt="Post-install configuration"/></div><p>
</p><p>Using the guide, we add the <span class="strong"><strong>Custom list</strong></span> button to the Contacts-related list within the <span class="strong"><strong>Accounts detail</strong></span> page, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_013.jpg" alt="Post-install configuration"/></div><p>
</p><p>Finally, to verify the installation and customization, we can navigate to the <span class="strong"><strong>Accounts detail</strong></span> page and access the <span class="strong"><strong>Contacts related list</strong></span> section, whereupon we can access the <span class="strong"><strong>Mass Delete</strong></span> custom button and associated functionality:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_014.jpg" alt="Post-install configuration"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note315"/>Note</h3><p>In Salesforce CRM Unlimited Edition, you can install an unlimited number of apps. In the Enterprise Edition, there is a maximum limit of ten apps.</p></div></div></div></div><div class="section" title="Uninstalling an app"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec240"/>Uninstalling an app</h2></div></div></div><p>You can uninstall an app that has been installed from the AppExchange; however, there are some considerations. If you uninstall a package that includes a custom object, all components associated with that custom object are deleted, such as custom fields, validation rules, workflow rules, approval processes, custom buttons and links, and so on.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note316"/>Note</h3><p>You cannot uninstall a package if any component in the package is referenced by a component that will not be included in the uninstall, or if a field added by the package is being updated by a scheduled job, such as a time-based workflow field update (here, you must wait until the background job finishes and retry).</p></div></div><p>After an uninstall, Salesforce automatically creates an export file containing the package data. When the uninstall is complete, Salesforce sends an e-mail containing a link to the admin user carrying out the uninstall.</p><p>The export files (plus related notes and attachments) are listed below the list of installed packages.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip317"/>Tip</h3><p>Salesforce recommends backing up and storing the export file elsewhere because it will only be available for a limited period after the uninstall.To uninstall an AppExchange app, navigate to <span class="strong"><strong>Setup</strong></span>
<span class="strong"><strong> | Installed Packages</strong></span>, as shown in the following screenshot:</p></div></div><p>
</p><div class="mediaobject"><img src="graphics/image_09_015.jpg" alt="Uninstalling an app"/></div><p>
</p><p>Now select the installed package and either click on the <span class="strong"><strong>Uninstall,</strong></span> or click on the package name to review the details of the package, set the uninstall confirmation checkbox, and finally click on the <span class="strong"><strong>Uninstall</strong></span> button, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_016.jpg" alt="Uninstalling an app"/></div><p>
</p><div class="section" title="AppExchange best practices"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec278"/>AppExchange best practices</h3></div></div></div><p>The following best practices should be applied when installing apps from the <span class="strong"><strong>AppExchange Marketplace</strong></span> website:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Clarify that the specification for the app meets the requirements and assess any reviews and comments</li><li class="listitem" style="list-style-type: disc">Take a test drive, if available</li><li class="listitem" style="list-style-type: disc">Review all the components that are included in the package and be aware of any security issues concerning links and session IDs</li><li class="listitem" style="list-style-type: disc">Test the app in a sandbox before deploying into production</li><li class="listitem" style="list-style-type: disc">Try to enlist business support to own and validate the app before deploying into production</li><li class="listitem" style="list-style-type: disc">Consider undertaking a pilot deployment for selected users if the app is particularly complex</li><li class="listitem" style="list-style-type: disc">Communicate the app to the business prior to deployment and activation in production</li><li class="listitem" style="list-style-type: disc">Prepare training material for all affected users if the app is particularly complex</li></ul></div></div></div></div></div>
<div class="section" title="Enterprise mashups in web applications"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec105"/>Enterprise mashups in web applications</h1></div></div></div><p>A <span class="strong"><strong>mashup</strong></span> is a general term that is commonly used to describe the merging of functionality and content from multiple sources. It is typically applied to describe the merging of web applications where the sources may often be using different technology to provide the service or application. As part of the distinction of a web application mashup, there is a common feature that provides connectivity, which is the Internet.</p><p>The connections between the various sources may require different levels and complexities of integration, depending on whether the associated information or content is to be simply viewed or whether it is also to be amended, and therefore whether data is to be distributed across various systems. When mashups first started appearing on the Web, they were created to enable the viewing of content from another web source within an Internet browser, and did not transfer any data or functionality between the source systems.</p><p>An example of such a mashup is a website that displays a <span class="emphasis"><em>how to find us</em></span> type of page within one of its web pages, such as the contact page. Within the HTML code, there might be an embedded piece of functionality showing a static Google Map or a similar web control, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_017-2.jpg" alt="Enterprise mashups in web applications"/></div><p>
</p><p>This type of mashup is an example of a simple client-side mashup, where the connectivity occurs inside the web browser. This coding inside the web page provides a way to combine static information from multiple Internet sources and generate an elegant visual presentation.</p><p>As mashups have evolved, far more complex functionality can now be achieved. It is possible to have sophisticated integration between web applications where information and functionality are seamlessly shared. As you might expect, this requires more complex coding to achieve, and also may require the use of server-side infrastructures. We will look at the distinction between client-side and server-side mashups shortly.</p></div>
<div class="section" title="Mashups in Salesforce CRM"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec106"/>Mashups in Salesforce CRM</h1></div></div></div><p>It may seem daunting at first, especially if you are less familiar with Internet scripting technologies such as HTML, but certain types of mashups can be accomplished by most people and do not require professional software developers or an IT team.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note318"/>Note</h3><p>HTML is the main markup language for creating web pages and other information that can be displayed in a web browser (<a class="ulink" href="https://en.wikipedia.org/wiki/HTML">https://en.wikipedia.org/wiki/HTML</a>).</p></div></div><p>Before starting out, it is always useful to first evaluate how and where the mashup needs to be done, and in particular, the type of data and service that is to be mashed up. Once this is understood, you can then begin to consider the coding effort and plan the resources required to implement them.</p><p>To understand the flavor of mashups as far as Salesforce CRM is concerned, and as suggested, at a high-level, there are two main categories of mashup development, and these can be classed as either server-side or client-side, as shown in the following diagram:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_018.jpg" alt="Mashups in Salesforce CRM"/></div><p>
</p><p>Looking at the previous diagram, we see that the server-side mashup goes through the following high-level steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">User makes a page request to Salesforce CRM using their web browser.</li><li class="listitem">The web browser calls the Salesforce CRM servers, which invoke custom Apex code.</li><li class="listitem">The custom Apex code in Salesforce CRM calls a function on an external application server.</li><li class="listitem">The external application returns the response to Salesforce CRM.</li><li class="listitem">Salesforce CRM processes the response and returns the details to the user's web browser.</li><li class="listitem">The user's web browser finally presents the overall response back to the user.</li></ol></div><p>Client-side mashups are far more simple, as they use the browser to link the requests and responses required for the mashup, where the following typical high-level steps can be considered:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">User makes a page request to Salesforce CRM using their web browser.</li><li class="listitem">The user's web browser requests details from Salesforce CRM.</li><li class="listitem">Salesforce CRM returns the response to the user's web browser.</li><li class="listitem">The user's web browser requests details from the external application.</li><li class="listitem">The external application returns the response to the user's web browser.</li><li class="listitem">The user's web browser finally presents the overall response back to the user.</li></ol></div><p>As indicated, server-side mashups often require sophisticated coding and require external infrastructure, which is generally provided by IT resources. As this book does not aim to be a resource for developers, we will look at server-side technology at a high level, but we will not go into the details.</p><p>We will, however, cover the use cases and provide some step-by-step instructions on how you can compose client-side mashups, as well as the tools that are available within your Salesforce CRM application.</p><div class="section" title="Server-side mashups"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec241"/>Server-side mashups</h2></div></div></div><p>By way of introduction, and for the sake of completeness, the following section describes the core features of external server-side mashups. We will briefly look at, in a little more detail, the capabilities, features, and implications associated with the use of server-side mashups.</p><p>Server-side mashups are a specific example of an external services mashup. This is where external systems may either serve the request for data from Salesforce as a client or use data presented by Salesforce and mash the composite data in an external system.</p><p>These mashups typically use web services, and are most often provided by organizations using web APIs, which describe how the service can be accessed by a client application over the Internet and which are executed on the remote system that is hosting the service.</p><p>A more formal definition of a web service is provided by the <span class="strong"><strong>World Wide Web Consortium</strong></span> (<span class="strong"><strong>W3C)</strong></span>, which as detailed on their web page (<a class="ulink" href="http://www.w3.org">http://www.w3.org</a>), is an international community where member organizations, a full-time staff, and the public work together to develop web standards.</p><p>The definition of a web service by the W3C is as follows (<a class="ulink" href="http://www.w3.org/TR/ws-gloss/">http://www.w3.org/TR/ws-gloss/</a>):</p><p>
<span class="emphasis"><em>A Web service is a software system designed to support interoperable machine-to-machine interaction over a network. It has an interface described in a machine-processable format (specifically WSDL). Other systems interact with the Web service in a manner prescribed by its description using SOAP-messages, typically conveyed using HTTP with an XML serialization in conjunction with other Web-related standards</em></span>.</p><p>Although the web service definition for the machine-to-machine interaction by the W3C refers to machine-to-machine interaction using <span class="strong"><strong>Simple Object Access Protocol</strong></span> (<span class="strong"><strong>SOAP</strong></span>), there is another protocol that is becoming increasingly popular today, known as <span class="strong"><strong>Representational State Transfer </strong></span>(<span class="strong"><strong>REST).</strong></span> This is mentioned for information only, and we will not go into any further detail about web services in this book.</p></div><div class="section" title="Client-side mashups"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec242"/>Client-side mashups</h2></div></div></div><p>Within Salesforce CRM, there are typically two types of client-side mashup, namely, client-side services mashups and client-side presentation mashups.</p><div class="section" title="Client-side services mashups"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec279"/>Client-side services mashups</h3></div></div></div><p>Similar to server-side mashups, client-side services mashups can also be used to call web services or consume websites and feeds. They can be used to invoke the Salesforce CRM web services API from within the browser. Client-side services mashups require more complex programming than client-side presentation mashups, and typically rely on the technologies associated with web services.</p><p>Client services mashups and external services mashups are useful to organizations that need to access information from various systems that usually serve a business data process and interact in real time. Specifying and developing these types of mashups needs to be carefully evaluated to determine the required effort and resources.</p></div><div class="section" title="Client-side presentation mashups"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec280"/>Client-side presentation mashups</h3></div></div></div><p>Client-side presentation mashups are the least complex mashups and can be composed relatively quickly. Here, live data and functionality from multiple sources are embedded on a web page that requires data from the Salesforce platform with which to mashup with the non-Salesforce data and functionality.</p><p>Client presentation mashups in Salesforce can be composed using Visualforce, HTML, and JavaScript, and which can often be copied and pasted by nontechnical users, immediately adding value to a web application.</p><p>Having briefly outlined the nature of client-side mashups, we are now going to look at how they can actually be created in Salesforce CRM. As shown earlier, the enabling technology is provided by the Salesforce platform with the use of the web page framework known as Visualforce.</p><p>The best way to guide you through the use of new technology is by demonstrating how to use it with an example. Here, we are going to compose a client-side presentation that displays a Google Map widget displaying Google Map location details for a given company record in Salesforce.</p><p>The Google Map will be presented to the user in Salesforce CRM after selecting an appropriate account record, and live Google Map information will be displayed right from within the relevant account detail page. The mashup will be composed by creating a new Visualforce page with the required Google Map widget and then adding a new section to the account detail page where the Visualforce page will be included.</p></div></div></div>
<div class="section" title="Introduction to Visualforce"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec107"/>Introduction to Visualforce</h1></div></div></div><p>Visualforce is the framework in Salesforce CRM that allows you to further customize your organization's user interface beyond the standard functionality we have previously covered.</p><p>As described previously, using Visualforce you can combine data from multiple objects, create mashups with data from external web services, and even override some of the logic and the behavior found within standard Salesforce CRM application functions. Visualforce consists of the following three elements:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Visualforce pages: These are used to define the user interface</li><li class="listitem" style="list-style-type: disc">Visualforce components: These can be thought of as a library of standard or custom-built sections of Visualforce code</li><li class="listitem" style="list-style-type: disc">Visualforce page controllers: These are used to control the behavior of Visualforce pages, and can either be controlled by standard logic or you can create custom logic to change or extend the standard Salesforce CRM behavior</li></ul></div><div class="section" title="Visualforce pages"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec243"/>Visualforce pages</h2></div></div></div><p>The Visualforce framework allows for the creation of Visualforce pages. These pages are a little like documents that are stored in Salesforce, and they are comprised of instructions that specify how the page is to appear and function. Similar in nature to HTML, Visualforce pages comprise of a tag-based markup language, with each Visualforce tag type corresponding to a particular user interface component.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note319"/>Note</h3><p>The maximum size of a Visualforce page cannot be greater than 15 MB.</p></div></div><p>For the more technical readers, Visualforce performs similar functions as, say, Java Server Pages or Active Server Pages and is used to manage the retrieval of data from the Salesforce platform and the rendering of results via the Internet browser user interface.</p><div class="section" title="Creating a Visualforce page"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec281"/>Creating a Visualforce page</h3></div></div></div><p>Now that you are aware of the basic building blocks provided by Visualforce, we will describe the creation of Visualforce pages. This section looks at how the creation and modification of pages can be done and shows the following two ways of doing so:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Using the Visualforce pages setup page</li><li class="listitem" style="list-style-type: disc">Using development mode</li></ul></div></div><div class="section" title="Visualforce pages setup page"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec282"/>Visualforce pages setup page</h3></div></div></div><p>To navigate to the setup page for creating Visualforce pages, go to <span class="strong"><strong>Setup | Develop | Pages. </strong></span>Now click on the<span class="strong"><strong> New</strong></span> button to create a new Visualforce page. Select an existing entry to view the page or click on <span class="strong"><strong>Edit</strong></span> to modify it, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_019.jpg" alt="Visualforce pages setup page"/></div><p>
</p></div><div class="section" title="Visualforce development mode"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec283"/>Visualforce development mode</h3></div></div></div><p>We can also use something called Visualforce development mode to initially create and edit Visualforce pages. This can be a better choice because it provides several useful features that make it easier to build <span class="strong"><strong>Visualforce pages</strong></span>.</p><p>To start using the development mode, it needs to be activated on your user record by navigating to <span class="strong"><strong>Your Name</strong></span> | <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>My Personal Information</strong></span> | <span class="strong"><strong>Personal Information</strong></span>. Now click on the <span class="strong"><strong>Edit</strong></span> button, select the <span class="strong"><strong>Development Mode</strong></span> checkbox (as shown in the following screenshot), and then finally click on <span class="strong"><strong>Save</strong></span>:</p><p>
</p><div class="mediaobject"><img src="graphics/09_20.jpg" alt="Visualforce development mode"/></div><p>
</p><p>When in Visualforce development mode, you can create a new page simply by entering a unique URL into the browser's address bar.</p><p>Automatic creation of new Visualforce pages can be done by entering a unique URL (for a Visualforce page that does not exist) into the browser's address bar. For example, typing the URL <a class="ulink" href="https://na10.salesforce.com/apex/GoogleMap">
https://na10.salesforce.com/apex/GoogleMap
</a> will enable a new page called Google Map to be created.</p><p>You need to be careful that you are entering the correct URL text, as it is the <code class="literal">
/apex/GoogleMap
</code> part in the preceding example that prompts Salesforce CRM to check and create a new page if it does not currently exist. It is also important that the start of the URL is entered correctly. The 
<a class="ulink" href="https://na10.salesforce.com">https://na10.salesforce.com</a>
  part refers to the Salesforce instance for your Salesforce CRM application.</p><p>When entered correctly, the following screen, which allows you to create the Visualforce page, will be presented:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_021-2.jpg" alt="Visualforce development mode"/></div><p>
</p><p>This, as you can appreciate, can save a lot of time when creating multiple pages, as you do not need to keep navigating to the setup section, saving you a number of mouse clicks.</p><p>The resulting edit page when you click on the <span class="strong"><strong>Create Page Google Map </strong></span>link is the same edit page as when accessed through the setup route, as shown in the following screenshot:</p><p>
</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_022.jpg" alt="Visualforce development mode"/></div><p>
</p><p>
</p><p>When development mode is enabled, a development section is automatically presented below the Visualforce page that you are creating or editing, which displays an editor section. To show or hide the development section, click on the following icon:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_023.jpg" alt="Visualforce development mode"/></div><p>
</p><p>The editor allows you to write Visualforce component tags directly within the browser window and also offers the following features:</p><p>
</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_024.jpg" alt="Visualforce development mode"/></div><p>
</p><p>
</p><p>As shown, the seven menu functions are provided for:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Saving the page</li><li class="listitem" style="list-style-type: disc">Searching for text</li><li class="listitem" style="list-style-type: disc">Navigating to a specified line in the code</li><li class="listitem" style="list-style-type: disc">Undoing changes</li><li class="listitem" style="list-style-type: disc">Redoing changes</li><li class="listitem" style="list-style-type: disc">Increasing the font size of the text</li><li class="listitem" style="list-style-type: disc">Decreasing the font size of the text</li></ul></div><p>Clicking on the <span class="strong"><strong>Component Reference</strong></span> link will take you to online documentation, which provides descriptions as well as example code for all the Visualforce components, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_025-2.jpg" alt="Visualforce development mode"/></div><p>
</p><p>In addition, the page editor also provides highlighting and an autocomplete feature that automatically displays available component markup tags, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_026.jpg" alt="Visualforce development mode"/></div><p>
</p><p>The greatest benefit of having development mode enabled when building Visualforce pages using the Salesforce CRM platform is that as you add component tags and build up the code in the page, you can click on the save icon and view the resulting changes immediately.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note320"/>Note</h3><p>The Visualforce page must be free from errors before the page can be saved.</p></div></div></div><div class="section" title="Visualforce components"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec284"/>Visualforce components</h3></div></div></div><p>We have seen in the previous section that Salesforce provides a set of standard, pre-built components, such as <code class="literal">&lt;apex:actionFunction&gt;</code> and <code class="literal">&lt;apex:actionStatus&gt;</code>, which can be added to Visualforce pages to construct pages of functionality. In addition, you can build your own custom components to augment this library of components.</p><p>Similar to the way functions work in a programming language, a custom Visualforce component allows you to construct common code and then re-use that code in one or more Visualforce pages.</p><p>Custom components allow you to define attributes that can be passed to each component. The value of an attribute can then change the way the markup is displayed on the final page and the controller-based logic that executes for that instance of the component.</p><p>Visualforce custom components consist of Visualforce markup tags using the standard <code class="literal">&lt;apex:component&gt;</code> tag, and so rather than repeating the Visualforce markup required for every page that you need the common code on, you can define a custom component that has certain attributes and then uses those attributes to display the functionality on the page. Once defined, every Visualforce page in your organization can leverage the custom component in the same way as a page can leverage standard components such as <code class="literal">&lt;apex:dataTable&gt;</code> or <code class="literal">&lt;apex:actionStatus&gt;</code>.</p></div><div class="section" title="Creating an example mashup with Visualforce"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec285"/>Creating an example mashup with Visualforce</h3></div></div></div><p>To construct our example mashup we will follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Delete the default new Visualforce markup content.</li><li class="listitem">Change the Visualforce Controller to specify an Account Standard Controller.</li></ol></div><p>Copy and paste the Google Map code and add Salesforce-specific merge fields.</p></div><div class="section" title="Deleting the default new Visualforce markup content"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec286"/>Deleting the default new Visualforce markup content</h3></div></div></div><p>Delete the existing Visualforce page text (lines 2 to 5 in the following screenshot) and leave just the starting and ending tags,<code class="literal"> &lt;apex:page&gt; and &lt;/apex:page&gt;</code>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_027.jpg" alt="Deleting the default new Visualforce markup content"/></div><p>
</p></div><div class="section" title="Changing the Visualforce Controller to specify an Account Standard Controller"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec287"/>Changing the Visualforce Controller to specify an Account Standard Controller</h3></div></div></div><p>We also need to change the Visualforce page controller so that we can read the value of the fields stored on the Account record. Controllers will be looked at in more detail later on in this chapter, but for the moment we will change the opening tag <code class="literal">&lt;apex:page&gt;</code> and add the  <code class="literal">standard Controller</code> attribute, which allows the call to the <span class="strong"><strong>Account</strong></span> record, as shown using the code <code class="literal">&lt;apex:page standard Controller="account"&gt;</code>:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_028.jpg" alt="Changing the Visualforce Controller to specify an Account Standard Controller"/></div><p>
</p><p>Copy and paste the Google Map code and add Salesforce-specific merge fields.</p><p>We will copy and paste the following code, which contains Salesforce merge fields, to render a Google Map on our account records:</p><pre class="programlisting">    &lt;script type="text/javascript" src="https://maps.google.com &#13;
    /maps/api/js?sensor=false"&gt;&lt;/script&gt; &#13;
    &lt;script type="text/javascript"&gt; &#13;
    function initialize() &#13;
    { &#13;
      var map; &#13;
      var mapOptions = &#13;
      { &#13;
        zoom: 13, &#13;
        mapTypeId: google.maps.MapTypeId.ROADMAP, &#13;
        mapTypeControl: false &#13;
      } &#13;
      var mapMarker; &#13;
      var geocoder = new google.maps.Geocoder(); &#13;
      var address =  &#13;
       "{!SUBSTITUTE(JSENCODE(Account.BillingStreet),'\r\n',' &#13;
       ')}, " + "{!Account.BillingCity}, " + &#13;
       "{!Account.BillingPostalCode}, " + &#13;
       "{!Account.BillingCountry}";geocoder.geocode( {address: &#13;
       address}, function(results, status) &#13;
       { if(status ==&#13;
         google.maps.GeocoderStatus.OK &amp;&amp; results.length) &#13;
         { if(status !=&#13;
         google.maps.GeocoderStatus.ZERO_RESULTS)          &#13;
           { &#13;
              map = new  &#13;
              google.maps.Map(document.getElementById("map"), &#13;
              mapOptions); &#13;
              map.setCenter(results[0].geometry.location); &#13;
              mapMarker = new google.maps.Marker({ &#13;
                position: results[0].geometry.location, &#13;
                map: map, &#13;
                title: "{!Account.Name} " + address &#13;
              }); &#13;
            } &#13;
          } else {      &#13;
            document.getElementById("map").innerHTML = "Unable to find or display a map&#13;
            for {!Account.Name}'s billing address : " + address; &#13;
          } &#13;
       }); &#13;
     } &#13;
&lt;/script&gt; &#13;
  &lt;div id="map" style="width:100%;height:300px"&gt;&lt;/div&gt; &#13;
&lt;script&gt; &#13;
  initialize(); &#13;
&lt;/script&gt; &#13;
</pre><p>We use Salesforce merge fields for the <span class="strong"><strong>Account</strong></span> record to pass the <span class="strong"><strong>Billing Address</strong></span> data to the Google map API, as shown in the following snippet:</p><pre class="programlisting">var address = "{!SUBSTITUTE(JSENCODE(Account.BillingStreet),'\r\n',' ')}, " + "{!Account.BillingCity}, " + "{!Account.BillingPostalCode}, " + "{!Account.BillingCountry}"; &#13;
</pre><p>The final code will appear within the Visualforce page, as in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_029.jpg" alt="Changing the Visualforce Controller to specify an Account Standard Controller"/></div><p>
</p><p>When saving the Visualforce page, the page is rendered immediately. However, at this point, there is no billing address data that can be passed to the Google Map widget (this will be rendered properly after we have added the Visualforce page to the Account Page Layout), and therefore an error will initially be presented, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_030.jpg" alt="Changing the Visualforce Controller to specify an Account Standard Controller"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note321"/>Note</h3><p>Notice how with the use of the <code class="literal">&lt;apex:page standardController="account"&gt;</code> tag, the <span class="strong"><strong>Accounts</strong></span> tab is now automatically highlighted.</p></div></div></div><div class="section" title="Adding the Visualforce page to the Account page layout"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec288"/>Adding the Visualforce page to the Account page layout</h3></div></div></div><p>Now that we have completed and saved the Visualforce page, we can add the <span class="strong"><strong>Google Map</strong></span> page to the Account page layout. To add Visualforce pages to Accounts, navigate to <span class="strong"><strong>Setup |</strong></span>
<span class="strong"><strong>Customize</strong></span> | <span class="strong"><strong>Accounts</strong></span> | <span class="strong"><strong>Page Layouts</strong></span>. Now select the appropriate page layout. Here, we are going to add it to the page layout called Account Layout by carrying out the steps discussed in the following section.</p></div><div class="section" title="Adding a new section to the Account page layout"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec289"/>Adding a new section to the Account page layout</h3></div></div></div><p>The new section has been given the title <span class="strong"><strong>Google Map</strong></span> and has been set to <span class="strong"><strong>1-Column</strong></span> width and positioned by dragging and dropping below the <span class="strong"><strong>Account System and Description Information</strong></span> section, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_031.jpg" alt="Adding a new section to the Account page layout"/></div><p>
</p></div><div class="section" title="Adding the Visualforce page to the new page layout section"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec290"/>Adding the Visualforce page to the new page layout section</h3></div></div></div><p>Now drag and drop the <span class="strong"><strong>Google Map Visualforce</strong></span> page to the <span class="strong"><strong>Google Map</strong></span> section on the page layout, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_032.jpg" alt="Adding the Visualforce page to the new page layout section"/></div><p>
</p><p>Now click on <span class="strong"><strong>Save</strong></span>; we are ready to test by navigating to an account page.</p></div><div class="section" title="Running the completed Visualforce page"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec291"/>Running the completed Visualforce page</h3></div></div></div><p>Navigate to the <span class="strong"><strong>Account</strong></span> tab and select an existing account to verify that the mashup is working as expected.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note322"/>Note</h3><p>You will need to ensure a Billing Address is completed for the account record. <span class="strong"><strong>The Billing Address</strong></span> composite field is a standard <span class="strong"><strong>Account</strong></span> field in Salesforce CRM.</p></div></div><p>Here we have an existing account for Salesforce.com with the <span class="strong"><strong>Billing Address</strong></span> populated and which displays a <span class="strong"><strong>Google Map</strong></span> when the account detail page is loaded, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_033.jpg" alt="Running the completed Visualforce page"/></div><p>
</p><p>
<span class="emphasis"><em>How do I suppress browser security warnings in Internet Explorer?</em></span>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip323"/>Tip</h3><p>By default, Internet Explorer displays the following security warning message when a page contains a mixture of secure (HTTPS) and nonsecure (HTTP) content: <span class="strong"><strong>This page contains both secure and nonsecure items. Do you want to display the nonsecure items?</strong></span> When you create a mashup with a nonsecure URL, users may see this warning message depending on their browser security settings. To suppress this warning in Internet Explorer, follow these steps: from the Internet Explorer tools menu, select <span class="strong"><strong>Internet Options</strong></span>, click on the <span class="strong"><strong>Security</strong></span> tab, click on the <span class="strong"><strong>Custom Level</strong></span> button and, finally, in the miscellaneous section, set <span class="strong"><strong>Display mixed content</strong></span> to <span class="strong"><strong>Enable</strong></span>, as shown in the following screenshot:</p></div></div><p>
</p><div class="mediaobject"><img src="graphics/image_09_034-1.jpg" alt="Running the completed Visualforce page"/></div><p>
</p></div></div><div class="section" title="Visualforce page controllers"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec244"/>Visualforce page controllers</h2></div></div></div><p>As described earlier in this chapter, there are four types of controllers that can be used to control the functionality behind a Visualforce page.</p><div class="section" title="Standard controllers"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec292"/>Standard controllers</h3></div></div></div><p>A standard controller provides access to standard Salesforce CRM behavior and, as shown in our example client-side mashup, can be specified using the following tag and attribute as the first line in the Visualforce page:</p><pre class="programlisting">&lt;apex:page standardController="Account"&gt; &#13;
</pre><p>Standard controllers are available for standard objects, such as Account, Contact, Opportunity, and so on, as well as custom objects, and they provide access to standard Salesforce CRM data operations and behavior for actions such as save, edit, and delete.</p></div><div class="section" title="Custom controllers"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec293"/>Custom controllers</h3></div></div></div><p>Custom controllers are used for fully customized behavior and are implemented using the Visualforce tag and attribute as follows:</p><pre class="programlisting">&lt;apex:page controller="CustomAccount"&gt; &#13;
</pre></div><div class="section" title="Controller extensions"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec294"/>Controller extensions</h3></div></div></div><p>Controller extensions are used to extend the behavior of standard controllers and allow the addition of customized functionality. Controller extensions are provided using the Visualforce tag and attribute as follows:</p><pre class="programlisting">&lt;apex:page standardController="Account"&#13;
extensions="CustomAccountExtension"&gt; &#13;
</pre></div></div><div class="section" title="Standard list controllers"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec245"/>Standard list controllers</h2></div></div></div><p>Salesforce record pages allow users to filter the records displayed on the page using list views (covered in 
<a class="link" href="ch03.html" title="Chapter 3. Configuring Objects and Apps">Chapter 3</a>, 
<span class="emphasis"><em>Configuring Objects and Apps</em></span>). For example, on the accounts home page, users can choose to view a list of only the accounts they own by selecting <span class="strong"><strong>My Accounts</strong></span> from the list view drop-down menu.</p><p>Standard list controllers provide the same list view picklist and are implemented using the following tag and attribute as the first line in the Visualforce page:</p><pre class="programlisting">&lt;apex:page standardController="Account" recordSetVar="accounts"&gt; &#13;
</pre></div><div class="section" title="Apex code"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec246"/>Apex code</h2></div></div></div><p>The Apex code language in Salesforce CRM is based on Java, which is one of the most popular programming languages for Internet and web-based applications, and is executed on the Salesforce platform servers.</p><p>Although based on Java, the Apex code and the Salesforce CRM platform is not a general-purpose computing platform that can be used to run any type of program that developers may choose to run. Instead, Apex is kept intentionally controlled and limited and is, therefore, designed with the needs of the business and platform in mind.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note324"/>Note</h3><p>Apex code in Salesforce is not intended to solve every programming problem and is instead concerned principally with helping developers gain advantages in development time, code conciseness, and reduction in maintenance costs.</p></div></div><p>Apex is used in Salesforce CRM to develop the code within Custom controllers and Controller extensions, as well as Apex triggers, which we will look at shortly.</p><p>Apex is specifically designed for building business applications to manage data and services, and the language provides a highly productive approach to creating applications and business logic. Developers can focus on the functionality required to solve the business problem and domain and need not be concerned with building the infrastructures, such as database connection, error handling, and so on, which is instead managed by the platform.</p><p>It should be noted that since the Salesforce CRM platform is a multi-tenant platform, there are certain limits as to what and how much processing can be performed within certain operations. Such limits are known, such as <span class="strong"><strong>Governor Limits</strong></span>, and there are some restrictions and requirements - for example, Apex code must be developed in a developer or sandbox organization and must have test methods to verify each line of code. Only then is it allowed to be deployed to production.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note325"/>Note</h3><p>For successful deployment to production, Apex code must have associated unit test methods that provide at least 75% successful code coverage.</p></div></div><div class="section" title="Apex triggers"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec295"/>Apex triggers</h3></div></div></div><p>Apex triggers are blocks of Apex code that are executed before and/or after any record action such as create, update, or delete in the Salesforce CRM application.</p><p>Triggers are very powerful and can include complex code for controlling your process. They are used for complex business logic automation and where such functionality is too complicated to be implemented using validation rules or workflow rules, such as field updates. The development of Apex triggers usually requires the resource of a software developer, as they have certain restrictions and implications for the overall system.</p><p>When using multiple triggers, and alongside any existing workflow field updates, there needs to be a thorough understanding of any dependencies so as to avoid any ripple effect when records are created or updated. As trigger code can make changes to the record being updated within its own operation, any likely recursion effect needs to be understood and avoided.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note326"/>Note</h3><p>Apex triggers offer many benefits to an organization, but they also introduce some risks as there needs to be awareness of certain patterns and limits (bulkifying triggers, governors, and so on.) imposed by the underlying platform. It is particularly important to understand the timing, order of execution, and dependencies of the various rules and triggers within an organization.</p></div></div></div></div></div>
<div class="section" title="Change management overview"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec108"/>Change management overview</h1></div></div></div><p>As outlined in the section on installing apps from <span class="strong"><strong>AppExchange Marketplace</strong></span>, you should properly evaluate the functionality and results of deploying an app within your Salesforce CRM organization. This concept is part of a wider concern, which addresses the way changes are applied to the Salesforce CRM application.</p><p>With the use of Salesforce sandboxes, you can properly evaluate and perform due diligence for new Salesforce functionality before deciding to roll it out to your users in the production system. In the case of an AppExchange app, if the app proves to be unsuccessful, then it need not be uninstalled.</p><div class="section" title="Salesforce sandboxes"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec247"/>Salesforce sandboxes</h2></div></div></div><p>Sandboxes are separate Salesforce CRM environments that are isolated from your Salesforce production organization, so actions that you carry out in your sandboxes do not affect your Salesforce production environment, and vice versa.</p><p>To view and manage your existing sandboxes or create new ones in Salesforce CRM, navigate to <span class="strong"><strong>Setup | Sandboxes.</strong></span>
</p><p>You can view the list of any existing sandboxes that have been created, and clicking on a sandbox name allows you to view details about the sandbox, such as when it was created.</p><p>In the Sandbox List, you can see the <span class="strong"><strong>Name</strong></span>, <span class="strong"><strong>Type</strong></span>, <span class="strong"><strong>Status</strong></span>, <span class="strong"><strong>Location</strong></span>, <span class="strong"><strong>Current Org Id</strong></span>, <span class="strong"><strong>Completed On</strong></span>, and <span class="strong"><strong>Description</strong></span> Sandboxes where there are the following types: <span class="strong"><strong>Developer</strong></span>, <span class="strong"><strong>Developer Pro</strong></span>, <span class="strong"><strong>Partial Data</strong></span>, and <span class="strong"><strong>Full,</strong></span> as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_035.jpg" alt="Salesforce sandboxes"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note327"/>Note</h3><p>Sandbox availability is dependent on your edition of Salesforce CRM. Some types are provided as standard while others are available for additional cost.</p></div></div><div class="section" title="Developer sandbox"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec296"/>Developer sandbox</h3></div></div></div><p>A Developer sandbox is intended to be used for coding and testing and contains a copy of all the configuration setup from your production system. It does not, however, contain any of the data. There is a maximum of 200 MB of data storage and 200 MB of file storage that can be created. The Developer sandbox can be refreshed once per day.</p></div><div class="section" title="Developer Pro sandbox"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec297"/>Developer Pro sandbox</h3></div></div></div><p>A Developer Pro sandbox is intended to be used for coding, testing, and user training and contains a copy of all the configuration setup from your production system. It does not, however, contain any of the data. There is a maximum of 1 GB of data storage and 1 GB of file storage that can be created. The <span class="strong"><strong>Developer Pro</strong></span> sandbox can be refreshed once per day.</p></div><div class="section" title="Partial Copy sandbox"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec298"/>Partial Copy sandbox</h3></div></div></div><p>A Partial Copy sandbox is intended to be used as a testing environment and contains a copy of your production organization's configuration setup. Unlike the <span class="strong"><strong>Developer</strong></span> and <span class="strong"><strong>Developer Pro</strong></span> sandboxes, a Partial Copy sandbox permits a sample of your production organization's data that you define by using a sandbox template.</p><p>To create a Partial Copy sandbox, you must apply a sandbox template at creation time, although there is a maximum of 5 GB of data storage and 5 GB of file storage that can be stored. For each selected object in the sandbox template, up to 10,000 records are brought over from the production environment. For example, if you have a template that includes only accounts to create a Partial Copy sandbox, up to 10,000 Account records will be copied into the new sandbox - no other records. Unlike the Developer and Developer Pro sandboxes, the Partial Copy sandbox can only be refreshed once every five days.</p></div><div class="section" title="Full Copy sandbox"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec299"/>Full Copy sandbox</h3></div></div></div><p>A <span class="strong"><strong>Full Copy sandbox</strong></span> contains a copy of your entire production setup, including all the data. Because the data is also copied over during a refresh, there is a limit of refreshing the Full Copy sandbox to once every 29 days. Full Copy sandboxes have the same storage limit as the production organization.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note328"/>Note</h3><p>The <span class="strong"><strong>Full Copy</strong></span>
<span class="strong"><strong> sandbox</strong></span> is generally used for <span class="strong"><strong>User Acceptance Testing</strong></span> (<span class="strong"><strong>UAT</strong></span>).</p></div></div><p>Clicking on the <span class="strong"><strong>New Sandbox</strong></span> button allows you to create a new sandbox.</p><p>The <span class="strong"><strong>Sandbox Templates </strong></span>tab is used with <span class="strong"><strong>Partial Copy</strong></span> sandboxes and determines the types of record and data that is to be copied over from the production environment.</p><p>The <span class="strong"><strong>Sandbox History</strong></span> tab allows you to see the sandbox refresh history, showing when sandboxes were created and who created them.</p><p>The <span class="strong"><strong>Refresh</strong></span> link allows you to replace an existing sandbox with a new copy. The existing copy of the sandbox remains available while the refresh completes and until you activate the new copy.</p><p>When creating or refreshing a <span class="strong"><strong>Full</strong></span> sandbox, you can reduce the time taken for the refresh by reducing the amount of data that is copied. The following options allow you to reduce the amount of data that is copied:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Case History</strong></span> option allows you to select the number of days of case history from your production organization to copy to your sandbox. You can copy from 0 to 180 days in 30-day increments. The default value is 30 days.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Opportunity History</strong></span> option allows you to select the number of days of opportunity history from your production organization to copy to your sandbox. Here, you can copy from 0 to 180 days in 30-day increments. The default value is 0 days.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note329"/>Note</h3><p>By default, <span class="strong"><strong>Chatter</strong></span> data is not copied to your sandbox. <span class="strong"><strong>Chatter</strong></span> data includes feeds, messages, and discovery topics. Select the <span class="strong"><strong>Copy Chatter Data</strong></span> checkbox if you wish to copy it. Salesforce does not recommend increasing the default selections as too much data can cause delays in the time it takes to copy or refresh the sandbox. The <span class="strong"><strong>Refresh</strong></span> option is only shown for each sandbox that is available for refreshing.</p></div></div></li><li class="listitem" style="list-style-type: disc">An <span class="strong"><strong>Activate</strong></span> link allows you to activate a refreshed sandbox, which must be done before you can start using the new sandbox.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note330"/>Note</h3><p>The <span class="strong"><strong>Activate</strong></span> option is only displayed for refreshed sandboxes that have yet to be activated.</p></div></div><p>Activating a refreshed sandbox replaces the existing sandbox with the refreshed version and permanently deletes the old version and any data in it.</p></li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Login</strong></span> option allows you to log in to a sandbox.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note331"/>Note</h3><p>The <span class="strong"><strong>Login</strong></span> button is only displayed for system administrators and may not always be available. Users can log in to an active sandbox by using the following URL: 
<a class="ulink" href="https://test.salesforce.com">https://test.salesforce.com</a>  and entering a modified username, which is <code class="literal">&lt;username&gt;</code> from production, with a suffix for the name of the sandbox. So, for a sandbox called <span class="strong"><strong>Test</strong></span>, it would be <code class="literal">martin.brown@widgetsXYZ.com.test</code>.</p></div></div></li></ul></div><p>Sandboxes that no one has logged in to for 180 days are deleted. Users who have created or most recently refreshed any sandbox within your organization will be notified that the sandbox is scheduled for deletion. These users will receive at least three e-mail notifications over 30 days prior to the deletion.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note332"/>Note</h3><p>Salesforce recommends keeping a sandbox active by logging in periodically to avoid e-mail notifications.</p></div></div><p>By using a sandbox, you can ensure that changes are deployed in a structured and controlled manner and any change can be undone easily. This is known as change management.</p><p>Effective change management reduces the risk when introducing new areas of functionality and when making changes to existing functionality. It obviously depends on the amount and complexity of the planned change, but for a risk-free and successful implementation of changes in Salesforce CRM, there needs to be a change management strategy, which typically covers the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Changing requests.</li><li class="listitem">Configuring, developing, and deploying.</li></ol></div></div></div><div class="section" title="Change requests"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec248"/>Change requests</h2></div></div></div><p>When working with a change management process in an organization, change requests are typically gathered from ideas and requests from management and application users.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note333"/>Note</h3><p>
<span class="strong"><strong>Case management for change requests</strong></span></p><p>One method of gathering and storing change requests is by utilizing the case management features within Salesforce CRM itself. This feature can be set up to enable users to enter their required changes directly. You can even consider building an approval process so that the change is approved by the user's manager before being considered in any release cycle.</p></div></div><p>However, before the change requests are captured, you need a process to analyze and prioritize the lists of requests and assess the scope of the work required. It can be useful to classify the changes that are requested for inclusion in either an immediate, minor, or a major release.</p><div class="section" title="Immediate release"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec300"/>Immediate release</h3></div></div></div><p>Change items that are suitable for immediate release are very small changes that can be quickly implemented; they carry no risk and can be made directly into the production environment. Changes such as new dashboards or reports, or modifications to existing dashboards and reports, and field positioning on page layouts and related lists are considered small changes. This category of release also includes simple data changes, such as data imports and exports.</p><p>Changes can be configured, tested, and deployed with minimal impact, and therefore these changes do not usually need to go through the change control process.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note334"/>Note</h3><p>It is worth considering, however, how the changes are applied in any other sandbox such as a developer, user acceptance, or test environment to ensure that all the sandbox environments are kept in sync.</p></div></div></div><div class="section" title="Minor release"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec301"/>Minor release</h3></div></div></div><p>Minor releases are for larger changes that can be grouped and scheduled for change perhaps every 30 or 60 days. The types of changes that fall into this category include new fields, new page layouts, new custom objects, and so on, which are more complicated than the immediate release change items.</p><p>Minor release change items are medium level changes that can be implemented with minor impact to the production environment and typically require less than a day of additional training for users and overall less than a week of customization or code changes.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note335"/>Note</h3><p>It is worth considering, however, how the changes are applied in any other sandbox such as a <span class="strong"><strong>Developer</strong></span>, <span class="strong"><strong>User acceptance</strong></span>, or <span class="strong"><strong>Test environment</strong></span> to ensure that all the sandbox environments are kept in sync.</p></div></div></div><div class="section" title="Major release"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec302"/>Major release</h3></div></div></div><p>Major releases are large changes that will carry risk and have a major impact to the business or environment. These changes are the ones that require modification to the user interface, to the way data is updated, data migrations, and any integration projects. These types of changes include new or modified role hierarchies, profiles, page layouts, record types, sales and support processes, workflow and approvals, and custom code. These changes can be introduced with the introduction of new AppExchange apps, process-impacting configuration changes, data migrations, and integration</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note336"/>Note</h3><p>Major release change items carry a high level of risk and are obviously more complicated than a minor release change. These changes may require additional time for training users, and in general require more than a week of customization or code changes.</p></div></div></div></div><div class="section" title="Configuring, developing, and deploying"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec249"/>Configuring, developing, and deploying</h2></div></div></div><p>Typical compliance requirements for change management are that changes are appropriately tested and validated and that only approved changes are deployed into production.</p><p>Configuration, development, and testing should always typically be carried out using a sandbox environment, and a record should be maintained to record the successful testing, validation, and approval of any changes prior to deployment or production. Depending upon the scope and scale of the change request, as described previously, you may need to consider using a different environment for development and testing.</p><p>A complex change often sees the need for a developer sandbox and separate testing sandbox. When the changes are finished in the developer sandbox, they are migrated to the testing sandbox, and only when approved are they deployed into the production environment.</p><p>Only after appropriate review and agreement by the approval authority can the changes ever be deployed into the production environment.</p></div></div>
<div class="section" title="User adoption"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec109"/>User adoption</h1></div></div></div><p>In 
<a class="link" href="ch08.html" title="Chapter 8. Introducing Sales Cloud, Service Cloud, and the Collaborative Features of Salesforce CRM">Chapter 8</a>, 
<span class="emphasis"><em>Introducing Sales Cloud, Service Cloud, and Collaborative Features of Salesforce CRM</em></span>, we looked at the core functionality that Salesforce CRM provides and also at how the complete sales process, from campaign and lead capture right through to customer service and support, can be captured. Here, we looked in detail at how Salesforce provides the facilities to obtain a full 360-degree view of customer's past, present, and future relationships within our organization.</p><p>We looked at how this information enables marketing to measure the return on investment for marketing campaigns, sales to optimize the sales pipeline and sell more to each customer, support to track customer support incidents, and requests to ensure that each one is resolved appropriately and in a timely fashion.</p><p>Having this process in place is one thing, but to ensure that the information is captured to support the process is another issue altogether. After all, processes and technologies are only as good as the people who use them. So, it is vital that users are regularly logging in, creating, and updating information into Salesforce CRM.</p><p>CRM technology, therefore, must be easy to use, accessible, and scalable to ensure that the efforts of using the system provide significant enhancements in productivity, efficiency, and information accessibility. Once the business goals have been established and can be measured, organizations generally need to address methods of ensuring or increasing user adoption. Here, you can cultivate active product advocates or evangelists from within your business to support certain initiatives for any relevant areas of the business.</p><p>A significant factor for successful adoption is to give users incentives to use the system by providing them with functionality that improves the way they work and offers valuable information and tools not available elsewhere within the organization.</p><p>Another important consideration is to encourage feedback from the user community. By encouraging feedback and instilling a sense of collaboration, a collective ownership for Salesforce CRM can be obtained that will instill trust. Responding to good suggestions, customizing, and communicating enhancements to the application can lead to better acceptance of changes, and makes people more likely to want to spend their time working with the application.</p><p>In spite of the positives mentioned, user adoption cannot be assumed or taken for granted, and your company might need to consider reinforcing adoption with rules as well as rewards.</p><p>User adoption seeks to ensure that the business communities, as described previously, are effectively using Salesforce CRM and that the features that have been implemented are being properly utilized and continue to successfully address the business challenges.</p><p>To enable the monitoring of user adoption, there needs to be effective reports and dashboards to capture adoption metrics, where the following areas can be considered when building user adoption metrics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Usage</li><li class="listitem" style="list-style-type: disc">Data quality</li><li class="listitem" style="list-style-type: disc">Business performance</li></ul></div><div class="section" title="Usage"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec250"/>Usage</h2></div></div></div><p>The first key requirement for ensuring that Salesforce CRM is being appropriately used is by measuring the number and frequency of users logging in to the system. You also need to ensure that users are actively and consistently updating data and creating new <span class="strong"><strong>Leads</strong></span>, <span class="strong"><strong>Contacts</strong></span>, <span class="strong"><strong>Opportunities</strong></span>, and/or <span class="strong"><strong>Cases</strong></span> depending on their roles in the organization.</p><p>Having a well implemented business application should help to make business processes simple and hide complexity; this all helps to increase user adoption. However, making a computer application appear simple often requires a considered approach and sometimes takes far more effort than leaving it in its natural complex state. Removing obstacles and unnecessary features takes time and effort, but it is time and effort well spent and will yield results and hopefully result in higher adoption rates.</p><div class="section" title="Simplicity"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec303"/>Simplicity</h3></div></div></div><p>As a platform, Salesforce CRM has proven to be highly successful since its conception a decade ago, and the number of organizations and subscriptions to the service grows year on year. Much of this success can be attributed to the simplicity, ease of use, and focus on user productivity that the platform affords.</p><p>While you may feel justified in introducing new mandatory fields and enforcing data capture requirements into the application, this can sometimes make the system less user-friendly. Sometimes, applications that offer the simplest solution for a given problem are more likely to be rewarded with acceptance and adoption by your Salesforce community.</p></div><div class="section" title="Connectivity"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec304"/>Connectivity</h3></div></div></div><p>Enabling users to connect information from other tools, such as Microsoft Outlook, and fully integrate Salesforce CRM with other such business systems provides a mechanism for accessing all the information users need.</p></div><div class="section" title="Salesforce Mobile"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec305"/>Salesforce Mobile</h3></div></div></div><p>In the past, mobile devices that were capable of accessing software applications were very expensive. Often these devices were regarded as a <span class="emphasis"><em>nice to have</em></span> accessory by management and seen as a company perk by field teams. Today, mobile devices are far more prevalent within the business environment and organizations are increasingly realizing the benefits of using mobile phones and devices to access business applications.</p><p>Salesforce.com provides several mobile apps and solutions to keep your users connected and productive when using their mobile devices. These solutions are covered in detail in the next chapter, 
<a class="link" href="ch10.html" title="Chapter 10. Administrating the Mobile Features of Salesforce CRM">Chapter 10</a>, 
<span class="emphasis"><em>Administrating the Mobile Features of Salesforce CRM.</em></span>
</p></div><div class="section" title="Communications"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec306"/>Communications</h3></div></div></div><p>Users are far more likely to adopt Salesforce CRM when they know that their peers and colleagues are achieving results from its use. By communicating both the business and personal results, for example, an increase in company sales and the resulting sales commissions paid to the sales team, you can encourage others to adopt the system.</p></div></div><div class="section" title="Data quality"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec251"/>Data quality</h2></div></div></div><p>Data quality is a valuable metric for measuring adoption. Although outlined previously, it is advisable not to over complicate the entering of information with needless validation; it is important that any critical fields are completed.</p><p>When certain fields are consistently filled out, user acceptance will increase as it provides good data integrity and reliability that translates into higher user confidence and higher adoption.</p></div><div class="section" title="Business performance"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec252"/>Business performance</h2></div></div></div><p>Usage should also reflect business performance and compliance metrics that are used to ensure that users are not just using the application, but are using it in a way that enhances business effectiveness. Here, metrics can be built that will uncover patterns and trends that track performance levels, and can then identify areas that need improvement.</p><p>This has been a quick overview of areas that can be used to generate metrics that you can track and there is an enormous quantity of metrics that can be generated.</p><p>There is a balance, however, in getting accurate views without overcomplicating and spawning too many metrics. Here, it is often best to create the minimum number of metrics that can adequately capture and track the success of the business performance objectives.</p><p>Certain performance indicators can be established to identify the business sales revenues, which are listed as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Compare the current fiscal year against last year's sales by month, say, to measure cyclical variances.</li><li class="listitem" style="list-style-type: disc">Compare sales from existing customers against new customers to measure what customer type revenue is coming from and enhance CRM activities accordingly.</li><li class="listitem" style="list-style-type: disc">Compare won and lost sales ratios to measure the effectiveness of deal closure, see why deals are getting lost, and learn from the reasons.</li><li class="listitem" style="list-style-type: disc">Measure the sales pipeline by sales stage to identify where new opportunities are appearing.</li><li class="listitem" style="list-style-type: disc">Measure key opportunities in the sales pipeline to identify the current key opportunities to ensure they get the right attention.</li><li class="listitem" style="list-style-type: disc">Measure closed sales actuals against quota. Here, you can introduce a closed sales leaderboard to identify who your top deal-closers are. This can sometimes be seen as a way of shaming bad performers, but sales management can use this information positively to get the top performers to share knowledge and best practices to help the organization.</li></ul></div><p>For marketing-specific metrics, the following examples can be performed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Measure campaigns by <span class="strong"><strong>Return On Investment</strong></span> (<span class="strong"><strong>ROI</strong></span>), Actual ROI, by campaign type, and average opportunity amount per campaign</li><li class="listitem" style="list-style-type: disc">Measure lead conversion rates</li></ul></div><p>There are many dashboards that you can install from AppExchange that give metrics for how Salesforce is being used. The following is called <span class="strong"><strong>Salesforce Adoption Dashboards</strong></span>, which is an example from <a class="ulink" href="http://labs.force.com">labs.force.com</a>:
</p><p>
</p><div class="mediaobject"><img src="graphics/image_09_036.jpg" alt="Business performance"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note337"/>Note</h3><p>The <span class="strong"><strong>Salesforce Adoption Dashboards</strong></span> app from <span class="strong"><strong>Salesforce.com</strong></span> is available from the<span class="strong"><strong> AppExchange Marketplace</strong></span> directly through the following URL: <a class="ulink" href="http://appexchange.salesforce.com/listingDetail?listingId=a0N30000004gHhLEAU">http://appexchange.salesforce.com/listingDetail?listingId=a0N30000004gHhLEAU</a>.
</p></div></div></div></div>
<div class="section" title="Questions to test your knowledge"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec110"/>Questions to test your knowledge</h1></div></div></div><p>You are now presented with questions about the Salesforce AppExchange, which has been covered in this chapter. The answers can be found at the end of this chapter.</p><div class="section" title="Questions"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec253"/>Questions</h2></div></div></div><p>We present two questions to verify your understanding of the Salesforce <span class="strong"><strong>AppExchange Marketplace</strong></span>.</p><div class="section" title="Question 1 - Salesforce AppExchange Marketplace"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec307"/>Question 1 - Salesforce AppExchange Marketplace</h3></div></div></div><p>What is the purpose of the Salesforce <span class="strong"><strong>AppExchange Marketplace</strong></span>? (Select all that apply):</p><p>
<span class="strong"><strong>a</strong></span>) Administrators can download and customize pre-built reports and dashboards.</p><p>
<span class="strong"><strong>b</strong></span>) Sales users can install add-ins to synchronize the Contacts and Calendar entries in their desktop e-mail apps with Salesforce.</p><p>
<span class="strong"><strong>c</strong></span>) Partners can share and link opportunities to collaborate on sales deals.</p><p>
<span class="strong"><strong>d</strong></span>) Salesforce customers can share and install apps published by third-party developers and system integrators.</p></div><div class="section" title="Question 2 - Salesforce AppExchange Package Types"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec308"/>Question 2 - Salesforce AppExchange Package Types</h3></div></div></div><p>What are the package types found in the Salesforce <span class="strong"><strong>AppExchange Marketplace</strong></span>? (Select all that apply):</p><p>
<span class="strong"><strong>a</strong></span>) Mass Delete.</p><p>
<span class="strong"><strong>b</strong></span>) Managed.</p><p>
<span class="strong"><strong>c</strong></span>) Sales.</p><p>
<span class="strong"><strong>d</strong></span>) Unmanaged.</p><p>
<span class="strong"><strong>e</strong></span>) Marketing.</p></div></div><div class="section" title="Answers"><div class="titlepage"><div><div><h2 class="title"><a id="ch09lvl2sec254"/>Answers</h2></div></div></div><p>Here are the answers to the two questions about the Salesforce <span class="strong"><strong>AppExchange Marketplace</strong></span>.</p><div class="section" title="Answer 1 - Salesforce AppExchange Marketplace"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec309"/>Answer 1 - Salesforce AppExchange Marketplace</h3></div></div></div><p>The answer is <span class="strong"><strong>a</strong></span>) Administrators can download and customize pre-built reports and dashboards and <span class="strong"><strong>d</strong></span>) Salesforce customers can share and install apps published by third-party developers and system integrators.</p></div><div class="section" title="Answer 2 - Salesforce Appexchange package types"><div class="titlepage"><div><div><h3 class="title"><a id="ch09lvl3sec310"/>Answer 2 - Salesforce Appexchange package types</h3></div></div></div><p>The answer is <span class="strong"><strong>b</strong></span>) Managed and <span class="strong"><strong>d</strong></span>) Unmanaged. Managed Package Types are packages that may continue to be managed by the publishing developers and the package contents are not visible or editable. Unmanaged packages are not managed by the publishing developers and the package contents are visible and editable.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch09lvl1sec111"/>Summary</h1></div></div></div><p>In this chapter, we looked at the core features of Salesforce CRM that can be enhanced by adding additional functionality with external applications from the <span class="strong"><strong>AppExchange Marketplace</strong></span>.</p><p>We discovered how easy it is to build a mashup in Salesforce CRM using the Visualforce technology and looked at how, with the use of Visualforce pages, we can extend the standard page functionality of the Salesforce CRM.</p><p>We looked at the concept of web mashups from the perspective of both the client-side and server-side aspects of web technologies. We also described the difference between presentation mashups, which are rendered in an Internet browser, and services that require more complex features, such as web services.</p><p>We were introduced to the ways in which Visualforce pages can be controlled, where we looked at the use of Apex code, which can extend the functionality within the Salesforce CRM platform. Apex triggers were briefly covered, where we considered the need for careful implementation in order to observe the order of execution for workflow rules and triggers to ensure that no unwanted ripple effects were introduced.</p><p>We looked at the importance for planning and scheduling the release of changes into the Salesforce application and provided some best practices relating to change management.</p><p>We also looked at how to improve user adoption by giving users incentives to use the system by providing them with functionality that improves the way they work and offering valuable information and tools not available elsewhere within the organization.</p><p>Finally, we posed questions to help clarify some of the key features of the Salesforce <span class="strong"><strong>AppExchange Marketplace</strong></span>.</p><p>In the next chapter, we will look at the administration of mobile features within Salesforce CRM.</p></div></body></html>