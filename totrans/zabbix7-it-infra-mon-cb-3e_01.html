<html><head></head><body>
<div id="_idContainer043" class="calibre2">
<h1 class="chapter-number" id="_idParaDest-22"><a id="_idTextAnchor021" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1.1">1</span></h1>
<h1 id="_idParaDest-23" class="calibre5"><a id="_idTextAnchor022" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.2.1">Installing Zabbix and Getting Started Using the Frontend</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.3.1">For Zabbix 7, the developers have really outdone themselves. </span><span class="kobospan" id="kobo.3.2">In this </span><strong class="bold"><span class="kobospan" id="kobo.4.1">Long Term Support</span></strong><span class="kobospan" id="kobo.5.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.6.1">LTS</span></strong><span class="kobospan" id="kobo.7.1">) release, we </span><a id="_idIndexMarker001" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.8.1">will find far more </span><strong class="bold"><span class="kobospan" id="kobo.9.1">quality-of-life</span></strong><span class="kobospan" id="kobo.10.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.11.1">QoL</span></strong><span class="kobospan" id="kobo.12.1">) changes </span><a id="_idIndexMarker002" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.13.1">along with some impressive new cutting-edge features. </span><span class="kobospan" id="kobo.13.2">Coming from Zabbix 6.0, you will still find a lot of improvements made in Zabbix 6.2 and 6.4 as those have, of course, been included in Zabbix 7.0 LTS. </span><span class="kobospan" id="kobo.13.3">We will detail all important changes throughout </span><span><span class="kobospan" id="kobo.14.1">the book.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.15.1">In this chapter, we will install the Zabbix server and explore the Zabbix UI to get you familiar with it. </span><span class="kobospan" id="kobo.15.2">We will go over finding your hosts, triggers, dashboards, and more to make sure you feel confident diving into the deeper material later on in this book. </span><span class="kobospan" id="kobo.15.3">The Zabbix UI has a lot of options to explore, so if you are just getting started, don’t get overwhelmed. </span><span class="kobospan" id="kobo.15.4">It’s quite structurally built, and once you get the hang of it, I am confident you will find your way without issues. </span><span class="kobospan" id="kobo.15.5">You will learn all about these subjects in the </span><span><span class="kobospan" id="kobo.16.1">following recipes:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.17.1">Installing the </span><span><span class="kobospan" id="kobo.18.1">Zabbix server</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.19.1">Setting up the </span><span><span class="kobospan" id="kobo.20.1">Zabbix frontend</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.21.1">Enabling </span><a id="_idIndexMarker003" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.22.1">Zabbix server </span><strong class="bold"><span class="kobospan" id="kobo.23.1">high </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.24.1">availability</span></strong></span><span><span class="kobospan" id="kobo.25.1"> (</span></span><span><strong class="bold"><span class="kobospan" id="kobo.26.1">HA</span></strong></span><span><span class="kobospan" id="kobo.27.1">)</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.28.1">Using the </span><span><span class="kobospan" id="kobo.29.1">Zabbix frontend</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.30.1">Navigating the </span><span><span class="kobospan" id="kobo.31.1">Zabbix fronte</span><a id="_idTextAnchor023" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor024" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.32.1">nd</span></span></li>
</ul>
<h1 id="_idParaDest-24" class="calibre5"><a id="_idTextAnchor025" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.33.1">Technical requirements</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.34.1">We’ll be starting this chapter with an empty Linux (virtual) machine. </span><span class="kobospan" id="kobo.34.2">Feel free to choose a RHEL- or Debian-based Linux distribution (we’ll be using Ubuntu in the examples). </span><span class="kobospan" id="kobo.34.3">It’s recommended to use a server distribution and not a desktop distribution of the Linux distribution you choose. </span><span class="kobospan" id="kobo.34.4">We will then set up a Zabbix server from scratch on </span><span><span class="kobospan" id="kobo.35.1">this host.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.36.1">So before jumping in, make sure you have your Linux host at the ready. </span><span class="kobospan" id="kobo.36.2">I’ll be using Rocky Linux 9 and Ubuntu 22.04 in </span><span><span class="kobospan" id="kobo.37.1">my example</span><a id="_idTextAnchor026" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor027" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.38.1">s.</span></span></p>
<h1 id="_idParaDest-25" class="calibre5"><a id="_idTextAnchor028" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.39.1">Installing the Zabbix server</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.40.1">Before doing </span><a id="_idIndexMarker004" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.41.1">anyth</span><a id="_idTextAnchor029" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.42.1">ing within Zabbix, we need to install it and get ready to start working with it. </span><span class="kobospan" id="kobo.42.2">In this recipe, we are going to discover how to install Zabbix </span><span><span class="kobospan" id="kobo.43.1">server 7</span><a id="_idTextAnchor030" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor031" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.44.1">.0.</span></span></p>
<h2 id="_idParaDest-26" class="calibre7"><a id="_idTextAnchor032" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.45.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.46.1">Before we actually install the Zabbix server, we are going to need to fulfill some prerequisites. </span><span class="kobospan" id="kobo.46.2">We will</span><a id="_idTextAnchor033" class="pcalibre calibre6 pcalibre1"/> <a id="_idIndexMarker005" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.47.1">be using </span><strong class="bold"><span class="kobospan" id="kobo.48.1">MariaDB</span></strong><span class="kobospan" id="kobo.49.1"> mostly throughout this book. </span><span class="kobospan" id="kobo.49.2">MariaDB is popular, and a lot of information is available on using it </span><span><span class="kobospan" id="kobo.50.1">with Zabbix.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.51.1">At this point, you should have a prepared Linux server in front of you running either a RHEL- or Debian-based distribution. </span><span class="kobospan" id="kobo.51.2">I’ll be installing Rocky Linux 9 and Ubuntu 22.04 on my server; let’s call them </span><strong class="source-inline"><span class="kobospan" id="kobo.52.1">lar-book-rocky</span></strong> <span><span class="kobospan" id="kobo.53.1">and </span></span><span><strong class="source-inline"><span class="kobospan" id="kobo.54.1">lar-book-ubuntu</span></strong></span><span><span class="kobospan" id="kobo.55.1">.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.56.1">When you have your server ready, we can start the </span><span><span class="kobospan" id="kobo.57.1">installation proc</span><a id="_idTextAnchor034" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor035" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.58.1">ess.</span></span></p>
<h2 id="_idParaDest-27" class="calibre7"><a id="_idTextAnchor036" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.59.1">How to do it…</span></h2>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.60.1">Let’s start by adding the Zabbix 7.0 repository to </span><span><span class="kobospan" id="kobo.61.1">our system.</span></span><p class="calibre3"><span class="kobospan" id="kobo.62.1">For RHEL-based systems, run </span><span><span class="kobospan" id="kobo.63.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.64.1">rpm -Uvh https://repo.zabbix.com/zabbix/7.0/rocky/9/x86_64/zabbix-release-7.0-2.el9.noarch.rpm</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.65.1">dnf clean all</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.66.1">For Ubuntu systems, run </span><span><span class="kobospan" id="kobo.67.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.68.1">wget https://repo.zabbix.com/zabbix/7.0/ubuntu/pool/main/z/zabbix-release/zabbix-release_7.0-1+ubuntu22.04_all.deb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.69.1">dpkg -i zabbix-release_7.0-1+ubuntu22.04_all.deb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.70.1">apt update</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.71.1">For RHEL-based </span><a id="_idIndexMarker006" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.72.1">systems, we’ll also remove the Zabbix </span><strong class="bold"><span class="kobospan" id="kobo.73.1">Extra Packages for Enterprise Linux</span></strong><span class="kobospan" id="kobo.74.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.75.1">EPEL</span></strong><span class="kobospan" id="kobo.76.1">) repository packages (</span><span><span class="kobospan" id="kobo.77.1">if installed):</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.78.1">vim /etc/yum.repos.d/epel.repo</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.79.1">Then, add the </span><span><span class="kobospan" id="kobo.80.1">following line:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.81.1">[epel]...excludepkgs=zabbix*</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.82.1">Now that </span><a id="_idIndexMarker007" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.83.1">the repository is added, let’s add the MariaDB repository on </span><span><span class="kobospan" id="kobo.84.1">our server:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.85.1">wget https://downloads.mariadb.com/MariaDB/mariadb_repo_setup</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.86.1">chmod +x mariadb_repo_setup</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.87.1">./mariadb_repo_setup</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.88.1">Then, install and </span><span><span class="kobospan" id="kobo.89.1">enable it.</span></span><p class="calibre3"><span class="kobospan" id="kobo.90.1">For RHE</span><a id="_idTextAnchor037" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.91.1">L-based systems, run </span><span><span class="kobospan" id="kobo.92.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.93.1">dnf install mariadb-server</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.94.1">systemctl enable mariadb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.95.1">systemctl start mariadb</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.96.1">For Ubuntu systems, run </span><span><span class="kobospan" id="kobo.97.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.98.1">apt install mariadb-server</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.99.1">systemctl enable mariadb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.100.1">systemctl start mariadb</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.101.1">After installing MariaDB, make sure to secure your installation by running the </span><span><span class="kobospan" id="kobo.102.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.103.1">mariadb-secure-installation</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.104.1">Make sure to answer the questions with yes (</span><strong class="source-inline1"><span class="kobospan" id="kobo.105.1">Y</span></strong><span class="kobospan" id="kobo.106.1">) and configure a root password </span><span><span class="kobospan" id="kobo.107.1">that’s secure.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.108.1">Run through </span><a id="_idIndexMarker008" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.109.1">the secure installation setup, and make sure to save your password somewhere. </span><span class="kobospan" id="kobo.109.2">It’s highly recommended to use a </span><span><span class="kobospan" id="kobo.110.1">password vault.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.111.1">Now, let’s install our Zabbix server with </span><span><span class="kobospan" id="kobo.112.1">MySQL support.</span></span><p class="calibre3"><span class="kobospan" id="kobo.113.1">For RHEL-based systems, run the </span><span><span class="kobospan" id="kobo.114.1">following command:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.115.1">dnf install zabbix-server-mysql zabbix-sql-scripts zabbix-selinux-policy</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.116.1">For Ubuntu systems, run the </span><span><span class="kobospan" id="kobo.117.1">following command:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.118.1">apt install zabbix-server-mysql zabbix-sql-scripts</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.119.1">With the Zabbix server installed, we are ready to create our Zabbix database. </span><span class="kobospan" id="kobo.119.2">Log in to MariaDB with </span><span><span class="kobospan" id="kobo.120.1">the following:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.121.1">mysql -u root -p</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.122.1">Enter the password you set up during the secure installation. </span><span class="kobospan" id="kobo.122.2">Next, we’ll create the Zabbix database with the following commands. </span><span class="kobospan" id="kobo.122.3">Do not forget to change </span><strong class="source-inline1"><span class="kobospan" id="kobo.123.1">pass</span><a id="_idTextAnchor038" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.124.1">word</span></strong><span class="kobospan" id="kobo.125.1"> in the second and third commands, as this will be the password used for connecting to your </span><span><span class="kobospan" id="kobo.126.1">Zabbix database:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.127.1">create database zabbix character set utf8mb4 collate utf8mb4_bin;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.128.1">create user zabbix@localhost identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.129.1">grant all privileges on zabbix.* to zabbix@localhost identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.130.1">set global log_bin_trust_function_creators = 1;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.131.1">quit</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.132.1">The </span><strong class="source-inline"><span class="kobospan" id="kobo.133.1">log_bin_trust_function_creators</span></strong><span class="kobospan" id="kobo.134.1"> function is set to </span><strong class="source-inline"><span class="kobospan" id="kobo.135.1">1</span></strong><span class="kobospan" id="kobo.136.1"> here to allow the initial database data to be imported. </span><span class="kobospan" id="kobo.136.2">We will disable it </span><span><span class="kobospan" id="kobo.137.1">again afterwards.</span></span></p></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.138.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.139.1">Since Zabbix 6, Zabbix uses </span><strong class="source-inline1"><span class="kobospan" id="kobo.140.1">utf8mb4</span></strong><span class="kobospan" id="kobo.141.1"> by default in all its installation documentation. </span><span class="kobospan" id="kobo.141.2">We’ve changed </span><strong class="source-inline1"><span class="kobospan" id="kobo.142.1">utf8</span></strong><span class="kobospan" id="kobo.143.1"> to </span><strong class="source-inline1"><span class="kobospan" id="kobo.144.1">utf8mb4</span></strong><span class="kobospan" id="kobo.145.1"> in the preceding command so that everything will work. </span><span class="kobospan" id="kobo.145.2">For reference, check the Zabbix support ticket </span><span><span class="kobospan" id="kobo.146.1">here: </span></span><a href="https://support.zabbix.com/browse/ZBXNEXT-3706" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.147.1">https://support.zabbix.com/browse/ZBXNEXT-3706</span></span></a><span><span class="kobospan" id="kobo.148.1">.</span></span></p>
<ol class="calibre16">
<li value="12" class="calibre15"><span class="kobospan" id="kobo.149.1">We now need </span><a id="_idIndexMarker009" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.150.1">to import our Zabbix database schema to our newly created </span><span><span class="kobospan" id="kobo.151.1">Zabbix database:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.152.1">zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mariadb --default-character-set=utf8mb4 -u zabbix -p zabbix</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.153.1">As mentioned, we can now disable </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.154.1">log_bin_trust_function_creators</span></strong></span><span><span class="kobospan" id="kobo.155.1"> again:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.156.1">mysql -u root -p</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.157.1">set global log_bin_trust_function_creators = 0;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.158.1">quit;</span></strong></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.159.1">Important note</span></p>
<p class="callout"><span class="kobospan" id="kobo.160.1">At this point, it might look like you are stuck and the system is not responding. </span><span class="kobospan" id="kobo.160.2">Do not worry, though, as it will just take a while to import the </span><span><span class="kobospan" id="kobo.161.1">SQL schema.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.162.1">We are now done with the preparations for our MariaDB side and are ready to move on to the next step, which will be configuring the </span><span><span class="kobospan" id="kobo.163.1">Zabbix server.</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.164.1">The Zabbix server is configured using the Zabbix server config file. </span><span class="kobospan" id="kobo.164.2">This file is located in </span><strong class="source-inline1"><span class="kobospan" id="kobo.165.1">/etc/zabbix/</span></strong><span class="kobospan" id="kobo.166.1">. </span><span class="kobospan" id="kobo.166.2">Let’s open this file with our favorite editor; I’ll be using Vim throughout the book (but feel free to substitute Vim with </span><strong class="source-inline1"><span class="kobospan" id="kobo.167.1">vi</span></strong> <span><span class="kobospan" id="kobo.168.1">or </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.169.1">nano</span></strong></span><span><span class="kobospan" id="kobo.170.1">):</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.171.1">vim /etc/zabbix/zabbix_server.conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.172.1">N</span><a id="_idTextAnchor039" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.173.1">ow, make sure the following lines in the file match your database name, database user username, and database </span><span><span class="kobospan" id="kobo.174.1">user password:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.175.1">
DBName=zabbix
DBUser=zabbix
DBPassword=password</span></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.176.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.177.1">Before starting the Zabbix server, you should configure SELinux or AppArmor to allow the use of the Zabbix server. </span><span class="kobospan" id="kobo.177.2">If this is a test machine, you can use a permissive stance for SELinux or disable AppArmor, but it is not recommended to do this </span><span><span class="kobospan" id="kobo.178.1">in production.</span></span></p>
<ol class="calibre16">
<li value="3" class="calibre15"><span class="kobospan" id="kobo.179.1">All done; we are </span><a id="_idIndexMarker010" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.180.1">now ready to start our </span><span><span class="kobospan" id="kobo.181.1">Zabbix server:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.182.1">systemctl enable zabbix-server</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.183.1">systemctl start zabbix-server</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.184.1">Check whether everything is starting up as expected with </span><span><span class="kobospan" id="kobo.185.1">the following:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.186.1">systemctl status zabbix-server</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.187.1">Also, make sure to monitor the log file, which provides a detailed description of the Zabbix </span><span><span class="kobospan" id="kobo.188.1">startup process:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.189.1">tail -f /var/log/zabbix/zabbix_server.log</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.190.1">Most of the messages in this file are fine and can be ignored safely, but make sure to read them well and see if there are any issues with your Zabbix </span><span><span class="kobospan" id="kobo.191.1">server </span><a id="_idTextAnchor040" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor041" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.192.1">starting.</span></span></li>
</ol>
<h2 id="_idParaDest-28" class="calibre7"><a id="_idTextAnchor042" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.193.1">How it works…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.194.1">The Zabbix server is the main process for our Zabbix setup. </span><span class="kobospan" id="kobo.194.2">It is responsible for our monitoring, problem </span><a id="_idIndexMarker011" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.195.1">alerting, and a lot of the other tasks described in this book. </span><a id="_idTextAnchor043" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.196.1">A complete Zabbix stack consists of at least </span><span><span class="kobospan" id="kobo.197.1">the following:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span class="kobospan" id="kobo.198.1">A database (MySQL/MySQL fork, PostgreSQL, </span><span><span class="kobospan" id="kobo.199.1">or Oracle)</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.200.1">A </span><span><span class="kobospan" id="kobo.201.1">Zabbix server</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.202.1">Apache or NGINX running the Zabbix frontend with PHP 8.0 </span><span><span class="kobospan" id="kobo.203.1">or higher</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.204.1">We can see the components and how they communicate with each other in the </span><span><span class="kobospan" id="kobo.205.1">following</span><a id="_idTextAnchor044" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.206.1"> diagram:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer007">
<span class="kobospan" id="kobo.207.1"><img alt="Figure 1.1 – Zabbix setup communications diagram" src="image/B19803_01_01.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.208.1">Figure 1.1 – Zabbix setup communications diagram</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.209.1">We’ve just set up the Zabbix server and database; by running these two, we are basically ready to start monitoring. </span><span class="kobospan" id="kobo.209.2">The Zabbix server communicates with the Zabbix database to write collected values </span><span><span class="kobospan" id="kobo.210.1">to it.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.211.1">There is</span><a id="_idTextAnchor045" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.212.1"> still one problem, though: we cannot configure our Zabbix server to do anything. </span><span class="kobospan" id="kobo.212.2">For this, we are going to need our Zabbix frontend, which we’ll set up in the </span><span><span class="kobospan" id="kobo.213.1">nex</span><a id="_idTextAnchor046" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor047" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.214.1">t recipe.</span></span></p>
<h1 id="_idParaDest-29" class="calibre5"><a id="_idTextAnchor048" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.215.1">Setting up the Zabbix frontend</span></h1>
<p class="calibre3"><a id="_idTextAnchor049" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.216.1">The Zabbix </span><a id="_idIndexMarker012" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.217.1">frontend is the face of our server. </span><span class="kobospan" id="kobo.217.2">It’s where we will configure all of our hosts, templates, dashboards, maps, and everything else. </span><span class="kobospan" id="kobo.217.3">Without it, we would be blind to what’s going on on the server side. </span><span class="kobospan" id="kobo.217.4">So, let’s set up our Zabbix frontend in </span><span><span class="kobospan" id="kobo.218.1">th</span><a id="_idTextAnchor050" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor051" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.219.1">is recipe.</span></span></p>
<h2 id="_idParaDest-30" class="calibre7"><a id="_idTextAnchor052" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.220.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.221.1">We are going to set up the Zabbix frontend using NGINX. </span><span class="kobospan" id="kobo.221.2">It’s also possible to use Apache, but NGINX is known to be faster and, as such, it has a slight edge over Apache. </span><span class="kobospan" id="kobo.221.3">Since installation of both NGINX and Apache is quite simple, NGINX is the preferred way to go if you have a lot of frontend users. </span><span class="kobospan" id="kobo.221.4">Before starting with this recipe, make sure you are running the Zabbix server on a Linux distribution of your choice. </span><span class="kobospan" id="kobo.221.5">I’ll be using the </span><strong class="source-inline"><span class="kobospan" id="kobo.222.1">lar-book-rocky</span></strong><span class="kobospan" id="kobo.223.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.224.1">lar-book-ubuntu</span></strong><span class="kobospan" id="kobo.225.1"> hosts in these recipes to show the setup process on Rocky Linux 9 and </span><span><span class="kobospan" id="kobo.226.1">Ubu</span><a id="_idTextAnchor053" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor054" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.227.1">ntu 22.04.</span></span></p>
<h2 id="_idParaDest-31" class="calibre7"><a id="_idTextAnchor055" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.228.1">How to do it…</span></h2>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.229.1">Let’s jump right in and install </span><span><span class="kobospan" id="kobo.230.1">the frontend.</span></span><p class="calibre3"><span class="kobospan" id="kobo.231.1">For RHEL-based systems, run </span><span><span class="kobospan" id="kobo.232.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.233.1">dnf module switch-to php:8.3</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.234.1">dnf install zabbix-web-mysql zabbix-nginx-conf</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.235.1">For Ubuntu systems, run </span><span><span class="kobospan" id="kobo.236.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.237.1">apt install zabbix-frontend-php zabbix-nginx-conf</span></strong></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.238.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.239.1">Don’t forget to allow ports </span><strong class="source-inline1"><span class="kobospan" id="kobo.240.1">80</span></strong><span class="kobospan" id="kobo.241.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.242.1">443</span></strong><span class="kobospan" id="kobo.243.1"> in your firewall if you are using one. </span><span class="kobospan" id="kobo.243.2">Without this, you won’t be able to connect to </span><span><span class="kobospan" id="kobo.244.1">the frontend.</span></span></p>
<ol class="calibre16">
<li value="2" class="calibre15"><span class="kobospan" id="kobo.245.1">We will then have to configure our </span><span><span class="kobospan" id="kobo.246.1">NGINX configuration.</span></span><p class="calibre3"><span class="kobospan" id="kobo.247.1">For RHEL-based systems, edit the </span><span><span class="kobospan" id="kobo.248.1">following file:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.249.1">/etc/nginx/conf.d/zabbix.conf</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.250.1">For Ubuntu systems, edit the </span><span><span class="kobospan" id="kobo.251.1">following file:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.252.1">/etc/zabbix/nginx.conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.253.1">Then, edit the following </span><span><span class="kobospan" id="kobo.254.1">two lines:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.255.1">
# listen 8080;
# server_name example.com;</span></pre><p class="calibre3"><span class="kobospan" id="kobo.256.1">Make it look </span><span><span class="kobospan" id="kobo.257.1">like this:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.258.1">listen 80;
server_name 192.168.0.50;</span></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.259.1">Important note</span></p>
<p class="callout"><span class="kobospan" id="kobo.260.1">At </span><strong class="source-inline1"><span class="kobospan" id="kobo.261.1">server_name</span></strong><span class="kobospan" id="kobo.262.1">, it is important to add the IP address of where this NGINX (Zabbix) web page will be running. </span><span class="kobospan" id="kobo.262.2">Add the IP address or DNS name of where you want your frontend to be </span><span><span class="kobospan" id="kobo.263.1">available here.</span></span></p>
<ol class="calibre16">
<li value="4" class="calibre15"><span class="kobospan" id="kobo.264.1">Restart the </span><a id="_idIndexMarker013" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.265.1">Zabbix components and make sure they start up when the server </span><span><span class="kobospan" id="kobo.266.1">is booted.</span></span><p class="calibre3"><span class="kobospan" id="kobo.267.1">For RHEL-based systems, run </span><span><span class="kobospan" id="kobo.268.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.269.1">systemctl enable nginx php-fpm</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.270.1">systemctl restart nginx php-fpm</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.271.1">For Ubuntu systems, run </span><span><span class="kobospan" id="kobo.272.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.273.1">systemctl enable nginx</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.274.1">systemctl restart nginx php-fpm</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.275.1">We should now be able to navigate to our Zabbix frontend without any issue</span><a id="_idTextAnchor056" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.276.1">s and start the final steps to set up the </span><span><span class="kobospan" id="kobo.277.1">Zabbix frontend.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.278.1">Let’s go to our browser and navigate to our server’s IP. </span><span class="kobospan" id="kobo.278.2">It should look </span><span><span class="kobospan" id="kobo.279.1">like this:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.280.1">http://&lt;your_server_ip&gt;/</span></strong></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.281.1">Important note</span></p>
<p class="callout"><span class="kobospan" id="kobo.282.1">On Ubuntu (in some cases), you might have to add port </span><strong class="source-inline1"><span class="kobospan" id="kobo.283.1">8080</span></strong><span class="kobospan" id="kobo.284.1">, which you will probably want to change to port </span><strong class="source-inline1"><span class="kobospan" id="kobo.285.1">80</span></strong><span class="kobospan" id="kobo.286.1"> (or </span><strong class="source-inline1"><span class="kobospan" id="kobo.287.1">443</span></strong><span class="kobospan" id="kobo.288.1"> after adding SSL) later. </span><span class="kobospan" id="kobo.288.2">In those cases, the URL should look </span><span><span class="kobospan" id="kobo.289.1">like this:</span></span></p>
<p class="callout"><span><span class="kobospan" id="kobo.290.1">http://&lt;your_server_ip&gt;:8080/</span></span></p>
<ol class="calibre16">
<li value="7" class="calibre15"><span class="kobospan" id="kobo.291.1">We should </span><a id="_idIndexMarker014" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.292.1">now see the followin</span><a id="_idTextAnchor057" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.293.1">g </span><span><span class="kobospan" id="kobo.294.1">web page:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer008">
<span class="kobospan" id="kobo.295.1"><img alt="Figure 1.2 – The Zabbix welcome screen" src="image/B19803_01_02.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.296.1">Figure 1.2 – The Zabbix welcome screen</span></p>
<p class="calibre3"><a id="_idTextAnchor058" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.297.1">If you don’t see this web page, you may have missed some steps in the setup process. </span><span class="kobospan" id="kobo.297.2">Retrace your steps and double-check your configuration files; even the smallest typo could prevent the web page </span><span><span class="kobospan" id="kobo.298.1">from serving.</span></span></p>
<ol class="calibre16">
<li value="8" class="calibre15"><span class="kobospan" id="kobo.299.1">Let’s continue by clicking </span><strong class="bold"><span class="kobospan" id="kobo.300.1">Next step</span></strong><span class="kobospan" id="kobo.301.1"> on this page, which will serve you with th</span><a id="_idTextAnchor059" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.302.1">e next page: </span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer009">
<span class="kobospan" id="kobo.303.1"><img alt="Figure 1.3 – The Zabbix installation prerequisites page" src="image/B19803_01_03.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.304.1">Figure 1.3 – The Zabbix installation prerequisites page</span></p>
<ol class="calibre16">
<li value="9" class="calibre15"><span class="kobospan" id="kobo.305.1">Ev</span><a id="_idTextAnchor060" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.306.1">ery single </span><a id="_idIndexMarker015" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.307.1">option here should be showing </span><strong class="bold"><span class="kobospan" id="kobo.308.1">OK</span></strong><span class="kobospan" id="kobo.309.1"> now; if not, fix the mistake it’s showing you. </span><span class="kobospan" id="kobo.309.2">If everything is OK, you may proceed by clicking </span><strong class="bold"><span class="kobospan" id="kobo.310.1">Next step</span></strong><span class="kobospan" id="kobo.311.1"> again, which will take you to the </span><a id="_idTextAnchor061" class="pcalibre calibre6 pcalibre1"/><span><span class="kobospan" id="kobo.312.1">next page:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer010">
<span class="kobospan" id="kobo.313.1"><img alt="Figure 1.4 – The Zabbix installation DB connection pag﻿e" src="image/B19803_01_04.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.314.1">Figure 1.4 – The Zabbix installation DB connection pag</span><a id="_idTextAnchor062" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.315.1">e</span></p>
<ol class="calibre16">
<li value="10" class="calibre15"><span class="kobospan" id="kobo.316.1">Here, we need </span><a id="_idIndexMarker016" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.317.1">to tell our Zabbix frontend where our MySQL database is located. </span><span class="kobospan" id="kobo.317.2">Since we installed it on </span><strong class="source-inline1"><span class="kobospan" id="kobo.318.1">localhost</span></strong><span class="kobospan" id="kobo.319.1">, we just need to make sure we issue the right database name, database user username, and database </span><span><span class="kobospan" id="kobo.320.1">user password.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.321.1">This should make the Zabbix frontend able to communicate with the database. </span><span class="kobospan" id="kobo.321.2">Let’s proceed by clicking </span><strong class="bold"><span class="kobospan" id="kobo.322.1">Next </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.323.1">s</span><a id="_idTextAnchor063" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.324.1">tep</span></strong></span><span><span class="kobospan" id="kobo.325.1"> again:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer011">
<span class="kobospan" id="kobo.326.1"><img alt="Figure 1.5 – The Zabbix installation server details page﻿" src="image/B19803_01_05.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.327.1">Figure 1.5 – The Zabbix installation server details page</span><a id="_idTextAnchor064" class="pcalibre calibre6 pcalibre1"/></p>
<p class="calibre3"><span class="kobospan" id="kobo.328.1">Next up is </span><a id="_idIndexMarker017" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.329.1">the Zabbix server configuration. </span><span class="kobospan" id="kobo.329.2">Make sure to name your server something useful or something cool. </span><span class="kobospan" id="kobo.329.3">For example, I set up a production server called </span><strong class="source-inline"><span class="kobospan" id="kobo.330.1">Meeseeks</span></strong><span class="kobospan" id="kobo.331.1"> because every time we got an alert, we could make Zabbix say “</span><em class="italic"><span class="kobospan" id="kobo.332.1">I’m Mr. </span><span class="kobospan" id="kobo.332.2">Meeseeks. </span><span class="kobospan" id="kobo.332.3">Look at me.</span></em><span class="kobospan" id="kobo.333.1">” But something such as </span><strong class="source-inline"><span class="kobospan" id="kobo.334.1">zabbix.example.com</span></strong> <span><span class="kobospan" id="kobo.335.1">also works.</span></span></p>
<ol class="calibre16">
<li value="12" class="calibre15"><span class="kobospan" id="kobo.336.1">Let’s name our server, set up the time zone to match our own time zone, and proceed to the </span><a id="_idTextAnchor065" class="pcalibre calibre6 pcalibre1"/><span><span class="kobospan" id="kobo.337.1">next step:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer012">
<span class="kobospan" id="kobo.338.1"><img alt="Figure 1.6 – The Zabbix installation summary ﻿page" src="image/B19803_01_06.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.339.1">Figure 1.6 – The Zabbix installation summary </span><a id="_idTextAnchor066" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.340.1">page</span></p>
<ol class="calibre16">
<li value="13" class="calibre15"><span class="kobospan" id="kobo.341.1">Verify your </span><a id="_idIndexMarker018" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.342.1">settings and proceed to click </span><strong class="bold"><span class="kobospan" id="kobo.343.1">Next step</span></strong><span class="kobospan" id="kobo.344.1"> one </span><a id="_idTextAnchor067" class="pcalibre calibre6 pcalibre1"/><span><span class="kobospan" id="kobo.345.1">more time:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer013">
<span class="kobospan" id="kobo.346.1"><img alt="Figure 1.7 – The Zabbix installation finish pa﻿ge" src="image/B19803_01_07.JPG" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.347.1">Figure 1.7 – The Zabbix installation finish pa</span><a id="_idTextAnchor068" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.348.1">ge</span></p>
<ol class="calibre16">
<li value="14" class="calibre15"><span class="kobospan" id="kobo.349.1">You have successfully installed the Zabbix frontend. </span><span class="kobospan" id="kobo.349.2">You may now click the </span><strong class="bold"><span class="kobospan" id="kobo.350.1">Finish</span></strong><span class="kobospan" id="kobo.351.1"> button, and we can start using the frontend. </span><span class="kobospan" id="kobo.351.2">You’ll be served with a login page where you can use the following </span><span><span class="kobospan" id="kobo.352.1">default credentials:</span></span><ul class="calibre17"><li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.353.1">Username</span></strong></span><span><span class="kobospan" id="kobo.354.1">: </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.355.1">Admin</span></strong></span></li><li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.356.1">Password</span></strong></span><span><span class="kobospan" id="kobo.357.1">: </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.358.1">zabbix</span></strong></span></li></ul></li>
</ol>
<p class="calibre3"><span class="kobospan" id="kobo.359.1">Keep in mind that the username and password fields are </span><span><span class="kobospan" id="kobo.360.1">both case-</span><a id="_idTextAnchor069" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor070" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.361.1">sensitive.</span></span></p>
<h2 id="_idParaDest-32" class="calibre7"><a id="_idTextAnchor071" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.362.1">How it works…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.363.1">Now that </span><a id="_idIndexMarker019" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.364.1">we’ve installed our Zabbix frontend, our Zabbix setup is complete and we are ready to start working with it. </span><span class="kobospan" id="kobo.364.2">Our Zabbix frontend will connect to our database to edit the configuration values of our setup, as we can see in the </span><span><span class="kobospan" id="kobo.365.1">followin</span><a id="_idTextAnchor072" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.366.1">g diagram:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer014">
<span class="kobospan" id="kobo.367.1"><img alt="Figure 1.8 – Zabbix setup communications diagram" src="image/B19803_01_08.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.368.1">Figure 1.8 – Zabbix setup communications diagram</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.369.1">The Zabbix frontend will also talk to our Zabbix server, but this is just to make sure the Zabbix server is up and running and to provide some additional functionality such as a test button on items. </span><span class="kobospan" id="kobo.369.2">Now that we know how to set up the Zabbix frontend, we</span><a id="_idTextAnchor073" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.370.1"> can start using it. </span><span class="kobospan" id="kobo.370.2">Let’s check this out after the </span><span><span class="kobospan" id="kobo.371.1">ne</span><a id="_idTextAnchor074" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor075" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.372.1">xt recipe.</span></span></p>
<h2 id="_idParaDest-33" class="calibre7"><a id="_idTextAnchor076" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.373.1">There’s more...</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.374.1">Zabbix provides a very convenient setup guide that contains a lot of detail regarding the installation of Zabbix. </span><span class="kobospan" id="kobo.374.2">I would always recommend keeping this page open during a Zabbix installation as it contains information such as a link to the latest repository. </span><span class="kobospan" id="kobo.374.3">Check it </span><span><span class="kobospan" id="kobo.375.1">out here:</span></span></p>
<p class="calibre3"><a href="https://www.zabbix.com/download" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.376.1">https://www.zabbix.co</span><span id="_idTextAnchor077"/><span id="_idTextAnchor078"/><span class="kobospan" id="kobo.377.1">m/download</span></span></a></p>
<h1 id="_idParaDest-34" class="calibre5"><a id="_idTextAnchor079" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.378.1">Enabling Zabbix server HA</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.379.1">Zabbix 6 s</span><a id="_idTextAnchor080" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.380.1">hipped with one of the most anticipated features of all time, HA. </span><span class="kobospan" id="kobo.380.2">This feature will bring your </span><a id="_idIndexMarker020" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.381.1">Zabbix setup to the next level by making sure that if one of your Zabbix servers is having issues, another one will take over. </span><span class="kobospan" id="kobo.381.2">Of course, this feature is still available in Zabbix 7, and we will be making good use </span><span><span class="kobospan" id="kobo.382.1">of it.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.383.1">A great thing about this implementation is that it supports an easy proprietary way to put one to many Zabbix servers in a cluster: a great way of making sure your monitoring stays in the air at all times (or at least as much </span><span><span class="kobospan" id="kobo.384.1">as possible).</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.385.1">The setup for the Zabbix server will be active/passive, as we cannot do anything such as load balancing on the Zabbix server side. </span><span class="kobospan" id="kobo.385.2">Load balancing is, however, supported using Zabbix proxies, which we will discuss in </span><a href="B19803_08.xhtml#_idTextAnchor1490" class="pcalibre calibre6 pcalibre1"><span><em class="italic"><span class="kobospan" id="kobo.386.1">Chapter 8</span></em></span></a><span class="kobospan" id="kobo.387.1">, </span><em class="italic"><span class="kobospan" id="kobo.388.1">Setting up </span></em><span><em class="italic"><span class="kobospan" id="kobo.389.1">Zabbix Proxies</span></em></span><span><span class="kobospan" id="kobo.390.1">.</span></span></p>
<h2 id="_idParaDest-35" class="calibre7"><a id="_idTextAnchor081" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.391.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.392.1">Before getting started, please note that creating an HA setup is considered an advanced topic. </span><span class="kobospan" id="kobo.392.2">It might be more difficult than other recipes in </span><span><span class="kobospan" id="kobo.393.1">this chapter.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.394.1">For this setup, we will need three new virtual machines, as we are going to create a split Zabbix setup, unlike the setup that we created in the first recipe of this chapter. </span><span class="kobospan" id="kobo.394.2">Let’s take a look at how I have named our three new virtual machines and what their IP addresses </span><span><span class="kobospan" id="kobo.395.1">will be:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span><strong class="source-inline1"><span class="kobospan" id="kobo.396.1">lar-book-ha1</span></strong></span><span><span class="kobospan" id="kobo.397.1"> (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.398.1">192.168.0.1</span></strong></span><span><span class="kobospan" id="kobo.399.1">)</span></span></li>
<li class="calibre15"><span><strong class="source-inline1"><span class="kobospan" id="kobo.400.1">lar-book-ha2</span></strong></span><span><span class="kobospan" id="kobo.401.1"> (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.402.1">192.168.0.2</span></strong></span><span><span class="kobospan" id="kobo.403.1">)</span></span></li>
<li class="calibre15"><span><strong class="source-inline1"><span class="kobospan" id="kobo.404.1">lar-book-ha-db</span></strong></span><span><span class="kobospan" id="kobo.405.1"> (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.406.1">192.168.0.10</span></strong></span><span><span class="kobospan" id="kobo.407.1">)</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.408.1">Two of these servers will run our Zabbix server cluster and a Zabbix frontend. </span><span class="kobospan" id="kobo.408.2">The other ser</span><a id="_idTextAnchor082" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.409.1">ver is just for our MySQL database. </span><span class="kobospan" id="kobo.409.2">Please take note that the IP addresses used in the example may be different for you. </span><span class="kobospan" id="kobo.409.3">Use the correct ones for </span><span><span class="kobospan" id="kobo.410.1">your environment.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.411.1">We will also </span><a id="_idIndexMarker021" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.412.1">need a </span><strong class="bold"><span class="kobospan" id="kobo.413.1">virtual IP</span></strong><span class="kobospan" id="kobo.414.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.415.1">VIP</span></strong><span class="kobospan" id="kobo.416.1">) address for our cluster nodes. </span><span class="kobospan" id="kobo.416.2">We will use </span><strong class="source-inline"><span class="kobospan" id="kobo.417.1">192.168.0.5</span></strong><span class="kobospan" id="kobo.418.1"> in </span><span><span class="kobospan" id="kobo.419.1">the example.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.420.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.421.1">In our setup, we are using only one MySQL Zabbix database. </span><span class="kobospan" id="kobo.421.2">To make sure all parts of Zabbix are set up as highly available, it might be worth looking into setting up MySQL in a primary/primary setup. </span><span class="kobospan" id="kobo.421.3">This can be a great combination with the Zabbix </span><span><span class="kobospan" id="kobo.422.1">server’s HA.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.423.1">This cookbook will </span><em class="italic"><span class="kobospan" id="kobo.424.1">not</span></em><span class="kobospan" id="kobo.425.1"> use SELinux or AppArmor, so make sure to add the correct policies before </span><a id="_idIndexMarker022" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.426.1">or during the use of this guide. </span><span class="kobospan" id="kobo.426.2">It’s also possible to disable SELinux, but this is not recommended in production. </span><span class="kobospan" id="kobo.426.3">Additionally, this guide does not detail how to set up your firewall, so make sure to do this before</span><a id="_idTextAnchor083" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor084" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.427.1">hand </span><span><span class="kobospan" id="kobo.428.1">as well.</span></span></p>
<h2 id="_idParaDest-36" class="calibre7"><a id="_idTextAnchor085" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.429.1">How to do it…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.430.1">For your convenience, we’ve split this </span><em class="italic"><span class="kobospan" id="kobo.431.1">How to do it…</span></em><span class="kobospan" id="kobo.432.1"> section into three parts. </span><span class="kobospan" id="kobo.432.2">The first is setting up the database, the next is setting up the Zabbix server cluster, and the last is how to set up the Zabbix frontend redundantly. </span><span class="kobospan" id="kobo.432.3">The </span><em class="italic"><span class="kobospan" id="kobo.433.1">How it works…</span></em><span class="kobospan" id="kobo.434.1"> section will t</span><a id="_idTextAnchor086" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.435.1">hen provide an explanation of the </span><span><span class="kobospan" id="kobo.436.1">entire setup.</span></span></p>
<h3 class="calibre8"><span class="kobospan" id="kobo.437.1">Setting up the database</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.438.1">Le</span><a id="_idTextAnchor087" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.439.1">t’s start </span><a id="_idIndexMarker023" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.440.1">with setting up our Zabbix database, ready to be used in a highly available Zabbix </span><span><span class="kobospan" id="kobo.441.1">server setup.</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.442.1">Log in to </span><strong class="source-inline1"><span class="kobospan" id="kobo.443.1">lar-book-ha-db</span></strong><span class="kobospan" id="kobo.444.1"> and install the MariaDB repository with the following command on Red </span><span><span class="kobospan" id="kobo.445.1">Hat-based systems:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.446.1">wget https://downloads.mariadb.com/MariaDB/mariadb_repo_setup</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.447.1">chmod +x mariadb_repo_setup</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.448.1">./mariadb_repo_setup</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.449.1">Then, let’s install the MariaDB </span><span><span class="kobospan" id="kobo.450.1">server application.</span></span><p class="calibre3"><span class="kobospan" id="kobo.451.1">For RHEL-based systems, run </span><span><span class="kobospan" id="kobo.452.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.453.1">dnf install mariadb-server</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.454.1">systemctl enable mariadb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.455.1">systemctl start mariadb</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.456.1">For Ubuntu systems, run </span><span><span class="kobospan" id="kobo.457.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.458.1">apt install mariadb-server</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.459.1">systemctl enable mariadb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.460.1">systemctl start mariadb</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.461.1">After installing </span><a id="_idIndexMarker024" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.462.1">MariaDB, make sure to secure your installation with the </span><span><span class="kobospan" id="kobo.463.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.464.1">mariadb-secure-installation</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.465.1">Make sure to answer the questions with yes (</span><strong class="source-inline1"><span class="kobospan" id="kobo.466.1">Y</span></strong><span class="kobospan" id="kobo.467.1">) and configure a root password that’s secure. </span><span class="kobospan" id="kobo.467.2">It’s highly recommended to use a password vault for </span><span><span class="kobospan" id="kobo.468.1">storing it.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.469.1">Now, let’s create our Zabbix database for our Zabbix servers to connect to. </span><span class="kobospan" id="kobo.469.2">Log in to MariaDB with the </span><span><span class="kobospan" id="kobo.470.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.471.1">mariadb -u root -p</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.472.1">Enter the password you set up during the secure installation. </span><span class="kobospan" id="kobo.472.2">Next, we’ll create a Zabbix database with the following commands. </span><span class="kobospan" id="kobo.472.3">Do not forget to change </span><a id="_idTextAnchor088" class="pcalibre calibre6 pcalibre1"/><strong class="source-inline1"><span class="kobospan" id="kobo.473.1">password</span></strong><span class="kobospan" id="kobo.474.1"> in the second, third, and </span><span><span class="kobospan" id="kobo.475.1">fourth commands:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.476.1">create database zabbix character set utf8mb4 collate utf8mb4_bin;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.477.1">create user zabbix@'192.168.0.1' identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.478.1">create user zabbix@'192.168.0.2' identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.479.1">create user zabbix@'192.168.0.5' identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.480.1">grant all privileges on zabbix.* to 'zabbix'@'192.168.0.1' identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.481.1">grant all privileges on zabbix.* to 'zabbix'@'192.168.0.2' identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.482.1">grant all privileges on zabbix.* to 'zabbix'@'192.168.0.5' identified by 'password';</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.483.1">set global log_bin_trust_function_creators = 1;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.484.1">quit</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.485.1">Lastly, we need </span><a id="_idIndexMarker025" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.486.1">to import the initial Zabbix database configuration, but for that, we need to install the </span><span><span class="kobospan" id="kobo.487.1">Zabbix repository.</span></span><p class="calibre3"><span class="kobospan" id="kobo.488.1">For RHEL-based systems, run the </span><span><span class="kobospan" id="kobo.489.1">following command:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.490.1">rpm -Uvh https://repo.zabbix.com/zabbix/7.0/rocky/9/x86_64/zabbix-release-7.0-2.el9.noarch.rpm</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.491.1">dnf clean all</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.492.1">For Ubuntu systems, run the </span><span><span class="kobospan" id="kobo.493.1">following command:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.494.1">wget https://repo.zabbix.com/zabbix/7.0/ubuntu/pool/main/z/zabbix-release/zabbix-release_7.0-1+ubuntu22.04_all.deb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.495.1">dpkg -i zabbix-release_7.0-1+ubuntu22.04_all.deb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.496.1">apt</span><a id="_idTextAnchor089" class="pcalibre calibre18 pcalibre1"/><span class="kobospan1" id="kobo.497.1"> update</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.498.1">Then, we need to install the SQL scripts </span><span><span class="kobospan" id="kobo.499.1">Zabbix module.</span></span><p class="calibre3"><span class="kobospan" id="kobo.500.1">For RHEL-based systems, run the </span><span><span class="kobospan" id="kobo.501.1">following command:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.502.1">dnf install zabbix-sql-scripts</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.503.1">For Ubuntu systems, run the </span><span><span class="kobospan" id="kobo.504.1">following command:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.505.1">apt install zabbix-sql-scripts</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.506.1">Then, we issue the following command, which might take a while, so be patient until it </span><span><span class="kobospan" id="kobo.507.1">is done:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.508.1">zcat /usr/share/doc/zabbix-sql-scripts/mysql/server.sql.gz | mysql --default-character-set=utf8mb4 -u root -p zabbix</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.509.1">We will </span><a id="_idIndexMarker026" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.510.1">need to disable </span><strong class="source-inline1"><span class="kobospan" id="kobo.511.1">log_bin_trust_function_creators</span></strong><span class="kobospan" id="kobo.512.1"> after </span><span><span class="kobospan" id="kobo.513.1">this step:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.514.1">mysql -u root -p</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.515.1">set global log_bin_trust_function_creators = 0;</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.516.1">quit;</span></strong></pre></li> </ol>
<h3 class="calibre8"><span class="kobospan" id="kobo.517.1">Setting up the Zabbix server cluster no</span><a id="_idTextAnchor090" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.518.1">des</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.519.1">Setting up </span><a id="_idIndexMarker027" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.520.1">the cluster nodes works in the same way as setting up any new Zabbix server. </span><span class="kobospan" id="kobo.520.2">The only difference is that we will need to specify some new </span><span><span class="kobospan" id="kobo.521.1">configuration parameters.</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.522.1">Let’s start by adding the Zabbix 7.0 repository to our </span><strong class="source-inline1"><span class="kobospan" id="kobo.523.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.524.1"> and </span><span><strong class="source-inline1"><span class="kobospan" id="kobo.525.1">lar-book-ha2</span></strong></span><span><span class="kobospan" id="kobo.526.1"> systems:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.527.1">rpm -Uvh https://repo.zabbix.com/zabbix/7.0/rocky/9/x86_64/zabbix-release-7.0-2.el9.noarch.rpm</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.528.1">dnf clean all</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.529.1">For Ubuntu systems, use the </span><span><span class="kobospan" id="kobo.530.1">following command:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.531.1">wget https://repo.zabbix.com/zabbix/7.0/ubuntu/pool/main/z/zabbix-release/zabbix-release_7.0-1+ubuntu22.04_all.deb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.532.1">dpkg -i zabbix-release_7.0-1+ubuntu22.04_all.deb</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.533.1">apt update</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.534.1">Now, let’s install the Zabbix </span><span><span class="kobospan" id="kobo.535.1">server application.</span></span><p class="calibre3"><span class="kobospan" id="kobo.536.1">For RHEL-based systems, run the </span><span><span class="kobospan" id="kobo.537.1">following command:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.538.1">dnf install zabbix-server-mysql zabbix-selinux-policy</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.539.1">For Ubuntu systems, run the </span><span><span class="kobospan" id="kobo.540.1">following command:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.541.1">apt install zabbix-server-mysql</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.542.1">We will </span><a id="_idIndexMarker028" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.543.1">now edit the Zabbix server configuration files, starting with </span><strong class="source-inline1"><span class="kobospan" id="kobo.544.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.545.1">. </span><span class="kobospan" id="kobo.545.2">Issue the </span><span><span class="kobospan" id="kobo.546.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.547.1">vim /etc/zabbix/zabbix_server.conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.548.1">Then, add the following lines to allow a </span><span><span class="kobospan" id="kobo.549.1">database connection:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.550.1">
DBHost=192.168.0.10
DBPassword=password</span></pre><p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.551.1">DBName</span></strong><span class="kobospan" id="kobo.552.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.553.1">DBUser</span></strong><span class="kobospan" id="kobo.554.1"> are both set to </span><strong class="source-inline"><span class="kobospan" id="kobo.555.1">zabbix</span></strong><span class="kobospan" id="kobo.556.1"> by default. </span><span class="kobospan" id="kobo.556.2">If you used a different database and/or username, you will have to change those </span><span><span class="kobospan" id="kobo.557.1">as well.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.558.1">To enable HA on this host, add the following lines in the </span><span><span class="kobospan" id="kobo.559.1">same file:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.560.1">
HANodeName=lar-book-ha1</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.561.1">To make sure our Zabbix frontend knows where to connect to if there is a node failover, fill in </span><span><span class="kobospan" id="kobo.562.1">the following:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.563.1">
NodeAddress=192.168.0.1</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.564.1">Save the file, and let’s do the same for our </span><strong class="source-inline1"><span class="kobospan" id="kobo.565.1">lar-book-ha2</span></strong><span class="kobospan" id="kobo.566.1"> host by editing </span><span><span class="kobospan" id="kobo.567.1">its file:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.568.1">vim /etc/zabbix/zabbix_server.conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.569.1">Then, add the following lines to allow a </span><span><span class="kobospan" id="kobo.570.1">database connection:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.571.1">
DBHost=192.168.0.10
DBPassword=password</span></pre><p class="calibre3"><strong class="source-inline"><span class="kobospan" id="kobo.572.1">DBName</span></strong><span class="kobospan" id="kobo.573.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.574.1">DBUser</span></strong><span class="kobospan" id="kobo.575.1"> are both set to </span><strong class="source-inline"><span class="kobospan" id="kobo.576.1">zabbix</span></strong><span class="kobospan" id="kobo.577.1"> by default. </span><span class="kobospan" id="kobo.577.2">If you used a different database and/or username, you will have to change those</span><a id="_idTextAnchor091" class="pcalibre calibre6 pcalibre1"/> <span><span class="kobospan" id="kobo.578.1">as well.</span></span></p></li> <li class="calibre15"><span class="kobospan" id="kobo.579.1">To enable HA on this host, add the following lines in the </span><span><span class="kobospan" id="kobo.580.1">same file:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.581.1">
HANodeName=lar-book-ha2</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.582.1">To make </span><a id="_idIndexMarker029" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.583.1">sure our Zabbix frontend knows where to connect to if there is a node failover, fill in </span><span><span class="kobospan" id="kobo.584.1">the following:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.585.1">
NodeAddress=192.168.0.2</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.586.1">Save the file, and let’s start our </span><span><span class="kobospan" id="kobo.587.1">Zabbix server:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.588.1">systemctl enable zabbix-server</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.589.1">systemctl start zabbix-server</span></strong></pre></li> </ol>
<h3 class="calibre8"><span class="kobospan" id="kobo.590.1">Settin</span><a id="_idTextAnchor092" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.591.1">g up N</span><a id="_idTextAnchor093" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.592.1">GINX with HA</span></h3>
<p class="calibre3"><span class="kobospan" id="kobo.593.1">To make </span><a id="_idIndexMarker030" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.594.1">sure our frontend is also set up in such a way that if one Zabbix server has issues, it fails over, we will set them up with </span><strong class="source-inline"><span class="kobospan" id="kobo.595.1">keepalived</span></strong><span class="kobospan" id="kobo.596.1">. </span><span class="kobospan" id="kobo.596.2">Let’s see how we can </span><span><span class="kobospan" id="kobo.597.1">do this.</span></span></p>
<ol class="calibre16">
<li class="calibre15"><span class="kobospan" id="kobo.598.1">Let’s start by logging in to both </span><strong class="source-inline1"><span class="kobospan" id="kobo.599.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.600.1"> and </span><strong class="source-inline1"><span class="kobospan" id="kobo.601.1">lar-book-ha2</span></strong><span class="kobospan" id="kobo.602.1"> and </span><span><span class="kobospan" id="kobo.603.1">installing </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.604.1">keepalived</span></strong></span><span><span class="kobospan" id="kobo.605.1">.</span></span><p class="calibre3"><span class="kobospan" id="kobo.606.1">For RHEL-based systems, run </span><span><span class="kobospan" id="kobo.607.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.608.1">dnf install -y keepalived</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.609.1">For Ubuntu systems, run </span><span><span class="kobospan" id="kobo.610.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.611.1">apt install keepalived</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.612.1">Then, on </span><strong class="source-inline1"><span class="kobospan" id="kobo.613.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.614.1">, edit the </span><strong class="source-inline1"><span class="kobospan" id="kobo.615.1">keepalived</span></strong><span class="kobospan" id="kobo.616.1"> configuration with the </span><span><span class="kobospan" id="kobo.617.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.618.1">vim /etc/keepalived/</span><a id="_idTextAnchor094" class="pcalibre calibre18 pcalibre1"/><span class="kobospan1" id="kobo.619.1">keepalived.conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.620.1">Delete</span><a id="_idTextAnchor095" class="pcalibre calibre6 pcalibre1"/> <a id="_idIndexMarker031" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.621.1">everything from this file (if it’s not empty already) and add the following text to </span><span><span class="kobospan" id="kobo.622.1">the file:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.623.1">
vrrp_track_process chk_nginx {
      process nginx
      weight 10
}
vrrp_instance ZBX_1 {
        state MASTER
        interface ens192
        virtual_router_id 51
        priority 244
        advert_int 1
        authentication {
                auth_type PASS
                auth_pass password
        }
        track_process {
                chk_nginx
        }
        virtual_ipaddress {
                192.168.0.5/24
        }
}</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.624.1">Do not forget to update </span><strong class="source-inline1"><span class="kobospan" id="kobo.625.1">password</span></strong><span class="kobospan" id="kobo.626.1"> to something secure and edit the </span><strong class="source-inline1"><span class="kobospan" id="kobo.627.1">ens192</span></strong><span class="kobospan" id="kobo.628.1"> interface to your own </span><span><span class="kobospan" id="kobo.629.1">interface name/number.</span></span></li>
</ol>
<p class="callout-heading"><span class="kobospan" id="kobo.630.1">Important note</span></p>
<p class="callout"><span class="kobospan" id="kobo.631.1">In the previous file, we specified </span><strong class="source-inline1"><span class="kobospan" id="kobo.632.1">virtual_router_id 51</span></strong><span class="kobospan" id="kobo.633.1">; make sure the virtual router ID </span><strong class="source-inline1"><span class="kobospan" id="kobo.634.1">51</span></strong><span class="kobospan" id="kobo.635.1"> isn’t used anywhere in the network yet. </span><span class="kobospan" id="kobo.635.2">If it is, simply change the virtual router ID throughout </span><span><span class="kobospan" id="kobo.636.1">this recipe.</span></span><a id="_idTextAnchor096" class="pcalibre calibre6 pcalibre1"/></p>
<ol class="calibre16">
<li value="5" class="calibre15"><span class="kobospan" id="kobo.637.1">On</span><a id="_idTextAnchor097" class="pcalibre calibre6 pcalibre1"/> <strong class="source-inline1"><span class="kobospan" id="kobo.638.1">lar-book-ha2</span></strong><span class="kobospan" id="kobo.639.1">, edit the same file with the </span><span><span class="kobospan" id="kobo.640.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.641.1">vim /etc/keepalived/keepalived.conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.642.1">Delete </span><a id="_idIndexMarker032" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.643.1">everything from the file with </span><strong class="source-inline1"><span class="kobospan" id="kobo.644.1">dG</span></strong><span class="kobospan" id="kobo.645.1"> (if you are using vim), and this time, we will add the </span><span><span class="kobospan" id="kobo.646.1">following information:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.647.1">
vrrp_track_process chk_nginx {
      process nginx
      weight 10
}
vrrp_instance ZBX_1 {
        state BACKUP
        interface ens192
        virtual_router_id 51
        priority 243
        advert_int 1
        authentication {
                auth_type PASS
                auth_pass password
        }
        track_process {
                chk_nginx
        }
        virtual_ipaddress {
                192.168</span><a id="_idTextAnchor098" class="pcalibre calibre18 pcalibre1"/><span class="kobospan1" id="kobo.648.1">.0.5/24
        }
}</span></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.649.1">Once again, do not forget to update </span><strong class="source-inline1"><span class="kobospan" id="kobo.650.1">password</span></strong><span class="kobospan" id="kobo.651.1"> to something secure and edit the </span><strong class="source-inline1"><span class="kobospan" id="kobo.652.1">ens192</span></strong><span class="kobospan" id="kobo.653.1"> interface to your own </span><span><span class="kobospan" id="kobo.654.1">interface name/number.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.655.1">Now, let’s </span><a id="_idIndexMarker033" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.656.1">install the </span><span><span class="kobospan" id="kobo.657.1">Zabbix frontend.</span></span><p class="calibre3"><span class="kobospan" id="kobo.658.1">For RHEL-based systems, run </span><span><span class="kobospan" id="kobo.659.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.660.1">dnf install nginx zabbix-web-mysql zabbix-nginx-conf zabbix-selinux-policy</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.661.1">For Ubuntu systems, run </span><span><span class="kobospan" id="kobo.662.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.663.1">apt install nginx zabbix-frontend-php zabbix-nginx-conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.664.1">We will then have to configure our </span><span><span class="kobospan" id="kobo.665.1">NGINX configuration.</span></span><p class="calibre3"><span class="kobospan" id="kobo.666.1">For RHEL-based systems, edit the </span><span><span class="kobospan" id="kobo.667.1">following file:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.668.1">/etc/nginx/conf.d/zabbix.conf</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.669.1">For Ubuntu systems, edit the </span><span><span class="kobospan" id="kobo.670.1">following file:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.671.1">/etc/zabbix/nginx.conf</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.672.1">Then, edit the following </span><span><span class="kobospan" id="kobo.673.1">two lines:</span></span><pre class="source-code"><span class="kobospan1" id="kobo.674.1">
# listen 8080;
# server_name example.com;</span></pre><p class="calibre3"><span class="kobospan" id="kobo.675.1">Make it look </span><span><span class="kobospan" id="kobo.676.1">like this:</span></span></p><pre class="source-code"><span class="kobospan1" id="kobo.677.1">listen 80;
server_name 192.168.0.5;</span></pre></li> </ol>
<p class="callout-heading"><span class="kobospan" id="kobo.678.1">Important note</span></p>
<p class="callout"><span class="kobospan" id="kobo.679.1">At </span><strong class="source-inline1"><span class="kobospan" id="kobo.680.1">server_name</span></strong><span class="kobospan" id="kobo.681.1">, it is important to add the IP address of where this NGINX (Zabbix) web page will be running. </span><span class="kobospan" id="kobo.681.2">Add the IP address or DNS name of where you want your frontend to be available here. </span><span class="kobospan" id="kobo.681.3">In this case, we have added the VIP address that </span><strong class="source-inline1"><span class="kobospan" id="kobo.682.1">keepalived</span></strong><span class="kobospan" id="kobo.683.1"> will </span><span><span class="kobospan" id="kobo.684.1">be managing.</span></span></p>
<ol class="calibre16">
<li value="11" class="calibre15"><span class="kobospan" id="kobo.685.1">Start the </span><a id="_idIndexMarker034" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.686.1">web server and </span><strong class="source-inline1"><span class="kobospan" id="kobo.687.1">keepalived</span></strong><span class="kobospan" id="kobo.688.1"> to make your Zabbix frontend available with the </span><span><span class="kobospan" id="kobo.689.1">following command:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.690.1">systemctl enable nginx keepalived</span></strong>
<strong class="bold1"><span class="kobospan1" id="kobo.691.1">systemctl start nginx keepalived</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.692.1">Then, we are ready to configure our Zabbix frontend. </span><span class="kobospan" id="kobo.692.2">Navigate to your VIP address (in the example IP case, </span><strong class="source-inline1"><span class="kobospan" id="kobo.693.1">http://192.1</span><a id="_idTextAnchor099" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.694.1">68.0.5/</span></strong><span class="kobospan" id="kobo.695.1">), and </span><a id="_idTextAnchor100" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.696.1">you will</span><a id="_idTextAnchor101" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.697.1"> see the </span><span><span class="kobospan" id="kobo.698.1">following page:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer015">
<span class="kobospan" id="kobo.699.1"><img alt="Figure 1.9 – The Zabbix initial configuration window" src="image/B19803_01_09.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.700.1">Figure 1.9 – The Zabbix initial configuration window</span></p>
<ol class="calibre16">
<li value="13" class="calibre15"><span class="kobospan" id="kobo.701.1">Click on </span><strong class="bold"><span class="kobospan" id="kobo.702.1">Next step</span></strong><span class="kobospan" id="kobo.703.1"> twice </span><a id="_idIndexMarker035" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.704.1">until you</span><a id="_idTextAnchor102" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.705.1"> see the </span><span><span class="kobospan" id="kobo.706.1">following page:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer016">
<span class="kobospan" id="kobo.707.1"><img alt="Figure 1.10 – The Zabbix database configuration wind﻿ow for lar-book-ha1" src="image/B19803_01_10.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.708.1">Figure 1.10 – The Zabbix database configuration wind</span><a id="_idTextAnchor103" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.709.1">ow for lar-book-ha1</span></p>
<ol class="calibre16">
<li value="14" class="calibre15"><span class="kobospan" id="kobo.710.1">Make sure to fi</span><a id="_idTextAnchor104" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.711.1">ll in </span><strong class="bold"><span class="kobospan" id="kobo.712.1">Database host</span></strong><span class="kobospan" id="kobo.713.1"> with the IP address of our Zabbix MariaDB database (</span><strong class="source-inline1"><span class="kobospan" id="kobo.714.1">192.168.0.10</span></strong><span class="kobospan" id="kobo.715.1">). </span><span class="kobospan" id="kobo.715.2">Then, fill in the database password for our </span><strong class="source-inline1"><span class="kobospan" id="kobo.716.1">zabbix</span></strong> <span><span class="kobospan" id="kobo.717.1">database user.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.718.1">Then, for the </span><a id="_idIndexMarker036" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.719.1">last step, for our first node, set up </span><strong class="bold"><span class="kobospan" id="kobo.720.1">Zabbix server name</span></strong><span class="kobospan" id="kobo.721.1"> as </span><strong class="source-inline1"><span class="kobospan" id="kobo.722.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.723.1"> and select your time zone, as seen in t</span><a id="_idTextAnchor105" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.724.1">he </span><span><span class="kobospan" id="kobo.725.1">following screenshot:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer017">
<span class="kobospan" id="kobo.726.1"><img alt="Figure 1.11 – The Zabbix server settings win﻿dow for lar-book-ha1" src="image/B19803_01_11.JPG" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.727.1">Figure 1.11 – The Zabbix server settings win</span><a id="_idTextAnchor106" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.728.1">dow for lar-book-ha1</span></p>
<ol class="calibre16">
<li value="16" class="calibre15"><span class="kobospan" id="kobo.729.1">Then, click </span><strong class="bold"><span class="kobospan" id="kobo.730.1">Next step</span><a id="_idTextAnchor107" class="pcalibre calibre6 pcalibre1"/></strong> <span><span class="kobospan" id="kobo.731.1">and </span></span><span><strong class="bold"><span class="kobospan" id="kobo.732.1">Finish</span></strong></span><span><span class="kobospan" id="kobo.733.1">.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.734.1">Now, we need to do the same thing to our second frontend. </span><span class="kobospan" id="kobo.734.2">Log in </span><span><span class="kobospan" id="kobo.735.1">to </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.736.1">lar-book-ha1</span></strong></span><span><span class="kobospan" id="kobo.737.1">.</span></span><p class="calibre3"><span class="kobospan" id="kobo.738.1">On RHEL-based systems, issue </span><span><span class="kobospan" id="kobo.739.1">the following:</span></span></p><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.740.1">systemctl stop nginx</span></strong></pre><p class="calibre3"><span class="kobospan" id="kobo.741.1">For Ubuntu systems, issue </span><span><span class="kobospan" id="kobo.742.1">the following:</span></span></p><pre class="source-code"><strong class="bold1"><span class="kobospan1" id="kobo.743.1">systemctl stop nginx</span></strong></pre></li> <li class="calibre15"><span class="kobospan" id="kobo.744.1">When navigating to your VIP (in the example IP case, </span><strong class="source-inline1"><span class="kobospan" id="kobo.745.1">http://192.168.0.5/zabbix</span></strong><span class="kobospan" id="kobo.746.1">), you will see the same configuration </span><span><span class="kobospan" id="kobo.747.1">wizard again.</span></span></li>
<li class="calibre15"><span class="kobospan" id="kobo.748.1">Fill out </span><a id="_idIndexMarker037" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.749.1">the</span><a id="_idTextAnchor108" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.750.1"> database </span><span><span class="kobospan" id="kobo.751.1">details again:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer018">
<span class="kobospan" id="kobo.752.1"><img alt="Figure 1.12 – The Zabbix database configuration win﻿dow for lar-book-ha﻿2" src="image/B19803_01_12.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.753.1">Figure 1.12 – The Zabbix database configuration win</span><a id="_idTextAnchor109" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.754.1">dow for lar-book-ha</span><a id="_idTextAnchor110" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.755.1">2</span></p>
<ol class="calibre16">
<li value="20" class="calibre15"><span class="kobospan" id="kobo.756.1">Then, make sure to set up </span><strong class="bold"><span class="kobospan" id="kobo.757.1">Zabbix server name</span></strong><span class="kobospan" id="kobo.758.1"> as </span><strong class="source-inline1"><span class="kobospan" id="kobo.759.1">lar-book-ha2</span></strong><span class="kobospan" id="kobo.760.1">, as seen in th</span><a id="_idTextAnchor111" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.761.1">e </span><span><span class="kobospan" id="kobo.762.1">following screenshot:</span></span></li>
</ol>
<div class="calibre2">
<div class="img---figure" id="_idContainer019">
<span class="kobospan" id="kobo.763.1"><img alt="Figure 1.13 – The Zabbix server settings window f﻿or lar-book-ha2" src="image/B19803_01_13.JPG" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.764.1">Figure 1.13 – The Zabbix server settings window f</span><a id="_idTextAnchor112" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.765.1">or lar-book-ha2</span></p>
<ol class="calibre16">
<li value="21" class="calibre15"><a id="_idTextAnchor113" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.766.1">Now, we need to enable the </span><strong class="source-inline1"><span class="kobospan" id="kobo.767.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.768.1"> frontend again by issuing </span><span><span class="kobospan" id="kobo.769.1">the following:</span></span><pre class="source-code">
<strong class="bold1"><span class="kobospan1" id="kobo.770.1">systemctl start nginx</span></strong></pre></li> </ol>
<p class="calibre3"><span class="kobospan" id="kobo.771.1">That should be our last step. </span><span class="kobospan" id="kobo.771.2">Everything should now be working as expected. </span><span class="kobospan" id="kobo.771.3">Make sure to check your Zabbix server log file to see if the HA nodes a</span><a id="_idTextAnchor114" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor115" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.772.1">re running </span><span><span class="kobospan" id="kobo.773.1">as expected.</span></span></p>
<h2 id="_idParaDest-37" class="calibre7"><span class="kobospan" id="kobo.774.1">How</span><a id="_idTextAnchor116" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.775.1"> it works...</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.776.1">Now that </span><a id="_idIndexMarker038" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.777.1">we have done it, how does the Zabbix server actually work in an HA mode? </span><span class="kobospan" id="kobo.777.2">Let’s start by checking out the </span><strong class="bold"><span class="kobospan" id="kobo.778.1">Reports</span></strong><span class="kobospan" id="kobo.779.1"> | </span><strong class="bold"><span class="kobospan" id="kobo.780.1">System information</span></strong><span class="kobospan" id="kobo.781.1"> page </span><a id="_idTextAnchor117" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.782.1">on our </span><span><span class="kobospan" id="kobo.783.1">Zabbix frontend:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer020">
<span class="kobospan" id="kobo.784.1"><img alt="Figure 1.14 – The Zabbix server system information with HA information" src="image/B19803_01_14.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.785.1">Figure 1.14 – The Zabbix server system information with HA information</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.786.1">We can now see that we have some new information available; for example, the </span><strong class="bold"><span class="kobospan" id="kobo.787.1">High availability cluster</span></strong><span class="kobospan" id="kobo.788.1"> parameter. </span><span class="kobospan" id="kobo.788.2">This parameter now tells us if HA is enabled or not and what the failover delay is. </span><span class="kobospan" id="kobo.788.3">In our case, this is 1 minute, meaning that it could take up to 1 minute before failover </span><span><span class="kobospan" id="kobo.789.1">is initiated.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.790.1">Furthermore, we can see every single node in our cluster. </span><span class="kobospan" id="kobo.790.2">As Zabbix n</span><a id="_idTextAnchor118" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.791.1">ow supports one to many nodes in a cluster, we can see every single one taking part in our cluster right here. </span><span class="kobospan" id="kobo.791.2">Let’s take a look at th</span><a id="_idTextAnchor119" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.792.1">e setup we </span><span><span class="kobospan" id="kobo.793.1">have built:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer021">
<span class="kobospan" id="kobo.794.1"><img alt="Figure 1.15 – The Zabbix server HA setup" src="image/B19803_01_15.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.795.1">Figure 1.15 – The Zabbix server HA setup</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.796.1">As you can see in the setup, we have connected our two Zabbix server nodes, </span><strong class="source-inline"><span class="kobospan" id="kobo.797.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.798.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.799.1">lar-book-ha2</span></strong><span class="kobospan" id="kobo.800.1">, to our single Zabbix database, </span><strong class="source-inline"><span class="kobospan" id="kobo.801.1">lar-book-ha-db</span></strong><span class="kobospan" id="kobo.802.1">. </span><span class="kobospan" id="kobo.802.2">Because our </span><a id="_idIndexMarker039" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.803.1">Zabbix database is our </span><strong class="bold"><span class="kobospan" id="kobo.804.1">single source of truth</span></strong><span class="kobospan" id="kobo.805.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.806.1">SSOT</span></strong><span class="kobospan" id="kobo.807.1">), it can be </span><a id="_idIndexMarker040" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.808.1">used to keep our cluster configuration as well. </span><span class="kobospan" id="kobo.808.2">In the end, everything Zabbix does is always kept in the database, from host configuration to history data to HA information. </span><span class="kobospan" id="kobo.808.3">That’s why building a Zabbix cluster is as simple as putting the </span><strong class="source-inline"><span class="kobospan" id="kobo.809.1">HANodeName</span></strong><span class="kobospan" id="kobo.810.1"> value in the Zabbix server </span><span><span class="kobospan" id="kobo.811.1">configuration file.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.812.1">We also included the </span><strong class="source-inline"><span class="kobospan" id="kobo.813.1">NodeAddress</span></strong><span class="kobospan" id="kobo.814.1"> parameter in the configuration file. </span><span class="kobospan" id="kobo.814.2">This parameter is used by the Zabbix frontend to make sure that our system information (widget) and Zabbix server are not running frontend notification work. </span><span class="kobospan" id="kobo.814.3">The </span><strong class="source-inline"><span class="kobospan" id="kobo.815.1">NodeAddress</span></strong><span class="kobospan" id="kobo.816.1"> parameter will tell the frontend which IP address to connect to for each respective server once it becomes the active </span><span><span class="kobospan" id="kobo.817.1">Zabbi</span><a id="_idTextAnchor120" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.818.1">x server.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.819.1">To take things a bit further, I have added a simple </span><strong class="source-inline"><span class="kobospan" id="kobo.820.1">keepalived</span></strong><span class="kobospan" id="kobo.821.1"> setup to this installation as well. </span><span class="kobospan" id="kobo.821.2">A </span><strong class="source-inline"><span class="kobospan" id="kobo.822.1">keepalived</span></strong><span class="kobospan" id="kobo.823.1"> configuration is a way to build simple VRRP failover setups between Linux servers. </span><span class="kobospan" id="kobo.823.2">In our case, we have entered the VIP as </span><strong class="source-inline"><span class="kobospan" id="kobo.824.1">192.168.0.5</span></strong><span class="kobospan" id="kobo.825.1"> and added the </span><strong class="source-inline"><span class="kobospan" id="kobo.826.1">chk_nginx</span></strong><span class="kobospan" id="kobo.827.1"> process monitoring to determine when to fail over. </span><span class="kobospan" id="kobo.827.2">Our failover works </span><span><span class="kobospan" id="kobo.828.1">as follows:</span></span></p>
<pre class="console"><span class="kobospan1" id="kobo.829.1">
lar-book-ha1 has priority 244
lar-book-ha2 has priority 243</span></pre> <p class="calibre3"><span class="kobospan" id="kobo.830.1">If NGINX is running on our node, that adds a weight of 10 to our priority, leading to the total priority of </span><strong class="source-inline"><span class="kobospan" id="kobo.831.1">254</span></strong><span class="kobospan" id="kobo.832.1"> and </span><strong class="source-inline"><span class="kobospan" id="kobo.833.1">253</span></strong><span class="kobospan" id="kobo.834.1">, respectively. </span><span class="kobospan" id="kobo.834.2">Now, let’s imagine that </span><strong class="source-inline"><span class="kobospan" id="kobo.835.1">lar-book-ha1</span></strong><span class="kobospan" id="kobo.836.1"> no longer has the web server process running. </span><span class="kobospan" id="kobo.836.2">That means its priority drops to </span><strong class="source-inline"><span class="kobospan" id="kobo.837.1">244</span></strong><span class="kobospan" id="kobo.838.1">, which is lower than </span><strong class="source-inline"><span class="kobospan" id="kobo.839.1">253</span></strong><span class="kobospan" id="kobo.840.1"> on </span><strong class="source-inline"><span class="kobospan" id="kobo.841.1">lar-book-ha2</span></strong><span class="kobospan" id="kobo.842.1">, which does have the web server </span><span><span class="kobospan" id="kobo.843.1">process running.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.844.1">Whichever host </span><a id="_idIndexMarker041" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.845.1">has the highest priority is the host that will have the </span><strong class="source-inline"><span class="kobospan" id="kobo.846.1">192.168.0.5</span></strong><span class="kobospan" id="kobo.847.1"> VIP, meaning that host is running the Zabbix frontend, which will </span><span><span class="kobospan" id="kobo.848.1">be served.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.849.1">Combining these two ways of setting up HA, we have just created redundancy for two of the parts that make up our Zabbix setup, making sure we can k</span><a id="_idTextAnchor121" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor122" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.850.1">eep outages to </span><span><span class="kobospan" id="kobo.851.1">a minimum.</span></span></p>
<h2 id="_idParaDest-38" class="calibre7"><a id="_idTextAnchor123" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.852.1">There’s more...</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.853.1">Now, you may wonder, what if I wanted to go further in terms of setting up HA? </span><span class="kobospan" id="kobo.853.2">First, the Zabbix HA feature is built to be simple and understandable to the entire Zabbix user base, meaning that as of now, you might not see the same amount of features you would get with a </span><span><span class="kobospan" id="kobo.854.1">third-party implementation.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.855.1">Nevertheless, the new Zabbix server HA feature has proved itself to be a long-awaited feature that really adds something to the table. </span><span class="kobospan" id="kobo.855.2">If you want to run an HA setup such as this, the best way to add one more level of complexity to HA is a MySQL master/master setup. </span><span class="kobospan" id="kobo.855.3">Setting up </span><a id="_idIndexMarker042" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.856.1">the Zabbix database with HA, which is the main </span><strong class="bold"><span class="kobospan" id="kobo.857.1">source of truth</span></strong><span class="kobospan" id="kobo.858.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.859.1">SOT</span></strong><span class="kobospan" id="kobo.860.1">), will make sure that your Zabbix setup really is reliable in as many ways </span><a id="_idIndexMarker043" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.861.1">as possible. </span><span class="kobospan" id="kobo.861.2">For more information regarding MariaDB replication, check out the documentation </span><span><span class="kobospan" id="kobo.862.1">here: </span></span><a href="https://mariadb.com/kb/en/standard-replication/" class="pcalibre calibre6 pcalibre1"><span><span class="kobospan" id="kobo.863.1">https://mariadb.com/k</span><span id="_idTextAnchor124"/><span id="_idTextAnchor125"/><span class="kobospan" id="kobo.864.1">b/en/standard-replication/</span></span></a><span><span class="kobospan" id="kobo.865.1">.</span></span></p>
<h1 id="_idParaDest-39" class="calibre5"><span class="kobospan" id="kobo.866.1">Using the Zab</span><a id="_idTextAnchor126" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.867.1">bix frontend</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.868.1">If this is your first time using Zabbix, congratulations on getting to the UI. </span><span class="kobospan" id="kobo.868.2">If you are a returning </span><a id="_idIndexMarker044" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.869.1">Zabbix user, there have been some changes to the Zabbix 7 UI that you might notice. </span><span class="kobospan" id="kobo.869.2">We’ll be going over some of the different elements that we can find in the Zabbix frontend so that during this book, you’ll feel confident in </span><a id="_idTextAnchor127" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor128" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.870.1">finding everything </span><span><span class="kobospan" id="kobo.871.1">you need.</span></span></p>
<h2 id="_idParaDest-40" class="calibre7"><a id="_idTextAnchor129" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.872.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.873.1">To get started with the Zabbix UI, all we need to do is log in to the frontend. </span><span class="kobospan" id="kobo.873.2">You will be served with the following page at the IP on which your server is r</span><a id="_idTextAnchor130" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.874.1">unning the </span><span><span class="kobospan" id="kobo.875.1">Zabbix frontend:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer022">
<span class="kobospan" id="kobo.876.1"><img alt="Figure 1.16 – The Z﻿abbix login screen" src="image/B19803_01_16.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.877.1">Figure 1.16 – The Z</span><a id="_idTextAnchor131" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.878.1">abbix login screen</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.879.1">Make sure you log in to the Zabbix frontend with the </span><span><span class="kobospan" id="kobo.880.1">default credentials:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.881.1">Username</span></strong></span><span><span class="kobospan" id="kobo.882.1">: </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.883.1">Admin</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.884.1">Password</span></strong></span><span><span class="kobospan" id="kobo.885.1">: </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.886.1">zabbix</span></strong></span></li>
</ul>
<p class="callout-heading"><span class="kobospan" id="kobo.887.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.888.1">Just like in Linux, Zabbix is case-sensitive in most places. </span><span class="kobospan" id="kobo.888.2">When entering your username, make sure to include the right cases; otherwise, y</span><a id="_idTextAnchor132" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor133" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.889.1">ou won’t be able to </span><span><span class="kobospan" id="kobo.890.1">log in!</span></span></p>
<h2 id="_idParaDest-41" class="calibre7"><a id="_idTextAnchor134" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.891.1">How to do it…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.892.1">After you log in, you’ll be served with the default page, which is the default dashboard. </span><span class="kobospan" id="kobo.892.2">This is what </span><a id="_idIndexMarker045" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.893.1">Zabbix has called </span><strong class="bold"><span class="kobospan" id="kobo.894.1">Global view</span></strong><span class="kobospan" id="kobo.895.1">, and it provides us </span><a id="_idIndexMarker046" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.896.1">with a nice overview of what’s going on. </span><span class="kobospan" id="kobo.896.2">We can completely customize this and all the other dashboards that Zabbix supplies, but it’s a good idea to familiarize yourself with the default setup be</span><a id="_idTextAnchor135" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.897.1">fore building </span><span><span class="kobospan" id="kobo.898.1">something new:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer023">
<span class="kobospan" id="kobo.899.1"><img alt="Figure 1.17 – The Global ﻿view dashboard" src="image/1.17.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.900.1">Figure 1.17 – The Global </span><a id="_idTextAnchor136" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.901.1">view dashboard</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.902.1">So, let’s get started on getting to know this Zabbix 7 frontend by looking at the default dashboard. </span><span class="kobospan" id="kobo.902.2">Please follow along in the frontend by clicking and checking out the </span><span><span class="kobospan" id="kobo.903.1">content mentioned.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.904.1">Zabbix uses dashboards, and they are filled with widgets to show you information. </span><span class="kobospan" id="kobo.904.2">Let’s go over the different widgets in the default dashboard and detail </span><span><span class="kobospan" id="kobo.905.1">their information.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.906.1">Let’s start with the</span><a id="_idTextAnchor137" class="pcalibre calibre6 pcalibre1"/> <strong class="bold"><span class="kobospan" id="kobo.907.1">System </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.908.1">information</span></strong></span><span><span class="kobospan" id="kobo.909.1"> widget:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer024">
<span class="kobospan" id="kobo.910.1"><img alt="Figure 1.18 – The System information widget" src="image/B19803_01_18.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.911.1">Figure 1.18 – The System information widget</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.912.1">The </span><strong class="bold"><span class="kobospan" id="kobo.913.1">System information</span></strong><span class="kobospan" id="kobo.914.1"> widget, as you might have </span><a id="_idTextAnchor138" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.915.1">guessed, details all system information </span><a id="_idIndexMarker047" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.916.1">for you. </span><span class="kobospan" id="kobo.916.2">This way, we can keep an eye on what’s going on with our Zabbix server and see whether our Zabbix server is </span><span><span class="kobospan" id="kobo.917.1">even running.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.918.1">Let’s go </span><a id="_idIndexMarker048" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.919.1">over </span><span><span class="kobospan" id="kobo.920.1">the parameters:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.921.1">Zabbix server is running</span></strong><span class="kobospan" id="kobo.922.1">: Informs us whether the Zabbix server backend is actually running and where it is running. </span><span class="kobospan" id="kobo.922.2">In this case, it’s running, and it’s running </span><span><span class="kobospan" id="kobo.923.1">on </span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.924.1">localhost:10051</span></strong></span><span><span class="kobospan" id="kobo.925.1">.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.926.1">Zabbix server version</span></strong><span class="kobospan" id="kobo.927.1">/</span><strong class="bold"><span class="kobospan" id="kobo.928.1">Zabbix frontend version</span></strong><span class="kobospan" id="kobo.929.1">: We now have separate indicators that will detail what the versions of our Zabbix server and </span><span><span class="kobospan" id="kobo.930.1">frontend are.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.931.1">Software update last checked</span></strong><span class="kobospan" id="kobo.932.1">: This is another new addition. </span><span class="kobospan" id="kobo.932.2">Zabbix will now check for new releases for you, indicating in the column below what the latest </span><span><span class="kobospan" id="kobo.933.1">release is.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.934.1">Latest release</span></strong><span class="kobospan" id="kobo.935.1">: This will detail the latest available version </span><span><span class="kobospan" id="kobo.936.1">of Zabbix.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.937.1">Number of hosts (enabled/disabled)</span></strong><span class="kobospan" id="kobo.938.1">: This will detail the number of hosts enabled (</span><strong class="source-inline1"><span class="kobospan" id="kobo.939.1">15</span></strong><span class="kobospan" id="kobo.940.1">) and the number of hosts </span><span><span class="kobospan" id="kobo.941.1">disabled (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.942.1">5</span></strong></span><span><span class="kobospan" id="kobo.943.1">).</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.944.1">Number of templates</span></strong><span class="kobospan" id="kobo.945.1">: This details the total number of templates we </span><span><span class="kobospan" id="kobo.946.1">have (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.947.1">284</span></strong></span><span><span class="kobospan" id="kobo.948.1">).</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.949.1">Number of items (enabled/disabled/not supported)</span></strong><span class="kobospan" id="kobo.950.1">: Here, we can see details of </span><a id="_idIndexMarker049" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.951.1">our Zabbix server’s items—in this case, enabled (</span><strong class="source-inline1"><span class="kobospan" id="kobo.952.1">564</span></strong><span class="kobospan" id="kobo.953.1">), disabled (</span><strong class="source-inline1"><span class="kobospan" id="kobo.954.1">240</span></strong><span class="kobospan" id="kobo.955.1">), and not </span><span><span class="kobospan" id="kobo.956.1">supported (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.957.1">216</span></strong></span><span><span class="kobospan" id="kobo.958.1">).</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.959.1">Number of triggers (enabled/disabled [problem/ok]</span></strong><span class="kobospan" id="kobo.960.1">: This details the number of triggers. </span><span class="kobospan" id="kobo.960.2">We can see how many are enabled (</span><strong class="source-inline1"><span class="kobospan" id="kobo.961.1">371</span></strong><span class="kobospan" id="kobo.962.1">) and disabled (</span><strong class="source-inline1"><span class="kobospan" id="kobo.963.1">38</span></strong><span class="kobospan" id="kobo.964.1">), but also how many are in a </span><strong class="bold"><span class="kobospan" id="kobo.965.1">problem</span></strong><span class="kobospan" id="kobo.966.1"> state (</span><strong class="source-inline1"><span class="kobospan" id="kobo.967.1">13</span></strong><span class="kobospan" id="kobo.968.1">) and how many are in an </span><strong class="bold"><span class="kobospan" id="kobo.969.1">ok</span></strong> <span><span class="kobospan" id="kobo.970.1">state (</span></span><span><strong class="source-inline1"><span class="kobospan" id="kobo.971.1">358</span></strong></span><span><span class="kobospan" id="kobo.972.1">).</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.973.1">Number of users (online)</span></strong><span class="kobospan" id="kobo.974.1">: The first value details the total number of users. </span><span class="kobospan" id="kobo.974.2">The second value details the number of users currently logged in to the </span><span><span class="kobospan" id="kobo.975.1">Zabbix frontend.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.976.1">Required server performance, new values per second</span></strong><span class="kobospan" id="kobo.977.1">: Perhaps I’m introducing </span><a id="_idIndexMarker050" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.978.1">you to a completely new concept here, which is </span><strong class="bold"><span class="kobospan" id="kobo.979.1">Ne</span><a id="_idTextAnchor139" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.980.1">w Values Per Second</span></strong><span class="kobospan" id="kobo.981.1">, or </span><strong class="bold"><span class="kobospan" id="kobo.982.1">NVPS</span></strong><span class="kobospan" id="kobo.983.1">. </span><span class="kobospan" id="kobo.983.2">A server receives or requests values through items and writes these to our MariaDB database (or another</span><a id="_idTextAnchor140" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.984.1"> database). </span><span class="kobospan" id="kobo.984.2">The NVPS information detailed here shows the estimated number of NVPS received by the Zabbix server. </span><span class="kobospan" id="kobo.984.3">Keep a close eye on this as your Zabbix server grows, as it’s a good indicator to see how quickly you should </span><span><span class="kobospan" id="kobo.985.1">scale up.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.986.1">High availability cluster</span></strong><span class="kobospan" id="kobo.987.1">: If you are running a Zabbix server HA cluster, you will see if it is enabled here and what the failover delay is. </span><span class="kobospan" id="kobo.987.2">Additionally, the </span><strong class="bold"><span class="kobospan" id="kobo.988.1">System information</span></strong><span class="kobospan" id="kobo.989.1"> page will display extra </span><span><span class="kobospan" id="kobo.990.1">HA information.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.991.1">You might also see two additional values here depending on </span><span><span class="kobospan" id="kobo.992.1">your setup:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.993.1">Database history tables upgraded</span></strong><span class="kobospan" id="kobo.994.1">: If you see this, it indicates that one of your database history tables hasn’t been upgraded yet. </span><span class="kobospan" id="kobo.994.2">Numeric (float) tables have been expanded to allow for more characters to be saved per data point. </span><span class="kobospan" id="kobo.994.3">This table isn’t upgraded automatically coming from Zabbix 4 to 5 or higher, as not everyone needs it, and it might take a long time </span><span><span class="kobospan" id="kobo.995.1">to upgrade.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.996.1">Database name</span></strong><span class="kobospan" id="kobo.997.1">: If you see the name of your database with the value of your version, it might indicate you are running a non-supported database version. </span><span class="kobospan" id="kobo.997.2">You could see a message such as </span><strong class="source-inline1"><span class="kobospan" id="kobo.998.1">Warning! </span><span class="kobospan" id="kobo.998.2">Unsupported &lt;DATABASE NAME&gt; database server version. </span><span class="kobospan" id="kobo.998.3">Should be at least &lt;</span></strong><span><strong class="source-inline1"><span class="kobospan" id="kobo.999.1">DATABASE VERSION&gt;</span></strong></span><span><span class="kobospan" id="kobo.1000.1">.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1001.1">Now, that’s </span><a id="_idIndexMarker051" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1002.1">one of the most important widgets when it comes to your Zabbix server, and it’s a great one to keep on your main dashboard if you </span><span><span class="kobospan" id="kobo.1003.1">ask me.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1004.1">Let’s move on to the </span><a id="_idTextAnchor141" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1005.1">next widget, </span><span><strong class="bold"><span class="kobospan" id="kobo.1006.1">Host availability</span></strong></span><span><span class="kobospan" id="kobo.1007.1">:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer025">
<span class="kobospan" id="kobo.1008.1"><img alt="Figure 1.19 – The Host availability widg﻿et" src="image/B19803_01_19.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1009.1">Figure 1.19 – The Host availability widg</span><a id="_idTextAnchor142" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1010.1">et</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1011.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1012.1">Host availability</span></strong><span class="kobospan" id="kobo.1013.1"> widget is a quick overview widget showing you everything you want to know about your monitored host’s availability status. </span><span class="kobospan" id="kobo.1013.2">In this widget, it shows whether the host is available, not available, or unknown. </span><span class="kobospan" id="kobo.1013.3">This way, you get a good overview of the availability of all hosts you could be monitoring with your Zabbix server in a </span><span><span class="kobospan" id="kobo.1014.1">single widget.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1015.1">Next to it is the </span><strong class="bold"><span class="kobospan" id="kobo.1016.1">Problems by </span></strong><span><strong class="bold"><span class="kobospan" id="kobo.1017.1">severity</span></strong></span><span><span class="kobospan" id="kobo.1018.1"> widget:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer026">
<span class="kobospan" id="kobo.1019.1"><img alt="Figure 1.20 – The Problems by severity widget" src="image/B19803_01_20.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1020.1">Figure 1.20 – The Problems by severity widget</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1021.1">It shows you how many hosts currently have a trigger in a certain state. </span><span class="kobospan" id="kobo.1021.2">There are several default severities </span><span><span class="kobospan" id="kobo.1022.1">in Zabbix:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.1023.1">Disaster</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.1024.1">High</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.1025.1">Average</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.1026.1">Warning</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.1027.1">Information</span></strong></span></li>
<li class="calibre15"><span><strong class="bold"><span class="kobospan" id="kobo.1028.1">Not classified</span></strong></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1029.1">We can fully </span><a id="_idIndexMarker052" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1030.1">customize the severity levels and colors; for example, what severity levels we want to put on which triggers. </span><span class="kobospan" id="kobo.1030.2">So, if you are worried about the severities right now, don’t be. </span><span class="kobospan" id="kobo.1030.3">We’ll get to </span><span><span class="kobospan" id="kobo.1031.1">that later.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.1032.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.1033.1">Customizing the severity levels and colors can be very useful to your organization. </span><span class="kobospan" id="kobo.1033.2">We can customize the severity levels to match levels used throughout our company or even to match some of our oth</span><a id="_idTextAnchor143" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1034.1">er </span><span><span class="kobospan" id="kobo.1035.1">monitoring syst</span><a id="_idTextAnchor144" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1036.1">ems.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1037.1">The next widget </span><span><span class="kobospan" id="kobo.1038.1">is </span></span><span><strong class="bold"><span class="kobospan" id="kobo.1039.1">Clock</span></strong></span><span><span class="kobospan" id="kobo.1040.1">:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer027">
<span class="kobospan" id="kobo.1041.1"><img alt="Figure 1.21 – The Clock widget, indicating a time" src="image/B19803_01_21.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1042.1">Figure 1.21 – The Clock widget, indicating a time</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1043.1">It’s a clock with the local Linux system time, finally in a digital time format. </span><span class="kobospan" id="kobo.1043.2">Need I say more? </span><span class="kobospan" id="kobo.1043.3">Let’s mo</span><a id="_idTextAnchor145" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1044.1">ve on to the </span><span><strong class="bold"><span class="kobospan" id="kobo.1045.1">Problems</span></strong></span><span><span class="kobospan" id="kobo.1046.1"> widget:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer028">
<span class="kobospan" id="kobo.1047.1"><img alt="Figure 1.22 – One of the Problems widgets available" src="image/1.22.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1048.1">Figure 1.22 – One of the Problems widgets available</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1049.1">Now, this is an interesting widget that I use a lot. </span><span class="kobospan" id="kobo.1049.2">We see our current problems on this screen, so if we </span><a id="_idIndexMarker053" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1050.1">have our triggers set up correctly, we get valuable information here. </span><span class="kobospan" id="kobo.1050.2">A quick overview of how many hosts are having problems is one thing, but the </span><strong class="bold"><span class="kobospan" id="kobo.1051.1">Problems</span></strong><span class="kobospan" id="kobo.1052.1"> page also gives us more details about </span><span><span class="kobospan" id="kobo.1053.1">the problem:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1054.1">Time</span></strong><span class="kobospan" id="kobo.1055.1">: At what time this problem was first noticed by the </span><span><span class="kobospan" id="kobo.1056.1">Zabbix server</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1057.1">Info</span></strong><span class="kobospan" id="kobo.1058.1">: Information about the event, with </span><strong class="bold"><span class="kobospan" id="kobo.1059.1">Manual close</span></strong><span class="kobospan" id="kobo.1060.1"> and </span><strong class="bold"><span class="kobospan" id="kobo.1061.1">Suppressed</span></strong><span class="kobospan" id="kobo.1062.1"> statuses being </span><span><span class="kobospan" id="kobo.1063.1">represented here.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1064.1">Host</span></strong><span class="kobospan" id="kobo.1065.1">: What host this problem </span><span><span class="kobospan" id="kobo.1066.1">occurred on.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1067.1">Problem</span></strong><span class="kobospan" id="kobo.1068.1">/</span><strong class="bold"><span class="kobospan" id="kobo.1069.1">Severity</span></strong><span class="kobospan" id="kobo.1070.1">: What the problem is and how severe it is. </span><span class="kobospan" id="kobo.1070.2">The severity is shown in a color; in this case, orange, </span><span><span class="kobospan" id="kobo.1071.1">meaning </span></span><span><strong class="bold"><span class="kobospan" id="kobo.1072.1">Average</span></strong></span><span><span class="kobospan" id="kobo.1073.1">.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1074.1">Duration</span></strong><span class="kobospan" id="kobo.1075.1">: How long th</span><a id="_idTextAnchor146" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1076.1">is has been </span><span><span class="kobospan" id="kobo.1077.1">a problem.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1078.1">Update</span></strong><span class="kobospan" id="kobo.1079.1">: A button to allow us to make changes to this existing problem, such as acknowledging it or </span><span><span class="kobospan" id="kobo.1080.1">adding messages.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1081.1">Actions</span></strong><span class="kobospan" id="kobo.1082.1">: What actions have been taken after this problem occurred; for example, the problem being acknowledged or a custom script that executes on problem creation? </span><span class="kobospan" id="kobo.1082.2">If you hover over any action, it will show you detailed information about all actions that have been taken for </span><span><span class="kobospan" id="kobo.1083.1">this problem.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1084.1">Tags</span></strong><span class="kobospan" id="kobo.1085.1">: What tags are assigned to </span><span><span class="kobospan" id="kobo.1086.1">this problem?</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1087.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1088.1">Problems</span></strong><span class="kobospan" id="kobo.1089.1"> widget is very useful. </span><span class="kobospan" id="kobo.1089.2">We have different types of this widget available, and as mentioned before, it is completely customizable, based on how this widget shows our problems to us. </span><span class="kobospan" id="kobo.1089.3">Take a quick look at some of the options, which we’ll detail further in a </span><span><span class="kobospan" id="kobo.1090.1">later chapter:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer029">
<span class="kobospan" id="kobo.1091.1"><img alt="Figure 1.23 – The Add widget screen" src="image/B19803_01_23.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1092.1">Figure 1.23 – The Add widget screen</span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.1093.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.1094.1">We can hide severity levels from these widgets to make sure we only see important ones. </span><span class="kobospan" id="kobo.1094.2">Sometimes, we don’t want to see informational severity problems on our dashboards; it can distract us from a more important problem. </span><span class="kobospan" id="kobo.1094.3">Keep your dashboards clean by customizing widgets to their </span><span><span class="kobospan" id="kobo.1095.1">full extent.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1096.1">There’s also a very basic </span><strong class="bold"><span class="kobospan" id="kobo.1097.1">Graph</span></strong><span class="kobospan" id="kobo.1098.1"> widget included on the default dashboard. </span><span class="kobospan" id="kobo.1098.2">As you can see, it details </span><a id="_idIndexMarker054" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1099.1">the number of processed values per second. </span><span class="kobospan" id="kobo.1099.2">As we said, </span><strong class="bold"><span class="kobospan" id="kobo.1100.1">System information</span></strong><span class="kobospan" id="kobo.1101.1"> gives us an estimate on this value. </span><span class="kobospan" id="kobo.1101.2">The </span><strong class="bold"><span class="kobospan" id="kobo.1102.1">Graph</span></strong><span class="kobospan" id="kobo.1103.1"> widget gives us a more accurate and </span><span><span class="kobospan" id="kobo.1104.1">detailed look:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer030">
<span class="kobospan" id="kobo.1105.1"><img alt="F﻿igure 1.24 – The Graph widget" src="image/B19803_01_24.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1106.1">F</span><a id="_idTextAnchor147" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1107.1">igure 1.24 – The Graph widget</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1108.1">These graph widgets are also fully customizable, and we will talk about them more later in </span><span><span class="kobospan" id="kobo.1109.1">the book.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1110.1">Some newer widgets you will find on this page are the </span><strong class="bold"><span class="kobospan" id="kobo.1111.1">Top hosts</span></strong><span class="kobospan" id="kobo.1112.1">, </span><strong class="bold"><span class="kobospan" id="kobo.1113.1">Item value</span></strong><span class="kobospan" id="kobo.1114.1">, and </span><strong class="bold"><span class="kobospan" id="kobo.1115.1">Geomap</span></strong><span class="kobospan" id="kobo.1116.1"> widgets. </span><span class="kobospan" id="kobo.1116.2">Starting with the </span><strong class="bold"><span class="kobospan" id="kobo.1117.1">Top hosts</span></strong><span class="kobospan" id="kobo.1118.1"> widget, let’s have a closer look </span><span><span class="kobospan" id="kobo.1119.1">at these:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer031">
<span class="kobospan" id="kobo.1120.1"><img alt="Figure 1.25 – The Top hosts widget" src="image/B19803_01_25.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1121.1">Figure 1.25 – The Top hosts widget</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1122.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1123.1">Top hosts</span></strong><span class="kobospan" id="kobo.1124.1"> widget is fully customizable to show us a list of any item we want. </span><span class="kobospan" id="kobo.1124.2">We can then </span><a id="_idIndexMarker055" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1125.1">sort that list to show us the item with the highest (</span><strong class="bold"><span class="kobospan" id="kobo.1126.1">Top N</span></strong><span class="kobospan" id="kobo.1127.1">) or Lowest (</span><strong class="bold"><span class="kobospan" id="kobo.1128.1">Bottom N</span></strong><span class="kobospan" id="kobo.1129.1">) values, giving us a great overview of—in this case—hosts with the highest </span><span><span class="kobospan" id="kobo.1130.1">CPU load.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1131.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1132.1">Item value</span></strong><span class="kobospan" id="kobo.1133.1"> widget is also super useful, showing us a single </span><span><span class="kobospan" id="kobo.1134.1">item value:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer032">
<span class="kobospan" id="kobo.1135.1"><img alt="Figure 1.26 – The Item value widget" src="image/B19803_01_26.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1136.1">Figure 1.26 – The Item value widget</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1137.1">Then, last, we have the </span><strong class="bold"><span class="kobospan" id="kobo.1138.1">Geomap</span></strong><span class="kobospan" id="kobo.1139.1"> widget: a geographical map with a representation of all the hosts we would like to add. </span><span class="kobospan" id="kobo.1139.2">As you can see, by default, our Zabbix server is already included. </span><span class="kobospan" id="kobo.1139.3">In our case, I’ve made sure to update the location of our Zabbix server to our main office in </span><span><span class="kobospan" id="kobo.1140.1">the Netherlands:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer033">
<span class="kobospan" id="kobo.1141.1"><img alt="Figure 1.27 – The Geomap widget" src="image/B19803_01_27.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1142.1">Figure 1.27 – The Geomap widget</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1143.1">It also shows </span><a id="_idIndexMarker056" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1144.1">us that the Zabbix server currently has no issues, as the icon is green. </span><span class="kobospan" id="kobo.1144.2">If there is a problem the icon will show in the colour of the severit</span><a id="_idTextAnchor148" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1145.1">y of </span><span><span class="kobospan" id="kobo.1146.1">the problem.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1147.1">We now know how to work with the Zabbix frontend and can continue further on with h</span><a id="_idTextAnchor149" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor150" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1148.1">ow to navigate </span><span><span class="kobospan" id="kobo.1149.1">our instance.</span></span></p>
<h1 id="_idParaDest-42" class="calibre5"><span class="kobospan" id="kobo.1150.1">Navigating the Z</span><a id="_idTextAnchor151" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1151.1">abbix frontend</span></h1>
<p class="calibre3"><span class="kobospan" id="kobo.1152.1">Navigating the </span><a id="_idIndexMarker057" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1153.1">Zabbix frontend is easier than it looks at first glance, especially with some of the amazing changes made to the UI starting from Zabbix 5.0 and continuing into Zabbix 7.0. </span><span class="kobospan" id="kobo.1153.2">Let’s explore the Zabbix navigational UI some more in this recipe by looking at the navigation </span><a id="_idTextAnchor152" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor153" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1154.1">bar and what it has </span><span><span class="kobospan" id="kobo.1155.1">to offer.</span></span></p>
<h2 id="_idParaDest-43" class="calibre7"><a id="_idTextAnchor154" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1156.1">Getting ready</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.1157.1">Now that we’ve seen the first page after logging in with the default dashboard, it is time to start navigating through the Zabbix UI and see some of the other pages available. </span><span class="kobospan" id="kobo.1157.2">We’ll move through the sidebar and explore the pages available in our Zabbix installation so that when we start monitoring our networks and applications, we know where we can </span><span><span class="kobospan" id="kobo.1158.1">find everything.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1159.1">So, before continuing, make sure you have the Zabbix server ready as se</span><a id="_idTextAnchor155" class="pcalibre calibre6 pcalibre1"/><a id="_idTextAnchor156" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1160.1">t up in the </span><span><span class="kobospan" id="kobo.1161.1">previous recipes.</span></span></p>
<h2 id="_idParaDest-44" class="calibre7"><a id="_idTextAnchor157" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1162.1">How to do it…</span></h2>
<p class="calibre3"><span class="kobospan" id="kobo.1163.1">The Zabbix navigation bar is the gateway to all of our powerful tools and configuration settings. </span><span class="kobospan" id="kobo.1163.2">Zabbix uses a left-side navigation bar to keep our UI as clean as possible. </span><span class="kobospan" id="kobo.1163.3">On top of that, they have made the sidebar disappear so that we can keep a close look at all of our content without the sidebar blocking </span><span><span class="kobospan" id="kobo.1164.1">our vision.</span></span></p>
<p class="callout-heading"><span class="kobospan" id="kobo.1165.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.1166.1">We cannot change the Zabbix navigation menu location, but it is possible to hide it to a smaller form or completely hide it. </span><span class="kobospan" id="kobo.1166.2">If you want the navigation bar to be hidden (or not), click the first icon on the right side of the Zabbix logo. </span><span class="kobospan" id="kobo.1166.3">If you want to fully hide the navigation bar, click the second icon on the right side o</span><a id="_idTextAnchor158" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1167.1">f the </span><span><span class="kobospan" id="kobo.1168.1">Zabbix logo.</span></span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1169.1">Let’s take a look at the Zabbix sidebar as we see it from our default page and get to know it. </span><span class="kobospan" id="kobo.1169.2">Please follow along in the frontend by clicking and checkin</span><a id="_idTextAnchor159" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1170.1">g out the </span><span><span class="kobospan" id="kobo.1171.1">content mentioned:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer034">
<span class="kobospan" id="kobo.1172.1"><img alt="Figure 1.28 – The default Zabbix page as seen in your own web browser" src="image/1.17.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1173.1">Figure 1.28 – The default Zabbix page as seen in your own web browser</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1174.1">We’ve got </span><a id="_idIndexMarker058" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1175.1">some categories here to choose from, and one level below the categories, we’ve got our different pages. </span><span class="kobospan" id="kobo.1175.2">First, let’s start by detailing </span><span><span class="kobospan" id="kobo.1176.1">the categories:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1177.1">Monitoring</span></strong><span class="kobospan" id="kobo.1178.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1179.1">Monitoring</span></strong><span class="kobospan" id="kobo.1180.1"> category is where we can find all information about our </span><a id="_idIndexMarker059" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1181.1">collected data. </span><span class="kobospan" id="kobo.1181.2">It’s basically the category you want to use when you’re working with Zabbix to read any collected information you’ve worked hard </span><span><span class="kobospan" id="kobo.1182.1">to acquire.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1183.1">Services</span></strong><span class="kobospan" id="kobo.1184.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1185.1">Services</span></strong><span class="kobospan" id="kobo.1186.1"> category </span><a id="_idIndexMarker060" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1187.1">is new to </span><a id="_idIndexMarker061" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1188.1">Zabbix 7 and comes as part of the improved </span><strong class="bold"><span class="kobospan" id="kobo.1189.1">Business Service Monitoring</span></strong><span class="kobospan" id="kobo.1190.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.1191.1">BSM</span></strong><span class="kobospan" id="kobo.1192.1">) features. </span><span class="kobospan" id="kobo.1192.2">We can find all the </span><a id="_idIndexMarker062" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1193.1">information regarding service and </span><strong class="bold"><span class="kobospan" id="kobo.1194.1">service-level agreement</span></strong><span class="kobospan" id="kobo.1195.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.1196.1">SLA</span></strong><span class="kobospan" id="kobo.1197.1">) </span><span><span class="kobospan" id="kobo.1198.1">monitoring here.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1199.1">Inventory</span></strong><span class="kobospan" id="kobo.1200.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1201.1">Inventory</span></strong><span class="kobospan" id="kobo.1202.1"> category is a cool extra feature in Zabbix that we can use </span><a id="_idIndexMarker063" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1203.1">to look at our host-related inventory information. </span><span class="kobospan" id="kobo.1203.2">You can add stuff such as software versions or serial numbers to hosts and look at </span><span><span class="kobospan" id="kobo.1204.1">them here.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1205.1">Reports</span></strong><span class="kobospan" id="kobo.1206.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1207.1">Reports</span></strong><span class="kobospan" id="kobo.1208.1"> category contains a variety o</span><a id="_idTextAnchor160" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1209.1">f predefined and user-customizable </span><a id="_idIndexMarker064" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1210.1">reports focused on displaying an overview of parameters such as system information, triggers, and </span><span><span class="kobospan" id="kobo.1211.1">gathered data.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1212.1">Data collection</span></strong><span class="kobospan" id="kobo.1213.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1214.1">Data collection</span></strong><span class="kobospan" id="kobo.1215.1"> category is where we build everything that </span><a id="_idIndexMarker065" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1216.1">has to do with monitoring our devices. </span><span class="kobospan" id="kobo.1216.2">We will later use this data in </span><strong class="bold"><span class="kobospan" id="kobo.1217.1">Monitoring</span></strong><span class="kobospan" id="kobo.1218.1">, </span><strong class="bold"><span class="kobospan" id="kobo.1219.1">Inventory</span></strong><span class="kobospan" id="kobo.1220.1">, and </span><strong class="bold"><span class="kobospan" id="kobo.1221.1">Reports</span></strong><span class="kobospan" id="kobo.1222.1">. </span><span class="kobospan" id="kobo.1222.2">We can edit our settings to suit our every need so that Zabbix can show us that data in a </span><span><span class="kobospan" id="kobo.1223.1">useful way.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1224.1">Alerts</span></strong><span class="kobospan" id="kobo.1225.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1226.1">Alerts</span></strong><span class="kobospan" id="kobo.1227.1"> section </span><a id="_idIndexMarker066" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1228.1">of the UI is all about showing the </span><span><span class="kobospan" id="kobo.1229.1">right data.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1230.1">Users</span></strong><span class="kobospan" id="kobo.1231.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1232.1">Users</span></strong><span class="kobospan" id="kobo.1233.1"> section </span><a id="_idIndexMarker067" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1234.1">is all about displaying user- and user-group-related data. </span><span class="kobospan" id="kobo.1234.2">It has everything you need to manage accounts </span><span><span class="kobospan" id="kobo.1235.1">and permissions.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1236.1">Administration</span></strong><span class="kobospan" id="kobo.1237.1">: The </span><strong class="bold"><span class="kobospan" id="kobo.1238.1">Administration</span></strong><span class="kobospan" id="kobo.1239.1"> category is where we administer the Zabbix </span><a id="_idIndexMarker068" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1240.1">server. </span><span class="kobospan" id="kobo.1240.2">You’ll find all your settings from the server here to enable you and your colleagues to have a good working </span><span><span class="kobospan" id="kobo.1241.1">Zabbix experience.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1242.1">You’ll go over </span><a id="_idIndexMarker069" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1243.1">all of these quite a lot while using this book, so remember them well. </span><span class="kobospan" id="kobo.1243.2">Let’s dive a little deeper into the categories by looking at them one </span><a id="_idIndexMarker070" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1244.1">by one. </span><span class="kobospan" id="kobo.1244.2">L</span><a id="_idTextAnchor161" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1245.1">et’s start with the </span><span><strong class="bold"><span class="kobospan" id="kobo.1246.1">Monitoring</span></strong></span><span><span class="kobospan" id="kobo.1247.1"> category:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer035">
<span class="kobospan" id="kobo.1248.1"><img alt="Figure 1.29 – The Monitoring section of the sidebar" src="image/B19803_01_29.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1249.1">Figure 1.29 – The Monitoring section of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1250.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1251.1">Monitoring</span></strong><span class="kobospan" id="kobo.1252.1"> tab </span><a id="_idIndexMarker071" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1253.1">contains the </span><span><span class="kobospan" id="kobo.1254.1">following pages:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1255.1">Problems</span></strong><span class="kobospan" id="kobo.1256.1">: We can look at our current problems in detail here. </span><span class="kobospan" id="kobo.1256.2">We are provided with a bunch of filter options to narrow down our problem search </span><span><span class="kobospan" id="kobo.1257.1">if needed.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1258.1">Hosts</span></strong><span class="kobospan" id="kobo.1259.1">: This page will provide a quick overview of what’s going on with hosts. </span><span class="kobospan" id="kobo.1259.2">It also provides links to navigate to pages showing data for </span><span><span class="kobospan" id="kobo.1260.1">our hosts.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1261.1">Latest data</span></strong><span class="kobospan" id="kobo.1262.1">: Here is a page we’re going to use quite a lot throughout our professional Zabbix lifetime. </span><span class="kobospan" id="kobo.1262.2">The </span><strong class="bold"><span class="kobospan" id="kobo.1263.1">Latest data</span></strong><span class="kobospan" id="kobo.1264.1"> page is where we can find collected values for every single host, which we can, of course, </span><span><span class="kobospan" id="kobo.1265.1">filter on.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1266.1">Maps</span></strong><span class="kobospan" id="kobo.1267.1">: Maps are a very helpful tool in Zabbix to get an overview of your infrastructure. </span><span class="kobospan" id="kobo.1267.2">We can use them for network overviews </span><span><span class="kobospan" id="kobo.1268.1">and such.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1269.1">Discovery</span></strong><span class="kobospan" id="kobo.1270.1">: This page provides us with an overview of discovered devices. </span><span class="kobospan" id="kobo.1270.2">We’ll work more on </span><span><span class="kobospan" id="kobo.1271.1">this lat</span><a id="_idTextAnchor162" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1272.1">er.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1273.1">Next, we have </span><a id="_idIndexMarker072" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1274.1">the </span><span><strong class="bold"><span class="kobospan" id="kobo.1275.1">Services</span></strong></span><span><span class="kobospan" id="kobo.1276.1"> category:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer036">
<span class="kobospan" id="kobo.1277.1"><img alt="Figure 1.30 – The Services secti﻿on of the sidebar" src="image/B19803_01_30.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1278.1">Figure 1.30 – The Services secti</span><a id="_idTextAnchor163" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1279.1">on of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1280.1">This part of the sidebar contains the </span><span><span class="kobospan" id="kobo.1281.1">following pages:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1282.1">Services</span></strong><span class="kobospan" id="kobo.1283.1">: This is where we configure all of the services we want </span><span><span class="kobospan" id="kobo.1284.1">to monitor</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1285.1">SLA</span></strong><span class="kobospan" id="kobo.1286.1">: We can configure any SLAs here that we can then use in </span><span><span class="kobospan" id="kobo.1287.1">our services</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1288.1">SLA report</span></strong><span class="kobospan" id="kobo.1289.1">: A detailed overview of configured services with their SLAs and whether they are being met </span><span><span class="kobospan" id="kobo.1290.1">or n</span><a id="_idTextAnchor164" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1291.1">ot</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1292.1">Then, we </span><a id="_idIndexMarker073" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1293.1">have the </span><span><strong class="bold"><span class="kobospan" id="kobo.1294.1">Inventory</span></strong></span><span><span class="kobospan" id="kobo.1295.1"> category:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer037">
<span class="kobospan" id="kobo.1296.1"><img alt="Figure 1.31 – The Inventory section of the sidebar" src="image/B19803_01_31.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1297.1">Figure 1.31 – The Inventory section of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1298.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1299.1">Inventory</span></strong><span class="kobospan" id="kobo.1300.1"> tab contains the </span><span><span class="kobospan" id="kobo.1301.1">following pages:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1302.1">Overview</span></strong><span class="kobospan" id="kobo.1303.1">: A quick overview page for your </span><span><span class="kobospan" id="kobo.1304.1">inventory information</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1305.1">Hosts</span></strong><span class="kobospan" id="kobo.1306.1">: A more detailed look into inventory values on a </span><span><span class="kobospan" id="kobo.1307.1">per-host b</span><a id="_idTextAnchor165" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1308.1">asis</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1309.1">Next, we have </span><a id="_idIndexMarker074" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1310.1">the </span><span><strong class="bold"><span class="kobospan" id="kobo.1311.1">Reports</span></strong></span><span><span class="kobospan" id="kobo.1312.1"> category:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer038">
<span class="kobospan" id="kobo.1313.1"><img alt="Figure 1.32 – The Repor﻿ts section of the sidebar" src="image/B19803_01_32.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1314.1">Figure 1.32 – The Repor</span><a id="_idTextAnchor166" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1315.1">ts section of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1316.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1317.1">Reports</span></strong><span class="kobospan" id="kobo.1318.1"> tab contains the </span><span><span class="kobospan" id="kobo.1319.1">following pages:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1320.1">System information</span></strong><span class="kobospan" id="kobo.1321.1">: You can look at system information here; it contains the same information as the </span><strong class="bold"><span class="kobospan" id="kobo.1322.1">System information</span></strong><span class="kobospan" id="kobo.1323.1"> widget we </span><span><span class="kobospan" id="kobo.1324.1">discussed earlier.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1325.1">Scheduled reports</span></strong><span class="kobospan" id="kobo.1326.1">: This is where we configure any automatic PDF reporting that we might want to </span><span><span class="kobospan" id="kobo.1327.1">send out.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1328.1">Availability report</span></strong><span class="kobospan" id="kobo.1329.1">: On this page, we can see the percentage of time a trigger has been in a </span><strong class="bold"><span class="kobospan" id="kobo.1330.1">problem</span></strong><span class="kobospan" id="kobo.1331.1"> state compared to an </span><strong class="bold"><span class="kobospan" id="kobo.1332.1">ok</span></strong><span class="kobospan" id="kobo.1333.1"> state. </span><span class="kobospan" id="kobo.1333.2">This is a helpful way of seeing how long certain items are </span><span><span class="kobospan" id="kobo.1334.1">actually healthy.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1335.1">Top 100 triggers</span></strong><span class="kobospan" id="kobo.1336.1">: The top 100 triggers that have changed their state most often within a period </span><span><span class="kobospan" id="kobo.1337.1">of time.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1338.1">Audit log</span></strong><span class="kobospan" id="kobo.1339.1">: We can see </span><a id="_idIndexMarker075" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1340.1">who changed what on our Zabbix server here. </span><span class="kobospan" id="kobo.1340.2">This is a great way to see which colleague locked you out by accident or whether it was </span><span><span class="kobospan" id="kobo.1341.1">on purpose.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1342.1">Action log</span></strong><span class="kobospan" id="kobo.1343.1">: We can see a list of actions that have been taken; for example, due to triggers going to a </span><strong class="bold"><span class="kobospan" id="kobo.1344.1">problem</span></strong><span class="kobospan" id="kobo.1345.1"> state or an </span><span><strong class="bold"><span class="kobospan" id="kobo.1346.1">ok</span></strong></span><span><span class="kobospan" id="kobo.1347.1"> state.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1348.1">Notifications</span></strong><span class="kobospan" id="kobo.1349.1">: On this page, we can see the number o</span><a id="_idTextAnchor167" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1350.1">f notifications sent to </span><span><span class="kobospan" id="kobo.1351.1">our users.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1352.1">Next, we have </span><a id="_idIndexMarker076" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1353.1">the </span><strong class="bold"><span class="kobospan" id="kobo.1354.1">Data </span><a id="_idTextAnchor168" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1355.1">collection</span></strong><span class="kobospan" id="kobo.1356.1"> category, which is a </span><span><span class="kobospan" id="kobo.1357.1">new entry:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer039">
<span class="kobospan" id="kobo.1358.1"><img alt="Figure 1.33 – The Data collection section of the sidebar" src="image/B19803_01_33.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1359.1">Figure 1.33 – The Data collection section of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1360.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1361.1">Data collection</span></strong><span class="kobospan" id="kobo.1362.1"> tab is </span><a id="_idIndexMarker077" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1363.1">almost the same as what the </span><strong class="bold"><span class="kobospan" id="kobo.1364.1">Configuration</span></strong><span class="kobospan" id="kobo.1365.1"> tab used to be in older versions. </span><span class="kobospan" id="kobo.1365.2">It contains the </span><span><span class="kobospan" id="kobo.1366.1">following pages:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1367.1">Template groups</span></strong><span class="kobospan" id="kobo.1368.1">: We configure our template groups here; for instance, a group for all templates that will be used within our company (</span><em class="italic"><span class="kobospan" id="kobo.1369.1">Templates/Open source ICT Solutions</span></em><span class="kobospan" id="kobo.1370.1">) or all network </span><span><span class="kobospan" id="kobo.1371.1">devices (</span></span><span><em class="italic"><span class="kobospan" id="kobo.1372.1">Templates/Networking</span></em></span><span><span class="kobospan" id="kobo.1373.1">).</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1374.1">Host groups</span></strong><span class="kobospan" id="kobo.1375.1">: We configure our host groups here; for instance, a group for all </span><span><span class="kobospan" id="kobo.1376.1">Linux servers.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1377.1">Templates</span></strong><span class="kobospan" id="kobo.1378.1">: This is where we configure templates that we can use to monitor hosts from the </span><span><span class="kobospan" id="kobo.1379.1">Zabbix server.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1380.1">Hosts</span></strong><span class="kobospan" id="kobo.1381.1">: Another </span><strong class="bold"><span class="kobospan" id="kobo.1382.1">Hosts</span></strong><span class="kobospan" id="kobo.1383.1"> tab, but this time it is not for checking data. </span><span class="kobospan" id="kobo.1383.2">This is where we add and configure </span><span><span class="kobospan" id="kobo.1384.1">host settings.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1385.1">Maintenance</span></strong><span class="kobospan" id="kobo.1386.1">: In Zabbix, we have the availability to set maintenance periods; this way, triggers or notifications won’t disturb you while you take something offline for maintenance, </span><span><span class="kobospan" id="kobo.1387.1">for example.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1388.1">Event correlation</span></strong><span class="kobospan" id="kobo.1389.1">: We can correlate problems here to reduce noise or prevent event storms. </span><span class="kobospan" id="kobo.1389.2">This is achieved by closing new or old problems when they correlate to </span><span><span class="kobospan" id="kobo.1390.1">other problems.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1391.1">Discovery</span></strong><span class="kobospan" id="kobo.1392.1">: This is where we configure Zabbix discovery f</span><a id="_idTextAnchor169" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1393.1">or automatic </span><span><span class="kobospan" id="kobo.1394.1">host creation.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1395.1">New in </span><a id="_idIndexMarker078" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1396.1">Zabbix is the </span><span><strong class="bold"><span class="kobospan" id="kobo.1397.1">Alerts</span></strong></span><span><span class="kobospan" id="kobo.1398.1"> category:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer040">
<span class="kobospan" id="kobo.1399.1"><img alt="Figure 1.34 – The Alerts section of the sidebar" src="image/B19803_01_34.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1400.1">Figure 1.34 – The Alerts section of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1401.1">It consists of the following </span><span><span class="kobospan" id="kobo.1402.1">three pages:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1403.1">Actions</span></strong><span class="kobospan" id="kobo.1404.1">: All different kinds of actions can be configured in this part of the frontend. </span><span class="kobospan" id="kobo.1404.2">We can set up actions for sending out alerts, creating hosts, </span><span><span class="kobospan" id="kobo.1405.1">and more.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1406.1">Media types</span></strong><span class="kobospan" id="kobo.1407.1">: There are several media types preconfigured in Zabbix, which you’ll find here already. </span><span class="kobospan" id="kobo.1407.2">We can also add custom </span><span><span class="kobospan" id="kobo.1408.1">media types.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1409.1">Scripts</span></strong><span class="kobospan" id="kobo.1410.1">: This is where we can add custom scripts for extending Zabbix functionality in </span><span><span class="kobospan" id="kobo.1411.1">the frontend.</span></span></li>
</ul>
<p class="calibre3"><span class="kobospan" id="kobo.1412.1">Second to last, and also new, we </span><span><span class="kobospan" id="kobo.1413.1">have </span></span><span><strong class="bold"><span class="kobospan" id="kobo.1414.1">Users</span></strong></span><span><span class="kobospan" id="kobo.1415.1">:</span></span></p>
<div class="calibre2">
<div class="img---figure" id="_idContainer041">
<span class="kobospan" id="kobo.1416.1"><img alt="Figure 1.35 – The Users section of the sidebar" src="image/B19803_01_35.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1417.1">Figure 1.35 – The Users section of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1418.1">We can </span><a id="_idIndexMarker079" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1419.1">find five different </span><span><span class="kobospan" id="kobo.1420.1">pages here:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1421.1">User groups</span></strong><span class="kobospan" id="kobo.1422.1">: This is where we configure user groups and the permissions for these </span><span><span class="kobospan" id="kobo.1423.1">user groups.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1424.1">User roles</span></strong><span class="kobospan" id="kobo.1425.1">: It’s possible to configure different users’ roles here to limit or extend certain frontend functionality to </span><span><span class="kobospan" id="kobo.1426.1">certain users.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1427.1">Users</span></strong><span class="kobospan" id="kobo.1428.1">: Add users to </span><span><span class="kobospan" id="kobo.1429.1">this page.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1430.1">API tokens</span></strong><span class="kobospan" id="kobo.1431.1">: This page was kind of hidden before, but it’s now easier to find. </span><span class="kobospan" id="kobo.1431.2">We can manage all API tokens we have permission to edit here: super useful for super </span><a id="_idIndexMarker080" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1432.1">admins to create and manage tokens of </span><span><span class="kobospan" id="kobo.1433.1">different users.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1434.1">Authentication</span></strong><span class="kobospan" id="kobo.1435.1">: We </span><a id="_idIndexMarker081" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1436.1">can find our authentication settings here, such as </span><strong class="bold"><span class="kobospan" id="kobo.1437.1">Lightweight Directory Access Protocol</span></strong><span class="kobospan" id="kobo.1438.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.1439.1">LDAP</span></strong><span class="kobospan" id="kobo.1440.1">), </span><strong class="bold"><span class="kobospan" id="kobo.1441.1">Security Assertion Markup Language</span></strong><span class="kobospan" id="kobo.1442.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.1443.1">SAML</span></strong><span class="kobospan" id="kobo.1444.1">), and HTTP. </span><span class="kobospan" id="kobo.1444.2">It also </span><a id="_idIndexMarker082" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1445.1">contains settings for the new </span><strong class="bold"><span class="kobospan" id="kobo.1446.1">just-in-time</span></strong><span class="kobospan" id="kobo.1447.1"> (</span><strong class="bold"><span class="kobospan" id="kobo.1448.1">JIT</span></strong><span class="kobospan" id="kobo.1449.1">) </span><span><span class="kobospan" id="kobo.1450.1">user provisioning.</span></span><p class="calibre3"><a id="_idTextAnchor170" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1451.1">Finally, we have the </span><span><strong class="bold"><span class="kobospan" id="kobo.1452.1">Administration</span></strong></span><span><span class="kobospan" id="kobo.1453.1"> category:</span></span></p></li>
</ul>
<div class="calibre2">
<div class="img---figure" id="_idContainer042">
<span class="kobospan" id="kobo.1454.1"><img alt="Figure 1.36 – The Administration section of the sidebar" src="image/B19803_01_36.jpg" class="calibre4"/></span>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US"><span class="kobospan" id="kobo.1455.1">Figure 1.36 – The Administration section of the sidebar</span></p>
<p class="calibre3"><span class="kobospan" id="kobo.1456.1">The </span><strong class="bold"><span class="kobospan" id="kobo.1457.1">Administration</span></strong><span class="kobospan" id="kobo.1458.1"> tab </span><a id="_idIndexMarker083" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1459.1">contains the </span><span><span class="kobospan" id="kobo.1460.1">following pages:</span></span></p>
<ul class="calibre14">
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1461.1">General</span></strong><span class="kobospan" id="kobo.1462.1">: The general page contains our Zabbix server configuration. </span><span class="kobospan" id="kobo.1462.2">Settings ranging from </span><strong class="bold"><span class="kobospan" id="kobo.1463.1">Housekeeping</span></strong><span class="kobospan" id="kobo.1464.1"> to </span><strong class="bold"><span class="kobospan" id="kobo.1465.1">Frontend theme</span></strong><span class="kobospan" id="kobo.1466.1"> are </span><span><span class="kobospan" id="kobo.1467.1">found here.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1468.1">Audit log</span></strong><span class="kobospan" id="kobo.1469.1">: The audit log settings are located here. </span><span class="kobospan" id="kobo.1469.2">We can enable or disable audit logging as well as change how long logs should </span><span><span class="kobospan" id="kobo.1470.1">be stored.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1471.1">Housekeeping</span></strong><span class="kobospan" id="kobo.1472.1">: General housekeeping settings are found here. </span><span class="kobospan" id="kobo.1472.2">We can edit what we want to enable or disable for housekeeping, as well as change how long we store things such as history, trends, triggers, </span><span><span class="kobospan" id="kobo.1473.1">and more.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1474.1">Proxy groups</span></strong><span class="kobospan" id="kobo.1475.1">: At this new entry, we will define proxy groups that we can use for failover and load balancing in combination </span><span><span class="kobospan" id="kobo.1476.1">with proxies.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1477.1">Proxies</span></strong><span class="kobospan" id="kobo.1478.1">: This is where we configure proxies that should be connected to this </span><span><span class="kobospan" id="kobo.1479.1">Zabbix server.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1480.1">Macros</span></strong><span class="kobospan" id="kobo.1481.1">: A bit more accessible now is global macros, since they have been relocated here. </span><span class="kobospan" id="kobo.1481.2">Define new and manage existing global </span><span><span class="kobospan" id="kobo.1482.1">macros here.</span></span></li>
<li class="calibre15"><strong class="bold"><span class="kobospan" id="kobo.1483.1">Queue</span></strong><span class="kobospan" id="kobo.1484.1">: View </span><a id="_idIndexMarker084" class="pcalibre calibre6 pcalibre1"/><span class="kobospan" id="kobo.1485.1">your Zabbix server queue here. </span><span class="kobospan" id="kobo.1485.2">Items might be stuck in a queue due to data collection or </span><span><span class="kobospan" id="kobo.1486.1">performance issues.</span></span></li>
</ul>
<p class="callout-heading"><span class="kobospan" id="kobo.1487.1">Tip</span></p>
<p class="callout"><span class="kobospan" id="kobo.1488.1">When using Zabbix authentication such as HTTP, LDAP, or SAML, we still need to create our users internally with the right permissions. </span><span class="kobospan" id="kobo.1488.2">Configure your users to match your authentication method’s username in Zabbix and use the authentication method for password management. </span><span class="kobospan" id="kobo.1488.3">With Zabbix 7.0, however, it is possible to use JIT user provisioning to automatically create users with the correct permissions, which we will also talk about in </span><span><span class="kobospan" id="kobo.1489.1">this book.</span></span></p>
</div>
</body></html>