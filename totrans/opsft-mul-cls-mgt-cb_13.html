<html><head></head><body>
		<div id="_idContainer328">
			<h1 id="_idParaDest-259" class="chapter-number"><a id="_idTextAnchor275"/>13</h1>
			<h1 id="_idParaDest-260"><a id="_idTextAnchor276"/>OpenShift Plus – a Multi-Cluster Enterprise Ready Solution</h1>
			<p>In this book, we discussed in <a href="B18015_01.xhtml#_idTextAnchor016"><em class="italic">Chapter 1</em></a>, <em class="italic">Hybrid Cloud Journey and Strategies</em>, the main challenges related to public cloud usage, such as keeping cloud costs under control and having consistent, secure, and compliant platforms, no matter which cloud provider is being used. We also introduced some of the tools that are helpful to work with multi-clusters and help to address those challenges, from a technology perspective.</p>
			<p>In <a href="B18015_09.xhtml#_idTextAnchor176"><em class="italic">Chapter 9</em></a>, <em class="italic">OpenShift Pipelines – Tekton</em>, and <a href="B18015_10.xhtml#_idTextAnchor204"><em class="italic">Chapter 10</em></a>, <em class="italic">OpenShift GitOps – ArgoCD</em>, we covered <strong class="bold">CI/CD pipelines</strong> and <strong class="bold">GitOps</strong> using OpenShift, including deployment into multiple clusters.</p>
			<p>In <a href="B18015_11.xhtml#_idTextAnchor229"><em class="italic">Chapter 11</em></a>, <em class="italic">OpenShift Multi-Cluster GitOps and Management</em>, we saw how to use <strong class="bold">Red Hat Advanced Cluster Management</strong> to manage and observe several clusters from a single pane, deploy workloads into many clusters at once, and also use policies to ensure all your clusters are compliant.</p>
			<p>Finally, in the previous chapter – <a href="B18015_12.xhtml#_idTextAnchor251"><em class="italic">Chapter 12</em></a>, <em class="italic">OpenShift Multi-Cluster Security</em> – we introduced the <strong class="bold">Red Hat Advanced Cluster Security</strong> tool, which helps to enhance the security of all your clusters, by implementing security policies, managing the known vulnerabilities, assessing the security risks and compliance, and managing the network traffic.</p>
			<p>Now, we have two different focuses in this chapter, the first is to introduce the last important piece for the hybrid cloud strategy: <strong class="bold">Red Hat Quay</strong>, which will store all container images in a central image registry and makes your CI/CD process a bit easier and more robust; and the second is to discuss the <strong class="bold">Red Hat OpenShift Plus</strong> offering, which bundles all these pieces together to provide you a comprehensive and competitive solution.</p>
			<p>Therefore, you will find the following in this chapter:</p>
			<ul>
				<li>Introducing Red Hat Quay</li>
				<li>Deploying Red Hat using the Quay Operator</li>
				<li>Using Red Hat Quay</li>
				<li>What is OpenShift Plus?</li>
				<li>OpenShift Plus: A practical use-case</li>
			</ul>
			<p>Let’s start now then!</p>
			<h1 id="_idParaDest-261"><a id="_idTextAnchor277"/>Introducing Red Hat Quay</h1>
			<p>Red Hat Quay is an enterprise <a id="_idIndexMarker941"/>container registry platform that runs on Red Hat Enterprise Linux or OpenShift, on-premise or in the cloud. Red Hat Quay provides great features <a id="_idIndexMarker942"/>for an image registry, such as the following:</p>
			<ul>
				<li><strong class="bold">Image vulnerability scan</strong>: Scan the images to find known vulnerabilities just after they are pushed to the registry using the Clair project. See more information about Clair in the <em class="italic">Further reading</em> section of this chapter.</li>
				<li><strong class="bold">Geo-replication</strong>: Sync the image registry contents between two or more Quay instances, allowing multiple and geographically distributed Quay deployments to look like a single registry. This is especially helpful for environments spread over far distances and with high latency. Quay handles asynchronous data synchronization between the different instances to make images available transparently for the end user.</li>
				<li><strong class="bold">Repository mirroring</strong>: This synchronizes one or more repositories between two Quay instances.</li>
				<li><strong class="bold">Access control</strong>: Granular permission control allows you to define who can read, write, and administer groups and repositories. You can also leverage robot accounts to allow automated access to organizations and repositories using the Quay API.</li>
			</ul>
			<p><strong class="bold">Red Hat Quay</strong> is available as a managed offering on the <a href="http://quay.io">quay.io</a> portal or self-managed, where you deploy and maintain it.</p>
			<h1 id="_idParaDest-262"><a id="_idTextAnchor278"/>Deploying Red Hat Quay using the Quay Operator</h1>
			<p>There are different ways to<a id="_idIndexMarker943"/> deploy Quay, as you can see in the product’s official documentation link that you’ll find in the <em class="italic">Further reading</em> section of this chapter. For <a id="_idIndexMarker944"/>didactical reasons, we decided to deploy it using the Quay Operator with fully-managed components – a comfortable way to start using Quay.</p>
			<p>Some prerequisites are necessary to install Quay as an enterprise container registry.</p>
			<h2 id="_idParaDest-263"><a id="_idTextAnchor279"/>Prerequisites</h2>
			<p>The prerequisites to install Quay <a id="_idIndexMarker945"/>using the Operator are as follows:</p>
			<ul>
				<li>An OpenShift cluster with a privileged account to deploy and set up Quay.</li>
				<li>Object storage: The supported object storage is Red Hat OpenShift Data Foundation, AWS S3, Google Cloud Storage, Azure Storage, Ceph/RadosGW Storage/Hitachi HCP storage, Swift storage, and NooBaa.</li>
				<li>Cluster capacity to host the following services:<ul><li>PostgreSQL or MySQL database. PostgreSQL is preferred due to enhanced features for Clair security scanning.</li>
<li>A proxy server.</li>
<li>A key-value database. Redis is the default option to store non-critical Red Hat Quay configuration.</li>
<li>Quay, the application service itself.</li>
</ul></li>
			</ul>
			<p>With all prerequisites met, we can install the Quay Operator. See next how to install it.</p>
			<h2 id="_idParaDest-264"><a id="_idTextAnchor280"/>Operator installation</h2>
			<p>The process to deploy the<a id="_idIndexMarker946"/> Quay Operator is simple. Follow the instructions in the next steps:</p>
			<ol>
				<li>Navigate to <strong class="bold">OperatorHub</strong> and search for <strong class="source-inline">Red Hat Quay</strong>.</li>
			</ol>
			<div>
				<div id="_idContainer309" class="IMG---Figure">
					<img src="image/B18015_13_01.jpg" alt="Figure 13.1 – Seach for the Red Hat Quay Operator "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.1 – Seach for the Red Hat Quay Operator</p>
			<ol>
				<li value="2">Click on the tile and then on the <strong class="bold">Install</strong> button.</li>
			</ol>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"> </p>
			<div>
				<div id="_idContainer310" class="IMG---Figure">
					<img src="image/B18015_13_02.jpg" alt="Figure 13.2 – Install Red Hat Quay "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.2 – Install Red Hat Quay</p>
			<ol>
				<li value="3">Leave the default <a id="_idIndexMarker947"/>options and click on the <strong class="bold">Install</strong> button.</li>
			</ol>
			<div>
				<div id="_idContainer311" class="IMG---Figure">
					<img src="image/B18015_13_03.jpg" alt="Figure 13.3 – Operator installation "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.3 – Operator installation</p>
			<ol>
				<li value="4">When the Operator<a id="_idIndexMarker948"/> is installed, access the <strong class="bold">Quay Registry</strong> tab and click on <strong class="bold">Create instance</strong>.</li>
			</ol>
			<div>
				<div id="_idContainer312" class="IMG---Figure">
					<img src="image/B18015_13_04.jpg" alt="Figure 13.4 – Creating a Quay Registry instance "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.4 – Creating a Quay Registry instance</p>
			<ol>
				<li value="5">Optionally, change the name in the proper field and leave all default options.</li>
			</ol>
			<div>
				<div id="_idContainer313" class="IMG---Figure">
					<img src="image/B18015_13_05.jpg" alt="Figure 13.5 – Quay instance creation "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.5 – Quay instance creation</p>
			<ol>
				<li value="6">Check the <strong class="bold">Quay Registry</strong> tab. You <a id="_idIndexMarker949"/>will see the <strong class="bold">Status</strong> column similar to the following screenshot.</li>
			</ol>
			<div>
				<div id="_idContainer314" class="IMG---Figure">
					<img src="image/B18015_13_06.jpg" alt="Figure 13.6 – Quay instance created "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.6 – Quay instance created</p>
			<ol>
				<li value="7">As soon as it finishes, click on <a id="_idIndexMarker950"/>the registry that has been just created and inspect the <strong class="bold">Registry Endpoint</strong> URL.</li>
			</ol>
			<div>
				<div id="_idContainer315" class="IMG---Figure">
					<img src="image/B18015_13_07.jpg" alt="Figure 13.7 – Quay endpoint "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.7 – Quay endpoint</p>
			<p>Click on the registry endpoint address. The Quay Registry application will be shown to configure your multi-cluster registry.</p>
			<h2 id="_idParaDest-265"><a id="_idTextAnchor281"/>Configuring Quay</h2>
			<p>Once the installation process finishes, you will<a id="_idIndexMarker951"/> have access to some important endpoints that are used to configure the integration between the Quay Operator, the Quay Registry instance, and OpenShift. To use them, you need to follow the next steps:</p>
			<ol>
				<li value="1">In the namespace in which you installed Quay (in our case, the <strong class="source-inline">openshift-operators</strong> namespace), navigate to <strong class="bold">Workloads</strong> | <strong class="bold">Secrets</strong> and search for a secret starting with <strong class="source-inline">&lt;objectInstanceName&gt;-quay-config-editor-credentials-&lt;randomPodId&gt;</strong>.</li>
			</ol>
			<div>
				<div id="_idContainer316" class="IMG---Figure">
					<img src="image/B18015_13_08.jpg" alt="Figure 13.8 – Check Quay config credentials "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.8 – Check Quay config credentials</p>
			<ol>
				<li value="2">Click on it and choose <strong class="bold">Reveal Values</strong>.</li>
			</ol>
			<div>
				<div id="_idContainer317" class="IMG---Figure">
					<img src="image/B18015_13_09.jpg" alt="Figure 13.9 – Quay credential values "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.9 – Quay credential values</p>
			<ol>
				<li value="3">Take note of the <a id="_idIndexMarker952"/>credentials and navigate back to <strong class="bold">Config Editor Endpoint</strong> in the Quay Registry Operator instance.</li>
			</ol>
			<div>
				<div id="_idContainer318" class="IMG---Figure">
					<img src="image/B18015_13_10.jpg" alt="Figure 13.10 – Quay config endpoint "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.10 – Quay config endpoint</p>
			<ol>
				<li value="4">Click the link to access <strong class="bold">Config Editor Tool</strong>. Use the credentials you got in the previous step.</li>
			</ol>
			<div>
				<div id="_idContainer319" class="IMG---Figure">
					<img src="image/B18015_13_11.jpg" alt="Figure 13.11 – Quay UI config tool "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.11 – Quay UI config tool</p>
			<ol>
				<li value="5">On this page, you can<a id="_idIndexMarker953"/> change many Quay configurations, such as SSL certificates, and so on – in our example, we changed the <strong class="bold">Time Machine</strong> expiration time. Click on <strong class="bold">Validate Configuration Changes</strong> after you make your changes.</li>
			</ol>
			<div>
				<div id="_idContainer320" class="IMG---Figure">
					<img src="image/B18015_13_12.jpg" alt="Figure 13.12 – Quay settings config tool "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.12 – Quay settings config tool</p>
			<ol>
				<li value="6">After the configurations<a id="_idIndexMarker954"/> are validated, choose <strong class="bold">Reconfigure Quay</strong>.</li>
			</ol>
			<div>
				<div id="_idContainer321" class="IMG---Figure">
					<img src="image/B18015_13_13.jpg" alt="Figure 13.13 – Quay config tool validation "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.13 – Quay config tool validation<a id="_idTextAnchor282"/></p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">This step will restart the operator pods and Quay may become unavailable for a short period.</p>
			<ol>
				<li value="7">The Quay Config Editor tool will automatically update the <strong class="source-inline">quay-config-bundle</strong> secret, used to store the configuration parameters. To see it navigate to <strong class="bold">Workloads</strong> | <strong class="bold">Secrets</strong>, search for the <strong class="source-inline">quay-config-bundle</strong> secret and click on <strong class="bold">Reveal values</strong>. The <a id="_idIndexMarker955"/>changes made previously must be reflected inside this secret.</li>
			</ol>
			<div>
				<div id="_idContainer322" class="IMG---Figure">
					<img src="image/B18015_13_14.jpg" alt="Figure 13.14 – Quay secret after config tool changes "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.14 – Quay secret after config tool changes</p>
			<p>If everything appears correct, you will be able to start using your Quay instance. Proceed with the next section to see instructions on how to use Quay.</p>
			<h1 id="_idParaDest-266"><a id="_idTextAnchor283"/>Using Red Hat Quay</h1>
			<p>Red Hat Quay usage is very<a id="_idIndexMarker956"/> simple. A user-friendly interface will help you to configure additional global and security settings. We recommend you create an <em class="italic">organization</em> to organize your Quay registry by departments, regions, or any other division you want:</p>
			<ol>
				<li value="1">In this example, we created an organization named <strong class="bold">multiclusterbook</strong>.</li>
			</ol>
			<div>
				<div id="_idContainer323" class="IMG---Figure">
					<img src="image/B18015_13_15.jpg" alt="Figure 13.15 – Quay organization "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.15 – Quay organization</p>
			<ol>
				<li value="2">Next, we created a private<a id="_idIndexMarker957"/> repository to upload our images.</li>
			</ol>
			<div>
				<div id="_idContainer324" class="IMG---Figure">
					<img src="image/B18015_13_16.jpg" alt="Figure 13.16 – Quay repository "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.16 – Quay repository</p>
			<p>A very helpful way to learn how to use Red Hat Quay is using the tutorial. You’ll see how to do that.</p>
			<h2 id="_idParaDest-267"><a id="_idTextAnchor284"/>Running the tutorial</h2>
			<p>Running the tutorial mentioned in the <a id="_idIndexMarker958"/>Quay UI is not required but it can be a good starting point to understanding Red Hat Quay as an enterprise container registry. The first step of this tutorial is to log in via the terminal to the Quay registry endpoint. We are <a id="_idIndexMarker959"/>using <strong class="bold">podman</strong> as the container engine but you can alternatively use <strong class="bold">Docker</strong> instead if you prefer, both will work similar, so you just need to replace podman with Docker in this case (for example, <strong class="source-inline">docker login</strong> instead of <strong class="source-inline">podman login</strong>, <strong class="source-inline">docker run</strong> instead of <strong class="source-inline">podman run</strong>, and so on):</p>
			<pre class="source-code">$ podman login enterprise-registry-quay-openshift-operators.apps.vqdlv2pu.eastus.aroapp.io</pre>
			<p>You should have a<a id="_idIndexMarker960"/> successful login, otherwise, check <a id="_idIndexMarker961"/>the credentials used. After, try to run a <strong class="bold">BusyBox</strong> container image.</p>
			<div>
				<div id="_idContainer325" class="IMG---Figure">
					<img src="image/B18015_13_17.jpg" alt="Figure 13.17 – Quay tutorial "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.17 – Quay tutorial</p>
			<p>Now, run the following commands to create a sample container image for this repository:</p>
			<pre class="source-code">$ podman run busybox echo "fun" &gt; newfile
$ podman ps -l
CONTAINER ID  IMAGE                             COMMAND     CREATED         STATUS                     PORTS       NAMES
fd3b51f4c383  docker.io/library/busybox:latest  echo fun    16 seconds ago  Exited (0) 17 seconds ago              zealous_pascal
$ podman commit fd3b51f4c383 enterprise-registry-quay-openshift-operators.apps.vqdlv2pu.eastus.aroapp.io/multiclusterbook/openshift-gitops
$ podman push enterprise-registry-quay-openshift-operators.apps.vqdlv2pu.eastus.aroapp.io/multiclusterbook/openshift-gitops</pre>
			<p>Simple, right?! Now your instance of Quay Container Registry is configured, tested, and ready to use. Start<a id="_idIndexMarker962"/> exploring it in your CI/CD pipelines, pushing images to it, and using it as the enterprise container registry for your DevOps and DevSecOps pipelines.</p>
			<p>Now that we’ve already covered Quay, let’s discuss a bit more about OpenShift Plus. Next, you’ll continue to discover why you should care about and consider OpenShift Plus in your hybrid or multi-cloud strategy.</p>
			<h1 id="_idParaDest-268"><a id="_idTextAnchor285"/>What is OpenShift Plus?</h1>
			<p>OpenShift Plus is an <a id="_idIndexMarker963"/>offering from Red Hat that bundles the OpenShift platform with the products you can see in the following diagram:</p>
			<div>
				<div id="_idContainer326" class="IMG---Figure">
					<img src="image/B18015_13_18.jpg" alt="Figure 13.18 – OpenShift Plus products offering "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.18 – OpenShift Plus products offering</p>
			<p>These products are included with this offering(besides OpenShift itself):</p>
			<ul>
				<li><strong class="bold">Advanced Cluster Management</strong>: Provides features to manage several OpenShift and Kubernetes clusters. The features include cluster management, observability, policy<a id="_idIndexMarker964"/> and compliance, and workload deployment. We dove into this product in <a href="B18015_11.xhtml#_idTextAnchor229"><em class="italic">Chapter 11</em></a>, <em class="italic">OpenShift Multi-Cluster GitOps and Management</em>. If you haven’t seen that chapter yet, we highly encourage you to go back and walk through it now.</li>
				<li><strong class="bold">Advanced Cluster Security</strong>: Enhance the security of your Kubernetes and OpenShift clusters with features such as Vulnerability Management, Network management, and others. This product was covered in <a href="B18015_12.xhtml#_idTextAnchor251"><em class="italic">Chapter 12</em></a>, <em class="italic">OpenShift Multi-Cluster Security</em>. We also encourage you to check this chapter now if you haven’t done so yet.</li>
				<li><strong class="bold">Quay Enterprise Registry</strong>: The global enterprise registry was covered at the beginning of this chapter.</li>
				<li><strong class="bold">OpenShift Data Foundation</strong>: This is a storage layer that can provide different types of volumes to OpenShift clusters: file storage (for <strong class="source-inline">RWX</strong> persistent volumes) using <strong class="bold">Cephfs</strong>, block <a id="_idIndexMarker965"/>storage (for <strong class="source-inline">RWO</strong> persistent volumes) using <strong class="bold">Ceph RBD</strong>, and object storage provided by a solution named <strong class="bold">Noobaa</strong>. This product is not<a id="_idIndexMarker966"/> covered in this book. If you want to see more information about it, check the links we left in the <em class="italic">Further reading</em> section of this chapter.</li>
			</ul>
			<p>If you have followed this book<a id="_idIndexMarker967"/> from the beginning, this is not new information for you. We will focus now on giving additional information that can help you to understand the value proposition behind OpenShift Plus and why you should consider OpenShift Plus, instead of <em class="italic">just</em> the OpenShift platform.</p>
			<h2 id="_idParaDest-269"><a id="_idTextAnchor286"/>Value proposition: benefits</h2>
			<p>OpenShift Plus adds some<a id="_idIndexMarker968"/> great benefits to your multi-cluster strategy:</p>
			<ul>
				<li><strong class="bold">Consistency</strong>: ACM provides the governance feature, which helps you to have consistent configurations among all your clusters. In terms of security, ACS also implements security policies you can define that will also help to keep all clusters compliant with them.</li>
				<li><strong class="bold">Portability</strong>: Quay provides a global image registry that all clusters pull images from. ACM also can help you to deploy applications against many clusters at once and to inspect and monitor their status. By using it together with OpenShift GitOps, you can leverage <strong class="bold">ArgoCD</strong> to implement <strong class="bold">GitOps</strong> deployment practices and maintain the desired state of your applications, no matter in which OpenShift cluster and cloud provider you are running them. Of course, the portability between clusters also depends on the application, as the more decoupled the application is, the easier it will be to port between different OpenShift clusters and providers. The important thing to understand is that ACM and Quay help to make your applications portable much easier. OpenShift Data Foundation also helps to make stateful workloads easier to port, by providing a standard way for applications to have access to Persistent Volumes, regardless of the infrastructure or cloud providers the clusters are running on.</li>
				<li><strong class="bold">Management</strong>: Managing several clusters in different environments is not an easy task in general. Companies usually have many people focused only on doing that. You can turn this activity into a bit of an easier task and perhaps decrease the costs associated with it by using ACM. Features such as cluster management, observability, and governance (policies) are helpful to manage several clusters from a single pane.</li>
				<li><strong class="bold">Security</strong>: As we<a id="_idIndexMarker969"/> discussed in <a href="B18015_12.xhtml#_idTextAnchor251"><em class="italic">Chapter 12</em></a>, <em class="italic">OpenShift Multi-Cluster Security</em>, making a few clusters secure and compliant in general is not a hard task, however, when we scale to several clusters it becomes more challenging. ACS adds the capability to easily enforce security policies, detect vulnerabilities, and plan actions to remediate them.</li>
			</ul>
			<p>Besides OpenShift Plus, Red Hat also provides some additional value-added products available in the Red Hat Hybrid Cloud portal (<a href="http://cloud.redhat.com">cloud.redhat.com</a>) for any OpenShift customer:</p>
			<ul>
				<li><strong class="bold">OpenShift Cluster Management</strong>: This allows you to view high-level cluster information, create new clusters using the Assisted Installer, configure Red Hat subscriptions, basic level monitoring, and more.</li>
				<li><strong class="bold">Cost Management</strong>: Cost management is an interesting tool to track costs and usage of AWS, Google Cloud, Azure cloud providers, and OpenShift clusters as well. It helps you to have a consolidated view of the costs associated with multiple cloud accounts and also across your hybrid cloud infrastructure, to inspect cost trends, and to even use it as a basis for charging departments or teams by their usage. See the link for more information about this tool in the <em class="italic">Further reading</em> section of this chapter.</li>
			</ul>
			<p>In the next screenshot, you see an example of what the <strong class="bold">Cost Management Overview</strong> screen looks like.</p>
			<div>
				<div id="_idContainer327" class="IMG---Figure">
					<img src="image/B18015_13_19.jpg" alt="Figure 13.19 – Cost Management feature "/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.19 – Cost Management feature</p>
			<ul>
				<li><strong class="bold">Developer Sandbox</strong>: This is a free OpenShift environment in a shared, multi-tenant OpenShift cluster <a id="_idIndexMarker970"/>pre-configured with a set of developer tools. Use it as a sandbox for your tests and as an environment to learn how to develop for OpenShift. You will find the link for it in the <em class="italic">Further reading</em> section of this chapter.</li>
			</ul>
			<p>Besides the items listed in the preceding list, OpenShift Plus may make sense from the subscription cost as well. Any package is usually priced better than buying individual pieces separately. That being said, if you are interested in any software that is part of the <em class="italic">Plus</em> stack mentioned in this chapter, it might make sense to buy OpenShift Plus, instead of OpenShift and the software only. Consult your Red Hat account team and ask for a quote for OpenShift Plus.</p>
			<p>Now that we’ve already discussed some of the benefits of having the OpenShift Plus stack and considerations for when it is really compelling, let’s use a fictional use case as an example to make it more tangible.</p>
			<h1 id="_idParaDest-270"><a id="_idTextAnchor287"/>OpenShift Plus – a practical use case</h1>
			<p>Let’s consider the following use case. Try to use the concepts we covered in this book to identify which tool you <a id="_idIndexMarker971"/>could use to cover each requirement.</p>
			<p><strong class="bold">Use case</strong>: The company <em class="italic">HybridMyCloud</em> is developing an AI/ML application that has the following requirements:</p>
			<ul>
				<li>The application life cycle is comprised of Development, QA, Pre-prod, and Production environments.</li>
				<li>Development and QA can share the same underlying platform. Pre-prod and Production need to be separated due to regulatory needs. Production application needs to be in a private subnet, with no public direct access from the internet.</li>
				<li>The C-level and procurement department of <em class="italic">HybridMyCloud</em> signed a contract with AWS and, due to that, wants to host most resources there. However, they don’t want to be locked into it and want to have the ability to move the application to Azure when needed.</li>
				<li>This AI/ML application is based on containers and stateless, however, it stores images in S3 object storage. It receives an X-Ray image, stores it in S3 object storage, and uses an ML-trained model to make a risk assessment of pneumonia.</li>
				<li>This application handles <strong class="bold">Protected Health Information</strong> (<strong class="bold">PHI</strong>), therefore <em class="italic">HybridMyCloud</em> wants to be compliant with the <strong class="bold">Health Insurance Portability and Accountability Act</strong> (<strong class="bold">HIPAA</strong>).</li>
				<li>This is a mission-critical application, so the enterprise architects of <em class="italic">HybridMyCloud</em> decided to have this application deployed not only on multi-availability zones but also using multiple regions on AWS.</li>
				<li>Other policies defined by <em class="italic">HybridMyCloud</em> are as follows:<ul><li>All containers need to have resource requests and limits for CPU and memory.</li>
<li>Never use the latest tag images.</li>
<li>All images used need to come from the enterprise registry. Pulling images from any other sources other than the enterprise registry and Red Hat certified image registries is strictly prohibited.</li>
</ul></li>
			</ul>
			<p>So, how would you fulfill all these requirements? There are many different options to match these requirements; OpenShift Plus is definitely a good option that can comply with all of them. Let’s discuss what the infrastructure would look like and how OpenShift Plus tools would be used with this use case:</p>
			<p>Several OpenShift <a id="_idIndexMarker972"/>clusters are required to fulfill these requirements:</p>
			<ul>
				<li>One cluster for Development and QA</li>
				<li>One cluster for Pre-prod</li>
				<li>Two clusters for Production, each one in a different AWS region</li>
				<li>One spare cluster on Azure that can host the application at any given time</li>
			</ul>
			<p>You could use the Cluster Lifecycle Management feature of <strong class="bold">Advanced Cluster Management</strong> first to deploy these clusters on AWS and Azure. For S3 storage, either the native cloud provider services can be used or, alternatively, use the <strong class="bold">OpenShift Data Foundation</strong> with <em class="italic">Multi-Cloud Object Gateway</em>, which would add the following benefits:</p>
			<ul>
				<li>Use Object Bucket Claims to create S3 volumes.</li>
				<li>Use the <em class="italic">Multi-Cloud Object Gateway</em> to mirror the volume between AWS and Azure.</li>
			</ul>
			<p>With clusters in place, <strong class="bold">Advanced Cluster Management</strong> can also be used for the following:</p>
			<ul>
				<li><strong class="bold">Advanced Cluster Management</strong> in conjunction with <strong class="bold">OpenShift GitOps</strong> can be used to deploy the application in multiple clusters at the same time.</li>
				<li>Policies can be created to set <strong class="bold">LimitRange</strong> objects in all namespaces of each cluster and also edit the <strong class="source-inline">allowedRegistries</strong> field of the <strong class="source-inline">image.config.openshift.io/cluster</strong> custom resource to only allow images that come from the enterprise registry to run.</li>
				<li>Use the observability feature to monitor the application and cluster health.</li>
			</ul>
			<p>Quay can be used as the enterprise registry and the embedded image vulnerability scanning tool can be used as one of the sources to find known vulnerabilities. ACS can be used to detect known <a id="_idIndexMarker973"/>vulnerabilities in all clusters and assess them using HIPAA policies. It also can be used in the CI/CD pipeline to perform a static security analysis of manifests and to find anti-patterns, such as the usage of the latest tag image.</p>
			<p>These are just a few examples. Other tools we covered in this book can also be used, such as OpenShift Pipelines to implement CI/CD pipelines, Cost Management to track costs with cloud providers, and Red Hat Container Catalog to provide the best container base image, and so on.</p>
			<h1 id="_idParaDest-271"><a id="_idTextAnchor288"/>Summary</h1>
			<p>In this chapter, we had a brief overview of Red Hat Quay, an interesting option for a container image registry. We discussed the main benefits of OpenShift Plus and why it makes sense to at least consider OpenShift Plus with your hybrid or multi-cloud strategy. Finally, we used a fictional use case to think about how the OpenShift Plus stack could be used in a practical scenario.</p>
			<p>Wow, what a great journey so far! We have covered many things already in this book and we are so pleased that you have come along with us on this journey. We are almost at the end of our long journey here, but the best part is coming: in the next chapter, we will exercise most of what we have learned in this book using one practical example. We will have a comprehensive review of OpenShift Pipelines, GitOps, and all other tools we covered in this book using an example, practice with the concepts and tools from scratch, and have a real functional application deployed into multiple clusters in the end.</p>
			<p>We encourage you to move on to the next chapter and try the exercises we propose there.</p>
			<h1 id="_idParaDest-272"><a id="_idTextAnchor289"/>Further reading</h1>
			<p>Looking for more information? Check the following references to get more information about Red Hat Quay:</p>
			<ul>
				<li><em class="italic">Quay product documentation: </em><a href="https://access.redhat.com/documentation/en-us/red_hat_quay/3.7">https://access.redhat.com/documentation/en-us/red_hat_quay/3.7</a></li>
				<li><em class="italic">Quay Object Storage prerequisite:</em> <a href="https://access.redhat.com/documentation/en-us/red_hat_quay/3.7/html/deploy_red_hat_quay_on_openshift_with_the_quay_operator/operator-preconfigure#operator-storage-preconfig">https://access.redhat.com/documentation/en-us/red_hat_quay/3.7/html/deploy_red_hat_quay_on_openshift_with_the_quay_operator/operator-preconfigure#operator-storage-preconfig</a></li>
				<li><em class="italic">Clair – Vulnerability Static Analysis for Containers:</em> <a href="https://github.com/quay/clair ">https://github.com/quay/clair</a></li>
			</ul>
			<p>Check the following references to get more information about Red Hat OpenShift Data Foundation:</p>
			<ul>
				<li><em class="italic">OpenShift Data Foundation Smart Page: </em><a href="https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation">https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation</a></li>
				<li><em class="italic">OpenShift Data Foundation Product Page:</em> <a href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation">https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation</a></li>
			</ul>
			<p>Check the following references to get more information about Red Hat OpenShift Plus:</p>
			<ul>
				<li><em class="italic">OpenShift Plus Smart Page: </em><a href="https://www.redhat.com/en/technologies/cloud-computing/openshift/platform-plus">https://www.redhat.com/en/technologies/cloud-computing/openshift/platform-plus</a></li>
			</ul>
			<p>Check the following references to get more information about Red Hat Cost Management:</p>
			<ul>
				<li><em class="italic">Official documentation: </em><a href="https://access.redhat.com/documentation/en-us/cost_management_service/2022">https://access.redhat.com/documentation/en-us/cost_management_service/2022</a></li>
				<li><em class="italic">Upstream project:</em> <a href="https://project-koku.github.io/">https://project-koku.github.io/</a></li>
			</ul>
			<p>Check the following references to get more information about OpenShift Developer Sandbox:</p>
			<ul>
				<li><em class="italic">Getting started: </em><a href="https://developers.redhat.com/developer-sandbox">https://developers.redhat.com/developer-sandbox</a></li>
			</ul>
		</div>
		<div>
			<div id="_idContainer329">
			</div>
		</div>
</body></html>