- en: Creating Identity Life Cycle Management in Azure
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Azure 中创建身份生命周期管理
- en: Handling the identity life cycle in cloud services is a highly requested topic;
    in particular, we are concerned about the handling of guest users in the Azure
    Active Directory, providing access to applications in the cloud and on-premise,
    including the sharing of information in a typical collaboration scenario. Precisely
    for this reason, we will discuss many use cases for handling guest users securely
    in your environment, and we will provide good usability for the users to access
    applications and data. We will also consider some helpful tools and services to
    automate your identity life cycle management. For sure, we can only provide a
    small footprint of ideas and references in this chapter, because there are many
    tasks and ideas to solve.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在云服务中处理身份生命周期是一个高度需求的话题；尤其是我们关注的是如何处理 Azure Active Directory 中的来宾用户，如何为云端和本地应用程序提供访问权限，包括在典型协作场景中共享信息。正因为如此，我们将讨论如何在环境中安全地处理来宾用户的多种用例，并为用户提供良好的应用程序和数据访问体验。我们还将考虑一些有用的工具和服务，以自动化身份生命周期管理。我们只能在本章中提供一些小范围的想法和参考，因为这个领域涉及许多任务和解决方案。
- en: 'The chapter will be organized into the following sections:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将按以下章节组织：
- en: Lab environment readiness
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实验环境准备情况
- en: Handling the guest user life cycle
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理来宾用户生命周期
- en: Azure services for automation
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化的 Azure 服务
- en: We will be working practically on different topics, so we will need to prepare
    some prerequisites in our test environment.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在不同的主题上进行实际操作，因此我们需要在测试环境中准备一些前提条件。
- en: Lab environment readiness
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实验环境准备情况
- en: 'For this chapter, we will need a configured second Azure AD with some test
    users inside. The users need to be licensed with Office 365 E3 or E5 licenses.
    The tenant and the associated public DNS configuration for the additional custom
    domain need to be done so that the users can send and receive emails. [Chapter
    1](54c375d9-b7d0-4478-8777-33935239254b.xhtml), *Building and Managing Azure Active
    Directory*, provided you with the required technical references to be ready to
    use the lab configuration in this chapter. Testing the functionality with the
    Azure AD application proxy requires that you have finished the steps in [Chapter
    1](54c375d9-b7d0-4478-8777-33935239254b.xhtml), *Building and Managing Azure Active
    Directory,* or in [Chapter 9](0cb2c20e-ca96-41ce-b555-24f63e63b9bf.xhtml), *Deploying
    Additional Applications on Azure AD*; specifically, the Kerberos application publishing.
    We will do the configuration to provide external access to on-premise applications
    for guest users on the **YD1APP01** virtual machine, as described in the following
    diagram:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本章，我们需要配置一个第二个 Azure AD，并在其中添加一些测试用户。这些用户需要具有 Office 365 E3 或 E5 许可证。租户和关联的公共
    DNS 配置需要完成，以便用户可以发送和接收电子邮件。[第 1 章](54c375d9-b7d0-4478-8777-33935239254b.xhtml)，*构建和管理
    Azure Active Directory*，为您提供了本章所需的技术参考，以准备好使用实验配置。使用 Azure AD 应用程序代理测试功能需要您完成[第
    1 章](54c375d9-b7d0-4478-8777-33935239254b.xhtml)，*构建和管理 Azure Active Directory*，或[第
    9 章](0cb2c20e-ca96-41ce-b555-24f63e63b9bf.xhtml)，*在 Azure AD 上部署附加应用程序*，特别是 Kerberos
    应用程序发布。我们将进行配置，以为来宾用户提供对 **YD1APP01** 虚拟机上的本地应用程序的外部访问，如下图所示：
- en: '![](img/279ac108-878d-4a89-ada4-051cfdfc061e.png)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![](img/279ac108-878d-4a89-ada4-051cfdfc061e.png)'
- en: Lab environment overview
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 实验环境概述
- en: 'In addition to the infrastructure requirements, we will introduce you to the
    test user sets for the different invitation flows, to get a better understanding
    of all of the related identity life cycle tasks. To be clear which user is based
    on which infrastructure, we have put the following small explanations in place:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 除了基础设施要求之外，我们还将介绍不同邀请流程的测试用户集，以更好地理解所有相关的身份生命周期任务。为了明确哪些用户基于哪些基础设施，我们为以下内容提供了简要说明：
- en: '**Marie Lee**: Create in a hybrid cloud Office 365 partner infrastructure/tenant
    (`inovit.ch`)'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Marie Lee**：在混合云 Office 365 合作伙伴基础设施/租户中创建（`inovit.ch`）'
- en: '**Jochen Nickel**: Test user in Google; if you don''t have one, create one
    for your tests (Google)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Jochen Nickel**：在 Google 中测试用户；如果没有，创建一个供测试使用（Google）'
- en: '**Jenny Green**: Create in a cloud-only Office 365 partner environment (`yourdomain3.onmicrosoft.com/leano.ch`)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Jenny Green**：在仅云 Office 365 合作伙伴环境中创建（`yourdomain3.onmicrosoft.com/leano.ch`）'
- en: '**Don Hall**: Internal user and inviter of the `yourdomain1.onmicrosoft.com`
    tenant (`inovitdemos.ch`)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Don Hall**：内部用户和 `yourdomain1.onmicrosoft.com` 租户的邀请人（`inovitdemos.ch`）'
- en: '**Susi Delgado**: Create an external email account (`identityplus.ch`) without
    Azure AD integration'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Susi Delgado**：创建一个外部电子邮件账户（`identityplus.ch`），不进行 Azure AD 集成'
- en: 'This is summarized in the following diagram:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 这在下图中进行了总结：
- en: '![](img/eeb67fd8-e157-404e-83b5-d1e6a0835422.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eeb67fd8-e157-404e-83b5-d1e6a0835422.png)'
- en: Test users for the different Azure B2B scenarios
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 针对不同 Azure B2B 场景的测试用户
- en: Now that we have prepared our infrastructure and our test user setup, we can
    start to handle the guest user life cycle.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经准备好了基础设施和测试用户设置，可以开始处理外部用户的生命周期。
- en: Handling the guest user life cycle
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理外部用户生命周期
- en: 'In the following section, we will work through the different identity life
    cycle tasks for guest users. We will organize this section into specific use cases,
    as follows:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分，我们将处理外部用户的不同身份生命周期任务。我们将按以下用例组织该部分：
- en: '**Use Case 1**: Exploring the invitation process with different user types'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用例 1**：探索不同用户类型的邀请流程'
- en: '**Use Case 2**: Using the Azure AD B2B portal'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用例 2**：使用 Azure AD B2B 门户'
- en: '**Use Case 3**: Providing guest user access to on-premise apps'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用例 3**：为外部用户提供访问本地应用的权限'
- en: Now, we will start with the first use case.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将从第一个用例开始。
- en: Use Case 1 – Exploring the invitation process with different user types
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用例 1 – 探索不同用户类型的邀请流程
- en: 'In the following use case, we will explore the invitation process for different
    user types. We will use our global administrator to invite the following users:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的用例中，我们将探索不同用户类型的邀请流程。我们将使用全局管理员邀请以下用户：
- en: Maria Lee
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Maria Lee
- en: Jochen Nickel
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jochen Nickel
- en: Jenny Green
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jenny Green
- en: Susi Delgado
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Susi Delgado
- en: The usernames need to be replaced with your names.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 用户名需要替换为你的名字。
- en: 'With the next steps, we will start the configuration:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的步骤中，我们将开始配置：
- en: Open the Azure portal, [https://portal.azure.com](https://portal.azure.com),
    as the global administrator, and navigate to the Azure AD blade.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Azure 门户，[https://portal.azure.com](https://portal.azure.com)，以全局管理员身份登录，然后导航至
    Azure AD 面板。
- en: 'Navigate to Users | All users, as follows:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 用户 | 所有用户，如下所示：
- en: '![](img/0a8f53eb-84d5-47b0-936e-d4fbd0f44ebb.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0a8f53eb-84d5-47b0-936e-d4fbd0f44ebb.png)'
- en: Guest user creation process in Azure AD portal
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 门户中的外部用户创建过程
- en: Click on New guest user and invite all of the four test guest users, and provide
    a short personal message, like `Welcome to the team!`
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“新建外部用户”，并邀请所有四个测试外部用户，并提供一条简短的个人消息，如 `欢迎加入团队！`
- en: You can also use a bulk import over a CSV file.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你也可以通过 CSV 文件进行批量导入。
- en: 'The basic structure of the file needs to be as follows:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 文件的基本结构应该如下所示：
- en: '| **Name** | **Invited User EmailAddress** |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| **姓名** | **被邀请用户邮箱地址** |'
- en: '| Maria Lee | maria.lee@inovit.ch |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| Maria Lee | maria.lee@inovit.ch |'
- en: '| Jochen Nickel | jochen.nickel@gmail.com |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| Jochen Nickel | jochen.nickel@gmail.com |'
- en: '| Jenny Green | jenny.green@leano.ch |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| Jenny Green | jenny.green@leano.ch |'
- en: '| Susi Delgado | susi.delgado@identityplus.ch |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| Susi Delgado | susi.delgado@identityplus.ch |'
- en: Afterward, you can run the following commands.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 之后，你可以运行以下命令。
- en: 'Connect to your Azure AD tenant, as follows:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接到你的 Azure AD 租户，如下所示：
- en: '[PRE0]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Execute the invitation, as follows:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行邀请，如下所示：
- en: '[PRE1]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Check the newly created guest users, as follows:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查新创建的外部用户，如下所示：
- en: '[PRE2]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Next, we will accept all of the invitations, in the following order:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将按以下顺序接受所有邀请：
- en: Marie Lee
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Marie Lee
- en: Jenny Green
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jenny Green
- en: Jochen Nickel
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jochen Nickel
- en: Susi Delgado
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Susi Delgado
- en: Log in to every mailbox to accept the invitation (use a different browser or
    InPrivate sessions).
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录每个邮箱以接受邀请（使用不同的浏览器或 InPrivate 会话）。
- en: 'You should receive a message like this on every account:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你应该在每个账户上收到如下消息：
- en: '![](img/903941e4-1c7b-46ce-93b2-ef9501a0e77d.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/903941e4-1c7b-46ce-93b2-ef9501a0e77d.png)'
- en: Azure AD guest invitation message
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 外部用户邀请消息
- en: 'Click on Get Started as Maria, and you will be redirected to the consent of
    `YOURDOMAIN1.ONMICROSOFT.COM`, as follows:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“以 Maria 身份开始”，你将被重定向到 `YOURDOMAIN1.ONMICROSOFT.COM` 的同意页面，如下所示：
- en: '![](img/a351566c-6878-42a6-9309-7bb4db3b79dc.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a351566c-6878-42a6-9309-7bb4db3b79dc.png)'
- en: Permission consent
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 权限同意
- en: This is the default behavior for Azure AD based users, and will be the same
    with **Jenny Green**.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 Azure AD 基于用户的默认行为，并且与 **Jenny Green** 相同。
- en: 'Accept the permissions, and you will automatically be signed in to the access
    panel UI of `YOURDOMAIN1`, as follows:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受权限后，你将自动登录到 `YOURDOMAIN1` 的访问面板 UI，如下所示：
- en: '![](img/f05d48fc-22e4-44bb-bd0a-86c14346ff9b.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f05d48fc-22e4-44bb-bd0a-86c14346ff9b.png)'
- en: Azure AD Access Panel UI
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 访问面板界面
- en: With this process, you will have no preassigned applications and groups.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 通过此过程，你将没有预先分配的应用程序和组。
- en: Log out and do the same for Jenny Green, and you will have the same behavior
    experience.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注销并对 Jenny Green 执行相同操作，你将体验到相同的行为。
- en: Next, you will do the same with your Gmail account; in my case, it's `jochen.nickel@gmail.com`.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，你需要用你的 Gmail 账户进行相同的操作；在我的例子中是`jochen.nickel@gmail.com`。
- en: 'You will notice that you are redirected to [https://login.live.com](https://login.live.com),
    and you need to log in with your Gmail account credentials, as follows:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会注意到你被重定向到 [https://login.live.com](https://login.live.com)，并且需要使用你的 Gmail
    账户凭证登录，如下所示：
- en: '![](img/4b62445f-61ea-45d2-b491-5494add790df.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4b62445f-61ea-45d2-b491-5494add790df.png)'
- en: Login experience of the Gmail account to live.com
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: Gmail 账户登录 live.com 的体验
- en: This is the typical behavior for Gmail and other federated identity providers
    to Azure AD.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 Gmail 和其他联合身份提供者向 Azure AD 验证的典型行为。
- en: The other steps are the same as for existing Azure AD users.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 其他步骤与现有 Azure AD 用户相同。
- en: 'Log out and run the process for the external non-Azure AD email account (in
    my case, Susi Delgado) as follows:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注销并对外部非 Azure AD 电子邮件账户（在我的例子中是 Susi Delgado）执行此过程，如下所示：
- en: '![](img/1df23a10-749e-41e9-9d51-0ad988390ced.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1df23a10-749e-41e9-9d51-0ad988390ced.png)'
- en: Email account behavior for guest invites
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 访客邀请的电子邮件账户行为
- en: 'You will notice that you need to create a Microsoft account, as follows:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会注意到需要创建一个微软账户，如下所示：
- en: '![](img/cdcce209-6d67-445c-8bc1-d06d176ab320.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cdcce209-6d67-445c-8bc1-d06d176ab320.png)'
- en: Microsoft account setup
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 微软账户设置
- en: This is the default behavior if the user doesn't exist in any Azure AD.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如果用户在任何 Azure AD 中不存在，这是默认行为。
- en: 'You will see the following link in the address bar: [https://invitations.microsoft.com/signup?tenant=7709ca2b-3be8-4d92-89d7-dc1e274b4d0e](https://invitations.microsoft.com/signup?tenant=7709ca2b-3be8-4d92-89d7-dc1e274b4d0e)'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 你会在地址栏看到以下链接：[https://invitations.microsoft.com/signup?tenant=7709ca2b-3be8-4d92-89d7-dc1e274b4d0e](https://invitations.microsoft.com/signup?tenant=7709ca2b-3be8-4d92-89d7-dc1e274b4d0e)
- en: You will receive a verification email to your account.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将收到一封发送到你账户的验证邮件。
- en: 'Enter the verification code and click on Finish, as follows:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入验证码并点击“完成”，如下所示：
- en: '![](img/8b945b12-78d0-4fd8-9e4f-dba123dbe465.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8b945b12-78d0-4fd8-9e4f-dba123dbe465.png)'
- en: Verification process
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 验证过程
- en: Accept the consent that appears. Technically, you are now the owner of your
    own Azure AD tenant.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受出现的同意条款。从技术上讲，你现在是你自己 Azure AD 租户的所有者。
- en: You can verify this by opening the Azure portal, [https://portal.azure.com](https://portal.azure.com),
    and logging on as Susi Delgado.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以通过打开 Azure 门户 [https://portal.azure.com](https://portal.azure.com)，并以 Susi
    Delgado 的身份登录来验证这一点。
- en: 'Navigate to the Azure AD blade and check the existing users, as follows:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 Azure AD 切片并检查现有用户，如下所示：
- en: '![](img/c4702621-4ce1-4452-a00e-dbbc87924657.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c4702621-4ce1-4452-a00e-dbbc87924657.png)'
- en: Azure AD user management
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 用户管理
- en: 'Check the custom domains, and you will find that your suffix is mentioned as
    Verified, as follows:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查自定义域名，你会发现你的后缀被标记为已验证，如下所示：
- en: '![](img/2669c947-f19b-4a20-a426-4a352c08f295.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2669c947-f19b-4a20-a426-4a352c08f295.png)'
- en: Custom domain overview
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义域概览
- en: With the following procedure, you can take over the Azure AD tenant [https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/domains-admin-takeover](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/domains-admin-takeover)[.](https://bit.ly/2R5wkQr)
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下程序，你可以接管 Azure AD 租户 [https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/domains-admin-takeover](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/domains-admin-takeover)[.](https://bit.ly/2R5wkQr)
- en: 'You will find all guest users with different source types, as shown in the
    following screenshot:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 你会看到所有访客用户，源类型各不相同，如下截图所示：
- en: '![](img/3a6fe1a9-8b04-4d4e-9324-ba09f4a069bf.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3a6fe1a9-8b04-4d4e-9324-ba09f4a069bf.png)'
- en: Azure AD user management—Guest users only filter
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 用户管理——仅限访客用户筛选
- en: 'To summarize the invitation process up to now: if a user has already managed
    in a partner Azure AD, there is no special behavior, except for accepting the
    invitation and the permission consent. A user from Gmail, or any other federated
    identity provider, will be treated on a special `live.com` directory. Furthermore,
    a user that doesn''t already exist on any Azure AD will be created in an unmanaged
    Azure AD. Be aware that there is no automatic deprovisioning process, and the
    user will have to use an additional credential set.'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 总结目前的邀请过程：如果用户已经在合作伙伴的 Azure AD 中管理，则没有特殊行为，除了接受邀请和权限同意。来自 Gmail 或任何其他联合身份提供商的用户将被视为特殊的
    `live.com` 目录中的用户。此外，任何未在任何 Azure AD 中存在的用户，将在非管理的 Azure AD 中创建。请注意，没有自动撤销过程，用户将需要使用额外的凭据集。
- en: 'With the following configuration switch, you can limit users to accessing the
    Azure portal. If you run an Azure AD Privileged Identity Management scenario,
    the following will be not the best option:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下配置切换，您可以限制用户访问 Azure 门户。如果您运行 Azure AD 特权身份管理场景，以下选项将不是最佳选择：
- en: '![](img/b6ffad54-1e7f-44e8-9bc6-cfd3927bb5cd.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b6ffad54-1e7f-44e8-9bc6-cfd3927bb5cd.png)'
- en: Option to restrict Azure AD Portal access
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 限制访问 Azure AD 门户的选项
- en: 'Furthermore, you should reconfigure the default settings for the external collaboration
    so that guests can''t invite other guests, as follows:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您应该重新配置外部协作的默认设置，以确保访客无法邀请其他访客，如下所示：
- en: '![](img/e1a4868f-5b43-44a6-b0da-96ef5d2650b1.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e1a4868f-5b43-44a6-b0da-96ef5d2650b1.png)'
- en: Azure AD guest user handling options
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 访客用户处理选项
- en: 'Another useful tip is how to convert a guest user to an internal member. This
    can be reached with the following cmdlets:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个有用的提示是如何将访客用户转换为内部成员。可以通过以下 cmdlets 实现：
- en: 'Provide global administrator credentials, as follows:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供全局管理员凭据，如下所示：
- en: '[PRE3]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Convert the user, as follows:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下步骤转换用户：
- en: '[PRE4]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The next important point is to harden the All users group, if enabled. To do
    this, take the following steps:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来要注意的重点是加强“所有用户”组（如果启用了该选项）。为此，请执行以下步骤：
- en: 'You will find the setting under the Azure AD blade | Groups | General, as shown
    in the following screenshot:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在 Azure AD 切片 | 组 | 常规下找到该设置，如下图所示：
- en: '![](img/d882f77b-1108-4cef-82d9-df4268d9bd90.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d882f77b-1108-4cef-82d9-df4268d9bd90.png)'
- en: All users option
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 所有用户选项
- en: 'Do the following hardening configuration on the All users group:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对“所有用户”组执行以下强化配置：
- en: '![](img/4613a692-679e-4cf6-b48b-772ce1d1c015.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4613a692-679e-4cf6-b48b-772ce1d1c015.png)'
- en: Dynamic group membership rule for the member user type
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 会员用户类型的动态组成员资格规则
- en: 'Build another group with dynamic group membership, like All Guest Users, as
    follows:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建另一个动态组成员资格的组，如“所有访客用户”，如下所示：
- en: '![](img/fa633eee-ab8b-4361-b994-b6029fb5bbeb.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fa633eee-ab8b-4361-b994-b6029fb5bbeb.png)'
- en: Dynamic Group membership rule for guest users
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 访客用户的动态组成员资格规则
- en: You can also enable Azure **multi-factor authentication** (**MFA**) for all
    guest users to access the Azure portal, [https://portal.microsoft.com](https://portal.microsoft.com).
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您还可以为所有访客用户启用 Azure **多重身份验证**（**MFA**），以访问 Azure 门户，[https://portal.microsoft.com](https://portal.microsoft.com)。
- en: Navigate to Conditional Access (Azure AD Premium P2).
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到条件访问（Azure AD Premium P2）。
- en: 'Click on New policy, as follows:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“新建策略”，如下所示：
- en: '![](img/0890ff06-6cd5-4073-9e6e-a2e8c2dce282.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0890ff06-6cd5-4073-9e6e-a2e8c2dce282.png)'
- en: Conditional Access management policies for Salesforce
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: Salesforce 的条件访问管理策略
- en: 'Define a name and choose All guest users, as follows:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义名称并选择“所有访客用户”，如下所示：
- en: '![](img/06379a10-d9b7-481b-925e-f438ee5846e5.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](img/06379a10-d9b7-481b-925e-f438ee5846e5.png)'
- en: Guest user selection
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 访客用户选择
- en: 'Choose the Microsoft Azure Management application, as follows:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 Microsoft Azure 管理应用程序，如下所示：
- en: '![](img/6aea908e-3610-4e98-bffe-9cb184050fde.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6aea908e-3610-4e98-bffe-9cb184050fde.png)'
- en: Protection of the Azure Portal access
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 保护 Azure 门户访问
- en: 'Under Access Control, select Require multi-factor authentication, as follows:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在访问控制下，选择“要求多重身份验证”，如下所示：
- en: '![](img/2bf63fd1-92b3-473e-acfb-7d1f16f30e33.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2bf63fd1-92b3-473e-acfb-7d1f16f30e33.png)'
- en: MFA requirement
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: MFA 要求
- en: Enable the policy.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用该策略。
- en: Test the functionality with one of your guest users.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用其中一个访客用户测试该功能。
- en: After working through the first processes, we can extend our solution with the
    Azure AD B2B portal, in order to provide more capabilities.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在完成前面的过程后，我们可以通过 Azure AD B2B 门户扩展解决方案，以提供更多功能。
- en: Using the Azure AD B2B portal and use cases
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Azure AD B2B 门户和使用案例
- en: The invitation API provides a lot of capabilities to customize the onboarding
    workflow for guest users. You can include processes like self-signup, assigning
    a manager for guest users, an update to the user profile, and an automatic group
    or application assignment to the guest users. We will use the Microsoft sample
    project to demonstrate the different capabilities in your environment. You can
    find the sample project at [https://github.com/Azure/active-directory-dotnet-graphapi-b2bportal-web](https://github.com/Azure/active-directory-dotnet-graphapi-b2bportal-web).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 邀请 API 提供了许多功能，可以自定义来宾用户的入职工作流。你可以包含诸如自我注册、为来宾用户分配经理、更新用户个人资料以及自动为来宾用户分配群组或应用等流程。我们将使用
    Microsoft 示例项目来展示你在环境中的不同功能。你可以在[https://github.com/Azure/active-directory-dotnet-graphapi-b2bportal-web](https://github.com/Azure/active-directory-dotnet-graphapi-b2bportal-web)找到示例项目。
- en: Installation and configuration
  id: totrans-143
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装和配置
- en: 'In the beginning, we need to provide two Azure Active Directory applications
    that will be used to delegate the correct permissions to the Azure B2B sample
    portal. To do this, take the following steps:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 最开始，我们需要提供两个 Azure Active Directory 应用，这些应用将用于授权正确的权限给 Azure B2B 示例门户。为此，请执行以下步骤：
- en: Navigate to your Azure portal, [https://portal.azure.com](https://portal.azure.com),
    and the Azure AD blade.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问你的 Azure 门户，[https://portal.azure.com](https://portal.azure.com)，以及 Azure
    AD 窗格。
- en: 'Click on Properties and copy the directory ID to a notepad, as follows:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“属性”并将目录 ID 复制到记事本中，如下所示：
- en: '![](img/5773ce23-ab7f-4988-9ab5-90615ccf5b73.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5773ce23-ab7f-4988-9ab5-90615ccf5b73.png)'
- en: Getting directory ID
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 获取目录 ID
- en: 'Click on App registrations and add a new app, like the following:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“应用注册”并添加一个新的应用，如下所示：
- en: '![](img/19d7c03d-3f88-4a17-bf87-9d266dd428c8.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](img/19d7c03d-3f88-4a17-bf87-9d266dd428c8.png)'
- en: Configuring app properties
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 配置应用属性
- en: Click on Settings on the newly created app.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击新创建应用的“设置”。
- en: Navigate to Required permissions.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入“所需权限”。
- en: Click on Add and select the Microsoft Graph.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“添加”并选择Microsoft Graph。
- en: 'Click on Select permissions and enable the following permissions:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“选择权限”，并启用以下权限：
- en: 'Application permissions:'
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序权限：
- en: Read and write directory data
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 读取和写入目录数据
- en: Read and write all users' full profiles
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 读取和写入所有用户的完整个人资料
- en: 'Delegated permissions:'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 委托权限：
- en: 'Sign in and read user profile, as follows:'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 登录并读取用户个人资料，如下所示：
- en: '![](img/302d2d25-95da-4a97-ad88-19d941611329.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/302d2d25-95da-4a97-ad88-19d941611329.png)'
- en: Configuring required permissions
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 配置所需权限
- en: 'After you have added the Microsoft Graph API and configured the permissions,
    click on Grant permissions, as follows:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你添加 Microsoft Graph API 并配置权限后，点击“授予权限”，如下所示：
- en: '![](img/3dfef32a-8f12-443b-8556-05fa0b4d9ec1.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3dfef32a-8f12-443b-8556-05fa0b4d9ec1.png)'
- en: Permission granting procedure
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 权限授予过程
- en: Navigate to the Keys section.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入“密钥”部分。
- en: Provide a key description and choose expires in 2 years.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供密钥描述并选择 2 年后过期。
- en: 'Click on Save and copy the key value to your notepad, as follows:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“保存”并将密钥值复制到记事本中，如下所示：
- en: '![](img/c2319a5a-9e74-4a65-a546-52144d37858c.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c2319a5a-9e74-4a65-a546-52144d37858c.png)'
- en: Key generation
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 密钥生成
- en: 'Next, copy the Application ID to your notepad, as follows:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，将应用程序 ID 复制到记事本中，如下所示：
- en: '![](img/e07b25e8-1c2a-4e2e-a830-753e35651d73.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e07b25e8-1c2a-4e2e-a830-753e35651d73.png)'
- en: App ID gathering
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序 ID 收集
- en: Now, we can create the second app for the pre-authentication.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以为预认证创建第二个应用。
- en: 'Use the following values:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下值：
- en: '![](img/e87da190-8ecb-4c19-af66-2dd9cc3e35e6.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e87da190-8ecb-4c19-af66-2dd9cc3e35e6.png)'
- en: Pre-auth app configuration
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 预认证应用配置
- en: 'Under Settings | Properties, choose Multi-tenanted as Yes, as follows:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在设置 | 属性下，选择“多租户”为“是”，如下所示：
- en: '![](img/6cc188db-6b77-4313-a1be-a98a05c0f80f.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6cc188db-6b77-4313-a1be-a98a05c0f80f.png)'
- en: Multi-tenant option enabled
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 启用多租户选项
- en: Click on Required permissions and add the Microsoft Graph API.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“所需权限”并添加 Microsoft Graph API。
- en: 'Assign the following permissions:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分配以下权限：
- en: '**Delegated permissions**: Sign in and read user profile'
  id: totrans-183
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**委托权限**：登录并读取用户个人资料'
- en: Don't forget to press the Grant permissions button.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不要忘记点击“授予权限”按钮。
- en: Next, we need to generate an app key, like we did for the first app.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要为第二个应用生成一个应用密钥，就像我们为第一个应用做的那样。
- en: Copy the key value to your notepad.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将密钥值复制到记事本中。
- en: Copy the Application ID to your notepad.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将应用程序 ID 复制到记事本中。
- en: 'Click on Manifest, as follows:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“清单”，如下所示：
- en: '![](img/33a5e277-d38f-4fb0-b2be-890000b5cd35.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/33a5e277-d38f-4fb0-b2be-890000b5cd35.png)'
- en: App manifest configuration options for advanced topics
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 高级主题的应用清单配置选项
- en: 'We need to change the oauth2AllowImplicitFlow value to `true`, as follows:'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要将 `oauth2AllowImplicitFlow` 值更改为 `true`，如下所示：
- en: '![](img/6b8f05ca-7fe2-4365-b0b5-35b7c48f1e78.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b8f05ca-7fe2-4365-b0b5-35b7c48f1e78.png)'
- en: OAuth flow option
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: OAuth 流程选项
- en: Now, we can start to deploy our web application to Azure.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以开始将我们的 web 应用部署到 Azure。
- en: 'Click on Deploy to Azure, as follows:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“部署到 Azure”，如下所示：
- en: '![](img/fdc4d78e-6c7d-403b-9125-35e3413fa540.png)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fdc4d78e-6c7d-403b-9125-35e3413fa540.png)'
- en: Example of portal deployment to Azure
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 门户部署示例
- en: 'Use the values from your notepad and fill, them in as follows:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用记事本中的值并按如下方式填写：
- en: '![](img/629eff8c-5db3-4efe-9f6f-ce0d02c6eb3a.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](img/629eff8c-5db3-4efe-9f6f-ce0d02c6eb3a.png)'
- en: Azure AD B2B portal deployment options
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD B2B 门户部署选项
- en: Wait until the deployment process is done.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 等待部署过程完成。
- en: Navigate to the App Service section on the Azure portal.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Azure 门户中导航到应用服务部分。
- en: 'Copy the URL to your B2B Portal application, as follows:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制 B2B 门户应用的 URL，如下所示：
- en: '![](img/a6d9f07b-0850-4f56-b36e-9ac801568fd3.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a6d9f07b-0850-4f56-b36e-9ac801568fd3.png)'
- en: App deployment result
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 应用部署结果
- en: Edit each of your Azure AD apps and change the Homepage and Reply URL.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑每个 Azure AD 应用并更改首页和回复 URL。
- en: All done. Now we can start to use the portal and build some example processes.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了。现在我们可以开始使用门户并构建一些示例流程。
- en: Usage of the portal
  id: totrans-208
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 门户使用
- en: 'The Azure AD B2B portal provides many processes to show the power of the invitation
    API. With the first touch on your brand new site, you need to log in and configure
    the basic parameters. To do this, take the following steps:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD B2B 门户提供了许多流程来展示邀请 API 的强大功能。首次访问你全新的站点时，你需要登录并配置基本参数。为此，请按照以下步骤操作：
- en: 'Open your portal link and log in to the Azure AD B2B portal with your global
    administrator credentials, as follows:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开你的门户链接，并使用全局管理员凭据登录到 Azure AD B2B 门户，如下所示：
- en: '![](img/90c6897a-a703-4319-bf0b-02b3ea7e2cf8.png)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![](img/90c6897a-a703-4319-bf0b-02b3ea7e2cf8.png)'
- en: Azure AD B2B Portal basic configuration
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD B2B 门户基础配置
- en: 'In the next configuration steps, you can configure the corporate identity of
    the web page, including the communication templates, as follows:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在接下来的配置步骤中，你可以配置网页的企业身份，包括通信模板，如下所示：
- en: '![](img/b825e111-a14d-466e-b097-5c1540940f2e.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b825e111-a14d-466e-b097-5c1540940f2e.png)'
- en: Azure AD B2B example portal site configuration
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD B2B 示例门户站点配置
- en: Enter the site name and the inviting organization, including a short welcome
    message.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入站点名称和邀请组织，包括简短的欢迎信息。
- en: Enter the inviter email address and click on Save.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入邀请者电子邮件地址并点击保存。
- en: Next, we will create three more user accounts in your partner Azure AD tenant, `yourdomain3.onmicrosoft.com`
    (`leano.ch`).
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将在你的合作伙伴 Azure AD 租户中创建另外三个用户帐户，`yourdomain3.onmicrosoft.com`（`leano.ch`）。
- en: Assign an **Office 365 E3/E5** license to provide a mailbox for the users.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为用户分配 **Office 365 E3/E5** 许可证，以提供邮箱。
- en: 'Just name them as follows:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 只需按如下所示命名它们：
- en: '`guest.user1@leano.ch`'
  id: totrans-221
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guest.user1@leano.ch`'
- en: '`guest.user2@leano.ch`'
  id: totrans-222
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guest.user2@leano.ch`'
- en: '`guest.user3@leano.ch`'
  id: totrans-223
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guest.user3@leano.ch`'
- en: Now, we can see the capability of providing custom email templates for the invitation
    process.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以看到提供自定义邮件模板以用于邀请过程的功能。
- en: 'Click on Admin | Manage Mail Templates, as follows:'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击管理员 | 管理邮件模板，如下所示：
- en: '![](img/1a2f12ed-53b8-4356-80fe-332acf0e1781.png)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1a2f12ed-53b8-4356-80fe-332acf0e1781.png)'
- en: Admin options
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 管理选项
- en: 'A default template is already in place, as demonstrated in the following screenshot:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 已经有一个默认模板，以下截图演示了这一点：
- en: '![](img/7a93e974-ba8b-4256-a133-2676757ad9a4.png)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7a93e974-ba8b-4256-a133-2676757ad9a4.png)'
- en: Invitation templates configuration
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 邀请模板配置
- en: 'Click on + New to create an additional template, as follows:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 + 新建 创建一个额外的模板，如下所示：
- en: '![](img/23cdae9f-fe09-4303-bf76-e6ebbad06779.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![](img/23cdae9f-fe09-4303-bf76-e6ebbad06779.png)'
- en: Custom mail templates configuration
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义邮件模板配置
- en: If you want to use SMTP, your web app needs to have an SMTP server configured.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你想使用 SMTP，你的 web 应用需要配置一个 SMTP 服务器。
- en: Click on Save.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击保存。
- en: Next, we will see domain management.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将看到域管理。
- en: 'In this section, you can configure the main process parts, which are as follows:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此部分，你可以配置主要流程部分，具体如下：
- en: Defining pre-approved organizations.
  id: totrans-238
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义预批准的组织。
- en: Defining the user type, **Guest** or **Member**.
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义用户类型，**访客**或**成员**。
- en: You can use the predefined mail templates, based on the organization.
  id: totrans-240
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以根据组织使用预定义的邮件模板。
- en: 'You can put the invited user directly into the required group, as follows:'
  id: totrans-241
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以将被邀请的用户直接加入所需的组，如下所示：
- en: '![](img/eb1d6083-f059-480b-b548-5b9bffcc80b2.png)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb1d6083-f059-480b-b548-5b9bffcc80b2.png)'
- en: Automatic group assignment and access management options
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 自动组分配和访问管理选项
- en: Type the `yourdomain3.onmicrosoft` (`leano.ch`) organization domain.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入 `yourdomain3.onmicrosoft` (`leano.ch`) 组织域。
- en: Assign the Kerberos Demo Application Access group to the user.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 Kerberos 演示应用程序访问组分配给该用户。
- en: 'You will notice that the application can check directly whether the organization
    is based on Azure AD, as follows:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您会注意到，应用程序可以直接检查组织是否基于 Azure AD，如下所示：
- en: '![](img/05024f57-cbb9-42e7-82a6-c4823fadd621.png)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![](img/05024f57-cbb9-42e7-82a6-c4823fadd621.png)'
- en: Suffix verification against Azure AD list
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 后缀验证与 Azure AD 列表对比
- en: 'Click on Save:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击保存：
- en: '![](img/4f6dd474-b437-4c1e-ae0d-954cb10662f5.png)'
  id: totrans-250
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4f6dd474-b437-4c1e-ae0d-954cb10662f5.png)'
- en: Pre-approved domain configuration
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 预批准域配置
- en: Now, we can test the functionality with our first guest user.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以使用我们的第一个访客用户来测试功能。
- en: 'Open the B2B portal, as follows:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 B2B 门户，如下所示：
- en: '![](img/f4677a3a-d3a6-45de-982f-b9347b333073.png)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f4677a3a-d3a6-45de-982f-b9347b333073.png)'
- en: Azure AD B2B example app sign-up page
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD B2B 示例应用程序注册页面
- en: Sign up with `guest.user1@leano.ch`, and click on Request Access.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `guest.user1@leano.ch` 注册，并点击请求访问。
- en: 'You will receive the following message to identify your request:'
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将收到以下消息以识别您的请求：
- en: '![](img/9db5e626-5775-4c54-a329-09d7af11e0c1.png)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9db5e626-5775-4c54-a329-09d7af11e0c1.png)'
- en: Sign up, including the request ID
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 注册，包括请求 ID
- en: Next, log in to the B2B portal as an administrator.
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，请以管理员身份登录 B2B 门户。
- en: 'You will see the request from the user, as follows:'
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将看到来自该用户的请求，如下所示：
- en: '![](img/6a74187a-0af6-429e-9291-298c3ba972b7.png)'
  id: totrans-262
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a74187a-0af6-429e-9291-298c3ba972b7.png)'
- en: Guest approval process
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 访客批准流程
- en: The guest user has not yet been created in the organization.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访客用户尚未在组织中创建。
- en: 'Approve the request and save, as follows:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 批准请求并保存，如下所示：
- en: '![](img/7b142681-4b19-4825-afff-cb1e1501c2e6.png)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7b142681-4b19-4825-afff-cb1e1501c2e6.png)'
- en: Request approval
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 请求审批
- en: Log in to [https://myapps.microsoft.com](https://myapps.microsoft.com) as Guest
    User1.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以访客用户1身份登录 [https://myapps.microsoft.com](https://myapps.microsoft.com)。
- en: You should get the notification about the invite, and you can perform the onboarding
    process.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您应该会收到关于邀请的通知，您可以执行入职流程。
- en: 'If a user is invited but didn''t accept the invitation, the guest user will
    be in the following state:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果邀请了用户，但他未接受邀请，访客用户将处于以下状态：
- en: '![](img/b0194425-e3b4-4bb3-8963-3757ee0226b3.png)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b0194425-e3b4-4bb3-8963-3757ee0226b3.png)'
- en: User type and state
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 用户类型和状态
- en: The state will be changed after the user accepts.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户接受后，状态将会改变。
- en: The following should be the expected result.
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下应为预期结果。
- en: 'The user is assigned to the app group, as follows:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户已分配至应用组，如下所示：
- en: '![](img/211c7abe-de04-48d1-82c9-6987d2ea3806.png)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![](img/211c7abe-de04-48d1-82c9-6987d2ea3806.png)'
- en: Group assignment
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 组分配
- en: 'The user is a member of the organization. Click on his user icon in [https://myapps.microsoft.com](https://myapps.microsoft.com),
    as follows:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户是组织的成员。点击他的用户图标，在 [https://myapps.microsoft.com](https://myapps.microsoft.com)，如下所示：
- en: '![](img/12240265-11ef-4cbc-a569-66ab56827831.png)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![](img/12240265-11ef-4cbc-a569-66ab56827831.png)'
- en: Organization association
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 组织关联
- en: 'If you click on the wheel, you will be able to leave the organization (feature
    related to the General Data Protection Regulations GDPR), as shown in the following
    screenshot:'
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您点击齿轮图标，您将能够退出组织（与通用数据保护条例 GDPR 相关的功能），如下图所示：
- en: '![](img/1a73c80b-b676-45c1-9ccc-6efa681e7e10.png)'
  id: totrans-282
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1a73c80b-b676-45c1-9ccc-6efa681e7e10.png)'
- en: Leave organization option
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 离开组织选项
- en: 'And, if you change the organization, the Kerberos Demo Web Site application
    should appear, as follows:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您更改了组织，Kerberos 演示网站应用程序应当会显示，如下所示：
- en: '![](img/46a75375-6bba-4635-ad38-a145b914c7d4.png)'
  id: totrans-285
  prefs: []
  type: TYPE_IMG
  zh: '![](img/46a75375-6bba-4635-ad38-a145b914c7d4.png)'
- en: Assigned applications on the Azure AD access panel UI
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 分配的应用程序在 Azure AD 访问面板 UI 上显示
- en: For now, if you click on the application, you will receive an error; we will
    handle this later in this chapter.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 目前，如果您点击应用程序，您将收到错误信息；我们将在本章后面处理这个问题。
- en: 'You will be a member of the following groups, when you click on Groups, as
    follows:'
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您点击“组”时，您将成为以下组的成员，如下所示：
- en: '![](img/2776a077-24da-49c5-b1c4-21183933d9a2.png)'
  id: totrans-289
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2776a077-24da-49c5-b1c4-21183933d9a2.png)'
- en: Group assignment self-service and overview
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 组分配自助服务和概览
- en: The next process that the B2B portal supports is auto-approval for organizations
    that you know.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: B2B 门户支持的下一个流程是对您已知的组织进行自动批准。
- en: 'If you decide to delegate the invitation process to an internal or external
    employee over the Azure AD portal or the B2B portal, you can use the Azure AD
    PIM AD Guest Inviter role, as follows:'
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你决定将邀请流程委派给 Azure AD 门户或 B2B 门户上的内部或外部员工，你可以使用 Azure AD PIM AD 客户邀请者角色，如下所示：
- en: '![](img/c6c2fc90-7439-4cee-8f34-08f75bcf521f.png)'
  id: totrans-293
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c6c2fc90-7439-4cee-8f34-08f75bcf521f.png)'
- en: Delegation of the guest inviter role
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 客户邀请者角色的委派
- en: During this use case, you have seen the power of the invitation API. You can
    work around it and build your own scenarios.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个使用案例中，你已经看到了邀请 API 的强大功能。你可以绕过它并构建你自己的场景。
- en: Special considerations
  id: totrans-296
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 特别注意事项
- en: 'In this small section, we will take a look at some special parts of the B2B
    process. Let''s start with the scenario that a user gets married and changes their
    name, including the email address and the `userPrincipalName`. Follow these steps:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一小节中，我们将查看 B2B 流程中的一些特殊部分。让我们从用户结婚并更改姓名的情景开始，包括电子邮件地址和 `userPrincipalName`。按照以下步骤操作：
- en: To view the result, we will do this for `guest.user1@leano.ch`.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了查看结果，我们将对 `guest.user1@leano.ch` 执行此操作。
- en: 'Open [https://portal.office.com](https://portal.office.com) on the `yourdomain3.onmicrosoft.com`
    tenant and select the user, as follows:'
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 [https://portal.office.com](https://portal.office.com) 并在 `yourdomain3.onmicrosoft.com`
    租户中选择该用户，如下所示：
- en: '![](img/693e2a12-4b72-423a-99be-b6f97b3bb860.png)'
  id: totrans-300
  prefs: []
  type: TYPE_IMG
  zh: '![](img/693e2a12-4b72-423a-99be-b6f97b3bb860.png)'
- en: Guest user modification options and results
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 客户用户修改选项和结果
- en: Click on Manage user and call him `jeff.barnes@leano.ch`.
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 管理用户 并将其称为 `jeff.barnes@leano.ch`。
- en: 'Navigate to the Exchange Admin Center, as follows:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 Exchange 管理中心，如下所示：
- en: '![](img/fa713cd2-9c7a-4ecf-8db4-3fad09e43b8d.png)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fa713cd2-9c7a-4ecf-8db4-3fad09e43b8d.png)'
- en: Exchange Admin center access
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: Exchange 管理中心访问
- en: Navigate to Recipients | Mailboxes.
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 收件人 | 邮箱。
- en: 'Edit the Guest User1 new Jeff Barnes, with the following expected result:'
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑客户用户1为新的 Jeff Barnes，预期结果如下：
- en: '![](img/c5f9b8b1-0b1e-4e1f-9b8e-4bc80132f818.png)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5f9b8b1-0b1e-4e1f-9b8e-4bc80132f818.png)'
- en: Email address change for the guest user
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 客户用户的电子邮件地址更改
- en: Go to the Email address.
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到电子邮件地址。
- en: 'Change all of the following to Jeff Barnes, as follows:'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下所有内容更改为 Jeff Barnes，如下所示：
- en: '![](img/778ed0fc-06f4-4413-8c57-c2cd629cd86b.png)'
  id: totrans-312
  prefs: []
  type: TYPE_IMG
  zh: '![](img/778ed0fc-06f4-4413-8c57-c2cd629cd86b.png)'
- en: Changing the user attributes
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 更改用户属性
- en: 'Your user should now look like this in the Azure AD:'
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你的用户现在应该在 Azure AD 中显示如下：
- en: '![](img/e6cf9ba0-f31c-4039-b935-ef665c63540d.png)'
  id: totrans-315
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e6cf9ba0-f31c-4039-b935-ef665c63540d.png)'
- en: Result of changes
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 更改结果
- en: Next, we will test the behavior on [https://myapps.microsoft.com](https://myapps.microsoft.com)
    with Jeff Barnes (Guest User1).
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将在 [https://myapps.microsoft.com](https://myapps.microsoft.com) 上测试 Jeff
    Barnes（客户用户1）的行为。
- en: 'Your user should look like this:'
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你的用户应该看起来像这样：
- en: '![](img/ac99f22a-4341-4765-8991-295c3ab72025.png)'
  id: totrans-319
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ac99f22a-4341-4765-8991-295c3ab72025.png)'
- en: Review of the changes in the Azure AD Access Panel UI
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Azure AD 访问面板 UI 中查看更改
- en: Now, change to the `INOVITDEMOS` organization.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将其更改为 `INOVITDEMOS` 组织。
- en: You should have the same experience as before, because the mapping in the background
    is done by a GUID.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你应该和以前有相同的体验，因为后台的映射是通过 GUID 完成的。
- en: 'However, you should notice, as in the following, that the user is still called
    Guest User1:'
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然而，你应该注意到，如下所示，用户仍然被称为客户用户1：
- en: '![](img/de506cd4-d218-4a17-a0fb-9fda08c6eb35.png)'
  id: totrans-324
  prefs: []
  type: TYPE_IMG
  zh: '![](img/de506cd4-d218-4a17-a0fb-9fda08c6eb35.png)'
- en: Review of the changes in the Azure AD Access Panel UI (External org)
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Azure AD 访问面板 UI 中查看更改（外部组织）
- en: There is no synchronization job between the two organizations.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 两个组织之间没有同步工作。
- en: 'You can change the experience for the user by changing his information, as
    follows:'
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以通过更改用户信息来改变其体验，如下所示：
- en: '![](img/c5ec93ae-8be4-41d3-83ee-742089009082.png)'
  id: totrans-328
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5ec93ae-8be4-41d3-83ee-742089009082.png)'
- en: Attribute change options
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 属性更改选项
- en: 'There are more things that you should note about guest users, as follows:'
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还需要注意有关客户用户的更多事项，如下所示：
- en: They can't get Exchange Online licenses
  id: totrans-331
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 他们不能获得 Exchange Online 许可证
- en: They can't change the tenant in Office 365 (for PIM enabled external supporters,
    for example)
  id: totrans-332
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 他们不能更改 Office 365 中的租户（例如对于启用 PIM 的外部支持者）
- en: You can't leave an organization if your sign in is blocked
  id: totrans-333
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你的登录被阻止，你将无法离开组织
- en: You can read more about the special considerations at [https://docs.microsoft.com/en-us/azure/active-directory/b2b/user-properties](https://docs.microsoft.com/en-us/azure/active-directory/b2b/user-properties),
    including how you can use access reviews to manage the Azure AD B2B guest users.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在[https://docs.microsoft.com/en-us/azure/active-directory/b2b/user-properties](https://docs.microsoft.com/en-us/azure/active-directory/b2b/user-properties)阅读更多关于特殊考虑事项的信息，包括如何使用访问审查来管理Azure
    AD B2B访客用户。
- en: On-premise application access for guest users
  id: totrans-335
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访客用户的本地应用程序访问
- en: In this section, we will illustrate how you can provide on-premise application
    access for guest users. We have already published the Kerberos Demo Web App through
    the Azure AD Application Proxy, and you have seen the application in the Azure
    AD Access Panel UI as a guest user.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将说明如何为访客用户提供本地应用程序访问权限。我们已经通过Azure AD应用程序代理发布了Kerberos演示Web应用程序，并且你已作为访客用户在Azure
    AD访问面板UI中看到该应用程序。
- en: 'With the integration of the web application proxy and the Azure AD Application
    Proxy, you will receive the following features and capabilities:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 通过Web应用程序代理和Azure AD应用程序代理的集成，你将获得以下功能和能力：
- en: 'End user portal: The Azure Access panel at [https://myapps.microsoft.com](https://myapps.microsoft.com).'
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 终端用户门户：[https://myapps.microsoft.com](https://myapps.microsoft.com)上的Azure访问面板。
- en: 'The Azure AD authentication capabilities are as follows:'
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure AD认证功能如下：
- en: Usernames and passwords synced from on-premise AD DS
  id: totrans-340
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从本地AD DS同步的用户名和密码
- en: Federated login to on-premise or other federation servers
  id: totrans-341
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 联合登录到本地或其他联合服务器
- en: MFA
  id: totrans-342
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多因素认证（MFA）
- en: Customized login screen
  id: totrans-343
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定制的登录页面
- en: Authorization based on the user or groups
  id: totrans-344
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于用户或组的授权
- en: SSO to Office 365, thousands of SaaS applications, and all applications integrated
    with Azure AD.
  id: totrans-345
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单点登录到Office 365、成千上万的SaaS应用程序以及所有与Azure AD集成的应用程序。
- en: Reports, auditing, and security monitoring are based on big data and machine learning.
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 报告、审计和安全监控基于大数据和机器学习。
- en: All HTTPS traffic is terminated in the cloud, blocking most HTTP-level attacks.
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有HTTPS流量都在云端终止，阻止了大多数HTTP级别的攻击。
- en: Unauthenticated traffic is filtered in the cloud, and will not arrive on-premise.
  id: totrans-348
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 未经身份验证的流量在云端被过滤，不会到达本地。
- en: There are no incoming connections to the corporate network—only outgoing connections
    to the Azure AD application proxy service.
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 企业网络没有传入连接——只有到Azure AD应用程序代理服务的传出连接。
- en: Internet-facing services are always up to date with the latest security patches
    and server upgrades.
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 面向互联网的服务始终保持最新的安全补丁和服务器升级。
- en: There is login abnormality detection, reporting, and auditing by Azure AD.
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure AD提供登录异常检测、报告和审计功能。
- en: Providing SSO experience from Azure AD to on-premise applications.
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Azure AD到本地应用程序提供单点登录体验。
- en: Connectors use the Azure AD token data to impersonate the end user to the backend
    applications using **Kerberos Constrained Delegation** (**KCD**).
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接器使用Azure AD令牌数据通过**Kerberos受限委托**（**KCD**）以用户身份冒充访问后端应用程序。
- en: There is support for any application that uses **Integrated Windows Authentication** (**IWA**),
    such as SharePoint, Outlook Web Access, and Microsoft Dynamics CRM.
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 支持任何使用**集成Windows认证**（**IWA**）的应用程序，如SharePoint、Outlook Web Access和Microsoft
    Dynamics CRM。
- en: There is no need to change the backend applications.
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 无需更改后端应用程序。
- en: There is no need to install agents on backend applications.
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 无需在后端应用程序上安装代理。
- en: There is no need to expose on-premise applications directly to the internet.
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 无需直接将本地应用程序暴露到互联网。
- en: 'The following diagram shows the architecture:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了架构：
- en: '![](img/df4d5f64-fbb4-4cc2-82c7-67abdd2158f1.png)'
  id: totrans-359
  prefs: []
  type: TYPE_IMG
  zh: '![](img/df4d5f64-fbb4-4cc2-82c7-67abdd2158f1.png)'
- en: Azure AD Application Proxy architecture
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD应用程序代理架构
- en: In the case of guest user access, the Azure AD application proxy just checks
    that the `userPrincipalName` exists in the on-premise Active Directory.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 在访客用户访问的情况下，Azure AD应用程序代理仅检查`userPrincipalName`是否存在于本地Active Directory中。
- en: 'To configure the access for guest users, we will use the following procedure:'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 要配置访客用户的访问权限，我们将使用以下步骤：
- en: Log in to your Domain Controller **YD1ADS01** as a domain administrator.
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以域管理员身份登录到你的域控制器**YD1ADS01**。
- en: 'Open a PowerShell and connect to your `Azure AD`, as follows:'
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开PowerShell并连接到你的`Azure AD`，如下所示：
- en: '[PRE5]'
  id: totrans-365
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Get all guest users, as follows:'
  id: totrans-366
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取所有访客用户，如下所示：
- en: '[PRE6]'
  id: totrans-367
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The following screenshot shows the output:'
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下截图显示了输出：
- en: '![](img/482e44d1-67d0-479c-9038-699cb85fa483.png)'
  id: totrans-369
  prefs: []
  type: TYPE_IMG
  zh: '![](img/482e44d1-67d0-479c-9038-699cb85fa483.png)'
- en: All guest users of the tenant
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 租户的所有访客用户
- en: Now, we need to add the `UPN-suffix @yourdomain1.onmicrosoft.onmicrosoft.com`
    to the UPN suffixes of your Active Directory environment.
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要将 `UPN-suffix @yourdomain1.onmicrosoft.onmicrosoft.com` 添加到你的 Active
    Directory 环境的 UPN 后缀中。
- en: Use the `domain.msc` console for it; right-click on Active Directory Domains
    and Trusts and choose Properties.
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `domain.msc` 控制台；右键单击“Active Directory 域和信任”，选择“属性”。
- en: 'Add your suffix, as follows:'
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加你的后缀，如下所示：
- en: '![](img/1198793b-8e4f-4c58-92db-2243236c6a91.png)'
  id: totrans-374
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1198793b-8e4f-4c58-92db-2243236c6a91.png)'
- en: Azure AD suffix to UPN suffix assignment
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: Azure AD 后缀到 UPN 后缀的分配
- en: Next, we need to create our guest user in our local Active Directory.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要在本地 Active Directory 中创建我们的访客用户。
- en: Open the console `dsa.msc` Active Directory Users and Computers.
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 `dsa.msc` 控制台中的 Active Directory 用户和计算机。
- en: 'Create an Organizational Unit called Managed External Business Objects, as
    follows:'
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为“Managed External Business Objects”的组织单位，如下所示：
- en: '![](img/c19b5772-0731-49d9-9019-b1d43730a368.png)'
  id: totrans-379
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c19b5772-0731-49d9-9019-b1d43730a368.png)'
- en: External objects OU in Active Directory
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: Active Directory 中的外部对象 OU
- en: 'Create the user, as follows:'
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建用户，如下所示：
- en: '`jenny.green_leano.ch#EXT#`'
  id: totrans-382
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`jenny.green_leano.ch#EXT#`'
- en: '`@181031inovitdemos.onmicrosoft.com`'
  id: totrans-383
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@181031inovitdemos.onmicrosoft.com`'
- en: '`BG00001`:'
  id: totrans-384
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BG00001`：'
- en: '![](img/2dd7fd95-c075-4351-a53c-39eca7747af1.png)'
  id: totrans-385
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2dd7fd95-c075-4351-a53c-39eca7747af1.png)'
- en: User properties
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 用户属性
- en: You don't need to remember the password, because it's not needed.
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你无需记住密码，因为它不需要。
- en: The Azure AD will authenticate the user.
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Azure AD 将验证用户身份。
- en: 'Now, assign the user to the **Kerberos Demo Web App Access** group in the Azure
    AD, as follows:'
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将用户分配到 Azure AD 中的 **Kerberos Demo Web App Access** 组，如下所示：
- en: '![](img/21b6be32-fbc9-4ff1-a86a-3aa53eb6402b.png)'
  id: totrans-390
  prefs: []
  type: TYPE_IMG
  zh: '![](img/21b6be32-fbc9-4ff1-a86a-3aa53eb6402b.png)'
- en: App access group members
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 应用访问组成员
- en: Now, you can test the solution with Jenny Green at [https://myapps.microsoft.com](https://myapps.microsoft.com).
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你可以在 [https://myapps.microsoft.com](https://myapps.microsoft.com) 测试该解决方案。
- en: Change the organization to `INOVITDEMOS`.
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将组织更改为 `INOVITDEMOS`。
- en: Click on the Kerberos app.
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 Kerberos 应用。
- en: 'You should see a successful login, as follows:'
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你应该会看到成功的登录，如下所示：
- en: '![](img/908aa962-d4ab-4f21-a527-58ff8143b0de.png)'
  id: totrans-396
  prefs: []
  type: TYPE_IMG
  zh: '![](img/908aa962-d4ab-4f21-a527-58ff8143b0de.png)'
- en: Kerberos example web page for guest users
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: Kerberos 示例网页供访客用户使用
- en: 'To automate and extend this solution, you can use Microsoft Identity Manager
    2016 or the provided PowerShell solution. You can get information about this approach
    on Azure AD B2B collaboration with **Microsoft Identity Manager **(**MIM**) 2016
    SP1, with Azure application proxy, at the following sources:'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 为了自动化并扩展此解决方案，你可以使用 Microsoft Identity Manager 2016 或提供的 PowerShell 解决方案。你可以通过以下来源了解有关
    Azure AD B2B 协作与 **Microsoft Identity Manager**（**MIM**）2016 SP1 和 Azure 应用代理的更多信息：
- en: '[https://docs.microsoft.com/en-us/microsoft-identity-manager/microsoft-identity-manager-2016-graph-b2b-scenario#b2b-end-to-end-deployment-example-scenarios](https://docs.microsoft.com/en-us/microsoft-identity-manager/microsoft-identity-manager-2016-graph-b2b-scenario#b2b-end-to-end-deployment-example-scenarios)'
  id: totrans-399
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/microsoft-identity-manager/microsoft-identity-manager-2016-graph-b2b-scenario#b2b-end-to-end-deployment-example-scenarios](https://docs.microsoft.com/en-us/microsoft-identity-manager/microsoft-identity-manager-2016-graph-b2b-scenario#b2b-end-to-end-deployment-example-scenarios)'
- en: '[https://www.microsoft.com/en-us/download/details.aspx?id=51495](https://bit.ly/2Cz0yWW)'
  id: totrans-400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.microsoft.com/en-us/download/details.aspx?id=51495](https://bit.ly/2Cz0yWW)'
- en: In this section, we handled various use cases to provide an identity life cycle
    for guest users. In the next part, we will give some tips on how you can get more
    comfortable in your environment.
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分中，我们处理了多种用例，以为访客用户提供身份生命周期管理。在接下来的部分中，我们将提供一些提示，帮助你更轻松地适应你的环境。
- en: Azure services for automation
  id: totrans-402
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动化的 Azure 服务
- en: This year, at Microsoft Ignite, Mark Wahl presented a new feature set. This
    feature set is called Azure AD Identity Governance, which is in private preview.
    I will give you an idea of the public information.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 今年，在 Microsoft Ignite 大会上，Mark Wahl 展示了一组新特性。这组特性被称为 Azure AD 身份治理，目前处于私有预览阶段。我将向你介绍一些公开的信息。
- en: 'Identity is the control panel and merges user experience, business needs, and
    security requirements together. You need to ensure that the correct users get
    the right access to the correct and required resources at any time. Azure AD Identity
    Governance is the set of capabilities for this. They enable you to define access
    policies and monitor your identities. Microsoft is developing a complete suite
    of governance capabilities for Azure AD, including two powerful new features:
    Entitlement management and My Access.'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 身份是控制面板，它将用户体验、业务需求和安全需求结合在一起。您需要确保正确的用户在任何时候都能获得正确的访问权限，访问正确且所需的资源。Azure AD
    身份治理提供了一套功能，帮助您定义访问策略并监控您的身份。微软正在为 Azure AD 开发一整套治理功能，包括两个强大的新功能：权限管理和我的访问。
- en: 'Admins will be able to create policies for resources, such as groups, apps,
    and sites, with the upcoming entitlement management. It will provide the automated
    process of granting access to employees and partners. The My Access portal gives
    employees and partners the possibility to request access to these entitlements,
    including access to request approvals, as shown in the following screenshot:'
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 管理员将能够为资源（例如组、应用程序和站点）创建策略，借助即将推出的权限管理功能。这将提供一个自动化的过程，以便为员工和合作伙伴授予访问权限。我的访问门户使员工和合作伙伴能够请求访问这些权限，包括请求审批，正如下图所示：
- en: '![](img/1b240e3e-f09b-44b4-b7f7-907f9278d5f7.png)'
  id: totrans-406
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1b240e3e-f09b-44b4-b7f7-907f9278d5f7.png)'
- en: Azure Identity Governance Entitlement management options
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 身份治理权限管理选项
- en: 'First, the resources must be specified and associated with the entitlement.
    In this example, you see two apps, one user group, and one SharePoint site. You
    can add more resources. As you can see in the following screenshot, roles are
    also included in this concept:'
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，必须指定资源并将其与权限关联。在这个例子中，您可以看到两个应用程序，一个用户组和一个 SharePoint 站点。您可以添加更多的资源。正如下图所示，角色也包含在这个概念中：
- en: '![](img/40813aee-2c45-44de-892f-4cb44ae70060.png)'
  id: totrans-409
  prefs: []
  type: TYPE_IMG
  zh: '![](img/40813aee-2c45-44de-892f-4cb44ae70060.png)'
- en: Resource assignment for entitlements
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 权限的资源分配
- en: 'With the new features, as shown in the following screenshot, you can define
    entitlement policies to drive your security requirements:'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，通过新的功能，您可以定义权限策略以推动您的安全需求：
- en: '![](img/da404752-f408-48c7-9f5f-0919724a37fc.png)'
  id: totrans-412
  prefs: []
  type: TYPE_IMG
  zh: '![](img/da404752-f408-48c7-9f5f-0919724a37fc.png)'
- en: Entitlement policy options
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 权限策略选项
- en: 'Another fact that you should be aware of is the many different Azure features
    that provide you with the capabilities to drive your cloud-based identity and
    access management. We recommend reading the article at [https://bit.ly/2u3LcZG](https://bit.ly/2u3LcZG),
    regarding the following technologies:'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个您需要注意的事实是，Azure 提供了许多不同的功能，您可以利用这些功能来管理基于云的身份和访问管理。我们建议您阅读关于以下技术的文章：[https://bit.ly/2u3LcZG](https://bit.ly/2u3LcZG)：
- en: Microsoft Flow
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Flow
- en: Azure Logic Apps
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 逻辑应用
- en: Azure Functions
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 函数
- en: Azure App Service WebJobs
  id: totrans-418
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure 应用服务 WebJobs
- en: 'There are already many examples in the community that show the power of these
    features; some of them are as follows:'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 社区中已经有很多示例展示了这些功能的强大，其中一些如下：
- en: Martina Grom, with provisioning Office 365 groups with Azure functions: [https://blog.atwork.at/post/2017/10/01/Provisioning-an-Office-365-group-with-an-approval-flow-and-Azure-functions-part-2](https://blog.atwork.at/post/2017/10/01/Provisioning-an-Office-365-group-with-an-approval-flow-and-Azure-functions-part-2)
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Martina Grom，关于使用 Azure 函数配置 Office 365 组：[https://blog.atwork.at/post/2017/10/01/Provisioning-an-Office-365-group-with-an-approval-flow-and-Azure-functions-part-2](https://blog.atwork.at/post/2017/10/01/Provisioning-an-Office-365-group-with-an-approval-flow-and-Azure-functions-part-2)
- en: Asish Padhy, with the same topic: [https://asishpadhy.com/2018/05/01/automation-and-creation-of-office-365-groups-using-flow-microsoft-graph-and-azure-function-part-1/](https://asishpadhy.com/2018/05/01/automation-and-creation-of-office-365-groups-using-flow-microsoft-graph-and-azure-function-part-1/)
  id: totrans-421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Asish Padhy，关于相同主题：[https://asishpadhy.com/2018/05/01/automation-and-creation-of-office-365-groups-using-flow-microsoft-graph-and-azure-function-part-1/](https://asishpadhy.com/2018/05/01/automation-and-creation-of-office-365-groups-using-flow-microsoft-graph-and-azure-function-part-1/)
- en: Microsoft Docs, with Microsoft Graph bindings for Azure Functions: [https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-microsoft-graph](https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-microsoft-graph)
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Docs，关于 Azure 函数的 Microsoft Graph 绑定：[https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-microsoft-graph](https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-microsoft-graph)
- en: Microsoft, with an introduction to Azure Functions: [https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview](https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview)
  id: totrans-423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微软，介绍 Azure Functions：[https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview](https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview)
- en: We highly recommend trying to work with these technologies, because they will
    be the future of providing implementation to our customers.
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 我们强烈推荐尝试使用这些技术，因为它们将是未来为客户提供实施解决方案的关键。
- en: Summary
  id: totrans-425
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Working through this chapter, you saw how you can build a rich Azure B2B solution
    with an identity life cycle, including on-premise application access for guests.
    Furthermore, you also had an excellent introduction to the possible use cases
    and gaps. We also provided an overview of the upcoming Identity Governance features
    that Microsoft is developing, and the power that they will bring to the game;
    for example, there is a resource assignment based on roles and associated policies.
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 通过本章的学习，你了解了如何构建一个包含身份生命周期的丰富 Azure B2B 解决方案，包括为访客提供的本地应用程序访问权限。此外，你还得到了对可能的使用案例和存在的漏洞的精彩介绍。我们还提供了微软正在开发的即将推出的身份治理功能的概述，以及它们将在这个领域带来的强大功能；例如，基于角色和相关策略的资源分配。
- en: In the next chapter, we will deploy single-tenant and multi-tenant applications
    to your environment, and will provide an introduction to these concepts.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将把单租户和多租户应用程序部署到你的环境中，并介绍这些概念。
