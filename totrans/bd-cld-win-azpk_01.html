<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;1.&#xA0;Know Windows Azure Pack and Its Architecture" id="E9OE1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01" class="calibre1"/>Chapter 1. Know Windows Azure Pack and Its Architecture</h1></div></div></div><p class="calibre8">In this chapter, we will learn about Microsoft Cloud OS vision and the role of Windows Azure Pack within it. This chapter will help in understanding Windows Azure Pack cloud solution overview, capabilities, and service offerings with building blocks. Later, we will cover the architecture of Windows Azure Pack components and their deployment models in test and production environments.</p><p class="calibre8">We will be covering the following topics in this chapter:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Microsoft Cloud OS vision</li><li class="listitem">What is Windows Azure Pack?</li><li class="listitem">Windows Azure Pack capabilities and offerings</li><li class="listitem">Windows Azure Pack architectural components and functionalities</li><li class="listitem">Windows Azure Pack cloud solution building blocks</li><li class="listitem">Windows Azure Pack deployment models</li><li class="listitem">Integrating Windows Azure Pack and System Center Suite for IaaS services</li></ul></div></div>

<div class="book" title="Chapter&#xA0;1.&#xA0;Know Windows Azure Pack and Its Architecture" id="E9OE1-b479cf466c26404ca54119871a9b2715">
<div class="book" title="Microsoft Cloud OS vision"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch01lvl1sec08" class="calibre1"/>Microsoft Cloud OS vision</h1></div></div></div><p class="calibre8">The Cloud OS<a id="id0" class="calibre1"/> is Microsoft's hybrid cloud solution comprised of Windows Server, Windows Azure, System Center, Windows Intune, and SQL Server. Microsoft Cloud OS vision enables one consistent platform and experience of cloud services hosted inside Microsoft Azure Public Cloud data center, in a customer's on-premises data center, or in a service provider data center. Cloud OS essentially does the same traditional infrastructure operations such as provisioning servers and applications, but with cloud scale capabilities and efficiencies.</p><p class="calibre8">Windows Azure Pack adds major contribution towards enabling Cloud OS vision, which brings Microsoft Azure's capabilities and experience inside an organization's private cloud and service provider cloud. This provides one true, consistent platform to deliver cloud services using Microsoft technologies.</p><p class="calibre8">It can be <a id="id1" class="calibre1"/>summarized in the following quote from Microsoft's Whitepaper, "Unified Management for Cloud OS: System Center 2012 R2":</p><div class="blockquote"><blockquote class="blockquote1"><p class="calibre13"><span class="strong"><em class="calibre12">"The Microsoft vision for a new era of IT provides one consistent platform for infrastructure, applications, and data: the Cloud OS. The Cloud OS spans your datacenter environments, service provider datacenters, and Windows Azure, enabling you to easily and cost-effectively cloud optimize your business."</em></span></p></blockquote></div><div class="mediaobject"><img src="../images/00002.jpeg" alt="Microsoft Cloud OS vision" class="calibre10"/></div><p class="calibre11"> </p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip02" class="calibre1"/>Tip</h3><p class="calibre8">More information on<a id="id2" class="calibre1"/> Microsoft Cloud OS can be found at <a class="calibre1" href="http://www.microsoft.com/en-in/server-cloud/cloud-os/">http://www.microsoft.com/en-in/server-cloud/cloud-os/</a>.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="What is Windows Azure Pack?"><div class="book" id="F8902-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec09" class="calibre1"/>What is Windows Azure Pack?</h1></div></div></div><p class="calibre8">Windows Azure Pack is a<a id="id3" class="calibre1"/> Microsoft solution which integrates with Windows Server 2012 R2, System Center Suite, SQL, and IIS Servers. Together, these provide an enterprise class cloud solution for both organizations and service providers. Windows Azure Pack brings the capabilities of Microsoft Public Cloud, that is, Microsoft Azure's capabilities to your data center.</p><p class="calibre8">Windows Azure Pack consists of a collection of Azure technologies which enables organizations to have enterprise class self-service and multitenant cloud along with consistent Microsoft Azure Public Cloud experience. Eliminating the confusion, Windows Azure Pack runs independently with Microsoft Azure Cloud, and is deployed in your own organization's data center; managed and operated by your organization only.</p><p class="calibre8">Windows Azure Pack provides cloud <a id="id4" class="calibre1"/>service offerings including virtual machines (Infrastructure as a Service), <span class="strong"><strong class="calibre9">Database as a Service</strong></span> (<span class="strong"><strong class="calibre9">DBaaS</strong></span>), <span class="strong"><strong class="calibre9">Platform as a Service </strong></span>(<span class="strong"><strong class="calibre9">PaaS</strong></span>) and many more along with custom offering enabled architecture which gives flexibility to provide anything as a service (XaaS).</p><p class="calibre8">Windows Azure Pack can primarily be<a id="id5" class="calibre1"/> used in the following use cases:</p><div class="book"><ul class="itemizedlist"><li class="listitem">By an organization as a private cloud solution</li><li class="listitem">By a cloud service provider, that is, cloud reseller, as a Hosted Cloud Platform</li></ul></div><p class="calibre8">Amazingly, Windows Azure Pack is available at no extra cost for Microsoft customers.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note02" class="calibre1"/>Note</h3><p class="calibre8">Licensing for other Microsoft components like Windows Server, System Center, SQL Server, and so on has to be considered for cloud management and workload infrastructure.</p></div></div>

<div class="book" title="What is Windows Azure Pack?">
<div class="book" title="Windows Azure Pack for an organization's private cloud"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec08" class="calibre1"/>Windows Azure Pack for an organization's private cloud</h2></div></div></div><p class="calibre8">In today's era of<a id="id6" class="calibre1"/> cloud computing, IT departments of organizations are turning into IT service providers for their different teams and LOBs. In traditional computing models, different teams approach their IT departments for their IT needs, which becomes quite a lengthy process involving several levels of approvals, procurement of HW/SW, implementations, services, schedules, and much more. In<a id="id7" class="calibre1"/> this model, infrastructure readiness itself takes considerable amount of time and resources, resulting in various constraints when it comes to application deployment. The situation gets even worse when it comes to test and development environment-related requests.</p><p class="calibre8">A private cloud helps in eliminating these challenges drastically. For example, with a private cloud solution a development team can request for a VM with required specification and middleware components using an easy to use self-service portal without getting into manual e-mail threads with IT infra provider departments. In such a private cloud infrastructure, a development team can expect to have a server ready for applications usage in a matter of minutes, whereas in a traditional model it could have taken days.</p><p class="calibre8">Windows Azure Pack is the platform that can help the organization in getting all those private cloud benefits and capabilities in a very efficient manner. Let's have a look at few of the major requirements and characteristics of any private cloud and their solutions using Azure Pack:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Familiar technologies and operational simplicity</strong></span>: One of the important aspects of any private<a id="id8" class="calibre1"/> cloud solution is that the solution has to be managed by the organization's IT personnel only. Technology should be familiar and easily manageable. Windows Azure Pack integrates with Microsoft products such as Windows Servers, System Center, SQL, IIS, and so on, which are already being used across the world by organizations for their IT needs.</li><li class="listitem"><span class="strong"><strong class="calibre9">Self service portal and automated provisioning</strong></span>: Windows Azure Pack provides the same<a id="id9" class="calibre1"/> tenant portal for self-service which is being used by customers of Microsoft's public cloud along with automated provisioning using SPF, SMA, and SCVMM. These roles will be covered in upcoming topics.</li><li class="listitem"><span class="strong"><strong class="calibre9">Effective utilization of existing infrastructure</strong></span>: Windows Azure Pack can leverage existing infrastructure to provision workload, along with effective utilization using <a id="id10" class="calibre1"/>proven Hyper-V and SCVMM capabilities such as dynamic memory, dynamic optimization, differencing disks, and many more.</li><li class="listitem"><span class="strong"><strong class="calibre9">Support for software defined infrastructure technologies</strong></span>: Windows Azure Pack can leverage software-defined infrastructure components such as SDN and SDS. This can significantly help in being hardware agnostic and avoiding proprietary expensive hardware purchases. An example includes using a SDS product with commodity hardware servers and disk enclosures instead of enterprise class storage array.</li><li class="listitem"><span class="strong"><strong class="calibre9">Dynamic control and chargeback</strong></span>: Different teams and line of businesses have different IT needs; for example, an HR department may need more storage to store data whereas Finance may need more computing power along with storage. Built-in Windows Azure Pack plans and usage services can be leveraged to have better control over different business resources usage along with chargeback for financial management.</li><li class="listitem"><span class="strong"><strong class="calibre9">Support of multi-vendor operating systems and applications</strong></span>: As Windows Azure Pack cloud is integrated with Hyper-V and System Center, it supports a wide range of operating systems comprising various Windows and Linux flavors, virtualization vendors (Hyper-V by default, VMware by partner provided solutions), and application/database products.</li><li class="listitem"><span class="strong"><strong class="calibre9">Custom cloud services</strong></span>: Every organization may have some specific custom needs limited only to a particular entity or team. Windows Azure Pack customer offering gives organizations flexibility to design and develop their custom services and<a id="id11" class="calibre1"/> integrate them with<a id="id12" class="calibre1"/> Windows Azure Pack for cloud enablement.</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note03" class="calibre1"/>Note</h3><p class="calibre8">All features or self-service capabilities may not be available while using VMware as a hypervisor. This <a id="id13" class="calibre1"/>will be covered in detail in <a class="calibre1" title="Chapter 10. Extending WAP Capabilities with Partners' Solutions" href="part0090_split_000.html#2LQIK1-b479cf466c26404ca54119871a9b2715">Chapter 10</a>, <span class="strong"><em class="calibre12">Extend Windows Azure Pack Capabilities with Partner Solutions</em></span>.</p></div></div></div>

<div class="book" title="What is Windows Azure Pack?">
<div class="book" title="Windows Azure Pack for cloud service providers"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec09" class="calibre1"/>Windows Azure Pack for cloud service providers</h2></div></div></div><p class="calibre8">Windows Azure Pack gives the flexibility to cloud service providers (such as resellers/hosting service providers) to provide Microsoft Azure Cloud a consistent experience as well as capabilities to their customers. In this scenario, Windows Azure Pack components run in a<a id="id14" class="calibre1"/> service provider's data center and provide services to external or internal customers.</p><p class="calibre8">Windows Azure Pack provides <a id="id15" class="calibre1"/>service providers the ability to build their own cloud to host services at a lower cost and with proven Azure technologies, enabling them to win more and more business. This brings a win-win situation for cloud providers as well as for Microsoft as the Microsoft Azure technology footprint is expanding in cloud markets beyond Azure data centers.</p><p class="calibre8">A cloud service provider's main focus is to provide a true multitenant, self-service cloud along with extreme automation possibilities, which differs from organizational private cloud needs which we <a id="id16" class="calibre1"/>discussed earlier. Let's have a look at some major requirements of a service provider's cloud solutions and their fulfillment using Windows Azure Pack:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">To win more and more cloud business</strong></span>: This is not a direct technical requirement from a cloud solution, but one of the most important aspects of any service provider's business. The service provider needs to win the customer's confidence to get their workload running in the provider's cloud. Windows Azure Pack is built using the same technologies that power one of the leading public clouds, Microsoft Azure, to serve customers worldwide. This will help service providers to offer proven technologies to their customers at a lower cost, enabling more and more business.</li><li class="listitem"><span class="strong"><strong class="calibre9">True multitenant offerings</strong></span>: The cloud service provider will have to serve varying needs of different customers. True multitenant architecture with respect to portal, offerings, QoS (Quality of Service), and so on is must for any provider's cloud platform. Windows Azure Pack enables these features with tenant portals, Windows Azure Pack plans and subscriptions, and so on.</li><li class="listitem"><span class="strong"><strong class="calibre9">Networking isolation and extension capabilities</strong></span>: A customer's workload running in same data center will have different networks, security needs and requirements to be completely isolated from each other. Windows Azure Pack's virtual network, using network virtualization, provides complete isolation of networks for a customer's workloads. Windows Azure Pack's site to site VPN capabilities, using network virtualization gateways, enables customers to extend their on-premises network to a service provider's cloud network for hybrid scenarios.</li><li class="listitem"><span class="strong"><strong class="calibre9">Wide range of cloud offerings (IaaS, PaaS, and so on)</strong></span>: Windows Azure Pack cloud solution supports a wide range of in-built self-service IaaS, PaaS, and DBaaS offerings <a id="id17" class="calibre1"/>along with capabilities to add custom service offerings.</li><li class="listitem"><span class="strong"><strong class="calibre9">Usage and billing</strong></span>: Windows Azure Pack cloud solution has usage and metering capabilities which can be used along with SCOM (System Center Operations Manager) chargeback or other third party usage and billing solutions like Cloud Assert <a id="id18" class="calibre1"/>and others to provide an enterprise class cloud billing solution.</li><li class="listitem"><span class="strong"><strong class="calibre9">Extreme automation possibilities</strong></span>: With Service Management Automation (SMA) integration with Windows Azure Pack, service providers can have their own automation <a id="id19" class="calibre1"/>workflows (written in PowerShell workflows) exclusively written for their environments, enabling a completely automated cloud solution. Along with SMA, standard Microsoft automation solutions such as System Center Orchestrator and Windows PowerShell can be leveraged to automate operations.</li><li class="listitem"><span class="strong"><strong class="calibre9">Optimized resource usage</strong></span>: Windows Azure Pack cloud solution leverages proven enterprise class Hyper-V Virtualization technologies which enables maximum usage of hardware and software resources.</li><li class="listitem"><span class="strong"><strong class="calibre9">Custom offerings</strong></span>: Windows Azure Pack provides the option to add custom offerings integrated with its portal, which enables service providers to add custom unique offerings apart from default offerings.</li></ul></div></div></div>
<div class="book" title="Windows Azure Pack capabilities and offerings" id="G6PI1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec10" class="calibre1"/>Windows Azure Pack capabilities and offerings</h1></div></div></div><p class="calibre8">Windows<a id="id20" class="calibre1"/> Azure Pack, along <a id="id21" class="calibre1"/>with System Center and Hyper-V, provides<a id="id22" class="calibre1"/> enterprise class IaaS (Infrastructure as a<a id="id23" class="calibre1"/> Service), PaaS (Platform as a Service), and DBaaS (Database as a Service) capabilities. The following are the primary features and capabilities that Windows Azure Pack provides once it is deployed:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Management portal for cloud admins</strong></span>: Windows Azure Pack Service management portal for<a id="id24" class="calibre1"/> administrators provides facilities to create and manage a cloud offerings catalogue, resource providers, tenants user accounts, plans and subscriptions, and much more. This portal will be used by cloud admin of organization or service providers.</li><li class="listitem"><span class="strong"><strong class="calibre9">Management portal for tenants</strong></span>: The service management portal for tenants is used by tenant admins for<a id="id25" class="calibre1"/> self-service capabilities. Using this portal, tenants can provision, manage, and monitor cloud services available to them such as IaaS, websites, and databases.</li><li class="listitem"><span class="strong"><strong class="calibre9">Service management REST API</strong></span>: The service management API is the core of capabilities that the management<a id="id26" class="calibre1"/> portal delivers. It can be used to provide custom resource offerings and portal integrations.</li><li class="listitem"><span class="strong"><strong class="calibre9">Virtual machines</strong></span>: This is one <a id="id27" class="calibre1"/>of the core offerings using Windows Azure Pack. It provides Windows and Linux Virtual<a id="id28" class="calibre1"/> Machines based on Hyper-V and <a id="id29" class="calibre1"/>System Center. It includes VM gallery items for different OS flavors, VM roles for automated services provisioning post VM deployment, and scaling options.</li><li class="listitem"><span class="strong"><strong class="calibre9">Virtual networks</strong></span>: Windows Azure Pack tenant portal provides self-services capabilities to tenant <a id="id30" class="calibre1"/>admin to create their own virtual network along with required IP schema and<a id="id31" class="calibre1"/> VPN configurations. It works using System Center and Hyper-V Network <a id="id32" class="calibre1"/>Virtualization technologies. Virtual networks also provide site to site VPN capabilities, which can extend customers' on-premises network to cloud providers' network for hybrid cloud requirements.</li><li class="listitem"><span class="strong"><strong class="calibre9">Databases</strong></span>: This offering<a id="id33" class="calibre1"/> enables DBaaS capabilities for MS SQL servers and MySQL database servers. Tenants can create databases using tenant service management portals, which can be used by web servers or by any other applications for database needs.</li><li class="listitem"><span class="strong"><strong class="calibre9">Websites</strong></span>: Windows<a id="id34" class="calibre1"/> Azure Pack provides a scalable shared web hosting platform which can be leveraged by service providers or organizations to run web workloads. This is consistent with Microsoft Azure Public Cloud websites capabilities. Along with supporting ASP.NET, PHP, and Node.js applications, Website Cloud provides gallery items built-in for popular web applications such as WordPress and integration <a id="id35" class="calibre1"/>with custom developed applications and systems.</li><li class="listitem"><span class="strong"><strong class="calibre9">Automation:</strong></span>: Windows Azure Pack includes capabilities to have custom automation enabled in<a id="id36" class="calibre1"/> environments using integration with Service Management Automation (SMA), which is part of the System Center orchestrator product. With SMA integration, custom runbooks and workflows can be written and executed in an automated manner.</li><li class="listitem"><span class="strong"><strong class="calibre9">Custom offerings</strong></span>: Windows Azure<a id="id37" class="calibre1"/> Pack architecture allows integration of additional custom services into the service catalogue. These capabilities allow the cloud service <a id="id38" class="calibre1"/>providers to provide anything as a service. Organizations and service providers can design and develop custom resource providers for custom offering enablement.</li><li class="listitem"><span class="strong"><strong class="calibre9">Service bus</strong></span>: This service enables the provision of a reliable asynchronous messaging service between <a id="id39" class="calibre1"/>distributed applications. Service bus solves the challenges of communicating between on-premises applications and the outside world by allowing <a id="id40" class="calibre1"/>on-premises web<a id="id41" class="calibre1"/> services to project public endpoints.</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="tip03" class="calibre1"/>Tip</h3><p class="calibre8">Windows Azure Pack is <a id="id42" class="calibre1"/>supported in English, German, Spanish, French, Italian, Japanese, Chinese simplified, Chinese traditional, Brazilian, Portuguese, Korean, and Russian languages.</p></div></div>
<div class="book" title="Windows Azure Pack components and functionalities" id="H5A41-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec11" class="calibre1"/>Windows Azure Pack components and functionalities</h1></div></div></div><p class="calibre8">Now that we understand <a id="id43" class="calibre1"/>what is Windows Azure Pack, along with its capabilities and service offerings, it's time to get technical and deep dive into bits and pieces that make Windows Azure Pack.</p><p class="calibre8">Windows Azure Pack is<a id="id44" class="calibre1"/> made up of a collection of sites and API<a id="id45" class="calibre1"/> endpoints, which are responsible for their different functions. Windows Azure Pack<a id="id46" class="calibre1"/> components can be categorized in two categories as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Mandatory components</li><li class="listitem">Optional/dependency components</li></ul></div><p class="calibre8">Mandatory components must be installed in every Windows Azure Pack deployment whereas optional components deployment depends upon use cases.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note04" class="calibre1"/>Note</h3><p class="calibre8">Windows Azure Pack components use SQL server database to store its configuration and run time data that is highly dependent upon database availability.</p></div><p class="calibre8">Windows Azure Pack<a id="id47" class="calibre1"/> components are as follows:</p><p class="calibre8">Mandatory components:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Service management API:<div class="book"><ul class="itemizedlist1"><li class="listitem">Admin API</li><li class="listitem">Tenant API</li><li class="listitem">Tenant <a id="id48" class="calibre1"/>public API</li></ul></div></li><li class="listitem">Authentication sites:<div class="book"><ul class="itemizedlist1"><li class="listitem">Admin authentication site</li><li class="listitem">Tenant authentication site</li></ul></div></li><li class="listitem">Service management portals:<div class="book"><ul class="itemizedlist1"><li class="listitem">Management portal for administrators</li><li class="listitem">Management portal for tenants</li></ul></div></li></ul></div><p class="calibre8">Optional or dependency<a id="id49" class="calibre1"/> components:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Resource provider's extensions (VM Cloud, websites, and so on)</li><li class="listitem">Service bus</li><li class="listitem">Automation and extensibility</li><li class="listitem">PowerShell APIs</li><li class="listitem">SQL server and MySQL server extension</li><li class="listitem">Usage extensions (service)</li><li class="listitem">Usage extension (collector)</li><li class="listitem">Monitoring extension</li><li class="listitem">Partner enabled<a id="id50" class="calibre1"/> solutions extensions (for instance, vConnect, GridPro, and so on)</li><li class="listitem">Customer resource<a id="id51" class="calibre1"/> provider's extension</li><li class="listitem">Windows Azure Pack BPA (Best Practice Analyzer)</li></ul></div><p class="calibre8">Let's understand the roles and functionalities of the preceding components:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Service management API</strong></span>: A collection of service management REST API. APIs are the core endpoints that facilitate Windows Azure Pack cloud services access through management portals and PowerShell modules. We can see APIs as a<a id="id52" class="calibre1"/> backbone to the management portals and PowerShell modules to enable cloud services<a id="id53" class="calibre1"/> integration with the rest of the cloud fabric.<p class="calibre15">There are total of three API interfaces<a id="id54" class="calibre1"/> differentiating upon their functions as follows:</p><div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre9">Admin API</strong></span>: Admin API is responsible for administrative tasks being performed in <a id="id55" class="calibre1"/>Windows Azure Pack through management portals or PowerShell modules. This API is usually hosted inside corporate LAN networks, that is, they are not exposed to the public Internet.</li><li class="listitem"><span class="strong"><strong class="calibre9">Tenant API</strong></span>: Tenant API is responsible for tenant administrative tasks like configuring <a id="id56" class="calibre1"/>and managing services being performed through tenant management portals or PowerShell modules. This API isn't exposed to the public Internet.</li><li class="listitem"><span class="strong"><strong class="calibre9">Tenant public API</strong></span>: Tenant public API also enables tenants to configure and <a id="id57" class="calibre1"/>manage cloud services they are subscribed to. Normally, it is publicly exposed. This enables tenants to have custom automation capabilities using Azure Pack PowerShell Modules on their subscriptions from the Internet.</li></ul></div><p class="calibre15">Apart from cloud services provisioning and management, tenant public API enables tenants to have custom automated tasks configured on their<a id="id58" class="calibre1"/> cloud workload without involvement of an admin portal plus SMA.</p></li><li class="listitem"><span class="strong"><strong class="calibre9">Authentication sites</strong></span>: Authentication sites enable authentication services to manage interfaces for<a id="id59" class="calibre1"/> cloud administrators and tenants. When<a id="id60" class="calibre1"/> cloud admin or tenant users open their respective portals, they are redirected to authentication sites to complete sign in using their Windows<a id="id61" class="calibre1"/> AD credentials or ASP.NET credentials as applicable. <span class="strong"><strong class="calibre9">Active Directory Federation Services</strong></span> (<span class="strong"><strong class="calibre9">ADFS</strong></span>) authentication can be also be used instead of available default authentication. Upon successful login, the page is redirected to their respective management portals. There are a total of two authentication sites:<div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre9">Admin authentication site</strong></span>: This site is responsible for providing authentication services to admin management interfaces. By<a id="id62" class="calibre1"/> default, it uses Windows authentication as an authentication source. It can also be configured to support ADFS as an authentication source. This site is normally not exposed to the public Internet.</li><li class="listitem"><span class="strong"><strong class="calibre9">Tenant authentication site</strong></span>: This site is responsible for providing authentication<a id="id63" class="calibre1"/> services to tenant management interfaces. By default, it uses ASP.NET membership providers to authenticate users. It<a id="id64" class="calibre1"/> can also be configured to support ADFS as an authentication source. Usually, this site is exposed to the public Internet to support tenant access across the Internet.</li></ul></div></li><li class="listitem"><span class="strong"><strong class="calibre9">Service management portals</strong></span>: Service management portals are websites built upon HTML5 that are<a id="id65" class="calibre1"/> used by admins and tenants for cloud service provisioning and management. These portals provide a similar experience to Microsoft Azure Public Cloud portal. There are total two service management portals:<div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre9">Management portal for administrators</strong></span>: In this portal, cloud admins configure and manage resource providers such as IaaS clouds, websites'<a id="id66" class="calibre1"/> clouds, catalogue gallery items, plans and user subscriptions, database resource providers, and many more. This portal is restricted to<a id="id67" class="calibre1"/> be accessed by cloud administrators and usually isn't exposed to the public Internet.</li><li class="listitem"><span class="strong"><strong class="calibre9">Man</strong></span><span class="strong"><strong class="calibre9">agement portal for tenants</strong></span>: This is the self-service interface for <a id="id68" class="calibre1"/>tenants to provision, manage and monitor cloud services such as <a id="id69" class="calibre1"/>websites, virtual machine, databases, and so on. This portal can also be used by tenants to sign up and subscribe to available Azure Pack plans. Usually, this portal is exposed to the public Internet.</li></ul></div></li><li class="listitem"><span class="strong"><strong class="calibre9">Optional components</strong></span>: Optional <a id="id70" class="calibre1"/>components are usually required to enable resource providers' extension and any other third party solutions/custom offerings integration. The following are a few important optional component roles and their functionalities:<div class="book"><ul class="itemizedlist1"><li class="listitem"><span class="strong"><strong class="calibre9">Virtual machines cloud</strong></span>: This allows Windows Azure Pack to provide <span class="strong"><strong class="calibre9">IaaS</strong></span> (<span class="strong"><strong class="calibre9">Infrastructure as a Service</strong></span>) services for Windows and Linux <a id="id71" class="calibre1"/>virtual machines and virtual networks. Virtual machine cloud requires SPF (Service provider foundation) and <span class="strong"><strong class="calibre9">SCVMM</strong></span> (<span class="strong"><strong class="calibre9">System Center Virtual Machine Manager</strong></span>) to function.</li><li class="listitem"><span class="strong"><strong class="calibre9">WebSite cloud extension</strong></span>: This extension allows Windows Azure Pack to<a id="id72" class="calibre1"/> provide WebSites as a Service (PaaS) functionality to tenants. It can be co-installed with other Windows Azure<a id="id73" class="calibre1"/> Pack internal components. To provide functionality, it needs to be integrated with website cloud resource provider fabric, which will be discussed in <a id="id74" class="calibre1"/>detail in <a class="calibre1" title="Chapter 7. Delivering PaaS – WebSites Cloud and Service Bus" href="part0061_split_000.html#1Q5IA1-b479cf466c26404ca54119871a9b2715">Chapter 7</a>, <span class="strong"><em class="calibre12">Delivering PaaS – WebSites Cloud and Service Bus</em></span>.</li><li class="listitem"><span class="strong"><strong class="calibre9">SQL and MySQL resource provider</strong></span>: This extension enables Database as a Service<a id="id75" class="calibre1"/> functionalities for tenants. MS SQL server and MySQL databases can be provided using Windows Azure Pack and database resource provider fabric.</li><li class="listitem"><span class="strong"><strong class="calibre9">Usage extensions (API and collector)</strong></span>: Windows Azure Pack provides a <a id="id76" class="calibre1"/>service which can collect usage of services offered by the cloud in order to have an enterprise class billing and metering system. This service can be used by partners to develop custom billing solutions and integrate with Windows Azure Pack Usage for automated and consistent billing models. Collector service collects usage<a id="id77" class="calibre1"/> data from every resource provider such as VM Cloud, websites, and so on, and stores the data in a usage database. Usage API, that is, a usage service that can be used to fetch this data by customer billing solutions.</li><li class="listitem"><span class="strong"><strong class="calibre9">Service bus extension</strong></span>: This extension enables reliable messaging services<a id="id78" class="calibre1"/> between distributed applications. This is similar to Microsoft Azure Service Bus functionality. It provides queued and topic based publish or subscribe functionalities.</li><li class="listitem"><span class="strong"><strong class="calibre9">Partner provided and custom offering extension</strong></span>: This extension includes<a id="id79" class="calibre1"/> partner provided<a id="id80" class="calibre1"/> extensibility solution to Windows Azure Pack <a id="id81" class="calibre1"/>such as request management by GridPro, vConnect by CloudAssert for VMware integration, and so on. Developers can also have their own custom extension to add custom cloud offerings.</li></ul></div></li></ul></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Windows Azure Pack cloud solution building blocks"><div class="book" id="I3QM2-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec12" class="calibre1"/>Windows Azure Pack cloud solution building blocks</h1></div></div></div><p class="calibre8">Windows Azure Pack<a id="id82" class="calibre1"/> cloud solution has different fabric components for each cloud offering required to deliver a particular service. Windows Azure Pack components discussed above would remain consistent and have<a id="id83" class="calibre1"/> integration with other system centers and other Microsoft components to provide functionality such as IaaS and PaaS.</p><p class="calibre8">Usually, each offering requires an extension which can be installed with Windows Azure Pack components and is responsible for portal integration and extension (admin and tenant integration). This extension communicates with resource providers' fabric components (such as SCVMM, SQL Servers, and so on) directly or indirectly to provision and manage services.</p><p class="calibre8">The following screenshot illustrates major components of a Windows Azure Pack cloud solution providing IaaS, DBaaS, and PaaS services.</p><div class="mediaobject"><img src="../images/00003.jpeg" alt="Windows Azure Pack cloud solution building blocks" class="calibre10"/></div><p class="calibre11"> </p></div>

<div class="book" title="Windows Azure Pack cloud solution building blocks">
<div class="book" title="Windows Azure Pack cloud IaaS offering solution components"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec10" class="calibre1"/>Windows Azure Pack cloud IaaS offering solution components</h2></div></div></div><p class="calibre8">To enable IaaS offering<a id="id84" class="calibre1"/> comprising Windows and Linux virtual machines, virtual networks Windows Azure Pack cloud solution requires<a id="id85" class="calibre1"/> the following components to be deployed and integrated:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Windows Azure Pack components</li><li class="listitem">Service Provider Foundation (SPF)</li><li class="listitem">System Center Virtual Machine Manager 2012 R2 (SCVMM)</li><li class="listitem">Hyper-V 2012 R2 Hosts and Clusters (for cloud management and workload)</li><li class="listitem">SQL database server for Windows Azure Pack, SPF, and SCVMM</li><li class="listitem">Windows/Linux virtual machine templates and gallery items</li><li class="listitem">Compute, network, and storage availability</li><li class="listitem">Service Management Automation (SMA-optional)</li></ul></div><p class="calibre8">Windows Azure Pack VM Clouds services use SPF to communicate with SCVMM to provision and manage virtual machine resources. All tasks performed by admin or tenants for virtual machines are passed to SCVMM for execution by SPF, that is, SPF is responsible for getting the work done by SCVMM. SMA is integrated with Windows Azure Pack and SPF to add custom <a id="id86" class="calibre1"/>automation capabilities to the cloud. IaaS offering also includes virtual network self-service provisioning<a id="id87" class="calibre1"/> by tenants provided by SCVMM using Hyper-V network virtualization.</p><p class="calibre8">Detailed building procedures for IaaS Cloud will be discussed in <a class="calibre1" title="Chapter 2. Getting the Cloud Fabric Ready" href="part0023_split_000.html#LTSU2-b479cf466c26404ca54119871a9b2715">Chapter 2</a>, <span class="strong"><em class="calibre12">Getting the Cloud Fabric Ready</em></span> and <a class="calibre1" title="Chapter 4. Building VM Clouds and IaaS Offerings" href="part0040_split_000.html#164MG1-b479cf466c26404ca54119871a9b2715">Chapter 4</a>, <span class="strong"><em class="calibre12">Buil</em></span>
<span class="strong"><em class="calibre12">ding VM Clouds and IaaS Offerings</em></span>.</p></div></div>

<div class="book" title="Windows Azure Pack cloud solution building blocks">
<div class="book" title="WebSites cloud solution components (PaaS offering)"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec11" class="calibre1"/>WebSites cloud solution components (PaaS offering)</h2></div></div></div><p class="calibre8">WebSites cloud require the following components to be deployed in order to provide PaaS capabilities for<a id="id88" class="calibre1"/> websites cloud services.</p><p class="calibre8">Windows Azure Pack <a id="id89" class="calibre1"/>communicates to websites management servers for website cloud related operations.</p><p class="calibre8">Website's server roles comprise:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Windows Azure Pack components</li><li class="listitem">WebSites controller</li><li class="listitem">Management server</li><li class="listitem">Web worker</li><li class="listitem">Front end</li><li class="listitem">File server</li><li class="listitem">Publisher</li><li class="listitem">SQL DB service for Website Cloud API database, runtime database, and application databases</li></ul></div><p class="calibre8">Deployment and architecture of the preceding components will be discussed in <a class="calibre1" title="Chapter 7. Delivering PaaS – WebSites Cloud and Service Bus" href="part0061_split_000.html#1Q5IA1-b479cf466c26404ca54119871a9b2715">Chapter 7</a>, <span class="strong"><em class="calibre12">Delivering PaaS – WebSites Cloud and Service Bus</em></span>.</p></div></div>

<div class="book" title="Windows Azure Pack cloud solution building blocks">
<div class="book" title="DBaaS offering solution components (SQL and MySQL)"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec12" class="calibre1"/>DBaaS offering solution components (SQL and MySQL)</h2></div></div></div><p class="calibre8">Adding DBaaS offerings<a id="id90" class="calibre1"/> in Windows<a id="id91" class="calibre1"/> Azure Pack cloud consists of the following<a id="id92" class="calibre1"/> components:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Windows Azure Pack components</li><li class="listitem">SQL server for tenants workload (standalone or cluster using SQL HA or Always On)</li><li class="listitem">MySQL server for tenants workload</li></ul></div><p class="calibre8">Windows Azure Pack database extension API communicates with database server directly to provision <a id="id93" class="calibre1"/>and manage <a id="id94" class="calibre1"/>databases for tenants. Deployment and architecture<a id="id95" class="calibre1"/> of these components will be discussed in <a class="calibre1" title="Chapter 8. Delivering Database as a Service" href="part0072_split_000.html#24L8G1-b479cf466c26404ca54119871a9b2715">Chapter 8</a>, <span class="strong"><em class="calibre12">Delivering Database as a Service</em></span>.</p></div></div>

<div class="book" title="Windows Azure Pack cloud solution building blocks">
<div class="book" title="Service bus offering solution components"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec13" class="calibre1"/>Service bus offering solution components</h2></div></div></div><p class="calibre8">Service bus is another<a id="id96" class="calibre1"/> PaaS offering using Windows Azure Pack cloud which helps developers in building and running message-driven applications. This is consistent with Microsoft Azure service bus and<a id="id97" class="calibre1"/> provides similar scalability and resiliency. Solution components for service bus offerings include the following components:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Windows Azure Pack components</li><li class="listitem">Service Bus Farm (built on Windows Server 2012 R2)</li><li class="listitem">SQL server database for service bus</li></ul></div><p class="calibre8">Deployment and architecture of service bus will be discussed in <a class="calibre1" title="Chapter 8. Delivering Database as a Service" href="part0072_split_000.html#24L8G1-b479cf466c26404ca54119871a9b2715">Chapter 8</a>, <span class="strong"><em class="calibre12">Delivering Database as a Service</em></span>.</p></div></div>

<div class="book" title="Windows Azure Pack cloud solution building blocks">
<div class="book" title="Custom resource providers"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec14" class="calibre1"/>Custom resource providers</h2></div></div></div><p class="calibre8">Windows Azure Pack <a id="id98" class="calibre1"/>enables capabilities to allow custom resource providers to add additional services to the cloud catalogue. Components of custom providers will depend on its architecture, but will usually contain resource providers' applications servers along with its database, and integrate it with<a id="id99" class="calibre1"/> Windows Azure Pack using its custom extensions.</p><p class="calibre8">In common scenarios, custom resource providers' solutions includes the following components:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Windows Azure Pack components</li><li class="listitem">Custom resource provider Windows Azure Pack admin and tenant extension</li><li class="listitem">Custom resource provider fabric</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note05" class="calibre1"/>Note</h3><p class="calibre8">Almost all offerings require general Microsoft Infrastructure components such as Active Directory, DNS, and so on.</p></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Windows Azure Pack deployment models"><div class="book" id="J2B82-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec13" class="calibre1"/>Windows Azure Pack deployment models</h1></div></div></div><p class="calibre8">Windows Azure Pack <a id="id100" class="calibre1"/>components, both mandatory and optional can be deployed in various architectures depending upon use case. All components require Windows Server 2012 or 2012 R2 as an operating system and can be deployed in virtual or physical machines. Virtual machines are recommended to take advantage of Hypervisor level protection and other capabilities. All components can be deployed in a<a id="id101" class="calibre1"/> redundancy manner by having two or more servers for each components, eliminating any single point of failure. Windows Azure Pack components use Microsoft SQL Server for its database needs, which can also be protected against failures using SQL high availability techniques.</p><p class="calibre8">Mainly there are two deployment architectures for Windows Azure Pack components, with further deployment topologies available for varying needs:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Express deployment architecture</li><li class="listitem">Distributed deployment architecture</li></ul></div></div>

<div class="book" title="Windows Azure Pack deployment models">
<div class="book" title="Express deployment architecture"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec15" class="calibre1"/>Express deployment architecture</h2></div></div></div><p class="calibre8">In express deployment architecture <a id="id102" class="calibre1"/>all Windows Azure Pack mandatory components are installed on a single machine, whereas optional components can be installed on the same machine or a different machine. This<a id="id103" class="calibre1"/> model isn't a recommended model for production deployments and should be used for test and evaluation purposes only.</p><p class="calibre8">Windows Azure Pack Express installation is done via Microsoft Web Platform Installer. For express deployment Web PI provides a single click option which is <span class="strong"><strong class="calibre9">Windows Azure Pack: Portal and API Express</strong></span>, this will install all Windows Azure Pack mandatory and optional components as per requirement on a single machine.</p><p class="calibre8">In the express deployment model, MS SQL Server (Express) can also be installed on this same server or on a separate server.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="tip04" class="calibre1"/>Tip</h3><p class="calibre8">The Microsoft Web Platform Installer (Web PI) is a free tool that makes getting the latest components of the Microsoft Web Platform such as IIS, SQL Server Express, Windows Azure Pack, and so on. Web PI also helps in installing these components in an easier way. Web PI <a id="id104" class="calibre1"/>can be download from <a class="calibre1" href="http://www.microsoft.com/web/downloads/platform.aspx">http://www.microsoft.com/web/downloads/platform.aspx</a></p></div><div class="mediaobject"><img src="../images/00004.jpeg" alt="Express deployment architecture" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">The previous diagram<a id="id105" class="calibre1"/> illustrates the components which get installed on a machine in a Windows Azure Pack express deployment model. Minimal hardware requirements for express deployment is<a id="id106" class="calibre1"/> two CPUs, 8GB Memory (without dynamic memory) with 40GB of available disk space. Detailed deployment procedure for express deployment architecture shall be covered in <a class="calibre1" title="Chapter 3. Installing and Configuring Windows Azure Pack" href="part0033_split_000.html#VF2I1-b479cf466c26404ca54119871a9b2715">Chapter 3</a>, <span class="strong"><em class="calibre12">Installing and Configuring Windows Azure Pack</em></span>.</p><div class="informalexample" title="Note"><h3 class="title2"><a id="note06" class="calibre1"/>Note</h3><p class="calibre8">Express deployment is only for test and evaluation purposes and should not be used in a production environment.</p><p class="calibre8">Though Windows Azure Pack components can be installed on Windows Server 2012 or 2012 R2 OS, all features like ADFS, SMA support and so on, may not be available while deployed <a id="id107" class="calibre1"/>on Windows 2012. It is recommended to use Windows Server 2012 R2<a id="id108" class="calibre1"/> with latest patches and updates to get all functionalities and features.</p></div></div></div>

<div class="book" title="Windows Azure Pack deployment models">
<div class="book" title="Distributed deployment architecture"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec16" class="calibre1"/>Distributed deployment architecture</h2></div></div></div><p class="calibre8">Distributed deployment <a id="id109" class="calibre1"/>architecture enables installation of Windows Azure Pack roles on different servers for reliability and scalability. In this deployment model each component can be installed on a separate server or co-located with other roles as per functionality and requirement. Redundancy servers can be added for each role with load balancer to eliminate single point of failure at each layer.</p><p class="calibre8">The distributed deployment<a id="id110" class="calibre1"/> model is recommended for production deployment and provides scale-out capabilities. The diagram which will come next illustrates a sample distributed deployment architecture without any high availability.</p><p class="calibre8">In the following sample architecture, Windows Azure Pack components which will be accessed from the Internet (tenant admin portal, authentication site and tenant public API) are installed on three different servers in a separate network zone (aka DMZ Internet facing) which is separated with a firewall from other network zones. The rest of Windows Azure Pack mandatory components and Internet facing components are kept in separate network zone considering security best practices. All servers can be deployed as virtual machines on any Hypervisor hosts.</p><div class="informalexample"><table border="1" class="calibre16"><colgroup class="calibre17"><col class="calibre18"/><col class="calibre18"/></colgroup><thead class="calibre19"><tr class="calibre20"><th colspan="2" valign="bottom" class="calibre21">
<p class="calibre22">Minimal Hardware Configuration Requirement for Each Windows Azure Pack Server</p>
</th></tr></thead><tbody class="calibre23"><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">CPUs</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">2</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">RAM</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">8GB (no dynamic memory)</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">Available disk space</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">40GB</p>
</td></tr></tbody></table></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note07" class="calibre1"/>Note</h3><p class="calibre8">Hardware requirements, high availability and scalability for resource providers' servers to be in line with product specific guidelines are shown in the following screenshot:</p></div><div class="mediaobject"><img src="../images/00005.jpeg" alt="Distributed deployment architecture" class="calibre10"/></div><p class="calibre11"> </p><div class="informalexample" title="Note"><h3 class="title2"><a id="note08" class="calibre1"/>Note</h3><p class="calibre8">In all deployment<a id="id111" class="calibre1"/> models, standard Microsoft Infrastructure Services such as Active Directory, DNS and<a id="id112" class="calibre1"/> Fabric should be deployed as per product specific best practices. These architecture diagrams are limited to Windows Azure Pack components deployment.</p></div></div></div>

<div class="book" title="Windows Azure Pack deployment models">
<div class="book" title="Minimal production deployment sample architecture"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch01lvl2sec17" class="calibre1"/>Minimal production deployment sample architecture</h2></div></div></div><p class="calibre8">Distributed deployment architecture provides flexibilities to users to design and deploy Windows Azure Pack<a id="id113" class="calibre1"/> components as per their needs in terms of resiliency, scalability<a id="id114" class="calibre1"/> and security. One of the most common production deployment models is having production ready architecture with minimal footprint and no single point of failure. The following diagram illustrates a sample architecture with minimal deployment with resiliency.</p><div class="mediaobject"><img src="../images/00006.jpeg" alt="Minimal production deployment sample architecture" class="calibre10"/></div><p class="calibre11"> </p><p class="calibre8">In the preceding sample<a id="id115" class="calibre1"/> architecture, the number of VMs required for Windows Azure Pack components is <a id="id116" class="calibre1"/>six (excluding infra and RP servers). All Windows Azure Pack required components are segregated in three types primarily based upon functionality and placement in network zones.</p><p class="calibre8"><span class="strong"><strong class="calibre9">Windows Azure Pack tenant servers</strong></span>: Tenant servers includes management portal for tenants, tenant public API and tenant authentication site. Two servers are load balanced to provide resiliency and scalability. Since these servers will be Internet facing, they have to be placed in a DMZ network zone.</p><div class="informalexample"><table border="1" class="calibre16"><colgroup class="calibre17"><col class="calibre18"/><col class="calibre18"/></colgroup><thead class="calibre19"><tr class="calibre20"><th colspan="2" valign="bottom" class="calibre21">
<p class="calibre22">Hardware Configuration Requirement for Each Windows Azure Pack Tenant Server</p>
</th></tr></thead><tbody class="calibre23"><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">CPUs</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">4</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">RAM</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">8GB (no dynamic memory)</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">Available disk space</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">40GB</p>
</td></tr></tbody></table></div><p class="calibre8"><span class="strong"><strong class="calibre9">Windows Azure Pack admin servers</strong></span>: Admin servers include management portal for administrators, admin<a id="id117" class="calibre1"/> API, and tenant API and admin authentication site.</p><p class="calibre8">Two servers are load <a id="id118" class="calibre1"/>balanced to provide resiliency and scalability. Since these servers will not be Internet facing, they have to be placed in an internal network zone.</p><div class="informalexample"><table border="1" class="calibre16"><colgroup class="calibre17"><col class="calibre18"/><col class="calibre18"/></colgroup><thead class="calibre19"><tr class="calibre20"><th colspan="2" valign="bottom" class="calibre21">
<p class="calibre22">Hardware Configuration Requirement for Each Windows Azure Pack Admin Server</p>
</th></tr></thead><tbody class="calibre23"><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">CPUs</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">8</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">RAM</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">16GB (no dynamic memory)</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">Available disk space</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">40GB</p>
</td></tr></tbody></table></div><p class="calibre8"><span class="strong"><strong class="calibre9">Windows Azure Pack DB servers</strong></span>: In this sample, 2 Node SQL Cluster / AlwaysOn is considered to provide the database for Windows Azure Pack and System Center components. Hosted in an internal network zone, this cluster provides resiliency for a cloud management fabric database.</p><div class="informalexample"><table border="1" class="calibre16"><colgroup class="calibre17"><col class="calibre18"/><col class="calibre18"/></colgroup><thead class="calibre19"><tr class="calibre20"><th colspan="2" valign="bottom" class="calibre21">
<p class="calibre22">Hardware Configuration Requirement for SQL DB Nodes</p>
</th></tr></thead><tbody class="calibre23"><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">CPUs</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">16</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">RAM</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">16GB (no dynamic memory)</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">Available disk space</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">40GB + DB Disk (subject to size or cloud)</p>
</td></tr></tbody></table></div><p class="calibre8">Resource providers sizing and availability best practices should be deployed as per product specific guidelines.</p><p class="calibre8">This architecture is suitable for SMB organizations and cloud providers as it provides minimal production <a id="id119" class="calibre1"/>deployment<a id="id120" class="calibre1"/> feasibility as well as customization possibilities in case of specific needs.</p></div></div>

<div class="book" title="Windows Azure Pack deployment models">
<div class="book" title="Scaled production deployment sample architecture"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch01lvl2sec18" class="calibre1"/>Scaled production deployment sample architecture</h2></div></div></div><p class="calibre8">In this sample <a id="id121" class="calibre1"/>architecture, each component of Windows Azure Pack solution shall be deployed on separate dedicated servers along with redundancy to eliminate any single point of failure. This architecture is best suited for large scale enterprises and cloud service providers. The diagram that will come next illustrates the components deployment<a id="id122" class="calibre1"/> model and placement along with minimal configurations.</p><p class="calibre8">To deploy Windows Azure Pack components in this architecture, a total of 16 virtual machines are required in this architecture comprising eight failover/LB clusters.</p><div class="informalexample"><table border="1" class="calibre16"><colgroup class="calibre17"><col class="calibre18"/><col class="calibre18"/></colgroup><thead class="calibre19"><tr class="calibre20"><th colspan="2" valign="bottom" class="calibre21">
<p class="calibre22">Minimal Hardware Configuration Requirement for Each Windows Azure Pack Server</p>
</th></tr></thead><tbody class="calibre23"><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">CPUs</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">2</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">RAM</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">8GB (no dynamic memory)</p>
</td></tr><tr class="calibre20"><td valign="top" class="calibre24">
<p class="calibre22">Available disk space</p>
</td><td valign="top" class="calibre24">
<p class="calibre22">40GB</p>
</td></tr></tbody></table></div><div class="mediaobject"><img src="../images/00007.jpeg" alt="Scaled production deployment sample architecture" class="calibre10"/></div><p class="calibre11"> </p></div></div>

<div class="book" title="Windows Azure Pack deployment models">
<div class="book" title="Scaling Windows Azure Pack cloud deployment"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch01lvl2sec19" class="calibre1"/>Scaling Windows Azure Pack cloud deployment</h2></div></div></div><p class="calibre8">Scalability is<a id="id123" class="calibre1"/> one the most<a id="id124" class="calibre1"/> important aspects of any cloud solution. A cloud solution must support scalability without minimal changes and service disruption as soon as infrastructure size changes. Windows Azure Pack has capabilities to be scaled as and when required. Windows Azure Pack has to be deployed in a distributed model in order to support scaling; the best option would be having dedicate servers for each component in order to scale with minimal efforts.</p><p class="calibre8">In common scenarios scaling is required, particularly for tenant related components as tenant workload is likely to be increase with time.</p><p class="calibre8">There are some<a id="id125" class="calibre1"/> considerations which should be taken care of while <a id="id126" class="calibre1"/>scaling Windows Azure Pack deployment, as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">Tenant API and management portal scaling</strong></span>: Tenant management portal needs to be scaled along with tenant API and vice versa. While you scale management <a id="id127" class="calibre1"/>portal for tenant , you will also need to scale tenant APIs.</li><li class="listitem"><span class="strong"><strong class="calibre9">Scaling tenant authentication sites</strong></span>: Tenant authentication has to be scaled corresponding to ADFS servers. Tenant authentication sites have to be deployed in correspondence with ADFS in this scenario.</li><li class="listitem"><span class="strong"><strong class="calibre9">Scaling workload infrastructure</strong></span>: Scaling of tenant workload infrastructure depends upon the workload fabric being used. In case of IaaS workload, System Center and Hyper-V provides highly scalable capabilities by adding more compute, network and storage resources non-disruptively. The same applies for DBaaS and PaaS services as well. In most scenarios, additional resources can be added as and when required without disruption.</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note09" class="calibre1"/>Note</h3><p class="calibre8">See product specific guidelines (such as SQL Servers, IIS, Service Bus, and so on) while scaling resource providers' workload infrastructures.</p></div></div></div>
<div class="book" title="Integrating Windows Azure Pack and System Center Suite for IaaS services" id="K0RQ1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec14" class="calibre1"/>Integrating Windows Azure Pack and System Center Suite for IaaS services</h1></div></div></div><p class="calibre8">Windows Azure <a id="id128" class="calibre1"/>pack leverage System<a id="id129" class="calibre1"/> Center 2012 R2 products along with Hyper-V in order to provide infrastructure as a<a id="id130" class="calibre1"/> service offering. System Center Suite is a set of multiple tightly integrated products which helps in having unified management and provisioning for your entire data center or cloud infrastructure. System Center Suite of products supports both Microsoft and non-Microsoft infrastructure integration.</p><p class="calibre8">System Center components are responsible for delivering IaaS services in Windows Azure Pack cloud. System Center products, which can be integrated with Windows Azure Pack are as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">System Center Service Provider Foundation</strong></span>: SPF adds multi-tenancy to System Center products. Available as a part of System Center Orchestrator media, it provides an extensible OData API over a REST web service enabling<a id="id131" class="calibre1"/> programmatic multi-tenant interface to System Center Virtual Machine Manager. Windows Azure Pack uses SPF to integrate with SCVMM for IaaS workload provisioning and life cycle management.</li><li class="listitem"><span class="strong"><strong class="calibre9">System Center Virtual Machine Manager</strong></span>: SCVMM is the management solution for<a id="id132" class="calibre1"/> virtualization<a id="id133" class="calibre1"/> infrastructure provisions and managing compute (Virtualization Hosts), network, and storage resources to deploy virtual machines and services. VMM also enables software defined networking capabilities using Hyper-V Network Virtualization. Windows Azure Pack uses SCVMM to provision and manage clouds, virtual machines, virtual networks and other<a id="id134" class="calibre1"/> IaaS services.</li><li class="listitem"><span class="strong"><strong class="calibre9">System Center Service Management Automation (optional—for custom automation capabilities)</strong></span>: SMA is an<a id="id135" class="calibre1"/> automation solution for Windows Azure Pack cloud infrastructures. It enables provisioning, monitoring and life cycle management of resources in a Windows Azure Pack cloud solution. It is available as a part of System Center Orchestrator.</li><li class="listitem"><span class="strong"><strong class="calibre9">System Center Operations Manager (optional—for monitoring and usage metering)</strong></span>: SCOM is<a id="id136" class="calibre1"/> a monitoring and usage metering solution. It can be used in a Windows Azure Pack cloud for real-time monitoring of infra resources (using SCOM Console) and usage metering (using partner solutions such as<a id="id137" class="calibre1"/> CloudAssert, Cloudcruiser, and so on).</li></ul></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note10" class="calibre1"/>Note</h3><p class="calibre8">Other System Center products can also be integrated with Windows Azure Pack using partner provider solutions (for example, GridPro enables System Center Service Manager integration with Windows Azure Pack for request management solution). While some components may not be able to integrate with Windows Azure Pack directly for having self-service, these can be utilized in cloud infrastructure to add capabilities as per product specific functionalities.</p></div><p class="calibre8">Other System Center product capabilities in a cloud management solution include:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong class="calibre9">System Center Configuration Manager</strong></span>: In a Windows Azure Pack based cloud, SCCM deployment would help in compliance management, asset intelligence<a id="id138" class="calibre1"/> and inventory, patching solution and device management. SCCM has to be managed using SCCM management console and doesn't have any Windows Azure Pack portal integration functionalities at this point of time.</li><li class="listitem"><span class="strong"><strong class="calibre9">System Center Data Protection Manager</strong></span>: DPM is an enterprise class backup solution. It can be leveraged for backup and recovery of cloud management and workload resources. DPM provides features such as VM and application <a id="id139" class="calibre1"/>centric backup with granular recovery capabilities. DPM can also archive backup data to Microsoft Azure which enables hybrid scenarios.</li><li class="listitem"><span class="strong"><strong class="calibre9">System center Service Manager</strong></span>: It provides an IT service management solution for cloud infrastructure. SCSM is<a id="id140" class="calibre1"/> built on frameworks by <span class="strong"><strong class="calibre9">Microsoft Operations Framework</strong></span> (<span class="strong"><strong class="calibre9">MOF</strong></span>) and <span class="strong"><strong class="calibre9">Information Technology Infrastructure Library</strong></span> (<span class="strong"><strong class="calibre9">ITIL</strong></span>). It provides a built in <a id="id141" class="calibre1"/>process for handling incident and change management, change control and life cycle management. GridPro provides a way to integrate SCSM with Windows Azure Pack for enabling effective request management solutions.</li><li class="listitem"><span class="strong"><strong class="calibre9">System Center Endpoint Protection</strong></span>: Endpoint protection is an antimalware and security<a id="id142" class="calibre1"/> solution for the Microsoft platform. It can be used with SCCM for enterprise class endpoint management solutions.</li><li class="listitem"><span class="strong"><strong class="calibre9">System Center App Controller</strong></span>: App controller provides self-service experience for VMM infrastructure <a id="id143" class="calibre1"/>along with support of provisioning workload in Microsoft Azure.</li><li class="listitem"><span class="strong"><strong class="calibre9">System Center Orchestrator (SCORCH)</strong></span>: SMA and SPF (discussed above) are part of the SCORCH <a id="id144" class="calibre1"/>product and are tightly integrated with Windows Azure Pack for delivering IaaS services. Apart from SMA and SPF, Orchestrator provides workflow management solutions for data centers. Orchestrator can automate data center operations of deployment and management of resources.</li></ul></div></div>
<div class="book" title="Summary" id="KVCC1-b479cf466c26404ca54119871a9b2715"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch01lvl1sec15" class="calibre1"/>Summary</h1></div></div></div><p class="calibre8">In this chapter, we learned about Microsoft Cloud OS vision and how Windows Azure Pack contributes towards that. We got to know about capabilities and service offerings Windows Azure Pack provides along with an overview and functionalities of its architectural pieces.</p><p class="calibre8">We understood the building blocks of Windows Azure Pack cloud solution offerings with required and optional components details.</p><p class="calibre8">We also covered the deployment models of Windows Azure Pack components and discussed several sample architectures for test and production ready cloud infrastructures. We discussed the role of System Center products in delivering IaaS services with Windows Azure Pack cloud.</p><p class="calibre8">In the next chapter we will setup the cloud fabric which will be utilized by Windows Azure Pack for cloud management and tenant workloads.</p></div></body></html>