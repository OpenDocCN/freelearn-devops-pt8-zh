- en: '2'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '2'
- en: Getting Things Ready with Zabbix User Management
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Zabbix 用户管理准备工作
- en: In this chapter, we will work on creating our first user groups, users, and
    user roles. It’s very important to set these up in the correct manner, as they
    will give people access to your Zabbix environment with the correct permissions.
    By going over these things step by step, we will make sure we have a structured
    Zabbix setup before continuing on with this book.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将创建我们的第一个用户组、用户和用户角色。正确设置这些内容非常重要，因为它们将为用户提供正确权限，确保他们能访问你的 Zabbix 环境。通过一步一步地讲解这些内容，我们将确保在继续本书的其他部分之前，我们已经建立了一个结构化的
    Zabbix 设置。
- en: 'As a bonus, we will also set up some advanced user authentication using SAML
    and LDAP to make things easier for your Zabbix users and provide them with a way
    to use the login credentials they might already be using throughout your company.
    We will go over all these steps in the order of the following recipes:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 作为额外的内容，我们还将设置一些高级用户认证，使用 SAML 和 LDAP，让 Zabbix 用户的使用更加便捷，并为他们提供一个使用公司中可能已经在使用的登录凭据的方式。我们将按照以下步骤依次进行讲解：
- en: Creating user groups
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建用户组
- en: Using Zabbix user roles
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Zabbix 用户角色
- en: Creating your first users
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建你的第一个用户
- en: Azure AD SAML user authentication and JIT user provisioning
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure AD SAML 用户认证与即时用户创建（JIT）
- en: OpenLDAP user authentication and JIT user provisioning
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenLDAP 用户认证与即时用户创建（JIT）
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: We can do all of the work in this chapter with any installed Zabbix setup. If
    you haven’t installed Zabbix yet, check out the previous chapter to learn how
    to do so. We will go through our Zabbix setup to get everything ready for our
    users to start logging in and using the Zabbix frontend.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在任何安装了 Zabbix 的环境中完成本章的所有工作。如果你还没有安装 Zabbix，请查看上一章学习如何安装它。我们将通过我们的 Zabbix
    设置准备好所有内容，以便我们的用户开始登录并使用 Zabbix 前端。
- en: Creating user groups
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建用户组
- en: To log in to the Zabbix frontend, we are going to need users. Right now, we
    are logged in with the default user, which is logical because we need a user to
    create users. This isn’t a safe setup though, because we don’t want to keep using
    `zabbix` as a password. So, we are going to learn how to create new users and
    group them accordingly.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 要登录到 Zabbix 前端，我们需要用户。目前，我们使用的是默认用户，这很合理，因为我们需要一个用户来创建其他用户。不过，这样的设置不太安全，因为我们不希望继续使用
    `zabbix` 作为密码。所以，我们将学习如何创建新用户并将他们分组。
- en: It’s important to choose how you want to manage users in Zabbix before setting
    up user accounts. If you want to use something such as LDAP or SAML, it’s a smart
    idea to make the choice to use one of those authentication methods right away,
    so you won’t have any migration trouble.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置用户帐户之前，选择如何在 Zabbix 中管理用户非常重要。如果你想使用 LDAP 或 SAML 等方式，最好立即做出使用这些认证方法的决定，这样就不会遇到迁移问题。
- en: Getting ready
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Now that we know how the Zabbix UI is structured and how to navigate it, we
    can start doing some actual configuration. We’ll start out by creating some user
    groups to get familiar with the process and start using them. This way, our Zabbix
    setup gets not only more structured but also more secure.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了 Zabbix UI 的结构和导航方式，可以开始进行实际的配置了。我们将从创建一些用户组开始，熟悉这个过程并开始使用它们。这样，我们的
    Zabbix 设置不仅会更加结构化，还会更加安全。
- en: To get started with this, we’ll need a Zabbix server like the one we used in
    the previous recipes and the knowledge we’ve acquired there to navigate to the
    correct frontend sections.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 为了开始，我们需要一个像之前食谱中使用的 Zabbix 服务器，并利用我们在那里获得的知识导航到正确的前端部分。
- en: 'Looking at the following figure, we can see how our example company, **Cloud
    Hoster**, is set up. We will create the users seen in the diagram to create a
    structured and solid user setup:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 看一下下面的图，我们可以看到我们的示例公司**云主机提供商**是如何设置的。我们将创建图中看到的用户，以建立一个结构化且稳固的用户设置：
- en: '![Figure 2.1 – Cloud Hoster department diagram](img/B19803_02_01.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.1 – 云主机提供商部门图](img/B19803_02_01.jpg)'
- en: Figure 2.1 – Cloud Hoster department diagram
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.1 – 云主机提供商部门图
- en: 'So, **Cloud Hoster** has some departments that need access to the Zabbix frontend
    and others that don’t need it at all. Let’s say we want to give the following
    departments access to the Zabbix frontend:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，**云主机提供商**有一些部门需要访问 Zabbix 前端，而另一些部门则不需要。假设我们希望给以下部门提供 Zabbix 前端的访问权限：
- en: '**Networking**: To configure and monitor their network devices'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网络**：配置和监控他们的网络设备'
- en: '**Infrastructure**: To configure and monitor their Linux servers'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础设施**：配置和监控他们的 Linux 服务器'
- en: '**Buying and Inventory**: To look at inventory information and compare it with
    other internal tools'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**采购与库存**：查看库存信息并与其他内部工具进行对比'
- en: How to do it…
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Let’s get started with creating these three groups in our Zabbix UI:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始在 Zabbix UI 中创建这三个用户组：
- en: 'To do this, navigate to **Users** | **User groups**, which will show you the
    following page:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为此，请导航到**用户** | **用户组**，将显示以下页面：
- en: '![Figure 2.2 – The Zabbix User groups window](img/B19803_02_02.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.2 – Zabbix 用户组窗口](img/B19803_02_02.jpg)'
- en: Figure 2.2 – The Zabbix User groups window
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.2 – Zabbix 用户组窗口
- en: 'Now, let’s start by creating the **Networking** group by clicking **Create
    user group** in the top-right corner. This will bring you to the following screen:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们从点击右上角的**创建用户组**开始，创建**Networking**用户组。这将带您进入以下屏幕：
- en: '![Figure 2.3 – The Zabbix User groups configuration window](img/B19803_02_03.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.3 – Zabbix 用户组配置窗口](img/B19803_02_03.jpg)'
- en: Figure 2.3 – The Zabbix User groups configuration window
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.3 – Zabbix 用户组配置窗口
- en: We will need to fill in the information, starting with `Networking`. There are
    no users for this group yet, so we’ll skip that one. **Frontend access** gives
    us the option to provide authentication; if you select **LDAP** here, LDAP authentication
    will be used for authenticating. We will keep it as **System default**, which
    uses the internal Zabbix authentication system.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要填写信息，从`Networking`开始。这个组还没有用户，因此我们可以跳过这一项。**前端访问**选项让我们能够提供身份验证；如果您选择**LDAP**，则会使用
    LDAP 进行身份验证。我们将保持为**系统默认**，即使用 Zabbix 内部身份验证系统。
- en: Multi-factor authentication
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 多因素身份验证
- en: New to Zabbix 7.0 is the ability to use multi-factor authentication. If we want
    users to be forced to use this, we can set that up in the user group here. Before
    doing that, however, make sure to set up multi-factor authentication under **Users
    |** **Authentication**.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 7.0 新增了多因素身份验证功能。如果我们希望用户强制使用此功能，可以在这里的用户组中进行设置。不过，在执行此操作之前，请确保在**用户
    | 身份验证**中配置好多因素身份验证。
- en: 'Now, let’s navigate to the next tab on this page, which is **Template permissions**:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们进入此页面的下一个标签页，即**模板权限**：
- en: '![Figure 2.4 – The Zabbix User groups Template permissions configuration window](img/B19803_02_04.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.4 – Zabbix 用户组模板权限配置窗口](img/B19803_02_04.jpg)'
- en: Figure 2.4 – The Zabbix User groups Template permissions configuration window
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.4 – Zabbix 用户组模板权限配置窗口
- en: Here, we can specify what host groups our group will have access to. There’s
    a default host group for **Network devices** already, which we will use in this
    example.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以指定我们的用户组可以访问哪些主机组。已经有一个默认的**网络设备**主机组，我们将在本例中使用它。
- en: Click **Select** to take you to a pop-up window with host groups available.
    Select **Templates/Network devices** here and it’ll take you back to the previous
    window, with the group filled in.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**选择**，将弹出一个窗口，显示可用的主机组。在这里选择**模板/网络设备**，然后它会将您带回到之前的窗口，主机组已经填写好了。
- en: Select **Read-write** permissions.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**读写**权限。
- en: We won’t be adding anything else, so click the big blue **Add** button to finish
    creating this host group.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们不需要添加其他内容，因此点击右下角的大蓝色**添加**按钮以完成主机组的创建。
- en: Tip
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: When using Zabbix authentication such as HTTP, LDAP, or SAML, we still need
    to create our users internally with the right permissions if we do not use JIT
    user provisioning. To do so, configure your users to match your authentication
    method’s username in Zabbix and use the authentication method for password management.
    When using JIT user provisioning, this is not something we have to worry about.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用 Zabbix 身份验证（如 HTTP、LDAP 或 SAML）时，如果我们不使用 JIT 用户自动化配置，仍然需要在 Zabbix 中创建具有正确权限的用户。为此，请将用户配置为与身份验证方法中的用户名匹配，并使用该身份验证方法进行密码管理。使用
    JIT 用户自动化配置时，我们无需担心此问题。
- en: 'Now we will have a new user group called **Networking** that is only allowed
    to read and write to the **Templates/Network devices** template group:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将拥有一个新的用户组，名为**Networking**，该组只允许对**模板/网络设备**模板组进行读写：
- en: '![Figure 2.5 – The Zabbix User groups window](img/2.5.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.5 – Zabbix 用户组窗口](img/2.5.jpg)'
- en: Figure 2.5 – The Zabbix User groups window
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.5 – Zabbix 用户组窗口
- en: 'Let’s repeat this process to create a new **Infrastructure** user group, except
    instead of adding the **Templates/Network devices** template group, we’ll add
    the **Linux servers** host group, like this:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们重复这个过程，创建一个新的**基础设施**用户组，不过这次我们将添加**Linux 服务器**主机组，而不是添加**模板/网络设备**模板组，像这样：
- en: '![Figure 2.6 – The Zabbix User groups Permissions configuration window with
    one host group](img/B19803_02_06.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.6 – Zabbix 用户组权限配置窗口，显示一个主机组](img/B19803_02_06.jpg)'
- en: Figure 2.6 – The Zabbix User groups Permissions configuration window with one
    host group
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.6 – Zabbix 用户组权限配置窗口，显示一个主机组
- en: Click **Add** to save this host group.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **添加** 保存此主机组。
- en: 'Repeat the steps again and to add **Buying and Inventory** user group, we’ll
    do something differently. We’ll repeat the process we’ve just done except for
    the part with the permissions. We want **Buying and Inventory** to be able to
    read our inventory data, but we don’t want them to actually change our host configuration.
    Add both the **Templates/Network devices** template group and **Linux servers**
    host group to the user group, but with only **Read** permissions like this:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次重复上述步骤，添加 **采购与库存** 用户组，我们将采取不同的方法。我们会重复刚才的过程，除了权限设置部分。我们希望 **采购与库存** 用户组能够读取我们的库存数据，但不希望他们修改主机配置。将
    **模板/网络设备** 模板组和 **Linux 服务器** 主机组添加到该用户组，但仅授予 **读取** 权限，如下所示：
- en: '![Figure 2.7 – The Zabbix User groups Permissions configuration window with
    two groups](img/B19803_02_07_Combined.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.7 – Zabbix 用户组权限配置窗口，显示两个组](img/B19803_02_07_Combined.jpg)'
- en: Figure 2.7 – The Zabbix User groups Permissions configuration window with two
    groups
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.7 – Zabbix 用户组权限配置窗口，显示两个组
- en: Congratulations! Finishing this means you’ve ended up with three different user
    groups and we can continue to create our first new users! Let’s get to it.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！完成这一部分意味着你已经创建了三个不同的用户组，我们可以继续创建我们的第一个新用户！让我们开始吧。
- en: There’s more...
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'Zabbix user groups are quite extensive and there is a lot more to it than there
    seems at first. As the entire permission system is based on what user group(s)
    and user role you are part of, it is always a good idea to read the Zabbix documentation
    first: [https://www.zabbix.com/documentation/current/en/manual/config/users_and_usergroups/usergroup](https://www.zabbix.com/documentation/current/en/manual/config/users_and_usergroups/usergroup).'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 用户组非常广泛，远比表面看起来的要复杂。由于整个权限系统基于你所属的用户组和用户角色，因此在操作之前，最好先阅读 Zabbix 文档：[https://www.zabbix.com/documentation/current/en/manual/config/users_and_usergroups/usergroup](https://www.zabbix.com/documentation/current/en/manual/config/users_and_usergroups/usergroup)。
- en: Using Zabbix user roles
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Zabbix 用户角色
- en: 'Since Zabbix 6.0, we can create user roles within our Zabbix system. By creating
    our own user roles in Zabbix, it’s possible to provide additional permission settings.
    In older Zabbix versions, we had the ability to assign one of three user types:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 从 Zabbix 6.0 开始，我们可以在 Zabbix 系统中创建用户角色。通过在 Zabbix 中创建自己的用户角色，我们可以提供额外的权限设置。在旧版本的
    Zabbix 中，我们只能为用户分配三种类型之一：
- en: '**Users**'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户**'
- en: '**Admin**'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理员**'
- en: '**Super admin**'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**超级管理员**'
- en: What these user types did in earlier releases was restrict what Zabbix users
    could see in the frontend. This was always pre-defined though.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在早期版本中，这些用户类型的作用是限制 Zabbix 用户在前端界面中可以看到的内容，但这些限制始终是预定义的。
- en: Although these user groups are still in Zabbix, with the addition of user roles
    that we can create ourselves, we can set up our own frontend-related restrictions,
    making it possible to only show certain parts of the UI to certain Zabbix users.
    This is done by limiting access to certain permissions a user group has by default
    as well as respecting the user group-related permissions.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这些用户组在 Zabbix 中依然存在，但随着我们可以创建自己定义的用户角色的加入，我们可以设置自己的前端相关限制，从而使得只向特定的 Zabbix
    用户展示 UI 中的某些部分。这是通过限制用户组默认拥有的某些权限，并且遵循与用户组相关的权限来实现的。
- en: Getting ready
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: For this recipe, we will need a Zabbix server, preferably the one set up in
    the previous recipe. In the previous recipe, we set up different user groups to
    provide for different permissions on host groups. Completely separate from the
    user group, we will apply certain user roles to our users to determine what they
    can see in the UI. Let’s check out how to set up our user roles.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们需要一台 Zabbix 服务器，最好是上一个教程中设置的那台。在前一个教程中，我们设置了不同的用户组，以便对主机组提供不同的权限。完全独立于用户组，我们将为用户分配特定的用户角色，来决定他们在
    UI 中可以看到的内容。让我们来看看如何设置用户角色。
- en: How to do it...
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'First, navigate to the Zabbix frontend and go to **Users** | **User roles**.
    This will show us the default user roles as you know them from older Zabbix versions:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，导航到 Zabbix 前端并进入 **用户** | **用户角色**。这将显示我们从旧版本 Zabbix 中熟知的默认用户角色：
- en: '![Figure 2.8 – The default Zabbix User roles configuration window](img/B19803_02_09.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.8 – 默认的 Zabbix 用户角色配置窗口](img/B19803_02_09.jpg)'
- en: Figure 2.8 – The default Zabbix User roles configuration window
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.8 – 默认的 Zabbix 用户角色配置窗口
- en: Here, we can click on the blue **Create user role** button in the top-right
    corner.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，我们可以点击右上角的蓝色**创建用户角色**按钮。
- en: We’ll set up a new user role called **User+ role**. This role will be for Zabbix
    users with only read permissions, but who need more access than just the **Monitoring**,
    **Inventory**, and **Reports** navigational elements.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将设置一个新的用户角色，称为**User+角色**。这个角色将适用于只有读取权限的 Zabbix 用户，但他们需要比仅有**监控**、**库存**和**报告**导航元素更多的访问权限。
- en: '![Figure 2.9 – The top part of a new Zabbix User role configuration window](img/B19803_02_10.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.9 – 新的 Zabbix 用户角色配置窗口的顶部部分](img/B19803_02_10.jpg)'
- en: Figure 2.9 – The top part of a new Zabbix User role configuration window
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.9 – 新的 Zabbix 用户角色配置窗口的顶部部分
- en: First things first, make sure to enter **User+ role** into the **Name** field.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，确保在**名称**字段中输入**User+角色**。
- en: Let’s focus on the part where it states **Access to UI elements** first. When
    **User** is selected for **User type**, we are not able to add access rights to
    the user role. So, let’s change the **User type** by selecting **Admin** in the
    dropdown.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，让我们专注于显示**访问 UI 元素**部分。当选择**用户**作为**用户类型**时，我们无法为该用户角色添加访问权限。因此，我们需要通过选择下拉菜单中的**管理员**来更改**用户类型**。
- en: 'I specifically want this user role named **User+ role** to have the ability
    to access the maintenance page. Setting this up will look like this:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我特别希望这个名为**User+角色**的用户角色能够访问维护页面。设置起来会像这样：
- en: '![Figure 2.10 – A new Zabbix User+ role with access to Maintenance](img/B19803_02_11.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.10 – 一个新的 Zabbix User+ 角色，具有访问维护权限](img/B19803_02_11.jpg)'
- en: Figure 2.10 – A new Zabbix User+ role with access to Maintenance
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.10 – 一个新的 Zabbix User+ 角色，具有访问维护的权限
- en: 'Make sure to also change the **Access to actions** section of the form by deselecting
    **Manage scheduled reports** as follows:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保还要更改表单中的**访问操作**部分，方法是取消选中**管理计划报告**，如下所示：
- en: '![Figure 2.11 – A new Zabbix User+ role with correct Access to actions settings](img/B19803_02_12.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.11 – 一个新的 Zabbix User+ 角色，具有正确的访问操作设置](img/B19803_02_12.jpg)'
- en: Figure 2.11 – A new Zabbix User+ role with correct Access to actions settings
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.11 – 一个新的 Zabbix User+ 角色，具有正确的访问操作设置
- en: Last, but not least, click on the blue **Add** button at the bottom of the form
    to add this new user role.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后但同样重要的是，点击表单底部的蓝色**添加**按钮，以添加这个新的用户角色。
- en: How it works...
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: 'First, let’s break down the options we have when creating user roles in Zabbix:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们来解析在 Zabbix 中创建用户角色时所拥有的选项：
- en: '**Name**: We can set a custom name for our user role here.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**名称**：我们可以在这里为我们的用户角色设置自定义名称。'
- en: '**User type**: User types still exist in Zabbix 6, although they are now assigned
    through user roles. There’s still a limit to what can be seen by a certain user
    type, for example the **User** type will never have more than read access and
    the **Super admin** type is still unrestricted when it comes to permissions.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户类型**：尽管用户类型现在通过用户角色分配，Zabbix 6 仍然存在用户类型。在某些用户类型能够看到的内容上仍然有限制，例如，**用户**类型永远只会有只读权限，而**超级管理员**类型在权限方面仍然没有限制。'
- en: '**Access to UI elements**: Here, we can restrict what a user can see on the
    Zabbix UI when they are assigned to this user role.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问 UI 元素**：在这里，我们可以限制分配给该用户角色的用户在 Zabbix UI 上能够看到的内容。'
- en: '**Access to services**: Service or SLA monitoring can be restricted here, as
    we might not want all users to have access to it.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问服务**：这里可以限制服务或SLA监控，因为我们可能不希望所有用户都能访问它。'
- en: '**Access to modules**: Custom Zabbix frontend modules are fully integrated
    into the user role system, meaning we can select what frontend modules a Zabbix
    user can see.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问模块**：自定义的 Zabbix 前端模块已完全集成到用户角色系统中，这意味着我们可以选择 Zabbix 用户可以看到哪些前端模块。'
- en: '**Access to API**: The Zabbix API can be restricted to certain user roles.
    For example, you might only want a specific API user role, limiting the rest of
    the users’ access to the Zabbix API.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问 API**：Zabbix API 可以限制为某些用户角色。例如，你可能只希望有特定的 API 用户角色，限制其他用户访问 Zabbix API。'
- en: '**Access to actions**: In Zabbix user roles, certain actions can be limited,
    including the ability to edit dashboards, maintenance API tokens, and more.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问操作**：在 Zabbix 用户角色中，可以限制某些操作，包括编辑仪表盘、维护 API 令牌等权限。'
- en: 'Now, let’s look at what we’ve changed between the user role called `User role`
    and the user role called `User+ role`. The default user role called `User role`
    has the following access to UI elements:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看我们在名为`用户角色`的用户角色和名为`User+ 角色`的用户角色之间做了哪些更改。默认的名为`用户角色`的用户角色具有以下对 UI
    元素的访问权限：
- en: '![Figure 2.12 – Default Zabbix user role called User role Access to UI elements](img/B19803_02_13.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.12 – 默认的 Zabbix 用户角色，称为“用户角色”访问 UI 元素](img/B19803_02_13.jpg)'
- en: Figure 2.12 – Default Zabbix user role called User role Access to UI elements
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.12 – 默认的 Zabbix 用户角色，称为“用户角色”访问 UI 元素
- en: By default, we have three user roles in Zabbix 6, which mirror the available
    user types. The user role we see here in `User`. It gives us access to the UI
    elements seen above, restricting the user role called `User role` to only be able
    to see certain things and make no configuration changes.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，在 Zabbix 6 中，我们有三个用户角色，它们反映了可用的用户类型。我们在此看到的用户角色是`用户`。它使我们能够访问上面看到的 UI
    元素，将名为`用户角色`的用户角色限制为仅能查看某些内容，并且无法进行配置更改。
- en: For example, it’s considered an impactful permission to be able to set **Maintenance**.
    Because of course, you could restrict important notifications by setting **Maintenance**.
    But here comes the catch, what if you explicitly want a Zabbix user to only be
    able to read information but still not have access to configuration pages? In
    Zabbix 5.0, this wasn’t possible because you could only select the **User**, **Admin**,
    or **Super admin** types, immediately giving access to the entire configuration
    section when using the **Admin** and **Super admin** user types.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，能够设置**维护**被认为是一项有影响力的权限。因为当然，你可以通过设置**维护**来限制重要通知。但问题来了，如果你明确希望 Zabbix 用户仅能读取信息，但仍无法访问配置页面呢？在
    Zabbix 5.0 中，这是不可行的，因为你只能选择**用户**、**管理员**或**超级管理员**类型，使用**管理员**和**超级管理员**用户类型时会立即获得整个配置部分的访问权限。
- en: 'Now, let’s see what we did by creating a new user role called `User+ role`:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看看通过创建一个名为`User+ 角色`的新用户角色所做的工作：
- en: '![Figure 2.13 – New Zabbix user role called User+ role Access to UI elements](img/B19803_02_14.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.13 – 新的 Zabbix 用户角色，称为“User+ 角色”访问 UI 元素](img/B19803_02_14.jpg)'
- en: Figure 2.13 – New Zabbix user role called User+ role Access to UI elements
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.13 – 新的 Zabbix 用户角色，称为“User+ 角色”访问 UI 元素
- en: Here, we can see what happens if we change the user type to **Admin** but do
    not select all the available **Access to UI elements**. We now have a user role
    with no access to important configuration pages but with access to **Maintenance**.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以看到如果将用户类型更改为**管理员**，但不选择所有可用的**访问 UI 元素**会发生什么。我们现在有一个没有访问重要配置页面，但可以访问**维护**的用户角色。
- en: Combining that with the settings for **Access to actions**, where we added the
    **Create and edit maintenance** setting as seen in *Figure 2**.11*, we would have
    full access to the maintenance settings.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 将其与**访问操作**的设置结合，在那里我们添加了如*图 2.11*所示的**创建和编辑维护**设置，我们将拥有对维护设置的完全访问权限。
- en: 'When we assign this role to a user in the next recipe and log in as that user,
    we will be able to see the following in our Zabbix sidebar:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们在下一个配方中将此角色分配给某个用户，并以该用户身份登录时，我们将能够在 Zabbix 侧边栏中看到以下内容：
- en: '![Figure 2.14 – Custom User role Zabbix sidebar](img/B19803_02_15.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.14 – 自定义用户角色 Zabbix 侧边栏](img/B19803_02_15.jpg)'
- en: Figure 2.14 – Custom User role Zabbix sidebar
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.14 – 自定义用户角色 Zabbix 侧边栏
- en: This, of course, is just one of the many types of configurations we can use.
    We also have the ability to allow Zabbix users access to menus and options through
    a number of parameters under a bunch of custom user roles. We are free to set
    this up however we please, adding a lot of user flexibility within Zabbix.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这只是我们可以使用的众多配置类型之一。我们还可以通过一系列自定义用户角色下的多个参数，允许 Zabbix 用户访问菜单和选项。我们可以根据需要自由设置，从而为
    Zabbix 用户提供更多灵活性。
- en: There’s more...
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'Zabbix is currently in the process of working out user roles further, meaning
    that some parts might still be missing or you might see issues with them. As it
    is a new feature, it is constantly being improved and extended. Check out the
    Zabbix documentation for more information regarding this feature: [https://www.zabbix.com/documentation/6.4/en/manual/web_interface/frontend_sections/users/user_roles](https://www.zabbix.com/documentation/6.4/en/manual/web_interface/frontend_sections/users/user_roles)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix目前正在进一步完善用户角色，这意味着某些部分可能仍然缺失或存在问题。由于这是一个新功能，因此它正在不断改进和扩展。有关此功能的更多信息，请查看Zabbix文档：[https://www.zabbix.com/documentation/6.4/en/manual/web_interface/frontend_sections/users/user_roles](https://www.zabbix.com/documentation/6.4/en/manual/web_interface/frontend_sections/users/user_roles)
- en: Creating your first users
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建您的第一个用户
- en: With our newly created user groups and user roles, we’ve taken our first step
    toward a more structured and secure Zabbix setup. The next step is to actually
    assign some users to the newly created user groups to make sure they are assigned
    our new user permissions from the group, as well as making them part of a user
    role to provide the correct access to UI elements.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 通过我们新创建的用户组和用户角色，我们迈出了朝着更加结构化和安全的Zabbix设置迈出的第一步。下一步是将一些用户分配到新创建的用户组中，确保他们从组中获得新的用户权限，并将他们纳入用户角色，以提供对UI元素的正确访问。
- en: Getting ready
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To get started, we’ll need the server and the newly created user groups from
    the last recipe. So, let’s start with the configuration.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始配置，我们需要服务器和上一部分中新创建的用户组。所以，让我们从配置开始。
- en: 'We know there are three departments in the **Cloud Hoster** company that are
    going to use our Zabbix installation. We’ve created user groups for them, but
    there are also users in those departments that actually want to use our installation.
    Let’s meet them:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道**云主机**公司有三个部门将使用我们的Zabbix安装。我们为他们创建了用户组，但这些部门也有一些实际想要使用我们安装的用户。让我们认识一下他们：
- en: '![Figure 2.15 – Cloud Hoster users diagram](img/B19803_02_16.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.15 – 云主机用户图](img/B19803_02_16.jpg)'
- en: Figure 2.15 – Cloud Hoster users diagram
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.15 – 云主机用户图
- en: These are the users we need to configure for **Cloud Hoster** to use.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是我们需要为**云主机**使用配置的用户。
- en: How to do it…
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Let’s start creating the users. We will start with our **Networking** department:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始创建用户。我们将从**Networking**部门开始：
- en: 'Navigate to **Users** | **Users**, which will bring us to this page:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**用户** | **用户**，这将带我们到以下页面：
- en: '![Figure 2.16 – The Zabbix Users window](img/2.17.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.16 – Zabbix 用户窗口](img/2.17.jpg)'
- en: Figure 2.16 – The Zabbix Users window
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.16 – Zabbix 用户窗口
- en: 'This is where all the user creation magic is happening, as we will be managing
    all of our users from this page. To create our first **Networking** department
    user named **s_network**, click the **Create user** button in the top-right corner,
    bringing us to the following screen:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这是所有用户创建操作发生的地方，因为我们将从这个页面管理所有用户。要创建我们第一个**Networking**部门的用户，用户名为**s_network**，点击右上角的**创建用户**按钮，将我们带到以下界面：
- en: '![Figure 2.17 – The Zabbix Users configuration window](img/B19803_02_18.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.17 – Zabbix 用户配置窗口](img/B19803_02_18.jpg)'
- en: Figure 2.17 – The Zabbix Users configuration window
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.17 – Zabbix 用户配置窗口
- en: Fill out the **Username** field to provide us with the username this user will
    have, which will be **s_network**.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写**用户名**字段，提供该用户的用户名，即**s_network**。
- en: Also, it’s important to add this user to the group we have just created to give
    our user the right permissions. Click **Select** and pick our group called **Networking**.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同时，重要的是将此用户添加到我们刚刚创建的组中，以便为用户提供正确的权限。点击**选择**并选择我们名为**Networking**的组。
- en: Last but not least, set a secure password in the **Password** fields; don’t
    forget it because we will be using it later.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后但同样重要的是，在**密码**字段中设置一个安全密码；别忘了它，因为我们稍后会用到它。
- en: 'After this, move on to the **Permissions** tab as we won’t be configuring **Media**
    just yet:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，进入**权限**标签页，因为我们暂时不配置**媒体**：
- en: '![Figure 2.18 – The Zabbix user Permissions configuration window](img/B19803_02_19.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.18 – Zabbix 用户权限配置窗口](img/B19803_02_19.jpg)'
- en: Figure 2.18 – The Zabbix user Permissions configuration window
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.18 – Zabbix 用户权限配置窗口
- en: Select the **Role** option named **Super admin role** here. This will enable
    our user to access all UI elements and see and edit information about all host
    groups in the Zabbix server.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择名为**超级管理员角色**的**角色**选项。这将允许我们的用户访问所有UI元素，并查看和编辑Zabbix服务器中所有主机组的信息。
- en: 'The following user roles are available in Zabbix by default:'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Zabbix 默认提供以下用户角色：
- en: '| **Default roles** | **Description** |'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **默认角色** | **描述** |'
- en: '| --- | --- |'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| User role | The Zabbix User role has access to the visualization aspects
    of our Zabbix environment. Specifically, the Monitoring, Services, and Inventory
    and Reporting menus are available. The user will only ever have READ access to
    templates and hosts and they must be explicitly assigned. |'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 用户角色 | Zabbix 用户角色可以访问我们 Zabbix 环境中的可视化方面。具体来说，监控、服务、清单和报告菜单可用。用户将始终只能对模板和主机具有只读访问权限，且必须显式分配。
    |'
- en: '| Admin role | The Zabbix Admin role can additionally manage the configuration
    of our Zabbix monitoring. Specifically, all the menus that the Zabbix User has
    access to are available, with the addition of Data collection and Alerts. The
    user can be assigned READ-WRITE access to templates and hosts and they must be
    explicitly assigned. |'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| Admin 角色 | Zabbix Admin 角色可以进一步管理我们 Zabbix 监控的配置。具体来说，Zabbix 用户可以访问的所有菜单都可以使用，另外还增加了数据收集和警报。用户可以被分配对模板和主机的读写权限，并且必须显式分配。
    |'
- en: '| Super admin role | The Zabbix Super admin role has access to the administrative
    aspects of our Zabbix environment. Specifically, all the menus that the Zabbix
    Admin has access to are available, with the addition of Users and Administration.
    The user will always have READ-WRITE access to all templates and hosts. |'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| Super admin 角色 | Zabbix Super admin 角色可以访问我们 Zabbix 环境的管理方面。具体来说，Zabbix Admin
    可以访问的所有菜单都可以使用，另外还增加了用户和管理功能。用户将始终拥有对所有模板和主机的读写权限。 |'
- en: '8. Let’s repeat the previous steps for the user named `y_network`, but in the
    **Permissions** tab, select the **Admin role** option as follows:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 8. 对于名为`y_network`的用户，让我们重复之前的步骤，但在**权限**标签中选择**Admin 角色**选项，如下所示：
- en: '![Figure 2.19 – The Zabbix user Permissions configuration window](img/B19803_02_20.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.19 – Zabbix 用户权限配置窗口](img/B19803_02_20.jpg)'
- en: Figure 2.19 – The Zabbix user Permissions configuration window
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.19 – Zabbix 用户权限配置窗口
- en: 'After creating these two users, let’s move on to create the infrastructure
    user, `r_ infra`. Repeat the steps we took for `s_network`, changing the **Username**,
    of course. Then, add this user to the group and give our user the right permissions.
    Click **Select** and pick our group called **Infrastructure**. It will look as
    follows:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 创建这两个用户后，我们继续创建基础设施用户`r_infra`。重复我们为`s_network`所做的步骤，当然要更改**用户名**。然后，将该用户添加到组中，并为用户赋予适当的权限。点击**选择**并选择名为**Infrastructure**的组。它将如下所示：
- en: '![Figure 2.20 – The Zabbix user configuration window for r_infra](img/B19803_02_21.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.20 – r_infra 的 Zabbix 用户配置窗口](img/B19803_02_21.jpg)'
- en: Figure 2.20 – The Zabbix user configuration window for r_infra
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.20 – r_infra 的 Zabbix 用户配置窗口
- en: Lastly, make this user another **Super admin** on the **Permissions** page.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在**权限**页面将该用户设为另一个**Super admin**。
- en: '9. Now, for our last user, let’s repeat our steps, changing the **Username**
    and the group in the **User** tab as follows:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 9. 现在，对于我们的最后一个用户，让我们重复步骤，按以下方式更改**用户名**和**用户**标签中的组：
- en: '![Figure 2.21 – The Zabbix User configuration window for e_buy](img/B19803_02_22.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.21 – e_buy 的 Zabbix 用户配置窗口](img/B19803_02_22.jpg)'
- en: Figure 2.21 – The Zabbix User configuration window for e_buy
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.21 – e_buy 的 Zabbix 用户配置窗口
- en: '10. If you didn’t follow the previous recipe, you can change this user’s `User
    role` at the `User+ role` we created as follows:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 10. 如果你没有按照之前的步骤操作，可以按照我们创建的`User+角色`更改此用户的`User role`，如下所示：
- en: '![Figure 2.22 – The Zabbix user configuration window for e_buy](img/B19803_02_23.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.22 – e_buy 的 Zabbix 用户配置窗口](img/B19803_02_23.jpg)'
- en: Figure 2.22 – The Zabbix user configuration window for e_buy
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.22 – e_buy 的 Zabbix 用户配置窗口
- en: Setting the user up with the `User+` role will also let the `e_buy` user create
    maintenance periods.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 将用户设置为`User+`角色还将允许`e_buy`用户创建维护期。
- en: 'When you’re done, you’ll end up with the following:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，您将得到如下内容：
- en: '**s_network**: A user with access to the **Networking** user group permissions
    with the **Super** **admin** role'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**s_network**：具有**Networking**用户组权限，并且具有**Super** **admin**角色的用户'
- en: '**y_network**: A user with access to the **Networking** user group permissions
    with the **Admin** role'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**y_network**：具有**Networking**用户组权限，并且具有**Admin**角色的用户'
- en: '**r_infra**: A user with access to the **Infrastructure** user group permissions
    with the **Super** **admin** role'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**r_infra**：具有**Infrastructure**用户组权限，并且具有**Super** **admin**角色的用户'
- en: '**e_buy**: A user with access to the **Buying and Inventory** user group permissions
    with either the **User** role or the **User+ role**'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**e_buy**：一个具有 **购买和库存** 用户组权限的用户，权限包括 **用户** 角色或 **用户+** 角色'
- en: Azure AD SAML user authentication and JIT user provisioning
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure AD SAML 用户认证与 JIT 用户配置
- en: In this recipe, we will use **Security Assertion Markup Language** (**SAML**)
    authentication, a widely used form of authentication in the IT world. The SAML
    standard allows us to exchange authorization data between applications, so we
    can authenticate between our Zabbix application and an authentication provider.
    We’ll be using this as a form of managing passwords for our Zabbix users. Please
    note that if you only set up user authentication with passwords with SAML or LDAP,
    you still have to create users with their permissions manually within Zabbix.
    To circumvent this, we can also set up **Just In Time** (**JIT**) user provisioning
    since Zabbix 6.4.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在本篇教程中，我们将使用 **安全断言标记语言**（**SAML**）认证，这是一种在 IT 领域广泛使用的认证方式。SAML 标准允许我们在应用程序之间交换授权数据，从而实现我们在
    Zabbix 应用程序和认证提供者之间的认证。我们将使用这种方式来管理 Zabbix 用户的密码。请注意，如果您仅使用 SAML 或 LDAP 设置用户密码认证，您仍然需要手动在
    Zabbix 内创建用户及其权限。为了解决这个问题，自 Zabbix 6.4 以来，我们还可以设置 **即时用户配置**（**JIT**）功能。
- en: Getting ready
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: To get started with SAML authentication, we will need our configured Zabbix
    server from the previous recipe. It’s important that we have all the configured
    users from the previous recipe. We will also need something to authenticate with
    SAML. We will be using Microsoft Azure **Active Directory** (**AD**) SAML.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 SAML 认证，我们需要之前教程中配置好的 Zabbix 服务器。确保我们有之前教程中配置的所有用户。我们还需要某种用于 SAML 认证的工具。我们将使用
    Microsoft Azure **活动目录**（**AD**）的 SAML。
- en: Make sure to set up users in your Azure AD before continuing with this recipe.
    You can use your existing AD users for authentication, so you can use this recipe
    with your existing AD setup.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续本教程之前，请确保在 Azure AD 中设置好用户。您可以使用现有的 AD 用户进行认证，因此可以使用此教程与现有的 AD 配置一起操作。
- en: 'We will be using the `s_network` user as an example as well as a new `JIT_Admin`
    user group in our Zabbix environment with no permissions set up. The Azure user
    looks as follows:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 `s_network` 用户作为示例，并且在 Zabbix 环境中创建一个新的 `JIT_Admin` 用户组，该用户组没有设置权限。Azure
    用户如下所示：
- en: '![Figure 2.23 – The Azure Users and groups window](img/B19803_02_24.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.23 – Azure 用户和组窗口](img/B19803_02_24.jpg)'
- en: Figure 2.23 – The Azure Users and groups window
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.23 – Azure 用户和组窗口
- en: 'For JIT user provisioning, we also made sure to make this user part of a new
    `zbx_admin` group:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 JIT 用户配置，我们还确保将此用户添加到新的 `zbx_admin` 用户组中：
- en: '![Figure 2.24 – The Azure users group details window](img/B19803_02_25.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.24 – Azure 用户组详细信息窗口](img/B19803_02_25.jpg)'
- en: Figure 2.24 – The Azure users group details window
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.24 – Azure 用户组详细信息窗口
- en: 'This group is just going to be an empty security group that we will use to
    assign permissions in Zabbix later:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 这个组将只是一个空的安全组，我们将稍后用于在 Zabbix 中分配权限：
- en: '![Figure 2.25 – The Azure group details window](img/B19803_02_26.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.25 – Azure 组详细信息窗口](img/B19803_02_26.jpg)'
- en: Figure 2.25 – The Azure group details window
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.25 – Azure 组详细信息窗口
- en: 'To set up SAML, retrieve your SAML settings from your AD or another SAML provider.
    To work with Zabbix, we will need the following:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置 SAML，请从您的 AD 或其他 SAML 提供商处获取 SAML 设置。要与 Zabbix 配合使用，我们需要以下内容：
- en: IdP entity ID
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IdP 实体 ID
- en: SSO service URL
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SSO 服务 URL
- en: SLO service URL
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLO 服务 URL
- en: Username attribute
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名属性
- en: SP entity ID
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SP 实体 ID
- en: SP name ID format
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SP 名称 ID 格式
- en: 'For the JIT user provisioning, we will need the following:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 JIT 用户配置，我们需要以下内容：
- en: Group name attribute
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户组名称属性
- en: User name attribute
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名属性
- en: User last name attribute
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户姓氏属性
- en: User group mapping
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户组映射
- en: How to do it…
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'We start with the assumption that you have your Azure AD ready. Let’s see how
    we can configure SAML using our setup:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设您的 Azure AD 已经准备好。让我们看看如何使用我们的配置来设置 SAML：
- en: 'Let’s navigate to the following URL: [https://portal.azure.com/](https://portal.azure.com/).'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们导航到以下 URL：[https://portal.azure.com/](https://portal.azure.com/)。
- en: After logging in, navigate to Azure AD and click on **Enterprise Applications**.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录后，导航至 Azure AD 并点击 **企业应用程序**。
- en: 'Now click on **+ New Application** to create our new application. At the next
    window, click on **Create your** **own application**:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在点击 **+ 新建应用程序** 来创建我们的新应用程序。在下一个窗口中，点击 **创建您自己的应用程序**：
- en: "![Figure 2.26 – The Azure enterprise application creation page\uFEFF](img/B19803_02_27.jpg)"
  id: totrans-187
  prefs: []
  type: TYPE_IMG
- en: Figure 2.26 – The Azure enterprise application creation page
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
- en: 'In the next window, name our new application **Zabbix** and click on the blue
    **Create** button:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.27 – The Azure enterprise new application page](img/B19803_02_28.jpg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
- en: Figure 2.27 – The Azure enterprise new application page
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: 'Select our new application from the list and click on **Users and Groups**
    to add the correct users. In our case, this will be **s_network**:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.28 – The Azure enterprise application User addition](img/B19803_02_29.jpg)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
- en: Figure 2.28 – The Azure enterprise application User addition
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: 'If we are setting up JIT user provisioning, make sure to also add the **zbx_admin**
    group:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.29 – The Azure enterprise application Group addition](img/B19803_02_30.jpg)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
- en: Figure 2.29 – The Azure enterprise application Group addition
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
- en: With JIT user provisioning, adding the group should be enough.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: You will also have to assign a role. Click on **Select a role** and add the
    role you want to use. When using JIT you can use the **zbx_admin** group, otherwise
    just add the user as **User**.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.30 – Azure enterprise application role assignment](img/B19803_02_31.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
- en: Figure 2.30 – Azure enterprise application role assignment
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Select** and then **Assign**.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now let’s move on to the SAML settings by clicking on **Single sign-on** in
    the sidebar.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now click on **SAML** on the page shown in the following screenshot and continue:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.31 – The Azure enterprise application SAML option](img/B19803_02_32.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
- en: Figure 2.31 – The Azure enterprise application SAML option
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: 'Now at **1**, we can add the following information, where the black marks are
    our Zabbix server URL:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.32 – The Azure SAML setting 1](img/B19803_02_33.jpg)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
- en: Figure 2.32 – The Azure SAML setting 1
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: 'At **2**, fill out the following:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.33 – The Azure SAML setting 2](img/B19803_02_34.jpg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
- en: Figure 2.33 – The Azure SAML setting 2
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
- en: '**3** will be automatically filled. Click on **Download** for **Certificate
    (Base64)**:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.34 – The Azure SAML setting 3](img/B19803_02_35.jpg)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
- en: Figure 2.34 – The Azure SAML setting 3
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
- en: 'Log in to the Zabbix server CLI and create a new file with the following command:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Paste the contents from the file downloaded in *step 11* here and save the file.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now back at Azure for **4**, we will get the following information:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.35 – The Azure SAML setting 4](img/B19803_02_36.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
- en: Figure 2.35 – The Azure SAML setting 4
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
- en: 'At the Zabbix frontend, go to the **Users** | **Authentication** | **SAML settings**
    page and fill in the following information:'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.36 – The Zabbix SAML settings](img/B19803_02_37.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
- en: Figure 2.36 – The Zabbix SAML settings
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
- en: 'If you also want to use JIT user provisioning, enable it as seen in the previous
    screenshot as well as fill in the following information:'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.37 – The Zabbix SAML JIT settings](img/B19803_02_38.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
- en: Figure 2.37 – The Zabbix SAML JIT settings
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
- en: I have used the **JIT_Admin** user group as suggested in the *Getting ready*
    part of this recipe. Please use any user group and roles you see fit and make
    sure to integrate the JIT user provisioning into your own groups and permissions.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
- en: 'If you have already created the **s_network** user and you aren’t going to
    use JIT user provisioning, go to **Users** | **Users** and change the **s_network**
    user to include the used Azure domain, for example:'
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.38 – The Zabbix edit user screen for our SAML setup](img/B19803_02_39.jpg)'
  id: totrans-231
  prefs: []
  type: TYPE_IMG
- en: Figure 2.38 – The Zabbix edit user screen for our SAML setup
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
- en: If you are using JIT user provisioning, you can simply log in with the new user
    credentials using SAML authentication and it should create the user with the correct
    credentials.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
- en: 'After following these steps, it should now be possible to log in with your
    user configured in Zabbix and use the password set in Azure AD for this:'
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: "![Figure 2.39 – The Zabbix logi\uFEFF\uFEFFn window](img/B19803_02_40.jpg)"
  id: totrans-235
  prefs: []
  type: TYPE_IMG
- en: Figure 2.39 – The Zabbix login window
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Zabbix SAML user authentication is by default used to centralize password management.
    In the past, we were not able to actually assign user groups and permissions to
    users via this setup. If we set it up without JIT user provisioning we can use
    it for simple password management.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
- en: 'This way, we can make sure it is easier for users to keep their passwords centralized:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 2.40 – Zabbix SAML authentication diagram](img/B19803_02_41.jpg)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
- en: Figure 2.40 – Zabbix SAML authentication diagram
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
- en: Zabbix communicates with our Azure AD SAML component when we click the **Sign
    in** button. The user is then authenticated against your Azure AD user and a confirmation
    is sent back to the Zabbix server. Congratulations, you are now logged in to your
    Zabbix server.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
- en: 'However, since Zabbix 6.4 it is also possible to enable JIT user provisioning.
    This new feature allows us to also assign Zabbix User groups and roles according
    to user groups on our SAML server. As such, the whole process with JIT user provisioning
    included looks something like this:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
- en: "![Figure 2.41 – Zabbix SAML JIT authentication\uFEFF\uFEFF diagram](img/B19803_02_42.jpg)"
  id: totrans-244
  prefs: []
  type: TYPE_IMG
- en: Figure 2.41 – Zabbix SAML JIT authentication diagram
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
- en: There’s more…
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We can do this kind of authentication not only with SAML but also with HTTP
    and LDAP. This way, you can choose the right form of advanced authentication for
    your organization.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
- en: 'Check out the Zabbix documentation for more information on the different forms
    of authentication: [https://www.zabbix.com/documentation/current/en/manual/web_interface/frontend_sections/users/authentication](https://www.zabbix.com/documentation/current/en/manual/web_interface/frontend_sections/users/authentication)'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
- en: 'It’s also possible to work with an identity provider such as Okta or OneLogin,
    among others. This means your options aren’t limited to Azure AD: as long as it
    supports SAML, you can use it to authenticate against your Zabbix server.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
- en: OpenLDAP user authentication and JIT user provisioning
  id: totrans-250
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Although a lot of people use SAML in combination with Azure Active Directory,
    that isn’t always the case. There are loads of different methods of running your
    user authentication.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
- en: One of those methods is using LDAP instead of SAML with, for example, an OpenLDAP
    server. OpenLDAP provides us with a solid open source implementation to set up
    a user database with LDAP. The great thing about this is that **JIT** user provisioning
    doesn’t just work with SAML, but also with LDAP, meaning we can apply JIT user
    provisioning here as well.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  id: totrans-253
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To get things going, we are going to need an OpenLDAP server set up and ready
    to go. It is recommended to use your own OpenLDAP environment. There are loads
    of guides available online to do a solid OpenLDAP implementation as well as a
    quick start guide for the latest version on the official website: [https://www.openldap.org/](https://www.openldap.org/)'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
- en: 'Another way to go is spin up a test OpenLDAP environment with Docker. We can
    use the following command:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Please use this for testing only, since the preceding code might not be using
    the latest versions anymore.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Once OpenLDAP is set up, we can start to create some users and groups in our
    new OpenLDAP environment. Let’s get started on that first:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
- en: 'We will open the OpenLDAP GUI by navigating to the URL in our browser:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'After logging in, let’s create some new users. First, click on **Login** on
    the left-hand side of the window. The default username and password are as follows:'
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-263
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'You should see that we have already created some groups and users for you if
    you are using our Docker images, as you can see in the following screenshot:'
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.42 – OpenLDAP server groups and users](img/B19803_02_43.jpg)'
  id: totrans-265
  prefs: []
  type: TYPE_IMG
- en: Figure 2.42 – OpenLDAP server groups and users
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
- en: If you are using your own OpenLDAP environment, make sure to have at least one
    group and one user for testing.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
- en: Let’s use these usernames and groups to set up LDAP authentication with JIT
    user provisioning.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Move on to the Zabbix frontend and navigate to **Users** | **Users**. First,
    we’ll give ourselves access at any time even if the default authentication method
    will be switched to LDAP. Switch the **Admin** user’s default authentication method
    to internal by adding them to the **Internal** group.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.43 – Zabbix Admin user settings](img/B19803_02_44.jpg)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
- en: Figure 2.43 – Zabbix Admin user settings
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Update** and it should then look like the following screenshot.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.44 – Zabbix Admin user with Internal Frontend access](img/B19803_02_45.jpg)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
- en: Figure 2.44 – Zabbix Admin user with Internal Frontend access
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
- en: Then we will go to **Users** | **Authentication** and then **LDAP settings**.
    Set up the default authentication method to LDAP and the deprovisioned users group
    as follows.
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.45 – Zabbix Default authentication method](img/B19803_02_46.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
- en: Figure 2.45 – Zabbix Default authentication method
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
- en: Next, we’ll click on the **LDAP settings** tab. This is where we can configure
    our LDAP server and JIT user provisioning. Let’s start by enabling the ones we
    would like to use.
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.46 – Zabbix Default authentication method](img/B19803_02_47.jpg)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
- en: Figure 2.46 – Zabbix Default authentication method
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
- en: When using just LDAP, we will have to create our users manually. By enabling
    JIT, users will be created and granted the correct permissions automatically.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
- en: It’s also possible to add multiple LDAP servers in Zabbix now. Let’s add our
    OpenLDAP server by clicking on **Add** at **Servers**.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, fill in the following.
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.47 – Zabbix LDAP authentication setup](img/B19803_02_48.jpg)'
  id: totrans-284
  prefs: []
  type: TYPE_IMG
- en: Figure 2.47 – Zabbix LDAP authentication setup
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
- en: The default `password`.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
- en: If we want, we can also enable JIT provisioning. Enable it and fill in the following.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.48 – Zabbix LDAP authentication setup with JIT](img/B19803_02_49.jpg)'
  id: totrans-288
  prefs: []
  type: TYPE_IMG
- en: Figure 2.48 – Zabbix LDAP authentication setup with JIT
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
- en: Now, sign out of the currently logged-in account by clicking the **Sign out**
    button in the lower left corner of the sidebar.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We should now be able to log in with the **user1** LDAP user. The password is
    **password**.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.49 – Zabbix login window for user1](img/B19803_02_50.jpg)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
- en: Figure 2.49 – Zabbix login window for user1
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
- en: When we log in for the first time, the user will be created with the correct
    permissions as defined in the JIT user provisioning step. If logged in as a Zabbix
    super admin, we can see this under **Users** | **Users**.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 2.50 – Zabbix LDAP provisioned user](img/B19803_02_51.jpg)'
  id: totrans-295
  prefs: []
  type: TYPE_IMG
- en: Figure 2.50 – Zabbix LDAP provisioned user
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
- en: How it works…
  id: totrans-297
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'As you can see, we can use Zabbix in combination with an LDAP server to make
    password management easier as a whole. There are two options for us to choose
    from: using LDAP with or without JIT user provisioning.'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
- en: When we use Zabbix in combination with an LDAP server, but choose to not use
    JIT user provisioning, Zabbix will communicate with the LDAP server just to do
    the password authentication upon pressing the **Sign** **in** button.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 2.51 – Zabbix LDAP authentication diagram](img/B19803_02_52.jpg)'
  id: totrans-300
  prefs: []
  type: TYPE_IMG
- en: Figure 2.51 – Zabbix LDAP authentication diagram
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
- en: 'However, since Zabbix 6.4 it is also possible to enable JIT user provisioning.
    This new feature allows us to also assign Zabbix user groups and roles in line
    with the user groups on our LDAP server. As such, the whole process with JIT user
    provisioning included looks something like the following:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 2.52 – Zabbix LDAP JIT authentication diagram](img/B19803_02_53.jpg)'
  id: totrans-303
  prefs: []
  type: TYPE_IMG
- en: Figure 2.52 – Zabbix LDAP JIT authentication diagram
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
