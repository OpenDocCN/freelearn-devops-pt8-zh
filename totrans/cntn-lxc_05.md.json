["```\nroot@host:~# cat /boot/config-`uname -r` | grep -ibridge\n# PC-card bridges\nCONFIG_BRIDGE_NETFILTER=y\nCONFIG_NF_TABLES_BRIDGE=m\nCONFIG_BRIDGE_NF_EBTABLES=m\nCONFIG_BRIDGE_EBT_BROUTE=m\nCONFIG_BRIDGE_EBT_T_FILTER=m\nCONFIG_BRIDGE_EBT_T_NAT=m\nCONFIG_BRIDGE_EBT_802_3=m\nCONFIG_BRIDGE_EBT_AMONG=m\nCONFIG_BRIDGE_EBT_ARP=m\nCONFIG_BRIDGE_EBT_IP=m\nCONFIG_BRIDGE_EBT_IP6=m\nCONFIG_BRIDGE_EBT_LIMIT=m\nCONFIG_BRIDGE_EBT_MARK=m\nCONFIG_BRIDGE_EBT_PKTTYPE=m\nCONFIG_BRIDGE_EBT_STP=m\nCONFIG_BRIDGE_EBT_VLAN=m\nCONFIG_BRIDGE_EBT_ARPREPLY=m\nCONFIG_BRIDGE_EBT_DNAT=m\nCONFIG_BRIDGE_EBT_MARK_T=m\nCONFIG_BRIDGE_EBT_REDIRECT=m\nCONFIG_BRIDGE_EBT_SNAT=m\nCONFIG_BRIDGE_EBT_LOG=m\n# CONFIG_BRIDGE_EBT_ULOG is not set\nCONFIG_BRIDGE_EBT_NFLOG=m\nCONFIG_BRIDGE=m\nCONFIG_BRIDGE_IGMP_SNOOPING=y\nCONFIG_BRIDGE_VLAN_FILTERING=y\nCONFIG_SSB_B43_PCI_BRIDGE=y\nCONFIG_DVB_DDBRIDGE=m\nCONFIG_EDAC_SBRIDGE=m\n# VME Bridge Drivers\nroot@host:~#\n\n```", "```\nroot@ubuntu:~# lsmod | grep bridge\nbridge                110925  0\nstp                    12976  1 bridge\nllc                    14552  2 stp,bridge\nroot@ubuntu:~#\n\n```", "```\n[root@centos ~]# modinfo bridge\nfilename:       /lib/modules/3.10.0-327.28.3.el7.x86_64/kernel/net/bridge/bridge.ko\nalias:          rtnl-link-bridge\nversion:        2.3\nlicense:        GPL\nrhelversion:    7.2\nsrcversion:     905847C53FF43DEFAA0EB3C\ndepends:        stp,llc\nintree:         Y\nvermagic:       3.10.0-327.28.3.el7.x86_64 SMP mod_unloadmodversions\nsigner:         CentOS Linux kernel signing key\nsig_key:        15:64:6F:1E:11:B7:3F:8C:2A:ED:8A:E2:91:65:5D:52:58:05:6E:E9\nsig_hashalgo:   sha256\n[rootcentos ~]# \n\n```", "```\nroot@ubuntu:~# cd /usr/src/\nroot@ubuntu:/usr/src# apt-get install linux-source ncurses-dev\nroot@ubuntu:/usr/src# cd linux-source-3.13.0/\nroot@ubuntu:/usr/src/linux-source-3.13.0# tar jxfvÂ linux-source-3.13.0.tar.bz2\nroot@ubuntu:/usr/src/linux-source-3.13.0# cd linux-source-3.13.0/\n\n```", "```\n[root@bridge ~]# yum install kernel-devel ncurses-devel\n\n```", "```\nroot@ubuntu:/usr/src/linux-source-3.13.0/linux-source-3.13.0# make menuconfig\n\n```", "```\nroot@bridge:/usr/src/linux-source-3.13.0/linux-source-3.13.0# make deb-pkg\n CHK     include/config/kernel.release\nmake KBUILD_SRC=\nSYSHDR  arch/x86/syscalls/../include/generated/uapi/asm/unistd_32.h\nSYSHDR  arch/x86/syscalls/../include/generated/uapi/asm/unistd_64.h\n...\ndpkg-deb: building package `linux-firmware-image-3.13.11-ckt39' \nin `../linux-firmware-image-3.13.11-ckt39_3.13.11-ckt39-1_amd64.deb'.\ndpkg-deb: building package `linux-headers-3.13.11-ckt39' \nin `../linux-headers-3.13.11-ckt39_3.13.11-ckt39-1_amd64.deb'.\ndpkg-deb: building package `linux-libc-dev' \nin `../linux-libc-dev_3.13.11-ckt39-1_amd64.deb'.\ndpkg-deb: building package `linux-image-3.13.11-ckt39' \nin `../linux-image-3.13.11-ckt39_3.13.11-ckt39-1_amd64.deb'.\ndpkg-deb: building package `linux-image-3.13.11-ckt39-dbg' \nin `../linux-image-3.13.11-ckt39-dbg_3.13.11-ckt39-1_amd64.deb'.\nroot@ubuntu:/usr/src/linux-source-3.13.0/linux-source-3.13.0# ls -la ../*.deb\n-rw-r--r-- 1 root root    803530 Oct 19 18:04 ../linux-firmware-image-3.13.11-ckt39_3.13.11-ckt39-1_amd64.deb\n-rw-r--r-- 1 root root   6435516 Oct 19 18:04 ../linux-headers-3.13.11-ckt39_3.13.11-ckt39-1_amd64.deb\n-rw-r--r-- 1 root root  39640242 Oct 19 18:07 ../linux-image-3.13.11-ckt39_3.13.11-ckt39-1_amd64.deb\n-rw-r--r-- 1 root root 363727500 Oct 19 18:37 ../linux-image-3.13.11-ckt39-dbg_3.13.11-ckt39-1_amd64.deb\n-rw-r--r-- 1 root root    768606 Oct 19 18:04 ../linux-libc-dev_3.13.11-ckt39-1_amd64.deb\nroot@ubuntu:/usr/src/linux-source-3.13.0/linux-source-3.13.0#\n\n```", "```\nroot@ubuntu:~# cd /usr/src/\nroot@ubuntu:/usr/src# apt-get update && apt-get install build-essential automakepkg-config git\nroot@ubuntu:/usr/src# git clone git://git.kernel.org/pub/scm/linux/kernel/git/shemminger/bridge-utils.git\nCloning into 'bridge-utils'...\nremote: Counting objects: 654, done.\nremote: Total 654 (delta 0), reused 0 (delta 0)\nReceiving objects: 100% (654/654), 131.72 KiB | 198.00 KiB/s, done.\nResolving deltas: 100% (425/425), done.\n\nChecking connectivity... done. \nroot@ubuntu:/usr/src# cd bridge-utils/\nroot@ubuntu:/usr/src/bridge-utils# autoconf\nroot@ubuntu:/usr/src/bridge-utils# ./configure && make && make install\nroot@ubuntu:/usr/src/bridge-utils# brctl --version\nbridge-utils, 1.5\nroot@ubuntu:/usr/src/bridge-utils#\n\n```", "```\n[root@centos ~]# cd /usr/src/\n[root@centossrc]#\n[root@centossrc]# yum groupinstall \"Development tools\"\n[root@centossrc]# git clone git://git.kernel.org/pub/scm/linux/kernel/git/shemminger/bridge-utils.git\nCloning into 'bridge-utils'...\nremote: Counting objects: 654, done.\nremote: Total 654 (delta 0), reused 0 (delta 0)\nReceiving objects: 100% (654/654), 131.72 KiB | 198.00 KiB/s, done.\nResolving deltas: 100% (425/425), done.\nChecking connectivity... done. \n\n[root@centossrc]# cd bridge-utils\n[root@centos bridge-utils]# autoconf\n[root@centos bridge-utils]# ./configure && make && make install\n[root@centos bridge-utils]# brctl --version\nbridge-utils, 1.5\n[root@centos bridge-utils]#\n\n```", "```\nroot@ubuntu:/usr/src/bridge-utils# brctl\nUsage: brctl [commands]\ncommands:\n addbr  <bridge>    add bridge\n delbr  <bridge>    delete bridge\n addif  <bridge><device>  add interface to bridge\n delif  <bridge><device>  delete interface from bridge\n hairpin     <bridge><port> {on|off}  turn hairpin on/off\n setageing  <bridge><time>    set ageing time\n setbridgeprio  <bridge><prio>    set bridge priority\n setfd  <bridge><time>    set bridge forward delay\n sethello  <bridge><time>    set hello time\n setmaxage  <bridge><time>    set max message age\n setpathcost  <bridge><port><cost>  set path cost\n setportprio  <bridge><port><prio>  set port priority\n show  [ <bridge> ]    show a list of bridges\n showmacs  <bridge>    show a list of mac addrs\n showstp  <bridge>    show bridge stp info\n stp  <bridge> {on|off}  turn stp on/off\nroot@ubuntu:/usr/src/bridge-utils#\n\n```", "```\nroot@ubuntu:~# apt-cache madison lxc\n lxc | 2.0.4-0ubuntu1~ubuntu14.04.1 | http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ trusty-backports/main amd64 Packages\nlxc | 1.0.8-0ubuntu0.3 | http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ trusty-updates/main amd64 Packages\nlxc | 1.0.7-0ubuntu0.7 | http://security.ubuntu.com/ubuntu/ trusty-security/main amd64 Packages\nlxc | 1.0.3-0ubuntu3 | http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ trusty/main amd64 Packages\nlxc | 1.0.3-0ubuntu3 | http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ trusty/main Sources\nlxc | 1.0.8-0ubuntu0.3 | http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ trusty-updates/main Sources\nlxc | 2.0.4-0ubuntu1~ubuntu14.04.1 | http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ trusty-backports/main Sources\nlxc | 1.0.7-0ubuntu0.7 | http://security.ubuntu.com/ubuntu/ trusty-security/main Sources\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:/usr/src/bridge-utils# apt-get install -y lxc=2.0.4-0ubuntu1~ubuntu14.04.1 lxc1=2.0.4-0ubuntu1~ubuntu14.04.1 liblxc1=2.0.4-0ubuntu1~ubuntu14.04.1 python3-lxc=2.0.4-0ubuntu1~ubuntu14.04.1 cgroup-lite=1.11~ubuntu14.04.2 lxc-templates=2.0.4-0ubuntu1~ubuntu14.04.1\n...\nSetting up lxc1 (2.0.4-0ubuntu1~ubuntu14.04.1) ...\nlxc-net start/running\nSetting up lxc dnsmasq configuration.\n...\nroot@ubuntu:/usr/src/bridge-utils#\n\n```", "```\nroot@ubuntu:/usr/src/bridge-utils# service lxc-net status\nlxc-net start/running\nroot@ubuntu:/usr/src/bridge-utils#\n\n```", "```\nroot@ubuntu:/usr/src/bridge-utils# cat /etc/init/lxc-net.conf\ndescription \"lxc network\"\nauthor \"Serge Hallyn<serge.hallyn@canonical.com>\"\nstart on starting lxc\nstop on stopped lxc\npre-start exec /usr/lib/x86_64-linux-gnu/lxc/lxc-net start\npost-stop exec /usr/lib/x86_64-linux-gnu/lxc/lxc-net stop\nroot@ubuntu:/usr/src/bridge-utils#\n\n```", "```\nroot@ubuntu:/usr/src/bridge-utils# head -24 /usr/lib/x86_64-linux-gnu/lxc/lxc-net\n#!/bin/sh -\ndistrosysconfdir=\"/etc/default\"\nvarrun=\"/run/lxc\"\nvarlib=\"/var/lib\"\n# These can be overridden in /etc/default/lxc\n#   or in /etc/default/lxc-net\nUSE_LXC_BRIDGE=\"true\"\nLXC_BRIDGE=\"lxcbr0\"\nLXC_ADDR=\"10.0.3.1\"\nLXC_NETMASK=\"255.255.255.0\"\nLXC_NETWORK=\"10.0.3.0/24\"\nLXC_DHCP_RANGE=\"10.0.3.2,10.0.3.254\"\nLXC_DHCP_MAX=\"253\"\nLXC_DHCP_CONFILE=\"\"\nLXC_DOMAIN=\"\"\nLXC_IPV6_ADDR=\"\"\nLXC_IPV6_MASK=\"\"\nLXC_IPV6_NETWORK=\"\"\nLXC_IPV6_NAT=\"false\"\nroot@bridge:/usr/src/bridge-utils#\n\n```", "```\nroot@ubuntu:/usr/src/bridge-utils# cat /etc/default/lxc-net  | grep -vi ^#\nUSE_LXC_BRIDGE=\"true\"\nLXC_BRIDGE=\"lxcbr0\"\nLXC_ADDR=\"10.0.3.1\"\nLXC_NETMASK=\"255.255.255.0\"\nLXC_NETWORK=\"10.0.3.0/24\"\nLXC_DHCP_RANGE=\"10.0.3.2,10.0.3.254\"\nLXC_DHCP_MAX=\"253\"\nroot@ubuntu:/usr/src/bridge-utils#\n\n```", "```\nroot@ubuntu:/usr/src/bridge-utils# brctl show\nbridge name  bridge id           STP enabled  interfaces\nlxcbr0       8000.000000000000   no\nroot@ubuntu:/usr/src/bridge-utils#\n\n```", "```\n[root@centos ~]# yum install lxc lxc-templates\n[root@centos ~]# lxc-create --name bridge -t centos\nHost CPE ID from /etc/os-release: cpe:/o:centos:centos:7\nChecking cache download in /var/cache/lxc/centos/x86_64/7/rootfs ...\nDownloading centos minimal ...\nLoaded plugins: fastestmirror, langpacks\n...\nContainer rootfs and config have been created.\nEdit the config file to check/enable networking setup.\n...\n[root@centos ~]#\n\n```", "```\n[root@centos ~]# brctl show\n[root@centos ~]#\n\n```", "```\n[root@centos ~]# lxc-ls -f\nbridge \n[root@centos ~]# lxc-start --name bridge\nlxc-start: conf.c: instantiate_veth: 3105 failed to attach 'veth5TVOEO' to the bridge 'virbr0': No such device\nlxc-start: conf.c: lxc_create_network: 3388 failed to create netdev\nlxc-start: start.c: lxc_spawn: 841 failed to create the network\nlxc-start: start.c: __lxc_start: 1100 failed to spawn 'bridge'\nlxc-start: lxc_start.c: main: 341 The container failed to start.\nlxc-start: lxc_start.c: main: 345 Additional information can be obtained by setting the --logfile and --logpriority options.\n[root@centos ~]#\n\n```", "```\n[root@centos ~]# cat /etc/lxc/default.conf\nlxc.network.type = veth\nlxc.network.link = virbr0\nlxc.network.flags = up \n[root@centos ~]# cat /var/lib/lxc/bridge/config  | grep -vi \"#\" | sed '/^$/d' | grep network\nlxc.network.type = veth\nlxc.network.flags = up\nlxc.network.link = virbr0\nlxc.network.hwaddr = fe:6e:b6:af:24:2b \n[root@centos ~]#\n\n```", "```\n[root@centos ~]# brctl addbr virbr0\n\n```", "```\n[root@centos~]# lxc-start --name bridge\n[root@centos~]# brctl show\nbridge name    bridge id             STP enabled   interfaces\nvirbr0         8000.fe1af1cb0b2e     no            vethB6CRLW\n[root@centos ~]#\n\n```", "```\n[root@centos ~]# ifconfig vethB6CRLW\nvethB6CRLW: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>mtu 1500\ninet6 fe80::fc1a:f1ff:fecb:b2e  prefixlen 64  scopeid 0x20<link>\nether fe:1a:f1:cb:0b:2e  txqueuelen 1000  (Ethernet)\n RX packets 14  bytes 2700 (2.6 KiB)\n RX errors 0  dropped 0  overruns 0  frame 0\n TX packets 8  bytes 648 (648.0 B)\n TX errors 0  dropped 0 overruns 0  carrier 0  collisions \n        0\n[root@centos ~]#\n\n```", "```\nroot@bridge:/usr/src/bridge-utils# pgrep -lfaww dnsmasq\n12779 dnsmasq -u lxc-dnsmasq --strict-order --bind-interfaces \n--pid-file=/run/lxc/dnsmasq.pid --listen-address 10.0.3.1 \n--dhcp-range 10.0.3.2,10.0.3.254 --dhcp-lease-max=253 \n--dhcp-no-override --except-interface=lo --interface=lxcbr0 \n--dhcp-leasefile=/var/lib/misc/dnsmasq.lxcbr0.leases \n--dhcp-authoritative\nroot@bridge:/usr/src/bridge-utils#\n\n```", "```\nroot@bridge:/usr/src/bridge-utils# lxc-create -t ubuntu --name br1\nChecking cache download in /var/cache/lxc/trusty/rootfs-amd64 ...\nInstalling packages in template: apt-transport-https,ssh,vim,language-pack-en\nDownloading ubuntu trusty minimal ...\n...\n##\n# The default user is 'ubuntu' with password 'ubuntu'!\n# Use the 'sudo' command to run tasks as root in the container.\n##\nroot@bridge:/usr/src/bridge-utils# lxc-start --name br1\nroot@bridge:/usr/src/bridge-utils# lxc-info --name br1\nName:           br1\nState:          RUNNING\nPID:            1773\nIP:             10.0.3.65\nCPU use:        1.66 seconds\nBlkIO use:      160.00 KiB\nMemory use:     7.27 MiB\nKMem use:       0 bytes\nLink:           veth366R6F\n TX bytes:      1.85 KiB\nRX bytes:      1.59 KiB\nTotal bytes:   3.44 KiB \nroot@bridge:/usr/src/bridge-utils#\n\n```", "```\nroot@bridge:/usr/src/bridge-utils# brctl show\nbridge name  bridge id          STP enabled   interfaces\nlxcbr0       8000.fe7a39cee87c  no            veth366R6F\nroot@bridge:/usr/src/bridge-utils#\n\n```", "```\nroot@bridge:~# ifconfig\neth0      Link encap:EthernetHWaddr bc:76:4e:10:6a:31\ninet addr:10.208.131.214  Bcast:10.208.255.255  Mask:255.255.128.0\ninet6addr: fe80::be76:4eff:fe10:6a31/64 Scope:Link\n UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n RX packets:322 errors:0 dropped:0 overruns:0 frame:0\n TX packets:337 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:1000\n RX bytes:14812 (14.8 KB)  TX bytes:14782 (14.7 KB)\nlo        Link encap:Local Loopback\ninet addr:127.0.0.1  Mask:255.0.0.0\ninet6addr: ::1/128 Scope:Host\n UP LOOPBACK RUNNING  MTU:65536  Metric:1\n RX packets:9 errors:0 dropped:0 overruns:0 frame:0\n TX packets:9 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0\n RX bytes:668 (668.0 B)  TX bytes:668 (668.0 B)\nlxcbr0    Link encap:EthernetHWaddr fe:7a:39:ce:e8:7c\ninet addr:10.0.3.1  Bcast:0.0.0.0  Mask:255.255.255.0\ninet6addr: fe80::fc7a:39ff:fece:e87c/64 Scope:Link\n UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n RX packets:53 errors:0 dropped:0 overruns:0 frame:0\n TX packets:57 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0\n RX bytes:4268 (4.2 KB)  TX bytes:5450 (5.4 KB)\nveth366R6F Link encap:EthernetHWaddr fe:7a:39:ce:e8:7c\ninet6addr: fe80::fc7a:39ff:fece:e87c/64 Scope:Link\n UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n RX packets:53 errors:0 dropped:0 overruns:0 frame:0\n TX packets:58 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:1000\n RX bytes:5010 (5.0 KB)  TX bytes:5528 (5.5 KB)\nroot@bridge:~#\n\n```", "```\nroot@bridge:~# lxc-attach --name br1\nroot@br1:~# ifconfig\neth0      Link encap:EthernetHWaddr 00:16:3e:39:cf:e9\ninet addr:10.0.3.65  Bcast:10.0.3.255  Mask:255.255.255.0\ninet6addr: fe80::216:3eff:fe39:cfe9/64 Scope:Link\n UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n RX packets:58 errors:0 dropped:0 overruns:0 frame:0\n TX packets:53 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:1000\n RX bytes:5528 (5.5 KB)  TX bytes:5010 (5.0 KB)\nlo        Link encap:Local Loopback\ninet addr:127.0.0.1  Mask:255.0.0.0\ninet6addr: ::1/128 Scope:Host\n UP LOOPBACK RUNNING  MTU:65536  Metric:1\n RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0\n RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\nroot@br1:~# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.0.3.1        0.0.0.0         UG    0      0        0 eth0\n10.0.3.0        0.0.0.0         255.255.255.0   U     0      0        0 eth0\nroot@br1:~#\n\n```", "```\nroot@br1:~# cat /etc/network/interfaces\n# This file describes the network interfaces available on your system\n# and how to activate them. For more information, see interfaces(5).\n# The loopback network interface\nauto lo\niface lo inet loopback\nauto eth0\niface eth0 inetdhcp\nroot@br1:~#\n\n```", "```\nroot@bridge:/usr/src/bridge-utils# sed -i 's/LXC_DHCP_RANGE=\"10.0.3.2,10.0.3.254\"/LXC_DHCP_RANGE=\"10.0.3.100,10.0.3.254\"/g' /etc/default/lxc-net \nroot@bridge:/usr/src/bridge-utils# grep LXC_DHCP_RANGE /etc/default/lxc-net\nLXC_DHCP_RANGE=\"10.0.3.100,10.0.3.254\"\nroot@bridge:/usr/src/bridge-utils#\n\n```", "```\nroot@bridge:/usr/src/bridge-utils# pgrep -lfaww dnsmasq\n4215 dnsmasq -u lxc-dnsmasq --strict-order --bind-interfaces \n--pid-file=/run/lxc/dnsmasq.pid --listen-address 10.0.3.1 \n--dhcp-range 10.0.3.100,10.0.3.254 --dhcp-lease-max=253 \n--dhcp-no-override --except-interface=lo --interface=lxcbr0 --dhcp-leasefile=/var/lib/misc/dnsmasq.lxcbr0.leases \n--dhcp-authoritative\nroot@bridge:/usr/src/bridge-utils#\n\n```", "```\nroot@br1:~# ifconfig eth0 10.0.3.10 netmask 255.255.255.0\nroot@br1:~# route add default gw 10.0.3.1\nroot@br1:~# ping -c 3 10.0.3.1\nPING 10.0.3.1 (10.0.3.1) 56(84) bytes of data.\n64 bytes from 10.0.3.1: icmp_seq=1 ttl=64 time=0.053 ms\n64 bytes from 10.0.3.1: icmp_seq=2 ttl=64 time=0.073 ms\n64 bytes from 10.0.3.1: icmp_seq=3 ttl=64 time=0.074 ms \n--- 10.0.3.1 ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 1998ms\nrtt min/avg/max/mdev = 0.053/0.066/0.074/0.013 ms\nroot@br1:~#\n\n```", "```\nroot@br1:~# cat /etc/network/interfaces\nauto lo\niface lo inet loopback\nauto eth0\n iface eth0 inet static\n address 10.0.3.10\n netmask 255.255.255.0\n gateway 10.0.3.1\nroot@br1:~# exit\nroot@ubuntu:~#lxc-stop --name br1 && lxc-start --name br1\n\n```", "```\nroot@ubuntu:~# brctl showmacs lxcbr0\nport no   mac addr           is local?   ageing timer\n1         fe:7a:39:ce:e8:7c   yes         0.00\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# cat /var/lib/lxc/br1/config | grep -vi \"#\" | sed  '/^$/d' | grep -i network\nlxc.network.type = veth\nlxc.network.link = lxcbr0\nlxc.network.flags = up\nlxc.network.hwaddr = 00:16:3e:39:cf:e9\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# brctl show\nbridge name    bridge id          STP enabled  interfaces\nlxcbr0         8000.000000000000   no\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# ifconfig lxcbr0 down\nroot@ubuntu:~# brctl delbr lxcbr0\nroot@ubuntu:~# brctl show\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# brctl addbr lxcbr0\nroot@ubuntu:~# brctl show\nbridge name   bridge id          STP enabled  interfaces\nlxcbr0        8000.000000000000   no \nroot@ubuntu:~# brctl addif lxcbr0 veth366R6F\nroot@ubuntu:~# brctl show\nbridge name    bridge id          STP enabled  interfaces\nlxcbr0         8000.fe7a39cee87c   no          veth366R6F\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# ifconfig lxcrb0\nlxcrb0: error fetching interface information: Device not found \nroot@ubuntu:~# ifconfig lxcbr0 up\nroot@ubuntu:~# ifconfig lxcbr0\nlxcbr0    Link encap:EthernetHWaddr fe:7a:39:ce:e8:7c\ninet6addr: fe80::fc7a:39ff:fece:e87c/64 Scope:Link\n UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n TX packets:6 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0\n RX bytes:0 (0.0 B)  TX bytes:508 (508.0 B)\nroot@ubuntu:~#\n\n```", "```\nroot@bridge:~# ifconfig lxcbr0 10.0.3.1 netmask 255.255.255.0\nroot@bridge:~#\n\n```", "```\nroot@ubuntu:~# apt-get install openvswitch-switch\n...\nSetting up openvswitch-common (2.0.2-0ubuntu0.14.04.3) ...\nSetting up openvswitch-switch (2.0.2-0ubuntu0.14.04.3) ...\nopenvswitch-switch start/running\n... \nroot@ubuntu:~# ovs-vsctl --version\novs-vsctl (Open vSwitch) 2.0.2\nCompiled Dec  9 2015 14:08:08\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# lsmod | grep switch\nopenvswitch            70989  0\nvxlan                  37611  1 openvswitch\ngre                    13796  1 openvswitch\nlibcrc32c              12644  1 openvswitch\nroot@ubuntu:~#\n\n```", "```\nroot@bridge:~# ovs-vsctl show\n4cf17055-87a7-4b01-a8eb-4a551c842342\novs_version: \"2.0.2\"\nroot@bridge:~#\n\n```", "```\nroot@bridge:~# pgrep -lfa switch\n9424 ovsdb-server /etc/openvswitch/conf.db -vconsole:emer \n-vsyslog:err -vfile:info --remote=punix:/var/run/openvswitch/db.sock \n--private-key=db:Open_vSwitch,SSL,private_key \n--certificate=db:Open_vSwitch,SSL,certificate \n--bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert --no-chdir \n--log-file=/var/log/openvswitch/ovsdb-server.log \n--pidfile=/var/run/openvswitch/ovsdb-server.pid --detach --monitor\n9433 ovs-vswitchd: monitoring pid 9434 (healthy)\n9434 ovs-vswitchdunix:/var/run/openvswitch/db.sock -vconsole:emer \n-vsyslog:err -vfile:info --mlockall --no-chdir \n--log-file=/var/log/openvswitch/ovs-vswitchd.log \n--pidfile=/var/run/openvswitch/ovs-vswitchd.pid --detach --monitor\nroot@bridge:~#\n\n```", "```\nroot@ubuntu:~# ovsdb-client list-dbs\nOpen_vSwitch\nroot@ubuntu:~# ovsdb-client dump | grep table\nBridge table\nController table\nFlow_Sample_Collector_Set table\nFlow_Table table\nIPFIX table\nInterface table\nManager table\nMirror table\nNetFlow table\nOpen_vSwitch table\nPort table\nQoS table\nQueue table\nSSL table\nsFlow table\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# ovs-vsctl add-br lxcovs0\nroot@ubuntu:~# ovs-vsctl show\n4cf17055-87a7-4b01-a8eb-4a551c842342\n Bridge \"lxcovs0\"\n Port \"lxcovs0\"\n Interface \"lxcovs0\"\n type: internal\novs_version: \"2.0.2\"\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# ifconfig lxcovs0 192.168.0.1 netmask 255.255.255.0\nroot@ubuntu:~# ovs-vsctl add-port lxcovs0 veth366R6F\nroot@ubuntu:~# ovs-vsctl show\n4cf17055-87a7-4b01-a8eb-4a551c842342\nBridge \"lxcovs0\"\n Port \"lxcovs0\"\n Interface \"lxcovs0\"\n type: internal\n Port \"veth366R6F\"\n Interface \"veth366R6F\"\novs_version: \"2.0.2\"\nroot@ubuntu:~# \n\n```", "```\nroot@ubuntu:~# lxc-attach --name br1\nroot@br1:~# ifconfig eth0 192.168.0.10 netmask 255.255.255.0\nroot@br1:~# route add default gw 192.168.0.1\n\n```", "```\nroot@ubuntu:~# ifconfig lxcbr0 down\nroot@ubuntu:~# brctl delbr lxcbr0\nroot@ubuntu:~# modprobe -r bridge\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# vim /var/lib/lxc/br1/config\n# Common configuration\nlxc.include = /usr/share/lxc/config/ubuntu.common.conf\n# Container specific configuration\nlxc.rootfs = /var/lib/lxc/br1/rootfs\nlxc.rootfs.backend = dir\nlxc.utsname = br1\nlxc.arch = amd64\n# Network configuration\nlxc.network.type = none\nlxc.network.flags = up\n\n```", "```\nroot@ubuntu:~# lxc-stop --name br1 && lxc-start --name br1\nroot@ubuntu:~# lxc-attach --name br1\nroot@br1:~#\n\n```", "```\nroot@br1:~# ifconfig\neth0      Link encap:EthernetHWaddr bc:76:4e:10:6a:31\ninet addr:10.208.131.214  Bcast:10.208.255.255  Mask:255.255.128.0\ninet6addr: fe80::be76:4eff:fe10:6a31/64 Scope:Link\n UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n RX packets:35205 errors:0 dropped:0 overruns:0 frame:0\n TX packets:35251 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:1000\n RX bytes:1621243 (1.6 MB)  TX bytes:1486058 (1.4 MB)\nlo        Link encap:Local Loopback\ninet addr:127.0.0.1  Mask:255.0.0.0\ninet6addr: ::1/128 Scope:Host\n UP LOOPBACK RUNNING  MTU:65536  Metric:1\n RX packets:9 errors:0 dropped:0 overruns:0 frame:0\n TX packets:9 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0\n RX bytes:668 (668.0 B)  TX bytes:668 (668.0 B)\nlxcovs0   Link encap:EthernetHWaddr b2:e1:c6:c8:e6:40\ninet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0\ninet6addr: fe80::b0e1:c6ff:fec8:e640/64 Scope:Link\n UP BROADCAST RUNNING  MTU:1500  Metric:1\n RX packets:18557 errors:0 dropped:0 overruns:0 frame:0\n TX packets:678 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0\n RX bytes:6190048 (6.1 MB)  TX bytes:5641977 (5.6 MB) \nroot@br1:~# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         10.208.128.1    0.0.0.0         UG    0      0        0 eth0\n10.208.0.0      10.208.128.1    255.240.0.0     UG    0      0        0 eth0\n10.208.128.0    0.0.0.0         255.255.128.0   U     0      0        0 eth0\nroot@br1:~#\n\n```", "```\nroot@br1:~# ping 8.8.8.8\nPING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=48 time=11.7 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=48 time=11.8 ms\nroot@br1:~# exit\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# vim /var/lib/lxc/br1/config\n# Common configuration\nlxc.include = /usr/share/lxc/config/ubuntu.common.conf\n# Container specific configuration\nlxc.rootfs = /var/lib/lxc/br1/rootfs\nlxc.rootfs.backend = dir\nlxc.utsname = br1\nlxc.arch = amd64\n# Network configuration\nlxc.network.type = empty\nlxc.network.flags = up\n\n```", "```\nroot@ubuntu:~# lxc-stop --name br1 && sleep 5 && lxc-start --name br1\nroot@ubuntu:~# lxc-attach --name br1\nroot@br1:~#\n\n```", "```\nroot@br1:~# ifconfig\nlo        Link encap:Local Loopback\ninet addr:127.0.0.1  Mask:255.0.0.0\ninet6addr: ::1/128 Scope:Host\n UP LOOPBACK RUNNING  MTU:65536  Metric:1\n RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n collisions:0 txqueuelen:0\n RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\nroot@br1:~# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\nroot@br1:~# exit\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# cat /var/lib/lxc/br1/config\n# Common configuration\nlxc.include = /usr/share/lxc/config/ubuntu.common.conf\n# Container specific configuration\nlxc.rootfs = /var/lib/lxc/br1/rootfs\nlxc.rootfs.backend = dir\nlxc.utsname = br1\nlxc.arch = amd64\n# Network configuration\nlxc.network.type = veth\nlxc.network.link = lxcovs0\nlxc.network.flags = up\nlxc.network.hwaddr = 00:16:3e:39:cf:e9\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# iptables -L -n -t nat\nChain PREROUTING (policy ACCEPT)\ntarget     prot opt source               destination\nChain INPUT (policy ACCEPT)\ntarget     prot opt source               destination\nChain OUTPUT (policy ACCEPT)\ntarget     prot opt source               destination\nChain POSTROUTING (policy ACCEPT)\ntarget     prot opt source               destination\nMASQUERADE  all  --  10.0.3.0/24         !10.0.3.0/24\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# vim /var/lib/lxc/br1/config\n# Common configuration\nlxc.include = /usr/share/lxc/config/ubuntu.common.conf\n# Container specific configuration\nlxc.rootfs = /var/lib/lxc/br1/rootfs\nlxc.rootfs.backend = dir\nlxc.utsname = br1\nlxc.arch = amd64\n# Network configuration\nlxc.network.type = phys\nlxc.network.link = eth1\nlxc.network.ipv4 = 10.208.131.214/24\nlxc.network.hwaddr = bc:76:4e:10:6a:31\nlxc.network.flags = up\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# ip a s\n1: lo: <LOOPBACK,UP,LOWER_UP>mtu 65536 qdiscnoqueue state UNKNOWN group default\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscpfifo_fast state UP group default qlen 1000\n link/ether bc:76:4e:10:57:b8 brdff:ff:ff:ff:ff:ff\n inet 192.168.167.122/24 brd 192.237.167.255 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::be76:4eff:fe10:57b8/64 scope link\n valid_lft forever preferred_lft forever\n3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscpfifo_fast state UP group default qlen 1000\n link/ether bc:76:4e:10:6a:31 brdff:ff:ff:ff:ff:ff\n inet 10.208.131.214/17 brd 10.208.255.255 scope global eth1\n valid_lft forever preferred_lft forever\n inet6 fe80::be76:4eff:fe10:6a31/64 scope link\n valid_lft forever preferred_lft forever\n4: lxcbr0: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscnoqueue state UNKNOWN group default\n link/ether 52:26:ad:1d:1a:7f brdff:ff:ff:ff:ff:ff\n inet 10.0.3.1/24 scope global lxcbr0\n valid_lft forever preferred_lft forever\n inet6 fe80::5026:adff:fe1d:1a7f/64 scope link\n valid_lft forever preferred_lft forever\n5: ovs-system: <BROADCAST,MULTICAST>mtu 1500 qdiscnoop state DOWN group default\n link/ether c2:05:a1:f4:7f:89 brdff:ff:ff:ff:ff:ff\n6: lxcovs0: <BROADCAST,UP,LOWER_UP>mtu 1500 qdiscnoqueue state UNKNOWN group default\n link/ether b2:e1:c6:c8:e6:40 brdff:ff:ff:ff:ff:ff\n inet6 fe80::b0e1:c6ff:fec8:e640/64 scope link\n valid_lft forever preferred_lft forever\nroot@ubuntu:~# \n\n```", "```\nroot@ubuntu:~# lxc-stop --name br1 && lxc-start --name br1\nroot@ubuntu:~# ip a s\n1: lo: <LOOPBACK,UP,LOWER_UP>mtu 65536 qdiscnoqueue state UNKNOWN group default\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscpfifo_fast state UP group default qlen 1000\n link/ether bc:76:4e:10:57:b8 brdff:ff:ff:ff:ff:ff\n inet 192.168.167.122/24 brd 192.237.167.255 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::be76:4eff:fe10:57b8/64 scope link\n valid_lft forever preferred_lft forever\n4: lxcbr0: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscnoqueue state UNKNOWN group default\n link/ether 52:26:ad:1d:1a:7f brdff:ff:ff:ff:ff:ff\n inet 10.0.3.1/24 scope global lxcbr0\n valid_lft forever preferred_lft forever\n inet6 fe80::5026:adff:fe1d:1a7f/64 scope link\n valid_lft forever preferred_lft forever\n5: ovs-system: <BROADCAST,MULTICAST>mtu 1500 qdiscnoop state DOWN group default\n link/ether c2:05:a1:f4:7f:89 brdff:ff:ff:ff:ff:ff\n6: lxcovs0: <BROADCAST,UP,LOWER_UP>mtu 1500 qdiscnoqueue state UNKNOWN group default\n link/ether b2:e1:c6:c8:e6:40 brdff:ff:ff:ff:ff:ff\n inet6 fe80::b0e1:c6ff:fec8:e640/64 scope link\n valid_lft forever preferred_lft forever\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# lxc-attach --name br1\nroot@br1:~# ip a s\n1: lo: <LOOPBACK,UP,LOWER_UP>mtu 65536 qdiscnoqueue state UNKNOWN group default\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscpfifo_fast state UP group default qlen 1000\n link/ether bc:76:4e:10:6a:31 brdff:ff:ff:ff:ff:ff\n inet 10.208.131.214/24 brd 10.208.131.255 scope global eth1\n valid_lft forever preferred_lft forever\n inet6 fe80::be76:4eff:fe10:6a31/64 scope link\n valid_lft forever preferred_lft forever\nroot@br1:~#\n\n```", "```\nroot@ubuntu:~# cat /var/lib/lxc/br1/config\n# Common configuration\nlxc.include = /usr/share/lxc/config/ubuntu.common.conf\n# Container specific configuration\nlxc.rootfs = /var/lib/lxc/br1/rootfs\nlxc.rootfs.backend = dir\nlxc.utsname = br1\nlxc.arch = amd64\n# Network configuration\nlxc.network.type = vlan\nlxc.network.vlan.id = 100\nlxc.network.link = eth1\nlxc.network.flags = up\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# lxc-stop --name br1 && lxc-start --name br1\nroot@ubuntu:~# lxc-attach --name br1\nroot@br1:~#\n\n```", "```\nroot@br1:~# ip -d link show eth0\n10: eth0@if3: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscnoqueue state UP mode DEFAULT group default\n link/ether bc:76:4e:10:6a:31 brdff:ff:ff:ff:ff:ff promiscuity 0\nvlan protocol 802.1Q id 100 <REORDER_HDR>\nroot@br1:~#\n\n```", "```\nroot@br1:~# exit\nroot@ubuntu:~# ip -d link show eth1\n3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000\n link/ether bc:76:4e:10:6a:31 brd ff:ff:ff:ff:ff:ff promiscuity 0\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# cat /var/lib/lxc/br1/config\n# Common configuration\nlxc.include = /usr/share/lxc/config/ubuntu.common.conf\n# Container specific configuration\nlxc.rootfs = /var/lib/lxc/br1/rootfs\nlxc.rootfs.backend = dir\nlxc.utsname = br1\nlxc.arch = amd64\n# Network configuration\nlxc.network.type = macvlan\nlxc.network.macvlan.mode = bridge\nlxc.network.link = lxcmacvlan0\nlxc.network.flags = up\n\n```", "```\nroot@ubuntu:~# iplink add lxcmacvlan0 link eth1 type macvlan mode bridge\nroot@ubuntu:~# ifconfig lxcmacvlan0 up\nroot@ubuntu:~# ip -d link show lxcmacvlan0\n12: lxcmacvlan0@eth1: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscnoqueue state UNKNOWN mode DEFAULT group default\n link/ether ae:de:56:01:2f:b6 brdff:ff:ff:ff:ff:ff promiscuity 0\nmacvlan  mode bridge\nroot@ubuntu:~#\n\n```", "```\nroot@ubuntu:~# lxc-stop --name br1 && lxc-start --name br1\nroot@ubuntu:~# lxc-attach --name br1\nroot@br1:~# ip -d link show eth0\n13: eth0@if3: <BROADCAST,MULTICAST,UP,LOWER_UP>mtu 1500 qdiscnoqueue state UNKNOWN mode DEFAULT group default\n link/ether aa:6e:cb:74:0c:fc brdff:ff:ff:ff:ff:ff promiscuity 0\nmacvlan  mode bridge\nroot@br1:~#\n\n```"]