<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Creating and Configuring Storage Accounts</h1>
                </header>
            
            <article>
                
<p>In the previous chapter, we <span>covered how to configure <strong>role-based access control</strong> (<strong>RBAC</strong>) in Azure, how to create custom roles, </span><span>and how to implement and assign Azure policies.</span></p>
<p>This chapter will introduce a new objective in terms of implementing and managing<em> </em>storage<em>.</em> In this chapter, we are going to cover the different types of storage account, and you will learn which types are available for storing your data in Azure. We will also cover how to install Azure Storage Explorer, which can be used to manage data inside Azure storage accounts. We are going to look at how to secure data using <strong>shared access signatures</strong> (<strong>SAS</strong>) and how to implement storage replication to keep data safe.</p>
<p>The following topics will be covered in this chapter:</p>
<ul>
<li>Azure storage accounts</li>
<li>Creating and configuring a storage account</li>
<li>Installing and using Azure Storage Explorer</li>
<li>Configuring network access to the storage account</li>
<li>Generating and managing SAS</li>
<li>Implementing Azure storage replication</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>This chapter will uses<span> </span><span>Azure PowerShell </span><span>(<a href="https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0"/></span><span><a href="https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0">https://docs.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-1.8.0</a>) </span>for examples.</p>
<p>The source code for our sample application can be downloaded from <a href="https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter04">https://github.com/PacktPublishing/Microsoft-Azure-Administrator-Exam-Guide-AZ-103/tree/master/Chapter04</a><span>.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Azure storage accounts</h1>
                </header>
            
            <article>
                
<p class="mce-root">Azure offers a variety of types of storage accounts that can be used to store all sorts of files in Azure. You can store files, documents, and datasets, but also blobs and <strong><span>virtual hard disks</span></strong> (<strong>VHDs</strong>). There is even a type of storage account for archiving, specifically. In the next section, we are going to look at the different <span>types of storage accounts, and storage account replication types, </span>that Azure has to offer.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Storage account types</h1>
                </header>
            
            <article>
                
<p>Azure storage offers three different account types, which can be used for blob, table, file, and queue storage.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">General-purpose v1</h1>
                </header>
            
            <article>
                
<p>The <strong>general-purpose v1</strong> (<strong>GPv1</strong>) storage account is the oldest type of storage account. It offers storage for page blobs, block blobs, files, queues, and tables, but it is not the most cost-effective storage account type. It is the only storage account type that can be used for the classic deployment model. It doesn't support the latest features, such as access tiers.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Blob storage</h1>
                </header>
            
            <article>
                
<p>The blob storage account offers all the features of <kbd>StorageV2</kbd> accounts, except that it only supports block blobs (and append blobs). Page blobs are not supported. It offers access tiers, which consist of hot, cool, and archive storage, and which will be covered later in this chapter.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">General-purpose v2 (GPv2)</h1>
                </header>
            
            <article>
                
<p><kbd>StorageV2</kbd> is the newest type of storage account, and it combines the V1 storage with blob storage. It offers all the latest features, such as access tiers for blob storage, with a reduction in costs. Microsoft recommends using this account type over the V1 and blob storage account types.</p>
<p>V1 storage accounts can easily be upgraded to V2.</p>
<p class="mce-root"/>
<div class="packt_infobox">For more information on pricing and billing for these different account types, you can refer to the following pricing page: <a href="https://azure.microsoft.com/en-us/pricing/details/storage/">https://azure.microsoft.com/en-us/pricing/details/storage/</a>.<a href="https://azure.microsoft.com/en-us/pricing/details/storage/"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Storage replication types</h1>
                </header>
            
            <article>
                
<p>Data that is stored in Azure is always replicated to ensure durability and high availability. This way, it is protected from unplanned and planned events, such as network or power outages, natural disasters, and terrorism. It also ensures that, during these types of events, your storage account still meets the SLA. Data can be replicated within the same data center, across zonal data centers within the same region, and across different regions. These replication types are named <strong>locally redundant storage</strong> (<strong>LRS</strong>), <strong>zone redundant storage</strong> (<strong>ZRS</strong>), <strong>geo-redundant storage</strong> (<strong>GRS</strong>), and<strong> read-access geo-redundant storage</strong> (<strong>RA-GRS</strong>), and they will be covered in more detail in the upcoming sections.</p>
<div class="packt_tip">You choose a replication type when you create a new storage account. Storage accounts can be created inside the Azure portal, as well as from PowerShell or the CLI.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">LRS</h1>
                </header>
            
            <article>
                
<p>LRS is the cheapest option, and replicates the data three times within the same data center. When you make a write request to your storage account, it will be synchronously written during this request to all three replicas. The request is committed when the data is completely replicated. With LRS, the data will be replicated across multiple update domains and fault domains within one storage scale unit.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">ZRS</h1>
                </header>
            
            <article>
                
<p>ZRS is currently in preview, and is only available in US East 2 and US Central. It replicates three copies across two or three data centers. The data is written synchronously to all three replicas, in one or two regions. It also replicates the data three times inside the same data center where the data resided, just like LRS.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">GRS</h1>
                </header>
            
            <article>
                
<p>GRS replicates the data three times within the same region, like ZRS, and also replicates three copies to other regions asynchronously.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">RA-GRS</h1>
                </header>
            
            <article>
                
<p>RA-GRS provides georeplication across two regions, with read-only access to the data in the secondary location. This will <span>maximize</span> <span>the availability for your storage account. When you enable RA-GRS, your data will be available on a primary and a secondary endpoint for your storage account as well. The secondary endpoint will be similar to the primary endpoint, but it appends the <strong>secondary </strong>suffix<em> </em>to it. The access keys that are generated for your storage account can be used for both endpoints.</span></p>
<p><span>Now that we have covered the different storage replication types that are set when you create a storage account, we can look at the different storage accounts that Azure has to offer.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Azure blob storage</h1>
                </header>
            
            <article>
                
<p>Azure blob storage offers unstructured data storage in the cloud. It can store all kinds of data, such as documents, VHDs, images, and audio files. There are two types of blobs that you can create. One type is page blobs, which are used for the storage of disks. So, when you have a VHD that needs to be stored and attached to your VM, you will have to create a page blob. The maximum size of a page blob is 1 TB. </p>
<p>The other type is block blobs, which basically cover all the other types of data that you can store in Azure, such as files and documents. The maximum size of a block blob is 200 GB. However, there is also a third blob type named append blob, but this one is used internally by Azure and can't be used in order to store actual files. There are a couple of ways that you can copy blobs to your blob storage account. You can use the Azure portal (only one at a time) or Azure Storage Explorer, or you can copy your files programmatically by using .NET, PowerShell, the CLI, or by calling the REST API.</p>
<p> </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Access tiers</h1>
                </header>
            
            <article>
                
<p>Blob storage accounts use access tiers to determine how frequently the data is accessed. Based on this access tier, you will get billed. Azure offers three storage access tiers: hot, cool, and archive.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Hot</h1>
                </header>
            
            <article>
                
<p>The hot access tier is most suitable for storing data that's accessed frequently and data that is in active use. For instance, you would store images and style sheets for a website inside the hot access tier. The storage costs for this tier are higher than for the other access tiers, but you pay less for accessing the files.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Cool</h1>
                </header>
            
            <article>
                
<p>The cool access tier is the most suitable for storing data that is not accessed frequently (less than once in 30 days). Compared with the hot access tier, the cool tier has lower storage costs, but you pay more for accessing the files. This tier is suitable for storing backups and older content that is not viewed often.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Archive</h1>
                </header>
            
            <article>
                
<p>The archive storage tier is set on the blob level and not on the storage level. It has the lowest costs for storing data and the highest cost for accessing data compared to the hot and cool access tiers. This tier is for data that will remain in the archive for at least 180 days, and it will take a couple of hours of latency before it can be accessed. This tier is most suitable for long-term backups or compliance and archive data. A blob in the archive tier is offline and cannot be read (except for the metadata), copied, overwritten, or modified.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Azure file storage</h1>
                </header>
            
            <article>
                
<p>With Azure files, you can create file shares in the cloud. You can access your files using the <strong>Server Message Block</strong> (<strong>SMB</strong>) protocol, which is an industry standard and can be used on Linux, Windows, and macOS devices. Azure files can also be mounted as if it is a local drive on these same devices as well, and they can be cached for fast access on Windows Server using Azure File Sync.</p>
<p>File shares can be used across multiple machines, which makes them suitable for storing files or data that are accessed from multiple machines, such as tools for development machines, or configuration files or log data. Azure File Share is part of the Azure storage client libraries and offers an Azure storage REST API, which can be leveraged by developers in their solutions.</p>
<div class="packt_infobox">Details on how to configure Azure file storage will be covered in more detail in <a href="6bb56fd5-3785-42d2-b32c-4ba14333dca4.xhtml">Chapter 6</a>, <em>Configuring Azure Files and Implementing Azure Backup.</em></div>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Azure disk storage</h1>
                </header>
            
            <article>
                
<p>The disks that are used for virtual machines are stored in Azure blob storage as page blobs. Azure stores two disks for each virtual machine: the actual operating system (VHD) of the VM, and a temporary disk that is used for short-term storage. This data is erased when the VM is turned off or rebooted.</p>
<p>There are two different performance tiers that Azure offers: standard disk storage and premium disk storage.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Standard disk storage</h1>
                </header>
            
            <article>
                
<p>Standard disk storage offers HDD drives to store the data on, and it is the most cost-effective storage tier that you can choose. It can only use LRS or GRS in order to support high availability for your data and applications.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Premium disk storage</h1>
                </header>
            
            <article>
                
<p>With premium disk storage, your data is stored on SSDs. Not all Azure virtual machines series can use this type of storage. It can only be used with DS, DSv2, GS, LS, or FS series Azure virtual machines. It offers high-performance and low-latency disk support.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Unmanaged versus managed disks</h1>
                </header>
            
            <article>
                
<p>Managed disks automatically handle the storage account creation for you. With unmanaged disks, which are the traditional disks used for VMs, you need to create a storage account manually, and then select that storage account when you create the VM. With managed disks, this burden is handled for you by Azure. You select the disk type and the performance tier (standard or premium), and the managed disk is created. It also handles scaling automatically for you.</p>
<p>Managed disks are recommended by Microsoft over unmanaged disks.</p>
<p>Now that we have covered all the background information that you need to know about the different storage accounts, we are going to create a new storage account.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating and configuring storage accounts</h1>
                </header>
            
            <article>
                
<p>Before you can upload any data or files to Azure storage, a storage account needs to be created. This can be done using the Azure portal, PowerShell, the CLI, ARM templates, or Visual Studio.</p>
<p>In this demonstration, we are going to create a storage account with PowerShell:</p>
<ol>
<li>First, we need to log in to the Azure account:</li>
</ol>
<pre style="padding-left: 60px"><strong>Connect-AzAccount</strong></pre>
<ol start="2">
<li>If necessary, select the right subscription:</li>
</ol>
<pre style="padding-left: 60px"><strong>Select-AzSubscription -SubscriptionId "********-****-****-****-***********"</strong></pre>
<ol start="3">
<li>Create a resource group:</li>
</ol>
<pre style="padding-left: 60px"><strong>New-AzResourceGroup -Name PacktPubStorageAccount -Location EastUS</strong></pre>
<ol start="4">
<li>Create the storage account:</li>
</ol>
<pre style="padding-left: 60px"><strong>New-AzStorageAccount -ResourceGroupName PacktPubStorageAccount -AccountName packtpubstorage -Location "East US" -SkuName Standard_GRS -Kind StorageV2 -AccessTier Hot</strong></pre>
<div class="packt_tip">In this demonstration, we created a new storage account using PowerShell. If you are new to storage accounts, I highly recommend creating a storage account from the Azure portal as well. That way, you will see all the available storage account types, storage replication types, access tiers that you can choose from, the different performance tiers (standard or premium), and how this is all connected to each other.</div>
<p>Now that we have created a new storage account, we can install the Azure Storage Explorer tool.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing and using Azure Storage Explorer</h1>
                </header>
            
            <article>
                
<p>Azure Storage Explorer is a standalone application that can be used to easily work with the different types of data that are stored in an Azure storage account. You can upload, download, and manage files, queues, tables, blobs, data lake storage, and Cosmos DB entities using Azure Storage Explorer. Aside from that, you can also use the application to configure and manage <strong>c</strong><span><strong>ross-origin resource sharing</strong> (<strong>CORS</strong>) rules for your storage accounts. This application can be used on Windows, Linux, and macOS devices. </span></p>
<p>To install the application, you have to perform the following steps:</p>
<ol>
<li>Navigate to <a href="https://azure.microsoft.com/en-us/features/storage-explorer/">https://azure.microsoft.com/en-us/features/storage-explorer/</a> to download the application.</li>
<li>Once it has been downloaded, install the application.</li>
<li>When the application is installed, open the application. You will be prompted to connect to your Azure environment. There are a couple of options to choose from. You can add an Azure account by connecting to your Azure environment using your administrator credentials, use a shared access signature (which will be covered later in this chapter), use a storage account name and key, and you can select the  <span class="packt_screen">Attach to a local emulator </span><span>option if you so desire</span>. For this demonstration, keep the default option selected and click on <strong><span class="packt_screen">Sign in</span></strong>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/7cac97f1-6b7f-4293-a818-f0b6b370d15c.png"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Connecting to Azure storage</div>
<ol start="4">
<li>Provide your credentials and log in.</li>
</ol>
<ol start="5">
<li class="mce-root">All of your subscriptions will be added to the left-hand pane. Once this is done, click on <span class="packt_screen">Apply</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5db7adf4-c675-43f7-ada8-3502cb5286fd.png"/></div>
<div class="mce-root CDPAlignCenter CDPAlign packt_figref"><span>Applying the subscriptions</span></div>
<ol start="6">
<li>You can now drill down to the subscription and the storage account that we created in the first demonstration from the left-hand pane. Select the storage account. From there, you can access the blob containers, file shares, queues, and tables:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ed9a9783-5750-4cb0-b342-b5cf8c88ce93.png"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Storage account settings</div>
<ol start="7">
<li>To add some files to a blob container, we need to create a blob container in the storage account. Therefore, right-click on <strong><span class="packt_screen">Blob Containers</span></strong> in the left-hand menu and select <strong><span class="packt_screen">Create Blob Container</span>. </strong>Call the container <kbd>packtblobcontainer</kbd>; now, you can upload files to that container. Click on the <strong><span class="packt_screen">Upload</span></strong> button in the top menu, click on <span class="packt_screen"><strong>Upload</strong> <strong>files</strong></span>, and select some files from your local computer:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/9fd89af7-b6c6-42f6-91af-0328c7fa9452.png"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Uploading files to the blob container</div>
<p>You will see that the files will be uploaded to the blob container.</p>
<div class="packt_tip">If you navigate to the overview blade of the storage account in the Azure portal, you will see a button on the top menu that says <strong><span class="packt_screen">Open in explorer</span></strong>. This will open the Azure Storage Explorer, which can then be used to easily manage all the data that resides in the storage account. </div>
<p>Now that we have installed the Azure Storage Explorer tool and uploaded some files to a blob container, <span>we can configure the network access to the storage account.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring network access to the storage account</h1>
                </header>
            
            <article>
                
<p>You can secure your storage account to a specific set of supported networks. For this, you have to<span> configure network rules so that only applications that request data over the specific set of networks can access the storage account. When these network rules are effective, the application needs to use proper authorization on the request. This authorization can be provided by Azure Active Directory credentials for blobs and queues, with an SAS token or a valid account access key.</span></p>
<p>In the following demonstration, we are going to configure network access to the storage account that we created in the previous step. You can manage <span>storage accounts through the Azure portal, PowerShell, or CLIv2. </span>We are going to set this configuration from the Azure portal. Therefore, we have to perform the following steps:</p>
<ol>
<li><span>Navigate to the Azure portal by opening </span><a href="https://portal.azure.com">https://portal.azure.com</a>.</li>
<li>Go to the storage account that we created in the previous step.</li>
</ol>
<ol start="3">
<li>From the overview blade, in the left-hand menu, select <span><span class="packt_screen">Firewalls and virtual networks</span>:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/169ec110-5636-461f-a9cb-482e8defb766.png"/></div>
<div class="mce-root CDPAlignCenter CDPAlign packt_figref"><span>Storage account overview blade</span></div>
<ol start="4">
<li class="mce-root">To grant access to a virtual network with a new network rule, under <span class="packt_screen">Virtual Networks</span>, there are two options to choose from: <span class="packt_screen">All networks</span>, which allows traffic from all networks (both virtual and on-premises) and the internet to access the data, and <span class="packt_screen">Selected networks</span>. If you select this option, you can configure which networks are allowed to access the data from the storage account. Select <span class="packt_screen">Selected networks</span>. Then, you can select whether you want to add an existing virtual network or create a new one. For this demonstration, click on <span class="packt_screen">+ Add new virtual network</span>:<strong><br/></strong></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c795d728-49d3-4a47-9c90-d035f825adde.png"/></div>
<div class="mce-root CDPAlignCenter CDPAlign packt_figref"><span>Creating a new network</span></div>
<ol start="5">
<li class="mce-root CDPAlignLeft CDPAlign">A new blade will open, where you will have to specify the network configuration. Specify the configuration that's shown in the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/df5f1424-0949-471b-b6b7-0f8d149273a4.png" style="width:19.42em;height:47.25em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Network configuration settings</div>
<ol start="6">
<li>Click on <span class="packt_screen"><strong>Create</strong>.</span></li>
<li class="CDPAlignLeft CDPAlign">The virtual network will be added to the overview blade. This storage account is now secure and can be accessed only from applications and other resources that use this virtual network. In this same blade, you can also configure the firewall and only allow certain IP ranges from the internet or your on-premises environment:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/96f70967-da2a-41d8-af09-2949b10946ed.png"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign"><span>IP ranges</span></div>
<p>This concludes this demonstration. In the next demonstration, we are going to generate and manage SAS.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SAS and access keys</h1>
                </header>
            
            <article>
                
<p>By using an <span>SAS, you can provide a way to grant limited access to objects and data that are stored inside your storage account to the clients that connect to it. Using an SAS, you don't have to expose your access keys to the clients.</span></p>
<p>When you create a storage account, <span>primary and secondary access keys are created. Both of these keys can grant administrative access to your account and all the resources within it. Exposing those keys can also open your storage account to negligent or malicious use. SAS provides a safe alternative to this that will allow clients to read, write, and delete data in your storage account according to the permissions you've explicitly granted, and without the need for an account key.</span></p>
<p>In the next section, we're going to look at how to manage our access keys and how to generate an <span>SAS for our storage account.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Managing access keys</h1>
                </header>
            
            <article>
                
<p><span>To manage access keys</span><span>, perform the following steps:</span></p>
<ol>
<li><span>Navigate to the Azure portal by opening </span><a href="https://portal.azure.com">https://portal.azure.com</a>.</li>
<li>Again, go to the storage account that we created in the previous step.</li>
<li><span>Once the overview blade is open, under </span><strong><span class="packt_screen">Settings</span></strong><span>, select </span><strong><span><span class="packt_screen">Access keys</span></span></strong>.</li>
<li class="CDPAlignLeft CDPAlign">Here, you can see both of the access keys that were generated for you when the storage account was created. The reason that Azure created two access keys for you is because if you regenerate a new key, all of the <span>SAS that you created for this key will no longer work. </span>You can then let applications access that data using the secondary key, and once the key is regenerated, you can share the new key with your clients. You can generate new keys by clicking on the buttons next to both keys:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c71c7edc-1345-4c10-881c-285e2dad41be.png"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Access keys</div>
<ol start="5">
<li>There is also a connection string provided for each key which can be used by client applications to access the storage account.</li>
</ol>
<p>In the next section, we're going to generate an SAS for the access keys.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Generating an SAS</h1>
                </header>
            
            <article>
                
<p>In this demonstration, we are going to generate an <span>SAS for our blob store. </span>To generate an <span>SAS, perform the following steps:</span></p>
<ol>
<li><span>Navigate to the Azure portal by opening </span><a href="https://portal.azure.com">https://portal.azure.com</a>.</li>
<li>Again, go to the storage account that we created in the previous step.</li>
</ol>
<ol start="3">
<li>Once the overview blade is open, under <strong><span class="packt_screen">Settings</span></strong>, select<span class="packt_screen"> <strong><span>Shared access signature</span></strong></span>:<strong><span><br/></span></strong></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/9c46c1d8-06bf-4c1a-82d5-22f89e8c699b.png"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign"><span>Selecting Shared access signature</span></div>
<ol start="4">
<li class="CDPAlignLeft CDPAlign">To only allow the blob storage to be accessed, disable the file, queue, and table. Keep the default permissions, and then select an expiration date and time. You can also set the allowed protocols in here. At the bottom of the screen, you can apply these permissions to the different keys. Keep <span class="packt_screen"><strong>key1</strong></span> selected and click on <strong><span class="packt_screen">Generate SAS and connection string</span></strong>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c5a90381-5b67-4a60-8629-c0148c185678.png"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Generating SAS and connection string</div>
<ol start="5">
<li>You can now use this token to request the data from the blob storage. </li>
</ol>
<p>This concludes this demonstration. In the next section, we are going to look at how to implement Azure storage replication.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Implementing Azure storage replication</h1>
                </header>
            
            <article>
                
<p><span>The data in Azure is always replicated to ensure durability and high availability. Azure storage copies your data so that it is protected from planned and unplanned events, including transient hardware failures, network or power outages, and massive natural disasters. </span>We have already covered the different replication types that Azure offers for your storage accounts. </p>
<p>Storage replication can be set during the creation of the storage account. You can change the type of replication later as well by using Azure portal, PowerShell, or the CLI. To change this in the Azure portal, you have to perform the following steps:</p>
<ol>
<li><span>Navigate to Azure portal by opening </span><a href="https://portal.azure.com">https://portal.azure.com</a>.</li>
<li>Go to the storage account that we created in the previous step.</li>
<li>Under <strong><span class="packt_screen">Settings</span></strong><span>, select</span><span class="packt_screen"><span> </span><strong>Configuration</strong></span>. <span>In this blade, under</span> <strong><span class="packt_screen">Replication</span></strong>, you <span>can change the type of replication:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d828e0f4-4e3a-4ffc-8773-3717fdc7735b.png" style="width:37.17em;height:39.67em;"/></p>
<div class="packt_figref CDPAlignCenter CDPAlign">Changing the type of replication</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p><span>In this chapter, we covered the first part of the <em>Implementing and Managing Storage</em> objective. We covered the different types of storage that are available to us in Azure, and when we should use them. We also covered how we can manage our data using Azure Storage Explorer, and how we can secure our data using SAS. Finally, we covered how to replicate data from storage accounts.</span></p>
<p>In the next chapter, we'll cover the second part of this exam objective. In that chapter, we will cover how to import and export data to Azure.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Questions</h1>
                </header>
            
            <article>
                
<p><span>Answer the following questions to test your knowledge of the information in this chapter. You can find the answers in the <em>Assessments</em> section at the end of this book:</span></p>
<ol start="1">
<li>Can the Azure Storage Explorer application only be used on Windows devices?
<ul>
<li>Yes</li>
<li>No</li>
</ul>
</li>
<li>Can you configure storage accounts to be accessed from specific virtual networks, and not from on-premises networks?
<ul>
<li>Yes</li>
<li>No</li>
</ul>
</li>
<li>Can you only set the type of replication for your storage accounts during the creation of the storage account?
<ul>
<li>Yes</li>
<li>No</li>
</ul>
</li>
</ol>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Further reading</h1>
                </header>
            
            <article>
                
<p><span>You can check out the following links for more information about the topics that were covered in this chapter:</span></p>
<ul>
<li><em>Azure Storage Documentation</em>: <a href="https://docs.microsoft.com/en-us/azure/storage/">https://docs.microsoft.com/en-us/azure/storage/</a></li>
<li><em>Get started with Storage Explorer</em>: <a href="https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows">https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-manage-with-storage-explorer?tabs=windows</a></li>
<li><em>Configure Azure Storage firewalls and virtual networks</em>: <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-network-security">https://docs.microsoft.com/en-us/azure/storage/common/storage-network-security</a></li>
<li><em>Azure Storage redundancy</em>: <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy">https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy</a></li>
</ul>


            </article>

            
        </section>
    </body></html>