<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Chapter&#xA0;2.&#xA0;Managing Domains"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02" class="calibre1"/>Chapter 2. Managing Domains</h1></div></div></div><p class="calibre6">This chapter presents a number of recipes that will show you how to get started with creating and managing domains. You will also learn how domains can help you work as a team and collaborate on a project. The specific recipes of this chapter are:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Creating a domain using rhc</li><li class="listitem">Renaming a domain using rhc</li><li class="listitem">Viewing domain details using rhc</li><li class="listitem">Adding viewer members to a domain using rhc</li><li class="listitem">Adding an editor member to a domain using rhc</li><li class="listitem">Adding an admin member to a domain using rhc</li><li class="listitem">Viewing all the members in a domain using rhc</li><li class="listitem">Removing members from a domain using rhc</li><li class="listitem">Restricting gear sizes for a domain using rhc</li><li class="listitem">Leaving a domain using rhc</li><li class="listitem">Deleting a domain using rhc</li></ul></div></div>

<div class="book" title="Chapter&#xA0;2.&#xA0;Managing Domains">
<div class="book" title="Introduction"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_1"><a id="ch02lvl1sec23" class="calibre1"/>Introduction</h1></div></div></div><p class="calibre6">A <span class="strong"><strong class="calibre7">domain</strong></span><a id="id120" class="calibre1"/> represents a unique name for each user within which each user application must exist. OpenShift users cannot create an application until they have a valid domain. The domain name becomes a part of the application URL. For example, if your domain name is <code class="email">foo</code> and your application name is <code class="email">bar</code>, the application URL will be <code class="email">http://bar-foo.rhcloud.com</code>. Every OpenShift account must have at least one domain associated with it. The OpenShift Online free tier does not allow a user to create more than one domain, but you can create more than one domain in paid tiers. The domains make it possible for users to choose any valid name for their application. They allow two or more users to have the same name for their applications. For example, user A can have an application named <code class="email">bar</code> in domain <code class="email">foo</code>, and similarly, user B can also have an application named <code class="email">bar</code> in domain <code class="email">test</code>. Once a user has a valid domain, he/she can use any valid name for their application.</p><p class="calibre6">Team collaboration<a id="id121" class="calibre1"/> is one of the essential features of modern-day software development. Whether you are working on an open source project or an enterprise project, you need to collaborate and work with others. A group of people may work together to make a software project a success. A domain makes it possible to work as a team because you can add other users to your domain, giving them privileges to work with your application. This makes it very easy for different users to collaborate on a project and work together. You can add a user to your domain either as a viewer, editor, or an admin. Recipes 4 through 6 will cover these in detail.</p><p class="calibre6">A domain also helps us incorporate the concept of environments in our applications. You can have different domains for different environments. One can be used as a development environment, one as a quality assurance environment, and another for production. This allows you to give different people access to different domains. Your developers can have access to development and quality assurance domains but not to the production domain.</p></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Creating a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec24" class="calibre1"/>Creating a domain using rhc</h1></div></div></div><p class="calibre6">In the <span class="strong"><em class="calibre10">Creating OpenShift domains using the web console</em></span> recipe of <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, you learned how to create a domain using the web console. In this recipe, you will learn how to create a domain using the rhc command line.</p></div>

<div class="book" title="Creating a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec74" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this <a id="id122" class="calibre1"/>recipe, you will need to have rhc installed on your machine. Please <a id="id123" class="calibre1"/>refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions. If you are using OpenShift's free plan, you have to first delete the domain you created in the <span class="strong"><em class="calibre10">Creating OpenShift domains using the web console</em></span> recipe of <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, before continuing with this recipe. This is required because you cannot have more than one domain with OpenShift's free plan. To delete a domain, run the command shown as follows. This command is explained in the <span class="strong"><em class="calibre10">Deleting a domain using rhc</em></span> recipe in this chapter:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc delete-domain &lt;domain_name&gt; --force</strong></span>
</pre></div></div></div>

<div class="book" title="Creating a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec75" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To create a domain name, open a new command-line terminal and run the following command. Please provide a unique domain name.</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc create-domain --namespace &lt;unique_domain_ame&gt;</strong></span>
</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note07" class="calibre1"/>Note</h3><p class="calibre6">If you get the <code class="email">You may not have more than 1 domain</code> error when you run this command, delete the existing domain associated with your account. In the free tier, you cannot create more than one domain.</p></div></div></div>

<div class="book" title="Creating a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec76" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">You can use <a id="id124" class="calibre1"/>the <code class="email">rhc domain-create</code> or <code class="email">rhc create-domain</code> command<a id="id125" class="calibre1"/> to create a new domain name. The only required argument to create a domain is a unique alphanumeric name. Please note that a domain can contain, at most, 16 alphanumeric characters and cannot have spaces or symbols.</p><p class="calibre6">The <a id="id126" class="calibre1"/>output of the <code class="email">rhc create-domain</code> command is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc create-domain --namespace osbook</strong></span>
<span class="strong"><strong class="calibre7">Creating domain 'osbook' ... done</strong></span>
<span class="strong"><strong class="calibre7">You may now create an application using the 'rhc create-app' command</strong></span>
</pre></div><p class="calibre6">You can avoid <a id="id127" class="calibre1"/>using the <code class="email">--namespace</code> option by typing the following command. The <code class="email">rhc</code> command-line client is intelligent and understands that you are only providing the mandatory argument:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc domain-create osbook</strong></span>
</pre></div></div></div>

<div class="book" title="Creating a domain using rhc">
<div class="book" title="There's more..."><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec77" class="calibre1"/>There's more...</h2></div></div></div><p class="calibre6">All OpenShift commands <a id="id128" class="calibre1"/>have help associated with them. To understand the usage of the <code class="email">rhc create-domain</code> command and all the options available with it, you can use the <code class="email">-h</code> or <code class="email">--help</code> option. We will look at the other options in the later recipes.</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc create-domain --help</strong></span>
<span class="strong"><strong class="calibre7">Usage: rhc domain-create &lt;namespace&gt;</strong></span>
</pre></div></div></div>

<div class="book" title="Creating a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec78" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Creating OpenShift domains using the web console recipe</em></span> in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span></li><li class="listitem">The <span class="strong"><em class="calibre10">Renaming a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing domain details using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Deleting a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Renaming a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec25" class="calibre1"/>Renaming a domain using rhc</h1></div></div></div><p class="calibre6">Following the creation of a<a id="id129" class="calibre1"/> domain, you might need to rename it. Let's suppose<a id="id130" class="calibre1"/> you want to rename your existing name to reflect its environment. For instance, you may rename the <code class="email">osbook</code> domain name to <code class="email">devosbook</code> in order to indicate <code class="email">devosbook</code> as your development environment.</p></div>

<div class="book" title="Renaming a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec79" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p></div></div>

<div class="book" title="Renaming a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec80" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To rename a domain, open a new command-line terminal and run the following command. You should provide a unique, new domain name:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc rename-domain &lt;old_domain_name&gt; &lt;new_domain_name&gt;</strong></span>
</pre></div></div></div>

<div class="book" title="Renaming a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec81" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">To rename a domain, you have to first make sure there are no applications associated with it. If there are any applications associated with a domain, you have to first delete them. To learn how to delete an application, refer to the <span class="strong"><em class="calibre10">Deleting the application</em></span> recipe in<a class="calibre1" title="Chapter 3. Creating and Managing Applications" href="part0041_split_000.html#page"> Chapter 3</a>, <span class="strong"><em class="calibre10">Creating and Managing Applications</em></span>. The <code class="email">rename-domain</code> command first deletes the old domain before creating a new one using the new domain name. To rename the <code class="email">osbook</code> domain to <code class="email">devosbook</code>, you need to run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc domain-rename osbook devosbook</strong></span>
<span class="strong"><strong class="calibre7">Renaming domain 'osbook' to 'devosbook' ... done</strong></span>
</pre></div></div></div>

<div class="book" title="Renaming a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec82" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also rename a domain using the web console. Visit your domain web page<a id="id131" class="calibre1"/> at <a class="calibre1" href="https://openshift.redhat.com/app/console/domain/%7Bdomain-name%7D">https://openshift.redhat.com/app/console/domain/{domain-name}</a> and click on <span class="strong"><strong class="calibre7">Change</strong></span>, as shown in the following screenshot. Please replace <code class="email">{domain-name}</code> with your OpenShift account domain name.</p><div class="mediaobject"><img src="../images/00016.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p><p class="calibre6">This will direct you to <a id="id132" class="calibre1"/>another web page where you can enter the new <a id="id133" class="calibre1"/>domain name, as seen in the following screenshot. Enter the new domain name and click on <span class="strong"><strong class="calibre7">Save</strong></span>.</p><div class="mediaobject"><img src="../images/00017.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p></div></div>

<div class="book" title="Renaming a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec83" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Creating OpenShift domains using the web console</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span></li><li class="listitem">The <span class="strong"><em class="calibre10">Renaming a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing domain details using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Deleting a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Viewing domain details using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec26" class="calibre1"/>Viewing domain details using rhc</h1></div></div></div><p class="calibre6">In this recipe, you will learn how to view the details associated with a domain.</p></div>

<div class="book" title="Viewing domain details using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec84" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this<a id="id134" class="calibre1"/> recipe, you will need to have rhc installed on your <a id="id135" class="calibre1"/>machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p><p class="calibre6">Also, you will need to have a valid domain associated with your account. Refer to the <span class="strong"><em class="calibre10">Creating a domain using rhc</em></span> recipe in this chapter for instructions on how to create a new domain.</p></div></div>

<div class="book" title="Viewing domain details using rhc">
<div class="book" title="How to do it..."><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec85" class="calibre1"/>How to do it...</h2></div></div></div><p class="calibre6">To view domain details, open a new command-line terminal and run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc show-domain --namespace &lt;your domain name&gt;</strong></span>
</pre></div></div></div>

<div class="book" title="Viewing domain details using rhc">
<div class="book" title="How it works..."><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec86" class="calibre1"/>How it works...</h2></div></div></div><p class="calibre6">The <code class="email">rhc show-domain</code> command<a id="id136" class="calibre1"/> returns the details of a domain and its applications. The output of the command is shown as follows. The details include the domain name, the owner's e-mail ID, other domain members, and the information of all the applications within it:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc show-domain --namespace devosbook</strong></span>
<span class="strong"><strong class="calibre7">Domain devosbook (owned by openshift.cookbook@gmail.com)</strong></span>
<span class="strong"><strong class="calibre7">--------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Created: 9:49 AM</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">Members: shekhar.redhat@gmail.com (edit)</strong></span>

<span class="strong"><strong class="calibre7">blog @ http://blog-devosbook.rhcloud.com/ (uuid: 52d56620e0b8cd9911000166)</strong></span>
<span class="strong"><strong class="calibre7">--------------------------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Domain: devosbook</strong></span>
<span class="strong"><strong class="calibre7">Created: 11:30 AM</strong></span>
<span class="strong"><strong class="calibre7">Gears: 1 (defaults to small)</strong></span>
<span class="strong"><strong class="calibre7">Git URL: ssh://52d56620e0b8cd9911000166@blog-devosbook.rhcloud.com/~/git/blog.git/</strong></span>
<span class="strong"><strong class="calibre7">Initial Git URL: git://github.com/openshift/wordpress-example.git</strong></span>
<span class="strong"><strong class="calibre7">SSH: 52d56620e0b8cd9911000166@blog-devosbook.rhcloud.com</strong></span>
<span class="strong"><strong class="calibre7">Deployment: auto (on git push)</strong></span>

<span class="strong"><strong class="calibre7">php-5.3 (PHP 5.3)</strong></span>
<span class="strong"><strong class="calibre7">-----------------</strong></span>
<span class="strong"><strong class="calibre7">Gears: Located with mysql-5.1</strong></span>

<span class="strong"><strong class="calibre7">mysql-5.1 (MySQL 5.1)</strong></span>
<span class="strong"><strong class="calibre7">---------------------</strong></span>
<span class="strong"><strong class="calibre7">Gears: Located with php-5.3</strong></span>
<span class="strong"><strong class="calibre7">Connection URL: mysql://$OPENSHIFT_MYSQL_DB_HOST:$OPENSHIFT_MYSQL_DB_PORT/</strong></span>
<span class="strong"><strong class="calibre7">Database Name: blog</strong></span>
<span class="strong"><strong class="calibre7">Password: teic7xz7JUFv</strong></span>
<span class="strong"><strong class="calibre7">Username: adminiabcAWU</strong></span>

<span class="strong"><strong class="calibre7">You have 1 application in your domain.</strong></span>
</pre></div><p class="calibre6">The <code class="email">--namespace</code> option is optional. If you do not specify the <code class="email">--namespace</code> option, OpenShift will first try to find the domain name from the Git repository configuration file in the current directory. It considers the directory from which you run the command as an OpenShift application<a id="id137" class="calibre1"/> Git repository. It uses the <code class="email">git config --get rhc.domain-name</code> command to find the domain name. As we are not running the <a id="id138" class="calibre1"/>command inside an OpenShift application's Git repository, OpenShift will make a <code class="email">GET</code> REST API request to fetch all the domains associated with the user. The user details and authorization token information will be retrieved from the <code class="email">~/.openshift</code> folder. After finding all the domains associated with the user, a <code class="email">GET</code> REST API call will be made to fetch details for each domain. Finally, the output will be shown to the user.</p></div></div>

<div class="book" title="Viewing domain details using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec87" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also view all the domains you have access to by running the <code class="email">rhc list-domain</code> command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc list-domain</strong></span>
<span class="strong"><strong class="calibre7">Domain devosbook (owned by openshift.cookbook@gmail.com)</strong></span>
<span class="strong"><strong class="calibre7">--------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Created: 9:49 AM</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">Members: shekhar.redhat@gmail.com (edit)</strong></span>

<span class="strong"><strong class="calibre7">Domain ndtv123 (owned by shekhar.redhat@gmail.com)</strong></span>
<span class="strong"><strong class="calibre7">--------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Created: 12:08 PM</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">Members: openshift.cookbook@gmail.com (view)</strong></span>
</pre></div><p class="calibre6">As you can see, the <code class="email">openshift.cookbook@gmail.com</code> user has access to two domains. The <code class="email">openshift.cookbook@gmail.com</code> user owns the <code class="email">devosbook</code> domain, but it is the only member of the <code class="email">ndtv123</code> domain.</p><p class="calibre6">If a user only <a id="id139" class="calibre1"/>wants to view his/her domain, he/she can use the <code class="email">--mine</code> argument, as shown in the following command-line output. To view all the <a id="id140" class="calibre1"/>options available for a command, you can pass the <code class="email">--help</code> option:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc list-domain --mine</strong></span>
<span class="strong"><strong class="calibre7">Domain devosbook (owned by openshift.cookbook@gmail.com)</strong></span>
<span class="strong"><strong class="calibre7">--------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Created: 9:49 AM</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">Members: shekhar.redhat@gmail.com (edit)</strong></span>

<span class="strong"><strong class="calibre7">You have access to 1 domain.</strong></span>
</pre></div></div></div>

<div class="book" title="Viewing domain details using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec88" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Creating a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing domain details using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Deleting a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Adding viewer members to a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec27" class="calibre1"/>Adding viewer members to a domain using rhc</h1></div></div></div><p class="calibre6">Let's suppose you are a<a id="id141" class="calibre1"/> system administrator of your <a id="id142" class="calibre1"/>organization, where your job is to make sure all <a id="id143" class="calibre1"/>the production applications are running smoothly. Ideally, you would not want all the developers in your organization to have access to the production environment. Giving everyone access to the production environment is waiting for the inevitable to happen. What you should remember is that you can have different domains for different environments. The domain corresponding to the production deployment will be controlled by system administrators rather than developers. OpenShift allows you to give different access levels to a different group of people. You, along with other system administrators, can enjoy admin access to the production domain, whereas developers can only have viewer access, if required. Developers will be added to the production domain in the read-only mode. They can view the information about it and its applications, but they cannot make any changes. They also can't use Git to clone the source code or deploy changes. Viewers are also not allowed to SSH into the application gear.</p></div>

<div class="book" title="Adding viewer members to a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec89" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p><p class="calibre6">You will need two OpenShift accounts to work through this recipe. Please refer to the <span class="strong"><em class="calibre10">Creating an OpenShift Online account</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for OpenShift account registration instructions.</p></div></div>

<div class="book" title="Adding viewer members to a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec90" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">Let's suppose we <a id="id144" class="calibre1"/>have two OpenShift users, <code class="email">openshift.cookbook@gmail.com</code> and <code class="email">openshift.cookbook.test@gmail.com</code>. You may want to add <code class="email">openshift.cookbook.test@gmail.com</code> as a viewer to the <code class="email">prodosbook</code> domain of <code class="email">openshift.cookbook@gmail.com</code>. The <code class="email">prodosbook</code> domain corresponds to the production environment of your application. To do this, execute the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc add-member openshift.cookbook.test@gmail.com --namespace prodosbook --role view</strong></span>
</pre></div></div></div>

<div class="book" title="Adding viewer members to a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec91" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The <code class="email">add-member</code> command<a id="id145" class="calibre1"/> allows<a id="id146" class="calibre1"/> you to add members to your domain. A <a id="id147" class="calibre1"/>user can be added to one of the three roles: <code class="email">view</code>, <code class="email">edit</code>, or <code class="email">admin</code>. In this recipe, we may want to add <code class="email">openshift.cookbook.test@gmail.com</code> as a viewer, so we use the <code class="email">--role</code> option to give the user the view role.</p><p class="calibre6">The syntax of the <code class="email">rhc add-member</code> command<a id="id148" class="calibre1"/> is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc add-member &lt;login&gt; --namespace &lt;namespace&gt; --role &lt;role&gt;</strong></span>
</pre></div><p class="calibre6">The breakup of the command is as follows:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><code class="email">login</code>: This is the e-mail ID or short name of the OpenShift account you want to add as a member</li><li class="listitem"><code class="email">namespace</code>: This is the domain name in which you want to add a member</li><li class="listitem"><code class="email">role</code>: This refers to the access level you want to give to a member</li></ul></div><p class="calibre6">You can view the added user by viewing the domain details:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc show-domain</strong></span>

<span class="strong"><strong class="calibre7">Domain prodosbook (owned by openshift.cookbook@gmail.com)</strong></span>
<span class="strong"><strong class="calibre7">-----------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Created: Jan 14 9:49 AM</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">Members: openshift.cookbook.test@gmail.com (view)</strong></span>

<span class="strong"><strong class="calibre7">blog @ http://blog-prodosbook.rhcloud.com/ (uuid: 52d681815973ca43d600009a)</strong></span>
<span class="strong"><strong class="calibre7">-----------------------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">// app details .. removed for brevity</strong></span>
<span class="strong"><strong class="calibre7">You have 1 application in your domain.</strong></span>
</pre></div><p class="calibre6">If the <code class="email">openshift.cookbook.test@gmail.com</code> user tries to clone the application to their local machine, they<a id="id149" class="calibre1"/> will receive the permission denied error <a id="id150" class="calibre1"/>shown<a id="id151" class="calibre1"/> as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc git-clone blog -l openshift.cookbook.test@gmail.com</strong></span>
<span class="strong"><strong class="calibre7">Cloning into 'blog'...</strong></span>
<span class="strong"><strong class="calibre7">Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</strong></span>
<span class="strong"><strong class="calibre7">fatal: The remote end hung up unexpectedly</strong></span>
<span class="strong"><strong class="calibre7">Unable to clone your repository. Called Git with: git clone</strong></span>
<span class="strong"><strong class="calibre7">ssh://52d681815973ca43d600009a@blog-prodosbook.rhcloud.com/~/git/blog.git/ "blog"</strong></span>
<span class="strong"><strong class="calibre7">You can also use the OpenShift account user id instead of the OpenShift login.</strong></span>
<span class="strong"><strong class="calibre7">$ rhc add-member --ids 52d6784e5004462a80000235 --namespace prodosbook --role view</strong></span>
<span class="strong"><strong class="calibre7">To get the id for an OpenShift account, you can use the rhc account command.</strong></span>
<span class="strong"><strong class="calibre7">$ rhc account</strong></span>
<span class="strong"><strong class="calibre7">Login openshift.cookbook.test@gmail.com on openshift.redhat.com</strong></span>
<span class="strong"><strong class="calibre7">---------------------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">ID: 52d6784e5004462a80000235</strong></span>
<span class="strong"><strong class="calibre7">Plan: Free</strong></span>
<span class="strong"><strong class="calibre7">Gears Used: 0</strong></span>
<span class="strong"><strong class="calibre7">Gears Allowed: 3</strong></span>
<span class="strong"><strong class="calibre7">Domains Allowed: 1</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">SSL Certificates: no</strong></span>
</pre></div><p class="calibre6">You can also add multiple members to your domain in one go, as shown:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc add-member openshift.cookbook.test@gmail.com shekhar.redhat@gmail.com --namespace prodosbook --role view</strong></span>
</pre></div><p class="calibre6">This also works for OpenShift account IDs as well by entering the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc member-add --ids 52d6784e5004462a80000235 52d6784e5004462a80000236 --namespace prodosbook --role view</strong></span>
</pre></div></div></div>

<div class="book" title="Adding viewer members to a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec92" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">The OpenShift web<a id="id152" class="calibre1"/> console also allows users to add members. You <a id="id153" class="calibre1"/>can do this by going to <a class="calibre1" href="https://openshift.redhat.com/app/console/domain/%7Bdomain-name%7D">https://openshift.redhat.com/app/console/domain/{domain-name}</a> and replacing <code class="email">{domain-name}</code> with <a id="id154" class="calibre1"/>your account domain name. Then, click on the <span class="strong"><strong class="calibre7">Add members…</strong></span> web link:</p><div class="mediaobject"><img src="../images/00018.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p><p class="calibre6">Enter the user login details and the role you want to give to the user before clicking on <span class="strong"><strong class="calibre7">Save</strong></span>:</p><div class="mediaobject"><img src="../images/00019.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p></div></div>

<div class="book" title="Adding viewer members to a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec93" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Adding an editor member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an admin member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing all the members in a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Adding an editor member to a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec28" class="calibre1"/>Adding an editor member to a domain using rhc</h1></div></div></div><p class="calibre6">Imagine that you are<a id="id155" class="calibre1"/> leading a software development team that uses<a id="id156" class="calibre1"/> OpenShift for development. During <a id="id157" class="calibre1"/>development, you would like all the developers in your team to be able to create, delete, push, or even SSH into application gear. However, you would not want users to rename or delete a domain, as this might impact other developers in your team or other teams. Another thing you would not like is to allow developers to change gear sizes. You can restrict development domains to only use small gears to save money. In this scenario, you will give developers an editor role that gives them the freedom to work with applications but not domains.</p></div>

<div class="book" title="Adding an editor member to a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec94" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p><p class="calibre6">You will need two OpenShift accounts to work through this recipe. Please refer to the <span class="strong"><em class="calibre10">Creating an OpenShift online account</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for OpenShift account registration instructions.</p></div></div>

<div class="book" title="Adding an editor member to a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec95" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To add the <code class="email">openshift.cookbook.test@gmail.com</code> user as an editor to the <code class="email">devosbook</code> domain of <code class="email">openshift.cookbook@gmail.com</code>, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc add-member openshift.cookbook.test@gmail.com --namespace devosbook --role edit</strong></span>
</pre></div></div></div>

<div class="book" title="Adding an editor member to a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec96" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The edit role allows a user to perform the following actions on a domain:</p><div class="book"><ul class="itemizedlist"><li class="listitem">A user can create applications under the domain</li><li class="listitem">A user can delete applications under the domain</li><li class="listitem">A user can view logs of the application</li><li class="listitem">A user can perform other application-related actions such as start, stop, and restart</li><li class="listitem">A user can push the source code using Git</li><li class="listitem">A user can SSH into the application gear using SSH</li></ul></div><p class="calibre6">When you run the <code class="email">rhc add-member</code> command with the edit role, OpenShift will firstly add a new member to a domain with an edit role and then copy the user public SSH key to the OpenShift gear <code class="email">~/.ssh/authorized_keys</code> file. This allows an editor to perform SSH-related operations such as code deployment using Git and SSH to the application gear.</p><p class="calibre6">To check whether<a id="id158" class="calibre1"/> the editor has been added successfully, you<a id="id159" class="calibre1"/> can<a id="id160" class="calibre1"/> view the domain details:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc show-domain</strong></span>
<span class="strong"><strong class="calibre7">Domain devosbook (owned by openshift.cookbook@gmail.com)</strong></span>
<span class="strong"><strong class="calibre7">-----------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Created: Jan 14 9:49 AM</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">Members: openshift.cookbook.test@gmail.com (edit)</strong></span>
</pre></div></div></div>

<div class="book" title="Adding an editor member to a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec97" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also use the web console to add the editor to your application. Just follow the steps mentioned in the <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe in this chapter.</p></div></div>

<div class="book" title="Adding an editor member to a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec98" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an admin member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing all the members in a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Adding an admin member to a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec29" class="calibre1"/>Adding an admin member to a domain using rhc</h1></div></div></div><p class="calibre6">Consider a situation <a id="id161" class="calibre1"/>where a new system administrator joins your <a id="id162" class="calibre1"/>team. As the new system admin is also responsible<a id="id163" class="calibre1"/> for making sure your production apps are running smoothly, you would like to add the new system admin as an administrator. You can do this by giving the new user an admin role.</p></div>

<div class="book" title="Adding an admin member to a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec99" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p><p class="calibre6">You will need two OpenShift accounts to work through this recipe. Please refer to the <span class="strong"><em class="calibre10">Creating an OpenShift Online account</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for OpenShift account registration instructions.</p></div></div>

<div class="book" title="Adding an admin member to a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec100" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To add <a id="id164" class="calibre1"/>the <code class="email">openshift.cookbook.test@gmail.com</code> user<a id="id165" class="calibre1"/> as an administrator to <code class="email">prodosbook</code> of the <code class="email">&lt;<a class="calibre1" href="mailto:openshift.cookbook@gmail.com">openshift.cookbook@gmail.com</a>&gt;</code> domain, run the following <a id="id166" class="calibre1"/>command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc add-member openshift.cookbook.test@gmail.com --namespace osbook --role admin</strong></span>
</pre></div></div></div>

<div class="book" title="Adding an admin member to a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec101" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The admin role allows a user to perform the following actions on a domain:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Everything an editor can do such as performing actions related to applications</li><li class="listitem">Perform operations on a domain such as adding members to a domain</li></ul></div><p class="calibre6">When you run the <code class="email">rhc add-member</code> command with an admin role, OpenShift will add a new member to a domain with an admin role and then copy the public SSH key to the OpenShift gear <code class="email">~/.ssh/authorized_keys</code> file. This allows an editor to perform SSH-related operations.</p><p class="calibre6">To check whether the administrator has been added successfully, you can view the domain details by inserting the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc domain-show</strong></span>

<span class="strong"><strong class="calibre7">Domain prodosbook (owned by openshift.cookbook@gmail.com)</strong></span>
<span class="strong"><strong class="calibre7">-----------------------------------------------------</strong></span>
<span class="strong"><strong class="calibre7">Created: Jan 14 9:49 AM</strong></span>
<span class="strong"><strong class="calibre7">Allowed Gear Sizes: small</strong></span>
<span class="strong"><strong class="calibre7">Members: openshift.cookbook+test@gmail.com (admin)</strong></span>
</pre></div></div></div>

<div class="book" title="Adding an admin member to a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec102" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also use the web console to add the editor to your application. Just follow the steps mentioned in the <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe in this chapter.</p></div></div>

<div class="book" title="Adding an admin member to a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec103" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an admin member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing all the members in a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Viewing all the members in a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec30" class="calibre1"/>Viewing all the members in a domain using rhc</h1></div></div></div><p class="calibre6">There may be a situation <a id="id167" class="calibre1"/>when you want to view all the members <a id="id168" class="calibre1"/>in a domain. If so, you should follow this<a id="id169" class="calibre1"/> recipe.</p></div>

<div class="book" title="Viewing all the members in a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec104" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p><p class="calibre6">You will need two OpenShift accounts to work through this recipe. Please refer to the <span class="strong"><em class="calibre10">Creating an OpenShift Online account</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for OpenShift account registration instructions.</p></div></div>

<div class="book" title="Viewing all the members in a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec105" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To view all the members added to the <code class="email">osbook</code> domain, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc list-member --namespace osbook</strong></span>
</pre></div></div></div>

<div class="book" title="Viewing all the members in a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec106" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The result of the <code class="email">rhc list-member</code> command<a id="id170" class="calibre1"/> is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">Login Role</strong></span>
<span class="strong"><strong class="calibre7">--------------------------------- -------------</strong></span>
<span class="strong"><strong class="calibre7">openshift.cookbook@gmail.com admin (owner)</strong></span>
<span class="strong"><strong class="calibre7">openshift.cookbook.test@gmail.com admin</strong></span>
</pre></div><p class="calibre6">The <code class="email">rhc list-member</code> command<a id="id171" class="calibre1"/> makes a <code class="email">GET</code> request to fetch all the information about the <code class="email">osbook</code> domain. The rhc client then parses the <span class="strong"><strong class="calibre7">JSON</strong></span><a id="id172" class="calibre1"/> response and shows the relevant <a id="id173" class="calibre1"/>information<a id="id174" class="calibre1"/> to the <a id="id175" class="calibre1"/>user.</p></div></div>

<div class="book" title="Viewing all the members in a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec107" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also use a shortcut command to fetch all the members in a domain:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc members --namespace osbook</strong></span>
</pre></div></div></div>

<div class="book" title="Viewing all the members in a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec108" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an admin member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing all the members in a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Removing members from a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec31" class="calibre1"/>Removing members from a domain using rhc</h1></div></div></div><p class="calibre6">Let's suppose you are a<a id="id176" class="calibre1"/> system admin and suddenly your application starts<a id="id177" class="calibre1"/> behaving weird. You looked at the logs but<a id="id178" class="calibre1"/> you were not able to understand them. To fix this issue, you had to give a developer access to look at the logs. The developer was able to understand the problem, and now you want to remove the developer membership.</p></div>

<div class="book" title="Removing members from a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec109" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p><p class="calibre6">You will need two OpenShift accounts to work through this recipe. Please refer to the <span class="strong"><em class="calibre10">Creating an OpenShift Online account</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for OpenShift account registration instructions.</p></div></div>

<div class="book" title="Removing members from a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec110" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To remove the <code class="email">openshift.cookbook.test@gmail.com</code> user from the <code class="email">osbook</code> domain of <code class="email">&lt;<a class="calibre1" href="mailto:openshift.cookbook@gmail.com">openshift.cookbook@gmail.com</a>&gt;</code>, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc remove-member openshift.cookbook.test@gmail.com --namespace osbook</strong></span>
</pre></div></div></div>

<div class="book" title="Removing members from a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec111" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The <code class="email">rhc member-remove</code> command<a id="id179" class="calibre1"/> does two things:</p><div class="book"><ul class="itemizedlist"><li class="listitem">It removes the <code class="email">openshift.cookbook.test@gmail.com</code> public SSH key from the authorized keys registry so that <code class="email">openshift.cookbook.test@gmail.com</code> can't perform SSH operations such as <code class="email">git clone</code> and SSH into application gears.</li><li class="listitem">It removes the <code class="email">openshift.cookbooktest@gmail.com</code> member from the <code class="email">osbook</code> domain.</li></ul></div><p class="calibre6">You can<a id="id180" class="calibre1"/> verify<a id="id181" class="calibre1"/> that <code class="email">openshift.cookbook.test@gmail.com</code> is removed from the members' list by inserting the <a id="id182" class="calibre1"/>following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc members --namespace osbook</strong></span>
<span class="strong"><strong class="calibre7">Login Role</strong></span>
<span class="strong"><strong class="calibre7">---------------------------- -------------</strong></span>
<span class="strong"><strong class="calibre7">openshift.cookbook@gmail.com admin (owner)</strong></span>
</pre></div></div></div>

<div class="book" title="Removing members from a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec112" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can remove all the members from a domain by using the <code class="email">--all</code> flag:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc remove-member --all --namespace osbook</strong></span>
</pre></div></div></div>

<div class="book" title="Removing members from a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec113" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an admin member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing all the members in a domain using rhc</em></span> recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Restricting gear sizes for a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec32" class="calibre1"/>Restricting gear sizes for a domain using rhc</h1></div></div></div><p class="calibre6">As you start using different <a id="id183" class="calibre1"/>domains for different environments, you <a id="id184" class="calibre1"/>will feel the need to restrict gear sizes for different<a id="id185" class="calibre1"/> domains. In particular, you would like to use small gears for development and large gears for production. When you create an application, you can specify the gear size for that application. This does not help much as it applies only to that application. To avoid using large gears for development, you would want to restrict the development domain only to small gears.</p></div>

<div class="book" title="Restricting gear sizes for a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec114" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p></div></div>

<div class="book" title="Restricting gear sizes for a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec115" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To restrict the <code class="email">devosbook</code> domain to only small gears, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc configure-domain --allowed-gear-sizes small --namespace devosbook</strong></span>
</pre></div></div></div>

<div class="book" title="Restricting gear sizes for a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec116" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">By default, when <a id="id186" class="calibre1"/>you create a new domain, it gains access to all the <a id="id187" class="calibre1"/>gear sizes available for your account. When you <a id="id188" class="calibre1"/>sign up for a free account, you receive access to only small gears, meaning what you can do is limited. However, in the commercial version, you can get access to bigger gear sizes. The <code class="email">rhc configure-domain</code> command allows you to restrict a domain to specific gear sizes.</p><p class="calibre6">The <code class="email">rhc configure-domain</code> command<a id="id189" class="calibre1"/> requires you to specify a list of gear sizes you want to allow in a domain. The namespace is optional. If you do not specify a domain name, the domain associated with the user specified in <code class="email">~/.openshift/express.conf</code> will be configured. You can also specify multiple gear sizes:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc configure-domain --allowed-gear-sizes small,medium --namespace devosbook</strong></span>
</pre></div></div></div>

<div class="book" title="Restricting gear sizes for a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec117" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">You can also configure a domain to not allow<a id="id190" class="calibre1"/> any application creation by using the <code class="email">--no-allowed-gear-sizes</code> option. You will use this option to disallow application creation for a domain or to block a domain name for later use. For example, I could create another domain, <code class="email">osbook2</code>, for the second version of this book and configure it with the<code class="email">--no-allowed-gear-sizes</code> option:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc configure-domain --no-allowed-gear-sizes --namespace osbook</strong></span>
</pre></div></div></div>

<div class="book" title="Restricting gear sizes for a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec118" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an admin member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing all the members in a domain using</em></span> rhc recipe</li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Leaving a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec33" class="calibre1"/>Leaving a domain using rhc</h1></div></div></div><p class="calibre6">You have now become a <a id="id191" class="calibre1"/>member of a domain that corresponds to the production <a id="id192" class="calibre1"/>environment. You have completed your work and now you want to leave the production domain.</p></div>

<div class="book" title="Leaving a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec119" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete this recipe, you will need to have rhc installed on your machine. Please refer to the <span class="strong"><em class="calibre10">Installing the OpenShift rhc command-line client</em></span> recipe in <a class="calibre1" title="Chapter 1. Getting Started with OpenShift" href="part0014_split_000.html#page">Chapter 1</a>, <span class="strong"><em class="calibre10">Getting Started with OpenShift</em></span>, for instructions.</p></div></div>

<div class="book" title="Leaving a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec120" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">To leave a domain, you should run the following command. All the users are allowed to leave the domain they are a member of:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc leave-domain --namespace prodosbook -l openshift.cookbook.test@gmail.com</strong></span>
</pre></div></div></div>

<div class="book" title="Leaving a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec121" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The <code class="email">rhc leave-domain</code> command<a id="id193" class="calibre1"/> requires only one mandatory argument, which is <code class="email">--namespace</code>, the namespace you want to leave. It then removes the user from the domain members. The rhc client makes a REST delete request to remove the member from the namespace.</p></div></div>

<div class="book" title="Leaving a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec122" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Adding viewer members to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Adding an admin member to a domain using rhc</em></span> recipe</li><li class="listitem">The <span class="strong"><em class="calibre10">Viewing all the members in a domain using rhc</em></span> recipe<span class="strong"><em class="calibre10">s</em></span></li></ul></div></div></div>

<div id="page" style="height:0pt"/><div class="book" title="Deleting a domain using rhc"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec34" class="calibre1"/>Deleting a domain using rhc</h1></div></div></div><p class="calibre6">You created a domain<a id="id194" class="calibre1"/> for testing and now you no longer require it. Naturally, you <a id="id195" class="calibre1"/>would like to delete the domain.</p></div>

<div class="book" title="Deleting a domain using rhc">
<div class="book" title="Getting ready"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch02lvl2sec123" class="calibre1"/>Getting ready</h2></div></div></div><p class="calibre6">To complete the steps in this recipe, you will need rhc to be installed on your machine.</p></div></div>

<div class="book" title="Deleting a domain using rhc">
<div class="book" title="How to do it…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch02lvl2sec124" class="calibre1"/>How to do it…</h2></div></div></div><p class="calibre6">You should run the following command to delete a domain:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc delete-domain --namespace testosbook</strong></span>
</pre></div><div class="informalexample" title="Note"><h3 class="title2"><a id="note08" class="calibre1"/>Note</h3><p class="calibre6">Once the domain is deleted, there is no way to undo it. So, please use this command with precaution.</p></div></div></div>

<div class="book" title="Deleting a domain using rhc">
<div class="book" title="How it works…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch02lvl2sec125" class="calibre1"/>How it works…</h2></div></div></div><p class="calibre6">The <code class="email">rhc delete-domain</code> command<a id="id196" class="calibre1"/> will delete the domain by making a <a id="id197" class="calibre1"/>REST delete call to the OpenShift service. If your <a id="id198" class="calibre1"/>domain contains an application, you will not be able to delete the domain. Instead, you will get an error message:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong class="calibre7">$ rhc delete-domain --namespace testosbook</strong></span>
<span class="strong"><strong class="calibre7">Deleting domain 'testosbook' ... Domain contains applications. Delete applications first or set force to true.</strong></span>
</pre></div><p class="calibre6">Therefore, to delete a domain with an application, you have to pass a <code class="email">–force</code> flag. This will delete the domain and all the applications associated with it.</p></div></div>

<div class="book" title="Deleting a domain using rhc">
<div class="book" title="There's more…"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch02lvl2sec126" class="calibre1"/>There's more…</h2></div></div></div><p class="calibre6">The OpenShift web console also allows you to delete members from a domain. Go to <a class="calibre1" href="https://openshift.redhat.com/app/console/domain/%7Bdomain-name%7D">https://openshift.redhat.com/app/console/domain/{domain-name}</a> and replace <code class="email">{domain-name}</code> with the domain name in which you want to delete a member. Click on the <span class="strong"><strong class="calibre7">Delete this domain…</strong></span> button to delete it. This is shown in the following screenshot:</p><div class="mediaobject"><img src="../images/00020.jpeg" alt="There's more…" class="calibre8"/></div><p class="calibre9"> </p></div></div>

<div class="book" title="Deleting a domain using rhc">
<div class="book" title="See also"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch02lvl2sec127" class="calibre1"/>See also</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><em class="calibre10">Renaming a domain using rhc</em></span> recipe</li></ul></div></div></div></body></html>