<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Installing Proxmox VE"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Installing Proxmox VE</h1></div></div></div><p>This chapter is a guide to the installation of Proxmox VE on a physical machine. After completing this chapter, you will have a working PVE server for exploration, experimentation, and perhaps production, depending on your hardware configuration.</p><p>Along the way, the chapter will explain how to determine whether a computer's hardware satisfies PVE's minimal or optimal requirements. This chapter also helps us determine whether our configurations make the most of Intel or AMD's virtualization technologies. Finally, it will outline what to expect from the <span class="strong"><strong>Proxmox Installer</strong></span>, and how to initiate and, ultimately, complete the installation and configuration of a new Proxmox VE system.</p><p>The chapter is organized sequentially, moving from installation preparations through booting the new server:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Hardware requirements and recommendations for Proxmox VE</li><li class="listitem" style="list-style-type: disc">Downloading Proxmox VE</li><li class="listitem" style="list-style-type: disc">Ensuring hardware virtualization (or nested virtualization) is enabled</li><li class="listitem" style="list-style-type: disc">Preparing for the Proxmox VE Installer</li><li class="listitem" style="list-style-type: disc">Completing the Proxmox VE Installer</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note8"/>Note</h3><p>The term <span class="strong"><strong>bare metal</strong></span>, briefly introduced in the previous chapter, refers to a physical computer system that does not have an operating system or any other software installed.</p></div></div><div class="section" title="Hardware requirements and recommendations for Proxmox VE"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec11"/>Hardware requirements and recommendations for Proxmox VE</h1></div></div></div><p>Before starting installation activity, be sure your hardware at least meets PVE's minimum hardware requirements.</p><p>The official wiki provides recommended specifications for both evaluation and production scenarios (<a class="ulink" href="https://www.proxmox.com/en/proxmox-ve/requirements">https://www.proxmox.com/en/proxmox-ve/requirements</a>).</p><p>However, the <span class="emphasis"><em>For evaluation</em></span> specifications are a bit vague and quite restrictive; they are intended for testing only. You'll find that following them will provide what one needs to become familiar with the installation process and the web-based administration interface. You may even try to run a single, minimal virtual machine and container. <span class="emphasis"><em>If your goals and objectives are more substantive, however, you're very likely to become frustrated very quickly with these specs</em></span>.</p><p>The following is the configuration recommended by the Proxmox VE wiki page (<a class="ulink" href="https://pve.proxmox.com/wiki/Installation#Minimum_requirements.2C_for_evaluation">https://pve.proxmox.com/wiki/Installation#Minimum_requirements.2C_for_evaluation</a>) for very basic testing of PVE (release 4.1):</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Component</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Recommendation</strong></span>
</p>
</td></tr><tr><td>
<p>CPU</p>
</td><td>
<p>64-bit (Intel EMT64 or AMD64)</p>
</td></tr><tr><td>
<p>Motherboard</p>
</td><td>
<p>Intel VT/AMD-V capable CPU/Mainboard (for KVM Full Virtualization support)</p>
</td></tr><tr><td>
<p>Memory</p>
</td><td>
<p>Minimum 1 GB RAM</p>
</td></tr><tr><td>
<p>Storage</p>
</td><td>
<p>1 hard disk drive</p>
</td></tr><tr><td>
<p>Network Interface</p>
</td><td>
<p>A single NIC</p>
</td></tr></tbody></table></div><p>This vague, minimal suggestion is ideal for someone who's simply learning how to navigate PVE's web-based administration interface; perhaps it's enough to go through the motion of creating a virtual machine or an LXC container. Although the specs are vague, they offer just enough insight to suggest that a machine based on them will not have the resources to support learning the content offered in this text.</p><p>On the other hand, if you're fully intending to virtualize your datacenter with PVE, certainly use wiki's specs for a production server as a baseline; a couple of machines built around these specifications provide the resources to not only follow along with this text, but also to practice configuring a high-availability cluster. When you're comfortable with PVE, they'll be waiting to be put to use in production.</p><p>For production hardware, the PVE wiki recommends at least a dual- or quad-socket server (<a class="ulink" href="https://pve.proxmox.com/wiki/Installation#Recommended_system_requirements">https://pve.proxmox.com/wiki/Installation#Recommended_system_requirements</a>):</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Component</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Recommendation</strong></span>
</p>
</td></tr><tr><td>
<p>CPU</p>
</td><td>
<p>64-bit Intel EMT64 or AMD64.</p>
</td></tr><tr><td>
<p>Motherboard</p>
</td><td>
<p>Intel VT/AMD-V capable CPU/Mainboard (for KVM Full Virtualization support).</p>
</td></tr><tr><td>
<p>Storage</p>
</td><td>
<p>
</p><p>Hardware RAID with battery-protected write cache (BBU) or flash protection (software RAID is not supported).</p><p>
</p><p>Fast hard drives: 15k rpm SAS, Raid10 for best results.</p><p>
</p>
</td></tr><tr><td>
<p>RAM</p>
</td><td>
<p>8 GB RAM is good, more is better (increase as much as possible).</p>
</td></tr><tr><td>
<p>Network Interface Cards</p>
</td><td>
<p>Two Gigabit NICs (for bonding)—add additional NICs depending on your preferred storage technology and cluster setup.</p>
</td></tr><tr><td>
<p>Additional Needs</p>
</td><td>
<p>Fencing hardware (only needed for high availability).</p>
</td></tr></tbody></table></div><p>If you want to fully engage with this text, which stops short of establishing a high availability system or joining PVE nodes to create a cluster, consider a build such as the following: a simple Intel, single hexa-core or octo-core CPU configuration, a motherboard that supports Intel's virtualization extensions, and a single 1 TB hard disk drive (we'll be consequently restricted to EXT3 or EXT4 filesystems). In addition, you'll want at least 8 GB RAM and a Red Hat Enterprise Linux-compatible network interface card.</p><p>The following table offers a wish list of parts with which to build a machine that could be ideal not only for learning Proxmox VE, but also putting it to work in a small enterprise:</p><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td>
<p><span class="strong"><strong>Component</strong></span></p>
</td><td>
<p><span class="strong"><strong>Description</strong></span></p>
</td></tr><tr><td>
<p>CPU</p>
</td><td>
<p>Intel Xeon E5-2620 v3 Hexa-core (6 Core) 2.40 GHz Processor, Socket FCLGA2011 (learn more about this processor at <a class="ulink" href="http://ark.intel.com/products/83352/Intel-Xeon-Processor-E5-2620-v3-15M-Cache-2_40-GHz">http://ark.intel.com/products/83352/Intel-Xeon-Processor-E5-2620-v3-15M-Cache-2_40-GHz</a>).</p>
</td></tr><tr><td>
<p>Motherboard</p>
</td><td>
<p>
</p><p>Supermicro ATX DDR4 LGA 2011 Motherboards X10SRL-F-O (see specifications at <a class="ulink" href="http://www.supermicro.com/products/motherboard/xeon/c600/x10srl-f.cfm">http://www.supermicro.com/products/motherboard/xeon/c600/x10srl-f.cfm</a>).</p><p>
</p><p>For more processing power, consider Supermicro's ATX X10DAL-I, which supports two Xeon CPUs (<a class="ulink" href="http://www.supermicro.com/products/motherboard/Xeon/C600/X10DAL-i.cfm">http://www.supermicro.com/products/motherboard/Xeon/C600/X10DAL-i.cfm</a>).</p><p>
</p>
</td></tr><tr><td>
<p>RAM</p>
</td><td>
<p>Crucial 32 GB DDR4-2133 LRDIMM (CT6228561). (Learn more about this product at <a class="ulink" href="http://www.crucial.com/usa/en/x10srl-f/CT6228561">http://www.crucial.com/usa/en/x10srl-f/CT6228561</a>.)</p>
</td></tr><tr><td>
<p>Storage</p>
</td><td>
<p>1 TB Western Digital VelociRaptor WD1000DHTZ (<a class="ulink" href="http://www.wdc.com/wdproducts/library/SpecSheet/ENG/2879-701284.pdf">http://www.wdc.com/wdproducts/library/SpecSheet/ENG/2879-701284.pdf</a>).</p>
</td></tr></tbody></table></div><p>The do-it-yourself compromise described offers enough RAM and CPU power to host many virtual servers, both VMs and containers simultaneously, and is thus satisfactory for the tasks in chapters to come.</p><p>Alternatively, look to manufacturers such as Lenovo or Dell. Dell, for example, has at least three server-grade machines that are fully customizable starting points. Listed in order of increasing power and versatility, the following rack-mountable servers are highly flexible and very near ideal solutions. Lenovo has comparable products:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">PowerEdge R330 Server (<a class="ulink" href="http://www.dell.com/us/business/p/poweredge-r330/pd#TechSpec">http://www.dell.com/us/business/p/poweredge-r330/pd#TechSpec</a>)</li><li class="listitem" style="list-style-type: disc">Poweredge R430 Server (<a class="ulink" href="http://www.dell.com/us/business/p/poweredge-r430/pd#TechSpec">http://www.dell.com/us/business/p/poweredge-r430/pd#TechSpec</a>)</li><li class="listitem" style="list-style-type: disc">PowerEdge R730 Server (<a class="ulink" href="http://www.dell.com/us/business/p/poweredge-r730/pd#TechSpec">http://www.dell.com/us/business/p/poweredge-r730/pd#TechSpec</a>)</li></ul></div><p>Once a host system is in hand, downloading the Proxmox VE image in an ISO format is our first step towards a functional server.</p></div></div>
<div class="section" title="Downloading Proxmox VE"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec12"/>Downloading Proxmox VE</h1></div></div></div><p>An image of the most recent PVE release, 4.1, is available on the Internet via torrent or direct download. The complete ISO is just under 720 MB, and should ultimately be burned to a blank CD or DVD.</p><p>Follow these steps to download the torrent file:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Navigate to <a class="ulink" href="https://www.proxmox.com/en/downloads/category/iso-images-pve">https://www.proxmox.com/en/downloads/category/iso-images-pve</a> in your browser.</li><li class="listitem">Look for the <span class="strong"><strong>Proxmox VE 4.1 ISO Installer (BitTorrent)</strong></span> subheading.</li><li class="listitem">Click on the gray <span class="strong"><strong>Download</strong></span> button to start the download process.</li></ol></div><p>
</p><div class="mediaobject"><img src="graphics/image_02_001.png" alt="Downloading Proxmox VE"/><div class="caption"><p>Torrent download</p></div></div><p>
</p><p>To download directly, use your browser to navigate to the same page, <a class="ulink" href="https://www.proxmox.com/en/downloads/category/iso-images-pve">https://www.proxmox.com/en/downloads/category/iso-images-pve</a>, and look for the <span class="strong"><strong>Proxmox VE 4.1 ISO Installer</strong></span> subheading. Click on the grey <span class="strong"><strong>Download</strong></span> button to start the download.</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_002.png" alt="Downloading Proxmox VE"/><div class="caption"><p>Direct download</p></div></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note9"/>Note</h3><p>Note that if you're on an OS X or GNU/Linux workstation, you may choose, of course, to download the disk image from the command line with the <code class="literal">wget</code> (or <code class="literal">curl</code>) command. The following line—entered at the terminal—downloads the most recent Proxmox VE release on OS X and GNU/Linux systems to the system's <code class="literal">/tmp</code> directory. (Details correct as of December 2015; adjust the filename as necessary): <code class="literal"> wget http://download.proxmox.com/iso/proxmox-ve_4.1-2f9650d4-21.iso -O /tmp/proxmox-ve_4.1-2f9650d4-21.iso </code>
</p></div></div></div>
<div class="section" title="Verifying the downloaded image"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec13"/>Verifying the downloaded image</h1></div></div></div><p>In the interest of security and your own sanity, be sure to check the <code class="literal">md5sum</code> value of the downloaded PVE image to make sure it matches the value at <a class="ulink" href="http://download.proxmox.com/iso/MD5SUMS">http://download.proxmox.com/iso/MD5SUMS</a>. In the case of Proxmox VE 4.1, for example, the <code class="literal">md5sum</code> value is <code class="literal">00358ebcfeea1e33977e1be0fa2e02d3</code>.</p><p>For Ubuntu users, for instance, the following process can be used to verify that the downloaded PVE 4.1 image is as it should be.</p><p>Enter the following line in a terminal emulator:</p><pre class="programlisting">    md5sum /tmp/proxmox-ve_4.1-2f9650d4-21.iso&#13;</pre><p>The response should be as follows:</p><pre class="programlisting">    00358ebcfeea1e33977e1be0fa2e02d3  /tmp/proxmox-ve_4.1-2f9650d4-21.iso&#13;</pre><p>This response verifies that the <code class="literal">md5sum</code> value corresponds to the string value provided at <a class="ulink" href="http://download.proxmox.com/iso/MD5SUMS">http://download.proxmox.com/iso/MD5SUMS</a>.</p><p>Finally, write the ISO to a blank CD or a USB drive when the download is complete and the <code class="literal">md5sum</code> value is verified.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip10"/>Tip</h3><p>Steps to create a Proxmox VE bootable USB drive, after you have the ISO downloaded, are available at the Proxmox documentation at <a class="ulink" href="https://pve.proxmox.com/wiki/Install_from_USB_Stick">https://pve.proxmox.com/wiki/Install_from_USB_Stick</a>.</p></div></div></div>
<div class="section" title="Ensuring hardware virtualization extensions are installed"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec14"/>Ensuring hardware virtualization extensions are installed</h1></div></div></div><p>Next, you'll want to ensure that hardware virtualization extensions are enabled on the intended Proxmox VE host.</p><p>Assuming there's no operating system on the machine, it's very simple to check this with a Ubuntu Desktop LiveCD. Follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Download the Ubuntu LiveCD image from <a class="ulink" href="http://www.ubuntu.com/download/desktop">http://www.ubuntu.com/download/desktop</a> and burn it to a DVD.</li><li class="listitem">Boot the new machine from the Ubuntu LiveCD. (For more information on this process, visit <a class="ulink" href="https://help.ubuntu.com/community/LiveCD#How-To_LiveCD_Ubuntu">https://help.ubuntu.com/community/LiveCD#How-To_LiveCD_Ubuntu</a>.)</li><li class="listitem">Once the desktop is fully available, open the terminal emulator.</li><li class="listitem">For an Intel-based system, enter the following command in the terminal emulator: <code class="literal">egrep -c '(vmx|svm)' /proc/cpuinfo</code>.</li></ol></div><p>If hardware virtualization extensions are enabled, as is the hope, this command should simply return an integer equal to the number of CPU cores in the machine. If the command returns a 0, hardware virtualization extensions must be enabled in the Intel system's EFI/BIOS.</p><p>If your target system is built on the AMD technology, use the following command for a similar effect: <code class="literal">egrep -c ' lm ' /proc/cpuinfo</code>. Just as described previously, if the command returns a 0, virtualization extensions are not enabled yet. Hopefully, though, the command returns an integer equal to the CPU core count on the system; in this case, your machine is appropriately configured to make use of hardware virtualization technology.</p><div class="section" title="Enabling hardware virtualization extensions"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec10"/>Enabling hardware virtualization extensions</h2></div></div></div><p>If you discover hardware virtualization extensions are not enabled on your system, they must be enabled in EFI/BIOS.</p><p>If you're working with newer hardware, see that the <span class="strong"><strong>Virtualization Technology</strong></span> option in EFI is enabled; in most cases, you'll find this setting under <span class="strong"><strong>Advanced CPU Configuration</strong></span>.</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_003.png" alt="Enabling hardware virtualization extensions"/><div class="caption"><p>Enabling hardware virtualization technology in EFI/BIOS</p></div></div><p>
</p><p>On a machine without EFI, you'll likely find the appropriate setting, <span class="strong"><strong>Virtualization Technology</strong></span>, under <span class="strong"><strong>Advanced BIOS Features</strong></span> in the CMOS setup utility.</p></div></div>
<div class="section" title="Preparing for the Proxmox VE Installer"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec15"/>Preparing for the Proxmox VE Installer</h1></div></div></div><p>With virtualization extensions enabled and the installation media in hand, it is wise to prepare information the Proxmox Installer will want from you. Having the following information prepared before the Proxmox Installer gets started will help ensure that your configuration is completed with all the consideration and deliberation it deserves.</p><p>Have well-considered responses prepared for when you're prompted for the following information by the installer:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The target installation drive (any existing data on the drive will be permanently deleted)</li><li class="listitem" style="list-style-type: disc">The password for the root user</li><li class="listitem" style="list-style-type: disc">The administrator's e-mail address</li><li class="listitem" style="list-style-type: disc">The country</li><li class="listitem" style="list-style-type: disc">The time zone (expressed in this format: Region/City (Pacific/Honolulu, for example)</li><li class="listitem" style="list-style-type: disc">The keyboard layout (based on region)</li><li class="listitem" style="list-style-type: disc">Whether to use an EXT3 or an EXT4 filesystem (or if you've configured a machine with a RAID10 array, choose <code class="literal">zfs</code>)</li><li class="listitem" style="list-style-type: disc">A fully qualified domain name for the new server</li><li class="listitem" style="list-style-type: disc">The fixed IP address to be assigned to the Proxmox VE system</li><li class="listitem" style="list-style-type: disc">The IP address of the Internet gateway</li><li class="listitem" style="list-style-type: disc">The subnet mask for the network</li><li class="listitem" style="list-style-type: disc">The IP address of the DNS server you intend to use (one only)</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>Regionalization setting such as <span class="emphasis"><em>time zone</em></span> and <span class="emphasis"><em>keyboard layout</em></span> won't affect the language in which Proxmox VE's web-based administration interface communicates.</p><p>However, when logging in to the web interface of Proxmox VE 4.1, you'll have the opportunity to choose from among nineteen languages, including, for example, Farsi, Basque, and the two official forms of Norwegian: Bokmål and Nynorsk (<a class="ulink" href="https://www.proxmox.com/en/news/press-releases/proxmox-ve-3-4-released">https://www.proxmox.com/en/news/press-releases/proxmox-ve-3-4-released</a>).</p><p>For the command-line interface, you may choose from among the languages available in Debian. Clear steps for identifying the currently selected language and then changing it are provided by the Debian wiki at <a class="ulink" href="https://wiki.debian.org/ChangeLanguage">https://wiki.debian.org/ChangeLanguage</a>.</p></div></div></div>
<div class="section" title="Installing Proxmox VE"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec16"/>Installing Proxmox VE</h1></div></div></div><p>The Proxmox Installer takes us through the fundamental configuration details (much as Debian installer does), including the target install drive, locale and keyboard layout, root user credentials, and network configuration.</p><p>As the installer walks us through entering these details, it offers impressively clear and concise explanations of what it's asking for and why.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>A video of the full installation process, provided by the developers, is available on YouTube at <a class="ulink" href="https://www.youtube.com/watch?v=ckvPt1Bp9p0">https://www.youtube.com/watch?v=ckvPt1Bp9p0</a> (do note, however, that it was uploaded in 2011, when Proxmox VE relied on Debian 6).</p></div></div><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">To initiate the installation process, insert and boot from the Proxmox VE installation media.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip13"/>Tip</h3><p>To boot from the CD or USB flash drive you've prepared, power on the machine and watch closely for the first screen to appear. Most computers will display, however briefly, some variation of "Press <span class="emphasis"><em>F12</em></span> to choose a Boot Device" toward the bottom of the screen. Quickly press the specified key or combination of keys.</p><p>After a few moments, the monitor should display a menu with a list of boot device candidates. If you burned the Proxmox VE image to CD or DVD, instruct the machine to boot from the optical drive. Otherwise, choose to boot from the USB flash drive you created from the ISO.If your machine isn't clear regarding how to change boot options, consult the computer or motherboard manufacturer's documentation. For additional support getting started, see <span class="emphasis"><em>Before Installing Debain GNU/Linux</em></span> at <a class="ulink" href="https://www.debian.org/releases/stable/i386/ch03s06.html.en">https://www.debian.org/releases/stable/i386/ch03s06.html.en</a>.</p></div></div><p>After a few moments, the installer should start (as shown in the following screenshot).</p><p>Select <span class="strong"><strong>Install Proxmox VE</strong></span> to start the installer.</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_005.png" alt="Installing Proxmox VE"/></div><p>
</p></li><li class="listitem">The computer will now boot from the install media.<p>
</p><div class="mediaobject"><img src="graphics/image_02_006.png" alt="Installing Proxmox VE"/><div class="caption"><p>Booting to the PVE installer</p></div></div><p>
</p><p>The machine will soon boot into a mouse-driven graphical user environment as it begins to collect information. Before the installer really does its job, it asks you to agree to the terms of an <span class="strong"><strong>end-user license agreement</strong></span> (<span class="strong"><strong>EULA</strong></span>). If you find the terms acceptable, click on <span class="strong"><strong>I agree</strong></span> to continue with the installation process.</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_007.png" alt="Installing Proxmox VE"/><div class="caption"><p>Agreeing to the EULA</p></div></div><p>
</p></li><li class="listitem">In the next dialog, you're prompted to choose a target drive for the installation. In addition, this dialog provides an <span class="strong"><strong>Options</strong></span> button that offers an opportunity to choose the filesystem that best suits your needs. As pictured in the following screenshot, if you have a single drive, you're limited in your choice to <span class="strong"><strong>ext3</strong></span>, <span class="strong"><strong>ext4</strong></span>, or <span class="strong"><strong>xfs</strong></span>. Otherwise, you're expected to take advantage of <span class="strong"><strong>zfs</strong></span> and specify a RAID configuration:<p>
</p><div class="mediaobject"><img src="graphics/image_02_008.png" alt="Installing Proxmox VE"/><div class="caption"><p>Targeting a storage device and choosing a filesystem</p></div></div><p>
</p><p>Click on <span class="strong"><strong>Next</strong></span> to move to the next dialog: configuring the system's locale.</p></li><li class="listitem">The next step, illustrated in the following screenshot, is to configure your <span class="strong"><strong>Country</strong></span>, <span class="strong"><strong>Time zone</strong></span>, and <span class="strong"><strong>Keyboard Layout</strong></span>.<p>
</p><div class="mediaobject"><img src="graphics/image_02_009.png" alt="Installing Proxmox VE"/><div class="caption"><p>Configuring Locale with Proxmox VE Installer</p></div></div><p>
</p><p>Click on <span class="strong"><strong>Next</strong></span> to finalize the locale.</p></li><li class="listitem">Use the next dialog to set and confirm the password for the new system's root user.<p>
</p><div class="mediaobject"><img src="graphics/image_02_010.png" alt="Installing Proxmox VE"/><div class="caption"><p>Defining the root user's password and e-mail address</p></div></div><p>
</p><p>Set the administrator's e-mail and click on <span class="strong"><strong>Next</strong></span> to move forward with the installation and configuration process.</p></li><li class="listitem">Next, configure networking by entering the <span class="strong"><strong>Hostname (FQDN)</strong></span> (fully-qualified domain name), <span class="strong"><strong>IP Address</strong></span>, <span class="strong"><strong>DNS Server</strong></span>, <span class="strong"><strong>Netmask</strong></span>, and <span class="strong"><strong>Gateway</strong></span>, as follows:<p>
</p><div class="mediaobject"><img src="graphics/image_02_011.png" alt="Installing Proxmox VE"/><div class="caption"><p>Initial network configuration</p></div></div><p>
</p><p>When you're satisfied with the network configuration, click on <span class="strong"><strong>Next</strong></span> to commit the configuration and allow the installer to proceed.</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_012.png" alt="Installing Proxmox VE"/><div class="caption"><p>PVE installation at the half-way point</p></div></div><p>
</p></li></ol></div><p>After a confirmation prompt, the installation begins. It can take several minutes to complete; in the meantime, a short presentation provides a brief introduction to Proxmox VE's features, as illustrated in the preceding screenshot.</p><p>When the installation is complete, you'll be prompted to click on <span class="strong"><strong>Next</strong></span> one last time. The system will then begin to shut down and reboot, and may prompt you to remove the installation media:</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_013.png" alt="Installing Proxmox VE"/><div class="caption"><p>Post-installation reboot</p></div></div><p>
</p><p>When the machine finishes rebooting, your new Proxmox VE instance will be ready to be put to work:</p><p>
</p><div class="mediaobject"><img src="graphics/image_02_014.png" alt="Installing Proxmox VE"/><div class="caption"><p>Proxmox VE upon the completion of reboot</p></div></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip14"/>Tip</h3><p>In <a class="link" href="ch02.html" title="Chapter 2. Installing Proxmox VE">Chapter 2</a>, <span class="emphasis"><em>Installing Proxmox VE</em></span>, we'll access Proxmox VE through its administrative web interface via the URL displayed by the console by pointing a browser to the URL displayed by the console upon logging in.</p></div></div><p>Congratulations, your enterprise-class hypervisor is installed and almost ready for action; before we get started on PVE containers with LXC, let's make sure the system is up to date.</p></div>
<div class="section" title="Upgrading PVE from the command line"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec17"/>Upgrading PVE from the command line</h1></div></div></div><p>At the <span class="strong"><strong>login:</strong></span> prompt, type <code class="literal">root</code> and press 
<span class="emphasis"><em>Enter</em></span>; when the password prompt appears, enter the root user's password that you defined during the installation.</p><p>To optimize performance, maximize uptime, and keep the system secure, it's imperative that software patches are applied to Proxmox VE.</p><p>Assuming you're getting acquainted with Promox VE before committing to a support subscription, a change must be made to the software repositories.</p><p>To update and upgrade PVE when it's not attached to a support subscription, the following steps are necessary:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Disable the enterprise repository.</li><li class="listitem">Add a new repository called <code class="literal">no-subscription</code>.</li><li class="listitem">Use <code class="literal">apt</code> to update the list of available packages.</li><li class="listitem">Use <code class="literal">apt</code> to upgrade installed packages if upgrades exist.</li><li class="listitem">Upgrade the distribution with <code class="literal">apt</code>.</li></ol></div><div class="section" title="Disabling the enterprise repository"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec11"/>Disabling the enterprise repository</h2></div></div></div><p>Without this step, <code class="literal">apt-get update</code> will fail as <code class="literal">apt</code> tries to access the enterprise repo. So, we'll comment out the enterprise repo in the list of repositories:</p><pre class="programlisting">    sed -i.bak 's|deb https://enterprise.proxmox.com/debian jessie pve-  enterprise|\# deb https://enterprise.proxmox.com/debian jessie pve-  enterprise|' /etc/apt/sources.list.d/pve-enterprise.list  </pre></div><div class="section" title="Enabling a non-subscriber repository"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec12"/>Enabling a non-subscriber repository</h2></div></div></div><p>Although it's not intended for production use, <span class="strong"><strong>Proxmox GmbH</strong></span> provides an alternative repository for non-subscribers. To enable it, create a new file in <code class="literal">/etc/apt/sources.list.d/</code> and write the repository information to it:</p><pre class="programlisting">    echo "deb http://download.proxmox.com/debian jessie pve-no-subscription" &gt; /etc/apt/sources.list.d/pve-no-sub.list&#13;</pre><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip15"/>Tip</h3><p>Visit <a class="ulink" href="https://pve.proxmox.com/wiki/Package_repositories">https://pve.proxmox.com/wiki/Package_repositories</a> to learn more about Proxmox VE package repositories.</p></div></div></div><div class="section" title="Updating and upgrading Proxmox VE"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec13"/>Updating and upgrading Proxmox VE</h2></div></div></div><p>Enter the following to get a fresh list of available packages in the repositories:</p><pre class="programlisting">    apt-get update</pre><p>When the update has finished, use <code class="literal">apt</code> to get upgrades for your system:</p><pre class="programlisting">    apt-get upgrade -y</pre><p>After that, try a distribution upgrade:</p><pre class="programlisting">    apt-get dist-upgrade -y</pre><p>After the upgrade process is complete, reboot the server to ensure the changes are implemented:</p><pre class="programlisting">    shutdown -r now&#13;</pre></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Summary</h1></div></div></div><p>In anticipation of the PVE installation process, this chapter first outlined how to download the Proxmox VE ISO. It made hardware recommendations based on the PVE documentation, and then offered a reminder to enable hardware virtualization on the target machine. It then provided a brief guide to enabling the extensions in EFI and BIOS.</p><p>To complete the preparations, you were encouraged to plan how you will respond to the Proxmox Installer's configuration prompts.</p><p>We then turned to the installation itself, moving through the Proxmox Installer one stage at a time.</p><p>With the conclusion of this chapter, you should have a fresh Proxmox VE installation waiting for you to begin work with <a class="link" href="ch03.html" title="Chapter 3. Creating Containers">Chapter 3</a>, <span class="emphasis"><em>Creating Containers</em></span>.</p><p>With the path appropriately paved, let's start building containers from templates.</p></div></body></html>