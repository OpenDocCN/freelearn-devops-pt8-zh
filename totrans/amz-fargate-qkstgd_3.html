<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Using CloudWatch Logs</h1>
                </header>
            
            <article>
                
<p>Docker containers generate logs, and Docker supports the <kbd>docker logs</kbd> and <kbd>docker service logs</kbd> <span>commands</span><span> </span><span>to list logs. Docker also supports logging drivers, which are logging mechanisms to get logs generated by running containers and services.</span></p>
<p><strong>Problem</strong><strong>:</strong> Without a managed service, such as Amazon ECS, a logging driver must be configured if a logging mechanism is to be added.</p>
<p><strong>Solution</strong><strong>:</strong> With the Fargate launch type, logging is greatly simplified and the only supported logging driver is <kbd>awslogs</kbd>. The <kbd>awslogs</kbd> logging driver streams logs generated by ECS tasks to CloudWatch Logs. Using <kbd>aws-logs-prefix</kbd>, a label may be associated with the <kbd>awslogs</kbd> driver to differentiate between the log streams generated by the different tasks containers.</p>
<p><span>In this chapter, we will learn about the following:</span></p>
<ul>
<li><span>Overview of CloudWatch Logs and aws log driver</span></li>
<li>Creating an ECS service for a MySQL database</li>
<li>Configuring a Container definition</li>
<li>Configuring logging</li>
<li>Configuring a Task definition</li>
<li>Configuring a service</li>
<li>Configuring a cluster</li>
<li>Creating an ECS service</li>
<li>Exploring Task Logs</li>
<li>Exploring CloudWatch Logs</li>
<li>Exploring CloudWatch metrics</li>
</ul>
<p>The only prerequisite is an AWS account.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Overview of CloudWatch Logs and aws log driver</h1>
                </header>
            
            <article>
                
<p>Amazon CloudWatch is an AWS service for monitoring logs from AWS resources, including Amazon ECS, EC2, EBS volumes, Elastic Load Balancers, and RDS. Metrics for CPU utilization, memory utilization, latency, and request counts are streamed in near-real time from these resources to CloudWatch. Some CloudWatch terms and concepts are discussed in the following table:</p>
<table border="1" style="border-collapse: collapse;width: 100%">
<tbody>
<tr>
<td><strong>CloudWatch concept</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td>
<p>Log event</p>
</td>
<td>
<p>A<span> </span><kbd>log event</kbd>, which includes a log message and a timestamp, is a record of some event/activity on a resource or application.</p>
</td>
</tr>
<tr>
<td>
<p>Log stream</p>
</td>
<td>
<p>A<span> </span><kbd>log stream</kbd><span> </span>is a continuous sequence of log events from the same resource or application.</p>
</td>
</tr>
<tr>
<td>
<p>Log group</p>
</td>
<td>
<p>A<span> </span><kbd>log group</kbd><span> </span>is a group of log streams that share the same retention, monitoring, and access control settings. Each log stream is associated with a single log group, and the log streams in a log group do not have to originate from the same resource or application. More often, the log streams originate from different resources or applications, and the log group aggregates similar monitoring data.</p>
</td>
</tr>
<tr>
<td>
<p>Metric filter</p>
</td>
<td>
<p>Metric filters filter metric observations from events to generate data points for a CloudWatch metric.</p>
</td>
</tr>
<tr>
<td>
<p>Retention settings</p>
</td>
<td>
<p>Retention settings indicate the duration for which the log events are to be kept.</p>
</td>
</tr>
</tbody>
</table>
<p>The<span> </span><kbd>awslogs</kbd><span> </span>log driver is the only log driver supported with the Fargate launch type. The<span> </span><kbd>awslogs</kbd><span> </span>log driver supports the options discussed in the following table. The<span> </span><kbd>awslogs</kbd><span> log </span>driver supports other options in addition to those discussed in the table, but ECS only supports these options:</p>
<table border="1" style="border-collapse: collapse;width: 100%">
<tbody>
<tr>
<td>
<p><strong>Option</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
<td>
<p><strong>Required</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>awslogs-region</kbd></p>
</td>
<td>
<p>Specifies the Amazon region to which CloudWatch logs are sent.</p>
</td>
<td>
<p>Yes</p>
</td>
</tr>
<tr>
<td>
<p><kbd>awslogs-group</kbd></p>
</td>
<td>
<p>Specifies the log group to which the log streams are to send their logs.</p>
</td>
<td>
<p>Yes</p>
</td>
</tr>
<tr>
<td>
<p><kbd>awslogs-stream-prefix</kbd></p>
</td>
<td>
<p>Specifies a prefix that is to be associated with a log stream. Log streams generated with the Fargate launch type have the following format: <kbd><span>prefix-name/container-name/ecs-task-Id</span></kbd>.</p>
</td>
<td>
<p>Yes, for Fargate launch type</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating an ECS service for MySQL database</h1>
                </header>
            
            <article>
                
<p>In this section, we shall create an ECS definition for a MySQL database to demonstrate logging. Any Docker image could be used; the MySQL database image was chosen because several log events are generated when MySQL database is inited, installed, and configured. Another Docker image, such as <kbd>tutum/hello-world</kbd>, does not generate very many log events.</p>
<ol>
<li>Open <a href="https://aws.amazon.com/ecs/">URL</a> in a browser and click on <span class="packt_screen">Get started with Amazon ECS</span>. The ECS console starts up.</li>
<li>Click on <span class="packt_screen">Get started</span> to start the wizard to create new container and task definitions, and a new service. By default, the ECS wizard is based on the Fargate launch type. The diagram of ECS objects is displayed.</li>
</ol>
<p>The ECS objects are discussed in <a href="c1c9718a-58b6-41b1-a9f3-0c3e5cb9d5c4.xhtml" target="_blank">Chapter 1</a>, <em>Getting Started with Amazon ECS and Amazon Fargate</em>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring a Container definition</h1>
                </header>
            
            <article>
                
<p>In this section, we shall discuss creating a container definition for a MySQL database:</p>
<ol>
<li>Click on <span class="packt_screen">Configure</span> for the <span class="packt_screen">Custom</span> Container definition, as shown in the following screenshot. Some other container definitions are available as examples:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d7f7fc78-e1a1-4fbd-96dc-ce7e7e5a26bc.png"/></div>
<ol start="2">
<li>In the <span class="packt_screen">Edit container</span> dialog, specify a <span class="packt_screen">Container name</span> (<kbd>mysql</kbd>) and specify <span class="packt_screen">Image</span> as <kbd>mysql</kbd>, as shown <span>in the following screenshot</span>.</li>
</ol>
<ol start="3">
<li>Specify a <span class="packt_screen">Soft limit</span> (<kbd>512</kbd>) and a <span class="packt_screen">Hard limit</span> (<kbd>1024</kbd>) for memory. The hard limit for memory must not be less than the soft limit:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/817966e3-c42a-40fd-acb2-4d7e9ddc500e.png"/></div>
<ol start="4">
<li>Specify the <span class="packt_screen">Container port</span> as <kbd>3306</kbd> in <span class="packt_screen">Port Mappings</span>, with the <span class="packt_screen">Protocol</span> as <span class="packt_screen">tcp</span>, as shown <span>in the following screenshot</span>. With the Fargate launch type, only container port mappings may be configured. Host port mappings are not valid, and are set to the same value as the container port mappings:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/50866010-10d0-454a-a7fe-0492403afaca.png"/></div>
<ol start="5">
<li>In the <span class="packt_screen">Advanced container configuration<span><span> </span></span></span>|<span class="packt_screen"> ENVIRONMENT</span> section, specify the mandatory environment variable for the <span class="packt_screen">mysql</span> Docker image. The mandatory environment variable is <kbd>MYSQL_ROOT_PASSWORD</kbd> and sets the password for the <kbd>root</kbd> user, as shown in the following screenshot. Optionally, specify other environment variables such as <kbd>MYSQL_DATABASE</kbd> for the database to create.</li>
</ol>
<ol start="6">
<li>The <span class="packt_screen">Essential</span> checkbox indicates whether a container is essential to the running of a task. If the <span class="packt_screen">Essential</span> checkbox is selected, the container is essential, and if the container fails, the task fails too. At least one container in a task definition must be set as <span class="packt_screen">Essential</span>. As the <span class="packt_screen">mysql</span> container is the only container, it must be set to <span class="packt_screen">Essential</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fd20d1bd-e54e-470c-80ff-44b1dd1b0712.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring logging</h1>
                </header>
            
            <article>
                
<p>Scroll to the <span class="packt_screen">STORAGE AND LOGGING</span> section in the <span class="packt_screen">Edit container</span> dialog, as shown <span>in the following screenshot</span><span>:</span></p>
<ol>
<li><span>To configure logging automatically,</span> <span>click the </span><span class="packt_screen">Auto-configure CloudWatch Logs</span><span> checkbox</span><span>. The Fargate launch type only supports the </span><kbd>awslogs</kbd><span> log driver:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><span><img src="assets/c9088591-3d05-401e-971b-5854fabf872b.png"/></span></div>
<ol start="2">
<li>All the log options discussed in the earlier table are mandatory for the Fargate launch type, and the default value for each gets set. The <kbd>awslogs-group</kbd> option is set to a value of <kbd>/ecs/&lt;task definition name&gt;</kbd>. If the task definition name is modified after configuring the logging, the <kbd>awslogs-group</kbd><span class="packt_screen"> </span>also gets updated. Click on <span class="packt_screen">Update</span> to complete the container configuration:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/9c541c20-a98d-40e2-9e69-645e20826df2.png"/></div>
<p>The <kbd>logConfiguration</kbd> parameters added for the logging configuration are as follows:</p>
<pre>{<br/>            "containerDefinitions": [{<br/>                        ...<br/>                        "logConfiguration": {<br/>                                    "logDriver": "awslogs",<br/>                                    "options": {<br/>                                                "awslogs-group": "/ecs/mysql-task-definition",<br/>                                                "awslogs-region": "us-east-1",<br/>                                                "awslogs-stream-prefix": "ecs"<br/>                                    }<br/>                        }<br/>                        ...<br/>            }]<br/>}</pre>
<p>A container definition, <span class="packt_screen">mysql</span>, for the MySQL database gets created as shown in next illustration.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring a Task definition</h1>
                </header>
            
            <article>
                
<p>The default <span class="packt_screen">T</span><span class="packt_screen">ask definition</span> settings are listed. Some of the <span class="packt_screen">T</span><span class="packt_screen">ask definition</span> settings are modifiable, while others are not. <span class="packt_screen">Network mode</span> is not modifiable, and must be <span class="packt_screen">awsvpc</span>. <span class="packt_screen">Compatibilities</span> is also not modifiable, and must be set to <span class="packt_screen">FARGATE</span>. Modifying the task definition is optional:</p>
<ol>
<li>To modify a task definition, click on <span class="packt_screen">Task definition </span>| <span class="packt_screen">Edit</span>, as shown <span>in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/577d1f66-2093-4655-89a3-cadf730c7cce.png"/></div>
<ol start="2">
<li>In the <span class="packt_screen">Configure task definition</span> dialog, set the <span class="packt_screen">Task definition name</span> (<kbd>mysql-task-definition</kbd>) as shown <span>in the following screenshot.</span></li>
<li><span class="packt_screen">Network mode</span> is not modifiable for the Fargate launch type and must be <span class="packt_screen">awsvpc</span>.</li>
<li>Select <span class="packt_screen">Task execution role</span> as <span class="packt_screen">ecsTaskExecutionRole</span>. The <span class="packt_screen">ecsTaskExecutionRole</span> grants permissions to make calls to CloudWatch to send container logs.</li>
<li><span class="packt_screen">Compatibilities</span> is preset to <span class="packt_screen">FARGATE,</span> and is not modifiable either. </li>
<li>Set the <span class="packt_screen">Task size</span>, which allocates the selected task memory and CPU to the task. Only specific combinations of <span class="packt_screen">Task memory</span> and <span class="packt_screen">Task CPU</span> may be selected. </li>
<li>Click on <span class="packt_screen">Save</span> to complete the task definition configuration:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fc4711da-5ea9-436d-9569-170e69572452.png" style="width:43.92em;height:33.08em;"/></div>
<ol start="8">
<li>The task configuration gets saved. <kbd>awslogs-group</kbd> gets updated to <kbd>/ecs/ mysql-task-definition</kbd>. Click on <span class="packt_screen">Next</span> in the Get Started wizard, as shown <span>in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c8e175d5-f134-4217-9cd4-4d7694169a4b.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring a service</h1>
                </header>
            
            <article>
                
<p>Having configured the Container definition and task definition, it's time to configure the service next. The <span class="packt_screen">Service name</span> (<kbd>mysql-service</kbd>), <span class="packt_screen">Number of desired tasks</span> (<span class="packt_screen">1</span> by default), <span class="packt_screen">Security group</span> (<span class="packt_screen">Automatically create new</span>), and <span class="packt_screen">Load balancer type</span> (<span class="packt_screen">None</span>) may be modified if required with <span class="packt_screen">Edit</span>. We shall use the default settings for the service to demonstrate logging with Fargate. Click on <span class="packt_screen">Next, </span>as shown <span>in the following screenshot:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5260c23e-459f-4e17-8519-d67f78aad3d0.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring a cluster</h1>
                </header>
            
            <article>
                
<p>Next, configure the cluster. The default cluster is specified in <span class="packt_screen">Cluster name</span> by default:</p>
<ul>
<li>Specify a different Cluster name (<kbd>mysql</kbd>).</li>
<li>The default settings for <span class="packt_screen">VPC ID</span> and <span class="packt_screen">Subnets</span> are to create new. Click on <span class="packt_screen">Next</span>:</li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="assets/37fccb93-1d0f-4af8-9986-e669b9d92ee3.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating an ECS service</h1>
                </header>
            
            <article>
                
<p>Review the settings for the <span class="packt_screen">Container definition</span>, <span class="packt_screen">Task definition</span>, and <span class="packt_screen">Service</span>. The <span class="packt_screen">Edit</span> button is provided to edit any of these ECS objects:</p>
<ol>
<li>To create the ECS with the Fargate launch type, click on <span class="packt_screen">Create</span> in <span class="packt_screen">Review</span>, as shown <span>in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c02f12fa-d318-4de4-8923-c87d221ede45.png"/></div>
<ol start="2">
<li>The ECS resources start to get created, as shown in <span class="packt_screen">Launch Status</span> in the following screenshot. Some of the resources are shown as <span class="packt_screen">pending</span>, while others are shown as <span class="packt_screen">complete</span>. <span>When all the ECS resources have been created, as indicated by the </span><span class="packt_screen">complete</span><span> status,</span> click on <span class="packt_screen">View service</span>:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f0ef1b5f-ebda-4bea-b7ee-b444892d1a73.png" style="width:42.00em;height:19.75em;"/></div>
<p class="mce-root CDPAlignLeft CDPAlign">An ECS <kbd>mysql-service</kbd> gets created in the <kbd>mysql</kbd> cluster, as listed in the <span class="packt_screen">Services</span> tab of the <span class="packt_screen">mysql</span>, cluster as shown <span>in the following screenshot:</span></p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/1108b988-4660-4714-a025-681c2e2d5506.png" style="width:41.25em;height:23.75em;"/></div>
<p class="CDPAlignLeft CDPAlign">The <span class="packt_screen">Task </span>tab lists the tasks in the service, as shown <span>in the following screenshot</span>. <span>Click on the task link to list the details of the task:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/23647ff1-af90-4990-b339-ef2bf6e6f0a0.png"/></div>
<p> The task details get displayed, including the <span class="packt_screen">ENI Id</span> link shown <span>in the following screenshot, in order</span> to obtain details about the ENI. The <span class="packt_screen">Public IP</span> and <span class="packt_screen">Private</span> <span class="packt_screen">IP</span> for the task definition are also listed:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0860704c-8750-4a5f-a802-415907de12d4.png"/></div>
<p>Click on <span class="packt_screen">Task Definitions</span> in the margin navigation to list the task definition, including revision, in <span class="packt_screen">Task Definition Name: Revision</span> format, as shown <span>in the following screenshot</span>. Other task definitions may also be listed. The task definition <span class="packt_screen">Status</span> is listed as <span class="packt_screen">Active</span>, which indicates the task definition is active and may be used in a service to run tasks:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6576fc59-21d6-4ff3-8f0e-49c3bccfe339.png"/></div>
<p>Click on the task definition link to list the task definition's revisions, as shown <span>in the following screenshot:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/149d1026-c046-426d-a331-0f4f5a23131d.png"/></div>
<p>Click on the task definition revision link to display the <span class="packt_screen">Builder</span> and <span class="packt_screen">JSON</span> format tabs, as shown <span>in the following screenshot</span>. To create a new revision of the task definition, click on <span class="packt_screen">Create new revision</span>. We have not used a new revision, but a new revision creates a new set of tasks, based on a revised task definition:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e99674f5-7e06-491a-b26a-481e240d75b9.png"/></div>
<p>The <span class="packt_screen">mysql</span> container is listed in the <span class="packt_screen">Container Definitions</span> section. The <span class="packt_screen">Container Definitions</span> table lists the <span class="packt_screen">Container Name</span>, <span>Docker <span class="packt_screen">Image</span>, <span class="packt_screen">CPU Units</span>, <span class="packt_screen">Hard/Soft memory limits</span>, and whether the container is <span class="packt_screen">Essential</span>. </span>Click on the <span class="packt_screen">mysql</span> container to display its details, including <span class="packt_screen">Log Configuration</span>, as shown <span>in the following screenshot</span>. The detailed configuration includes <span class="packt_screen">Port Mappings</span> and <span class="packt_screen">Environment Variables</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/db689b3a-0fd5-437e-a2b9-75054235b3a9.png"/></div>
<p>The <span class="packt_screen">mysql</span> cluster is listed in clusters, as shown <span>in the following screenshot</span>. The number of <span class="packt_screen">Services</span> and the number of <span class="packt_screen">Running tasks</span> and <span class="packt_screen">Pending tasks</span> are also listed. Only the <span class="packt_screen">FARGATE</span> launch type lists services and tasks, and not the EC2 launch type:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/93a0a387-d5dd-4f05-820c-5a91d2d67701.png" style="width:42.83em;height:12.50em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Exploring Task logs</h1>
                </header>
            
            <article>
                
<p>Task log events are generally used for debugging a task or a service, and to find out whether a task started without any errors. <span>The log events </span>generated by a task are displayed by selecting the <span class="packt_screen">Logs</span> tab in the task details, shown in the following screenshot. Each log entry includes a <span class="packt_screen">Timestamp</span> and a log <span class="packt_screen">Message</span>. An example of debugging a task is indicated by a <span class="packt_screen">MySQL init process failed</span> message:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4bed299f-15ea-4e55-8158-72ca8de93b7b.png" style="width:44.75em;height:27.42em;"/></div>
<p>A task could fail for several reasons, and some of the common reasons are:</p>
<ul>
<li>Task is out of memory </li>
<li>Mandatory environment variables have not been set</li>
<li>Insufficient CPU allocated to the container or task</li>
</ul>
<p>An example log entry in which a MySQL database is indicated to be running and accepting connections is <span class="packt_screen">mysqld: ready for connections</span>, as shown <span>in the following screenshot:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/61e75d0b-d833-4df4-9d1d-45e9a71ca75b.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Exploring CloudWatch Logs</h1>
                </header>
            
            <article>
                
<p>In this section, we shall find details about the <span>CloudWatch</span> logs generated and display the log streams generated:</p>
<ol>
<li> Click on <span class="packt_screen">Logs</span> in the CloudWatch Console, as shown <span>in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2008b2a3-61dc-4b9c-acc1-c49764498906.png"/></div>
<ol start="2">
<li>In <span class="packt_screen">Filter</span>, specify <kbd>/ecs/mysql</kbd> or just <kbd>/ecs</kbd>, which is the value of the <kbd>awslogs-stream-prefix</kbd> option for the <kbd>awslogs</kbd> log driver, as configured in the container definition in the <em>Configuring logging</em> section. The log group   <kbd>/ecs/mysql-task-definition</kbd> is displayed, as shown <span>in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1e2c6933-fcb2-415b-b924-509f0691b78b.png"/></div>
<ol start="3">
<li>Click on the log group to display the log streams, as shown <span>in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7322c545-0464-4885-8d91-4ae554b83583.png"/></div>
<p>The log events in the log stream get displayed. Each log event is associated with a timestamp and a log message. An example log message is <span class="packt_screen">Initializing database</span>, as shown <span>in the following screenshot</span>. Some of the messages have <span class="packt_screen">[</span><span class="packt_screen">Warning]</span> associated with them:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8d9cd791-977b-4309-8d23-03cf71408ac4.png"/></div>
<p>A CloudWatch log message indicating the MySQL database is running and accepting connections is the message <span class="packt_screen">mysqld: ready for connections</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7742ebb7-3115-4cda-9ee0-ee49aaa8d963.png" style="width:40.67em;height:17.75em;"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Exploring CloudWatch metrics</h1>
                </header>
            
            <article>
                
<p>In this section, we shall display the metrics:</p>
<ol>
<li>Click on <span class="packt_screen">Metrics</span> in the navigation, as shown <span>in the following screenshot</span>. Filter metrics for the <span class="packt_screen">mysql</span> service with <span class="packt_screen">All</span> | <span class="packt_screen">ECS ClusterName</span> | <span class="packt_screen">ServiceNameSelect</span> to display all metrics, which include <span class="packt_screen">MemoryUtilization</span><span> and </span><span class="packt_screen">CPUUtilization</span><span> metrics:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/16fd8abf-add9-4386-b72a-eb15a16f800d.png" style="width:41.00em;height:15.67em;"/></div>
<ol start="2">
<li>Not all metrics may be graphed, although the <span class="packt_screen">MemoryUtilization</span> and <span class="packt_screen">CPUUtilization</span> metrics generated by a task are graphed. Select the <span class="packt_screen">Graphed metrics</span> tab to display only the graphed metrics:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/89c6c8a8-632f-4ece-95c8-5a7707d1ca99.png"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we discussed configuring an ECS container for logging. We demonstrated CloudWatch Logs using an ECS service for a MySQL database. The only supported log driver for the Fargate launch type is the awslogs driver. Three log driver options must be configured with the Fargate launch type: <kbd>awslogs-region</kbd>, <kbd>awslogs-stream-prefix</kbd>, and <kbd>awslogs-group</kbd>. In the next chapter, we shall discuss auto scaling with Fargate.</p>


            </article>

            
        </section>
    </body></html>