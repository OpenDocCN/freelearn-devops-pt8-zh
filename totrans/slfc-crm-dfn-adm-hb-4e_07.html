<html><head></head><body><div class="chapter" title="Chapter&#xA0;7.&#xA0;Implementing Business Processes in Salesforce CRM"><div class="titlepage"><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Implementing Business Processes in Salesforce CRM</h1></div></div></div><p>In the previous chapter, we looked at data analytics, where we covered reports and dashboards.</p><p>In this chapter, we will cover in detail how you can automate and streamline the key business processes for your organization with the use of the workflow rules and approval process features within the Salesforce CRM application.</p><p>This chapter will focus on how you can configure actions for workflow rules and approval processes to automate, improve quality, and generate high-value processes within your organization.</p><p>Finally, you will be presented with a number of questions about the key features of Salesforce CRM administration in the area of Workflow Automation covered in this chapter.</p><p>The following topics will be covered:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Workflow rules</li><li class="listitem" style="list-style-type: disc">Approval process</li><li class="listitem" style="list-style-type: disc">Workflow actions</li><li class="listitem" style="list-style-type: disc">Workflow queue</li><li class="listitem" style="list-style-type: disc">Approval wizard</li><li class="listitem" style="list-style-type: disc">Approvals in Chatter</li><li class="listitem" style="list-style-type: disc">Process visualizer</li><li class="listitem" style="list-style-type: disc">Visual Workflow</li><li class="listitem" style="list-style-type: disc">Flow Designer</li><li class="listitem" style="list-style-type: disc">Introduction to Lightning Process Builder</li><li class="listitem" style="list-style-type: disc">Comparison of Workflow Automation Tools</li></ul></div><div class="section" title="Workflow rules and approval processes"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec89"/>Workflow rules and approval processes</h1></div></div></div><p>The workflow rules and approval process features within the Salesforce CRM application allow you to automate and streamline key business processes for your organization.</p><p>Workflow rules can be used to capture key business processes and events to generate automated actions. They allow you to configure various types of actions to fire based on the field or fields of the record, meeting predefined conditions. In essence, a workflow rule sets workflow actions into motion when its predefined conditions are met. You can configure workflow actions to execute immediately whenever a record meets the conditions specified in the workflow rule, or you can set time-dependent features that execute the workflow actions on a specific day.</p><p>Approval processes are a structured set of steps used to facilitate formal sign-off on data records. They can range from simple, single steps to complex, sophisticated routing to provide automated processing that your organization can use to approve records in Salesforce CRM. Along with the steps that must be taken, the approval process also specifies who must approve these steps. Approval steps can either be specified for all records included in the process or restricted to records that have certain attributes. Approval processes also specify the actions that are to be taken when a record is first submitted, approved, rejected, or recalled.</p><p>Workflow rules and approval processes provide benefits such as improving the quality and consistency of data, increasing data integrity, improving efficiency and productivity, lowering costs, and reducing risks.</p><p>Workflow rules and approval processes allow you to automate the following types of actions: e-mail alerts, tasks, field updates, and outbound messages.</p><p>E-mail alerts can be sent to one or more recipients. For example, e-mail alert actions can be used to automatically send an account owner an e-mail whenever updates are made to one of their accounts by another user.</p><p>Tasks can be assigned to users or record owners. For example, task actions can be used to automatically assign follow-up tasks to a marketing executive whenever a new lead is entered in the system.</p><p>Field updates can be used to modify the value of a field on a record. For example, a field update action can be used to automatically update an opportunity field called <span class="strong"><strong>Next Step</strong></span> when it reaches a certain sales stage.</p><p>Outbound messages can be used to send a secure configurable API message (in XML format) to a designated listener. For example, outbound messages can be used to automatically invoke a new account creation process. This could be, say, whenever a new account is entered in the Salesforce CRM application by triggering an outbound API message to an external financial system.</p><p>Workflow rules in Salesforce CRM can be combined to help manage an entire process. For example, when a lead is entered through your website using the Web to lead (covered later), workflow rules can be used to automatically send a responding e-mail to the lead contact and also to someone within your organization. Here, a workflow rule can be set to create a task for one of your salespersons to telephone the lead contact along with a reminder e-mail alert, to be sent a specified number of days after the lead record has been entered.</p><p>If the salesperson changes the lead status, then a date field could be updated automatically with the date that the lead was contacted.</p><p>Up until now, we have looked at the similarity of workflow rules and approval processes. However, there are some key differences. Workflow rules consist of a single step and a single result, whereas approval processes consist of multiple steps and different results depending upon whether the record is approved or rejected. Workflow rules trigger automatically and the rules, when triggered, are not visible to the user. Approval processes, on the other hand, contain multiple steps, each requiring a specific I approve or reject user action by the specified approver(s).</p><p>In practice, the first step in creating workflow rules and approval processes is to define and map out the process and, for each step in the process, detail the objects, the criteria, the users, and the actions required.</p><div class="section" title="Workflow and approval actions"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec187"/>Workflow and approval actions</h2></div></div></div><p>Workflow and approval actions consist of e-mail alerts, tasks, field updates, and outbound messages that can be triggered either by a workflow rule or by an approval process:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Email alert</strong></span>: An e-mail alert is an action that can be generated by both workflow and approval actions using an e-mail template that is sent to specified recipients, who can be either Salesforce CRM application users or external e-mail recipients.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Field update</strong></span>: A field update is an action that can be activated by use of both workflow and approval actions, and which specifies the field for update and the new value for it. The field's update action depends on the data type of the field, where you can choose to apply a specific value, clear the field, or calculate a value according to a criterion or a derived formula you can specify.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Task</strong></span>: Tasks are workflow and approval actions that are triggered by workflow rules or approval processes, and they allow the assignment of tasks to a user who you can specify. You would also specify the <span class="strong"><strong>Subject</strong></span>, <span class="strong"><strong>Status</strong></span>, <span class="strong"><strong>Priority</strong></span>, and <span class="strong"><strong>Due Date</strong></span> of the task. Tasks appear on the user's calendar, and can be accessed by the <span class="strong"><strong>My Tasks</strong></span> section of the <span class="strong"><strong>Home</strong></span> tab or on the specific day for the task within the <span class="strong"><strong>Day View</strong></span> section on the user's calendar. Tasks can be assigned on their own, but you can also combine them with an e-mail alert to inform the user.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Outbound message</strong></span>: An outbound message in Salesforce CRM is an action that can be activated by both workflows and approvals, and which sends information to a web URL endpoint, all of which can specify. The outbound message contains the data in specified fields, in what is known as a SOAP message to the endpoint. As this requires development of a receiving web-service, this action is not covered in this book.</li></ul></div></div><div class="section" title="Configuring e-mail alerts for workflow rules and approval processes"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec188"/>Configuring e-mail alerts for workflow rules and approval processes</h2></div></div></div><p>To configure e-mail alerts, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Workflow</strong></span>| <span class="strong"><strong>Email Alerts</strong></span>, and then click on the <span class="strong"><strong>New Email Alert</strong></span> button.</p><p>Within the <span class="strong"><strong>Email Alert Edit</strong></span> page, the following settings are presented:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_001.jpg" alt="Configuring e-mail alerts for workflow rules and approval processes"/></div><p>
</p><p>To set the details for the e-mail alert, carry out the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter a description for the e-mail alert.</li><li class="listitem">Enter a unique name for the e-mail alert.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note245"/>Note</h3><p>The unique name for the e-mail alert is required and used by the API and managed packages. The name is auto-populated when you enter the preceding field, called Description. There are restrictions for permitted characters whereby the unique name must begin with a letter and use only alphanumeric characters and underscores. Also, the unique name cannot end with an underscore nor have two consecutive underscores.</p></div></div></li><li class="listitem">Choose an e-mail template.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note246"/>Note</h3><p>The <span class="strong"><strong>Protected Component</strong></span> checkbox is used to mark the alert as protected. This option can be ignored as it is a setting used by developers who are building applications with the managed release package functionality. If you install a managed package, there are restrictions on what can be edited by non-developers. Managed Packages in Salesforce  are discussed in <a class="link" href="ch09.html" title="Chapter 9. Extending and Enhancing Salesforce CRM">Chapter 9</a>, <span class="emphasis"><em>Extending and Enhancing Salesforce CRM</em></span>.</p></div></div></li><li class="listitem">Now select who should receive this e-mail alert from the available options:</li></ol></div><div class="informaltable"><table border="1"><colgroup><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Recipients</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Description</strong></span>
</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Account Owner</strong></span>
</p>
</td><td>
<p>If the <span class="strong"><strong>Account Owner</strong></span> is selected, then the e-mail alert is sent to the user in Salesforce CRM who is set as the account owner of either the account record or the account that is related to the record. Since this option requires an account relationship to be present, it is only valid on accounts, opportunities, contacts, and custom objects that are children of the account object.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Account Team</strong></span>
</p>
</td><td>
<p>Choose from the list of users that are assigned to a particular accounts team role. Note that e-mail alerts are only sent when the rule is associated with the account object or any of its direct child objects.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Case Team</strong></span>
</p>
</td><td>
<p>Choose from the list of users assigned to a particular case team role.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Creator</strong></span>
</p>
</td><td>
<p>This is the user listed as the record creator, and is the user who is set in the <span class="strong"><strong>Created By</strong></span> field.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Customer Portal User</strong></span>
</p>
</td><td>
<p>Choose from the list of users that are associated with a Customer Portal.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Email Field</strong></span>
</p>
</td><td>
<p>An e-mail address field on the selected object, such as the <span class="strong"><strong>Email Field</strong></span> on contact records or a custom e-mail field.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Owner</strong></span>
</p>
</td><td>
<p>The record owner.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Partner User</strong></span>
</p>
</td><td>
<p>Choose from the list of users that are associated with a partner portal.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Portal Role</strong></span>
</p>
</td><td>
<p>Choose from the list of users that are assigned to a particular portal role.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Portal Role and Subordinates</strong></span>
</p>
</td><td>
<p>Choose from the list of users assigned to a particular portal role, plus all users in roles below that role.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Public Groups</strong></span>
</p>
</td><td>
<p>Choose from the list of users in a particular public group.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Related Contact</strong></span>
</p>
</td><td>
<p>An associated contact on the record. For example, you may have created a custom contact on the opportunity object called <span class="strong"><strong>Key Decision Maker</strong></span>.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Related Lead or Contact Owner</strong></span>
</p>
</td><td>
<p>This is a related user lookup to the owner fields set on either the lead or contact record that is associated to the record. As an example, for opportunities, this field could be set to a contact role field linking to a contact.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Related User</strong></span>
</p>
</td><td>
<p>A Related User is a user lookup field that is associated to the record. As an example, this field may be set to the <span class="strong"><strong>Last Modified By</strong></span> field.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Role</strong></span>
</p>
</td><td>
<p>Choose from the list of users assigned a particular role.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Role and Internal Subordinates</strong></span>
</p>
</td><td>
<p>Choose from the list of users in a particular role, plus all users in roles below that role, excluding partner portal and customer portal users.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Role and Subordinates</strong></span>
</p>
</td><td>
<p>Choose from the list of users in a particular role, plus all users in roles below that role.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>User</strong></span>
</p>
</td><td>
<p>Choose from the list of available users in Salesforce CRM.</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Opportunity Team</strong></span>
</p>
</td><td>
<p>Once you have set up sales opportunity teams, this option allows you to choose from the list of users associated to an opportunity team.</p>
</td></tr></tbody></table></div><p>Select the recipients who should receive this e-mail alert in the <span class="strong"><strong>Available Recipients</strong></span> list and click on <span class="strong"><strong>Add</strong></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note247"/>Note</h3><p>If you change the object after selecting the recipients, the <span class="strong"><strong>Selected Recipients</strong></span> list will be automatically cleared.</p></div></div><p>Optionally, enter to and from e-mail addresses, and then click on <span class="strong"><strong>Save</strong></span>.</p><p>Here, you can do the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Enter up to five additional recipient e-mail addresses (which may or may not be users in Salesforce)</li><li class="listitem" style="list-style-type: disc">Set the <span class="strong"><strong>From Email Address</strong></span> to either the current user's e-mail address or to the default workflow user's e-mail address</li><li class="listitem" style="list-style-type: disc">Finally, to begin using the e-mail alert, associate it with either a workflow rule or an approval process<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip248"/>Tip</h3><p><span class="strong"><strong>Set the From Email Address:</strong></span></p><p>Setting the <span class="strong"><strong>From Email Address</strong></span> also allows you to use a standard global e-mail address for your organization, such as <code class="literal">Customer_Services@WidgetXYZ.com</code>, instead of the default <span class="strong"><strong>From</strong></span> field, which is the e-mail address of the user who updates the record. Only verified, organization-wide e-mail addresses will appear in the <span class="strong"><strong>From Email Address</strong></span> picklist options.</p></div></div></li></ul></div><p>There is a daily limit of 1,000 e-mail alerts per standard Salesforce license for workflows and approvals.</p><p>There is also an overall daily limit of 2 million e-mail alerts for your entire organization and when the daily limits are reached, a warning e-mail is sent out by the Salesforce CRM application to the default workflow user where one is set. If there is no default workflow user set, then the warning e-mail goes out to a system administrator.</p><div class="section" title="Organization-wide e-mail addresses"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec192"/>Organization-wide e-mail addresses</h3></div></div></div><p>By setting up organization-wide e-mail addresses, your users can share a set of common e-mail aliases. Here, you can define a list of organization-wide e-mail addresses for each user profile.</p><p>When sending e-mails from Salesforce, users with these profiles can then choose a different From address than the e-mail address that they have defined on their user record, and any e-mail responses are then returned to the organization-wide address.</p><p>To set up the list of organization-wide e-mail addresses, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Email Administration</strong></span> | <span class="strong"><strong>Organization-Wide Addresses</strong></span>.</p><p>From <span class="strong"><strong>Organization-Wide Addresses</strong></span>, you can set the display name, the e-mail address, and the profiles that are permitted to use that address, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_002.jpg" alt="Organization-wide e-mail addresses"/></div><p>
</p><p>When the organization-wide e-mail address is saved or changed, Salesforce will send an e-mail to the address specified in the e-mail address field to verify that the e-mail address is valid, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/B05715_07_03.jpg" alt="Organization-wide e-mail addresses"/></div><p>
</p><p>Now, the verified organization-wide e-mail addresses will appear in the <span class="strong"><strong>From Email Address</strong></span> picklist options when configuring e-mail alerts, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_004.jpg" alt="Organization-wide e-mail addresses"/></div><p>
</p></div></div><div class="section" title="Configuring tasks for workflow rules and approval processes"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec189"/>Configuring tasks for workflow rules and approval processes</h2></div></div></div><p>To configure tasks, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Workflow </strong></span>| <span class="strong"><strong>Tasks</strong></span>, and then click on the <span class="strong"><strong>New Task</strong></span> button.</p><p>From the <span class="strong"><strong>Step 1: Select Object</strong></span> page, select the object type for the record from the <span class="strong"><strong>Select Object</strong></span> picklist and click on <span class="strong"><strong>Next</strong></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note249"/>Note</h3><p>When creating tasks for custom objects, only custom objects that have been set with activities are available for selection in the picklist.</p></div></div><p>Within the <span class="strong"><strong>Step 2: Configure Task</strong></span> page, the following settings are presented:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_005.jpg" alt="Configuring tasks for workflow rules and approval processes"/></div><p>
</p><p>To set the details for the task, carry out the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">You must select an individual or individuals for whom you want to can set the required<span class="strong"><strong> Assigned To</strong></span> field. Here, the options when you click on the lookup dialog for the.  <span class="strong"><strong>Assigned To</strong></span> setting allow for the selection of either <span class="strong"><strong>User</strong></span>, <span class="strong"><strong>Role</strong></span>, or <span class="strong"><strong>Record Owner</strong></span>.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note250"/>Note</h3><p>If the assignee of a workflow task is a role, and that particular role has multiple users, the record owner is then assigned the task. This is done regardless of the type of role that the record owner has, which can cause some confusion. This is because tasks cannot be assigned to more than one user, and hence best practice dictates that you do not assign tasks to roles, even though the option exists.</p></div></div></li><li class="listitem">Enter a subject and a unique name for the task.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note251"/>Note</h3><p>The unique name for the task is required and used by the API and any managed packages. The name is auto-populated when you move from the preceding field, called <span class="strong"><strong>Subject</strong></span>. There are restrictions for permitted characters, whereby the unique name must begin with a letter and use only alphanumeric characters and underscores. Also, the unique name cannot end with an underscore nor have two consecutive underscores.</p></div></div></li><li class="listitem">Choose a due date, status, and priority, where due dates appear in the time zone of the assignee.</li><li class="listitem">Set the <span class="strong"><strong>Notify Assignee</strong></span> checkbox to also send an e-mail notification when the task is assigned.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note252"/>Note</h3><p>The <span class="strong"><strong>Protected Component</strong></span> checkbox is used to mark the alert as protected. This is used by developers who are building managed package applications for the AppExchange marketplace (AppExchange is covered in <a class="link" href="ch09.html" title="Chapter 9. Extending and Enhancing Salesforce CRM">Chapter 9</a>, <span class="emphasis"><em>Extending and Enhancing Salesforce CRM</em></span>).</p></div></div></li><li class="listitem">Finally, to set the task into action, associate it with the required workflow rule or approval process.</li><li class="listitem">Optionally, enter any comments for the description information that is included with the task and then click on <span class="strong"><strong>Save</strong></span>.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note253"/>Note</h3><p>When the task is assigned, it will include a <span class="strong"><strong>Created By</strong></span> field that contains the name of the person who saved the record that triggered the rule to assign the task.</p></div></div></li></ol></div></div><div class="section" title="Configuring field updates for workflow rules and approval processes"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec190"/>Configuring field updates for workflow rules and approval processes</h2></div></div></div><p>To configure field updates, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Workflow</strong></span> | <span class="strong"><strong>Field Updates</strong></span>, and then click on the <span class="strong"><strong>New Field Update</strong></span> button.</p><p>Within the <span class="strong"><strong>Field Update Edit</strong></span> page, perform the following:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Enter a name and a unique name for the field update.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note254"/>Note</h3><p>Both the name and a unique name for the field update are required. The unique name is used by the API and managed packages. The name is auto-populated when you exit the preceding <span class="strong"><strong>Name</strong></span> field. There are restrictions for permitted characters in that the unique name must begin with a letter and use only alphanumeric characters and underscores. Also, the unique name cannot end with an underscore or have two consecutive underscores.</p></div></div></li><li class="listitem">Now, optionally, enter a description for the field to update and then choose the object type to present the field to be updated, as shown here for the <span class="strong"><strong>Opportunity</strong></span> object:<p>
</p><div class="mediaobject"><img src="graphics/image_07_006.jpg" alt="Configuring field updates for workflow rules and approval processes"/></div><p>
</p></li></ol></div><p>Upon choosing the object and field to update, a new section called <span class="strong"><strong>Specify New Field Value</strong></span> appears where you can set the logic of the desired field update. Here, the available options depend on the type of field you are updating, with the following options.</p><div class="section" title="Checkboxes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec193"/>Checkboxes</h3></div></div></div><p>For checkboxes, choose <span class="strong"><strong>True</strong></span> to select the checkbox and <span class="strong"><strong>False</strong></span> to deselect it, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_007.jpg" alt="Checkboxes"/></div><p>
</p><p>This is useful for automating the setting of status flags for records whenever a certain business process is completed. In the previous example, the field update of the field <span class="strong"><strong>Publish to Web?</strong></span> allows the automatic setting of the checkbox option to <span class="strong"><strong>True</strong></span>, say, so that the record can be published.</p></div><div class="section" title="Record owners"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec194"/>Record owners</h3></div></div></div><p>For record owners, choose the user to whom the record should be assigned, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_008.jpg" alt="Record owners"/></div><p>
</p><p>This is useful for automating the changing of the record owner for records whenever a certain business process is complete. For example, you could automate the field update of the record owner from, say, a marketing executive to an account manager, if a lead matches certain criteria. When selecting the user for the record owner field update, you must use the user lookup icon and select a specific active user. You cannot, therefore, automatically derive the new owner from any given criteria.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip255"/>Tip</h3><p>Selecting <span class="strong"><strong>Notify Assignee</strong></span> allows the automatic sending of an e-mail to the new record owner whenever the field update fires.</p></div></div></div><div class="section" title="Picklists"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec195"/>Picklists</h3></div></div></div><p>For picklist fields, you can either select a specific value from the picklist or you can select the value above or below the current value as shown in the following screenshot. The options <span class="strong"><strong>The value above the current one</strong></span> and <span class="strong"><strong>The value below the current one</strong></span> selection is based on the sorting order that is set in the <span class="strong"><strong>Picklist</strong></span> field definition:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_009.jpg" alt="Picklists"/></div><p>
</p></div><div class="section" title="Other data types"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec196"/>Other data types</h3></div></div></div><p>For all other data types, you can set the following <span class="strong"><strong>Text Options</strong></span> as shown here:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_010.jpg" alt="Other data types"/></div><p>
</p><p>Follow these steps to finish the field update configuration:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Choose <span class="strong"><strong>A blank value (null)</strong></span> if you want to remove any existing value and leave the field blank.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note256"/>Note</h3><p>This option is not available for required fields, checkboxes, and some other types of fields.</p></div></div></li><li class="listitem">Choose <span class="strong"><strong>Use a formula to set the new value</strong></span> to calculate the value based on the formula logic.</li><li class="listitem">Now click on <span class="strong"><strong>Save</strong></span> to complete the configuration of the field update.</li><li class="listitem">Finally, to set the field update into action, associate it with the required workflow rule or approval process.</li></ol></div></div></div><div class="section" title="Configuring outbound message notifications for workflow rules and approval processes"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec191"/>Configuring outbound message notifications for workflow rules and approval processes</h2></div></div></div><p>An outbound message in Salesforce CRM is an action - that can be activated by both workflows and approvals - that sends information to a web-URL endpoint you specify.</p><p>The outbound message contains the data using the specified fields in what is known as a SOAP message to the endpoint URL. Once the endpoint receives the message data, it consumes the information from the message and processes it.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note257"/>Note</h3><p>The <span class="strong"><strong>Simple Object Access Protocol</strong></span> (<span class="strong"><strong>SOAP</strong></span>) is an industry-standard protocol that defines a uniform way of passing data encoded in the XML format. <span class="strong"><strong>Extensible Markup Language</strong></span> (<span class="strong"><strong>XML</strong></span>) is an industry-standard markup language that enables the sharing and transportation of structured data.</p></div></div><p>As this requires the development of a receiving web-service endpoint, setting up this action is beyond the scope of this book.</p></div></div></div>
<div class="section" title="Configuring workflow rules"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec90"/>Configuring workflow rules</h1></div></div></div><p>You can configure your organization's workflow by creating workflow rules. Each workflow rule consists of the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Criteria that cause the Salesforce CRM application to trigger the workflow rule</li><li class="listitem" style="list-style-type: disc">Actions that execute immediately when a record matches the criteria</li><li class="listitem" style="list-style-type: disc">Time-dependent actions that the Salesforce CRM application processes when a record matches the criteria, and executes according to the specified time triggers</li></ul></div><p>The following table is an overview of the key aspects of configuring workflow rules in Salesforce CRM:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/><col/><col/></colgroup><tbody><tr><td>
<p>
<span class="strong"><strong>Rules</strong></span>
</p>
</td><td>
<p><span class="strong"><strong>Actions</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Users</strong></span>
</p>
</td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td>
<p>Object</p>
</td><td>
<p>Criteria</p>
</td><td>
<p>E-mail alerts</p>
</td><td>
<p>Immediate</p>
</td><td>
<p>People</p>
</td></tr><tr><td>
</td><td>
</td><td>
</td><td>
<p>Time-dependent</p>
</td><td>
</td></tr><tr><td>
</td><td>
</td><td>
<p>Tasks</p>
</td><td>
<p>Immediate</p>
</td><td>
</td></tr><tr><td>
</td><td>
</td><td>
</td><td>
<p>Time-dependent</p>
</td><td>
</td></tr><tr><td>
</td><td>
</td><td>
<p>Field updates</p>
</td><td>
<p>Immediate</p>
</td><td>
<p>System</p>
</td></tr><tr><td>
</td><td>
</td><td>
</td><td>
<p>Time-dependent</p>
</td><td>
</td></tr><tr><td>
</td><td>
</td><td>
<p>Outbound messages</p>
</td><td>
<p>Immediate</p>
</td><td>
</td></tr><tr><td>
</td><td>
</td><td>
</td><td>
<p>Time-dependent</p>
</td><td>
</td></tr><tr><td>
<p><span class="strong"><strong>Example workflow rule</strong></span>
</p>
</td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td>
<p>Opportunity</p>
</td><td>
<p>Whenever an opportunity record is updated</p>
</td><td>
<p>E-mail Alert</p>
</td><td>
<p>Immediate</p>
</td><td>
<p>Account Owner</p>
</td></tr></tbody></table></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip258"/>Tip</h3><p>Create workflow actions ahead of workflow rules. Create actions and any associated e-mail templates before starting to configure workflow rules.</p></div></div><p>The following outlines the steps required to create a workflow rule:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Create the workflow rule and select the object.</li><li class="listitem">Configure the settings and criteria for the workflow rule.</li><li class="listitem">Specify the workflow actions.</li><li class="listitem">Activate the workflow rule.</li></ol></div><p>To create a workflow rule, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Workflow &amp; Approvals</strong></span> | <span class="strong"><strong>Workflow Rules</strong></span>.</p><p>The <span class="strong"><strong>Workflow Rules</strong></span> detail page shows a list of the current workflow rules, along with various properties such as the associated object and whether the rule is active. On this page, you can create views to help filter and manage the list of rules as the numbers increase. The following screen shows the list of all the workflow rules in our organization using the <span class="strong"><strong>All Workflow Rules</strong></span> view:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_011.jpg" alt="Configuring workflow rules"/></div><p>
</p><p>From the <span class="strong"><strong>Workflow Rules list</strong></span> page, you can click on the <span class="strong"><strong>New Rule</strong></span> button and then select an object (either a custom or standard object) on which you want to apply your new workflow rule. In the <span class="strong"><strong>Step 1: Select object</strong></span> screen shown as follows, the standard object, <span class="strong"><strong>Opportunity, </strong></span>has been selected:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_012.jpg" alt="Configuring workflow rules"/></div><p>
</p><p>Now, click on <span class="strong"><strong>Next</strong></span> to navigate and display the <span class="strong"><strong>Step 2: Configure Workflow Rule</strong></span> page to allow the rule settings and criteria to be specified, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_013.jpg" alt="Configuring workflow rules"/></div><p>
</p><div class="section" title="Configuring rule settings and criteria"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec192"/>Configuring rule settings and criteria</h2></div></div></div><p>In the <span class="strong"><strong>Edit Rule</strong></span> section, you must enter a rule name and, optionally, you may enter a description for the rule.</p><div class="section" title="Evaluation Criteria"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec197"/>Evaluation Criteria</h3></div></div></div><p>In the <span class="strong"><strong>Evaluation Criteria</strong></span> section, you choose the appropriate criteria that causes the Salesforce CRM application to trigger the workflow rule.</p><p>The criteria can be selected from the following three options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>created</strong></span>: Choose this option to ignore any subsequent updates to existing records, as the rule will only ever run once: when the record is inserted.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>created, and every time it's edited</strong></span>: Choose this option to include new record inserts and updates to existing records. These actions cause repeated triggering of the rule as long as the record meets the criteria.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note259"/>Note</h3><p>You cannot add time-dependent actions to a rule if you choose the created, and every time it's edited option.</p></div></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>created, and any time it's edited to subsequently meet criteria</strong></span>: Choose this option to include new records and updates to existing records.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note260"/>Note</h3><p>The rule is not re-triggered on record updates that do not affect the specified rule criteria.</p></div></div></li></ul></div><p>For example, if the updating of an opportunity record's probability to 90 percent causes the rule to run, with this option, the rule will only get triggered again if the probability changes and then changes back to 90 percent, regardless of how many times the record is itself updated.</p></div><div class="section" title="Rule Criteria"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec198"/>Rule Criteria</h3></div></div></div><p>In the <span class="strong"><strong>Rule Criteria</strong></span> section, there are two ways of formulating the logic used to trigger the workflow rule. They are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Run this rule if the following criteria are met</li><li class="listitem" style="list-style-type: disc">Run this rule if the following formula evaluates to true</li></ul></div><div class="section" title="Run this rule if the following criteria are met"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec35"/>Run this rule if the following criteria are met</h4></div></div></div><p>This option is displayed by default and allows you to select the filter criteria a record must meet to trigger the rule.</p><p>As an example, the filter has been set to one of the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Opportunity: Close Date equals NEXT 7 DAYS AND</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Opportunity: Closed not equal to True</strong></span></li></ul></div><p>These criteria would allow us to construct a workflow rule to notify a salesperson that they have an open opportunity with a close date that will be reached within a week:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_014.jpg" alt="Run this rule if the following criteria are met"/></div><p>
</p><p>Clicking on the <span class="strong"><strong>Add Filter Logic</strong></span> link presents additional options for adding rows and advanced filter conditions, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/B05715_07_15.jpg" alt="Run this rule if the following criteria are met"/></div><p>
</p><p>The <span class="strong"><strong>Add Row</strong></span> link allows you to add more criteria options, where up to a maximum of 25 can be added.</p><p>The <span class="strong"><strong>Filter Logic</strong></span> section allows you to use Boolean expressions to set the criteria. These expressions are known as <span class="strong"><strong>Advanced Filters</strong></span>.</p><p>For example, <span class="strong"><strong>(1 AND 2)</strong></span> results in an expression that requires both of the first two filter lines to be valid.</p></div><div class="section" title="Run this rule if the following formula evaluates to true option"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec36"/>Run this rule if the following formula evaluates to true option</h4></div></div></div><p>This option allows you to enter a formula that returns a value of <code class="literal">True</code> or <code class="literal">False</code>. The Salesforce CRM application triggers the rule if the formula returns <code class="literal">True</code>.</p><p>Workflow formulas can be used to capture complicated logic, as in the following use-case example.</p><p>Whenever an opportunity is set as lost, where the sales stage was previously <span class="strong"><strong>Negotiation/Review</strong></span> and the amount is greater than $50,000, send an e-mail or task to be sent to Sales Management for follow-up:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_016.jpg" alt="Run this rule if the following formula evaluates to true option"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note261"/>Note</h3><p>Some functions are not available in workflow rule formulas; you cannot create a formula in which a custom object references fields on a parent object.</p></div></div><p>In addition to the functions shown on the right-hand side of the <span class="strong"><strong>Rule Criteria</strong></span> section, you can also use merge fields for directly related objects in workflow-rule formulas. The <span class="strong"><strong>formula evaluates to true</strong></span> rule can be useful wherever it is needed to trigger some actions, if the value of a particular field is being changed. As for all formula-merge fields that allow you to reference fields on related objects across multiple relationships, the field name is prefixed by the name of the relationship. For standard relationships, the name of the relationship is the master object. For example, you can reference the account name merge field from an opportunity using <code class="literal">Account.Name</code>.</p><p>Click on the <span class="strong"><strong>Check Syntax</strong></span> button to validate that the formula contains no error before progressing beyond this page.</p><p>Now click on <span class="strong"><strong>Save &amp; Next</strong></span> to proceed to the <span class="strong"><strong>Step 3: Specify Workflow Actions</strong></span> page, which allows you to configure the workflow actions.</p></div></div></div><div class="section" title="Specifying the workflow actions"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec193"/>Specifying the workflow actions</h2></div></div></div><p>The <span class="strong"><strong>Specify Workflow Actions</strong></span> page allows you to add both immediate and time-dependent actions to the workflow rule, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_017.jpg" alt="Specifying the workflow actions"/></div><p>
</p><div class="section" title="Immediate workflow actions"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec199"/>Immediate workflow actions</h3></div></div></div><p>Immediate actions trigger as soon as the evaluation criteria are met. As shown in the preceding example, the Salesforce CRM application can immediately send an e-mail to the salesperson if an opportunity is created or edited and is still open seven days before the specified close date.</p></div><div class="section" title="Time-dependent workflow actions"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec200"/>Time-dependent workflow actions</h3></div></div></div><p>Time-dependent actions specify when Salesforce CRM is to execute the workflow action. As shown in the preceding example, the Salesforce CRM application can automatically send an e-mail reminder to the salesperson three days later if an opportunity is created or edited and is still open seven days before the specified close date.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip262"/>Tip</h3><p>Time-dependent actions and time triggers are complex features with several considerations Workflow rules that have time-dependent actions should be specified with a default workflow user to ensure they fire for future actions. This is in case the user who activated the workflow later leaves the organization and is set as an inactive user.</p></div></div></div><div class="section" title="Adding immediate workflow actions"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec201"/>Adding immediate workflow actions</h3></div></div></div><p>To add an immediate workflow action, click on the <span class="strong"><strong>Add Workflow Action</strong></span> drop-down selection in the <span class="strong"><strong>Immediate Workflow Actions</strong></span> section and choose either <span class="strong"><strong>New Task</strong></span>, <span class="strong"><strong>New Email Alert</strong></span>, <span class="strong"><strong>New Field Update</strong></span>, <span class="strong"><strong>New Outbound Message</strong></span>, or <span class="strong"><strong>Select Existing Action</strong></span> to select an existing action to associate with the rule:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>New Task</strong></span> to create a task to associate with the rule</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>New Email</strong></span> to create an e-mail alert to associate with the rule</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>New Field Update</strong></span> to define a field update to associate with the rule</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>New Outbound Message</strong></span> to define an outbound message to associate with the rule</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Existing Action</strong></span> to select an existing action to associate with the rule</li></ul></div></div><div class="section" title="Adding time-dependent workflow actions"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec202"/>Adding time-dependent workflow actions</h3></div></div></div><p>To add a time-dependent workflow action, click on <span class="strong"><strong>Add Time Trigger</strong></span> in the <span class="strong"><strong>Time-Dependent Workflow Actions</strong></span> section. Then, specify the number of days or hours before or after a date relevant to the record, such as the date the record was created or modified, or even for an opportunity close date, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_018.jpg" alt="Adding time-dependent workflow actions"/></div><p>
</p><p>The 
<span class="strong"><strong>Add Time Trigger</strong></span> button is not displayed and the option to create a time trigger is unavailable under the following workflow rule scenarios:
</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The workflow rule criteria has been configured to fire using the option, <span class="strong"><strong>created, and any time it’s edited to subsequently meet criteria</strong></span></li><li class="listitem" style="list-style-type: disc">The workflow rule is already active (here, you must temporarily deactivate it in order to apply the action)</li><li class="listitem" style="list-style-type: disc">The workflow rule is not active, but there are pending actions which are yet to be processed in the workflow queue</li></ul></div><p>Additional, immediate, or time-dependent actions can now be configured. Finally, click on the <span class="strong"><strong>Done</strong></span> button in the top-right corner of the screen.</p></div><div class="section" title="Activating the workflow rule"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec203"/>Activating the workflow rule</h3></div></div></div><p>The Salesforce CRM application will not trigger a workflow rule until you have manually activated it.</p><p>To activate a workflow rule, click on <span class="strong"><strong>Activate</strong></span> on the workflow rule detail page. Click on <span class="strong"><strong>Deactivate</strong></span> to stop a rule from triggering (or if you want to edit the time-dependent actions and time triggers associated with the rule):</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_019.jpg" alt="Activating the workflow rule"/></div><p>
</p></div><div class="section" title="Workflow rule considerations"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec204"/>Workflow rule considerations</h3></div></div></div><p>Consider the following when configuring workflow rules:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You can deactivate a workflow rule at any time. However, if you deactivate a rule that has pending actions, Salesforce.com completes those actions as long as the record that triggered the rule is not updated.</li><li class="listitem" style="list-style-type: disc">You cannot add time-dependent workflow actions to active workflow rules. You must deactivate the workflow rule first, add the time-dependent workflow action, and then re-activate the rule.</li><li class="listitem" style="list-style-type: disc">Workflow rules on custom objects are automatically deleted if the custom object is deleted.</li><li class="listitem" style="list-style-type: disc">You cannot create e-mail alerts for workflow rules on activity records.</li><li class="listitem" style="list-style-type: disc">Creating new records or updating existing records can trigger more than one rule.</li><li class="listitem" style="list-style-type: disc">Time-dependent field updates can retrigger the re-evaluation of workflow rules.</li><li class="listitem" style="list-style-type: disc">The order in which actions are executed is not guaranteed. Field update actions are executed first, followed by other actions.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note263"/>Note</h3><p>For custom, and some standard, objects, you can create workflow actions where a change to a detail record updates a field on the related master record.</p></div></div><p>For example, in a custom publishing application, you may create a workflow rule that sets the status of a book (the master object) to <span class="strong"><strong>In Process - Author</strong></span> when a chapter (the detail object) is being reviewed by the editor.</p><p>Cross-object field updates work for custom-to-custom master-detail relationships, custom-to-standard master-detail relationships, and a few standard-to-standard master-detail relationships. They are displayed in the following way:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_020.jpg" alt="Workflow rule considerations"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note264"/>Note</h3><p>If you require cross-object actions for standard objects such as updating a field on each <span class="strong"><strong>Opportunity Product</strong></span> record when a certain field on the <span class="strong"><strong>Opportunity</strong></span> changes, or further complex updating such as automatic record creation or deletion actions, you would need to use Process Builder, Visual Workflow or develop <span class="strong"><strong>Apex triggers</strong></span> instead of workflow rules.</p></div></div></div><div class="section" title="Monitoring the workflow queue"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec205"/>Monitoring the workflow queue</h3></div></div></div><p>You can use the time-based workflow queue to monitor any outstanding workflow rule that has time-dependent actions. Here you can view pending actions and cancel them if necessary.</p><p>To access the <span class="strong"><strong>Time-Based Workflow</strong></span> queue, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Monitoring</strong></span> | <span class="strong"><strong>Time-Based Workflow</strong></span>, where the following page is presented:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_021.jpg" alt="Monitoring the workflow queue"/></div><p>
</p><p>Click on <span class="strong"><strong>Search</strong></span> to view all the pending actions for any active time-based workflow rules, or set the filter criteria and click on <span class="strong"><strong>Search</strong></span> to view only the pending actions that match the criteria. Set the checkbox for any listed workflow rule(s) you wish to cancel and then click on <span class="strong"><strong>Delete</strong></span> to terminate the selected queued workflow rule(s).</p><p>In summary, workflow rules allow one or more actions to fire based on fields on the record (or its parent) meeting certain conditions. Workflow rules are a little more complex than validation rules, and take a bit more familiarity with Salesforce.com to properly execute. However, they can offer powerful business automation and can be implemented without any custom code or the work of a developer.</p></div></div></div>
<div class="section" title="Approval process"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec91"/>Approval process</h1></div></div></div><p>An approval process in Salesforce CRM is an automated mechanism that you can set up to process the approval of records within your organization.</p><p>Working with approval processes involves the creation of a structured set of steps to enable the sign-off of specified records that must be approved, along with specifying which users must be set to approve it at each of the steps. Here, each step can apply to all the records within the process or specified records that have certain field values. The building of approval processes also requires the setting of the required actions to be taken after the record is either first submitted, approved, rejected, or recalled for approval.</p><p>Approval processes are similar to workflow rules in the sense that they can invoke the same key actions; however, there are significant differences between workflow rules and approval processes, such as:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Workflow rules are activated when a record is saved, whereas approval processes are manually triggered by explicitly clicking on the <span class="strong"><strong>Submit for Approval</strong></span> button.</li><li class="listitem" style="list-style-type: disc">Workflow rules consist of a single step and a single action. Approval processes consist of multiple steps, where a different action is taken based upon whether the record is approved or rejected.</li><li class="listitem" style="list-style-type: disc">Workflows can be modified or deleted. In approvals, some attributes cannot be modified, and approval processes must be deactivated before outstanding approvals can be deleted.</li><li class="listitem" style="list-style-type: disc">Approval processes result in the approval history being automatically tracked, which is not applied to workflow rules.</li><li class="listitem" style="list-style-type: disc">When an approval is initiated, the record is locked down and cannot be changed by someone, other than the approver or system administrator, until the record has completed the approval process.</li></ul></div><p>Approval processes require a good understanding of your business rules and processes in order to be successfully implemented.</p><p>They must, therefore, be implemented correctly, so that records are locked down only when necessary to avoid hindering Salesforce users that are attempting to update records.</p><p>Approval processes can, however, be a powerful mechanism to control an internal process that must be completed as part of a business process.</p><p>Example uses for approval processes are obtaining management sign-off before quotes or contracts are sent to customers or prospects for certain deals, or getting authorization before users are set up in the Salesforce CRM application itself. In this example, the user activation request could be approved by the sales management team and individuals from other departments, such as finance, before the user license is obtained and the user record created.</p><p>In the same way as workflow actions, approval actions consist of e-mail alerts, tasks, field updates, and outbound messages that can be triggered by the approval process.</p><p>The following outlines the work items required to configure approval processes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Providing the name of the process</li><li class="listitem" style="list-style-type: disc">Specifying the entry criteria for the records</li><li class="listitem" style="list-style-type: disc">Specifying who is going to approve</li><li class="listitem" style="list-style-type: disc">Specifying the e-mail template</li><li class="listitem" style="list-style-type: disc">Determining the fields to be displayed on the approver page</li><li class="listitem" style="list-style-type: disc">Specifying who is going to send the approval mail</li></ul></div><div class="section" title="Approval process checklist"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec194"/>Approval process checklist</h2></div></div></div><p>It is useful to plan Salesforce CRM approval processes carefully to help ensure a successful and smooth implementation. The following checklist specifies the required information and prerequisites needed before starting to configure your approval process:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Determine the steps and how many levels your process has. It is often useful to map out the process using a charting tool such as Microsoft Visio.</li><li class="listitem" style="list-style-type: disc">Decide if users can approve requests by e-mail and set up this feature accordingly.</li><li class="listitem" style="list-style-type: disc">Create an approval-request e-mail template.</li><li class="listitem" style="list-style-type: disc">Determine the approval-request sender.</li><li class="listitem" style="list-style-type: disc">Determine the assigned approver.</li><li class="listitem" style="list-style-type: disc">Determine the delegated approver, if necessary.</li><li class="listitem" style="list-style-type: disc">Decide if your approval process needs a filter.</li><li class="listitem" style="list-style-type: disc">Design initial submission actions.</li><li class="listitem" style="list-style-type: disc">Determine if users can edit records that are awaiting approval.</li><li class="listitem" style="list-style-type: disc">Decide if records should be auto-approved or rejected.</li><li class="listitem" style="list-style-type: disc">Determine the actions when an approval request is approved or rejected.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip265"/>Tip</h3><p>Salesforce recommends that you educate users about each approval process and the entry criteria for the approval process. This is because users have no visibility of which approval processes are fired when the <span class="strong"><strong>Submit for Approval</strong></span> button is pressed. Furthermore, Salesforce shows an error if the user is not an allowed submitter for the approval process or the record does not meet the entry criteria.</p></div></div></div><div class="section" title="Approvals in Chatter"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec195"/>Approvals in Chatter</h2></div></div></div><p>If your organization has both Approvals and Chatter enabled, you can activate Approvals in Chatter, which enables users to receive approval requests in their Chatter feeds. To enable <span class="strong"><strong>Approvals in Chatter</strong></span>, navigate to <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Customize</strong></span> | <span class="strong"><strong>Chatter</strong></span> | <span class="strong"><strong>Chatter Settings</strong></span>. Click the <span class="strong"><strong>Edit</strong></span> button and check the <span class="strong"><strong>Allow Approvals</strong></span> checkbox, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_022.jpg" alt="Approvals in Chatter"/></div><p>
</p><p>The approval request appears as a Chatter post, which you can customize by creating unique post templates and associating them with the approval processes.</p></div><div class="section" title="Approvals in Chatter checklist"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec196"/>Approvals in Chatter checklist</h2></div></div></div><p>To ensure that your users will see their approval requests as Chatter posts and everything works correctly, it is recommended that you follow this checklist when you are ready to activate <span class="strong"><strong>Approvals in Chatter</strong></span> for your organization:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create an approval process as described in the <span class="emphasis"><em>Configuring approval processes</em></span> section in this chapter.</li><li class="listitem" style="list-style-type: disc">Enable <span class="strong"><strong>Chatter feed</strong></span> tracking for the object on which your approval process is based (this is described in <a class="link" href="ch08.html" title="Chapter 8. Introducing Sales Cloud, Service Cloud, and the Collaborative Features of Salesforce CRM">Chapter 8</a>, <span class="emphasis"><em>Introducing Sales Cloud, Service Cloud, and Collaborative Features of Salesforce CRM</em></span>).</li><li class="listitem" style="list-style-type: disc">Create an approval post template for the object on which your approval process is based. If you want to make this the default template for all approval processes on this object, be sure to check the <span class="strong"><strong>Default</strong></span> checkbox when configuring your post template as described in the <span class="emphasis"><em>Configuring approval processes</em></span> section in this chapter .</li><li class="listitem" style="list-style-type: disc">Activate the <span class="strong"><strong>Enable Approvals in Chatter</strong></span> setting.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note266"/>Note</h3><p>Activating the Enable Approvals in Chatter setting as the last step ensures that all approval processes are properly configured to make use of it and, once activated, all existing active approval processes will start generating Chatter approval posts.</p></div></div></div></div>
<div class="section" title="Configuring approval processes"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec92"/>Configuring approval processes</h1></div></div></div><p>To create an approval process, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Launch the approval process wizard.</li><li class="listitem">Specify <span class="strong"><strong>Name</strong></span>, <span class="strong"><strong>UniqueName</strong></span>, and <span class="strong"><strong>Description</strong></span>.</li><li class="listitem">Specify <span class="strong"><strong>Criteria</strong></span> for <span class="strong"><strong>EnteringProcess</strong></span>.</li><li class="listitem">Specify <span class="strong"><strong>Approver Field</strong></span> and <span class="strong"><strong>Record Editability</strong></span>.</li><li class="listitem">Select <span class="strong"><strong>Email Notification Template</strong></span>.</li><li class="listitem">Configure <span class="strong"><strong>Approval Request Page Layout</strong></span>.</li><li class="listitem">Specify <span class="strong"><strong>Initial Submitters</strong></span>.</li><li class="listitem">Activate the approval process.</li></ol></div><div class="section" title="Choosing an approval process wizard"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec197"/>Choosing an approval process wizard</h2></div></div></div><p>When you click on the <span class="strong"><strong>Create New Approval Process</strong></span> button to start creating an approval process, you are presented with the following two options in which to build the process: <span class="strong"><strong>Use Jump Start Wizard</strong></span> or <span class="strong"><strong>Use Standard Setup Wizard</strong></span>. The following sections outline the differences between these two mechanisms.</p><div class="section" title="Jump Start Wizard"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec206"/>Jump Start Wizard</h3></div></div></div><p>The<span class="strong"><strong> Jump Start Wizard</strong></span> is provided as a quick way to create simple approval processes that have a single step. To simplify the settings, with this option the Salesforce CRM application automatically determines some default options for you.</p></div><div class="section" title="Standard Setup Wizard"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec207"/>Standard Setup Wizard</h3></div></div></div><p>The<span class="strong"><strong> Standard Setup Wizard</strong></span> enables the creation of complex approval processes, and is used where multiple processing steps are required. This option provides the mechanisms to define your process and then uses a setup wizard to define each step within that process.</p><p>To create an approval process, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Workflow &amp; Approvals</strong></span> | <span class="strong"><strong>Approval Processes</strong></span>.</p><p>Choose the object for the new approval process, click on it, and then select <span class="strong"><strong>Use Standard Setup Wizard</strong></span>, as shown in the following screenshot, where we have selected <span class="strong"><strong>Opportunity</strong></span>:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_023.jpg" alt="Standard Setup Wizard"/></div><p>
</p><p>To set the details for the approval process, carry out the following:</p><p>In <span class="strong"><strong>Step 1</strong></span>. Enter Name and Description page (where this is step 1 of 6): enter a <span class="strong"><strong>Process Name</strong></span>, a <span class="strong"><strong>Unique Name</strong></span>, and optionally a <span class="strong"><strong>Description</strong></span>, and then click on <span class="strong"><strong>Next</strong></span>
</p><p>To specify the entry criteria, which is an optional step on the <span class="strong"><strong>Step 2. Specify Entry Criteria</strong></span> page and is used to determine the records that enter the approval process, you can either choose from the formula logic, or you can select certain fields, operators, and values to specify when the desired criteria are met. This is shown in the following screenshot, which is presented as Step 2 of 6:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_024.jpg" alt="Standard Setup Wizard"/></div><p>
</p><p>In <span class="strong"><strong>Step 2</strong></span>:<span class="strong"><strong> Specify Entry Criteria</strong></span>, either enter the filter criteria for records that are to be included by this approval process, or leave all the filters blank to have all records submitted within the approval process.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip267"/>Tip</h3><p>
<span class="strong"><strong>Restricting the approval process for specific users</strong></span>:</p><p>If only specific users are involved in this approval process, you can specify it here. For example, if only the sales team is to submit opportunity reviews, enter the following filter criteria: <span class="strong"><strong>Current User: Department Equals Sales</strong></span>. As shown in the preceding screenshot, in the fourth entry criteria row where <span class="strong"><strong>Field</strong></span> is <span class="strong"><strong>Current User: Department</strong></span>, <span class="strong"><strong>Operator</strong></span> is <span class="strong"><strong>equals</strong></span> and <span class="strong"><strong>Value</strong></span> is <span class="strong"><strong>Sales</strong></span>.</p></div></div><p>Click on <span class="strong"><strong>Next</strong></span> to set the <span class="strong"><strong>Specify Approver Field andRecord Editability</strong></span> options.</p><p>In this step (step 3 of 6), you would specify who the users are for the approval steps in Salesforce CRM. Here, a user field can be used to automatically route approval requests. This field can be the <span class="strong"><strong>Manager</strong></span> field on an individual's user record, or you can create a custom hierarchical (User to User) field on the User object.</p><p>In <span class="strong"><strong>Step 3. Specify Approver Field and Record Editability Properties</strong></span>, using the <span class="strong"><strong>Next Automated Approver Determined By </strong></span>picklist, select a user field if you want the Salesforce CRM application to automatically assign approval requests to an approver based on the value in the user field. For example, you may want to automatically send approval requests to a user's manager as specified in the user's <span class="strong"><strong>Manager</strong></span> field, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_025.jpg" alt="Standard Setup Wizard"/></div><p>
</p><p>To allow users to manually choose another user that will approve any approval requests, leave the <span class="strong"><strong>Next Automated Approver Determined By</strong></span> field blank:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">By selecting the <span class="strong"><strong>Use Approver Field of Record Owner</strong></span> checkbox, you can set the approval process to use the standard <span class="strong"><strong>Manager</strong></span> field or a custom field on the record owner's user record instead of the submitting user's record.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note268"/>Note</h3><p>If you set the Use Approver Field of Record Owner checkbox (applying the manager of the record owner instead of the manager of the submitting user), it is applied to all subsequent steps.</p></div></div></li><li class="listitem" style="list-style-type: disc">Select the appropriate<span class="strong"><strong> Record Editability Properties</strong></span> and click on <span class="strong"><strong>Next</strong></span>.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note269"/>Note</h3><p>When a record is in the approval process, it is always locked, and only you as system administrator can edit it. However, you can specify that the currently assigned approver can also edit the record.</p></div></div></li><li class="listitem" style="list-style-type: disc">When an approval process assigns an approval request to a user, Salesforce.com automatically sends the user an approval request e-mail. This e-mail contains a web link that the user can click on to access the approval page within the Salesforce CRM application, which lets the user approve or reject the request and also enter comments.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip270"/>Tip</h3><p>By enabling e-mail approval response, the user can alternatively reply to the e-mail by typing approve, approved, yes, reject, rejected, or no in the first line of the e-mail body, and then add comments in the second line. This option makes it easy to approve or reject approval requests, and is especially useful for users who access approval requests using a mobile device.</p></div></div></li><li class="listitem" style="list-style-type: disc">In <span class="strong"><strong>Step 4. Select Notification Templates</strong></span>, you can choose a custom e-mail template to be used when notifying an approver that an approval request has been assigned to them, as shown in the following screenshot for the example <span class="strong"><strong>Approval Request</strong></span> template. Alternatively, by leaving this field blank, a simple default e-mail template is used. In addition, if <span class="strong"><strong>Approvals in Chatter</strong></span> has been enabled, you can also choose an <span class="strong"><strong>Approval Post Template</strong></span>, as shown in the following screenshot:<p>
</p><div class="mediaobject"><img src="graphics/image_07_026.jpg" alt="Standard Setup Wizard"/></div><p>
</p></li></ul></div></div><div class="section" title="E-mail approval response"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec208"/>E-mail approval response</h3></div></div></div><p>By enabling e-mail approval response, the user can alternatively reply to the e-mail by typing approve, approved, yes, reject, rejected, or no in the first line of the e-mail body. To enable <span class="strong"><strong>Email Approval Response</strong></span>, navigate to <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Customize</strong></span> | <span class="strong"><strong>Workflow &amp; Approvals</strong></span> | <span class="strong"><strong>Process Settings</strong></span>. Now check the <span class="strong"><strong>Enable Email Approval Response</strong></span> checkbox, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/B05715_07_27.jpg" alt="E-mail approval response"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note271"/>Note</h3><p>If the e-mail approval response is enabled and the user does not respond correctly, perhaps by misspelling the word <span class="emphasis"><em>approve</em></span> or typing it on the wrong line, the Salesforce CRM application will not process the incorrect response made by the user.</p></div></div><p>Within the <span class="strong"><strong>Step 5. Select Fields to Display on Approval Page Layout</strong></span> page, the option to configure the approval request page layout can be carried out as shown in the following example:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_028.jpg" alt="E-mail approval response"/></div><p>
</p><p>The approval page is where an approver approves or rejects a request, and it is on <span class="strong"><strong>Step 5. Select Fields to Display on Approval Page Layout</strong></span> of configuring the approval process where you can carry out the following:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select and sort the fields you want to display on the approval request page.</li><li class="listitem">Select <span class="strong"><strong>Display approval history information</strong></span> in addition to the field selected previously to include the <span class="strong"><strong>Approval History</strong></span>-related list, which displays the <span class="strong"><strong>Date</strong></span>, <span class="strong"><strong>Status</strong></span>, <span class="strong"><strong>Assigned To</strong></span>, <span class="strong"><strong>Actual Approver</strong></span>, <span class="strong"><strong>Comments</strong></span>, and <span class="strong"><strong>Overall Status</strong></span> columns on the resulting approval request page, as shown in the following screenshot:<p>
</p><div class="mediaobject"><img src="graphics/image_07_029.jpg" alt="E-mail approval response"/></div><p>
</p></li><li class="listitem">To specify how approvers can access an approval page, select either <span class="strong"><strong>Allow approvers to access the approval page only from within the application. (Recommended), Allow approvers to access the approval page from within the salesforce.com application</strong></span>, or <span class="strong"><strong>externally from a wireless-enabled mobile device</strong></span>, and then click on <span class="strong"><strong>Next</strong></span> (as shown previously in the step 5 screenshot).</li><li class="listitem">Now specify <span class="strong"><strong>Initial Submitters</strong></span>, as shown in the following screenshot:<p>
</p><div class="mediaobject"><img src="graphics/image_07_030.jpg" alt="E-mail approval response"/></div><p>
</p></li><li class="listitem">Specify which users are allowed to submit records for approval.</li><li class="listitem">Optionally, select <span class="strong"><strong>Add the Approval History related list to all Opportunity page layouts</strong></span> (as shown for the <span class="strong"><strong>Opportunity</strong></span> object-related approval). This will automatically update all the page layouts for this object and include a related list that allows users to view and submit approval requests.</li><li class="listitem">Optionally, select Allow submitters to recall approval requests to give submitters the option to withdraw their approval requests.</li></ol></div><p>When the <span class="strong"><strong>Allow submitters to recall approval requests</strong></span> option is selected, the <span class="strong"><strong>Recall Approval Request</strong></span> button in the <span class="strong"><strong>Approval History</strong></span>-related list is visible for the users that have submitted the record, as well as you, as system administrator.</p><p>When a user clicks on <span class="strong"><strong>Recall Approval Request</strong></span>, the pending approval request for the record is withdrawn and the recall action is run.</p><p>This option is required for scenarios where changes occur to the record while waiting for approval sign-off. For example, an opportunity might be set to lost or the amount might be lowered below the approval threshold after it has been submitted for approval, or the current approver may be on vacation and the approval needs to be resubmitted and sent to a different user for approval.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip272"/>Tip</h3><p>Ensure that the recall action resets the state of the record and any field updates that occurred during the initial submission are rolled-back if necessary. If the state of the record is not returned to how it was before the initial submission any attempt to re-submit the approval may fail or the approval may fail to function correctly.</p></div></div><p>Now click on <span class="strong"><strong>Save</strong></span>, then <span class="strong"><strong>Next</strong></span>, and finally, click on the <span class="strong"><strong>Activate</strong></span> button next to the process.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note273"/>Note</h3><p>You will be unable to activate the process until you have created at least one approval step for the approval process.</p></div></div></div></div><div class="section" title="Creating approval steps"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec198"/>Creating approval steps</h2></div></div></div><p>Approval steps in Salesforce CRM set the flow of the record approval process that associates the participating users at each chain of approval. For each approval step, we set who can approve requests for the records, what the record must contain to meet the criteria, and why the record should be allowed to be approved (in the case of a delegated approver).</p><p>In addition, the very first approval step in a process also specifies the action required whenever the record fails to reach that step. Later steps then require you to set the action to be taken whenever an approver rejects the request.</p><p>To create an approval step, follow the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Workflow &amp; Approvals</strong></span> | <span class="strong"><strong>Approval Processes</strong></span> and select the name of the approval process, and then carry out the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Click on the <span class="strong"><strong>New Approval Step</strong></span> button from the <span class="strong"><strong>Approval Steps</strong></span>-related list section<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note274"/>Note</h3><p>For both Enterprise and Unlimited Editions, there is a limit of 30 steps per process.</p></div></div></li><li class="listitem" style="list-style-type: disc">Enter the <span class="strong"><strong>Name</strong></span>, a <span class="strong"><strong>Unique Name</strong></span>, and an optional <span class="strong"><strong>Description</strong></span> for the approval step</li><li class="listitem" style="list-style-type: disc">Enter a step number that positions the step in relation to any other step in the approval process, as shown in the following screenshot, and click on <span class="strong"><strong>Next</strong></span>:<p>
</p><div class="mediaobject"><img src="graphics/image_07_031.jpg" alt="Creating approval steps"/></div><p>
</p></li></ul></div><p>On this page, you specify that either all records should enter this step or that only records with certain attributes should enter this step, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_032.jpg" alt="Creating approval steps"/></div><p>
</p><p>If you specified the filter criteria or entered a formula, you can choose what should happen to records that do not meet the criteria or if the formula returns <code class="literal">False</code>, where the options are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Approve record</strong></span> to automatically approve the request and perform all final approval actions.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Reject record</strong></span> to automatically reject the request and perform all final rejection actions. This option is only available for the first step in the approval process.</li></ul></div><p>Now click on <span class="strong"><strong>Next</strong></span> to display the page <span class="strong"><strong>Step 3. Select Assigned Approver</strong></span>, where you specify the user who should approve records that enter this step and, optionally, choose whether the approver's delegate is also allowed to approve these requests, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_033.jpg" alt="Creating approval steps"/></div><p>
</p><p>The options are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Let the submitter choose the approver manually</strong></span>, which prompts the user to manually select the next approver</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Automatically assign using the user field selected earlier</strong></span>, which assigns the approval request to the user in the custom field that is displayed next to this option (where this custom field was selected during the earlier configuration of the approval process, which in the preceding screenshot is <span class="strong"><strong>(Manager)</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Automatically assign to approver(s)</strong></span>, which allows you to assign the approval request to one or more users or related users, as shown in the following screenshot:</li></ul></div><p>
</p><div class="mediaobject"><img src="graphics/image_07_034.jpg" alt="Creating approval steps"/></div><p>
</p><p>If you specify multiple approvers in the <span class="strong"><strong>Automatically assign to approver(s)</strong></span> option, choose one of the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Approve or reject based on the FIRST response</strong></span>, whereby the first response to the approval request determines whether the record is approved or rejected.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Require UNANIMOUS approval from all selected approvers</strong></span>, whereby the record is only approved if all of the approvers approve the request. If any of the approvers reject the request, then the approval request is rejected.<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note275"/>Note</h3><p>For custom objects and most standard objects, you can set a queue to be included as part of the automatically assigned approver option. At the time of writing, approval processes for <span class="strong"><strong>Opportunities</strong></span>, <span class="strong"><strong>Solutions</strong></span>, and <span class="strong"><strong>Quotes</strong></span> cannot be assigned to queues.</p></div></div></li></ul></div><p>Also on this page, there is the option to specify that <span class="strong"><strong>The approver's delegate may also approve this request</strong></span>, where the delegate user is set in the <span class="strong"><strong>Delegated Approver</strong></span> field on the assigned approver's user page.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note276"/>Note</h3><p>Delegated approvers cannot reassign approval requests, and they are only permitted to approve or reject approval requests.</p></div></div><p>If this is not the first step in the approval process, you must specify what will happen if the approver rejects a request in this step, as shown in the following example, where the options are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Perform all rejection actions for this step and all final rejection actions (Final Rejection).</li><li class="listitem" style="list-style-type: disc">Perform only the rejection actions for this step and send the approval request back to the most recent approver (go back one step).<div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note277"/>Note</h3><p>For both Enterprise and Unlimited Editions, each approval step can have up to 25 approvers.</p></div></div></li></ul></div><p>Now click on <span class="strong"><strong>Save</strong></span> and specify any workflow action you want to set within this step using the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Yes, I'd like to create a new approval action for this step now</li><li class="listitem" style="list-style-type: disc">Yes, I'd like to create a new rejection action for this step now</li><li class="listitem" style="list-style-type: disc">No, I'll do this later. Take me to the approval process detail page to review what I've just created.</li></ul></div><p>Finally, click on <span class="strong"><strong>Go!</strong></span> to complete the approval process.</p></div><div class="section" title="Measuring and refining"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec199"/>Measuring and refining</h2></div></div></div><p>Although you will need to plan for successful implementation of approval processes, it is highly likely that they will need to change over time. This could be due to a change of business processing, or refinement of the process within the Salesforce CRM application.</p><p>It is therefore a good idea to create analytics to help measure and verify that the approval process is operating successfully. You could, for example, produce reports and dashboards to measure how long approvals take through the process and identify any areas of the process that are not working as expected and refine them accordingly. See 
<a class="link" href="ch06.html" title="Chapter 6. Generating Data Analytics with Reports and Dashboards">Chapter 6</a>, <span class="emphasis"><em>Generating Data Analytics with Reports and Dashboards</em></span>
 for details of how to produce reports and dashboards. </p></div><div class="section" title="Process visualizer"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec200"/>Process visualizer</h2></div></div></div><p>The process visualizer provides a read-only representation of your saved approval processes. It can be accessed by clicking on the <span class="strong"><strong>View Diagram</strong></span> button from within the saved approval process, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_035.jpg" alt="Process visualizer"/></div><p>
</p><p>The following screen is displayed for the simple two-step approval process for reviewing opportunity deals that are greater than 100k:</p><p>
</p><div class="mediaobject"><img src="graphics/B05715_07_36.jpg" alt="Process visualizer"/></div><p>
</p><p>With the process visualizer, you can also print an annotated version of the approval process, where numbers appearing on the diagram correspond to details in a table, which is included in the printable view.</p><p>Having the process set out diagrammatically can help in the understanding of the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The steps necessary for a record to be approved</li><li class="listitem" style="list-style-type: disc">The designated approvers for each step</li><li class="listitem" style="list-style-type: disc">The criteria used to trigger the approval process</li><li class="listitem" style="list-style-type: disc">The specific actions taken when a record is approved, rejected, recalled, or first submitted for approval</li></ul></div><p>In summary, approval processes can be a powerful tool to monitor an internal process that must be completed prior to moving forward with the business activities. They also provide great visibility into the timeliness of the business process. Here, you can use approvals to capture the length of time it takes to get expenses, say, approved, which can then help to put measures in place to improve organizational processes.</p></div></div>
<div class="section" title="Visual Workflow"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec93"/>Visual Workflow</h1></div></div></div><p>Visual Workflow allows you to build collections of screens, known as <span class="strong"><strong>flows</strong></span>, to guide users through the process of collecting and updating data.</p><p>Working with flows involves the creation of a structured set of steps to enable users to complete specified business processes. These business processes could be, for example, call scripts for a customer support team, questionnaires and surveys for customers or employee interaction, or processes to handle incoming sales enquiries for your organization.</p><p>Use cases for flows are many and varied, and the <span class="strong"><strong>Visual Workflow</strong></span> options allow you to create screens that collect and display information, create and update Salesforce records, and carry out logic based on input from users, all from within the drag-and-drop <span class="strong"><strong>Visual Workflow</strong></span> user interface.</p><div class="section" title="Configuring Visual Workflow"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec201"/>Configuring Visual Workflow</h2></div></div></div><p>Working with Visual Workflow involves the following three concepts: flow design, flow management, and runtime. Flow design and management are carried out using the Flow Designer, which is part of the Salesforce CRM setup options. Once the flow has been designed and created, you can then manage it by setting properties, activating, deactivating, deleting, or running it all from within the Salesforce CRM application. Finally, users can then run activated flows, again from within Salesforce. Here, you can configure the flow to be run from a custom button, link or tab, from within a Visualforce page, or directly, using the Salesforce flow URL.</p></div><div class="section" title="Flow Designer"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec202"/>Flow Designer</h2></div></div></div><p>Visual Workflow and Flow Designer are accessed by following the path <span class="strong"><strong>Setup</strong></span> | <span class="strong"><strong>Create</strong></span> | <span class="strong"><strong>Workflow</strong></span> | <span class="strong"><strong>Flows</strong></span>.</p><p>To create and manage flows in Cloud Flow Designer, click on <span class="strong"><strong>New Flow</strong></span> or edit an existing flow.</p><p>Flow Designer has a drag and drop user interface that lets you configure screens and define branching logic without writing any code, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/B05715_07_37.jpg" alt="Flow Designer"/></div><p>
</p><p>The Flow Designer user interface has the following features and functional sections:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Buttons in the button-bar section let you save, close, undo or redo, view properties of, or run the flow.</li><li class="listitem" style="list-style-type: disc">Status indicator on the right-hand side of the bar indicates that the flow is active, saved, or whether it has any warnings or errors.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Palette</strong></span> tab lists all the element types available for the flow. Here you can drag and drop elements from the <span class="strong"><strong>Palette</strong></span> onto the <span class="strong"><strong>Canvas</strong></span> to configure them.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Resources</strong></span> tab lets you create new resources for the flow, such as variables, constants, formulas, and so on. Once created, the new resources will appear in the <span class="strong"><strong>Explorer</strong></span> tab.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Explorer</strong></span> tab is a library of all the elements and resources that have been created for the flow.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Description</strong></span> pane is used to show details for the selected item when you click on them in the <span class="strong"><strong>Pallet</strong></span>, <span class="strong"><strong>Resources</strong></span>, and <span class="strong"><strong>Explorer</strong></span> tabs.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Canvas</strong></span> is where your flow is built. Here, elements are added from the <span class="strong"><strong>Palette</strong></span> then configured and connected to create the structured set of steps for the flow.</li></ul></div></div><div class="section" title="Flow Designer considerations"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec203"/>Flow Designer considerations</h2></div></div></div><p>It is useful to have a general idea for how the flow will be built in Salesforce CRM to help ensure a successful and smooth implementation. Consider the following considerations before starting to configure your flow:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Use a <span class="strong"><strong>Step</strong></span> element as a placeholder if you are unsure of exactly which element you need at a given point in the flow. This allows for the iterative building of the flow, allowing you to further refine it as your understanding of the process develops.</li><li class="listitem" style="list-style-type: disc">To select multiple elements, either use the left-mouse to click and select an area around the multiple elements to highlight them, or use control-click to select individual elements. You can then press the <span class="emphasis"><em>
<span class="strong"><strong>Delete</strong></span>
</em></span> button on your keyboard to delete them all at once.</li><li class="listitem" style="list-style-type: disc">To view the description or details for an item in the <span class="strong"><strong>Palette</strong></span>, <span class="strong"><strong>Resources</strong></span>, or <span class="strong"><strong>Explorer</strong></span> tab, click on the item and look at the caption in the <span class="strong"><strong>Description</strong></span> pane.</li></ul></div><p>Now, let's look at the <span class="strong"><strong>Palette</strong></span>, <span class="strong"><strong>Resources</strong></span>, and <span class="strong"><strong>Explorer</strong></span> tabs in more detail.</p></div><div class="section" title="The Palette tab"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec204"/>The Palette tab</h2></div></div></div><p>The <span class="strong"><strong>Palette</strong></span> tab lists the element types available for the flow. Here, you can drag and drop elements from the <span class="strong"><strong>Palette</strong></span> tab onto the main canvas. Once created, the new elements appear in the <span class="strong"><strong>Explorer</strong></span> tab.</p><p>Elements are the key aspects of building flows. They represent an action such as collecting or displaying information from users, or querying, creating, updating, and deleting data records. Elements can be connected to create a structured set of steps consisting of screens, inputs, outputs, and branch logic through which users are guided.</p><div class="section" title="Elements"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec209"/>Elements</h3></div></div></div><p>The following elements are available in Cloud Flow Designer:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Step</strong></span>: A placeholder element you can use to quickly sketch out a flow and then convert into a Screen element</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Screen</strong></span>: A user-facing screen that can be used to collect input or display output</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Decision</strong></span>: Uses conditions to determine where to route users next in the flow</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Assignment</strong></span>: Set or change the value of variables</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Record Create</strong></span>: Create a new record and insert resource values into its fields</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Record Update</strong></span>: Update one or multiple records' fields with resource values</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Record Lookup</strong></span>: Find a record and assign its fields to variables</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Record Delete</strong></span>: Delete records that match certain criteria</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Subflows</strong></span>: Nested flow</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Apex Plug-In</strong></span>: Logic built in Apex code via apex classes or AppExchange packages</li></ul></div><div class="section" title="Using the Step element"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec37"/>Using the Step element</h4></div></div></div><p>From within the <span class="strong"><strong>Draft Tools</strong></span> section, the <span class="strong"><strong>Step</strong></span> element can be used to diagram the flow of your business process. The <span class="strong"><strong>Step</strong></span> element is simply a placeholder, and it cannot be used in an active flow. It is used instead to quickly diagram out the series of steps for the business process that is being built. Once you have each <span class="strong"><strong>Step</strong></span> in place and you want to get the flow activated, you can hover over the <span class="strong"><strong>Step</strong></span> and click on the <span class="strong"><strong>Convert Element</strong></span> (double arrow icon) option. This then enables the conversion of the draft <span class="strong"><strong>Step</strong></span> into a <span class="strong"><strong>Screen</strong></span> element, which is the building block for every flow.</p></div><div class="section" title="Using the Screen element"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec38"/>Using the Screen element</h4></div></div></div><p>The <span class="strong"><strong>Screen</strong></span> element can be created by using the <span class="strong"><strong>Convert Element</strong></span> option on a <span class="strong"><strong>Step</strong></span> element as described previously, or it can be created from within the <span class="strong"><strong>USER INTERFACE</strong></span> section. The screen elements contain the series of windows that the user will see, along with the built-in navigational buttons (for previous and next).</p><p>The <span class="strong"><strong>Screen</strong></span> element has various options for user interaction, and it is from the <span class="strong"><strong>Add a Field</strong></span> tab on the <span class="strong"><strong>Edit</strong></span> screen where you can select from the following sections: <span class="strong"><strong>INPUTS</strong></span>, <span class="strong"><strong>CHOICES</strong></span>, <span class="strong"><strong>MULTI-SELECT CHOICES</strong></span>, or <span class="strong"><strong>OUTPUTS</strong></span>, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_038.jpg" alt="Using the Screen element"/></div><p>
</p></div><div class="section" title="Using the Decision element"><div class="titlepage"><div><div><h4 class="title"><a id="ch07lvl4sec39"/>Using the Decision element</h4></div></div></div><p>Having interacted with a <span class="strong"><strong>Screen</strong></span> element, the user may then need to be directed along a specified path in the flow depending on how they responded. The <span class="strong"><strong>Decision</strong></span> element under the <span class="strong"><strong>LOGIC</strong></span> section allows you to configure how users move through the flow by setting up conditions for each decision outcome.</p><p>The <span class="strong"><strong>Decision</strong></span> element is used to navigate the flow and route the user to the next screen or interaction based on their response within the previous <span class="strong"><strong>Screen</strong></span> element. Within the <span class="strong"><strong>Decision</strong></span> element, you can create an <span class="strong"><strong>Editable Outcome</strong></span> for each of the responses, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_039.jpg" alt="Using the Decision element"/></div><p>
</p></div></div></div><div class="section" title="The Resources tab"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec205"/>The Resources tab</h2></div></div></div><p>The <span class="strong"><strong>Resources</strong></span> tab lets you create new resources for the flow, such as <span class="strong"><strong>Variable</strong></span>, <span class="strong"><strong>Constant</strong></span>, <span class="strong"><strong>Formula</strong></span>, and so on, as shown in the following screenshot:</p><p>
</p><div class="mediaobject"><img src="graphics/image_07_040.jpg" alt="The Resources tab"/></div><p>
</p><p>After new resources have been created or items from the <span class="strong"><strong>Palette</strong></span> tab have been added to a flow, they appear in the <span class="strong"><strong>Explorer</strong></span> tab.</p></div><div class="section" title="The Explorer tab"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec206"/>The Explorer tab</h2></div></div></div><p>By double-clicking on items in the Explorer tab, you can access the edit page for them. You can click on an item to view details for the item in the <span class="strong"><strong>Description</strong></span> pane. When viewing items within the <span class="strong"><strong>Explorer</strong></span> tab, the <span class="strong"><strong>Description</strong></span> pane includes two subtabs:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Properties</strong></span>: Shows you information about the element or resource you have selected, such as its label, unique name, description, and data type.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Usage</strong></span>: Lists the elements where the selected item is used. To see where one of the listed elements is located on the canvas, hover over it and click on the magnify icon, as shown in the following screenshot:</li></ul></div><p>
</p><div class="mediaobject"><img src="graphics/image_07_041.jpg" alt="The Explorer tab"/></div><p>
</p></div><div class="section" title="Saving a flow"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec207"/>Saving a flow</h2></div></div></div><p>After you have created a flow in Flow Designer, the options for saving are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Initial save</strong></span>: When saving for the first time, a dialog box appears. Enter a flow name, unique name, and description. Once the flow has been saved, the unique name cannot be modified.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Quick save</strong></span>: Once you have saved the flow, the <span class="strong"><strong>Save</strong></span> button works as a quick-save, overwriting your previous work. Note that the <span class="strong"><strong>Save</strong></span> button is unavailable when editing active flows. Here, you must use <span class="strong"><strong>Save As</strong></span> to save the changes as either a new flow or a new version of the flow.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Save as</strong></span>: Once you have saved the flow, this button is available with two options: <span class="strong"><strong>Save As New Flow</strong></span>, which opens a dialog box where you can input new details and save as an entirely new flow, or <span class="strong"><strong>Save As New Version</strong></span>, which saves the flow as a new version of the current flow (as shown in the following screenshot). This option is useful if you are about to make changes to a flow and want to keep the old flow as a backup, just in case you need to retrieve it later:<p>
</p><div class="mediaobject"><img src="graphics/image_07_042.jpg" alt="Saving a flow"/></div><p>
</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note278"/>Note</h3><p>
<span class="strong"><strong>Consider the following when saving a flow or flow version</strong></span>:</p><p>If you have the flow detail page open in one browser tab, then open a flow version in a new browser tab to edit it, after saving and closing it, you must refresh the first flow detail page before you can successfully run the flow version you just edited. If you have changed the flow properties and for some reason the save fails, the flow properties do not revert to the previous values. Each flow can have up to 50 versions. You can update the flow name and description when you save a new version, but not the unique name.</p></div></div></li></ul></div></div><div class="section" title="Flow runtime considerations"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec208"/>Flow runtime considerations</h2></div></div></div><p>Flows can be run directly from the flow URL or from a custom <span class="strong"><strong>Web</strong></span> tab, link, or button pointing to the flow URL.</p><p>Depending on how you wish to set up flows for your users, you have the following specific options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Add it as a custom link on a detail page</li><li class="listitem" style="list-style-type: disc">Add it as a custom button on a detail page</li><li class="listitem" style="list-style-type: disc">Add it as a link on the Home page</li><li class="listitem" style="list-style-type: disc">Add it as a flow within a Visualforce page</li></ul></div><p>In order to run flows, users require either one of the following permissions to be set up:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Run Flows</strong></span> profile permission</li><li class="listitem" style="list-style-type: disc">Force.com <span class="strong"><strong>Flow User</strong></span> field enabled on the user detail page</li></ul></div><p>Consider the following when running flows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Do not use the browser's back or forward buttons to navigate through a flow. This may result in inconsistent data between the flow and Salesforce.</li><li class="listitem" style="list-style-type: disc">A single flow may have up to 50 different versions. When users run a flow, they see the active version, which may not necessarily be the latest version.</li></ul></div></div></div>
<div class="section" title="Introduction to Lightning Process Builder"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec94"/>Introduction to Lightning Process Builder</h1></div></div></div><p>Lightning Process Builder is a workflow automation tool that allows you to automate business processes. At the time of writing the capabilities of Lightning Process Builder is evolving, but the tool allows you to generate a graphical representation of the process as it is developed and built.</p><p>Lightning Process Builder allows you to carry out the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create processes using a user-friendly, visual interface layout with point-and-click features.</li><li class="listitem" style="list-style-type: disc">Design a full end-to-end process in one location instead of multiple dependent workflow rules.</li><li class="listitem" style="list-style-type: disc">Automate some simple actions that previously needed Apex development and apply the <span class="strong"><strong>clicks not code</strong></span> approach.</li></ul></div><p>At the time of writing, the usefulness and capabilities of the Lightning Process Builder tool hovers between the two other workflow automation tools of Workflows and Visual Workflows (covered in detail earlier in this chapter) and perhaps is the future tool for Salesforce.</p><p>Due to the current limitations and the evolving nature of the Lightning Process Builder, this book provides an introduction and a comparison with the other workflow tools at this time.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note279"/>Note</h3><p>
</p><p>For more information on the current capabilities of Lightning Process Builder navigate to the URL <a class="ulink" href="https://developer.salesforce.com/page/Cheat_Sheets">https://developer.salesforce.com/page/Cheat_Sheets</a> provided by Salesforce and refer to the downloadable <span class="emphasis"><em>App Logic: Process Automation Cheatsheet</em></span> documentation.</p><p>
</p></div></div><p>Lightning Process Builder provides a visual interface to build a process comprised of if/then statements with actions that allow you to carry out the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Create a record</li><li class="listitem" style="list-style-type: disc">Update any related record</li><li class="listitem" style="list-style-type: disc">Create or update a record, and log a call using Quick actions</li><li class="listitem" style="list-style-type: disc">Send an e-mail alert</li><li class="listitem" style="list-style-type: disc">Post to Chatter</li><li class="listitem" style="list-style-type: disc">Submit an approval process</li><li class="listitem" style="list-style-type: disc">Invoke a different process from a process</li><li class="listitem" style="list-style-type: disc">Launch a Visual Workflow flow</li><li class="listitem" style="list-style-type: disc">Call Apex code</li><li class="listitem" style="list-style-type: disc">Send SOAP messages to external web services</li></ul></div><p>Actions can be run immediately or scheduled. However, at the time of writing, the scheduling capability in Lightning Process Builder is limited compared to Workflow (described earlier in this chapter).</p><p>Generally, the Lightning Process Builder actions described previously can be set to trigger from if/then statements and are fired when:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Records are created</li><li class="listitem" style="list-style-type: disc">Records are created or edited</li></ul></div><p>The if/then decision statements can be evaluated based on data in fields within the record that started the process, via a formula, or skipped entirely (by returning true every time). In addition, decisions can be evaluated as true or false by comparing the criteria with static data, global variables, data on the present record, or data on related records.</p><div class="section" title="Comparison of Workflow Automation Tools"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec209"/>Comparison of Workflow Automation Tools</h2></div></div></div><p>The following sections compare the features and supported actions for Workflow Automation Tools in Salesforce CRM.</p><div class="section" title="Feature comparison of Workflow Automation Tools"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec210"/>Feature comparison of Workflow Automation Tools</h3></div></div></div><p>The following table shows the features of Workflow, Visual Workflow, and Lightning Process Builder at the time of writing:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><td>
</td><td>
<p>
<span class="strong"><strong>Workflow</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Visual Workflow</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Lightning Process Builder</strong></span>
</p>
</td></tr><tr><td>
<p>Single or multiple steps</p>
</td><td>
<p>Single step and a single set of results</p>
</td><td>
<p>Multiple steps and different sets of results</p>
</td><td>
<p>Multiple steps and different sets of results</p>
</td></tr><tr><td>
<p>Able to design the logic using a visual interface?</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>Browser support</p>
</td><td>
<p>All</p>
</td><td>
<p>All (Safari not recommended)</p>
</td><td>
<p>All (Chrome recommended)</p>
</td></tr><tr><td>
<p>Can be triggered when a record is changed</p>
</td><td>
<p>Yes</p>
</td><td>
<p>No</p>
</td><td>
<p>
</p><p>Yes</p><p>
</p>
</td></tr><tr><td>
<p>Can be triggered when  a user clicks a custom tab, button, or link</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>No</p>
</td></tr><tr><td>
<p>Can be triggered by another process</p>
</td><td>
<p>No</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>Can be triggered when Apex is called</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>No</p>
</td></tr><tr><td>
<p>Supports time-based actions</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>Supports user interaction</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>No</p>
</td></tr></tbody></table></div></div><div class="section" title="Supported actions comparison of Workflow Automation Tools"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec211"/>Supported actions comparison of Workflow Automation Tools</h3></div></div></div><p>The following table shows the supported actions for Workflow, Visual Workflow, and Lightning Process Builder at the time of writing:</p><div class="informaltable"><table border="1"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><td>
</td><td>
<p>
<span class="strong"><strong>Workflow</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Visual Workflow</strong></span>
</p>
</td><td>
<p>
<span class="strong"><strong>Lightning Process Builder</strong></span>
</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Call Apex Code</strong></span>
</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Create records</strong></span>
</p>
</td><td>
<p>Tasks only</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Invoke processes</strong></span>
</p>
</td><td>
<p>No</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Delete records</strong></span>
</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>No</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Launch a flow</strong></span>
</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Post to Chatter</strong></span>
</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Send e-mail</strong></span>
</p>
</td><td>
<p>Yes (e-mail alerts only)</p>
</td><td>
<p>Yes (e-mail alerts only)</p>
</td><td>
<p>Yes (e-mail alerts only)</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Send outbound messages</strong></span>
</p>
</td><td>
<p>Yes</p>
</td><td>
<p>No</p>
</td><td>
<p>No</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Submit for approval</strong></span>
</p>
</td><td>
<p>No</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes</p>
</td></tr><tr><td>
<p>
<span class="strong"><strong>Update fields</strong></span>
</p>
</td><td>
<p>Yes (the record or its parent)</p>
</td><td>
<p>Yes</p>
</td><td>
<p>Yes (any related record)</p>
</td></tr></tbody></table></div></div></div></div>
<div class="section" title="Questions to test your knowledge"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec95"/>Questions to test your knowledge</h1></div></div></div><p>You are now presented with some questions about the key features of Salesforce CRM administration in the area of Workflow Automation which have been covered in this chapter. The answers can be found at the end of the chapter.</p><div class="section" title="Questions"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec210"/>Questions</h2></div></div></div><p>We present six questions about workflow automation, workflow processes, time-dependent workflow, initiating Approval Processes, approving or rejection Approval Processes, and capabilities during Approval Processes to verify your understanding of workflow automation and approval processes.</p><div class="section" title="Question 1 - Workflow Automation"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec212"/>Question 1 - Workflow Automation</h3></div></div></div><p>What are the key concepts of workflow automation in Salesforce CRM? Select one:</p><p>
<span class="strong"><strong>a</strong></span>) Workflow rules and time-dependent features.</p><p>
<span class="strong"><strong>b</strong></span>) Workflow rules and actions.</p><p>
<span class="strong"><strong>c</strong></span>) Workflow e-mail alerts and task actions.</p><p>
<span class="strong"><strong>d</strong></span>) Workflow field updates and task actions.</p></div><div class="section" title="Question 2 - Workflow Processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec213"/>Question 2 - Workflow Processes</h3></div></div></div><p>Which of the following processes can workflow rules be used to automate? Select all that apply:</p><p>
<span class="strong"><strong>a</strong></span>) Sending an e-mail alert to an account owner whenever updates are made to the account by another user.</p><p>
<span class="strong"><strong>b</strong></span>) Assigning a follow-up task to a marketing executive whenever a new lead is entered in the system.</p><p>
<span class="strong"><strong>c</strong></span>) Assigning a new lead to a queue.</p><p>
<span class="strong"><strong>d</strong></span>) Automatically updating an opportunity field whenever the opportunity reaches a specified sales stage.</p></div><div class="section" title="Question 3 - Time-dependent Workflow"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec214"/>Question 3 - Time-dependent Workflow</h3></div></div></div><p>Which scenarios or criteria settings prevent you from adding time-dependent workflow actions? Select all that apply:</p><p>
<span class="strong"><strong>a</strong></span>) The rule is already active.</p><p>
<span class="strong"><strong>b</strong></span>) The rule criteria are set to evaluate when the record is created, and any time it's edited to subsequently meet criteria.</p><p>
<span class="strong"><strong>c</strong></span>) The rule is deactivated, but has pending actions in the workflow queue.</p><p>
<span class="strong"><strong>d</strong></span>) The rule criteria are set to evaluate when the record is created, and every time it's edited.</p></div><div class="section" title="Question 4 - Initiating Approval Processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec215"/>Question 4 - Initiating Approval Processes</h3></div></div></div><p>Which statements are correct when initiating an approval process? Select all that apply:</p><p>
<span class="strong"><strong>a</strong></span>) Approval processes can be set to automatically filter which users are initially involved with the approval process.</p><p>
<span class="strong"><strong>b</strong></span>) Approval processes can be set to allow users to choose a user to send the approval to.</p><p>
<span class="strong"><strong>c</strong></span>) Approval processes can be set to allow users to choose a queue to send the approval to.</p><p>
<span class="strong"><strong>d</strong></span>) Approval processes show an error message if the record does not meet the entry criteria.</p><p>
<span class="strong"><strong>e</strong></span>) Approval processes show a warning message showing the entry criteria if the record does not meet the entry criteria.</p></div><div class="section" title="Question 5 - Approving or Rejectioning approval processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec216"/>Question 5 - Approving or Rejectioning approval processes</h3></div></div></div><p>Which statements are correct when approving or rejecting approval requests? Select all that apply:</p><p>
<span class="strong"><strong>a</strong></span>) If enabled, approvers can approve or reject approval requests by e-mail.</p><p>
<span class="strong"><strong>b</strong></span>) Approval requests must always be approved or rejected by a specified user.</p><p>
<span class="strong"><strong>c</strong></span>) If enabled, approvers can approve or reject approval requests by Chatter.</p><p>
<span class="strong"><strong>d</strong></span>) If enabled and a user is set, an approver's delegate can approve or reject approval requests.</p></div><div class="section" title="Question 6 - During approval processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec217"/>Question 6 - During approval processes</h3></div></div></div><p>Which statements are correct during an approval process? Select all that apply:</p><p>
<span class="strong"><strong>a</strong></span>) During an approval process, the record is always locked for all users.</p><p>
<span class="strong"><strong>b</strong></span>) If enabled and a user is set, an approver's delegate can reassign approval requests.</p><p>
<span class="strong"><strong>c</strong></span>) During an approval process, approvers can reassign approval requests.</p><p>
<span class="strong"><strong>d</strong></span>) Approvers can only access an approval page from within the Salesforce application.</p><p>
<span class="strong"><strong>e</strong></span>) During an approval process, approvers can view approval requests on their Salesforce homepage.</p></div></div><div class="section" title="Answers"><div class="titlepage"><div><div><h2 class="title"><a id="ch07lvl2sec211"/>Answers</h2></div></div></div><p>Here are the answers to the six questions about workflow automation, workflow processes, time-dependent workflow, initiating Approval Processes, approving or rejection Approval Processes, and capabilities during Approval Processes to verify your understanding of workflow automation and approval processes.</p><div class="section" title="Answer 1 - Workflow Automation"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec218"/>Answer 1 - Workflow Automation</h3></div></div></div><p>The answer is, <span class="strong"><strong>a</strong></span>) Workflow rules and actions.</p></div><div class="section" title="Answer 2 - Workflow Processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec219"/>Answer 2 - Workflow Processes</h3></div></div></div><p>The answer is, <span class="strong"><strong>a</strong></span>) Sending an e-mail alert to an account owner whenever updates are made to the account by another user, <span class="strong"><strong>b</strong></span>) Assigning a follow-up task to a marketing executive whenever a new lead is entered in the system, and ,<span class="strong"><strong>d</strong></span>) Automatically update an opportunity field whenever the opportunity reaches a specified sales stage.</p><p>The answer <span class="strong"><strong>c</strong></span>) Assigning a new lead to a queue, is not possible using workflow rules and instead can be carried out using lead assignment rules (see 
<a class="link" href="ch08.html" title="Chapter 8. Introducing Sales Cloud, Service Cloud, and the Collaborative Features of Salesforce CRM">Chapter 8</a>, <span class="emphasis"><em>Introducing Sales Cloud, Service Cloud, and Collaborative Features of Salesforce CRM</em></span>).</p></div><div class="section" title="Answer 3 - Time-dependent Workflow"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec220"/>Answer 3 - Time-dependent Workflow</h3></div></div></div><p>The answer is, <span class="strong"><strong>a</strong></span>) The rule is already active (here, you must deactivate the rule first),
<span class="strong"><strong>c</strong></span>) The rule is deactivated, but has pending actions in the workflow queue (here, you must allow the pending actions to complete or delete the pending action using the time-based workflow queue, and, <span class="strong"><strong>d</strong></span>) The rule criteria is set to evaluate when the record is created, and every time it's edited.</p></div><div class="section" title="Answer 4 - Initiating Approval Processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec221"/>Answer 4 - Initiating Approval Processes</h3></div></div></div><p>The answer is, <span class="strong"><strong>a</strong></span>) Approval processes can be set to automatically filter which users are initially involved with the approval process, <span class="strong"><strong>b</strong></span>) Approval processes can be set to allow users to choose a user to send the approval to, and <span class="strong"><strong>d</strong></span>) Approval processes show an error message if the record does not meet the entry criteria.</p><p>The answer, <span class="strong"><strong>c</strong></span>) and <span class="strong"><strong>e</strong></span>) are not correct for the following reasons, respectively: Approval processes can be set to automatically assign approvers from a queue but not to allow users to choose a queue to send the approval to. Approval processes show an error message only, and not a warning message showing the entry criteria if the record does not meet the entry criteria.</p></div><div class="section" title="Answer 5 - Approving or Rejecting approval Processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec222"/>Answer 5 - Approving or Rejecting approval Processes</h3></div></div></div><p>The answer is, <span class="strong"><strong>a</strong></span>) If enabled, approvers can approve or reject approval requests by e-mail, <span class="strong"><strong>c</strong></span>) If enabled, approvers can approve or reject approval requests by Chatter, and <span class="strong"><strong>d</strong></span>) If enabled and a user set, an approver's delegate can approve or reject approval requests.</p><p>The answer<span class="strong"><strong> b</strong></span>) is not correct because approval requests can be set to be approved or rejected by individuals in a queue.</p></div><div class="section" title="Answer 6 - During Approval Processes"><div class="titlepage"><div><div><h3 class="title"><a id="ch07lvl3sec223"/>Answer 6 - During Approval Processes</h3></div></div></div><p>The answer is, <span class="strong"><strong>c</strong></span>) During an approval process approvers can reassign approval requests and d). During an approval process, approvers can view approval requests on their Salesforce homepage.</p><p>The answers <span class="strong"><strong>a</strong></span>), <span class="strong"><strong>b</strong></span>), and <span class="strong"><strong>c</strong></span>) are not correct for the following reasons, respectively: during an approval process, the record is not locked for admins and can also be edited by the approver. An approver's delegate can approve requests, but cannot reassign approval requests. Approvers can access an approval page from outside Salesforce as well as from within the Salesforce application.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch07lvl1sec96"/>Summary</h1></div></div></div><p>In this chapter, we looked at the workflow automation features within the Salesforce CRM application through the use of workflow rules and approval processes. We walked through the configuration of these functions and discovered how they can be used to automate and streamline the key business processes for your organization.</p><p>We also looked at Visual Workflow and learned how flows and the Lightning Process Builder can be used to build screens that guide users through the process of collecting and updating data. By leveraging workflow automation, your users benefit from greater control over routine activities and elimination of redundant tasks.</p><p>Finally, we posed some questions to help clarify some of the key features of Salesforce workflow automation and approval processes.</p><p>In the following chapter, we will look at the functional areas of Salesforce CRM and the facilities for sales and marketing automation, service and support, and enterprise social networking.</p></div></body></html>