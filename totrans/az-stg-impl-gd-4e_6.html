<html><head></head><body>
		<div>
			<div id="_idContainer070" class="Content">
			</div>
		</div>
		<div id="_idContainer071" class="Content">
			<h1 id="_idParaDest-127">6. <a id="_idTextAnchor184"/>Security fundamentals to help protect against cybercrime</h1>
		</div>
		<div id="_idContainer085" class="Content">
			<p>This chapter will help you understand the Azure security fundamentals and guide you through the security services available. We will review how you can use Microsoft services to adopt a Zero Trust strategy in your organization, along with solutions that you can utilize to protect your workloads and assess and improve your security posture. In this chapter, we will cover the following:</p>
			<ul>
				<li>Enabling security for remote workers</li>
				<li>Gaining visibility into your entire infrastructure using <strong class="bold">Azure Security Center</strong></li>
				<li>Achieving advanced threat protection for your hybrid and multicloud environments with <strong class="bold">Azure Defender</strong></li>
				<li>Securing your network</li>
				<li>Modernizing security operations with <strong class="bold">Azure Sentinel</strong></li>
				<li>A unified SecOps experience</li>
			</ul>
			<p>Before we drill down into the services you can use to protect your environments, it is important to understand how you can effectively implement security practices to protect your environments whether they are on-premises or in the cloud. So let's begin by addressing the main challenges we face today and how you can start working on an effective security strategy for your organization.</p>
			<h2 id="_idParaDest-128"><a id="_idTextAnchor185"/>Enabling security for remote workers</h2>
			<p>COVID-19 has not only impacted businesses of different sizes and verticals but has also fueled cybercrime. The fear related to this pandemic has led cybercriminals with different skillsets and motivations to capitalize by imitating trusted sources and national health organizations using different tactics and techniques. </p>
			<p>Enabling remote work has been a challenge, especially for those organizations that were used to providing access to on-premises applications only within their corporate network. Security is a shared responsibility between Microsoft and it's customers; in today's world, a security breach into an organization could mean millions of dollars' worth of damage.</p>
			<p>In light of the pandemic, organizations of all sizes have had to adopt new systems and controls to secure access to both on-premises and cloud resources.</p>
			<h3 id="_idParaDest-129"><a id="_idTextAnchor186"/>Security operations excellence </h3>
			<p>As many employees are likely to continue working remotely, there's a need to enable hybrid working environments. Using <strong class="bold">Zero Trust</strong> principles can help organizations ensure their employees have access to the resources they need, whether those resources are in their private datacenter or the cloud.</p>
			<p>A Zero Trust approach involves constant verification and monitoring of access to all corporate services, applications, and network connections. Simply put, "never trust, always verify."</p>
			<p>By adopting a Zero Trust security model, organizations can move away from using traditional virtual private networks to access legacy applications by migrating them to Microsoft Azure.</p>
			<p>Cloud applications can be accessed through the internet, and for those applications that are not able to fully migrate to Azure. These can be published through <strong class="bold">Azure Active Directory </strong>(<strong class="bold">Azure AD</strong>) Application Proxy as we reviewed in <em class="italics">Chapter 5</em>, <em class="italics">Enabling secure, remote work with Azure AD and WVD</em>. </p>
			<p>Employees will have the ability to access applications they use on a daily basis through <strong class="bold">Windows Virtual Desktop</strong> (<strong class="bold">WVD</strong>) in a more secure way and restrict movement to other resources. This approach gives your organization the ability to align a cloud-first security strategy and ensures employees get access to the applications they need, when they need them, and with the right access levels.</p>
			<p>Microsoft provides a security baseline to protect people, devices, infrastructure, and data from vulnerabilities through identity-driven security solutions. Therefore, Microsoft strengthens products and services to identify and address vulnerabilities quickly and efficiently. There are two core platforms available for you to ensure you can adopt best practices in your security strategy: </p>
			<ul>
				<li>Security Engineering Portal</li>
				<li>Microsoft Security Response Center</li>
			</ul>
			<p>Microsoft is continually improving its protection of services and data through operational management and threat-mitigation practices. You can use the Security Engineering Portal to learn about the security practices that Microsoft is using to secure applications and services.</p>
			<p>On the other hand, you can use <strong class="bold">Microsoft Security Response Center</strong> (<strong class="bold">MSRC</strong>) to keep your systems protected and manage security risks. On the MSRC portal, you will see the latest security updates and details on the product family, the severity and impact of vulnerabilities, and get access to download security updates that can be applied to your system.</p>
			<h3 id="_idParaDest-130"><a id="_idTextAnchor187"/>Cyber Defense Operations Center</h3>
			<p><strong class="bold">Microsoft Cyber Defense Operations Center</strong> carries out intrusion detection and responds to compromises and attacks, helping you to better secure a remote workforce. It protects cloud infrastructure and the services, products, and devices that customers use, as well as Microsoft's internal resources, beyond the traditional security perimeter.</p>
			<p>Microsoft Cyber Defense Operations Center groups the company's security response experts to help protect, detect, and respond 24x7 to security threats against Microsoft's IT infrastructure and assets globally.</p>
			<p>Microsoft's cybersecurity posture is committed to protecting, detecting, and responding to cybersecurity threats. Based on these three pillars, explained in the following sections, Microsoft can provide a useful framework for security strategies andÂ capabilities.</p>
			<h3 id="_idParaDest-131"><a id="_idTextAnchor188"/>Protect</h3>
			<p>Microsoft is committed to protecting the compute resources used by customers and employees to ensure resiliency of both the cloud infrastructure and services. Microsoft's protection tactics rely on nine main categories:</p>
			<ul>
				<li>Physical environment monitoring and controls, such as physical access to datacenters, screening, and access approval at the facility's perimeter, inside the building, and on the datacenter floor.</li>
				<li>Software-defined networking components to protect cloud infrastructure from intrusions and attacks such as <strong class="bold">distributed denial of service</strong> (<strong class="bold">DDoS</strong>) attacks.</li>
				<li>Identity and management controls with multi-factor authentication to ensure critical resources and data are protected.</li>
				<li>The use of <strong class="bold">just-enough-administration</strong> (<strong class="bold">JEA</strong>) and <strong class="bold">just-in-time</strong> (<strong class="bold">JIT</strong>) privileges to ensure the right access to resources.</li>
				<li>Configuration management and proper hygiene, maintained through anti-malware software and system updates.</li>
				<li>Identification and development of malware signatures deployed in Microsoft infrastructure for advanced detection and defense.</li>
				<li>Hardening all applications, online services, and products through Microsoft <strong class="bold">Security Development Lifecycle</strong> (<strong class="bold">SDL</strong>).</li>
				<li>Minimizing the attack surface by restricting services.</li>
				<li>Taking appropriate measures to protect classified data, enabling encryption in transit and at rest, and enforcing the least-privilege access principle.</li>
			</ul>
			<h3 id="_idParaDest-132"><a id="_idTextAnchor189"/>Detect</h3>
			<p>Although Microsoft continues to invest in these protection layers, cybercriminals are always looking for ways to exploit them. There's no environment that is fully protected, as systems can fail and people can make errors. Therefore, Microsoft has adopted an <strong class="bold">Assume Breach</strong> position to ensure that a compromise is rapidly detected, and appropriate actions are taken. </p>
			<p>Microsoft's detection tactics rely on six main categories:</p>
			<ul>
				<li>Monitoring network and physical environments</li>
				<li>Highlighting abnormal activity based on identity and behavior analytics</li>
				<li>Machine learning tools to discover irregularities</li>
				<li>Identifying anomalous activities through analytical tools and processes</li>
				<li>Increasing effectiveness by using automated software-based processes</li>
				<li>Determining remediation processes and response to anomalies on systems</li>
			</ul>
			<h3 id="_idParaDest-133"><a id="_idTextAnchor190"/>Respond</h3>
			<p>Accelerating triage, mitigation, and recovery are all part of Microsoft's commitment to provide relevant and actionable information through automated response systems. The main objective is to secure vulnerabilities, mitigate attacks, and moreover, respond to cybersecurity events. </p>
			<p>Microsoft's response tactics rely on the following six main categories:</p>
			<ul>
				<li>Flagging events that require intervention through automated response systems</li>
				<li>Rapid response by providing a well-defined, documented, and scalable incident response process available to all responders</li>
				<li>Expertise across Microsoft teams to ensure a deep understanding of the platforms, services, and applications operating in cloud datacenters to address incidents</li>
				<li>Determining incident scopes through wide enterprise searching across both cloud and on-premises data and systems</li>
				<li>A better understanding of incidents through deep forensic analysis</li>
				<li>A rapid response time and recovery through security software tools and automation</li>
			</ul>
			<p>Organizations can learn from the Microsoft Cyber Defense Operations Center and adopt best practices to secure their environments and improve their security posture, as well as using solutions and integrations available in Microsoft Intelligent Security Association.</p>
			<h3 id="_idParaDest-134"><a id="_idTextAnchor191"/>Microsoft Intelligent Security Association</h3>
			<p><strong class="bold">Microsoft Intelligent Security Association</strong> (<strong class="bold">MISA</strong>) is an ecosystem of independent software vendors from across the cybersecurity industry with the ultimate goal of improving an organization's security by sharing their expertise and integrating their solutions, to better defend against a world of increasing threats.</p>
			<p>MISA membership benefits include: </p>
			<ul>
				<li>Microsoft security products to extend solution capabilities</li>
				<li>A go-to-market strategy to enjoy co-marketing opportunities</li>
				<li>Customer connections</li>
				<li>Access to product teams to differentiate your solutions</li>
			</ul>
			<p>MISA provides guidance and resources for building apps, workflows, and integration with Microsoft security management, threat protection, information protection, and identity and access management solutions so you can build connected security solutions and enable experiences for cross-product scenarios.</p>
			<p>You can find members of MISA through the following URL: <a href="https://www.microsoft.com/misapartnercatalog ">https://www.microsoft.com/misapartnercatalog</a></p>
			<p>In this section, we have reviewed how Microsoft ensures security operations excellence and tactics that a company should follow to protect, detect, and respond to potential security threats. </p>
			<p>In order to improve your security posture, it is important to have visibility across your environment and the ability to use mechanisms to prevent security threats. In the next section, we will go through the key capabilities of Security Center and how you can use this service.</p>
			<h2 id="_idParaDest-135"><a id="_idTextAnchor192"/>Gain visibility into your entire infrastructure with Azure Security Center</h2>
			<p>Unified visibility across your environment is critical to monitoring your security posture, detecting threats, and quickly responding to them. Security Center can provide the mechanisms to monitor your environments and proactively respond to security threats.</p>
			<p>If you navigate to the Azure portal and search for <strong class="inline">Security Center</strong>, you will be able to see the service on your subscription as shown in <em class="italics">Figure 6.1</em>:</p>
			<div>
				<div id="_idContainer072" class="IMG---Figure">
					<img src="image/B17153_06_01.jpg" alt="Azure Security Center overview"/>
				</div>
			</div>
			<p class="figure">Figure 6.1: Azure Security Center overview</p>
			<p>On the <strong class="bold">Security Center</strong> page, you can see an overview of the security posture of the resources in your subscription along with recommendations for hardening the security of those resources:</p>
			<ol>
				<li><strong class="bold">Secure score</strong>: The core of Azure Security Center's cloud security posture management capabilities is the Secure Score. This is a measure of the current status of security recommendations for all the resources. It's calculated using the ratio between your healthy resources and your total resources and a weighting of the importance of some of the security recommendations versus others. The higher the score, the lower the identified risk level.</li>
				<li><strong class="bold">Regulatory compliance</strong>: Provides insights into the level of your compliance with the various regulatory and industry standards you've applied to your subscriptions. Azure Defender must be enabled to monitor your compliance score.</li>
				<li><strong class="bold">Azure Defender</strong>: This is Security Center's integrated cloud workload protection platform. Access Azure Defender from within Security Center and protect your hybrid and multicloud workloads running on servers, SQL, storage, containers, and IoT. Defender is part of Microsoft's <strong class="bold">extended detection and response</strong> (<strong class="bold">XDR</strong>) solution.</li>
				<li><strong class="bold">Firewall Manager</strong>: The integration of Azure Firewall Manager into Azure Security Center's main dashboard allows customers to check the firewall coverage status across all networks and to centrally manage Azure Firewall policies.</li>
			</ol>
			<h3 id="_idParaDest-136"><a id="_idTextAnchor193"/>Security posture management and multicloud</h3>
			<p>With the rapid adoption of cloud services across multiple cloud providers, organizations are able to streamline operations, enable remote work, and improve employee productivity. The use of cloud applications across multiple cloud platforms introduces new risks and threats. </p>
			<p><strong class="bold">Cloud Security Posture Management</strong> (<strong class="bold">CSPM</strong>) is a term used to address the key attributes that a security solution should include to provide the visibility and capabilities to help you understand your environment, and how you could better secure it, whether it's on the cloud or on-premises.</p>
			<p>With Azure Secure Score, Security Center can help you improve your security posture and reduce the likelihood of getting your resources compromised. This extends beyond just IaaS or PaaS, and also applies to SaaS. In fact, <em class="italics">The Total Economic Impact of Azure Security Center Study</em> points out that Azure Security Center can reduce the risk of a security breach by 25%.</p>
			<p>You can read more about the TEI study at the following URL: <a href="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RWxD0n">https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RWxD0n</a></p>
			<p>Microsoft's cloud security platform can improve the security configuration of your cloud infrastructure, and help you detect and protect your environments in Azure, on-premises, and on other clouds.</p>
			<p>Organizations that have adopted a multicloud approach are now able to easily improve their security posture, as Microsoft provides a unified infrastructure security management system through Security Center to strengthen the security posture of both your cloud and on-premises resources while providing threat protection and deep analysis. Through Security Center, you can continuously assess the security state of your resources, including those that are running in other clouds and on-premises datacenters.</p>
			<p>Security Center provides you with the tools needed to secure your services and harden your network. You can turn on Security Center in your Azure subscription and use the extended detection and response capabilities to enable threat protection for environments running in Azure, on-premises, and in other clouds. </p>
			<p>Most organizations that move to Azure typically migrate applications to the cloud that have some legacy security controls in place to try to protect these workloads. In reality, cloud threats differ from on-premises threats. Therefore, Security Center addresses the need for a cloud-native tool that provides the ability to identify potential vulnerabilities on your resources and provides recommendations on how to address those vulnerabilities.</p>
			<p>There are multiple strategies, tactics, and tools to use and secure your hybrid and multicloud environments. Here's a proposed strategy for securing your multicloud environment in four phases:</p>
			<div>
				<div id="_idContainer073" class="IMG---Figure">
					<img src="image/B17153_06_02.jpg" alt="A proposed four-phase strategy for securing your multi-cloud environment"/>
				</div>
			</div>
			<p class="figure">Figure 6.2: Four phases to secure your multicloud environment</p>
			<p><strong class="bold">Phase 1</strong>: Identifying the status of your organization's security posture</p>
			<p>It is important to understand and evaluate the status of your resources and their actual usage; to do this, you can use <strong class="bold">Cloud Discovery</strong> to analyze all the traffic going through your network. This process of identifying anomalies can be done through machine learning, an anomaly detection engine, or through custom policies that are focused mainly on the discovery and investigation processes. </p>
			<p><strong class="bold">Phase 2</strong>: Detecting suspicious behavior across workloads</p>
			<p>It is recommended that you use cloud monitoring tools so you can learn from the alerts, tune activity detections to identify true compromises, and improve the process of handling large volumes of false positive detections. There are some specific recommendations you can follow such as configuring IP address ranges, adjusting the monitoring usage and alerts sensitivity, and tuning anomaly detection policies.</p>
			<p><strong class="bold">Phase 3</strong>: Assessing and remediating misconfigurations and compliance status</p>
			<p>Security Center can assess all the resources in a given subscription and provide you with recommendations for the entire environment. When you select a specific recommendation, Security Center will redirect you to the recommendation details page, where you'll see additional details and instructions for how to remediate the identified issue. </p>
			<p>For a multicloud approach, if your organization is using <strong class="bold">Amazon Web Services</strong> (<strong class="bold">AWS</strong>) or <strong class="bold">Google Cloud Platform</strong> (<strong class="bold">GCP</strong>), it is possible to drill down on the security details on the configuration for AWS. When you connect your AWS to Azure Security Center you will be able to see the AWS recommendations within Security Center, helping you cover a multicloud approach. </p>
			<p><strong class="bold">Phase 4</strong>: Automate protection and policy enforcement for cloud resources</p>
			<p>This phase is focused on protecting your cloud resources from data leaks in real time through the enforcement of policies for control and access to resources. This will prevent data exfiltration and the uploading of malicious files to your cloud platforms.</p>
			<p>It is possible to create a session policy that blocks the uploading of incorrectly labeled files and configures policies to enforce the correct creation of labels. This way, you can ensure that the data saved to the cloud has the correct access permissions applied.</p>
			<h3 id="_idParaDest-137"><a id="_idTextAnchor194"/>Azure Security Center architecture</h3>
			<p>Since Security Center is natively integrated with Azure, you can monitor almost all the resources that are part of your environment and protect them without any additional deployment. As previously mentioned, Security Center can protect non-Azure servers and support Windows and Linux servers through the installation of Security Center's agent, as shown in <em class="italics">Figure 6.3</em>:</p>
			<div>
				<div id="_idContainer074" class="IMG---Figure">
					<img src="image/B17153_06_03.jpg" alt="Azure Security Center and Azure Sentinel architecture"/>
				</div>
			</div>
			<p class="figure">Figure 6.3: Azure Security Center and Azure Sentinel architecture</p>
			<p>The agent collects all the security events, which are then correlated in the security analytics engine to provide you with tailored recommendations based on your defined security policies. Security policies are based on policy initiatives created in Azure Policy and can be used to define the desired configuration of your workloads to ensure you're complying with the security requirements of your organization or any specific regulation.</p>
			<p>Security Center includes three main security policies:</p>
			<ul>
				<li><strong class="bold">Built-in default policies</strong>: These are policies automatically assigned when you enable Security Center. They are part of a built-in initiative and you can customize them later on.</li>
				<li><strong class="bold">Custom policies</strong>: You can use custom security policies and add your own custom initiatives to receive recommendations if your environment doesn't follow the policies you create. You can configure a custom initiative through Security Center, select the subscription or management group to which you would like to add the custom initiative, and define the parameters for it. </li>
				<li><strong class="bold">Regulatory compliance policies</strong>: You will be able to see a compliance dashboard that shows the status of all the assessments within your environment, to help improve your regulatory compliance.</li>
			</ul>
			<h3 id="_idParaDest-138"><a id="_idTextAnchor195"/>Azure Security Benchmark</h3>
			<p>Security is a joint effort between Microsoft and your organization and customers. We have to ensure our workloads remain secure whether they are living on-premises or in the cloud. In order to help you improve the security of your workloads, data, and services running in the cloud, Microsoft provides <strong class="bold">security baselines</strong> for Azure to focus on cloud-centric control areas and applies prescriptive guidance and best practices to strengthen security through the <strong class="bold">Azure Security Benchmark</strong> (<strong class="bold">ASB</strong>).</p>
			<p>The ASB mainly focuses on cloud-centric control areas. This way you can follow recommendations and guidance that comprise the Cloud Adoption Framework, the Azure Well-Architected Framework, and Microsoft Security Best Practices. </p>
			<p>It is important to understand the context and terminology used in Azure security baselines, so we need to emphasize some terms: </p>
			<ul>
				<li><strong class="bold">Control</strong>: This is a description of a feature or activity, not specific to a technology, that needs to be addressed. For example, <strong class="bold">Data Protection</strong> is a security control that contains specific actions that should be addressed to ensure your data is protected.</li>
				<li><strong class="bold">Benchmark</strong>: This contains security recommendations for a specific technology and can be categorized by the control it belongs to. For instance, ASB comprises security recommendations specific to Azure. </li>
				<li><strong class="bold">Baseline</strong>: This is the implementation of the security benchmark on Azure services. For example, an organization can enable Azure SQL security features following the Azure SQL security baseline.</li>
			</ul>
			<p>If your organization is new to Azure and is looking for recommendations to secure deployments and improve the security posture of existing environments, or trying to meet regulatory requirements for customers who are highly regulated, ASB is the ideal starting point. It includes tooling, tracking, and security controls and is consistent with well-known security benchmarks, such as those described by the <strong class="bold">Center for Internet Security</strong> (<strong class="bold">CIS</strong>) Controls Version 7.1 and <strong class="bold">National Institute of Standards and Technology</strong> (<strong class="bold">NIST</strong>) SP800-53.</p>
			<p>ASB can help you secure the services you use in Azure through a collection of security recommendations that include: </p>
			<ul>
				<li><strong class="bold">Security controls</strong>: These are recommendations that you can apply across your Azure tenant and services.</li>
				<li><strong class="bold">Service baselines</strong>: These can be applied to Azure services to get recommendations on the configuration of the security from a specific service.</li>
			</ul>
			<p>To implement ASB, you can start by planning your implementation and validating the enterprise controls and service-specific baselines that might better fit your organization's needs. Next, monitor your compliance using the Security Center's regulatory compliance dashboard. Lastly, establish guardrails to enforce compliance through <strong class="bold">Azure Blueprints</strong> and <strong class="bold">Azure Policy</strong>. ASB includes the following control domains: </p>
			<ul>
				<li>Network Security</li>
				<li>Identity Management </li>
				<li>Privileged Access</li>
				<li>Data Protection</li>
				<li>Asset Management</li>
				<li>Logging and Threat Detection</li>
				<li>Incident Response</li>
				<li>Posture and Vulnerability Management</li>
				<li>Endpoint Security</li>
				<li>Backup and Recovery</li>
				<li>Governance and Strategy </li>
			</ul>
			<p>ASB is the default security policy for Azure Security Center so that you can extend the richness of security recommendations in Azure. As a result, Azure Secure Score will reflect a much broader set of recommendations and spans a broader set of Azure resources.</p>
			<p>Additionally, the full control set layout of ASB in the compliance dashboard is now available to all Azure Security Center customers, including Azure Security Center free tier as well as existing Azure Defender customers. Customers can view their compliance relative to the benchmark controls in the compliance view while viewing the detailed impact on their Secure Score. By prioritizing the remediation of security recommendations using Secure Score metrics, customers can achieve a higher Secure Score and attain their compliance goals, all at the same time.</p>
			<p>You can review the latest updates of the full Security Center security baseline mapping file in the following GitHub repository: <a href="https://github.com/MicrosoftDocs/SecurityBenchmarks/">https://github.com/MicrosoftDocs/SecurityBenchmarks/</a>.</p>
			<h3 id="_idParaDest-139"><a id="_idTextAnchor196"/>Achieve advanced threat protection for your hybrid and multicloud environments with Azure Defender</h3>
			<p>As the number of home-based workers has accelerated in the last few months, organizations have experienced a far greater need to ensure employees have access through multiple types of devices to company resources. Therefore, it is important to adjust security policies to enable remote work and keep your data secure. As mentioned in the previous section, Security Center can improve your <strong class="bold">Cloud Security Posture Management</strong> (<strong class="bold">CSPM</strong>) and provide <strong class="bold">Cloud Workload Protection</strong> (<strong class="bold">CWP</strong>) capabilities.</p>
			<p>You can use Security Center for free in any given subscription, which includes the detection of security misconfigurations in your Azure resources, a Secure Score to improve your hybrid cloud posture, and enabling Azure Defender for advanced protection for your Azure hybrid workloads. </p>
			<p>Azure Defender is integrated into the same cloud-native service as Security Center and provides additional security features such as security alerts and advanced threat protection.</p>
			<p>Azure Defender includes native support for Azure services like virtual machines, SQL databases, storage, containers, web applications, networks, and non-Azure servers hosted on-premises or in other clouds such as AWS and GCP. </p>
			<p>To extend hybrid cloud protection for your SQL databases and servers running in other clouds or on-premises, it is recommended that you use Azure Arc and Azure Defender. You can find the details on the resource coverage and pricing at the following site: <a href="https://azure.microsoft.com/pricing/details/azure-defender/">https://azure.microsoft.com/pricing/details/azure-defender/</a> </p>
			<h3 id="_idParaDest-140"><a id="_idTextAnchor197"/>Azure Defender dashboard</h3>
			<p>If you navigate to the Azure portal and look for <strong class="bold">Security Center</strong>, within <strong class="bold">Security Center</strong> you will find the <strong class="bold">Azure Defender</strong> dashboard as in <em class="italics">Figure 6.4</em>:</p>
			<div>
				<div id="_idContainer075" class="IMG---Figure">
					<img src="image/B17153_06_04.jpg" alt="Azure Security Defender dashboardoverview"/>
				</div>
			</div>
			<p class="figure">Figure 6.4: Azure Security Defender dashboard</p>
			<p>The <strong class="bold">Azure Defender</strong> dashboard will provide you with the overall coverage of your resources, security alerts, advanced protection, and insights into your most attacked resources along with virtual machines' vulnerability alerts: </p>
			<div>
				<div id="_idContainer076" class="IMG---Figure">
					<img src="image/B17153_06_05.jpg" alt="Azure Defender dashboard"/>
				</div>
			</div>
			<p class="figure">Figure 6.5: Azure Defender dashboard</p>
			<p>Let's take a look at what Azure Defender can do for servers, SQL, storage, and container registries.</p>
			<h3>Azure Defender for servers</h3>
			<p>Azure Defender is integrated with Azure Monitor to protect your Windows-based machines. While Security Center presents the alerts and remediation suggestions, Azure Defender collects audit records from machines, including Linux machines through <strong class="inline">auditd</strong>, a common Linux auditing framework that lives in the kernel.</p>
			<p>Your organization can benefit from using Azure Defender for servers in multiple ways, as it provides threat detection and protection capabilities, such as the following:</p>
			<ul>
				<li>Integration with Microsoft Defender for Endpoint, so when there's a threat detected, it triggers an alert that is shown in Security Center. </li>
				<li>Use the Qualys vulnerability scanner, which we'll discuss in detail shortly.</li>
				<li>JIT access can be used to lock down inbound traffic to your virtual machines, reducing exposure to attacks.</li>
				<li>Change monitoring or file integrity monitoring, which can help you examine files and registries of a given operating system, applications, and changes in file size, access control lists, and the hash of the content that might indicate an attack. </li>
				<li>You can use adaptive application controls for an intelligent and automated solution to create an allow list of applications that can run on your machines, and get security alerts if there are any applications running that are not defined as safe. </li>
				<li>Adaptive network hardening can help you improve your security posture through <strong class="bold">network security group</strong> (<strong class="bold">NSG</strong>) hardening. </li>
				<li>Security Center can assess your containers and compare the configurations with the <strong class="bold">Center for Internet Security</strong> (<strong class="bold">CIS</strong>) Docker Benchmark. </li>
				<li>You can use <strong class="bold">Fileless attack detection</strong> and get detailed security alerts with descriptions and metadata. </li>
				<li>Linux <strong class="inline">auditd</strong> alerts and Log Analytics integration can be used to collect enriched records that can be aggregated into events. </li>
			</ul>
			<h3>Azure Defender for SQL</h3>
			<p>Azure Defender for SQL can be utilized to protect your workloads against potential SQL injection attacks, anomalous database access and query patterns, and suspicious activity. It can be used for IaaS- and PaaS-based services. Simply put, it supports the following two scopes: </p>
			<ul>
				<li><strong class="bold">SQL database servers</strong>: This includes Azure SQL Database, Azure SQL Managed Instances, and Dedicated SQL pools in Azure Synapse.</li>
				<li><strong class="bold">SQL servers on machines</strong>: This extends protection for Azure-based SQL servers but also other cloud-based and on-premises environments, such as SQL Server on Azure virtual machines, on-premises SQL Server running on Windows machines, and Azure Arc enabled SQL Server. </li>
			</ul>
			<h3>Azure Defender for Storage</h3>
			<p>For remote workers accessing applications in the cloud that have the ability to upload files, we need to ensure that we can determine whether uploaded files are suspicious. Through Azure Defender for Storage, we can use hash reputation analysis and trigger alerts in case there are any suspicious activities or anomalous behavior, or if there is any potential malware being uploaded. </p>
			<p>Azure Defender for Storage will display an alert and can email the owner of the storage for approval to delete these files.</p>
			<h3>Azure Defender for container registries</h3>
			<p>With Azure Container Registry you can build, store, and manage your container images and artifacts in a managed, private Docker Registry service.</p>
			<p>You can scan vulnerabilities in your container images with Azure Defender and review the findingsâcategorized by severityâin Security Center's list of security recommendations.</p>
			<p>Images can be scanned in three different phases: on push, images recently pulled, and on import. These images are pulled from the registry and then run in an isolated sandbox with the Qualys scanner. Then, Security Center will present the findings. </p>
			<h3>Qualys vulnerability scanners</h3>
			<p>Azure Defender includes three Qualys scanners: one for machines, one for container registries, and one for SQL. The Qualys scanners, as shown in <em class="italics">Figure 6.6</em>, are integrated into Security Center and monitor your machines through an extension installed on the actual resource. Then, Qualys' cloud service performs the vulnerability assessment and sends its findings to Security Center:</p>
			<div>
				<div id="_idContainer077" class="IMG---Figure">
					<img src="image/B17153_06_06.jpg" alt="Azure Security Center vulnerability scanner"/>
				</div>
			</div>
			<p class="figure">Figure 6.6: Azure Security Center vulnerability scanner</p>
			<p>The vulnerability scanner works as follows: </p>
			<ol>
				<li value="1">Once Azure Defender is enabled for your subscription, you can use the recommendation <em class="italics">vulnerability assessment should be enabled on virtual machines</em> to deploy the integrated vulnerability scanner extension. </li>
				<li>Once the extension is installed, the agent collects the necessary security information including the operating system version, open ports, installed software, environment variables, and metadata associated with the files. A scan occurs every 4 hours, and all data is sent to the Qualys cloud service to be analyzed.</li>
				<li>Qualys analyzes the information and builds the findings per machine. These findings are sent to Security Center.</li>
				<li>Then you can review the machine's vulnerabilities from Security Center's recommendations page.</li>
			</ol>
			<p>It is possible to scan non-Azure machines by connecting them to Security Center with Azure Arc then deploying the extension as above. For large deployments, you can use <strong class="bold">Azure Resource Manager</strong> (<strong class="bold">ARM</strong>) remediation scripts, PowerShell, Azure Logic Apps, or the REST API.</p>
			<h3>Alerts </h3>
			<p>Since Security Center can be utilized to protect your resources deployed on Azure, other clouds, and on-premises, it can generate multiple types of alerts that are triggered by advanced detections available through Azure Defender.</p>
			<p>These security alerts are generated if there are threats detected on any resource. Security Center provides you with a single view of an attack campaign that contains the incidents. A security incident is a collection of related alerts.</p>
			<p>You will be able to inspect the security alerts and review more related details, as shown in <em class="italics">Figure 6.7</em>:</p>
			<div>
				<div id="_idContainer078" class="IMG---Figure">
					<img src="image/B17153_06_07.jpg" alt="Inspecting security alerts and reviewing details in the Security alert window"/>
				</div>
			</div>
			<p class="figure">Figure 6.7: Security alert details</p>
			<p>As your environment continues to grow, it is more likely that you will have a higher number of alerts shown in Security Center and you will need to have better control of your security alerts and prioritize them accordingly. Security Center assigns a severity to these security alerts in four categories: </p>
			<ul>
				<li><strong class="bold">Informational</strong>: You will see these types of alerts if you drill down into a security incident that is made up of a number of alerts.</li>
				<li><strong class="bold">Low</strong>: These types of alerts might indicate a blocked attack or a false positive with low impact. </li>
				<li><strong class="bold">Medium</strong>: These alerts indicate that a resource might be compromised due to suspicious activity. For example, a sign-in from an anomalous location. </li>
				<li><strong class="bold">High</strong>: A high alert indicates that there's a high probability that your resource is compromised, and you should take action right away. </li>
			</ul>
			<p>Security Center allows you to export alerts in different ways. You can download a CSV report on the alert dashboard, configure continuous export, or use an SIEM connector (such as Azure Sentinel) to stream security alerts. </p>
			<p>While Azure Defender can help you to protect and remediate potential vulnerabilities, it is also important to implement best practices on the configuration of the resources that are critical for your workloads, such as network resources. </p>
			<h2 id="_idParaDest-141"><a id="_idTextAnchor198"/>Best practices for securing your network</h2>
			<p>In the previous section of this chapter, <em class="italics">Security operations excellence</em>, we reviewed the Zero Trust principle. This assumes that breaches are inevitable and therefore we must ensure we have the right controls in place to verify each request. Identity management plays a critical role in this.</p>
			<p>There are three principal objectives for securing your network in the Zero Trust model:</p>
			<ul>
				<li>Preparing to handle attacks in advance</li>
				<li>Reducing the attack surface and the extent of damage</li>
				<li>Strengthening your cloud footprint, including resources and configurations that are part of your environment, to reduce the chances of getting compromised</li>
			</ul>
			<p>If your organization is enabling remote work and implementing an end-to-end Zero Trust framework, there are some best practices to adhere to in order to achieve these objectives: </p>
			<ul>
				<li>Network segmentation</li>
				<li>Threat protection</li>
				<li>Encryption</li>
			</ul>
			<p>Let's take a closer look at each of them. </p>
			<h3>Network segmentation</h3>
			<p>Protecting your corporate network is a top priority, but this is tougher than ever as remote work redefines the security perimeter. It is no longer defined by the physical locations of an organization but now extends to every endpoint that accesses corporate data and services. Therefore, relying on traditional firewalls and VPNs is not enough to protect this new digital estate.</p>
			<p>It is known that there's no one-fits-all architecture design for organizations; every single organization has different business needs to be addressed. Taking a Zero Trust approach can help ensure optimal security for your remote workers without compromising the application experience.</p>
			<p>Traditional enterprises used to secure their corporate perimeters using traditional network controls. Traditional networks tend to have few network security perimeters and a flat open network, which makes it easy for attackers to move quickly across the entire network. Zero Trust networks are fully distributed with micro-segmentation. Granular network segmentation removes trust from the network, which dramatically minimizes lateral movement and data exfiltration. </p>
			<p>Zero Trust networks employ machine learning threat protection and context-based filtering, which can thwart even the most sophisticated attacks. In traditional networks, not all traffic is properly encrypted, which makes them more susceptible to man-in-the-middle attacks, eavesdropping, and session hijacking. In Zero Trust networks, all traffic is encrypted using industry standards to ensure data in transit remains confidential.</p>
			<p>The main goal is to move beyond a centralized network to a more comprehensive and distributed segmentation using micro-perimeters. This way, applications can be partitioned across multiple Azure virtual networks and connected through a hub-spoke model. In addition, it is recommended to deploy Azure Firewall in the hub virtual network to inspect all traffic. </p>
			<p>To support this approach, Microsoft Azure provides you with multiple cloud-native networking components to enable remote work and mitigate network issues. Organizations are using third-party NVAs available through the Microsoft Azure Marketplace to provide critical connectivity across multicloud and on-premises environments.</p>
			<h3>Threat protection</h3>
			<p>Cloud applications that are exposed to the internet are at a higher risk of attacks and therefore we must ensure we scan all the traffic going through them. Threat protection involves the ability to mitigate threats of known and unknown attacks.  </p>
			<p>Unknown attacks are mainly threats that don't match against any known signature. For known attacks, in most cases, there's a signature available and we can ensure each request is checked against them. </p>
			<p>Services available in Azure, such as <strong class="bold">Web Application Firewall</strong> (<strong class="bold">WAF</strong>), can be utilized to protect HTTP(S) traffic. It is possible to use Azure WAF along with Azure Front Door or Azure Application Gateway, while Azure Firewall can be used for threat intelligence-based filtering at Layer 4 of the OSI model. </p>
			<h3>Encryption</h3>
			<p>Azure enables you to ensure protection for sensitive data. It provides support in multiple areas of encryption including at rest, in transit, and secrets management. Encryption of data at rest can be applicable to persistent storage resources such as disk or file storage and is available for services across SaaS, PaaS, and IaaS. </p>
			<p>Through server-side encryption, you can use service-manager keys or customer-manager keys using Key Vault or customer-controller hardware. Client-side encryption includes data handled by an application running on-premises or outside Azure, and data that is encrypted when received by Azure. </p>
			<p>In a Zero Trust approach, we must ensure that all traffic from the user to the application is encrypted. We can accomplish this objective by using Azure Front Door to enforce HTTPS traffic for applications exposed to the internet and utilize networking services and features such as VPN Gateway (P2S or S2S). </p>
			<p>Also, if you're enabling access to resources in Azure through virtual machines, you can secure the communication using Azure Bastion, as discussed in <em class="italics">Chapter 5</em>, <em class="italics">Enabling secure, remote work with Azure AD and WVD</em>. </p>
			<p>Now that we have reviewed best practices to secure your network and traffic across your environment, it is important to also have a mechanism to get insights from the resources that are part of your environment and be able to proactively analyze potential threats in your environment.</p>
			<h2 id="_idParaDest-142"><a id="_idTextAnchor199"/>Modernize your security operations with Azure Sentinel, aÂ cloud-native SIEM</h2>
			<p>Organizations that enable remote work need a way to monitor and get more insights from their environments, whether they are living in the cloud or on-premises. </p>
			<p>Azure Sentinel is a cloud-native <strong class="bold">security information and event management</strong> (<strong class="bold">SIEM</strong>) service that allows you to simplify data collection from multiple data sources, including on-premises and multicloud environments, through built-in connectors so that you can proactively analyze potential threats and simplify security operations. </p>
			<p>Azure Sentinel correlates the security logs and signals from all sources across your applications, services, infrastructure, networks, and users. Azure Sentinel can identify attacks based on your data and places them on a map so you can analyze all the traffic. </p>
			<p>First of all, you need to connect your resources, which can include networking components, applications, and data sources. Azure Sentinel provides you with a wide range of connectors to pull data from, including Microsoft services such as Microsoft 365 Defender, Azure AD, Microsoft Defender for Identity (formerly Azure ATP), Microsoft Cloud App Security, and Azure Defender alerts from Security Center, as seen in <em class="italics">Figure 6.8</em>:</p>
			<div>
				<div id="_idContainer079" class="IMG---Figure">
					<img src="image/B17153_06_08.jpg" alt="Azure Sentinel data connectors"/>
				</div>
			</div>
			<p class="figure"> </p>
			<p class="figure">Figure 6.8: Azure Sentinel data connectors</p>
			<p>Alternatively, you can choose from third-party solutions or create your own custom connectors, as Azure Sentinel supports Common Event Format, Syslog, and the REST API to connect your data sources. All the data collected is stored in a Log Analytics workspace, which is a container where the data is collected and aggregated. When you enable Azure Sentinel on your subscription, you will be able to select a specific Log Analytics workspace.</p>
			<p>Once you connect your resources, you will be able to select a specific workbook that provides a canvas for data analysis and enables you to create custom visual reports within the Azure portal. You can create your own workbooks according to your business needs, and combine data from multiple sources in a single report along with custom visualizations. </p>
			<p>Through the <strong class="bold">Azure Sentinel</strong> dashboard, as seen in <em class="italics">Figure 6.9</em>, you can get a high-level overview of the security posture of your organization as it includes events and alerts over time, incidents by status, and potential malicious events: </p>
			<div>
				<div id="_idContainer080" class="IMG---Figure">
					<img src="image/B17153_06_09.jpg" alt="A high-level overview of the security posture of an organization in the Azure Sentinel dashboard"/>
				</div>
			</div>
			<p class="figure">Figure 6.9: Azure Sentinel dashboard </p>
			<p>Let's explore some more features that Azure Sentinel provides: threat detection and hunting, investigation and incident response, and managing multiple tenants. </p>
			<h3>Enable threat detection and hunting</h3>
			<p>Stream threat indicators your organization is using to Azure Sentinel to enhance your security analysis and hunt for security threats across your organization's data sources, whether they live in Azure, in other clouds, or on-premises.</p>
			<p>Azure Sentinel provides you with a hunting capability, shown in <em class="italics">Figure 6.10</em>, that includes built-in queries that can filter providers or data sources to help your security analysts find issues quickly in the data you already have. Each query provides a detailed description for the use case and you can customize your queries as needed:</p>
			<div>
				<div id="_idContainer081" class="IMG---Figure">
					<img src="image/B17153_06_10.jpg" alt="Azure Sentinel Hunting window"/>
				</div>
			</div>
			<p class="figure">Figure 6.10: Azure Sentinel Hunting</p>
			<p>Queries are based on <strong class="bold">Kusto Query Language</strong> and fully integrated with Azure Monitor. Once you customize a query that provides high-value insights into potential attacks, you can save it and then use notebooks to run automated hunting campaigns.</p>
			<h3>Investigation and incident response</h3>
			<p>Azure Sentinel allows you to see incident operations over time. Incidents are created based on analytic rules and includes relevant evidence of an investigation; therefore, they can contain multiple alerts. If analysts in your organization are looking to investigate incidents, Azure Sentinel provides incident management capabilities that can be accessed through the <strong class="bold">Incident </strong>page. You can review how many incidents you have open, in progress, or closed:</p>
			<div>
				<div id="_idContainer082" class="IMG---Figure">
					<img src="image/B17153_06_11.jpg" alt="Azure Sentinel incident table properties and filters"/>
				</div>
			</div>
			<p class="figure">Figure 6.11: Azure Sentinel incident table properties and filters</p>
			<p>You can drill down on each incident and see the timestamp, along with the status and severity of the incident. It is also possible to use the investigation graph, which provides an illustrative map of the entities related to the alert and the resources associated with it. </p>
			<p>However, the objective is to be able to respond to a security alert and automate responses to these security alerts as much as possible. Azure security playbooks can help you orchestrate and automate your response. These security playbooks are based on Azure Logic Apps and can improve the way you respond to a security alert.</p>
			<p>When you get a security alert, you will be able to either run a playbook manually or automate your security playbook. To manually execute a security playbook, you can go through the <strong class="bold">Incidents</strong> page and, in the <strong class="bold">Alerts</strong> tab, configure which playbook you want to run from the list of available playbooks.</p>
			<p>The automated response involves the configuration of a trigger from the security alert. You can configure the action of triggering a security playbook when there is a match on your security alert.</p>
			<h3>Manage multiple tenants/multi-tenant environments</h3>
			<p>A huge benefit of using Azure Sentinel to modernize your security operations is the extensibility to manage your customer's Azure Sentinel resources from your own Azure tenant, so there's no need to connect to your customer tenant. This ability for multitenancy is really helpful for organizations that act as managed security service providers to other organizations or customers.</p>
			<p>This ability to manage multiple tenants in Azure Sentinel from your own Azure tenant is facilitated by Azure Lighthouse, which enables multi-tenant management capabilities and enhances governance across resources and tenants. If your organization provides managed services to multiple customers, you can use more comprehensive management tooling, delegate resource management, view cross-tenant information from the Azure portal, use ARM templates to onboard customers, perform management tasks, and also provide managed services using the Azure Marketplace.</p>
			<p>Based on industry verticals and profiles, organizations must achieve regulatory requirements that dictate recommendations on security controls that have to be adopted such as PCI-DSS, NIST, ISO27001, and so on.</p>
			<p>Meeting these regulatory compliance obligations can be a significant challenge in a cloud or hybrid environment. In the final section, we will go through the features available in Azure that can help you enforce these organizational standards.</p>
			<h2 id="_idParaDest-143"><a id="_idTextAnchor200"/>A unified SecOps experience</h2>
			<p>As organizations deploy cloud applications and provide access for remote workers, maintaining consistency to ensure cloud compliance, avoiding misconfigurations, reducing the risk of potential attacks, and achieving organization-wide governance can become a huge challenge. </p>
			<p>You can enforce organizational standards to assess compliance at scale using Azure Policy and evaluate compliance by evaluating the properties of your resources through policy definitions. Azure Policy provides a compliance dashboard that can be used to see more granular details per resource or per policy, which ensures your resources are compliant. In addition, you can define Azure initiatives, which are a collection of Azure policy definitions, to help you achieve your goals and simplify the management of your policies:</p>
			<div>
				<div id="_idContainer083" class="IMG---Figure">
					<img src="image/B17153_06_12.jpg" alt="Policy compliance window"/>
				</div>
			</div>
			<p class="figure">Figure 6.12: Policy compliance</p>
			<p>Within this context, your organization can utilize a new capability in Azure Policy called <strong class="bold">Regulatory Compliance</strong>, in preview at the time of writing, which provides you with built-in initiative definitions to guide you on the controls and compliance domains. This means you are able to see which compliance domain is intended to be covered, whether by your organization, Microsoft, or a shared compliance domain. </p>
			<p>You will see a new tab in the <strong class="bold">Compliance</strong> page called <strong class="bold">Controls</strong> that allows you to filter by compliance domain and check the details per row:</p>
			<div>
				<div id="_idContainer084" class="IMG---Figure">
					<img src="image/B17153_06_13.jpg" alt="Controls tab on the Compliance page"/>
				</div>
			</div>
			<p class="figure">Figure 6.13: Controls page in Policy </p>
			<p>By using Regulatory Compliance in Azure Policy, your organization can achieve the compliance required for your business needs. On the compliance page, you will be able to see if a compliance domain is the responsibility of Microsoft, the customer, or if it is a shared responsibility. You can view additional details of audit results if the control you are reviewing is the responsibility of Microsoft.</p>
			<h2 id="_idParaDest-144"><a id="_idTextAnchor201"/>Summary</h2>
			<p>Enabling remote work makes security operations more challenging as there's a significant increase in the number of endpoints and environments that need to be monitored and protected. Through the adoption of a Zero Trust strategy, we can reduce the risk of potential attacks and compromises.</p>
			<p>In this chapter, we have reviewed some of the core services that Microsoft provides to help you adopt a Zero Trust strategy in your organization and respond to threats quickly and intelligently.</p>
			<p>We reviewed how you can empower your security operation teams using Azure Sentinel, a cloud-native SIEM, to help security operations teams stay ahead of their adversaries. We also saw how you can use Azure Security Center to monitor almost all the resources that are part of your environment and protect them without any additional deployment, and use Azure Defender to protect your workloads whether they are in the cloud or on-premises.</p>
			<p>In the next chapter, we will see how you can optimize cloud costs by using tools available in your Azure subscription to track resource usage, manage costs across all your environments, and implement governance policies for effective cost management.</p>
		</div>
	</body></html>