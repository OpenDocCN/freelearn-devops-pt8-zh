# 前言

在不断发展的云计算世界中，能够高效地自动化和管理基础设施是至关重要的。随着组织将工作负载迁移到云端，基础设施管理需要一种强大且可扩展的方法，这一需求变得愈加明显。而 Terraform，作为一个强大的**基础设施即代码**（**IaC**）工具，使得开发人员和运维团队能够轻松自动化云资源的配置和管理。结合**亚马逊 Web 服务**（**AWS**）的强大功能，Terraform 成为构建、部署和管理复杂云基础设施的不可或缺的工具。

*使用 Terraform 架构 AWS：在亚马逊 Web 服务上设计弹性和安全的云基础设施*是一本全面的指南，旨在帮助您掌握在 AWS 上充分利用 Terraform 的知识和技能。无论您是一个希望构建可扩展云基础设施的初创公司，还是一个希望提高 Terraform 项目重用性和治理的企业，或是一个探索 IaC 世界的个人，本书都能为您提供有价值的内容。

本书由一位拥有 12 项 AWS 认证的云计算与基础设施自动化专家、DevOps 培训师和 AWS 大使撰写，带领您深入了解 Terraform 和 AWS 的复杂性，并提供实际的实施技巧和最佳实践。您将从理解 IaC 和 Terraform 的模式及反模式开始，学习如何避免常见的错误和陷阱。随着进展，您将发现规划和设计 AWS 基础设施项目的重要性，并学习如何为您的 AWS Terraform 项目做出明智的决策。

本书深入探讨了 Terraform 在各种项目中的实际应用，包括在 AWS 中部署无服务器应用程序和容器。您将学习如何利用 Terraform 进行企业级项目建设，如何为 IaC 和 Terraform 项目构建 Git 工作流，并自动化 Terraform 项目的部署。此外，您还将探索如何使用 Terraform 管理 AWS 资源，以及如何使用 AWS Terraform 构建安全的基础设施。

本书结束时，您将全面理解 Terraform 和 IaC，并掌握所需的知识和技能，能够在 AWS 上构建、管理和部署复杂的基础设施。无论您是负责编写或设计 IaC 以部署 AWS 资源的云工程师、DevOps 工程师、开发人员还是架构师，本书都将成为您掌握 AWS 上 Terraform 的宝贵资源。

欢迎进入自动化、可扩展且安全的云基础设施世界，使用 Terraform 和 AWS。让我们开始吧！

# 适合阅读本书的人群

*使用 Terraform 架构 AWS：设计具有弹性和安全性的云基础设施*，面向广泛的专业人员，这些人参与云基础设施在 AWS 上的设计、开发和部署。本书特别适合以下角色：

+   **云工程师**：如果你负责在 AWS 上设计、部署和管理云基础设施，本书将为你提供使用 Terraform 自动化和扩展基础设施所需的工具和技术。

+   **DevOps 工程师**：作为一名 DevOps 工程师，你处于开发与运维的交汇处。本书将帮助你优化基础设施部署流程，提高可重用性，并通过使用 Terraform 实现 IaC 的最佳实践。

+   **开发人员**：如果你是一名开发人员，想要在 AWS 上部署应用程序，本书将指导你通过 Terraform 自动化基础设施部署过程，让你能够专注于构建和部署应用程序。

+   **架构师**：作为一名架构师，你负责设计可扩展且安全的云基础设施。本书将为你提供关于如何在 AWS 中规划和设计基础设施项目的见解，帮助你为 AWS Terraform 项目做出明智决策，并利用 AWS Terraform 构建安全的基础设施。

+   **IT 专业人员**：如果你是有兴趣探索云计算和 IaC 世界的 IT 专业人员，本书将为你提供一份关于 AWS 上 Terraform 的全面介绍。

读者预计应具备基本的 AWS 理解，并且之前应从 AWS 管理控制台部署过资源。熟悉云计算概念和一般编程原则将有益，但不是必需的。

无论你是刚开始接触云计算，还是一位经验丰富的专业人员，想要提升在基础设施自动化方面的技能，本书将为你提供有价值的见解和实践知识，帮助你掌握 AWS 上的 Terraform。

# 本书涵盖的内容

*第一章*，*理解 IaC 和 Terraform 的模式与反模式*，介绍了 IaC 和 Terraform 的概念，强调了最佳实践和需要避免的常见陷阱。

*第二章*，*如何不使用 IaC 和 Terraform*，教你了解使用 IaC 和 Terraform 时常见的错误以及如何避免这些错误，确保更顺畅、高效的基础设施管理过程。

*第三章*，*构建你的第一个 Terraform 项目*，帮助你通过创建第一个项目来入门 Terraform。本章将指导你进行初始设置和在 AWS 上配置一个简单的 Terraform 项目。

*第四章*，*发现 Terraform IaC 项目的最佳实践*，探讨了管理 Terraform 项目的最佳实践，包括代码组织、模块化和版本控制，以确保高效且易于维护的 IaC。

*第五章*，*在 AWS 中规划和设计基础设施项目*，帮助你理解规划和设计 AWS 基础设施项目的重要性，包括可扩展性、安全性和成本优化的考虑因素。

*第六章*，*在 AWS 中为 Terraform 项目做决策*，教你如何在 AWS Terraform 项目中做出明智的决策，考虑资源选择、配置和部署策略等因素。

*第七章*，*在项目中实施 Terraform*，深入探讨了在各种项目中实践 Terraform 的应用，包括在 AWS 上部署无服务器应用和容器。

*第八章*，*使用 Terraform 部署无服务器项目*，探讨了如何使用 Terraform 在 AWS 上部署无服务器项目，包括 AWS Lambda 函数和 API Gateway 的设置和配置。

*第九章*，*在 AWS 上使用 Terraform 部署容器*，教你如何使用 Terraform 在 AWS 上部署容器化应用，包括 Amazon ECS 和 EKS 的设置和配置。

*第十章*，*为企业利用 Terraform*，帮助你理解如何在企业级项目中使用 Terraform，包括管理大规模 Terraform 项目的最佳实践，并提升重用性和治理能力。

*第十一章*，*为 IaC 和 Terraform 项目构建 Git 工作流*，是你将发现如何将 Git 工作流集成到你的 IaC 和 Terraform 项目中，从而实现版本控制、协作与自动化部署。

*第十二章*，*自动化 Terraform 项目的部署*，教你如何通过**持续集成和持续部署**（**CI/CD**）管道来自动化 Terraform 项目的部署。

*第十三章*，*使用 Terraform 治理 AWS*，探讨了如何使用 Terraform 来治理 AWS 资源，包括访问控制、监控和合规性管理。

*第十四章*，*使用 AWS Terraform 构建安全的基础设施*，帮助你理解如何使用 Terraform 在 AWS 上构建安全的基础设施，包括网络安全、数据保护以及身份与访问管理的最佳实践。

*第十五章*，*用 Terraform 完美构建 AWS 基础设施*，教你如何利用 Terraform 实现完美的 AWS 基础设施，包括优化性能、可靠性和成本效益。

# 使用的约定

本书中使用了多种文本约定。

`文本中的代码`：表示文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。以下是一个例子：“将下载的 `WebStorm-10*.dmg` 磁盘镜像文件挂载为系统中的另一个磁盘。”

一段代码的格式如下：

```
resource "azurerm_sql_database" "main" { 
   name = "primary-instance" 
   settings { 
       tier = " " 
}
```

当我们希望你关注代码块中的某一部分时，相关的行或项目会以粗体显示：

```
variable "readers" { 
description = "..." 
type = list 
default = [] 
}
```

任何命令行输入或输出都按如下格式编写：

```
brew upgrade hashicorp/tap/terraform
```

**粗体**：表示新术语、重要词汇或屏幕上看到的词汇。例如，菜单或对话框中的词汇会以**粗体**显示。以下是一个例子：“从**管理**面板中选择**系统信息**。”

提示或重要说明

显示方式如下。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果你对本书的任何内容有疑问，请通过电子邮件联系我们 customercare@packtpub.com，并在邮件主题中提及书名。

**勘误**：尽管我们已经尽力确保内容的准确性，但错误有时会发生。如果你在本书中发现任何错误，我们将非常感谢你向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表单。

**盗版**：如果你在互联网上发现任何非法复制的我们的作品，烦请提供该作品的地址或网站名称。如果有任何线索，请通过电子邮件联系 copyright@packtpub.com 并附上链接。

**如果你有兴趣成为作者**：如果你在某个领域拥有专长，并且有兴趣撰写或为书籍贡献内容，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享你的想法

阅读完《*使用 Terraform 架构 AWS*》之后，我们很想听听你的意见！请[点击这里直接进入亚马逊评论页面](https://packt.link/r/1803248564)并分享你的反馈。

你的评论对我们以及技术社区都很重要，它将帮助我们确保提供卓越的内容质量。

# 下载本书的免费 PDF 版本

感谢购买本书！

你喜欢随时随地阅读，但又不能随身携带纸质书籍吗？

你的电子书购买是否无法在你选择的设备上使用？

别担心，现在购买 Packt 出版的每本书，你都会免费获得该书的 DRM-free PDF 版本。

任何地方，任何设备上都能阅读。搜索、复制并粘贴你最喜欢的技术书籍中的代码，直接到你的应用程序中。

福利不止于此，您还可以获得独家折扣、新闻通讯以及每天通过电子邮箱收到的精彩免费内容。

按照以下简单步骤即可获得福利：

1.  扫描二维码或访问以下链接

![](img/B18198_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781803248561`](https://packt.link/free-ebook/9781803248561)

1.  提交您的购买凭证

1.  就是这样！我们将直接把免费的 PDF 和其他福利发送到您的电子邮箱。

# 第一部分：AWS 中 IAC 和 Terraform 简介

在本部分中，我们为掌握 AWS 上的 Terraform 奠定了必要的基础。我们将探索**基础设施即代码**（**IaC**）和 Terraform 的基本概念，包括有效模式和常见陷阱。您将学会如何避免常见错误，并自信地在 AWS 上构建您的第一个 Terraform 项目。我们还将深入探讨 Terraform 项目的最佳实践，确保您为高效、可维护的 IaC 打下坚实基础。通过本部分的学习，您将能够开始使用 Terraform 在 AWS 上部署云基础设施。

本部分包含以下章节：

+   *第一章**，理解 IaC 和 Terraform 的模式与反模式*

+   *第二章**，如何不使用 IaC 和 Terraform*

+   *第三章**，构建您的第一个 Terraform 项目*

+   *第四章**，发现 Terraform IaC 项目的最佳实践*
