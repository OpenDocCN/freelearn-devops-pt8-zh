# 第二十二章：评估

# 第一章：Azure App Service

1.  是的，App Service 和 Web App 可以互换使用。

1.  目前，我们有三类：开发/测试、生产和隔离。

1.  一旦超出计算限制，Free 和 Shared 层将被阻止，导致应用程序对用户不可用。

1.  目前，我们有五个不同的提供者：Azure AD、Facebook、Google、Twitter 和 Microsoft Account。

1.  是的，Premium 层基于新的 Dv2 机器，这些机器使用更强大的 CPU 和更新的架构。

1.  你必须启用应用程序日志记录功能。

1.  不幸的是，你不能这样做；你至少需要 Shared 层。

1.  是的，你可以。App Service Plan 可以支持不止一个 App Service。

1.  有三种操作系统可用：Windows、Linux 和 Docker。

1.  不，你不能—你必须重新创建 App Service 来更改底层操作系统。

1.  你可以在哪里找到正确的位置地址？你可以使用 FTP 或 FTPS。你可以在概览面板上找到位置地址。

1.  用户级别的凭据将在你访问的所有订阅中的所有 App Services 中设置。应用程序级别的凭据在创建 App Service 时创建，并与之关联。

1.  向上扩展意味着设置更好的服务器。向外扩展意味着设置更多的服务器。

1.  你每个实例将支付 50 美元，总共 500 美元。

1.  它的目的是实现更好的可靠性和 App Service 的隔离性。它还具有更高的限制，涉及工作实例的最大数量。

1.  是的，它是—使用 Docker 作为操作系统。

# 第二章：Azure WebJobs

1.  是的，可以使用 Free 或 Shared 层运行 WebJobs。然而，不建议这样做，因为一些作业需要启用 Always On 功能，而 Free 和 Shared 层无法启用该功能。

1.  我们可以以持续运行或手动/按计划触发的方式运行作业。

1.  是的，你可以。一般来说，WebJobs 支持与 App Services 相同的编程语言。

1.  你可以部署 `run.{extension}` 文件。

1.  如果是这样，如何操作？是的，你可以；需要将所有文件归档为 ZIP 包并部署。

1.  它必须作为一个单一实例创建。

1.  是的，WebJobs 共享与其托管的 App Services 相同的应用程序设置。

# 第三章：作为容器部署 Web 应用

1.  Azure 容器注册表是一个 Azure 服务，充当托管在云中的 Docker 私有注册表。它与其他 Azure 容器服务无缝集成。

1.  管理员登录是一个功能，允许你使用注册表名称作为用户名和密钥作为密码，在 ACR 中进行身份验证。

1.  要在 App Service 中运行容器，你必须选择 Docker 作为操作系统。

1.  是的，你可以—实际上，两种可能性（公共/私有）都可以。

1.  是的，你可以—有一个专门的面板可用于扩展你的实例。

1.  要在 AKS 集群中更新应用程序并限制停机时间，你必须部署多个具有相同应用程序的 Pod。

1.  你必须创建一个服务主体，它将在身份验证过程中使用。

# 第四章：使用 Service Fabric 的分布式应用程序与微服务

1.  可靠的演员实现了虚拟演员模式，旨在将负载分配到成千上万个有状态服务中。可靠的服务是 Service Fabric 中用于实现有状态服务的模式，这些服务可以是多线程的，且不需要扩展到那个级别。

1.  有状态服务在本地存储状态。无状态服务则不处理状态，或者使用外部存储。

1.  一个名为 `ICommunicationListener` 的接口**。**

1.  SF 中的节点类型是专门的虚拟机规模集，旨在处理特定的工作负载。

1.  是的，因为它们是独立的 VMSS。

1.  是的，您可以。

1.  节点到节点的安全性和客户端到节点的安全性。

1.  群集是 Service Fabric 的整体实例——它是所有其他概念的容器。应用程序是多个服务的逻辑容器，这些服务具有相同的目的。服务是应用程序中的单个工作单元，可以根据需要进行扩展。分区是一个标识符，用于正确地将负载分配到各个服务中。副本是用于复制状态或实现服务更高持久性的虚拟机实例。

1.  为了实现所需的群集和托管应用程序的韧性和耐久性，必须配置五个节点。

1.  可靠性层级用于设置节点内虚拟机的数量。

# 第五章：使用 Azure 搜索

1.  索引是包含文档的元数据表，这些文档由 Azure 搜索使用。

1.  推送模型用于具有低延迟要求的应用程序，在这种情况下，您的文档一旦推送到服务，就会立即被索引。

1.  是的，您可以为索引器定义自定义调度。

1.  默认情况下，Azure 搜索使用 Lucene 分析器。

1.  是的，可以使用自定义分析器。

1.  副本是托管索引的服务的物理实例，而分区是它的一部分，提供特定的资源。

1.  您必须使用 `api-key` 头。

# 第六章：使用通知中心发送移动通知

1.  PNS 代表推送通知服务。

1.  是的，每个供应商都有自己的 PNS。

1.  主要区别在于补丁功能——安装可以在创建后更新，而注册则不能。

1.  否，设备的可用数量根据不同层级有所不同。

1.  根据您的环境，可以使用 Visual Studio 或通过编程方式查询通知中心实例。

1.  有多种可能性：可以使用 Azure 门户或 Visual Studio，或者启用测试发送并通过编程方式发送通知。

1.  丰富内容通知是包含不止文本的通知（例如，包含图片的通知）。

# 第七章：无服务器和 Azure 函数

1.  在按消耗计费定价模型中，您为每次函数执行单独付费。

1.  GB-s 是 Azure Functions 中的消耗单位；它表示每秒的千兆字节数，并定义了在单位时间内使用的内存量。

1.  是的，您可以，然而这并不是建议的服务模型。

1.  它被称为 Function App。

1.  在 Azure Functions 的 V1 版本中曾实验性支持此语言。目前（在 V2 中），不再支持。

1.  是的——这就是 Azure Storage 绑定的工作方式。

1.  当你的 Function App 自动部署时，它会被设置为只读，以避免在过程中手动更改。

1.  不完全是——在 Azure Function 中，所有设置都可以通过环境变量进行配置。

# 第八章：通过 Logic Apps 集成不同组件

1.  Azure Logic Apps 利用无服务器定价模型，你为每次执行单独付费，考虑到为这个特定应用使用的所有模块。

1.  是的，这是可能的。

1.  你需要一个额外的扩展，叫做 Azure Logic Apps for Visual Studio。

1.  执行完成后，你可以访问它并查看在执行流程期间使用的评估值。

1.  是的，确实有一个特殊的连接器来与这些服务合作。

1.  Azure Logic Apps 可以导出为 JSON 文件，并存储在版本控制系统中。

# 第九章：瑞士军刀——CosmosDB

1.  Azure Cosmos DB 支持 SQL、MongoDB、Cassandra、Azure Table 和 Gremlin。

1.  是的——在 Azure Cosmos DB Table API 中，你几乎可以实现无限扩展能力、故障切换功能以及更好的性能。

1.  严格一致性、边界过时、一致会话、一致前缀和最终一致性。

1.  在这两者中，边界过时一致性更为严格。

1.  是的，方法是配置防火墙规则。

1.  不，Azure Cosmos DB 的 SQL API 与 SQL Server 有很大不同。

1.  Azure Cosmos DB 中的存储过程用于在查询过程中执行额外的逻辑。

1.  是的，这是可能的。

# 第十章：使用 Event Grid 进行响应式架构

1.  目前，可以使用 Event Grid 模式或 Cloud Events 模式。

1.  你必须使用`aeg-sas-key`或`aeg-sas-token`头。

1.  你必须返回一个包含验证代码的正确 JSON。

1.  如果是 Azure 服务，端点不必经过验证。

1.  当事件无法传递时，传递将在预定间隔后重试。

1.  在订阅创建期间，你可以使用`Subject`字段定义过滤器。

1.  本地 Azure Functions 运行时实现了 Event Grid 端点，可以用来测试你的应用程序。

# 第十一章：使用 Azure Storage——表格、队列、文件和 Blob

1.  热存储和冷存储——账户创建后，可以在 blob 级别选择归档。

1.  你必须同时包含分区键和行键。

1.  可用的模型有：LRS、ZRS、GRS 和 RA-GRS。

1.  文件存储更像是一个文件共享，而 Blob 存储则作为应用程序和用户数据的存储。它们还具有不同的定价模型。

1.  是的，你可以。

1.  一条消息最多可保留 7 天。

1.  消息的最大大小为 64 KB。

1.  分区键的最大大小是 1 KB。

1.  在 Table Storage 中，我们使用乐观并发模型。

1.  使用 Azure 文件，你可以通过添加额外的帐户轻松扩展共享。当使用本地共享时，你需要购买、安装并配置硬件才能使用它。

# 第十二章：大数据管道 - Azure Event Hub

1.  消费者组用于允许使用不同的处理器并行处理事件，这些处理器之间相互独立。

1.  1TU 允许你每秒处理 1,000 条消息。

1.  这取决于你的需求—唯一需要记住的是，一旦集线器创建完成，你无法更改分区的数量。

1.  TUs 被分配给命名空间并由集线器共享。

1.  发送、监听和管理。

1.  是的，可以。

1.  一些消费者可能会失去租约并变得空闲。

# 第十三章：实时数据分析 - Azure Stream Analytics

1.  在 Azure Stream Analytics 中，你需要为 **流计算单元** (**SUs**) 付费。

1.  流输入让你可以直接从流中处理数据。通过引用输入，你可以选择一个服务，例如 Azure 存储，它将按时间间隔进行处理。

1.  应用时间是事件生成的时间。到达时间告诉你事件被服务接收的时间。

1.  `SELECT Id INTO [output-alias] FROM [input-alias]`。

1.  是的，可以与多个输入值一起工作。

1.  如果你基于到达时间应用事件排序，则事件会出现乱序，这会扰乱事件的实际顺序。

1.  是的，你可以—为此，你必须使用 `SUBSTRING` 函数。

# 第十四章：企业集成 - Azure 服务总线

1.  在队列中，一旦消息被读取，它就不会再发送给其他读取者。而主题则允许你实现多个读取者，专注于相同的一组消息。

1.  不，你必须至少使用标准层才能使用主题。

1.  死信队列用于避免由于无效消息导致队列被阻塞。

1.  在 Azure 服务总线中，使用会话来确保消息按 FIFO（先进先出）顺序处理。

1.  分区队列的最大大小为 80 GB。

1.  在主动复制中，你会同时向两个命名空间发送消息。在被动模型中，你只会向次要命名空间发送消息，但前提是它能够传递给主要命名空间。

1.  你必须定义主要和次要区域，将它们配对，并定义故障转移触发器。

# 第十五章：使用应用程序洞察监控你的应用程序

1.  你需要一个仪表键。

1.  是的—Azure 应用程序洞察支持多种不同的编程语言。

1.  智能分析是一组功能，结合了机器学习和数据分析，以扩展应用程序洞察的能力。

1.  你可以使用分析模块对收集到的日志执行查询。

1.  你可以使用 ARM 模板在资源配置过程中创建警报。

1.  是的，这是可用的选项之一。

# 第十六章：Azure 中的 SQL - Azure SQL

1.  Azure SQL 会不断更新，并且比 Microsoft SQL Server 更快获得更新。

1.  分片是将你的数据和数据库划分成更小的块，这些块可以均匀分布，并且只处理它们自己的负载部分。

1.  默认情况下，防火墙会阻止连接——你需要将你的 IP 地址添加到白名单中。

1.  基于 DTU 和基于 vCore。

1.  弹性池是一种扩展模型，在这种模型中，你不是拥有一个带有预配置吞吐量的单一数据库，而是拥有一个池，你可以动态地将其分配给一组数据库。

1.  eDTU 是用于弹性池的弹性 DTU。

1.  你可以使用称为动态数据屏蔽的功能。

1.  你有三个可选项：Azure 存储、Azure 日志分析和 Azure 事件中心。

# 第十七章：大数据存储 – Azure 数据湖

1.  通常情况下，管理安全组更容易——在这种情况下，你不需要在每次给新用户授予访问权限时都添加一个单独的实体。

1.  RBAC 基于角色，而 POSIX ACL 基于根据分配给用户或组的操作来计算权限集。

1.  在 ADLS 中没有文件大小限制。

1.  这取决于你的需求——虽然特定的结构可能不影响性能，但文件大小可能会影响。

1.  是的，ADLS 将与任何能够连接到它的语言兼容。

1.  Azure 存储引入了文件大小限制和容量限制。它还提供了比 Azure 数据湖存储更简单的安全模型。

1.  你必须实现复制到次要区域。

# 第十八章：扩展 Azure 应用程序

1.  扩展是水平扩展应用程序（通过增加附加实例），而升级是垂直扩展应用程序（即配置更好的硬件）。

1.  在大多数情况下，你会选择扩展而不是升级。这是因为硬件的性能是有限的，增加另一台机器比配置新的 CPU 和内存更容易。

1.  其实并不完全如此——虽然从概念上讲可能可行，但无服务器服务避免了扩展。

1.  是的——如果你扩展 Azure 应用服务，服务的价格将乘以当前正在运行的实例数量。

1.  在 SF 中，扩展是完全没问题的。危险的操作是扩展，因为这要求你将工作负载从一个地方迁移到另一个地方。

1.  当你的应用程序处理的流量是动态的时，手动扩展可能会有问题——在这种情况下，你需要不断监控，并在需要时进行扩展。

1.  你可以设置自动扩展功能，并声明 CPU 触发器来扩展你的应用程序。

# 第十九章：使用 Azure CDN 提供静态内容

1.  Azure CDN 旨在缓存以提高应用程序的性能，同时为多个用户提供静态内容。

1.  目前，Azure CDN 支持 Verizon、Akamai 和 Microsoft。

1.  源是缓存资源的端点。

1.  在 Azure CDN 中，压缩功能允许你即时压缩文件，减小它们的大小并减少网络延迟。

1.  文件的默认 TTL 设置为七天。

# 第二十章：使用 Azure 流量管理器分配负载

1.  支持的路由方法有：性能、加权、地理位置、多值和子网。

1.  要使用真实用户测量功能，你必须将自定义脚本注入到你的网站中，该脚本将发送关于网络调用延迟的更新值。

1.  当然——在这种情况下，你将获得一个嵌套的配置文件。

1.  是的，使用外部端点是可能的。

1.  一旦 DNS 名称被解析（以确保 Azure 流量管理器指向正确的端点），客户端将直接与该端点连接。

1.  Azure 流量管理器在 DNS 层面工作，而网关是一种模式，允许你对请求进行负载均衡，但它作为系统的单一入口。

1.  是的，你可以使用 Azure 流量管理器实现高可用性——在这种情况下，你需要实现一个配置文件，允许你在某个区域无法响应时切换到其他区域。

# 第二十一章：Azure 提示与技巧

1.  订阅级别锁和资源级别锁均可用。

1.  当然——Azure CLI 可以在 Cloud Shell 内使用，作为服务的一部分。

1.  若要获取详细信息，你可以访问资源浏览器应用。

1.  一般来说：更好的资源管理、更快的过滤和更简便的开发。

1.  它使用存储账户在不同会话之间持久化文件。
