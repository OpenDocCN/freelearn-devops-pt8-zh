# 前言

本书是一本关于使用容器创建应用程序的实用入门书籍。读者将学习容器是什么以及它们为何成为一种新的应用程序部署标准。我们将从容器的关键概念、功能和使用开始，讲解它们如何帮助我们加速并保护应用程序的生命周期。你还将学习如何为你的应用程序创建安全的容器镜像，并如何在不同的开发阶段和生产环境中共享和运行这些镜像。

本书分为不同部分，帮助你使用软件容器技术。首先，你将学习如何使用主机环境构建和运行应用程序，使用多个组件，然后你将学习如何在复杂的容器编排器中分布式运行它们。

本书聚焦于 Kubernetes 容器编排器，因为它具有独特的功能和广泛的流行度。你将学习如何使用不同的 Kubernetes 资源来安全地完成各种应用架构模型。书中还将介绍不同的软件选项，帮助你在桌面上使用完全功能的 Kubernetes 打包平台来创建和测试应用程序。我们将教你如何使用这些 Kubernetes 桌面环境来准备应用程序，并采用最佳安全实践，在任何 Kubernetes 平台上交付它们。我们将涵盖重要的主题，如数据管理（配置、敏感数据和应用数据）、发布应用程序的不同机制，以及应用可观察性（监控、日志和可追溯性）。

最后，我们将向你展示如何自动化构建、测试和交付应用程序，创建在 Kubernetes 集群中运行的持续集成和持续交付工作流。

# 本书适合的读者

本书适用于软件开发生命周期中的不同角色：

+   学习如何使用软件容器准备应用程序的开发人员，应用程序在容器编排器和现代微服务架构中分布式运行。

+   需要实现安全软件供应链的 DevOps 人员，使用软件容器技术。

# 本书内容

*第一章*，*使用 Docker 构建现代基础设施和应用程序*，解释了软件架构的发展及微服务如何与基于容器的应用程序契合，原因在于它们的特殊功能和特点。

*第二章*，*构建 Docker 镜像*，教你什么是容器镜像，解释了镜像的层次模型及如何使用 Dockerfile 构建这些镜像，采用最佳安全实践。

*第三章*，*发布 Docker 镜像*，展示了如何存储和共享你项目的容器镜像。

*第四章*，*运行 Docker 容器*，介绍了如何使用不同的容器客户端运行容器，解释了如何管理容器的隔离、安全性和资源使用。

*第五章*，*创建多容器应用程序*，教你如何基于多个组件使用容器运行应用程序，并使用 Docker Compose 在不同环境中构建、运行和部署应用程序。

*第六章*，*编排基础知识*，介绍了容器编排的概念，用于定义和管理分布式容器运行时中的应用程序组件逻辑，作为集群的一部分运行。

*第七章*，*使用 Swarm 进行编排*，探讨了 Docker Swarm 编排器，并通过示例展示了其功能和使用方法。

*第八章*，*使用 Kubernetes 编排器部署应用程序*，介绍了 Kubernetes 编排器，展示了其组件和功能，并解释了如何准备应用程序在自己的 Kubernetes 平台上运行。

*第九章*，*实施架构模式*，展示了如何利用 Kubernetes 的独特功能交付和保护不同的应用程序架构模型。

*第十章*，*在 Kubernetes 中利用应用程序数据管理*，深入探讨了用于管理敏感、临时和持久分布式数据的不同 Kubernetes 资源。

*第十一章*，*发布应用程序*，描述了不同的架构策略，以安全地在 Kubernetes 上发布应用程序前端。

*第十二章*，*获取应用程序洞察*，介绍了在 Kubernetes 中管理应用程序可观察性，使用开源工具监控指标并提供日志记录和追踪功能。

*第十三章*，*管理应用程序生命周期*，介绍了应用程序软件生命周期的概念和阶段，涵盖了如何通过使用容器来管理它们。本章还深入探讨了如何通过持续集成和持续部署模型来自动化和改进生命周期。

# 为了充分利用本书内容

本书中，我们将使用不同的开源工具来创建、运行和共享软件容器。本书提供了不同的实验环境，你可以选择自己最舒适的环境进行操作。为了跟随本书中的实验，你需要以下内容：

+   推荐使用一台普通的笔记本电脑或台式机，配备现代 CPU（如 Intel Core i5 或 i7，或相当的 AMD CPU）和 16GB 内存。你可能能在资源较低的情况下运行实验，但体验可能会受到影响。

+   一种 Microsoft Windows 或 Linux 操作系统。尽管本书将提到 Linux，你也可以选择使用任意一种操作系统。

+   你需要具备一定的 Linux/Windows 用户级别知识。

+   具有 Go、JavaScript、Java 或 .NET Core 等常见编程语言的编程经验会很有帮助，尽管示例并不复杂，易于跟随。

| **书中涉及的** **软件/硬件** | **操作系统** **要求** |
| --- | --- |
| Docker 和其他软件容器工具 | Windows、macOS 或 Linux |
| Docker Swarm 调度器 | Windows、macOS 或 Linux |
| Kubernetes 调度器桌面环境，如 Docker Desktop、Rancher Desktop 和 Minikube | Windows、macOS 或 Linux |
| 监控、日志记录和追踪工具，如 Prometheus、Grafana Loki 和 OpenTelemetry | Windows、macOS 或 Linux |

实验中使用的 Kubernetes 特性将在任何上述操作系统上运行。如果底层平台需要特殊的特性，会在实验中描述。

**如果你使用的是本书的数字版本，建议你自己输入代码，或者从本书的 GitHub 仓库中访问代码（链接将在下一节提供）。这样可以避免由于复制和粘贴代码而导致的潜在错误。**

# 下载示例代码文件

您可以从 GitHub 下载本书的示例代码文件，地址为 [`github.com/PacktPublishing/Containers-for-Developers-Handbook`](https://github.com/PacktPublishing/Containers-for-Developers-Handbook)。如果代码有更新，GitHub 仓库中的代码会随之更新。

我们还提供来自我们丰富图书和视频目录中的其他代码包，您可以在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 访问。快来看看吧！

# 实践中的代码

本书的 *实践中的代码* 视频可以在 [`packt.link/JdOIY`](https://packt.link/JdOIY) 查看。

# 使用的约定

本书中使用了若干文本约定。

`文本中的代码`：表示文本中的代码字、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。例如：“我们可以通过执行 `docker` `image inspect` 来验证系统的镜像并查看其信息。”

一段代码块的格式如下：

```
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: replicated-webserver
spec:
  replicas: 3
  selector:
    matchLabels:
      application: webserver
  template:
     metadata:
         application: webserver
     spec:
       containers:
       - name: webserver-container
         image: docker.io/nginx:alpine
```

所有命令行输入或输出如下所示：

```
$ docker rm -f webserver webserver2
```

**粗体**：表示新术语、重要词汇或屏幕上显示的词语。例如，菜单或对话框中的词语会以 **粗体** 显示。示例如下：“你可以通过快速访问 Docker Desktop 设置，导航至 **Settings** | **Resources** | **WSL Integration** 来验证这一点。”

提示或重要说明

显示如下。

# 联系我们

我们非常欢迎读者的反馈。

**一般反馈**：如果您对本书的任何部分有疑问，请通过电子邮件联系我们：customercare@packtpub.com，并在邮件主题中提及书名。

**勘误表**：尽管我们已尽力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将非常感激您向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果您在互联网上发现任何我们作品的非法副本，我们将非常感谢您提供其所在地址或网站名称。请通过 copyright@packt.com 与我们联系，并附上链接。

**如果您有意成为作者**：如果您在某个领域有专业知识，并且有兴趣编写或为书籍做贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读完《开发者容器手册》，我们非常希望听到您的想法！请[点击这里直接进入亚马逊评价页面](https://packt.link/r/1805127985)并分享您的反馈。

您的评价对我们和技术社区非常重要，能帮助我们确保提供卓越的优质内容。

# 下载本书的免费 PDF 版本

感谢您购买本书！

您喜欢随时随地阅读，但又无法携带实体书籍？您的电子书购买是否与您选择的设备不兼容？

不用担心，现在每本 Packt 图书您都可以免费获得该书的 DRM 无保护 PDF 版本。

随时随地，在任何设备上阅读。直接从您最喜欢的技术书籍中搜索、复制并粘贴代码到您的应用程序中。

福利不仅如此，您还可以独享折扣、时事通讯，以及每日通过邮箱收到优质的免费内容。

请按照以下简单步骤获得这些好处：

1.  扫描二维码或访问以下链接

![](img/B19845_QR_Free_PDF.jpg)

[`packt.link/free-ebook/978-1-80512-798-7`](https://packt.link/free-ebook/978-1-80512-798-7)

1.  提交您的购买凭证

1.  就是这样！我们将直接通过电子邮件发送您的免费 PDF 和其他福利。

# 第一部分：容器的关键概念

本部分将解释软件容器的关键概念。我们将学习它们的主要特性，如何利用操作系统的常见功能实现*默认安全*概念，以及如何在 Linux 和 Windows 环境中基于容器创建和部署应用程序。

本部分包含以下章节：

+   *第一章*，*使用 Docker 构建现代基础设施与应用程序*

+   *第二章*，*构建 Docker 镜像*

+   *第三章*，*发布 Docker 镜像*

+   *第四章*，*运行 Docker 容器*

+   *第五章*, *创建多容器应用程序*
